import{g as e,e as s,a as t,c as n,b as a,I as i,F as r,i as o,M as l,B as c,L as u,A as p,d}from"./app-lib-DrT52Y1I.js";import{f as h}from"./vendor-base-CH894yu9.js";import{R as m,x as v,j as y,r as f,y as g,z as x,A as j,D as b}from"./vendor-other-C9CDs0bE.js";import{P as N}from"./vendor-codetools-DM32n-ih.js";import"./vendor-xml-0NFUgpxB.js";import"./vendor-intl-fwtA2ciU.js";import"./vendor-markdown-CbyYl_L6.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const w=m.createContext({});w.displayName="EmbedContext",n(w,"_embed_context_wrapper",(e=>{e.ctxEmbed=e._embed_context_wrapper.instance}));const S=e("ai-embed"),A=v(class extends m.PureComponent{constructor(){super(...arguments),this.coursenum=this.props.coursenum||"null",this.pageid=this.props.pageid,this.title=this.parseStringOrList(this.props["button-title"]||this.props.title||""),this.instructions=this.parseStringOrList(this.props.instructions||""),this.chatEnabled="true"===this.props.chatEnabled,this.aiResponseType=this.parseStringOrList(this.props.aiResponseType||""),this.response=this.props.response||"",this.processing=!1,this.error=null,this.id=this.props.id||"",this.state={renderCounter:-1},this.setProcessing=e=>{this.processing=e,this.setState({renderCounter:this.state.renderCounter+1})},this.setResponse=e=>{this.response=e,this.setState({renderCounter:this.state.renderCounter+1})},this.setActions=e=>{this.actions=e,this.setState({renderCounter:this.state.renderCounter+1})},this.setError=e=>{this.error=e,this.setState({renderCounter:this.state.renderCounter+1})},this.setQuizAnalysisData=e=>{this.quizAnalysisData=e,this.setState({renderCounter:this.state.renderCounter+1})},this.generateEmbedResponse=async(e,s="default")=>{var t;if(this.processing)return null;this.setProcessing(!0),this.setError(null);try{const s=await a("aichat","v1"),n=Array.isArray(this.instructions)?this.instructions.indexOf(e):0,i=Array.isArray(this.title)&&-1!==n?this.title[n]:this.title,r=Array.isArray(this.aiResponseType)&&-1!==n?this.aiResponseType[n]:this.aiResponseType;console.log("response_type",r);const o=await s.post({path:`embed/${this.coursenum}`,data:{instructions:e||this.instructions,title:i,page_id:this.pageid,response_type:r}});if(null==(t=null==o?void 0:o.data)?void 0:t.messages){const e=o.data.messages.find((e=>"assistant"===e.role));if(e)return this.setResponse(e.content),this.setActions(e.actions),e.content}return this.setError("Failed to get AI response"),null}catch(n){return S.error("Error getting AI response:",n)(),this.setError(n.message||"Failed to get AI response"),null}finally{this.setProcessing(!1)}},this.generateQuizFeedback=async e=>{var s;if(this.processing)return null;this.setProcessing(!0),this.setError(null);try{const t=await a("aichat","v1"),n=await t.post({path:`embed/${this.coursenum}/quiz-analysis`,data:{quiz_data:e,page_id:this.pageid}});if(null==(s=null==n?void 0:n.data)?void 0:s.messages){const e=n.data.messages.find((e=>"assistant"===e.role));if(e)return this.setResponse(e.content),this.setActions(e.actions),e.content}return this.setError("Failed to get AI analysis of quiz results"),null}catch(t){return S.error("Error getting AI quiz analysis:",t)(),this.setError(t.message||"Failed to get AI analysis of quiz results"),null}finally{this.setProcessing(!1)}}}parseStringOrList(e){if(!e)return"";try{if(e.startsWith("[")&&e.endsWith("]")){const s=JSON.parse(e);if(Array.isArray(s))return s}return e}catch{return e}}componentDidMount(){this.setState({renderCounter:0})}render(){return y.jsx(w.Provider,{value:{instance:this,renderCounter:this.state.renderCounter},children:this.props.children})}}),z={en:{FnfezUqXGjMI:[{type:0,value:"across the "},{type:1,value:"subs"},{type:0,value:" most recent "},{offset:0,options:{one:{value:[{type:0,value:"attempt"}]},other:{value:[{type:0,value:"attempts"}]}},pluralType:"cardinal",type:6,value:"subs"},{type:0,value:"."}],Vn6sjvEwHkZK:[{type:1,value:"count"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"record"}]},other:{value:[{type:0,value:"records"}]}},pluralType:"cardinal",type:6,value:"count"},{type:0,value:"."}],Vrh8f2BVOLwy:[{type:0,value:"Search"}],"admin.pages.search.form.placeholder":[{type:0,value:"Search"}],c_3Gzhj7KLHI:[{type:1,value:"subs"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"attempt"}]},other:{value:[{type:0,value:"attempts"}]}},pluralType:"cardinal",type:6,value:"subs"},{type:0,value:" allowed."}],"epoch.duration.days":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"day"}]},other:{value:[{type:0,value:"days"}]},two:{value:[{type:0,value:"days"}]},zero:{value:[{type:0,value:"days"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.hours":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"hour"}]},other:{value:[{type:0,value:"hours"}]},two:{value:[{type:0,value:"hours"}]},zero:{value:[{type:0,value:"hours"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.millis":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"millisecond"}]},other:{value:[{type:0,value:"milliseconds"}]},two:{value:[{type:0,value:"milliseconds"}]},zero:{value:[{type:0,value:"milliseconds"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.minutes":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"minute"}]},other:{value:[{type:0,value:"minutes"}]},two:{value:[{type:0,value:"minutes"}]},zero:{value:[{type:0,value:"minutes"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.seconds":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"second"}]},other:{value:[{type:0,value:"seconds"}]},two:{value:[{type:0,value:"seconds"}]},zero:{value:[{type:0,value:"seconds"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.weeks":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"week"}]},other:{value:[{type:0,value:"weeks"}]},two:{value:[{type:0,value:"weeks"}]},zero:{value:[{type:0,value:"weeks"}]}},pluralType:"cardinal",type:6,value:"num"}],fkUMsTGn8rzM:[{type:0,value:"asdfasdf"}],"reader.pages.index.noauth":[{type:0,value:"Not authenticated: please launch from your LMS."}]},es:{FnfezUqXGjMI:[{type:0,value:"across the "},{type:1,value:"subs"},{type:0,value:" most recent "},{offset:0,options:{one:{value:[{type:0,value:"attempt"}]},other:{value:[{type:0,value:"attempts"}]}},pluralType:"cardinal",type:6,value:"subs"},{type:0,value:"."}],Vn6sjvEwHkZK:[{type:1,value:"count"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"record"}]},other:{value:[{type:0,value:"records"}]}},pluralType:"cardinal",type:6,value:"count"},{type:0,value:"."}],Vrh8f2BVOLwy:[{type:0,value:"Search"}],"admin.pages.search.form.placeholder":[{type:0,value:"Search"}],c_3Gzhj7KLHI:[{type:1,value:"subs"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"attempt"}]},other:{value:[{type:0,value:"attempts"}]}},pluralType:"cardinal",type:6,value:"subs"},{type:0,value:" allowed."}],"epoch.duration.days":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"day"}]},other:{value:[{type:0,value:"days"}]},two:{value:[{type:0,value:"days"}]},zero:{value:[{type:0,value:"days"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.hours":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"hour"}]},other:{value:[{type:0,value:"hours"}]},two:{value:[{type:0,value:"hours"}]},zero:{value:[{type:0,value:"hours"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.millis":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"millisecond"}]},other:{value:[{type:0,value:"milliseconds"}]},two:{value:[{type:0,value:"milliseconds"}]},zero:{value:[{type:0,value:"milliseconds"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.minutes":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"minute"}]},other:{value:[{type:0,value:"minutes"}]},two:{value:[{type:0,value:"minutes"}]},zero:{value:[{type:0,value:"minutes"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.seconds":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"second"}]},other:{value:[{type:0,value:"seconds"}]},two:{value:[{type:0,value:"seconds"}]},zero:{value:[{type:0,value:"seconds"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.weeks":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"week"}]},other:{value:[{type:0,value:"weeks"}]},two:{value:[{type:0,value:"weeks"}]},zero:{value:[{type:0,value:"weeks"}]}},pluralType:"cardinal",type:6,value:"num"}],fkUMsTGn8rzM:[{type:0,value:"Not authenticated: please launch from your LMS."}],"reader.pages.index.noauth":[{type:0,value:"Not authenticated: please launch from your LMS."}]}};function E({className:e=""}){return y.jsxs("div",{className:`quiz-skeleton-container ${e}`,role:"status","aria-live":"polite",children:[y.jsxs("div",{className:"ai-indicator loading",children:[y.jsx(i,{icon:"faSparkles",solid:!0,size:"small",className:"sparkle-icon"}),"Generating quiz..."]}),y.jsx("div",{className:"skeleton-question"}),y.jsxs("div",{className:"skeleton-options",children:[y.jsx("div",{className:"skeleton-option"}),y.jsx("div",{className:"skeleton-option"}),y.jsx("div",{className:"skeleton-option"}),y.jsx("div",{className:"skeleton-option"})]}),y.jsx("div",{className:"skeleton-button"}),y.jsx("span",{className:"sr-only",children:"Preparing your quiz. We are generating personalized questions based on the content."})]})}const k=({quizData:e,response:s,onQuizComplete:t})=>{const[n,a]=f.useState([]),[r,o]=f.useState(0),[l,c]=f.useState(null),[u,p]=f.useState(!1),[d,h]=f.useState(!1),[m,v]=f.useState(!1),[g,x]=f.useState(0),[j,b]=f.useState(!0),[N,w]=f.useState(!1),[S,A]=f.useState([]);f.useEffect((()=>{if(b(!0),w(!1),e)a(e),b(!1);else if(s)try{const e=JSON.parse(s);e&&e.length>0&&(a(e),b(!1))}catch(t){w(!0),b(!1),a([])}}),[e,s]);const z=e=>{u||c(e)},k=()=>{o(0),c(null),p(!1),v(!1),x(0),A([])};if(j||!n||0===n.length)return y.jsx("div",{className:"quiz-container",children:y.jsx(E,{})});if(N)return y.jsx("div",{className:"quiz-container",children:y.jsxs("div",{className:"quiz-error",role:"alert",children:[y.jsx("h3",{children:"Sorry, there was an issue loading the quiz."}),y.jsx("p",{children:"Please try again or contact support."})]})});if(m){const e=n.length-g;return y.jsx("div",{className:"quiz-container",children:y.jsxs("div",{className:"quiz-complete",role:"status","aria-live":"polite",children:[y.jsx("h2",{children:"Quiz Complete!"}),y.jsxs("p",{children:["Your score: ",g," out of ",n.length]}),y.jsx("p",{children:g===n.length?"Perfect score! Great job!":"Keep studying to improve your understanding."}),y.jsxs("div",{className:"quiz-action-buttons",children:[e>0&&y.jsxs("button",{className:"quiz-button analysis-button",onClick:()=>{const e={incorrectQuestions:S.filter((e=>!e.isCorrect)),correctQuestions:S.filter((e=>e.isCorrect)),overallScore:g/n.length};"function"==typeof t&&t(e,"analysis")},children:[y.jsx(i,{solid:!0,icon:"faSparkles",className:"sparkle-icon","aria-hidden":"true"}),"Get Personalized Help"]}),y.jsx("button",{className:"quiz-button retry-button",onClick:k,children:"Retry Quiz"})]}),e>0&&y.jsxs("div",{className:"quiz-analysis",children:[y.jsx("h3",{children:"Questions to Review:"}),y.jsx("div",{className:"review-questions",children:S.filter((e=>!e.isCorrect)).map(((e,s)=>y.jsxs("div",{className:"review-question",children:[y.jsxs("p",{children:[y.jsxs("strong",{children:["Question ",e.questionIndex+1,":"]})," ",e.question]}),y.jsxs("p",{className:"incorrect-answer",children:["Your answer: ",e.selectedAnswerText]}),y.jsxs("p",{className:"correct-answer",children:["Correct answer: ",e.correctAnswerText]}),y.jsxs("p",{className:"explanation",children:[y.jsx("strong",{children:"Explanation:"})," ",e.explanation]})]},s)))})]})]})})}const T=n[r];return y.jsxs("div",{className:"quiz-container",children:[y.jsxs("div",{className:"quiz-progress","aria-live":"polite",children:["Question ",r+1," of ",n.length]}),y.jsxs("div",{className:"quiz-question","aria-live":"polite",children:[y.jsx("h3",{children:T.question}),y.jsx("div",{className:"quiz-options",children:T.options.map(((e,s)=>y.jsxs("button",{className:`quiz-option ${l===s?"selected":""} ${u?s===T.correctAnswer?"correct":s===l?"incorrect":"":""}`,onClick:()=>z(s),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||z(s)},children:[y.jsx("span",{className:"option-letter",children:String.fromCharCode(65+s)}),y.jsx("span",{className:"option-text",children:e}),u&&s===T.correctAnswer&&y.jsx("span",{className:"option-icon correct-icon",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"},children:y.jsx(i,{solid:!0,icon:"faCheck","aria-hidden":"true"})}),u&&s===l&&s!==T.correctAnswer&&y.jsx("span",{className:"option-icon incorrect-icon",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"},children:y.jsx(i,{solid:!0,icon:"faTimes","aria-hidden":"true"})})]},s)))}),u?y.jsxs("div",{className:"quiz-feedback",role:"status","aria-live":"polite","aria-atomic":"true",children:[y.jsx("div",{className:"feedback-result "+(d?"correct":"incorrect"),children:d?"Correct!":"Incorrect!"}),y.jsxs("div",{className:"feedback-explanation",children:[y.jsx("h4",{children:"Explanation:"}),y.jsx("p",{children:T.explanation})]}),y.jsx("button",{className:"quiz-button next-button",onClick:()=>{if(r<n.length-1)o(r+1),c(null),p(!1);else{v(!0);const e={totalQuestions:n.length,correctAnswers:g,percentageScore:Math.round(g/n.length*100),answers:S,timestamp:(new Date).toISOString()};"function"==typeof t&&t(e);const s=JSON.parse(localStorage.getItem("quizResults")||"[]");s.push(e),localStorage.setItem("quizResults",JSON.stringify(s))}},children:r<n.length-1?"Next Question":"Complete Quiz"})]}):y.jsx("button",{className:"quiz-button submit-button",onClick:()=>{if(null===l)return;const e=n[r],s=l===e.correctAnswer;h(s),p(!0),s&&x(g+1);const t={questionIndex:r,question:e.question,options:e.options,selectedAnswer:l,selectedAnswerText:e.options[l],correctAnswer:e.correctAnswer,correctAnswerText:e.options[e.correctAnswer],isCorrect:s,explanation:e.explanation};A((e=>[...e,t]))},disabled:null===l,children:"Submit Answer"})]})]})},T=({inline:e,className:s,children:t,...n})=>{const a=f.useRef(null);return f.useEffect((()=>{!e&&s&&a.current&&setTimeout((()=>{N.highlightElement(a.current)}),0)}),[s,t,e]),y.jsx("code",{ref:a,className:s,style:e?void 0:{background:"#f5f7f9",color:"#333"},...n,children:t})};function C(){const e=m.useContext(w).instance,[s,t]=f.useState("idle"),[n,a]=f.useState(!1),[l,c]=f.useState(""),[u,p]=f.useState(!1),[d,h]=f.useState(null),[v,g]=f.useState(0),[x,j]=f.useState(!1),b=f.useRef(5),[S,A]=f.useState(!1),[,z]=f.useState(""),[,E]=f.useState(""),[C,q]=f.useState(!1),[I,R]=f.useState(""),[M,O]=f.useState(!1),[P,L]=f.useState(!1),_=Array.isArray(e.title)?e.title:[e.title],Q=Array.isArray(e.instructions)?e.instructions:[e.instructions],G=e.aiResponseType?Array.isArray(e.aiResponseType)?e.aiResponseType:[e.aiResponseType]:["default"];f.useEffect((()=>{(async()=>{try{const e=await o();h(e)}catch(e){console.error("Error loading markdown modules:",e)}})();(()=>{try{const e=parseInt(localStorage.getItem("practiceQuizViewCount")||"0");e<3&&_.some((e=>"Practice Quiz"===e))&&(L(!0),localStorage.setItem("practiceQuizViewCount",(e+1).toString()))}catch(e){console.error("Error checking new feature animation status:",e)}})()}),[_]),f.useEffect((()=>("success"===s&&(a(!0),$(),C||("quiz"===G[v]?O(!0):"quiz-analysis"===G[v]&&O(!1))),()=>{})),[s,G,v,C]),f.useEffect((()=>{e.response&&n||c("")}),[n]),f.useEffect((()=>{const s=e.id;if(!s)return;const t=s=>{const{term:t,definition:n}=s.detail;e.processing||(z(t),E(n),F())},n=`voshi-glossary-click-${s}`;return document.addEventListener(n,t),()=>{document.removeEventListener(n,t)}}),[x,e]);const $=()=>{if(!e.response)return;p(!0),c("");const s=e.response.split(" ");let t=0;const n=setInterval((()=>{const a=Math.min(t+b.current,s.length),i=s.slice(0,a).join(" ");c(i+(a<s.length?"▋":"")),t=a,s.length>100&&t<s.length/2&&(b.current=Math.min(20,b.current+2)),t>=s.length&&(clearInterval(n),p(!1),c(e.response),setTimeout((()=>{N.highlightAll()}),50))}),100);return()=>clearInterval(n)},H=(i=v)=>{if(i!==v){g(i),a(!1),c(""),t("processing");const s="quiz"===G[i];return O(s),q(!1),void e.generateEmbedResponse(Q[i],G[i]).then((()=>{t("success")})).catch((()=>{t("idle")}))}if(n)return a(!1),void c("");if("success"===s)return a(!0),void c(e.response);t("processing");const r="quiz"===G[v];O(r),q(!1),e.generateEmbedResponse(Q[v]).then((()=>{t("success")})).catch((()=>{t("idle")}))},V=()=>{const s=[{role:"user",content:"/"+_[v]},{role:"assistant",content:e.response,actions:e.actions||[]}],t=[...JSON.parse(localStorage.getItem(`chatMessages-${e.coursenum}`)||"[]"),...s];localStorage.setItem(`chatMessages-${e.coursenum}`,JSON.stringify(t)),window.dispatchEvent(new CustomEvent("aichat-messages-updated",{detail:{coursenum:e.coursenum}}))},F=async()=>{if(!x){j(!0),A(!1);try{await e.generateEmbedResponse(Q[0],"glossary")&&V()}catch(s){console.error("Error generating glossary response:",s)}finally{j(!1)}}},D=()=>{switch(s){case"processing":return y.jsxs(y.Fragment,{children:["Thinking",y.jsxs("span",{className:"jumping-dots",children:[y.jsx("span",{className:"dot",children:"."}),y.jsx("span",{className:"dot",children:"."}),y.jsx("span",{className:"dot",children:"."})]})]});case"success":return n?"Hide":"Reveal Content";default:return _[v]||"Get AI Help"}};if("glossary"===G[0]){const s=Array.isArray(e.title)?e.title:[e.title];return y.jsx("span",{className:"glossary-container",onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:y.jsxs("button",{className:"glossary-inline",onClick:F,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),F())},"aria-label":`Get AI definition for ${s[0]}`,"aria-expanded":S,tabIndex:0,children:[y.jsx(i,{solid:!0,icon:x?"faSpinner":"faSparkles",className:"sparkle-icon "+(x?"fa-spin":""),"aria-hidden":"true"}),S&&y.jsx("span",{className:"glossary-tooltip",role:"tooltip",children:y.jsx("div",{className:"glossary-tooltip-info",children:y.jsxs("i",{children:["Click here or the glossary term to get AI enhanced definition for ",s[0],"."]})})})]})})}return y.jsxs("div",{className:"ai-embed "+(n?"has-response":""),children:[!n&&y.jsx("div",{className:"ai-embed-buttons",children:_.map(((e,t)=>y.jsxs("button",{className:`ai-embed-button ${"success"===s&&t===v?"success":""} ${"processing"===s&&t===v?"processing":""} ${P&&"Practice Quiz"===e?"new-feature-highlight":""}`,onClick:()=>H(t),disabled:"processing"===s,children:[y.jsxs("div",{className:"button-content",children:[y.jsx("div",{className:"icon-wrapper",children:y.jsx(i,{solid:!0,icon:"faSparkles",className:`sparkle-icon ${"processing"===s&&t===v?"ai-sparkles":""} \n                                        ${"success"===s&&t===v?"success-pop":""} \n                                        ${P&&"Practice Quiz"===e?"new-feature-pulse":""}`})}),y.jsx("span",{className:"text-wrapper",children:t===v?D():e})]}),y.jsx("div",{className:"success-slide"})]},t)))}),n&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"ai-embed-header",children:[y.jsx("h3",{children:_[v]||"AI Response"}),y.jsxs("div",{className:"header-buttons",children:[_.length>1&&_.map(((e,s)=>s!==v&&y.jsx("button",{className:"ai-embed-button",onClick:()=>H(s),children:y.jsxs("div",{className:"button-content",children:[y.jsx("div",{className:"icon-wrapper",children:y.jsx(i,{solid:!0,icon:"faSparkles",className:"sparkle-icon response-icon"})}),y.jsx("span",{className:"text-wrapper",children:e})]})},s))),y.jsx(r,{featureKey:"aichat",coursenum:e.coursenum,children:y.jsx("button",{className:"ai-embed-button "+(M&&!C?"disabled-button":""),onClick:()=>V(),disabled:M&&!C,title:M&&!C?"Complete the quiz or get personalized help to continue":"Continue your conversation in the chatbot",children:y.jsxs("div",{className:"button-content",children:[y.jsx("div",{className:"icon-wrapper",children:y.jsx(i,{solid:!0,icon:"faComments",className:"sparkle-icon response-icon"})}),y.jsx("span",{className:"text-wrapper",children:"Continue in Chatbot"})]})})}),y.jsx("button",{className:"ai-embed-button",onClick:()=>{a(!1),c(""),t("processing"),q(!1),R("");const s="quiz"===G[v];O(s),e.generateEmbedResponse(Q[v]).then((()=>{t("success"),a(!0),$()})).catch((()=>{t("idle")}))},children:y.jsxs("div",{className:"button-content",children:[y.jsx("div",{className:"icon-wrapper",children:y.jsx(i,{solid:!0,icon:"faRedo",className:"sparkle-icon response-icon"})}),y.jsx("span",{className:"text-wrapper",children:"Redo"})]})}),y.jsx("button",{className:"ai-embed-button",onClick:()=>H(),children:y.jsxs("div",{className:"button-content",children:[y.jsx("div",{className:"icon-wrapper",children:y.jsx(i,{solid:!0,icon:"faChevronUp",className:"sparkle-icon response-icon"})}),y.jsx("span",{className:"text-wrapper",children:D()})]})})]})]}),y.jsx("div",{className:"ai-embed-response",children:"processing"===s?y.jsxs("div",{className:"loading-analysis-container",children:[y.jsx("div",{className:"loading-spinner",children:y.jsx(i,{solid:!0,icon:"faSpinner",className:"fa-spin"})}),y.jsxs("div",{className:"loading-message",children:[y.jsx("h3",{children:"Analyzing Quiz Results"}),y.jsx("p",{children:"Our AI is reviewing your answers and preparing personalized feedback..."})]})]}):C||"quiz-analysis"===G[v]?y.jsxs("div",{className:"markdown-content "+(u?"typing":""),children:[y.jsx("h2",{children:"Quiz Analysis"}),d?y.jsx(d.Markdown,{remarkPlugins:[d.remarkGfm,d.remarkMath],rehypePlugins:[d.rehypeKatex],children:I||l}):y.jsx("div",{className:"loading-markdown",children:"Loading..."})]}):"quiz"===G[v]?y.jsx(k,{quizData:null,response:l,onQuizComplete:(s,n)=>{O(!0),"analysis"===n&&(e.setQuizAnalysisData(s),t("processing"),e.generateQuizFeedback(s).then((e=>{R(e),q(!0),setTimeout((()=>{O(!1)}),0),t("success"),a(!0),$()})).catch((e=>{console.error("Quiz analysis error:",e),t("idle")})))}}):y.jsx("div",{className:"markdown-content "+(u?"typing":""),children:d?y.jsx(d.Markdown,{remarkPlugins:[d.remarkGfm,d.remarkMath],rehypePlugins:[d.rehypeKatex],components:{code:T,p:({children:e})=>y.jsx("span",{children:e}),li:({children:e})=>y.jsx("li",{children:e}),ul:({children:e})=>y.jsx("ul",{children:e}),ol:({children:e})=>y.jsx("ol",{children:e}),thead:({children:e})=>y.jsx("thead",{children:e}),tbody:({children:e})=>y.jsx("tbody",{children:e}),tr:({children:e})=>y.jsx("tr",{children:e}),th:({children:e})=>y.jsx("th",{children:e}),td:({children:e})=>y.jsx("td",{children:e})},children:l}):y.jsx("div",{children:"Loading markdown..."})})})]})]})}function q(){return y.jsxs(g,{children:[y.jsx(x,{exact:!0,path:"/",children:y.jsx(C,{})}),y.jsx(x,{children:y.jsx(l,{className:"my-2 text-center",message:"This page has left the building [invalid or unknown path]."})})]})}h.setOptions({strict:!1});const I=class extends c{};I.ELEMENT_NAME="AiEmbedElement",I.ELEMENT_TAG=`vapp-${s.VOSHI_APP}`,I.REACT_COMPONENT=function({webcomp:e,...t}){const n=e.isStandalone?j:b;return y.jsx(u,{messages:z,children:y.jsx(n,{basename:s.VOSHI_APP_PATH,initialIndex:0,initialEntries:[e.config.path||"/"],children:y.jsx(p,{initializing:y.jsx(y.Fragment,{}),children:()=>y.jsx(r,{featureKey:"aiembed",coursenum:e.config.coursenum||e.getAttribute("coursenum"),children:y.jsx(d,{children:y.jsx(A,{webcomp:e,coursenum:e.config.coursenum||e.getAttribute("coursenum"),pageid:e.config.pageid||e.getAttribute("pageid"),title:e.config["button-title"]||e.getAttribute("button-title")||e.config.title||e.getAttribute("title"),instructions:e.config.instructions||e.getAttribute("instructions"),chatEnabled:e.config.chatEnabled||e.getAttribute("chat-enabled"),response:e.config.response||e.getAttribute("response"),aiResponseType:e.config.aiResponseType||e.getAttribute("ai-response-type"),id:e.config.id||e.getAttribute("id"),children:y.jsx(q,{})})})})})})})},I.CONFIG={...c.CONFIG,coursenum:void 0,pageid:void 0,title:"","button-title":"",instructions:"",chatEnabled:!0,response:"",aiResponseType:"",id:void 0},I.ATTRIBUTES={...c.ATTRIBUTES,coursenum:void 0,pageid:void 0,title:"","button-title":"",instructions:"","chat-enabled":!0,response:"","ai-response-type":"",id:void 0},function(n){const a=e("voshi");try{if(!s.VOSHI_APP)throw new Error("environment is missing VOSHI_APP");if(!s.VOSHI_STAGE)throw new Error("environment is missing VOSHI_STAGE");if(!s.VOSHI_BUILD)throw new Error("environment is missing VOSHI_BUILD");if(!s.VOSHI_PLATFORM)throw new Error("environment is missing VOSHI_PLATFORM");a.force("welcome to {}",s.appsig)(),s.appsig!==t.appsig&&a.force("built as {}",t.appsig)(),customElements.get(n.ELEMENT_TAG)?a.info(`custom element already defined for <${n.ELEMENT_TAG}>`)():(a.info(`defining custom element ${n.ELEMENT_NAME} for <${n.ELEMENT_TAG}>`)(),customElements.define(n.ELEMENT_TAG,n))}catch(i){a.error("Error loading app",i)()}}(I);
