import{g as e,e as a,a as t,c as s,b as u,I as l,M as o,B as r,L as n,A as i,F as p,d as c}from"./app-lib-B9BkLvoS.js";import{f as v}from"./vendor-base-DS2qoW1K.js";import{R as y,w as d,j as m,r as h,S as f,d as w,e as x,f as j}from"./vendor-other-dd6nr4Cg.js";import"./vendor-xml-0NFUgpxB.js";import"./vendor-intl-dzMm3aj6.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)})).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const g=y.createContext({});g.displayName="AISearchContext",s(g,"_aisearch_context_wrapper",(e=>{e.ctxAISearch=e._aisearch_context_wrapper.instance}));const T=d(class extends y.PureComponent{constructor(){super(...arguments),this.coursenum=this.props.coursenum||"",this.query=this.props.query||"",this.state={renderCounter:-1},this.generateSearchResponse=async()=>{const e=await u("aichat","v1");return await e.post({path:`search/${this.coursenum}`,data:{query:this.query}})}}componentDidMount(){this.setState({renderCounter:0})}render(){return m.jsx(g.Provider,{value:{instance:this,renderCounter:this.state.renderCounter},children:this.props.children})}}),N={en:{FnfezUqXGjMI:[{type:0,value:"across the "},{type:1,value:"subs"},{type:0,value:" most recent "},{offset:0,options:{one:{value:[{type:0,value:"attempt"}]},other:{value:[{type:0,value:"attempts"}]}},pluralType:"cardinal",type:6,value:"subs"},{type:0,value:"."}],Vn6sjvEwHkZK:[{type:1,value:"count"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"record"}]},other:{value:[{type:0,value:"records"}]}},pluralType:"cardinal",type:6,value:"count"},{type:0,value:"."}],Vrh8f2BVOLwy:[{type:0,value:"Search"}],"admin.pages.search.form.placeholder":[{type:0,value:"Search"}],c_3Gzhj7KLHI:[{type:1,value:"subs"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"attempt"}]},other:{value:[{type:0,value:"attempts"}]}},pluralType:"cardinal",type:6,value:"subs"},{type:0,value:" allowed."}],"epoch.duration.days":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"day"}]},other:{value:[{type:0,value:"days"}]},two:{value:[{type:0,value:"days"}]},zero:{value:[{type:0,value:"days"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.hours":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"hour"}]},other:{value:[{type:0,value:"hours"}]},two:{value:[{type:0,value:"hours"}]},zero:{value:[{type:0,value:"hours"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.millis":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"millisecond"}]},other:{value:[{type:0,value:"milliseconds"}]},two:{value:[{type:0,value:"milliseconds"}]},zero:{value:[{type:0,value:"milliseconds"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.minutes":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"minute"}]},other:{value:[{type:0,value:"minutes"}]},two:{value:[{type:0,value:"minutes"}]},zero:{value:[{type:0,value:"minutes"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.seconds":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"second"}]},other:{value:[{type:0,value:"seconds"}]},two:{value:[{type:0,value:"seconds"}]},zero:{value:[{type:0,value:"seconds"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.weeks":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"week"}]},other:{value:[{type:0,value:"weeks"}]},two:{value:[{type:0,value:"weeks"}]},zero:{value:[{type:0,value:"weeks"}]}},pluralType:"cardinal",type:6,value:"num"}],fkUMsTGn8rzM:[{type:0,value:"asdfasdf"}],"reader.pages.index.noauth":[{type:0,value:"Not authenticated: please launch from your LMS."}]},es:{FnfezUqXGjMI:[{type:0,value:"across the "},{type:1,value:"subs"},{type:0,value:" most recent "},{offset:0,options:{one:{value:[{type:0,value:"attempt"}]},other:{value:[{type:0,value:"attempts"}]}},pluralType:"cardinal",type:6,value:"subs"},{type:0,value:"."}],Vn6sjvEwHkZK:[{type:1,value:"count"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"record"}]},other:{value:[{type:0,value:"records"}]}},pluralType:"cardinal",type:6,value:"count"},{type:0,value:"."}],Vrh8f2BVOLwy:[{type:0,value:"Search"}],"admin.pages.search.form.placeholder":[{type:0,value:"Search"}],c_3Gzhj7KLHI:[{type:1,value:"subs"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"attempt"}]},other:{value:[{type:0,value:"attempts"}]}},pluralType:"cardinal",type:6,value:"subs"},{type:0,value:" allowed."}],"epoch.duration.days":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"day"}]},other:{value:[{type:0,value:"days"}]},two:{value:[{type:0,value:"days"}]},zero:{value:[{type:0,value:"days"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.hours":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"hour"}]},other:{value:[{type:0,value:"hours"}]},two:{value:[{type:0,value:"hours"}]},zero:{value:[{type:0,value:"hours"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.millis":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"millisecond"}]},other:{value:[{type:0,value:"milliseconds"}]},two:{value:[{type:0,value:"milliseconds"}]},zero:{value:[{type:0,value:"milliseconds"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.minutes":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"minute"}]},other:{value:[{type:0,value:"minutes"}]},two:{value:[{type:0,value:"minutes"}]},zero:{value:[{type:0,value:"minutes"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.seconds":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"second"}]},other:{value:[{type:0,value:"seconds"}]},two:{value:[{type:0,value:"seconds"}]},zero:{value:[{type:0,value:"seconds"}]}},pluralType:"cardinal",type:6,value:"num"}],"epoch.duration.weeks":[{type:1,value:"num"},{type:0,value:" "},{offset:0,options:{one:{value:[{type:0,value:"week"}]},other:{value:[{type:0,value:"weeks"}]},two:{value:[{type:0,value:"weeks"}]},zero:{value:[{type:0,value:"weeks"}]}},pluralType:"cardinal",type:6,value:"num"}],fkUMsTGn8rzM:[{type:0,value:"Not authenticated: please launch from your LMS."}],"reader.pages.index.noauth":[{type:0,value:"Not authenticated: please launch from your LMS."}]}};function E({className:e=""}){return m.jsxs("div",{className:`skeleton-container ${e}`,children:[m.jsxs("div",{className:"ai-indicator loading",children:[m.jsx(l,{icon:"faSparkles",solid:!0,size:"small",className:"sparkle-icon"}),"Searching..."]}),m.jsx("div",{className:"skeleton-summary"}),m.jsx("div",{className:"skeleton-item"}),m.jsx("div",{className:"skeleton-item"}),m.jsx("div",{className:"skeleton-item"})]})}function S(){const a=y.useContext(g).instance,[t,s]=h.useState(null),[u,o]=h.useState(!0),[r,n]=h.useState(null),i=e("ai-search");h.useEffect((()=>{(async()=>{if(!a.query||!a.coursenum)return o(!1),void n("No search query or course number provided");u||o(!0);try{const e=await a.generateSearchResponse();s(e.data)}catch(e){i.error("Search failed:",e)(),n("Search failed")}finally{o(!1)}})()}),[]);const p=(e,t=!1,s=null)=>{if(!e)return;const u=window.location.hostname,l=a.coursenum;let o;if(o=u.includes("local")?"https://local.myeducator.com:4400/reader/":u.includes("staging")?"https://staging.myeducator.com/reader/":"https://myeducator.com/reader/",t&&s){o+=`search/${l}/?searchterms=${encodeURIComponent(s)}`,window.location.href=o}else o+=`web/${l}/${e}`,window.open(o,"_blank")};return m.jsxs("div",{className:"search-container",children:[u?m.jsx(m.Fragment,{}):m.jsxs("div",{className:"ai-indicator "+(u?"loading":""),children:[m.jsx(l,{icon:"faSparkles",solid:!0,size:"small",className:"sparkle-icon"}),r?"No matches found":t&&`Found ${t.total_results} Matches`]}),u?m.jsx(E,{}):r?m.jsx("div",{className:"no-results",children:"No matches found"}):t&&m.jsxs("div",{className:"search-results",children:[t.revised_query&&t.query!==t.revised_query&&m.jsxs("div",{className:"revised-query",children:["Did you mean: ",m.jsx("button",{className:"suggestion-button",onClick:()=>p(a.coursenum,!0,t.revised_query),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||p(a.coursenum,!0,t.revised_query)},children:t.revised_query}),"?"]}),t.summary&&m.jsxs("div",{className:"summary-section",children:[m.jsx("h2",{children:"Summary"}),m.jsx("p",{children:t.summary})]}),m.jsx("div",{className:"results-list",children:t.results&&t.results.map(((e,a)=>m.jsxs("div",{className:"result-item",children:[m.jsx("button",{type:"button",className:"result-title",onClick:()=>p(e.page_id),children:e["chapter/section"]}),m.jsx("p",{className:"result-summary",children:e.summary})]},a)))})]})]})}function _(){return m.jsxs(f,{children:[m.jsx(w,{exact:!0,path:"*",children:m.jsx(S,{})}),m.jsx(w,{children:m.jsx(o,{className:"my-2 text-center",message:"This page has left the building [invalid or unknown path]."})})]})}v.setOptions({strict:!1});const k=class extends r{};k.ELEMENT_NAME="AISearchElement",k.ELEMENT_TAG=`vapp-${a.VOSHI_APP}`,k.REACT_COMPONENT=function({webcomp:e,...t}){const s=e.isStandalone?x:j;return m.jsx(n,{messages:N,children:m.jsx(s,{basename:a.VOSHI_APP_PATH,initialIndex:0,initialEntries:[e.config.path||"/"],children:m.jsx(i,{initializing:m.jsx(E,{}),children:()=>m.jsx(p,{featureKey:"aichat",coursenum:e.config.coursenum||e.getAttribute("coursenum"),children:m.jsx(c,{children:m.jsx(T,{webcomp:e,coursenum:e.config.coursenum||e.getAttribute("coursenum"),query:e.config.query||e.getAttribute("query"),children:m.jsx(_,{})})})})})})})},k.CONFIG={...r.CONFIG,coursenum:void 0,query:void 0},k.ATTRIBUTES={...r.ATTRIBUTES,coursenum:void 0,query:void 0},function(s){const u=e("voshi");try{if(!a.VOSHI_APP)throw new Error("environment is missing VOSHI_APP");if(!a.VOSHI_STAGE)throw new Error("environment is missing VOSHI_STAGE");if(!a.VOSHI_BUILD)throw new Error("environment is missing VOSHI_BUILD");if(!a.VOSHI_PLATFORM)throw new Error("environment is missing VOSHI_PLATFORM");u.force("welcome to {}",a.appsig)(),a.appsig!==t.appsig&&u.force("built as {}",t.appsig)(),customElements.get(s.ELEMENT_TAG)?u.info(`custom element already defined for <${s.ELEMENT_TAG}>`)():(u.info(`defining custom element ${s.ELEMENT_NAME} for <${s.ELEMENT_TAG}>`)(),customElements.define(s.ELEMENT_TAG,s))}catch(l){u.error("Error loading app",l)()}}(k);
