(function(global,factory){"use strict";if(typeof module==="object"&&typeof module.exports==="object"){module.exports=global.document?factory(global,true):function(w){if(!w.document){throw new Error("jQuery requires a window with a document");}
return factory(w);};}else{factory(global);}})(typeof window!=="undefined"?window:this,function(window,noGlobal){"use strict";var arr=[];var getProto=Object.getPrototypeOf;var slice=arr.slice;var flat=arr.flat?function(array){return arr.flat.call(array);}:function(array){return arr.concat.apply([],array);};var push=arr.push;var indexOf=arr.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var fnToString=hasOwn.toString;var ObjectFunctionString=fnToString.call(Object);var support={};var isFunction=function isFunction(obj){return typeof obj==="function"&&typeof obj.nodeType!=="number"&&typeof obj.item!=="function";};var isWindow=function isWindow(obj){return obj!=null&&obj===obj.window;};var document=window.document;var preservedScriptAttributes={type:true,src:true,nonce:true,noModule:true};function DOMEval(code,node,doc){doc=doc||document;var i,val,script=doc.createElement("script");script.text=code;if(node){for(i in preservedScriptAttributes){val=node[i]||node.getAttribute&&node.getAttribute(i);if(val){script.setAttribute(i,val);}}}
doc.head.appendChild(script).parentNode.removeChild(script);}
function toType(obj){if(obj==null){return obj+"";}
return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj;}
var
version="3.6.4",jQuery=function(selector,context){return new jQuery.fn.init(selector,context);};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,length:0,toArray:function(){return slice.call(this);},get:function(num){if(num==null){return slice.call(this);}
return num<0?this[num+this.length]:this[num];},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;return ret;},each:function(callback){return jQuery.each(this,callback);},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},slice:function(){return this.pushStack(slice.apply(this,arguments));},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},even:function(){return this.pushStack(jQuery.grep(this,function(_elem,i){return(i+1)%2;}));},odd:function(){return this.pushStack(jQuery.grep(this,function(_elem,i){return i%2;}));},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[]);},end:function(){return this.prevObject||this.constructor();},push:push,sort:arr.sort,splice:arr.splice};jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++;}
if(typeof target!=="object"&&!isFunction(target)){target={};}
if(i===length){target=this;i--;}
for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){copy=options[name];if(name==="__proto__"||target===copy){continue;}
if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=Array.isArray(copy)))){src=target[name];if(copyIsArray&&!Array.isArray(src)){clone=[];}else if(!copyIsArray&&!jQuery.isPlainObject(src)){clone={};}else{clone=src;}
copyIsArray=false;target[name]=jQuery.extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}
return target;};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function(msg){throw new Error(msg);},noop:function(){},isPlainObject:function(obj){var proto,Ctor;if(!obj||toString.call(obj)!=="[object Object]"){return false;}
proto=getProto(obj);if(!proto){return true;}
Ctor=hasOwn.call(proto,"constructor")&&proto.constructor;return typeof Ctor==="function"&&fnToString.call(Ctor)===ObjectFunctionString;},isEmptyObject:function(obj){var name;for(name in obj){return false;}
return true;},globalEval:function(code,options,doc){DOMEval(code,{nonce:options&&options.nonce},doc);},each:function(obj,callback){var length,i=0;if(isArrayLike(obj)){length=obj.length;for(;i<length;i++){if(callback.call(obj[i],i,obj[i])===false){break;}}}else{for(i in obj){if(callback.call(obj[i],i,obj[i])===false){break;}}}
return obj;},makeArray:function(arr,results){var ret=results||[];if(arr!=null){if(isArrayLike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr);}else{push.call(ret,arr);}}
return ret;},inArray:function(elem,arr,i){return arr==null?-1:indexOf.call(arr,elem,i);},merge:function(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j];}
first.length=i;return first;},grep:function(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect){matches.push(elems[i]);}}
return matches;},map:function(elems,callback,arg){var length,value,i=0,ret=[];if(isArrayLike(elems)){length=elems.length;for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret.push(value);}}}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret.push(value);}}}
return flat(ret);},guid:1,support:support});if(typeof Symbol==="function"){jQuery.fn[Symbol.iterator]=arr[Symbol.iterator];}
jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(_i,name){class2type["[object "+name+"]"]=name.toLowerCase();});function isArrayLike(obj){var length=!!obj&&"length"in obj&&obj.length,type=toType(obj);if(isFunction(obj)||isWindow(obj)){return false;}
return type==="array"||length===0||typeof length==="number"&&length>0&&(length-1)in obj;}
var Sizzle=(function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date(),preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),nonnativeSelectorCache=createCache(),sortOrder=function(a,b){if(a===b){hasDuplicate=true;}
return 0;},hasOwn=({}).hasOwnProperty,arr=[],pop=arr.pop,pushNative=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){var i=0,len=list.length;for(;i<len;i++){if(list[i]===elem){return i;}}
return-1;},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|"+"ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\[\\da-fA-F]{1,6}"+whitespace+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+
whitespace+"*\\]",pseudos=":("+identifier+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|"+".*"+")\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+
whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rleadingCombinator=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rdescend=new RegExp(whitespace+"|>"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={"ID":new RegExp("^#("+identifier+")"),"CLASS":new RegExp("^\\.("+identifier+")"),"TAG":new RegExp("^("+identifier+"|[*])"),"ATTR":new RegExp("^"+attributes),"PSEUDO":new RegExp("^"+pseudos),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+
whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+
whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),"bool":new RegExp("^(?:"+booleans+")$","i"),"needsContext":new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rhtml=/HTML$/i,rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,runescape=new RegExp("\\\\[\\da-fA-F]{1,6}"+whitespace+"?|\\\\([^\\r\\n\\f])","g"),funescape=function(escape,nonHex){var high="0x"+escape.slice(1)-0x10000;return nonHex?nonHex:high<0?String.fromCharCode(high+0x10000):String.fromCharCode(high>>10|0xD800,high&0x3FF|0xDC00);},rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,fcssescape=function(ch,asCodePoint){if(asCodePoint){if(ch==="\0"){return"\uFFFD";}
return ch.slice(0,-1)+"\\"+
ch.charCodeAt(ch.length-1).toString(16)+" ";}
return"\\"+ch;},unloadHandler=function(){setDocument();},inDisabledFieldset=addCombinator(function(elem){return elem.disabled===true&&elem.nodeName.toLowerCase()==="fieldset";},{dir:"parentNode",next:"legend"});try{push.apply((arr=slice.call(preferredDoc.childNodes)),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType;}catch(e){push={apply:arr.length?function(target,els){pushNative.apply(target,slice.call(els));}:function(target,els){var j=target.length,i=0;while((target[j++]=els[i++])){}
target.length=j-1;}};}
function Sizzle(selector,context,results,seed){var m,i,elem,nid,match,groups,newSelector,newContext=context&&context.ownerDocument,nodeType=context?context.nodeType:9;results=results||[];if(typeof selector!=="string"||!selector||nodeType!==1&&nodeType!==9&&nodeType!==11){return results;}
if(!seed){setDocument(context);context=context||document;if(documentIsHTML){if(nodeType!==11&&(match=rquickExpr.exec(selector))){if((m=match[1])){if(nodeType===9){if((elem=context.getElementById(m))){if(elem.id===m){results.push(elem);return results;}}else{return results;}}else{if(newContext&&(elem=newContext.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results;}}}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results;}else if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results;}}
if(support.qsa&&!nonnativeSelectorCache[selector+" "]&&(!rbuggyQSA||!rbuggyQSA.test(selector))&&(nodeType!==1||context.nodeName.toLowerCase()!=="object")){newSelector=selector;newContext=context;if(nodeType===1&&(rdescend.test(selector)||rleadingCombinator.test(selector))){newContext=rsibling.test(selector)&&testContext(context.parentNode)||context;if(newContext!==context||!support.scope){if((nid=context.getAttribute("id"))){nid=nid.replace(rcssescape,fcssescape);}else{context.setAttribute("id",(nid=expando));}}
groups=tokenize(selector);i=groups.length;while(i--){groups[i]=(nid?"#"+nid:":scope")+" "+
toSelector(groups[i]);}
newSelector=groups.join(",");}
try{push.apply(results,newContext.querySelectorAll(newSelector));return results;}catch(qsaError){nonnativeSelectorCache(selector,true);}finally{if(nid===expando){context.removeAttribute("id");}}}}}
return select(selector.replace(rtrim,"$1"),context,results,seed);}
function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength){delete cache[keys.shift()];}
return(cache[key+" "]=value);}
return cache;}
function markFunction(fn){fn[expando]=true;return fn;}
function assert(fn){var el=document.createElement("fieldset");try{return!!fn(el);}catch(e){return false;}finally{if(el.parentNode){el.parentNode.removeChild(el);}
el=null;}}
function addHandle(attrs,handler){var arr=attrs.split("|"),i=arr.length;while(i--){Expr.attrHandle[arr[i]]=handler;}}
function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&a.sourceIndex-b.sourceIndex;if(diff){return diff;}
if(cur){while((cur=cur.nextSibling)){if(cur===b){return-1;}}}
return a?1:-1;}
function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type;};}
function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type;};}
function createDisabledPseudo(disabled){return function(elem){if("form"in elem){if(elem.parentNode&&elem.disabled===false){if("label"in elem){if("label"in elem.parentNode){return elem.parentNode.disabled===disabled;}else{return elem.disabled===disabled;}}
return elem.isDisabled===disabled||elem.isDisabled!==!disabled&&inDisabledFieldset(elem)===disabled;}
return elem.disabled===disabled;}else if("label"in elem){return elem.disabled===disabled;}
return false;};}
function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[(j=matchIndexes[i])]){seed[j]=!(matches[j]=seed[j]);}}});});}
function testContext(context){return context&&typeof context.getElementsByTagName!=="undefined"&&context;}
support=Sizzle.support={};isXML=Sizzle.isXML=function(elem){var namespace=elem&&elem.namespaceURI,docElem=elem&&(elem.ownerDocument||elem).documentElement;return!rhtml.test(namespace||docElem&&docElem.nodeName||"HTML");};setDocument=Sizzle.setDocument=function(node){var hasCompare,subWindow,doc=node?node.ownerDocument||node:preferredDoc;if(doc==document||doc.nodeType!==9||!doc.documentElement){return document;}
document=doc;docElem=document.documentElement;documentIsHTML=!isXML(document);if(preferredDoc!=document&&(subWindow=document.defaultView)&&subWindow.top!==subWindow){if(subWindow.addEventListener){subWindow.addEventListener("unload",unloadHandler,false);}else if(subWindow.attachEvent){subWindow.attachEvent("onunload",unloadHandler);}}
support.scope=assert(function(el){docElem.appendChild(el).appendChild(document.createElement("div"));return typeof el.querySelectorAll!=="undefined"&&!el.querySelectorAll(":scope fieldset div").length;});support.cssHas=assert(function(){try{document.querySelector(":has(*,:jqfake)");return false;}catch(e){return true;}});support.attributes=assert(function(el){el.className="i";return!el.getAttribute("className");});support.getElementsByTagName=assert(function(el){el.appendChild(document.createComment(""));return!el.getElementsByTagName("*").length;});support.getElementsByClassName=rnative.test(document.getElementsByClassName);support.getById=assert(function(el){docElem.appendChild(el).id=expando;return!document.getElementsByName||!document.getElementsByName(expando).length;});if(support.getById){Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId;};};Expr.find["ID"]=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var elem=context.getElementById(id);return elem?[elem]:[];}};}else{Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return node&&node.value===attrId;};};Expr.find["ID"]=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var node,i,elems,elem=context.getElementById(id);if(elem){node=elem.getAttributeNode("id");if(node&&node.value===id){return[elem];}
elems=context.getElementsByName(id);i=0;while((elem=elems[i++])){node=elem.getAttributeNode("id");if(node&&node.value===id){return[elem];}}}
return[];}};}
Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(tag);}else if(support.qsa){return context.querySelectorAll(tag);}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while((elem=results[i++])){if(elem.nodeType===1){tmp.push(elem);}}
return tmp;}
return results;};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!=="undefined"&&documentIsHTML){return context.getElementsByClassName(className);}};rbuggyMatches=[];rbuggyQSA=[];if((support.qsa=rnative.test(document.querySelectorAll))){assert(function(el){var input;docElem.appendChild(el).innerHTML="<a id='"+expando+"'></a>"+"<select id='"+expando+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(el.querySelectorAll("[msallowcapture^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")");}
if(!el.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")");}
if(!el.querySelectorAll("[id~="+expando+"-]").length){rbuggyQSA.push("~=");}
input=document.createElement("input");input.setAttribute("name","");el.appendChild(input);if(!el.querySelectorAll("[name='']").length){rbuggyQSA.push("\\["+whitespace+"*name"+whitespace+"*="+
whitespace+"*(?:''|\"\")");}
if(!el.querySelectorAll(":checked").length){rbuggyQSA.push(":checked");}
if(!el.querySelectorAll("a#"+expando+"+*").length){rbuggyQSA.push(".#.+[+~]");}
el.querySelectorAll("\\\f");rbuggyQSA.push("[\\r\\n\\f]");});assert(function(el){el.innerHTML="<a href='' disabled='disabled'></a>"+"<select disabled='disabled'><option/></select>";var input=document.createElement("input");input.setAttribute("type","hidden");el.appendChild(input).setAttribute("name","D");if(el.querySelectorAll("[name=d]").length){rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?=");}
if(el.querySelectorAll(":enabled").length!==2){rbuggyQSA.push(":enabled",":disabled");}
docElem.appendChild(el).disabled=true;if(el.querySelectorAll(":disabled").length!==2){rbuggyQSA.push(":enabled",":disabled");}
el.querySelectorAll("*,:x");rbuggyQSA.push(",.*:");});}
if((support.matchesSelector=rnative.test((matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector)))){assert(function(el){support.disconnectedMatch=matches.call(el,"*");matches.call(el,"[s!='']:x");rbuggyMatches.push("!=",pseudos);});}
if(!support.cssHas){rbuggyQSA.push(":has");}
rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9&&a.documentElement||a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16));}:function(a,b){if(b){while((b=b.parentNode)){if(b===a){return true;}}}
return false;};sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;return 0;}
var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare){return compare;}
compare=(a.ownerDocument||a)==(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||(!support.sortDetached&&b.compareDocumentPosition(a)===compare)){if(a==document||a.ownerDocument==preferredDoc&&contains(preferredDoc,a)){return-1;}
if(b==document||b.ownerDocument==preferredDoc&&contains(preferredDoc,b)){return 1;}
return sortInput?(indexOf(sortInput,a)-indexOf(sortInput,b)):0;}
return compare&4?-1:1;}:function(a,b){if(a===b){hasDuplicate=true;return 0;}
var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup){return a==document?-1:b==document?1:aup?-1:bup?1:sortInput?(indexOf(sortInput,a)-indexOf(sortInput,b)):0;}else if(aup===bup){return siblingCheck(a,b);}
cur=a;while((cur=cur.parentNode)){ap.unshift(cur);}
cur=b;while((cur=cur.parentNode)){bp.unshift(cur);}
while(ap[i]===bp[i]){i++;}
return i?siblingCheck(ap[i],bp[i]):ap[i]==preferredDoc?-1:bp[i]==preferredDoc?1:0;};return document;};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements);};Sizzle.matchesSelector=function(elem,expr){setDocument(elem);if(support.matchesSelector&&documentIsHTML&&!nonnativeSelectorCache[expr+" "]&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret;}}catch(e){nonnativeSelectorCache(expr,true);}}
return Sizzle(expr,document,null,[elem]).length>0;};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!=document){setDocument(context);}
return contains(context,elem);};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!=document){setDocument(elem);}
var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null;};Sizzle.escape=function(sel){return(sel+"").replace(rcssescape,fcssescape);};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while((elem=results[i++])){if(elem===results[i]){j=duplicates.push(i);}}
while(j--){results.splice(duplicates[j],1);}}
sortInput=null;return results;};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){while((node=elem[i++])){ret+=getText(node);}}else if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent;}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem);}}}else if(nodeType===3||nodeType===4){return elem.nodeValue;}
return ret;};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~="){match[3]=" "+match[3]+" ";}
return match.slice(0,4);},"CHILD":function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3]){Sizzle.error(match[0]);}
match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+((match[7]+match[8])||match[3]==="odd");}else if(match[3]){Sizzle.error(match[0]);}
return match;},"PSEUDO":function(match){var excess,unquoted=!match[6]&&match[2];if(matchExpr["CHILD"].test(match[0])){return null;}
if(match[3]){match[2]=match[4]||match[5]||"";}else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess);}
return match.slice(0,3);}},filter:{"TAG":function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true;}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName;};},"CLASS":function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!=="undefined"&&elem.getAttribute("class")||"");});},"ATTR":function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!=";}
if(!operator){return true;}
result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.slice(-check.length)===check:operator==="~="?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:operator==="|="?result===check||result.slice(0,check.length+1)===check+"-":false;};},"CHILD":function(type,what,_argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode;}:function(elem,_context,xml){var cache,uniqueCache,outerCache,node,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,diff=false;if(parent){if(simple){while(dir){node=elem;while((node=node[dir])){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false;}}
start=dir=type==="only"&&!start&&"nextSibling";}
return true;}
start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){node=parent;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while((node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if(node.nodeType===1&&++diff&&node===elem){uniqueCache[type]=[dirruns,nodeIndex,diff];break;}}}else{if(useCache){node=elem;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex;}
if(diff===false){while((node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});uniqueCache[type]=[dirruns,diff];}
if(node===elem){break;}}}}}
diff-=last;return diff===first||(diff%first===0&&diff/first>=0);}};},"PSEUDO":function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument);}
if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i]);}}):function(elem){return fn(elem,0,args);};}
return fn;}},pseudos:{"not":markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,_context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if((elem=unmatched[i])){seed[i]=!(matches[i]=elem);}}}):function(elem,_context,xml){input[0]=elem;matcher(input,null,xml,results);input[0]=null;return!results.pop();};}),"has":markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0;};}),"contains":markFunction(function(text){text=text.replace(runescape,funescape);return function(elem){return(elem.textContent||getText(elem)).indexOf(text)>-1;};}),"lang":markFunction(function(lang){if(!ridentifier.test(lang||"")){Sizzle.error("unsupported lang: "+lang);}
lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if((elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0;}}while((elem=elem.parentNode)&&elem.nodeType===1);return false;};}),"target":function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id;},"root":function(elem){return elem===docElem;},"focus":function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex);},"enabled":createDisabledPseudo(false),"disabled":createDisabledPseudo(true),"checked":function(elem){var nodeName=elem.nodeName.toLowerCase();return(nodeName==="input"&&!!elem.checked)||(nodeName==="option"&&!!elem.selected);},"selected":function(elem){if(elem.parentNode){elem.parentNode.selectedIndex;}
return elem.selected===true;},"empty":function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeType<6){return false;}}
return true;},"parent":function(elem){return!Expr.pseudos["empty"](elem);},"header":function(elem){return rheader.test(elem.nodeName);},"input":function(elem){return rinputs.test(elem.nodeName);},"button":function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button";},"text":function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text");},"first":createPositionalPseudo(function(){return[0];}),"last":createPositionalPseudo(function(_matchIndexes,length){return[length-1];}),"eq":createPositionalPseudo(function(_matchIndexes,length,argument){return[argument<0?argument+length:argument];}),"even":createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i);}
return matchIndexes;}),"odd":createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i);}
return matchIndexes;}),"lt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument>length?length:argument;for(;--i>=0;){matchIndexes.push(i);}
return matchIndexes;}),"gt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;){matchIndexes.push(i);}
return matchIndexes;})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in{radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i);}
for(i in{submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i);}
function setFilters(){}
setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters();tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached){return parseOnly?0:cached.slice(0);}
soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar;}
groups.push((tokens=[]));}
matched=false;if((match=rleadingCombinator.exec(soFar))){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length);}
for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length);}}
if(!matched){break;}}
return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0);};function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++){selector+=tokens[i].value;}
return selector;}
function addCombinator(matcher,combinator,base){var dir=combinator.dir,skip=combinator.next,key=skip||dir,checkNonElements=base&&key==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml);}}
return false;}:function(elem,context,xml){var oldCache,uniqueCache,outerCache,newCache=[dirruns,doneName];if(xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true;}}}}else{while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});uniqueCache=outerCache[elem.uniqueID]||(outerCache[elem.uniqueID]={});if(skip&&skip===elem.nodeName.toLowerCase()){elem=elem[dir]||elem;}else if((oldCache=uniqueCache[key])&&oldCache[0]===dirruns&&oldCache[1]===doneName){return(newCache[2]=oldCache[2]);}else{uniqueCache[key]=newCache;if((newCache[2]=matcher(elem,context,xml))){return true;}}}}}
return false;};}
function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false;}}
return true;}:matchers[0];}
function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results);}
return results;}
function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if((elem=unmatched[i])){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i);}}}}
return newUnmatched;}
function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter);}
if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector);}
return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml);}
if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if((elem=temp[i])){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem);}}}
if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if((elem=matcherOut[i])){temp.push((matcherIn[i]=elem));}}
postFinder(null,(matcherOut=[]),temp,xml);}
i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem);}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml);}else{push.apply(results,matcherOut);}}});}
function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext;},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1;},implicitRelative,true),matchers=[function(elem,context,xml){var ret=(!leadingRelative&&(xml||context!==outermostContext))||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));checkContext=null;return ret;}];for(;i<len;i++){if((matcher=Expr.relative[tokens[i].type])){matchers=[addCombinator(elementMatcher(matchers),matcher)];}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break;}}
return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens((tokens=tokens.slice(j))),j<len&&toSelector(tokens));}
matchers.push(matcher);}}
return elementMatcher(matchers);}
function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",outermost),dirrunsUnique=(dirruns+=contextBackup==null?1:Math.random()||0.1),len=elems.length;if(outermost){outermostContext=context==document||context||outermost;}
for(;i!==len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;if(!context&&elem.ownerDocument!=document){setDocument(elem);xml=!documentIsHTML;}
while((matcher=elementMatchers[j++])){if(matcher(elem,context||document,xml)){results.push(elem);break;}}
if(outermost){dirruns=dirrunsUnique;}}
if(bySet){if((elem=!matcher&&elem)){matchedCount--;}
if(seed){unmatched.push(elem);}}}
matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while((matcher=setMatchers[j++])){matcher(unmatched,setMatched,context,xml);}
if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results);}}}
setMatched=condense(setMatched);}
push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&(matchedCount+setMatchers.length)>1){Sizzle.uniqueSort(results);}}
if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup;}
return unmatched;};return bySet?markFunction(superMatcher):superMatcher;}
compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!match){match=tokenize(selector);}
i=match.length;while(i--){cached=matcherFromTokens(match[i]);if(cached[expando]){setMatchers.push(cached);}else{elementMatchers.push(cached);}}
cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));cached.selector=selector;}
return cached;};select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector==="function"&&selector,match=!seed&&tokenize((selector=compiled.selector||selector));results=results||[];if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context){return results;}else if(compiled){context=context.parentNode;}
selector=selector.slice(tokens.shift().value.length);}
i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[(type=token.type)]){break;}
if((find=Expr.find[type])){if((seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results;}
break;}}}}
(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,!context||rsibling.test(selector)&&testContext(context.parentNode)||context);return results;};support.sortStable=expando.split("").sort(sortOrder).join("")===expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=assert(function(el){return el.compareDocumentPosition(document.createElement("fieldset"))&1;});if(!assert(function(el){el.innerHTML="<a href='#'></a>";return el.firstChild.getAttribute("href")==="#";})){addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML){return elem.getAttribute(name,name.toLowerCase()==="type"?1:2);}});}
if(!support.attributes||!assert(function(el){el.innerHTML="<input/>";el.firstChild.setAttribute("value","");return el.firstChild.getAttribute("value")==="";})){addHandle("value",function(elem,_name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input"){return elem.defaultValue;}});}
if(!assert(function(el){return el.getAttribute("disabled")==null;})){addHandle(booleans,function(elem,name,isXML){var val;if(!isXML){return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null;}});}
return Sizzle;})(window);jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.uniqueSort=jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;jQuery.escapeSelector=Sizzle.escape;var dir=function(elem,dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break;}
matched.push(elem);}}
return matched;};var siblings=function(n,elem){var matched=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n);}}
return matched;};var rneedsContext=jQuery.expr.match.needsContext;function nodeName(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase();}
var rsingleTag=(/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i);function winnow(elements,qualifier,not){if(isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not;});}
if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return(elem===qualifier)!==not;});}
if(typeof qualifier!=="string"){return jQuery.grep(elements,function(elem){return(indexOf.call(qualifier,elem)>-1)!==not;});}
return jQuery.filter(qualifier,elements,not);}
jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")";}
if(elems.length===1&&elem.nodeType===1){return jQuery.find.matchesSelector(elem,expr)?[elem]:[];}
return jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1;}));};jQuery.fn.extend({find:function(selector){var i,ret,len=this.length,self=this;if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++){if(jQuery.contains(self[i],this)){return true;}}}));}
ret=this.pushStack([]);for(i=0;i<len;i++){jQuery.find(selector,self[i],ret);}
return len>1?jQuery.uniqueSort(ret):ret;},filter:function(selector){return this.pushStack(winnow(this,selector||[],false));},not:function(selector){return this.pushStack(winnow(this,selector||[],true));},is:function(selector){return!!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length;}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,init=jQuery.fn.init=function(selector,context,root){var match,elem;if(!selector){return this;}
root=root||rootjQuery;if(typeof selector==="string"){if(selector[0]==="<"&&selector[selector.length-1]===">"&&selector.length>=3){match=[null,selector,null];}else{match=rquickExpr.exec(selector);}
if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(isFunction(this[match])){this[match](context[match]);}else{this.attr(match,context[match]);}}}
return this;}else{elem=document.getElementById(match[2]);if(elem){this[0]=elem;this.length=1;}
return this;}}else if(!context||context.jquery){return(context||root).find(selector);}else{return this.constructor(context).find(selector);}}else if(selector.nodeType){this[0]=selector;this.length=1;return this;}else if(isFunction(selector)){return root.ready!==undefined?root.ready(selector):selector(jQuery);}
return jQuery.makeArray(selector,this);};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++){if(jQuery.contains(this,targets[i])){return true;}}});},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],targets=typeof selectors!=="string"&&jQuery(selectors);if(!rneedsContext.test(selectors)){for(;i<l;i++){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(targets?targets.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break;}}}}
return this.pushStack(matched.length>1?jQuery.uniqueSort(matched):matched);},index:function(elem){if(!elem){return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1;}
if(typeof elem==="string"){return indexOf.call(jQuery(elem),this[0]);}
return indexOf.call(this,elem.jquery?elem[0]:elem);},add:function(selector,context){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(selector,context))));},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}
return cur;}
jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null;},parents:function(elem){return dir(elem,"parentNode");},parentsUntil:function(elem,_i,until){return dir(elem,"parentNode",until);},next:function(elem){return sibling(elem,"nextSibling");},prev:function(elem){return sibling(elem,"previousSibling");},nextAll:function(elem){return dir(elem,"nextSibling");},prevAll:function(elem){return dir(elem,"previousSibling");},nextUntil:function(elem,_i,until){return dir(elem,"nextSibling",until);},prevUntil:function(elem,_i,until){return dir(elem,"previousSibling",until);},siblings:function(elem){return siblings((elem.parentNode||{}).firstChild,elem);},children:function(elem){return siblings(elem.firstChild);},contents:function(elem){if(elem.contentDocument!=null&&getProto(elem.contentDocument)){return elem.contentDocument;}
if(nodeName(elem,"template")){elem=elem.content||elem;}
return jQuery.merge([],elem.childNodes);}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until"){selector=until;}
if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched);}
if(this.length>1){if(!guaranteedUnique[name]){jQuery.uniqueSort(matched);}
if(rparentsprev.test(name)){matched.reverse();}}
return this.pushStack(matched);};});var rnothtmlwhite=(/[^\x20\t\r\n\f]+/g);function createOptions(options){var object={};jQuery.each(options.match(rnothtmlwhite)||[],function(_,flag){object[flag]=true;});return object;}
jQuery.Callbacks=function(options){options=typeof options==="string"?createOptions(options):jQuery.extend({},options);var
firing,memory,fired,locked,list=[],queue=[],firingIndex=-1,fire=function(){locked=locked||options.once;fired=firing=true;for(;queue.length;firingIndex=-1){memory=queue.shift();while(++firingIndex<list.length){if(list[firingIndex].apply(memory[0],memory[1])===false&&options.stopOnFalse){firingIndex=list.length;memory=false;}}}
if(!options.memory){memory=false;}
firing=false;if(locked){if(memory){list=[];}else{list="";}}},self={add:function(){if(list){if(memory&&!firing){firingIndex=list.length-1;queue.push(memory);}
(function add(args){jQuery.each(args,function(_,arg){if(isFunction(arg)){if(!options.unique||!self.has(arg)){list.push(arg);}}else if(arg&&arg.length&&toType(arg)!=="string"){add(arg);}});})(arguments);if(memory&&!firing){fire();}}
return this;},remove:function(){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(index<=firingIndex){firingIndex--;}}});return this;},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:list.length>0;},empty:function(){if(list){list=[];}
return this;},disable:function(){locked=queue=[];list=memory="";return this;},disabled:function(){return!list;},lock:function(){locked=queue=[];if(!memory&&!firing){list=memory="";}
return this;},locked:function(){return!!locked;},fireWith:function(context,args){if(!locked){args=args||[];args=[context,args.slice?args.slice():args];queue.push(args);if(!firing){fire();}}
return this;},fire:function(){self.fireWith(this,arguments);return this;},fired:function(){return!!fired;}};return self;};function Identity(v){return v;}
function Thrower(ex){throw ex;}
function adoptValue(value,resolve,reject,noValue){var method;try{if(value&&isFunction((method=value.promise))){method.call(value).done(resolve).fail(reject);}else if(value&&isFunction((method=value.then))){method.call(value,resolve,reject);}else{resolve.apply(undefined,[value].slice(noValue));}}catch(value){reject.apply(undefined,[value]);}}
jQuery.extend({Deferred:function(func){var tuples=[["notify","progress",jQuery.Callbacks("memory"),jQuery.Callbacks("memory"),2],["resolve","done",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),0,"resolved"],["reject","fail",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),1,"rejected"]],state="pending",promise={state:function(){return state;},always:function(){deferred.done(arguments).fail(arguments);return this;},"catch":function(fn){return promise.then(null,fn);},pipe:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(_i,tuple){var fn=isFunction(fns[tuple[4]])&&fns[tuple[4]];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&isFunction(returned.promise)){returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject);}else{newDefer[tuple[0]+"With"](this,fn?[returned]:arguments);}});});fns=null;}).promise();},then:function(onFulfilled,onRejected,onProgress){var maxDepth=0;function resolve(depth,deferred,handler,special){return function(){var that=this,args=arguments,mightThrow=function(){var returned,then;if(depth<maxDepth){return;}
returned=handler.apply(that,args);if(returned===deferred.promise()){throw new TypeError("Thenable self-resolution");}
then=returned&&(typeof returned==="object"||typeof returned==="function")&&returned.then;if(isFunction(then)){if(special){then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special));}else{maxDepth++;then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special),resolve(maxDepth,deferred,Identity,deferred.notifyWith));}}else{if(handler!==Identity){that=undefined;args=[returned];}
(special||deferred.resolveWith)(that,args);}},process=special?mightThrow:function(){try{mightThrow();}catch(e){if(jQuery.Deferred.exceptionHook){jQuery.Deferred.exceptionHook(e,process.stackTrace);}
if(depth+1>=maxDepth){if(handler!==Thrower){that=undefined;args=[e];}
deferred.rejectWith(that,args);}}};if(depth){process();}else{if(jQuery.Deferred.getStackHook){process.stackTrace=jQuery.Deferred.getStackHook();}
window.setTimeout(process);}};}
return jQuery.Deferred(function(newDefer){tuples[0][3].add(resolve(0,newDefer,isFunction(onProgress)?onProgress:Identity,newDefer.notifyWith));tuples[1][3].add(resolve(0,newDefer,isFunction(onFulfilled)?onFulfilled:Identity));tuples[2][3].add(resolve(0,newDefer,isFunction(onRejected)?onRejected:Thrower));}).promise();},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise;}},deferred={};jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[5];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString;},tuples[3-i][2].disable,tuples[3-i][3].disable,tuples[0][2].lock,tuples[0][3].lock);}
list.add(tuple[3].fire);deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?undefined:this,arguments);return this;};deferred[tuple[0]+"With"]=list.fireWith;});promise.promise(deferred);if(func){func.call(deferred,deferred);}
return deferred;},when:function(singleValue){var
remaining=arguments.length,i=remaining,resolveContexts=Array(i),resolveValues=slice.call(arguments),primary=jQuery.Deferred(),updateFunc=function(i){return function(value){resolveContexts[i]=this;resolveValues[i]=arguments.length>1?slice.call(arguments):value;if(!(--remaining)){primary.resolveWith(resolveContexts,resolveValues);}};};if(remaining<=1){adoptValue(singleValue,primary.done(updateFunc(i)).resolve,primary.reject,!remaining);if(primary.state()==="pending"||isFunction(resolveValues[i]&&resolveValues[i].then)){return primary.then();}}
while(i--){adoptValue(resolveValues[i],updateFunc(i),primary.reject);}
return primary.promise();}});var rerrorNames=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;jQuery.Deferred.exceptionHook=function(error,stack){if(window.console&&window.console.warn&&error&&rerrorNames.test(error.name)){window.console.warn("jQuery.Deferred exception: "+error.message,error.stack,stack);}};jQuery.readyException=function(error){window.setTimeout(function(){throw error;});};var readyList=jQuery.Deferred();jQuery.fn.ready=function(fn){readyList.then(fn).catch(function(error){jQuery.readyException(error);});return this;};jQuery.extend({isReady:false,readyWait:1,ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return;}
jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return;}
readyList.resolveWith(document,[jQuery]);}});jQuery.ready.then=readyList.then;function completed(){document.removeEventListener("DOMContentLoaded",completed);window.removeEventListener("load",completed);jQuery.ready();}
if(document.readyState==="complete"||(document.readyState!=="loading"&&!document.documentElement.doScroll)){window.setTimeout(jQuery.ready);}else{document.addEventListener("DOMContentLoaded",completed);window.addEventListener("load",completed);}
var access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key==null;if(toType(key)==="object"){chainable=true;for(i in key){access(elems,fn,i,key[i],true,emptyGet,raw);}}else if(value!==undefined){chainable=true;if(!isFunction(value)){raw=true;}
if(bulk){if(raw){fn.call(elems,value);fn=null;}else{bulk=fn;fn=function(elem,_key,value){return bulk.call(jQuery(elem),value);};}}
if(fn){for(;i<len;i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));}}}
if(chainable){return elems;}
if(bulk){return fn.call(elems);}
return len?fn(elems[0],key):emptyGet;};var rmsPrefix=/^-ms-/,rdashAlpha=/-([a-z])/g;function fcamelCase(_all,letter){return letter.toUpperCase();}
function camelCase(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase);}
var acceptData=function(owner){return owner.nodeType===1||owner.nodeType===9||!(+owner.nodeType);};function Data(){this.expando=jQuery.expando+Data.uid++;}
Data.uid=1;Data.prototype={cache:function(owner){var value=owner[this.expando];if(!value){value={};if(acceptData(owner)){if(owner.nodeType){owner[this.expando]=value;}else{Object.defineProperty(owner,this.expando,{value:value,configurable:true});}}}
return value;},set:function(owner,data,value){var prop,cache=this.cache(owner);if(typeof data==="string"){cache[camelCase(data)]=value;}else{for(prop in data){cache[camelCase(prop)]=data[prop];}}
return cache;},get:function(owner,key){return key===undefined?this.cache(owner):owner[this.expando]&&owner[this.expando][camelCase(key)];},access:function(owner,key,value){if(key===undefined||((key&&typeof key==="string")&&value===undefined)){return this.get(owner,key);}
this.set(owner,key,value);return value!==undefined?value:key;},remove:function(owner,key){var i,cache=owner[this.expando];if(cache===undefined){return;}
if(key!==undefined){if(Array.isArray(key)){key=key.map(camelCase);}else{key=camelCase(key);key=key in cache?[key]:(key.match(rnothtmlwhite)||[]);}
i=key.length;while(i--){delete cache[key[i]];}}
if(key===undefined||jQuery.isEmptyObject(cache)){if(owner.nodeType){owner[this.expando]=undefined;}else{delete owner[this.expando];}}},hasData:function(owner){var cache=owner[this.expando];return cache!==undefined&&!jQuery.isEmptyObject(cache);}};var dataPriv=new Data();var dataUser=new Data();var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/[A-Z]/g;function getData(data){if(data==="true"){return true;}
if(data==="false"){return false;}
if(data==="null"){return null;}
if(data===+data+""){return+data;}
if(rbrace.test(data)){return JSON.parse(data);}
return data;}
function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$&").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=getData(data);}catch(e){}
dataUser.set(elem,key,data);}else{data=undefined;}}
return data;}
jQuery.extend({hasData:function(elem){return dataUser.hasData(elem)||dataPriv.hasData(elem);},data:function(elem,name,data){return dataUser.access(elem,name,data);},removeData:function(elem,name){dataUser.remove(elem,name);},_data:function(elem,name,data){return dataPriv.access(elem,name,data);},_removeData:function(elem,name){dataPriv.remove(elem,name);}});jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===undefined){if(this.length){data=dataUser.get(elem);if(elem.nodeType===1&&!dataPriv.get(elem,"hasDataAttrs")){i=attrs.length;while(i--){if(attrs[i]){name=attrs[i].name;if(name.indexOf("data-")===0){name=camelCase(name.slice(5));dataAttr(elem,name,data[name]);}}}
dataPriv.set(elem,"hasDataAttrs",true);}}
return data;}
if(typeof key==="object"){return this.each(function(){dataUser.set(this,key);});}
return access(this,function(value){var data;if(elem&&value===undefined){data=dataUser.get(elem,key);if(data!==undefined){return data;}
data=dataAttr(elem,key);if(data!==undefined){return data;}
return;}
this.each(function(){dataUser.set(this,key,value);});},null,value,arguments.length>1,null,true);},removeData:function(key){return this.each(function(){dataUser.remove(this,key);});}});jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=dataPriv.get(elem,type);if(data){if(!queue||Array.isArray(data)){queue=dataPriv.access(elem,type,jQuery.makeArray(data));}else{queue.push(data);}}
return queue||[];}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type);};if(fn==="inprogress"){fn=queue.shift();startLength--;}
if(fn){if(type==="fx"){queue.unshift("inprogress");}
delete hooks.stop;fn.call(elem,next,hooks);}
if(!startLength&&hooks){hooks.empty.fire();}},_queueHooks:function(elem,type){var key=type+"queueHooks";return dataPriv.get(elem,key)||dataPriv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){dataPriv.remove(elem,[type+"queue",key]);})});}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--;}
if(arguments.length<setter){return jQuery.queue(this[0],type);}
return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type);}});},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type);});},clearQueue:function(type){return this.queue(type||"fx",[]);},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!(--count)){defer.resolveWith(elements,[elements]);}};if(typeof type!=="string"){obj=type;type=undefined;}
type=type||"fx";while(i--){tmp=dataPriv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve);}}
resolve();return defer.promise(obj);}});var pnum=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;var rcssNum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i");var cssExpand=["Top","Right","Bottom","Left"];var documentElement=document.documentElement;var isAttached=function(elem){return jQuery.contains(elem.ownerDocument,elem);},composed={composed:true};if(documentElement.getRootNode){isAttached=function(elem){return jQuery.contains(elem.ownerDocument,elem)||elem.getRootNode(composed)===elem.ownerDocument;};}
var isHiddenWithinTree=function(elem,el){elem=el||elem;return elem.style.display==="none"||elem.style.display===""&&isAttached(elem)&&jQuery.css(elem,"display")==="none";};function adjustCSS(elem,prop,valueParts,tween){var adjusted,scale,maxIterations=20,currentValue=tween?function(){return tween.cur();}:function(){return jQuery.css(elem,prop,"");},initial=currentValue(),unit=valueParts&&valueParts[3]||(jQuery.cssNumber[prop]?"":"px"),initialInUnit=elem.nodeType&&(jQuery.cssNumber[prop]||unit!=="px"&&+initial)&&rcssNum.exec(jQuery.css(elem,prop));if(initialInUnit&&initialInUnit[3]!==unit){initial=initial/2;unit=unit||initialInUnit[3];initialInUnit=+initial||1;while(maxIterations--){jQuery.style(elem,prop,initialInUnit+unit);if((1-scale)*(1-(scale=currentValue()/initial||0.5))<=0){maxIterations=0;}
initialInUnit=initialInUnit/scale;}
initialInUnit=initialInUnit*2;jQuery.style(elem,prop,initialInUnit+unit);valueParts=valueParts||[];}
if(valueParts){initialInUnit=+initialInUnit||+initial||0;adjusted=valueParts[1]?initialInUnit+(valueParts[1]+1)*valueParts[2]:+valueParts[2];if(tween){tween.unit=unit;tween.start=initialInUnit;tween.end=adjusted;}}
return adjusted;}
var defaultDisplayMap={};function getDefaultDisplay(elem){var temp,doc=elem.ownerDocument,nodeName=elem.nodeName,display=defaultDisplayMap[nodeName];if(display){return display;}
temp=doc.body.appendChild(doc.createElement(nodeName));display=jQuery.css(temp,"display");temp.parentNode.removeChild(temp);if(display==="none"){display="block";}
defaultDisplayMap[nodeName]=display;return display;}
function showHide(elements,show){var display,elem,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue;}
display=elem.style.display;if(show){if(display==="none"){values[index]=dataPriv.get(elem,"display")||null;if(!values[index]){elem.style.display="";}}
if(elem.style.display===""&&isHiddenWithinTree(elem)){values[index]=getDefaultDisplay(elem);}}else{if(display!=="none"){values[index]="none";dataPriv.set(elem,"display",display);}}}
for(index=0;index<length;index++){if(values[index]!=null){elements[index].style.display=values[index];}}
return elements;}
jQuery.fn.extend({show:function(){return showHide(this,true);},hide:function(){return showHide(this);},toggle:function(state){if(typeof state==="boolean"){return state?this.show():this.hide();}
return this.each(function(){if(isHiddenWithinTree(this)){jQuery(this).show();}else{jQuery(this).hide();}});}});var rcheckableType=(/^(?:checkbox|radio)$/i);var rtagName=(/<([a-z][^\/\0>\x20\t\r\n\f]*)/i);var rscriptType=(/^$|^module$|\/(?:java|ecma)script/i);(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio");input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="<textarea>x</textarea>";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue;div.innerHTML="<option></option>";support.option=!!div.lastChild;})();var wrapMap={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;if(!support.option){wrapMap.optgroup=wrapMap.option=[1,"<select multiple='multiple'>","</select>"];}
function getAll(context,tag){var ret;if(typeof context.getElementsByTagName!=="undefined"){ret=context.getElementsByTagName(tag||"*");}else if(typeof context.querySelectorAll!=="undefined"){ret=context.querySelectorAll(tag||"*");}else{ret=[];}
if(tag===undefined||tag&&nodeName(context,tag)){return jQuery.merge([context],ret);}
return ret;}
function setGlobalEval(elems,refElements){var i=0,l=elems.length;for(;i<l;i++){dataPriv.set(elems[i],"globalEval",!refElements||dataPriv.get(refElements[i],"globalEval"));}}
var rhtml=/<|&#?\w+;/;function buildFragment(elems,context,scripts,selection,ignored){var elem,tmp,tag,wrap,attached,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;for(;i<l;i++){elem=elems[i];if(elem||elem===0){if(toType(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem);}else if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem));}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+jQuery.htmlPrefilter(elem)+wrap[2];j=wrap[0];while(j--){tmp=tmp.lastChild;}
jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent="";}}}
fragment.textContent="";i=0;while((elem=nodes[i++])){if(selection&&jQuery.inArray(elem,selection)>-1){if(ignored){ignored.push(elem);}
continue;}
attached=isAttached(elem);tmp=getAll(fragment.appendChild(elem),"script");if(attached){setGlobalEval(tmp);}
if(scripts){j=0;while((elem=tmp[j++])){if(rscriptType.test(elem.type||"")){scripts.push(elem);}}}}
return fragment;}
var rtypenamespace=/^([^.]*)(?:\.(.+)|)/;function returnTrue(){return true;}
function returnFalse(){return false;}
function expectSync(elem,type){return(elem===safeActiveElement())===(type==="focus");}
function safeActiveElement(){try{return document.activeElement;}catch(err){}}
function on(elem,types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined;}
for(type in types){on(elem,type,selector,data,types[type],one);}
return elem;}
if(data==null&&fn==null){fn=selector;data=selector=undefined;}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined;}else{fn=data;data=selector;selector=undefined;}}
if(fn===false){fn=returnFalse;}else if(!fn){return elem;}
if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments);};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++);}
return elem.each(function(){jQuery.event.add(this,types,fn,data,selector);});}
jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.get(elem);if(!acceptData(elem)){return;}
if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector;}
if(selector){jQuery.find.matchesSelector(documentElement,selector);}
if(!handler.guid){handler.guid=jQuery.guid++;}
if(!(events=elemData.events)){events=elemData.events=Object.create(null);}
if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!=="undefined"&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):undefined;};}
types=(types||"").match(rnothtmlwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue;}
special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle);}}}
if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid;}}
if(selector){handlers.splice(handlers.delegateCount++,0,handleObj);}else{handlers.push(handleObj);}
jQuery.event.global[type]=true;}},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.hasData(elem)&&dataPriv.get(elem);if(!elemData||!(events=elemData.events)){return;}
types=(types||"").match(rnothtmlwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true);}
continue;}
special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--;}
if(special.remove){special.remove.call(elem,handleObj);}}}
if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle);}
delete events[type];}}
if(jQuery.isEmptyObject(events)){dataPriv.remove(elem,"handle events");}},dispatch:function(nativeEvent){var i,j,ret,matched,handleObj,handlerQueue,args=new Array(arguments.length),event=jQuery.event.fix(nativeEvent),handlers=(dataPriv.get(this,"events")||Object.create(null))[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;for(i=1;i<arguments.length;i++){args[i]=arguments[i];}
event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return;}
handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.rnamespace||handleObj.namespace===false||event.rnamespace.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation();}}}}}
if(special.postDispatch){special.postDispatch.call(this,event);}
return event.result;},handlers:function(event,handlers){var i,handleObj,sel,matchedHandlers,matchedSelectors,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&!(event.type==="click"&&event.button>=1)){for(;cur!==this;cur=cur.parentNode||this){if(cur.nodeType===1&&!(event.type==="click"&&cur.disabled===true)){matchedHandlers=[];matchedSelectors={};for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matchedSelectors[sel]===undefined){matchedSelectors[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>-1:jQuery.find(sel,this,null,[cur]).length;}
if(matchedSelectors[sel]){matchedHandlers.push(handleObj);}}
if(matchedHandlers.length){handlerQueue.push({elem:cur,handlers:matchedHandlers});}}}}
cur=this;if(delegateCount<handlers.length){handlerQueue.push({elem:cur,handlers:handlers.slice(delegateCount)});}
return handlerQueue;},addProp:function(name,hook){Object.defineProperty(jQuery.Event.prototype,name,{enumerable:true,configurable:true,get:isFunction(hook)?function(){if(this.originalEvent){return hook(this.originalEvent);}}:function(){if(this.originalEvent){return this.originalEvent[name];}},set:function(value){Object.defineProperty(this,name,{enumerable:true,configurable:true,writable:true,value:value});}});},fix:function(originalEvent){return originalEvent[jQuery.expando]?originalEvent:new jQuery.Event(originalEvent);},special:{load:{noBubble:true},click:{setup:function(data){var el=this||data;if(rcheckableType.test(el.type)&&el.click&&nodeName(el,"input")){leverageNative(el,"click",returnTrue);}
return false;},trigger:function(data){var el=this||data;if(rcheckableType.test(el.type)&&el.click&&nodeName(el,"input")){leverageNative(el,"click");}
return true;},_default:function(event){var target=event.target;return rcheckableType.test(target.type)&&target.click&&nodeName(target,"input")&&dataPriv.get(target,"click")||nodeName(target,"a");}},beforeunload:{postDispatch:function(event){if(event.result!==undefined&&event.originalEvent){event.originalEvent.returnValue=event.result;}}}}};function leverageNative(el,type,expectSync){if(!expectSync){if(dataPriv.get(el,type)===undefined){jQuery.event.add(el,type,returnTrue);}
return;}
dataPriv.set(el,type,false);jQuery.event.add(el,type,{namespace:false,handler:function(event){var notAsync,result,saved=dataPriv.get(this,type);if((event.isTrigger&1)&&this[type]){if(!saved.length){saved=slice.call(arguments);dataPriv.set(this,type,saved);notAsync=expectSync(this,type);this[type]();result=dataPriv.get(this,type);if(saved!==result||notAsync){dataPriv.set(this,type,false);}else{result={};}
if(saved!==result){event.stopImmediatePropagation();event.preventDefault();return result&&result.value;}}else if((jQuery.event.special[type]||{}).delegateType){event.stopPropagation();}}else if(saved.length){dataPriv.set(this,type,{value:jQuery.event.trigger(jQuery.extend(saved[0],jQuery.Event.prototype),saved.slice(1),this)});event.stopImmediatePropagation();}}});}
jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle);}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props);}
if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?returnTrue:returnFalse;this.target=(src.target&&src.target.nodeType===3)?src.target.parentNode:src.target;this.currentTarget=src.currentTarget;this.relatedTarget=src.relatedTarget;}else{this.type=src;}
if(props){jQuery.extend(this,props);}
this.timeStamp=src&&src.timeStamp||Date.now();this[jQuery.expando]=true;};jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&!this.isSimulated){e.preventDefault();}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopPropagation();}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopImmediatePropagation();}
this.stopPropagation();}};jQuery.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,"char":true,code:true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:true},jQuery.event.addProp);jQuery.each({focus:"focusin",blur:"focusout"},function(type,delegateType){jQuery.event.special[type]={setup:function(){leverageNative(this,type,expectSync);return false;},trigger:function(){leverageNative(this,type);return true;},_default:function(event){return dataPriv.get(event.target,type);},delegateType:delegateType};});jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||(related!==target&&!jQuery.contains(target,related))){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix;}
return ret;}};});jQuery.fn.extend({on:function(types,selector,data,fn){return on(this,types,selector,data,fn);},one:function(types,selector,data,fn){return on(this,types,selector,data,fn,1);},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this;}
if(typeof types==="object"){for(type in types){this.off(type,selector,types[type]);}
return this;}
if(selector===false||typeof selector==="function"){fn=selector;selector=undefined;}
if(fn===false){fn=returnFalse;}
return this.each(function(){jQuery.event.remove(this,types,fn,selector);});}});var
rnoInnerhtml=/<script|<style|<link/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rcleanScript=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function manipulationTarget(elem,content){if(nodeName(elem,"table")&&nodeName(content.nodeType!==11?content:content.firstChild,"tr")){return jQuery(elem).children("tbody")[0]||elem;}
return elem;}
function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem;}
function restoreScript(elem){if((elem.type||"").slice(0,5)==="true/"){elem.type=elem.type.slice(5);}else{elem.removeAttribute("type");}
return elem;}
function cloneCopyEvent(src,dest){var i,l,type,pdataOld,udataOld,udataCur,events;if(dest.nodeType!==1){return;}
if(dataPriv.hasData(src)){pdataOld=dataPriv.get(src);events=pdataOld.events;if(events){dataPriv.remove(dest,"handle events");for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i]);}}}}
if(dataUser.hasData(src)){udataOld=dataUser.access(src);udataCur=jQuery.extend({},udataOld);dataUser.set(dest,udataCur);}}
function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&rcheckableType.test(src.type)){dest.checked=src.checked;}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue;}}
function domManip(collection,args,callback,ignored){args=flat(args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=collection.length,iNoClone=l-1,value=args[0],valueIsFunction=isFunction(value);if(valueIsFunction||(l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value))){return collection.each(function(index){var self=collection.eq(index);if(valueIsFunction){args[0]=value.call(this,index,self.html());}
domManip(self,args,callback,ignored);});}
if(l){fragment=buildFragment(args,collection[0].ownerDocument,false,collection,ignored);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first;}
if(first||ignored){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"));}}
callback.call(collection[i],node,i);}
if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!dataPriv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src&&(node.type||"").toLowerCase()!=="module"){if(jQuery._evalUrl&&!node.noModule){jQuery._evalUrl(node.src,{nonce:node.nonce||node.getAttribute("nonce")},doc);}}else{DOMEval(node.textContent.replace(rcleanScript,""),node,doc);}}}}}}
return collection;}
function remove(elem,selector,keepData){var node,nodes=selector?jQuery.filter(selector,elem):elem,i=0;for(;(node=nodes[i])!=null;i++){if(!keepData&&node.nodeType===1){jQuery.cleanData(getAll(node));}
if(node.parentNode){if(keepData&&isAttached(node)){setGlobalEval(getAll(node,"script"));}
node.parentNode.removeChild(node);}}
return elem;}
jQuery.extend({htmlPrefilter:function(html){return html;},clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=isAttached(elem);if(!support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++){fixInput(srcElements[i],destElements[i]);}}
if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<l;i++){cloneCopyEvent(srcElements[i],destElements[i]);}}else{cloneCopyEvent(elem,clone);}}
destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"));}
return clone;},cleanData:function(elems){var data,elem,type,special=jQuery.event.special,i=0;for(;(elem=elems[i])!==undefined;i++){if(acceptData(elem)){if((data=elem[dataPriv.expando])){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type);}else{jQuery.removeEvent(elem,type,data.handle);}}}
elem[dataPriv.expando]=undefined;}
if(elem[dataUser.expando]){elem[dataUser.expando]=undefined;}}}}});jQuery.fn.extend({detach:function(selector){return remove(this,selector,true);},remove:function(selector){return remove(this,selector);},text:function(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=value;}});},null,value,arguments.length);},append:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem);}});},prepend:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild);}});},before:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this);}});},after:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling);}});},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent="";}}
return this;},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents);});},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&elem.nodeType===1){return elem.innerHTML;}
if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=jQuery.htmlPrefilter(value);try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value;}}
elem=0;}catch(e){}}
if(elem){this.empty().append(value);}},null,value,arguments.length);},replaceWith:function(){var ignored=[];return domManip(this,arguments,function(elem){var parent=this.parentNode;if(jQuery.inArray(this,ignored)<0){jQuery.cleanData(getAll(this));if(parent){parent.replaceChild(elem,this);}}},ignored);}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get());}
return this.pushStack(ret);};});var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var rcustomProp=/^--/;var getStyles=function(elem){var view=elem.ownerDocument.defaultView;if(!view||!view.opener){view=window;}
return view.getComputedStyle(elem);};var swap=function(elem,options,callback){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name];}
ret=callback.call(elem);for(name in options){elem.style[name]=old[name];}
return ret;};var rboxStyle=new RegExp(cssExpand.join("|"),"i");var whitespace="[\\x20\\t\\r\\n\\f]";var rtrimCSS=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g");(function(){function computeStyleTests(){if(!div){return;}
container.style.cssText="position:absolute;left:-11111px;width:60px;"+"margin-top:1px;padding:0;border:0";div.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;"+"margin:auto;border:1px;padding:1px;"+"width:60%;top:1%";documentElement.appendChild(container).appendChild(div);var divStyle=window.getComputedStyle(div);pixelPositionVal=divStyle.top!=="1%";reliableMarginLeftVal=roundPixelMeasures(divStyle.marginLeft)===12;div.style.right="60%";pixelBoxStylesVal=roundPixelMeasures(divStyle.right)===36;boxSizingReliableVal=roundPixelMeasures(divStyle.width)===36;div.style.position="absolute";scrollboxSizeVal=roundPixelMeasures(div.offsetWidth/3)===12;documentElement.removeChild(container);div=null;}
function roundPixelMeasures(measure){return Math.round(parseFloat(measure));}
var pixelPositionVal,boxSizingReliableVal,scrollboxSizeVal,pixelBoxStylesVal,reliableTrDimensionsVal,reliableMarginLeftVal,container=document.createElement("div"),div=document.createElement("div");if(!div.style){return;}
div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";jQuery.extend(support,{boxSizingReliable:function(){computeStyleTests();return boxSizingReliableVal;},pixelBoxStyles:function(){computeStyleTests();return pixelBoxStylesVal;},pixelPosition:function(){computeStyleTests();return pixelPositionVal;},reliableMarginLeft:function(){computeStyleTests();return reliableMarginLeftVal;},scrollboxSize:function(){computeStyleTests();return scrollboxSizeVal;},reliableTrDimensions:function(){var table,tr,trChild,trStyle;if(reliableTrDimensionsVal==null){table=document.createElement("table");tr=document.createElement("tr");trChild=document.createElement("div");table.style.cssText="position:absolute;left:-11111px;border-collapse:separate";tr.style.cssText="border:1px solid";tr.style.height="1px";trChild.style.height="9px";trChild.style.display="block";documentElement.appendChild(table).appendChild(tr).appendChild(trChild);trStyle=window.getComputedStyle(tr);reliableTrDimensionsVal=(parseInt(trStyle.height,10)+
parseInt(trStyle.borderTopWidth,10)+
parseInt(trStyle.borderBottomWidth,10))===tr.offsetHeight;documentElement.removeChild(table);}
return reliableTrDimensionsVal;}});})();function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,isCustomProp=rcustomProp.test(name),style=elem.style;computed=computed||getStyles(elem);if(computed){ret=computed.getPropertyValue(name)||computed[name];if(isCustomProp&&ret){ret=ret.replace(rtrimCSS,"$1")||undefined;}
if(ret===""&&!isAttached(elem)){ret=jQuery.style(elem,name);}
if(!support.pixelBoxStyles()&&rnumnonpx.test(ret)&&rboxStyle.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth;}}
return ret!==undefined?ret+"":ret;}
function addGetHookIf(conditionFn,hookFn){return{get:function(){if(conditionFn()){delete this.get;return;}
return(this.get=hookFn).apply(this,arguments);}};}
var cssPrefixes=["Webkit","Moz","ms"],emptyStyle=document.createElement("div").style,vendorProps={};function vendorPropName(name){var capName=name[0].toUpperCase()+name.slice(1),i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in emptyStyle){return name;}}}
function finalPropName(name){var final=jQuery.cssProps[name]||vendorProps[name];if(final){return final;}
if(name in emptyStyle){return name;}
return vendorProps[name]=vendorPropName(name)||name;}
var
rdisplayswap=/^(none|table(?!-c[ea]).+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"};function setPositiveNumber(_elem,value,subtract){var matches=rcssNum.exec(value);return matches?Math.max(0,matches[2]-(subtract||0))+(matches[3]||"px"):value;}
function boxModelAdjustment(elem,dimension,box,isBorderBox,styles,computedVal){var i=dimension==="width"?1:0,extra=0,delta=0;if(box===(isBorderBox?"border":"content")){return 0;}
for(;i<4;i+=2){if(box==="margin"){delta+=jQuery.css(elem,box+cssExpand[i],true,styles);}
if(!isBorderBox){delta+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(box!=="padding"){delta+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles);}else{extra+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles);}}else{if(box==="content"){delta-=jQuery.css(elem,"padding"+cssExpand[i],true,styles);}
if(box!=="margin"){delta-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles);}}}
if(!isBorderBox&&computedVal>=0){delta+=Math.max(0,Math.ceil(elem["offset"+dimension[0].toUpperCase()+dimension.slice(1)]-
computedVal-
delta-
extra-
0.5))||0;}
return delta;}
function getWidthOrHeight(elem,dimension,extra){var styles=getStyles(elem),boxSizingNeeded=!support.boxSizingReliable()||extra,isBorderBox=boxSizingNeeded&&jQuery.css(elem,"boxSizing",false,styles)==="border-box",valueIsBorderBox=isBorderBox,val=curCSS(elem,dimension,styles),offsetProp="offset"+dimension[0].toUpperCase()+dimension.slice(1);if(rnumnonpx.test(val)){if(!extra){return val;}
val="auto";}
if((!support.boxSizingReliable()&&isBorderBox||!support.reliableTrDimensions()&&nodeName(elem,"tr")||val==="auto"||!parseFloat(val)&&jQuery.css(elem,"display",false,styles)==="inline")&&elem.getClientRects().length){isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box";valueIsBorderBox=offsetProp in elem;if(valueIsBorderBox){val=elem[offsetProp];}}
val=parseFloat(val)||0;return(val+
boxModelAdjustment(elem,dimension,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles,val))+"px";}
jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret;}}}},cssNumber:{"animationIterationCount":true,"columnCount":true,"fillOpacity":true,"flexGrow":true,"flexShrink":true,"fontWeight":true,"gridArea":true,"gridColumn":true,"gridColumnEnd":true,"gridColumnStart":true,"gridRow":true,"gridRowEnd":true,"gridRowStart":true,"lineHeight":true,"opacity":true,"order":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return;}
var ret,type,hooks,origName=camelCase(name),isCustomProp=rcustomProp.test(name),style=elem.style;if(!isCustomProp){name=finalPropName(origName);}
hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rcssNum.exec(value))&&ret[1]){value=adjustCSS(elem,name,ret);type="number";}
if(value==null||value!==value){return;}
if(type==="number"&&!isCustomProp){value+=ret&&ret[3]||(jQuery.cssNumber[origName]?"":"px");}
if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit";}
if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){if(isCustomProp){style.setProperty(name,value);}else{style[name]=value;}}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret;}
return style[name];}},css:function(elem,name,extra,styles){var val,num,hooks,origName=camelCase(name),isCustomProp=rcustomProp.test(name);if(!isCustomProp){name=finalPropName(origName);}
hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra);}
if(val===undefined){val=curCSS(elem,name,styles);}
if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name];}
if(extra===""||extra){num=parseFloat(val);return extra===true||isFinite(num)?num||0:val;}
return val;}});jQuery.each(["height","width"],function(_i,dimension){jQuery.cssHooks[dimension]={get:function(elem,computed,extra){if(computed){return rdisplayswap.test(jQuery.css(elem,"display"))&&(!elem.getClientRects().length||!elem.getBoundingClientRect().width)?swap(elem,cssShow,function(){return getWidthOrHeight(elem,dimension,extra);}):getWidthOrHeight(elem,dimension,extra);}},set:function(elem,value,extra){var matches,styles=getStyles(elem),scrollboxSizeBuggy=!support.scrollboxSize()&&styles.position==="absolute",boxSizingNeeded=scrollboxSizeBuggy||extra,isBorderBox=boxSizingNeeded&&jQuery.css(elem,"boxSizing",false,styles)==="border-box",subtract=extra?boxModelAdjustment(elem,dimension,extra,isBorderBox,styles):0;if(isBorderBox&&scrollboxSizeBuggy){subtract-=Math.ceil(elem["offset"+dimension[0].toUpperCase()+dimension.slice(1)]-
parseFloat(styles[dimension])-
boxModelAdjustment(elem,dimension,"border",false,styles)-
0.5);}
if(subtract&&(matches=rcssNum.exec(value))&&(matches[3]||"px")!=="px"){elem.style[dimension]=value;value=jQuery.css(elem,dimension);}
return setPositiveNumber(elem,value,subtract);}};});jQuery.cssHooks.marginLeft=addGetHookIf(support.reliableMarginLeft,function(elem,computed){if(computed){return(parseFloat(curCSS(elem,"marginLeft"))||elem.getBoundingClientRect().left-
swap(elem,{marginLeft:0},function(){return elem.getBoundingClientRect().left;}))+"px";}});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];}
return expanded;}};if(prefix!=="margin"){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber;}});jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(Array.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++){map[name[i]]=jQuery.css(elem,name[i],false,styles);}
return map;}
return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name);},name,value,arguments.length>1);}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing);}
jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||jQuery.easing._default;this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px");},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this);},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration);}else{this.pos=eased=percent;}
this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this);}
if(hooks&&hooks.set){hooks.set(this);}else{Tween.propHooks._default.set(this);}
return this;}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem.nodeType!==1||tween.elem[tween.prop]!=null&&tween.elem.style[tween.prop]==null){return tween.elem[tween.prop];}
result=jQuery.css(tween.elem,tween.prop,"");return!result||result==="auto"?0:result;},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween);}else if(tween.elem.nodeType===1&&(jQuery.cssHooks[tween.prop]||tween.elem.style[finalPropName(tween.prop)]!=null)){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit);}else{tween.elem[tween.prop]=tween.now;}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now;}}};jQuery.easing={linear:function(p){return p;},swing:function(p){return 0.5-Math.cos(p*Math.PI)/2;},_default:"swing"};jQuery.fx=Tween.prototype.init;jQuery.fx.step={};var
fxNow,inProgress,rfxtypes=/^(?:toggle|show|hide)$/,rrun=/queueHooks$/;function schedule(){if(inProgress){if(document.hidden===false&&window.requestAnimationFrame){window.requestAnimationFrame(schedule);}else{window.setTimeout(schedule,jQuery.fx.interval);}
jQuery.fx.tick();}}
function createFxNow(){window.setTimeout(function(){fxNow=undefined;});return(fxNow=Date.now());}
function genFx(type,includeWidth){var which,i=0,attrs={height:type};includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type;}
if(includeWidth){attrs.opacity=attrs.width=type;}
return attrs;}
function createTween(value,prop,animation){var tween,collection=(Animation.tweeners[prop]||[]).concat(Animation.tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if((tween=collection[index].call(animation,prop,value))){return tween;}}}
function defaultPrefilter(elem,props,opts){var prop,value,toggle,hooks,oldfire,propTween,restoreDisplay,display,isBox="width"in props||"height"in props,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHiddenWithinTree(elem),dataShow=dataPriv.get(elem,"fxshow");if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire();}};}
hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire();}});});}
for(prop in props){value=props[prop];if(rfxtypes.test(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){if(value==="show"&&dataShow&&dataShow[prop]!==undefined){hidden=true;}else{continue;}}
orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop);}}
propTween=!jQuery.isEmptyObject(props);if(!propTween&&jQuery.isEmptyObject(orig)){return;}
if(isBox&&elem.nodeType===1){opts.overflow=[style.overflow,style.overflowX,style.overflowY];restoreDisplay=dataShow&&dataShow.display;if(restoreDisplay==null){restoreDisplay=dataPriv.get(elem,"display");}
display=jQuery.css(elem,"display");if(display==="none"){if(restoreDisplay){display=restoreDisplay;}else{showHide([elem],true);restoreDisplay=elem.style.display||restoreDisplay;display=jQuery.css(elem,"display");showHide([elem]);}}
if(display==="inline"||display==="inline-block"&&restoreDisplay!=null){if(jQuery.css(elem,"float")==="none"){if(!propTween){anim.done(function(){style.display=restoreDisplay;});if(restoreDisplay==null){display=style.display;restoreDisplay=display==="none"?"":display;}}
style.display="inline-block";}}}
if(opts.overflow){style.overflow="hidden";anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2];});}
propTween=false;for(prop in orig){if(!propTween){if(dataShow){if("hidden"in dataShow){hidden=dataShow.hidden;}}else{dataShow=dataPriv.access(elem,"fxshow",{display:restoreDisplay});}
if(toggle){dataShow.hidden=!hidden;}
if(hidden){showHide([elem],true);}
anim.done(function(){if(!hidden){showHide([elem]);}
dataPriv.remove(elem,"fxshow");for(prop in orig){jQuery.style(elem,prop,orig[prop]);}});}
propTween=createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=propTween.start;if(hidden){propTween.end=propTween.start;propTween.start=0;}}}}
function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=camelCase(index);easing=specialEasing[name];value=props[index];if(Array.isArray(value)){easing=value[1];value=props[index]=value[0];}
if(index!==name){props[name]=value;delete props[index];}
hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing;}}}else{specialEasing[name]=easing;}}}
function Animation(elem,properties,options){var result,stopped,index=0,length=Animation.prefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem;}),tick=function(){if(stopped){return false;}
var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent);}
deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining;}
if(!length){deferred.notifyWith(elem,[animation,1,0]);}
deferred.resolveWith(elem,[animation]);return false;},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{},easing:jQuery.easing._default},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween;},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped){return this;}
stopped=true;for(;index<length;index++){animation.tweens[index].run(1);}
if(gotoEnd){deferred.notifyWith(elem,[animation,1,0]);deferred.resolveWith(elem,[animation,gotoEnd]);}else{deferred.rejectWith(elem,[animation,gotoEnd]);}
return this;}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=Animation.prefilters[index].call(animation,elem,props,animation.opts);if(result){if(isFunction(result.stop)){jQuery._queueHooks(animation.elem,animation.opts.queue).stop=result.stop.bind(result);}
return result;}}
jQuery.map(props,createTween,animation);if(isFunction(animation.opts.start)){animation.opts.start.call(elem,animation);}
animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always);jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation;}
jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(prop,value){var tween=this.createTween(prop,value);adjustCSS(tween.elem,prop,rcssNum.exec(value),tween);return tween;}]},tweener:function(props,callback){if(isFunction(props)){callback=props;props=["*"];}else{props=props.match(rnothtmlwhite);}
var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];Animation.tweeners[prop]=Animation.tweeners[prop]||[];Animation.tweeners[prop].unshift(callback);}},prefilters:[defaultPrefilter],prefilter:function(callback,prepend){if(prepend){Animation.prefilters.unshift(callback);}else{Animation.prefilters.push(callback);}}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!isFunction(easing)&&easing};if(jQuery.fx.off){opt.duration=0;}else{if(typeof opt.duration!=="number"){if(opt.duration in jQuery.fx.speeds){opt.duration=jQuery.fx.speeds[opt.duration];}else{opt.duration=jQuery.fx.speeds._default;}}}
if(opt.queue==null||opt.queue===true){opt.queue="fx";}
opt.old=opt.complete;opt.complete=function(){if(isFunction(opt.old)){opt.old.call(this);}
if(opt.queue){jQuery.dequeue(this,opt.queue);}};return opt;};jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHiddenWithinTree).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback);},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||dataPriv.get(this,"finish")){anim.stop(true);}};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation);},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd);};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined;}
if(clearQueue){this.queue(type||"fx",[]);}
return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=dataPriv.get(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index]);}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index]);}}}
for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1);}}
if(dequeue||!gotoEnd){jQuery.dequeue(this,type);}});},finish:function(type){if(type!==false){type=type||"fx";}
return this.each(function(){var index,data=dataPriv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop){hooks.stop.call(this,true);}
for(index=timers.length;index--;){if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1);}}
for(index=0;index<length;index++){if(queue[index]&&queue[index].finish){queue[index].finish.call(this);}}
delete data.finish;});}});jQuery.each(["toggle","show","hide"],function(_i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback);};});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback);};});jQuery.timers=[];jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;fxNow=Date.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1);}}
if(!timers.length){jQuery.fx.stop();}
fxNow=undefined;};jQuery.fx.timer=function(timer){jQuery.timers.push(timer);jQuery.fx.start();};jQuery.fx.interval=13;jQuery.fx.start=function(){if(inProgress){return;}
inProgress=true;schedule();};jQuery.fx.stop=function(){inProgress=null;};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=window.setTimeout(next,time);hooks.stop=function(){window.clearTimeout(timeout);};});};(function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;input=document.createElement("input");input.value="t";input.type="radio";support.radioValue=input.value==="t";})();var boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1);},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name);});}});jQuery.extend({attr:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return;}
if(typeof elem.getAttribute==="undefined"){return jQuery.prop(elem,name,value);}
if(nType!==1||!jQuery.isXMLDoc(elem)){hooks=jQuery.attrHooks[name.toLowerCase()]||(jQuery.expr.match.bool.test(name)?boolHook:undefined);}
if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return;}
if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}
elem.setAttribute(name,value+"");return value;}
if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret;}
ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret;},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&value==="radio"&&nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val;}
return value;}}}},removeAttr:function(elem,value){var name,i=0,attrNames=value&&value.match(rnothtmlwhite);if(attrNames&&elem.nodeType===1){while((name=attrNames[i++])){elem.removeAttribute(name);}}}});boolHook={set:function(elem,value,name){if(value===false){jQuery.removeAttr(elem,name);}else{elem.setAttribute(name,name);}
return name;}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(_i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle,lowercaseName=name.toLowerCase();if(!isXML){handle=attrHandle[lowercaseName];attrHandle[lowercaseName]=ret;ret=getter(elem,name,isXML)!=null?lowercaseName:null;attrHandle[lowercaseName]=handle;}
return ret;};});var rfocusable=/^(?:input|select|textarea|button)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1);},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name];});}});jQuery.extend({prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return;}
if(nType!==1||!jQuery.isXMLDoc(elem)){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name];}
if(value!==undefined){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}
return(elem[name]=value);}
if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret;}
return elem[name];},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");if(tabindex){return parseInt(tabindex,10);}
if(rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href){return 0;}
return-1;}}},propFix:{"for":"htmlFor","class":"className"}});if(!support.optSelected){jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;if(parent&&parent.parentNode){parent.parentNode.selectedIndex;}
return null;},set:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex;}}}};}
jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this;});function stripAndCollapse(value){var tokens=value.match(rnothtmlwhite)||[];return tokens.join(" ");}
function getClass(elem){return elem.getAttribute&&elem.getAttribute("class")||"";}
function classesToArray(value){if(Array.isArray(value)){return value;}
if(typeof value==="string"){return value.match(rnothtmlwhite)||[];}
return[];}
jQuery.fn.extend({addClass:function(value){var classNames,cur,curValue,className,i,finalValue;if(isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,getClass(this)));});}
classNames=classesToArray(value);if(classNames.length){return this.each(function(){curValue=getClass(this);cur=this.nodeType===1&&(" "+stripAndCollapse(curValue)+" ");if(cur){for(i=0;i<classNames.length;i++){className=classNames[i];if(cur.indexOf(" "+className+" ")<0){cur+=className+" ";}}
finalValue=stripAndCollapse(cur);if(curValue!==finalValue){this.setAttribute("class",finalValue);}}});}
return this;},removeClass:function(value){var classNames,cur,curValue,className,i,finalValue;if(isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,getClass(this)));});}
if(!arguments.length){return this.attr("class","");}
classNames=classesToArray(value);if(classNames.length){return this.each(function(){curValue=getClass(this);cur=this.nodeType===1&&(" "+stripAndCollapse(curValue)+" ");if(cur){for(i=0;i<classNames.length;i++){className=classNames[i];while(cur.indexOf(" "+className+" ")>-1){cur=cur.replace(" "+className+" "," ");}}
finalValue=stripAndCollapse(cur);if(curValue!==finalValue){this.setAttribute("class",finalValue);}}});}
return this;},toggleClass:function(value,stateVal){var classNames,className,i,self,type=typeof value,isValidValue=type==="string"||Array.isArray(value);if(isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,getClass(this),stateVal),stateVal);});}
if(typeof stateVal==="boolean"&&isValidValue){return stateVal?this.addClass(value):this.removeClass(value);}
classNames=classesToArray(value);return this.each(function(){if(isValidValue){self=jQuery(this);for(i=0;i<classNames.length;i++){className=classNames[i];if(self.hasClass(className)){self.removeClass(className);}else{self.addClass(className);}}}else if(value===undefined||type==="boolean"){className=getClass(this);if(className){dataPriv.set(this,"__className__",className);}
if(this.setAttribute){this.setAttribute("class",className||value===false?"":dataPriv.get(this,"__className__")||"");}}});},hasClass:function(selector){var className,elem,i=0;className=" "+selector+" ";while((elem=this[i++])){if(elem.nodeType===1&&(" "+stripAndCollapse(getClass(elem))+" ").indexOf(className)>-1){return true;}}
return false;}});var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,valueIsFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret;}
ret=elem.value;if(typeof ret==="string"){return ret.replace(rreturn,"");}
return ret==null?"":ret;}
return;}
valueIsFunction=isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1){return;}
if(valueIsFunction){val=value.call(this,i,jQuery(this).val());}else{val=value;}
if(val==null){val="";}else if(typeof val==="number"){val+="";}else if(Array.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+"";});}
hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val;}});}});jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return val!=null?val:stripAndCollapse(jQuery.text(elem));}},select:{get:function(elem){var value,option,i,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one",values=one?null:[],max=one?index+1:options.length;if(index<0){i=max;}else{i=one?index:0;}
for(;i<max;i++){option=options[i];if((option.selected||i===index)&&!option.disabled&&(!option.parentNode.disabled||!nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value;}
values.push(value);}}
return values;},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if(option.selected=jQuery.inArray(jQuery.valHooks.option.get(option),values)>-1){optionSet=true;}}
if(!optionSet){elem.selectedIndex=-1;}
return values;}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(Array.isArray(value)){return(elem.checked=jQuery.inArray(jQuery(elem).val(),value)>-1);}}};if(!support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value;};}});support.focusin="onfocusin"in window;var rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,stopPropagationCallback=function(e){e.stopPropagation();};jQuery.extend(jQuery.event,{trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,lastElement,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=lastElement=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return;}
if(rfocusMorph.test(type+jQuery.event.triggered)){return;}
if(type.indexOf(".")>-1){namespaces=type.split(".");type=namespaces.shift();namespaces.sort();}
ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.rnamespace=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem;}
data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return;}
if(!onlyHandlers&&!special.noBubble&&!isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode;}
for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur;}
if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window);}}
i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){lastElement=cur;event.type=i>1?bubbleType:special.bindType||type;handle=(dataPriv.get(cur,"events")||Object.create(null))[event.type]&&dataPriv.get(cur,"handle");if(handle){handle.apply(cur,data);}
handle=ontype&&cur[ontype];if(handle&&handle.apply&&acceptData(cur)){event.result=handle.apply(cur,data);if(event.result===false){event.preventDefault();}}}
event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&acceptData(elem)){if(ontype&&isFunction(elem[type])&&!isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null;}
jQuery.event.triggered=type;if(event.isPropagationStopped()){lastElement.addEventListener(type,stopPropagationCallback);}
elem[type]();if(event.isPropagationStopped()){lastElement.removeEventListener(type,stopPropagationCallback);}
jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp;}}}}
return event.result;},simulate:function(type,elem,event){var e=jQuery.extend(new jQuery.Event(),event,{type:type,isSimulated:true});jQuery.event.trigger(e,null,elem);}});jQuery.fn.extend({trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this);});},triggerHandler:function(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true);}}});if(!support.focusin){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event));};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this.document||this,attaches=dataPriv.access(doc,fix);if(!attaches){doc.addEventListener(orig,handler,true);}
dataPriv.access(doc,fix,(attaches||0)+1);},teardown:function(){var doc=this.ownerDocument||this.document||this,attaches=dataPriv.access(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);dataPriv.remove(doc,fix);}else{dataPriv.access(doc,fix,attaches);}}};});}
var location=window.location;var nonce={guid:Date.now()};var rquery=(/\?/);jQuery.parseXML=function(data){var xml,parserErrorElem;if(!data||typeof data!=="string"){return null;}
try{xml=(new window.DOMParser()).parseFromString(data,"text/xml");}catch(e){}
parserErrorElem=xml&&xml.getElementsByTagName("parsererror")[0];if(!xml||parserErrorElem){jQuery.error("Invalid XML: "+(parserErrorElem?jQuery.map(parserErrorElem.childNodes,function(el){return el.textContent;}).join("\n"):data));}
return xml;};var
rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(Array.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v);}else{buildParams(prefix+"["+(typeof v==="object"&&v!=null?i:"")+"]",v,traditional,add);}});}else if(!traditional&&toType(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add);}}else{add(prefix,obj);}}
jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,valueOrFunction){var value=isFunction(valueOrFunction)?valueOrFunction():valueOrFunction;s[s.length]=encodeURIComponent(key)+"="+
encodeURIComponent(value==null?"":value);};if(a==null){return"";}
if(Array.isArray(a)||(a.jquery&&!jQuery.isPlainObject(a))){jQuery.each(a,function(){add(this.name,this.value);});}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add);}}
return s.join("&");};jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this;}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type));}).map(function(_i,elem){var val=jQuery(this).val();if(val==null){return null;}
if(Array.isArray(val)){return jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")};});}
return{name:elem.name,value:val.replace(rCRLF,"\r\n")};}).get();}});var
r20=/%20/g,rhash=/#.*$/,rantiCache=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,prefilters={},transports={},allTypes="*/".concat("*"),originAnchor=document.createElement("a");originAnchor.href=location.href;function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*";}
var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnothtmlwhite)||[];if(isFunction(func)){while((dataType=dataTypes[i++])){if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func);}else{(structure[dataType]=structure[dataType]||[]).push(func);}}}};}
function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=(structure===transports);function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false;}else if(seekingTransport){return!(selected=dataTypeOrTransport);}});return selected;}
return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*");}
function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:(deep||(deep={})))[key]=src[key];}}
if(deep){jQuery.extend(true,target,deep);}
return target;}
function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("Content-Type");}}
if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break;}}}
if(dataTypes[0]in responses){finalDataType=dataTypes[0];}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break;}
if(!firstDataType){firstDataType=type;}}
finalDataType=finalDataType||firstDataType;}
if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType);}
return responses[finalDataType];}}
function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv];}}
current=dataTypes.shift();while(current){if(s.responseFields[current]){jqXHR[s.responseFields[current]]=response;}
if(!prev&&isSuccess&&s.dataFilter){response=s.dataFilter(response,s.dataType);}
prev=current;current=dataTypes.shift();if(current){if(current==="*"){current=prev;}else if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2];}else if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1]);}
break;}}}}
if(conv!==true){if(conv&&s.throws){response=conv(response);}else{try{response=conv(response);}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current};}}}}}}
return{state:"success",data:response};}
jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:location.href,type:"GET",isLocal:rlocalProtocol.test(location.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target);},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined;}
options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,urlAnchor,completed,fireGlobals,i,uncached,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(completed){if(!responseHeaders){responseHeaders={};while((match=rheaders.exec(responseHeadersString))){responseHeaders[match[1].toLowerCase()+" "]=(responseHeaders[match[1].toLowerCase()+" "]||[]).concat(match[2]);}}
match=responseHeaders[key.toLowerCase()+" "];}
return match==null?null:match.join(", ");},getAllResponseHeaders:function(){return completed?responseHeadersString:null;},setRequestHeader:function(name,value){if(completed==null){name=requestHeadersNames[name.toLowerCase()]=requestHeadersNames[name.toLowerCase()]||name;requestHeaders[name]=value;}
return this;},overrideMimeType:function(type){if(completed==null){s.mimeType=type;}
return this;},statusCode:function(map){var code;if(map){if(completed){jqXHR.always(map[jqXHR.status]);}else{for(code in map){statusCode[code]=[statusCode[code],map[code]];}}}
return this;},abort:function(statusText){var finalText=statusText||strAbort;if(transport){transport.abort(finalText);}
done(0,finalText);return this;}};deferred.promise(jqXHR);s.url=((url||s.url||location.href)+"").replace(rprotocol,location.protocol+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=(s.dataType||"*").toLowerCase().match(rnothtmlwhite)||[""];if(s.crossDomain==null){urlAnchor=document.createElement("a");try{urlAnchor.href=s.url;urlAnchor.href=urlAnchor.href;s.crossDomain=originAnchor.protocol+"//"+originAnchor.host!==urlAnchor.protocol+"//"+urlAnchor.host;}catch(e){s.crossDomain=true;}}
if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional);}
inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(completed){return jqXHR;}
fireGlobals=jQuery.event&&s.global;if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart");}
s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url.replace(rhash,"");if(!s.hasContent){uncached=s.url.slice(cacheURL.length);if(s.data&&(s.processData||typeof s.data==="string")){cacheURL+=(rquery.test(cacheURL)?"&":"?")+s.data;delete s.data;}
if(s.cache===false){cacheURL=cacheURL.replace(rantiCache,"$1");uncached=(rquery.test(cacheURL)?"&":"?")+"_="+(nonce.guid++)+
uncached;}
s.url=cacheURL+uncached;}else if(s.data&&s.processData&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0){s.data=s.data.replace(r20,"+");}
if(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]);}
if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL]);}}
if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType);}
jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+
(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i]);}
if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||completed)){return jqXHR.abort();}
strAbort="abort";completeDeferred.add(s.complete);jqXHR.done(s.success);jqXHR.fail(s.error);transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport");}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s]);}
if(completed){return jqXHR;}
if(s.async&&s.timeout>0){timeoutTimer=window.setTimeout(function(){jqXHR.abort("timeout");},s.timeout);}
try{completed=false;transport.send(requestHeaders,done);}catch(e){if(completed){throw e;}
done(-1,e);}}
function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(completed){return;}
completed=true;if(timeoutTimer){window.clearTimeout(timeoutTimer);}
transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses){response=ajaxHandleResponses(s,jqXHR,responses);}
if(!isSuccess&&jQuery.inArray("script",s.dataTypes)>-1&&jQuery.inArray("json",s.dataTypes)<0){s.converters["text script"]=function(){};}
response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[cacheURL]=modified;}
modified=jqXHR.getResponseHeader("etag");if(modified){jQuery.etag[cacheURL]=modified;}}
if(status===204||s.type==="HEAD"){statusText="nocontent";}else if(status===304){statusText="notmodified";}else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error;}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0){status=0;}}}
jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);}
jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]);}
completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!(--jQuery.active)){jQuery.event.trigger("ajaxStop");}}}
return jqXHR;},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json");},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script");}});jQuery.each(["get","post"],function(_i,method){jQuery[method]=function(url,data,callback,type){if(isFunction(data)){type=type||callback;callback=data;data=undefined;}
return jQuery.ajax(jQuery.extend({url:url,type:method,dataType:type,data:data,success:callback},jQuery.isPlainObject(url)&&url));};});jQuery.ajaxPrefilter(function(s){var i;for(i in s.headers){if(i.toLowerCase()==="content-type"){s.contentType=s.headers[i]||"";}}});jQuery._evalUrl=function(url,options,doc){return jQuery.ajax({url:url,type:"GET",dataType:"script",cache:true,async:false,global:false,converters:{"text script":function(){}},dataFilter:function(response){jQuery.globalEval(response,options,doc);}});};jQuery.fn.extend({wrapAll:function(html){var wrap;if(this[0]){if(isFunction(html)){html=html.call(this[0]);}
wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0]);}
wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild;}
return elem;}).append(this);}
return this;},wrapInner:function(html){if(isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i));});}
return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html);}else{self.append(html);}});},wrap:function(html){var htmlIsFunction=isFunction(html);return this.each(function(i){jQuery(this).wrapAll(htmlIsFunction?html.call(this,i):html);});},unwrap:function(selector){this.parent(selector).not("body").each(function(){jQuery(this).replaceWith(this.childNodes);});return this;}});jQuery.expr.pseudos.hidden=function(elem){return!jQuery.expr.pseudos.visible(elem);};jQuery.expr.pseudos.visible=function(elem){return!!(elem.offsetWidth||elem.offsetHeight||elem.getClientRects().length);};jQuery.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest();}catch(e){}};var xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();support.cors=!!xhrSupported&&("withCredentials"in xhrSupported);support.ajax=xhrSupported=!!xhrSupported;jQuery.ajaxTransport(function(options){var callback,errorCallback;if(support.cors||xhrSupported&&!options.crossDomain){return{send:function(headers,complete){var i,xhr=options.xhr();xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields){for(i in options.xhrFields){xhr[i]=options.xhrFields[i];}}
if(options.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType);}
if(!options.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest";}
for(i in headers){xhr.setRequestHeader(i,headers[i]);}
callback=function(type){return function(){if(callback){callback=errorCallback=xhr.onload=xhr.onerror=xhr.onabort=xhr.ontimeout=xhr.onreadystatechange=null;if(type==="abort"){xhr.abort();}else if(type==="error"){if(typeof xhr.status!=="number"){complete(0,"error");}else{complete(xhr.status,xhr.statusText);}}else{complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,(xhr.responseType||"text")!=="text"||typeof xhr.responseText!=="string"?{binary:xhr.response}:{text:xhr.responseText},xhr.getAllResponseHeaders());}}};};xhr.onload=callback();errorCallback=xhr.onerror=xhr.ontimeout=callback("error");if(xhr.onabort!==undefined){xhr.onabort=errorCallback;}else{xhr.onreadystatechange=function(){if(xhr.readyState===4){window.setTimeout(function(){if(callback){errorCallback();}});}};}
callback=callback("abort");try{xhr.send(options.hasContent&&options.data||null);}catch(e){if(callback){throw e;}}},abort:function(){if(callback){callback();}}};}});jQuery.ajaxPrefilter(function(s){if(s.crossDomain){s.contents.script=false;}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(text){jQuery.globalEval(text);return text;}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false;}
if(s.crossDomain){s.type="GET";}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain||s.scriptAttrs){var script,callback;return{send:function(_,complete){script=jQuery("<script>").attr(s.scriptAttrs||{}).prop({charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove();callback=null;if(evt){complete(evt.type==="error"?404:200,evt.type);}});document.head.appendChild(script[0]);},abort:function(){if(callback){callback();}}};}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||(jQuery.expando+"_"+(nonce.guid++));this[callback]=true;return callback;}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp){s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName);}else if(s.jsonp!==false){s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName;}
s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called");}
return responseContainer[0];};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments;};jqXHR.always(function(){if(overwritten===undefined){jQuery(window).removeProp(callbackName);}else{window[callbackName]=overwritten;}
if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName);}
if(responseContainer&&isFunction(overwritten)){overwritten(responseContainer[0]);}
responseContainer=overwritten=undefined;});return"script";}});support.createHTMLDocument=(function(){var body=document.implementation.createHTMLDocument("").body;body.innerHTML="<form></form><form></form>";return body.childNodes.length===2;})();jQuery.parseHTML=function(data,context,keepScripts){if(typeof data!=="string"){return[];}
if(typeof context==="boolean"){keepScripts=context;context=false;}
var base,parsed,scripts;if(!context){if(support.createHTMLDocument){context=document.implementation.createHTMLDocument("");base=context.createElement("base");base.href=document.location.href;context.head.appendChild(base);}else{context=document;}}
parsed=rsingleTag.exec(data);scripts=!keepScripts&&[];if(parsed){return[context.createElement(parsed[1])];}
parsed=buildFragment([data],context,scripts);if(scripts&&scripts.length){jQuery(scripts).remove();}
return jQuery.merge([],parsed.childNodes);};jQuery.fn.load=function(url,params,callback){var selector,type,response,self=this,off=url.indexOf(" ");if(off>-1){selector=stripAndCollapse(url.slice(off));url=url.slice(0,off);}
if(isFunction(params)){callback=params;params=undefined;}else if(params&&typeof params==="object"){type="POST";}
if(self.length>0){jQuery.ajax({url:url,type:type||"GET",dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText);}).always(callback&&function(jqXHR,status){self.each(function(){callback.apply(this,response||[jqXHR.responseText,status,jqXHR]);});});}
return this;};jQuery.expr.pseudos.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem;}).length;};jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative";}
curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left;}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0;}
if(isFunction(options)){options=options.call(elem,i,jQuery.extend({},curOffset));}
if(options.top!=null){props.top=(options.top-curOffset.top)+curTop;}
if(options.left!=null){props.left=(options.left-curOffset.left)+curLeft;}
if("using"in options){options.using.call(elem,props);}else{curElem.css(props);}}};jQuery.fn.extend({offset:function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i);});}
var rect,win,elem=this[0];if(!elem){return;}
if(!elem.getClientRects().length){return{top:0,left:0};}
rect=elem.getBoundingClientRect();win=elem.ownerDocument.defaultView;return{top:rect.top+win.pageYOffset,left:rect.left+win.pageXOffset};},position:function(){if(!this[0]){return;}
var offsetParent,offset,doc,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect();}else{offset=this.offset();doc=elem.ownerDocument;offsetParent=elem.offsetParent||doc.documentElement;while(offsetParent&&(offsetParent===doc.body||offsetParent===doc.documentElement)&&jQuery.css(offsetParent,"position")==="static"){offsetParent=offsetParent.parentNode;}
if(offsetParent&&offsetParent!==elem&&offsetParent.nodeType===1){parentOffset=jQuery(offsetParent).offset();parentOffset.top+=jQuery.css(offsetParent,"borderTopWidth",true);parentOffset.left+=jQuery.css(offsetParent,"borderLeftWidth",true);}}
return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)};},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent;while(offsetParent&&jQuery.css(offsetParent,"position")==="static"){offsetParent=offsetParent.offsetParent;}
return offsetParent||documentElement;});}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win;if(isWindow(elem)){win=elem;}else if(elem.nodeType===9){win=elem.defaultView;}
if(val===undefined){return win?win[prop]:elem[method];}
if(win){win.scrollTo(!top?val:win.pageXOffset,top?val:win.pageYOffset);}else{elem[method]=val;}},method,val,arguments.length);};});jQuery.each(["top","left"],function(_i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed;}});});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,function(elem,type,value){var doc;if(isWindow(elem)){return funcName.indexOf("outer")===0?elem["inner"+name]:elem.document.documentElement["client"+name];}
if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name]);}
return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra);},type,chainable?margin:undefined,chainable);};});});jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(_i,type){jQuery.fn[type]=function(fn){return this.on(type,fn);};});jQuery.fn.extend({bind:function(types,data,fn){return this.on(types,null,data,fn);},unbind:function(types,fn){return this.off(types,null,fn);},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn);},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn);},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver);}});jQuery.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),function(_i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name);};});var rtrim=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;jQuery.proxy=function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp;}
if(!isFunction(fn)){return undefined;}
args=slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)));};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy;};jQuery.holdReady=function(hold){if(hold){jQuery.readyWait++;}else{jQuery.ready(true);}};jQuery.isArray=Array.isArray;jQuery.parseJSON=JSON.parse;jQuery.nodeName=nodeName;jQuery.isFunction=isFunction;jQuery.isWindow=isWindow;jQuery.camelCase=camelCase;jQuery.type=toType;jQuery.now=Date.now;jQuery.isNumeric=function(obj){var type=jQuery.type(obj);return(type==="number"||type==="string")&&!isNaN(obj-parseFloat(obj));};jQuery.trim=function(text){return text==null?"":(text+"").replace(rtrim,"$1");};if(typeof define==="function"&&define.amd){define("jquery",[],function(){return jQuery;});}
var
_jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery){window.$=_$;}
if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery;}
return jQuery;};if(typeof noGlobal==="undefined"){window.jQuery=window.$=jQuery;}
return jQuery;});(function(factory){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else{factory(jQuery);}})(function($){"use strict";$.ui=$.ui||{};var version=$.ui.version="1.13.2";var widgetUuid=0;var widgetHasOwnProperty=Array.prototype.hasOwnProperty;var widgetSlice=Array.prototype.slice;$.cleanData=(function(orig){return function(elems){var events,elem,i;for(i=0;(elem=elems[i])!=null;i++){events=$._data(elem,"events");if(events&&events.remove){$(elem).triggerHandler("remove");}}
orig(elems);};})($.cleanData);$.widget=function(name,base,prototype){var existingConstructor,constructor,basePrototype;var proxiedPrototype={};var namespace=name.split(".")[0];name=name.split(".")[1];var fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget;}
if(Array.isArray(prototype)){prototype=$.extend.apply(null,[{}].concat(prototype));}
$.expr.pseudos[fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName);};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this||!this._createWidget){return new constructor(options,element);}
if(arguments.length){this._createWidget(options,element);}};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base();basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if(typeof value!=="function"){proxiedPrototype[prop]=value;return;}
proxiedPrototype[prop]=(function(){function _super(){return base.prototype[prop].apply(this,arguments);}
function _superApply(args){return base.prototype[prop].apply(this,args);}
return function(){var __super=this._super;var __superApply=this._superApply;var returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue;};})();});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?(basePrototype.widgetEventPrefix||name):name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto);});delete existingConstructor._childConstructors;}else{base._childConstructors.push(constructor);}
$.widget.bridge(name,constructor);return constructor;};$.widget.extend=function(target){var input=widgetSlice.call(arguments,1);var inputIndex=0;var inputLength=input.length;var key;var value;for(;inputIndex<inputLength;inputIndex++){for(key in input[inputIndex]){value=input[inputIndex][key];if(widgetHasOwnProperty.call(input[inputIndex],key)&&value!==undefined){if($.isPlainObject(value)){target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value);}else{target[key]=value;}}}}
return target;};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall=typeof options==="string";var args=widgetSlice.call(arguments,1);var returnValue=this;if(isMethodCall){if(!this.length&&options==="instance"){returnValue=undefined;}else{this.each(function(){var methodValue;var instance=$.data(this,fullName);if(options==="instance"){returnValue=instance;return false;}
if(!instance){return $.error("cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'");}
if(typeof instance[options]!=="function"||options.charAt(0)==="_"){return $.error("no such method '"+options+"' for "+name+" widget instance");}
methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false;}});}}else{if(args.length){options=$.widget.extend.apply(null,[options].concat(args));}
this.each(function(){var instance=$.data(this,fullName);if(instance){instance.option(options||{});if(instance._init){instance._init();}}else{$.data(this,fullName,new object(options,this));}});}
return returnValue;};};$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:false,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=widgetUuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=$();this.hoverable=$();this.focusable=$();this.classesElementLookup={};if(element!==this){$.data(element,this.widgetFullName,this);this._on(true,this.element,{remove:function(event){if(event.target===element){this.destroy();}}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow);}
this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this._create();if(this.options.disabled){this._setOptionDisabled(this.options.disabled);}
this._trigger("create",null,this._getCreateEventData());this._init();},_getCreateOptions:function(){return{};},_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){var that=this;this._destroy();$.each(this.classesElementLookup,function(key,value){that._removeClass(value,key);});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace);},_destroy:$.noop,widget:function(){return this.element;},option:function(key,value){var options=key;var parts;var curOption;var i;if(arguments.length===0){return $.widget.extend({},this.options);}
if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]];}
key=parts.pop();if(arguments.length===1){return curOption[key]===undefined?null:curOption[key];}
curOption[key]=value;}else{if(arguments.length===1){return this.options[key]===undefined?null:this.options[key];}
options[key]=value;}}
this._setOptions(options);return this;},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key]);}
return this;},_setOption:function(key,value){if(key==="classes"){this._setOptionClasses(value);}
this.options[key]=value;if(key==="disabled"){this._setOptionDisabled(value);}
return this;},_setOptionClasses:function(value){var classKey,elements,currentElements;for(classKey in value){currentElements=this.classesElementLookup[classKey];if(value[classKey]===this.options.classes[classKey]||!currentElements||!currentElements.length){continue;}
elements=$(currentElements.get());this._removeClass(currentElements,classKey);elements.addClass(this._classes({element:elements,keys:classKey,classes:value,add:true}));}},_setOptionDisabled:function(value){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!value);if(value){this._removeClass(this.hoverable,null,"ui-state-hover");this._removeClass(this.focusable,null,"ui-state-focus");}},enable:function(){return this._setOptions({disabled:false});},disable:function(){return this._setOptions({disabled:true});},_classes:function(options){var full=[];var that=this;options=$.extend({element:this.element,classes:this.options.classes||{}},options);function bindRemoveEvent(){var nodesToBind=[];options.element.each(function(_,element){var isTracked=$.map(that.classesElementLookup,function(elements){return elements;}).some(function(elements){return elements.is(element);});if(!isTracked){nodesToBind.push(element);}});that._on($(nodesToBind),{remove:"_untrackClassesElement"});}
function processClassString(classes,checkOption){var current,i;for(i=0;i<classes.length;i++){current=that.classesElementLookup[classes[i]]||$();if(options.add){bindRemoveEvent();current=$($.uniqueSort(current.get().concat(options.element.get())));}else{current=$(current.not(options.element).get());}
that.classesElementLookup[classes[i]]=current;full.push(classes[i]);if(checkOption&&options.classes[classes[i]]){full.push(options.classes[classes[i]]);}}}
if(options.keys){processClassString(options.keys.match(/\S+/g)||[],true);}
if(options.extra){processClassString(options.extra.match(/\S+/g)||[]);}
return full.join(" ");},_untrackClassesElement:function(event){var that=this;$.each(that.classesElementLookup,function(key,value){if($.inArray(event.target,value)!==-1){that.classesElementLookup[key]=$(value.not(event.target).get());}});this._off($(event.target));},_removeClass:function(element,keys,extra){return this._toggleClass(element,keys,extra,false);},_addClass:function(element,keys,extra){return this._toggleClass(element,keys,extra,true);},_toggleClass:function(element,keys,extra,add){add=(typeof add==="boolean")?add:extra;var shift=(typeof element==="string"||element===null),options={extra:shift?keys:extra,keys:shift?element:keys,element:shift?this.element:element,add:add};options.element.toggleClass(this._classes(options),add);return this;},_on:function(suppressDisabledCheck,element,handlers){var delegateElement;var instance=this;if(typeof suppressDisabledCheck!=="boolean"){handlers=element;element=suppressDisabledCheck;suppressDisabledCheck=false;}
if(!handlers){handlers=element;element=this.element;delegateElement=this.widget();}else{element=delegateElement=$(element);this.bindings=this.bindings.add(element);}
$.each(handlers,function(event,handler){function handlerProxy(){if(!suppressDisabledCheck&&(instance.options.disabled===true||$(this).hasClass("ui-state-disabled"))){return;}
return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
if(typeof handler!=="string"){handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++;}
var match=event.match(/^([\w:-]*)\s*(.*)$/);var eventName=match[1]+instance.eventNamespace;var selector=match[2];if(selector){delegateElement.on(eventName,selector,handlerProxy);}else{element.on(eventName,handlerProxy);}});},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+
this.eventNamespace;element.off(eventName);this.bindings=$(this.bindings.not(element).get());this.focusable=$(this.focusable.not(element).get());this.hoverable=$(this.hoverable.not(element).get());},_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
var instance=this;return setTimeout(handlerProxy,delay||0);},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){this._addClass($(event.currentTarget),null,"ui-state-hover");},mouseleave:function(event){this._removeClass($(event.currentTarget),null,"ui-state-hover");}});},_focusable:function(element){this.focusable=this.focusable.add(element);this._on(element,{focusin:function(event){this._addClass($(event.currentTarget),null,"ui-state-focus");},focusout:function(event){this._removeClass($(event.currentTarget),null,"ui-state-focus");}});},_trigger:function(type,event,data){var prop,orig;var callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig){for(prop in orig){if(!(prop in event)){event[prop]=orig[prop];}}}
this.element.trigger(event,data);return!(typeof callback==="function"&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented());}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string"){options={effect:options};}
var hasOptions;var effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number"){options={duration:options};}else if(options===true){options={};}
hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay){element.delay(options.delay);}
if(hasOptions&&$.effects&&$.effects.effect[effectName]){element[method](options);}else if(effectName!==method&&element[effectName]){element[effectName](options.duration,options.easing,callback);}else{element.queue(function(next){$(this)[method]();if(callback){callback.call(element[0]);}
next();});}};});var widget=$.widget;(function(){var cachedScrollbarWidth,max=Math.max,abs=Math.abs,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)];}
function parseCss(element,property){return parseInt($.css(element,property),10)||0;}
function isWindow(obj){return obj!=null&&obj===obj.window;}
function getDimensions(elem){var raw=elem[0];if(raw.nodeType===9){return{width:elem.width(),height:elem.height(),offset:{top:0,left:0}};}
if(isWindow(raw)){return{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}};}
if(raw.preventDefault){return{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}};}
return{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()};}
$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined){return cachedScrollbarWidth;}
var w1,w2,div=$("<div style="+"'display:block;position:absolute;width:200px;height:200px;overflow:hidden;'>"+"<div style='height:300px;width:auto;'></div></div>"),innerDiv=div.children()[0];$("body").append(div);w1=innerDiv.offsetWidth;div.css("overflow","scroll");w2=innerDiv.offsetWidth;if(w1===w2){w2=div[0].clientWidth;}
div.remove();return(cachedScrollbarWidth=w1-w2);},getScrollInfo:function(within){var overflowX=within.isWindow||within.isDocument?"":within.element.css("overflow-x"),overflowY=within.isWindow||within.isDocument?"":within.element.css("overflow-y"),hasOverflowX=overflowX==="scroll"||(overflowX==="auto"&&within.width<within.element[0].scrollWidth),hasOverflowY=overflowY==="scroll"||(overflowY==="auto"&&within.height<within.element[0].scrollHeight);return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0};},getWithinInfo:function(element){var withinElement=$(element||window),isElemWindow=isWindow(withinElement[0]),isDocument=!!withinElement[0]&&withinElement[0].nodeType===9,hasOffset=!isElemWindow&&!isDocument;return{element:withinElement,isWindow:isElemWindow,isDocument:isDocument,offset:hasOffset?$(element).offset():{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:withinElement.outerWidth(),height:withinElement.outerHeight()};}};$.fn.position=function(options){if(!options||!options.of){return _position.apply(this,arguments);}
options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=typeof options.of==="string"?$(document).find(options.of):$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};dimensions=getDimensions(target);if(target[0].preventDefault){options.at="left top";}
targetWidth=dimensions.width;targetHeight=dimensions.height;targetOffset=dimensions.offset;basePosition=$.extend({},targetOffset);$.each(["my","at"],function(){var pos=(options[this]||"").split(" "),horizontalOffset,verticalOffset;if(pos.length===1){pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"];}
pos[0]=rhorizontal.test(pos[0])?pos[0]:"center";pos[1]=rvertical.test(pos[1])?pos[1]:"center";horizontalOffset=roffset.exec(pos[0]);verticalOffset=roffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]];});if(collision.length===1){collision[1]=collision[0];}
if(options.at[0]==="right"){basePosition.left+=targetWidth;}else if(options.at[0]==="center"){basePosition.left+=targetWidth/2;}
if(options.at[1]==="bottom"){basePosition.top+=targetHeight;}else if(options.at[1]==="center"){basePosition.top+=targetHeight/2;}
atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+
scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+
scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==="right"){position.left-=elemWidth;}else if(options.my[0]==="center"){position.left-=elemWidth/2;}
if(options.my[1]==="bottom"){position.top-=elemHeight;}else if(options.my[1]==="center"){position.top-=elemHeight/2;}
position.left+=myOffset[0];position.top+=myOffset[1];collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]]){$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem});}});if(options.using){using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":"middle"};if(targetWidth<elemWidth&&abs(left+right)<targetWidth){feedback.horizontal="center";}
if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight){feedback.vertical="middle";}
if(max(abs(left),abs(right))>max(abs(top),abs(bottom))){feedback.important="horizontal";}else{feedback.important="vertical";}
options.using.call(this,props,feedback);};}
elem.offset($.extend(position,{using:using}));});};$.ui.position={fit:{left:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;if(data.collisionWidth>outerWidth){if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-
withinOffset;position.left+=overLeft-newOverRight;}else if(overRight>0&&overLeft<=0){position.left=withinOffset;}else{if(overLeft>overRight){position.left=withinOffset+outerWidth-data.collisionWidth;}else{position.left=withinOffset;}}}else if(overLeft>0){position.left+=overLeft;}else if(overRight>0){position.left-=overRight;}else{position.left=max(position.left-collisionPosLeft,position.left);}},top:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset,newOverBottom;if(data.collisionHeight>outerHeight){if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-
withinOffset;position.top+=overTop-newOverBottom;}else if(overBottom>0&&overTop<=0){position.top=withinOffset;}else{if(overTop>overBottom){position.top=withinOffset+outerHeight-data.collisionHeight;}else{position.top=withinOffset;}}}else if(overTop>0){position.top+=overTop;}else if(overBottom>0){position.top-=overBottom;}else{position.top=max(position.top-collisionPosTop,position.top);}}},flip:{left:function(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,atOffset=data.at[0]==="left"?data.targetWidth:data.at[0]==="right"?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-
outerWidth-withinOffset;if(newOverRight<0||newOverRight<abs(overLeft)){position.left+=myOffset+atOffset+offset;}}else if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+
atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight){position.left+=myOffset+atOffset+offset;}}},top:function(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==="top",myOffset=top?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:data.at[1]==="bottom"?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-
outerHeight-withinOffset;if(newOverBottom<0||newOverBottom<abs(overTop)){position.top+=myOffset+atOffset+offset;}}else if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+
offset-offsetTop;if(newOverTop>0||abs(newOverTop)<overBottom){position.top+=myOffset+atOffset+offset;}}}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments);$.ui.position.fit.left.apply(this,arguments);},top:function(){$.ui.position.flip.top.apply(this,arguments);$.ui.position.fit.top.apply(this,arguments);}}};})();var position=$.ui.position;var data=$.extend($.expr.pseudos,{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName);};}):function(elem,i,match){return!!$.data(elem,match[3]);}});var disableSelection=$.fn.extend({disableSelection:(function(){var eventType="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(eventType+".ui-disableSelection",function(event){event.preventDefault();});};})(),enableSelection:function(){return this.off(".ui-disableSelection");}});var jQuery=$;var stepHooks="backgroundColor borderBottomColor borderLeftColor borderRightColor "+"borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",class2type={},toString=class2type.toString,rplusequals=/^([\-+])=\s*(\d+\.?\d*)/,stringParsers=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]];}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1]*2.55,execResult[2]*2.55,execResult[3]*2.55,execResult[4]];}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16),execResult[4]?(parseInt(execResult[4],16)/255).toFixed(2):1];}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16),execResult[4]?(parseInt(execResult[4]+execResult[4],16)/255).toFixed(2):1];}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(execResult){return[execResult[1],execResult[2]/100,execResult[3]/100,execResult[4]];}}],color=jQuery.Color=function(color,green,blue,alpha){return new jQuery.Color.fn.parse(color,green,blue,alpha);},spaces={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},propTypes={"byte":{floor:true,max:255},"percent":{max:1},"degrees":{mod:360,floor:true}},support=color.support={},supportElem=jQuery("<p>")[0],colors,each=jQuery.each;supportElem.style.cssText="background-color:rgba(1,1,1,.5)";support.rgba=supportElem.style.backgroundColor.indexOf("rgba")>-1;each(spaces,function(spaceName,space){space.cache="_"+spaceName;space.props.alpha={idx:3,type:"percent",def:1};});jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(_i,name){class2type["[object "+name+"]"]=name.toLowerCase();});function getType(obj){if(obj==null){return obj+"";}
return typeof obj==="object"?class2type[toString.call(obj)]||"object":typeof obj;}
function clamp(value,prop,allowEmpty){var type=propTypes[prop.type]||{};if(value==null){return(allowEmpty||!prop.def)?null:prop.def;}
value=type.floor?~~value:parseFloat(value);if(isNaN(value)){return prop.def;}
if(type.mod){return(value+type.mod)%type.mod;}
return Math.min(type.max,Math.max(0,value));}
function stringParse(string){var inst=color(),rgba=inst._rgba=[];string=string.toLowerCase();each(stringParsers,function(_i,parser){var parsed,match=parser.re.exec(string),values=match&&parser.parse(match),spaceName=parser.space||"rgba";if(values){parsed=inst[spaceName](values);inst[spaces[spaceName].cache]=parsed[spaces[spaceName].cache];rgba=inst._rgba=parsed._rgba;return false;}});if(rgba.length){if(rgba.join()==="0,0,0,0"){jQuery.extend(rgba,colors.transparent);}
return inst;}
return colors[string];}
color.fn=jQuery.extend(color.prototype,{parse:function(red,green,blue,alpha){if(red===undefined){this._rgba=[null,null,null,null];return this;}
if(red.jquery||red.nodeType){red=jQuery(red).css(green);green=undefined;}
var inst=this,type=getType(red),rgba=this._rgba=[];if(green!==undefined){red=[red,green,blue,alpha];type="array";}
if(type==="string"){return this.parse(stringParse(red)||colors._default);}
if(type==="array"){each(spaces.rgba.props,function(_key,prop){rgba[prop.idx]=clamp(red[prop.idx],prop);});return this;}
if(type==="object"){if(red instanceof color){each(spaces,function(_spaceName,space){if(red[space.cache]){inst[space.cache]=red[space.cache].slice();}});}else{each(spaces,function(_spaceName,space){var cache=space.cache;each(space.props,function(key,prop){if(!inst[cache]&&space.to){if(key==="alpha"||red[key]==null){return;}
inst[cache]=space.to(inst._rgba);}
inst[cache][prop.idx]=clamp(red[key],prop,true);});if(inst[cache]&&jQuery.inArray(null,inst[cache].slice(0,3))<0){if(inst[cache][3]==null){inst[cache][3]=1;}
if(space.from){inst._rgba=space.from(inst[cache]);}}});}
return this;}},is:function(compare){var is=color(compare),same=true,inst=this;each(spaces,function(_,space){var localCache,isCache=is[space.cache];if(isCache){localCache=inst[space.cache]||space.to&&space.to(inst._rgba)||[];each(space.props,function(_,prop){if(isCache[prop.idx]!=null){same=(isCache[prop.idx]===localCache[prop.idx]);return same;}});}
return same;});return same;},_space:function(){var used=[],inst=this;each(spaces,function(spaceName,space){if(inst[space.cache]){used.push(spaceName);}});return used.pop();},transition:function(other,distance){var end=color(other),spaceName=end._space(),space=spaces[spaceName],startColor=this.alpha()===0?color("transparent"):this,start=startColor[space.cache]||space.to(startColor._rgba),result=start.slice();end=end[space.cache];each(space.props,function(_key,prop){var index=prop.idx,startValue=start[index],endValue=end[index],type=propTypes[prop.type]||{};if(endValue===null){return;}
if(startValue===null){result[index]=endValue;}else{if(type.mod){if(endValue-startValue>type.mod/2){startValue+=type.mod;}else if(startValue-endValue>type.mod/2){startValue-=type.mod;}}
result[index]=clamp((endValue-startValue)*distance+startValue,prop);}});return this[spaceName](result);},blend:function(opaque){if(this._rgba[3]===1){return this;}
var rgb=this._rgba.slice(),a=rgb.pop(),blend=color(opaque)._rgba;return color(jQuery.map(rgb,function(v,i){return(1-a)*blend[i]+a*v;}));},toRgbaString:function(){var prefix="rgba(",rgba=jQuery.map(this._rgba,function(v,i){if(v!=null){return v;}
return i>2?1:0;});if(rgba[3]===1){rgba.pop();prefix="rgb(";}
return prefix+rgba.join()+")";},toHslaString:function(){var prefix="hsla(",hsla=jQuery.map(this.hsla(),function(v,i){if(v==null){v=i>2?1:0;}
if(i&&i<3){v=Math.round(v*100)+"%";}
return v;});if(hsla[3]===1){hsla.pop();prefix="hsl(";}
return prefix+hsla.join()+")";},toHexString:function(includeAlpha){var rgba=this._rgba.slice(),alpha=rgba.pop();if(includeAlpha){rgba.push(~~(alpha*255));}
return"#"+jQuery.map(rgba,function(v){v=(v||0).toString(16);return v.length===1?"0"+v:v;}).join("");},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString();}});color.fn.parse.prototype=color.fn;function hue2rgb(p,q,h){h=(h+1)%1;if(h*6<1){return p+(q-p)*h*6;}
if(h*2<1){return q;}
if(h*3<2){return p+(q-p)*((2/3)-h)*6;}
return p;}
spaces.hsla.to=function(rgba){if(rgba[0]==null||rgba[1]==null||rgba[2]==null){return[null,null,null,rgba[3]];}
var r=rgba[0]/255,g=rgba[1]/255,b=rgba[2]/255,a=rgba[3],max=Math.max(r,g,b),min=Math.min(r,g,b),diff=max-min,add=max+min,l=add*0.5,h,s;if(min===max){h=0;}else if(r===max){h=(60*(g-b)/diff)+360;}else if(g===max){h=(60*(b-r)/diff)+120;}else{h=(60*(r-g)/diff)+240;}
if(diff===0){s=0;}else if(l<=0.5){s=diff/add;}else{s=diff/(2-add);}
return[Math.round(h)%360,s,l,a==null?1:a];};spaces.hsla.from=function(hsla){if(hsla[0]==null||hsla[1]==null||hsla[2]==null){return[null,null,null,hsla[3]];}
var h=hsla[0]/360,s=hsla[1],l=hsla[2],a=hsla[3],q=l<=0.5?l*(1+s):l+s-l*s,p=2*l-q;return[Math.round(hue2rgb(p,q,h+(1/3))*255),Math.round(hue2rgb(p,q,h)*255),Math.round(hue2rgb(p,q,h-(1/3))*255),a];};each(spaces,function(spaceName,space){var props=space.props,cache=space.cache,to=space.to,from=space.from;color.fn[spaceName]=function(value){if(to&&!this[cache]){this[cache]=to(this._rgba);}
if(value===undefined){return this[cache].slice();}
var ret,type=getType(value),arr=(type==="array"||type==="object")?value:arguments,local=this[cache].slice();each(props,function(key,prop){var val=arr[type==="object"?key:prop.idx];if(val==null){val=local[prop.idx];}
local[prop.idx]=clamp(val,prop);});if(from){ret=color(from(local));ret[cache]=local;return ret;}else{return color(local);}};each(props,function(key,prop){if(color.fn[key]){return;}
color.fn[key]=function(value){var local,cur,match,fn,vtype=getType(value);if(key==="alpha"){fn=this._hsla?"hsla":"rgba";}else{fn=spaceName;}
local=this[fn]();cur=local[prop.idx];if(vtype==="undefined"){return cur;}
if(vtype==="function"){value=value.call(this,cur);vtype=getType(value);}
if(value==null&&prop.empty){return this;}
if(vtype==="string"){match=rplusequals.exec(value);if(match){value=cur+parseFloat(match[2])*(match[1]==="+"?1:-1);}}
local[prop.idx]=value;return this[fn](local);};});});color.hook=function(hook){var hooks=hook.split(" ");each(hooks,function(_i,hook){jQuery.cssHooks[hook]={set:function(elem,value){var parsed,curElem,backgroundColor="";if(value!=="transparent"&&(getType(value)!=="string"||(parsed=stringParse(value)))){value=color(parsed||value);if(!support.rgba&&value._rgba[3]!==1){curElem=hook==="backgroundColor"?elem.parentNode:elem;while((backgroundColor===""||backgroundColor==="transparent")&&curElem&&curElem.style){try{backgroundColor=jQuery.css(curElem,"backgroundColor");curElem=curElem.parentNode;}catch(e){}}
value=value.blend(backgroundColor&&backgroundColor!=="transparent"?backgroundColor:"_default");}
value=value.toRgbaString();}
try{elem.style[hook]=value;}catch(e){}}};jQuery.fx.step[hook]=function(fx){if(!fx.colorInit){fx.start=color(fx.elem,hook);fx.end=color(fx.end);fx.colorInit=true;}
jQuery.cssHooks[hook].set(fx.elem,fx.start.transition(fx.end,fx.pos));};});};color.hook(stepHooks);jQuery.cssHooks.borderColor={expand:function(value){var expanded={};each(["Top","Right","Bottom","Left"],function(_i,part){expanded["border"+part+"Color"]=value;});return expanded;}};colors=jQuery.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};var dataSpace="ui-effects-",dataSpaceStyle="ui-effects-style",dataSpaceAnimated="ui-effects-animated";$.effects={effect:{}};(function(){var classAnimationActions=["add","remove","toggle"],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};$.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(_,prop){$.fx.step[prop]=function(fx){if(fx.end!=="none"&&!fx.setAttr||fx.pos===1&&!fx.setAttr){jQuery.style(fx.elem,prop,fx.end);fx.setAttr=true;}};});function camelCase(string){return string.replace(/-([\da-z])/gi,function(all,letter){return letter.toUpperCase();});}
function getElementStyles(elem){var key,len,style=elem.ownerDocument.defaultView?elem.ownerDocument.defaultView.getComputedStyle(elem,null):elem.currentStyle,styles={};if(style&&style.length&&style[0]&&style[style[0]]){len=style.length;while(len--){key=style[len];if(typeof style[key]==="string"){styles[camelCase(key)]=style[key];}}}else{for(key in style){if(typeof style[key]==="string"){styles[key]=style[key];}}}
return styles;}
function styleDifference(oldStyle,newStyle){var diff={},name,value;for(name in newStyle){value=newStyle[name];if(oldStyle[name]!==value){if(!shorthandStyles[name]){if($.fx.step[name]||!isNaN(parseFloat(value))){diff[name]=value;}}}}
return diff;}
if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};}
$.effects.animateClass=function(value,duration,easing,callback){var o=$.speed(duration,easing,callback);return this.queue(function(){var animated=$(this),baseClass=animated.attr("class")||"",applyClassChange,allAnimations=o.children?animated.find("*").addBack():animated;allAnimations=allAnimations.map(function(){var el=$(this);return{el:el,start:getElementStyles(this)};});applyClassChange=function(){$.each(classAnimationActions,function(i,action){if(value[action]){animated[action+"Class"](value[action]);}});};applyClassChange();allAnimations=allAnimations.map(function(){this.end=getElementStyles(this.el[0]);this.diff=styleDifference(this.start,this.end);return this;});animated.attr("class",baseClass);allAnimations=allAnimations.map(function(){var styleInfo=this,dfd=$.Deferred(),opts=$.extend({},o,{queue:false,complete:function(){dfd.resolve(styleInfo);}});this.el.animate(this.diff,opts);return dfd.promise();});$.when.apply($,allAnimations.get()).done(function(){applyClassChange();$.each(arguments,function(){var el=this.el;$.each(this.diff,function(key){el.css(key,"");});});o.complete.call(animated[0]);});});};$.fn.extend({addClass:(function(orig){return function(classNames,speed,easing,callback){return speed?$.effects.animateClass.call(this,{add:classNames},speed,easing,callback):orig.apply(this,arguments);};})($.fn.addClass),removeClass:(function(orig){return function(classNames,speed,easing,callback){return arguments.length>1?$.effects.animateClass.call(this,{remove:classNames},speed,easing,callback):orig.apply(this,arguments);};})($.fn.removeClass),toggleClass:(function(orig){return function(classNames,force,speed,easing,callback){if(typeof force==="boolean"||force===undefined){if(!speed){return orig.apply(this,arguments);}else{return $.effects.animateClass.call(this,(force?{add:classNames}:{remove:classNames}),speed,easing,callback);}}else{return $.effects.animateClass.call(this,{toggle:classNames},force,speed,easing);}};})($.fn.toggleClass),switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.call(this,{add:add,remove:remove},speed,easing,callback);}});})();(function(){if($.expr&&$.expr.pseudos&&$.expr.pseudos.animated){$.expr.pseudos.animated=(function(orig){return function(elem){return!!$(elem).data(dataSpaceAnimated)||orig(elem);};})($.expr.pseudos.animated);}
if($.uiBackCompat!==false){$.extend($.effects,{save:function(element,set){var i=0,length=set.length;for(;i<length;i++){if(set[i]!==null){element.data(dataSpace+set[i],element[0].style[set[i]]);}}},restore:function(element,set){var val,i=0,length=set.length;for(;i<length;i++){if(set[i]!==null){val=element.data(dataSpace+set[i]);element.css(set[i],val);}}},setMode:function(el,mode){if(mode==="toggle"){mode=el.is(":hidden")?"show":"hide";}
return mode;},createWrapper:function(element){if(element.parent().is(".ui-effects-wrapper")){return element.parent();}
var props={width:element.outerWidth(true),height:element.outerHeight(true),"float":element.css("float")},wrapper=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),size={width:element.width(),height:element.height()},active=document.activeElement;try{active.id;}catch(e){active=document.body;}
element.wrap(wrapper);if(element[0]===active||$.contains(element[0],active)){$(active).trigger("focus");}
wrapper=element.parent();if(element.css("position")==="static"){wrapper.css({position:"relative"});element.css({position:"relative"});}else{$.extend(props,{position:element.css("position"),zIndex:element.css("z-index")});$.each(["top","left","bottom","right"],function(i,pos){props[pos]=element.css(pos);if(isNaN(parseInt(props[pos],10))){props[pos]="auto";}});element.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"});}
element.css(size);return wrapper.css(props).show();},removeWrapper:function(element){var active=document.activeElement;if(element.parent().is(".ui-effects-wrapper")){element.parent().replaceWith(element);if(element[0]===active||$.contains(element[0],active)){$(active).trigger("focus");}}
return element;}});}
$.extend($.effects,{version:"1.13.2",define:function(name,mode,effect){if(!effect){effect=mode;mode="effect";}
$.effects.effect[name]=effect;$.effects.effect[name].mode=mode;return effect;},scaledDimensions:function(element,percent,direction){if(percent===0){return{height:0,width:0,outerHeight:0,outerWidth:0};}
var x=direction!=="horizontal"?((percent||100)/100):1,y=direction!=="vertical"?((percent||100)/100):1;return{height:element.height()*y,width:element.width()*x,outerHeight:element.outerHeight()*y,outerWidth:element.outerWidth()*x};},clipToBox:function(animation){return{width:animation.clip.right-animation.clip.left,height:animation.clip.bottom-animation.clip.top,left:animation.clip.left,top:animation.clip.top};},unshift:function(element,queueLength,count){var queue=element.queue();if(queueLength>1){queue.splice.apply(queue,[1,0].concat(queue.splice(queueLength,count)));}
element.dequeue();},saveStyle:function(element){element.data(dataSpaceStyle,element[0].style.cssText);},restoreStyle:function(element){element[0].style.cssText=element.data(dataSpaceStyle)||"";element.removeData(dataSpaceStyle);},mode:function(element,mode){var hidden=element.is(":hidden");if(mode==="toggle"){mode=hidden?"show":"hide";}
if(hidden?mode==="hide":mode==="show"){mode="none";}
return mode;},getBaseline:function(origin,original){var y,x;switch(origin[0]){case"top":y=0;break;case"middle":y=0.5;break;case"bottom":y=1;break;default:y=origin[0]/original.height;}
switch(origin[1]){case"left":x=0;break;case"center":x=0.5;break;case"right":x=1;break;default:x=origin[1]/original.width;}
return{x:x,y:y};},createPlaceholder:function(element){var placeholder,cssPosition=element.css("position"),position=element.position();element.css({marginTop:element.css("marginTop"),marginBottom:element.css("marginBottom"),marginLeft:element.css("marginLeft"),marginRight:element.css("marginRight")}).outerWidth(element.outerWidth()).outerHeight(element.outerHeight());if(/^(static|relative)/.test(cssPosition)){cssPosition="absolute";placeholder=$("<"+element[0].nodeName+">").insertAfter(element).css({display:/^(inline|ruby)/.test(element.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:element.css("marginTop"),marginBottom:element.css("marginBottom"),marginLeft:element.css("marginLeft"),marginRight:element.css("marginRight"),"float":element.css("float")}).outerWidth(element.outerWidth()).outerHeight(element.outerHeight()).addClass("ui-effects-placeholder");element.data(dataSpace+"placeholder",placeholder);}
element.css({position:cssPosition,left:position.left,top:position.top});return placeholder;},removePlaceholder:function(element){var dataKey=dataSpace+"placeholder",placeholder=element.data(dataKey);if(placeholder){placeholder.remove();element.removeData(dataKey);}},cleanUp:function(element){$.effects.restoreStyle(element);$.effects.removePlaceholder(element);},setTransition:function(element,list,factor,value){value=value||{};$.each(list,function(i,x){var unit=element.cssUnit(x);if(unit[0]>0){value[x]=unit[0]*factor+unit[1];}});return value;}});function _normalizeArguments(effect,options,speed,callback){if($.isPlainObject(effect)){options=effect;effect=effect.effect;}
effect={effect:effect};if(options==null){options={};}
if(typeof options==="function"){callback=options;speed=null;options={};}
if(typeof options==="number"||$.fx.speeds[options]){callback=speed;speed=options;options={};}
if(typeof speed==="function"){callback=speed;speed=null;}
if(options){$.extend(effect,options);}
speed=speed||options.duration;effect.duration=$.fx.off?0:typeof speed==="number"?speed:speed in $.fx.speeds?$.fx.speeds[speed]:$.fx.speeds._default;effect.complete=callback||options.complete;return effect;}
function standardAnimationOption(option){if(!option||typeof option==="number"||$.fx.speeds[option]){return true;}
if(typeof option==="string"&&!$.effects.effect[option]){return true;}
if(typeof option==="function"){return true;}
if(typeof option==="object"&&!option.effect){return true;}
return false;}
$.fn.extend({effect:function(){var args=_normalizeArguments.apply(this,arguments),effectMethod=$.effects.effect[args.effect],defaultMode=effectMethod.mode,queue=args.queue,queueName=queue||"fx",complete=args.complete,mode=args.mode,modes=[],prefilter=function(next){var el=$(this),normalizedMode=$.effects.mode(el,mode)||defaultMode;el.data(dataSpaceAnimated,true);modes.push(normalizedMode);if(defaultMode&&(normalizedMode==="show"||(normalizedMode===defaultMode&&normalizedMode==="hide"))){el.show();}
if(!defaultMode||normalizedMode!=="none"){$.effects.saveStyle(el);}
if(typeof next==="function"){next();}};if($.fx.off||!effectMethod){if(mode){return this[mode](args.duration,complete);}else{return this.each(function(){if(complete){complete.call(this);}});}}
function run(next){var elem=$(this);function cleanup(){elem.removeData(dataSpaceAnimated);$.effects.cleanUp(elem);if(args.mode==="hide"){elem.hide();}
done();}
function done(){if(typeof complete==="function"){complete.call(elem[0]);}
if(typeof next==="function"){next();}}
args.mode=modes.shift();if($.uiBackCompat!==false&&!defaultMode){if(elem.is(":hidden")?mode==="hide":mode==="show"){elem[mode]();done();}else{effectMethod.call(elem[0],args,done);}}else{if(args.mode==="none"){elem[mode]();done();}else{effectMethod.call(elem[0],args,cleanup);}}}
return queue===false?this.each(prefilter).each(run):this.queue(queueName,prefilter).queue(queueName,run);},show:(function(orig){return function(option){if(standardAnimationOption(option)){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="show";return this.effect.call(this,args);}};})($.fn.show),hide:(function(orig){return function(option){if(standardAnimationOption(option)){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="hide";return this.effect.call(this,args);}};})($.fn.hide),toggle:(function(orig){return function(option){if(standardAnimationOption(option)||typeof option==="boolean"){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="toggle";return this.effect.call(this,args);}};})($.fn.toggle),cssUnit:function(key){var style=this.css(key),val=[];$.each(["em","px","%","pt"],function(i,unit){if(style.indexOf(unit)>0){val=[parseFloat(style),unit];}});return val;},cssClip:function(clipObj){if(clipObj){return this.css("clip","rect("+clipObj.top+"px "+clipObj.right+"px "+
clipObj.bottom+"px "+clipObj.left+"px)");}
return parseClip(this.css("clip"),this);},transfer:function(options,done){var element=$(this),target=$(options.to),targetFixed=target.css("position")==="fixed",body=$("body"),fixTop=targetFixed?body.scrollTop():0,fixLeft=targetFixed?body.scrollLeft():0,endPosition=target.offset(),animation={top:endPosition.top-fixTop,left:endPosition.left-fixLeft,height:target.innerHeight(),width:target.innerWidth()},startPosition=element.offset(),transfer=$("<div class='ui-effects-transfer'></div>");transfer.appendTo("body").addClass(options.className).css({top:startPosition.top-fixTop,left:startPosition.left-fixLeft,height:element.innerHeight(),width:element.innerWidth(),position:targetFixed?"fixed":"absolute"}).animate(animation,options.duration,options.easing,function(){transfer.remove();if(typeof done==="function"){done();}});}});function parseClip(str,element){var outerWidth=element.outerWidth(),outerHeight=element.outerHeight(),clipRegex=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,values=clipRegex.exec(str)||["",0,outerWidth,outerHeight,0];return{top:parseFloat(values[1])||0,right:values[2]==="auto"?outerWidth:parseFloat(values[2]),bottom:values[3]==="auto"?outerHeight:parseFloat(values[3]),left:parseFloat(values[4])||0};}
$.fx.step.clip=function(fx){if(!fx.clipInit){fx.start=$(fx.elem).cssClip();if(typeof fx.end==="string"){fx.end=parseClip(fx.end,fx.elem);}
fx.clipInit=true;}
$(fx.elem).cssClip({top:fx.pos*(fx.end.top-fx.start.top)+fx.start.top,right:fx.pos*(fx.end.right-fx.start.right)+fx.start.right,bottom:fx.pos*(fx.end.bottom-fx.start.bottom)+fx.start.bottom,left:fx.pos*(fx.end.left-fx.start.left)+fx.start.left});};})();(function(){var baseEasings={};$.each(["Quad","Cubic","Quart","Quint","Expo"],function(i,name){baseEasings[name]=function(p){return Math.pow(p,i+2);};});$.extend(baseEasings,{Sine:function(p){return 1-Math.cos(p*Math.PI/2);},Circ:function(p){return 1-Math.sqrt(1-p*p);},Elastic:function(p){return p===0||p===1?p:-Math.pow(2,8*(p-1))*Math.sin(((p-1)*80-7.5)*Math.PI/15);},Back:function(p){return p*p*(3*p-2);},Bounce:function(p){var pow2,bounce=4;while(p<((pow2=Math.pow(2,--bounce))-1)/11){}
return 1/Math.pow(4,3-bounce)-7.5625*Math.pow((pow2*3-2)/22-p,2);}});$.each(baseEasings,function(name,easeIn){$.easing["easeIn"+name]=easeIn;$.easing["easeOut"+name]=function(p){return 1-easeIn(1-p);};$.easing["easeInOut"+name]=function(p){return p<0.5?easeIn(p*2)/2:1-easeIn(p*-2+2)/2;};});})();var effect=$.effects;var effectsEffectBlind=$.effects.define("blind","hide",function(options,done){var map={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},element=$(this),direction=options.direction||"up",start=element.cssClip(),animate={clip:$.extend({},start)},placeholder=$.effects.createPlaceholder(element);animate.clip[map[direction][0]]=animate.clip[map[direction][1]];if(options.mode==="show"){element.cssClip(animate.clip);if(placeholder){placeholder.css($.effects.clipToBox(animate));}
animate.clip=start;}
if(placeholder){placeholder.animate($.effects.clipToBox(animate),options.duration,options.easing);}
element.animate(animate,{queue:false,duration:options.duration,easing:options.easing,complete:done});});var effectsEffectBounce=$.effects.define("bounce",function(options,done){var upAnim,downAnim,refValue,element=$(this),mode=options.mode,hide=mode==="hide",show=mode==="show",direction=options.direction||"up",distance=options.distance,times=options.times||5,anims=times*2+(show||hide?1:0),speed=options.duration/anims,easing=options.easing,ref=(direction==="up"||direction==="down")?"top":"left",motion=(direction==="up"||direction==="left"),i=0,queuelen=element.queue().length;$.effects.createPlaceholder(element);refValue=element.css(ref);if(!distance){distance=element[ref==="top"?"outerHeight":"outerWidth"]()/3;}
if(show){downAnim={opacity:1};downAnim[ref]=refValue;element.css("opacity",0).css(ref,motion?-distance*2:distance*2).animate(downAnim,speed,easing);}
if(hide){distance=distance/Math.pow(2,times-1);}
downAnim={};downAnim[ref]=refValue;for(;i<times;i++){upAnim={};upAnim[ref]=(motion?"-=":"+=")+distance;element.animate(upAnim,speed,easing).animate(downAnim,speed,easing);distance=hide?distance*2:distance/2;}
if(hide){upAnim={opacity:0};upAnim[ref]=(motion?"-=":"+=")+distance;element.animate(upAnim,speed,easing);}
element.queue(done);$.effects.unshift(element,queuelen,anims+1);});var effectsEffectClip=$.effects.define("clip","hide",function(options,done){var start,animate={},element=$(this),direction=options.direction||"vertical",both=direction==="both",horizontal=both||direction==="horizontal",vertical=both||direction==="vertical";start=element.cssClip();animate.clip={top:vertical?(start.bottom-start.top)/2:start.top,right:horizontal?(start.right-start.left)/2:start.right,bottom:vertical?(start.bottom-start.top)/2:start.bottom,left:horizontal?(start.right-start.left)/2:start.left};$.effects.createPlaceholder(element);if(options.mode==="show"){element.cssClip(animate.clip);animate.clip=start;}
element.animate(animate,{queue:false,duration:options.duration,easing:options.easing,complete:done});});var effectsEffectDrop=$.effects.define("drop","hide",function(options,done){var distance,element=$(this),mode=options.mode,show=mode==="show",direction=options.direction||"left",ref=(direction==="up"||direction==="down")?"top":"left",motion=(direction==="up"||direction==="left")?"-=":"+=",oppositeMotion=(motion==="+=")?"-=":"+=",animation={opacity:0};$.effects.createPlaceholder(element);distance=options.distance||element[ref==="top"?"outerHeight":"outerWidth"](true)/2;animation[ref]=motion+distance;if(show){element.css(animation);animation[ref]=oppositeMotion+distance;animation.opacity=1;}
element.animate(animation,{queue:false,duration:options.duration,easing:options.easing,complete:done});});var effectsEffectExplode=$.effects.define("explode","hide",function(options,done){var i,j,left,top,mx,my,rows=options.pieces?Math.round(Math.sqrt(options.pieces)):3,cells=rows,element=$(this),mode=options.mode,show=mode==="show",offset=element.show().css("visibility","hidden").offset(),width=Math.ceil(element.outerWidth()/cells),height=Math.ceil(element.outerHeight()/rows),pieces=[];function childComplete(){pieces.push(this);if(pieces.length===rows*cells){animComplete();}}
for(i=0;i<rows;i++){top=offset.top+i*height;my=i-(rows-1)/2;for(j=0;j<cells;j++){left=offset.left+j*width;mx=j-(cells-1)/2;element.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*width,top:-i*height}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:width,height:height,left:left+(show?mx*width:0),top:top+(show?my*height:0),opacity:show?0:1}).animate({left:left+(show?0:mx*width),top:top+(show?0:my*height),opacity:show?1:0},options.duration||500,options.easing,childComplete);}}
function animComplete(){element.css({visibility:"visible"});$(pieces).remove();done();}});var effectsEffectFade=$.effects.define("fade","toggle",function(options,done){var show=options.mode==="show";$(this).css("opacity",show?0:1).animate({opacity:show?1:0},{queue:false,duration:options.duration,easing:options.easing,complete:done});});var effectsEffectFold=$.effects.define("fold","hide",function(options,done){var element=$(this),mode=options.mode,show=mode==="show",hide=mode==="hide",size=options.size||15,percent=/([0-9]+)%/.exec(size),horizFirst=!!options.horizFirst,ref=horizFirst?["right","bottom"]:["bottom","right"],duration=options.duration/2,placeholder=$.effects.createPlaceholder(element),start=element.cssClip(),animation1={clip:$.extend({},start)},animation2={clip:$.extend({},start)},distance=[start[ref[0]],start[ref[1]]],queuelen=element.queue().length;if(percent){size=parseInt(percent[1],10)/100*distance[hide?0:1];}
animation1.clip[ref[0]]=size;animation2.clip[ref[0]]=size;animation2.clip[ref[1]]=0;if(show){element.cssClip(animation2.clip);if(placeholder){placeholder.css($.effects.clipToBox(animation2));}
animation2.clip=start;}
element.queue(function(next){if(placeholder){placeholder.animate($.effects.clipToBox(animation1),duration,options.easing).animate($.effects.clipToBox(animation2),duration,options.easing);}
next();}).animate(animation1,duration,options.easing).animate(animation2,duration,options.easing).queue(done);$.effects.unshift(element,queuelen,4);});var effectsEffectHighlight=$.effects.define("highlight","show",function(options,done){var element=$(this),animation={backgroundColor:element.css("backgroundColor")};if(options.mode==="hide"){animation.opacity=0;}
$.effects.saveStyle(element);element.css({backgroundImage:"none",backgroundColor:options.color||"#ffff99"}).animate(animation,{queue:false,duration:options.duration,easing:options.easing,complete:done});});var effectsEffectSize=$.effects.define("size",function(options,done){var baseline,factor,temp,element=$(this),cProps=["fontSize"],vProps=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],hProps=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],mode=options.mode,restore=mode!=="effect",scale=options.scale||"both",origin=options.origin||["middle","center"],position=element.css("position"),pos=element.position(),original=$.effects.scaledDimensions(element),from=options.from||original,to=options.to||$.effects.scaledDimensions(element,0);$.effects.createPlaceholder(element);if(mode==="show"){temp=from;from=to;to=temp;}
factor={from:{y:from.height/original.height,x:from.width/original.width},to:{y:to.height/original.height,x:to.width/original.width}};if(scale==="box"||scale==="both"){if(factor.from.y!==factor.to.y){from=$.effects.setTransition(element,vProps,factor.from.y,from);to=$.effects.setTransition(element,vProps,factor.to.y,to);}
if(factor.from.x!==factor.to.x){from=$.effects.setTransition(element,hProps,factor.from.x,from);to=$.effects.setTransition(element,hProps,factor.to.x,to);}}
if(scale==="content"||scale==="both"){if(factor.from.y!==factor.to.y){from=$.effects.setTransition(element,cProps,factor.from.y,from);to=$.effects.setTransition(element,cProps,factor.to.y,to);}}
if(origin){baseline=$.effects.getBaseline(origin,original);from.top=(original.outerHeight-from.outerHeight)*baseline.y+pos.top;from.left=(original.outerWidth-from.outerWidth)*baseline.x+pos.left;to.top=(original.outerHeight-to.outerHeight)*baseline.y+pos.top;to.left=(original.outerWidth-to.outerWidth)*baseline.x+pos.left;}
delete from.outerHeight;delete from.outerWidth;element.css(from);if(scale==="content"||scale==="both"){vProps=vProps.concat(["marginTop","marginBottom"]).concat(cProps);hProps=hProps.concat(["marginLeft","marginRight"]);element.find("*[width]").each(function(){var child=$(this),childOriginal=$.effects.scaledDimensions(child),childFrom={height:childOriginal.height*factor.from.y,width:childOriginal.width*factor.from.x,outerHeight:childOriginal.outerHeight*factor.from.y,outerWidth:childOriginal.outerWidth*factor.from.x},childTo={height:childOriginal.height*factor.to.y,width:childOriginal.width*factor.to.x,outerHeight:childOriginal.height*factor.to.y,outerWidth:childOriginal.width*factor.to.x};if(factor.from.y!==factor.to.y){childFrom=$.effects.setTransition(child,vProps,factor.from.y,childFrom);childTo=$.effects.setTransition(child,vProps,factor.to.y,childTo);}
if(factor.from.x!==factor.to.x){childFrom=$.effects.setTransition(child,hProps,factor.from.x,childFrom);childTo=$.effects.setTransition(child,hProps,factor.to.x,childTo);}
if(restore){$.effects.saveStyle(child);}
child.css(childFrom);child.animate(childTo,options.duration,options.easing,function(){if(restore){$.effects.restoreStyle(child);}});});}
element.animate(to,{queue:false,duration:options.duration,easing:options.easing,complete:function(){var offset=element.offset();if(to.opacity===0){element.css("opacity",from.opacity);}
if(!restore){element.css("position",position==="static"?"relative":position).offset(offset);$.effects.saveStyle(element);}
done();}});});var effectsEffectScale=$.effects.define("scale",function(options,done){var el=$(this),mode=options.mode,percent=parseInt(options.percent,10)||(parseInt(options.percent,10)===0?0:(mode!=="effect"?0:100)),newOptions=$.extend(true,{from:$.effects.scaledDimensions(el),to:$.effects.scaledDimensions(el,percent,options.direction||"both"),origin:options.origin||["middle","center"]},options);if(options.fade){newOptions.from.opacity=1;newOptions.to.opacity=0;}
$.effects.effect.size.call(this,newOptions,done);});var effectsEffectPuff=$.effects.define("puff","hide",function(options,done){var newOptions=$.extend(true,{},options,{fade:true,percent:parseInt(options.percent,10)||150});$.effects.effect.scale.call(this,newOptions,done);});var effectsEffectPulsate=$.effects.define("pulsate","show",function(options,done){var element=$(this),mode=options.mode,show=mode==="show",hide=mode==="hide",showhide=show||hide,anims=((options.times||5)*2)+(showhide?1:0),duration=options.duration/anims,animateTo=0,i=1,queuelen=element.queue().length;if(show||!element.is(":visible")){element.css("opacity",0).show();animateTo=1;}
for(;i<anims;i++){element.animate({opacity:animateTo},duration,options.easing);animateTo=1-animateTo;}
element.animate({opacity:animateTo},duration,options.easing);element.queue(done);$.effects.unshift(element,queuelen,anims+1);});var effectsEffectShake=$.effects.define("shake",function(options,done){var i=1,element=$(this),direction=options.direction||"left",distance=options.distance||20,times=options.times||3,anims=times*2+1,speed=Math.round(options.duration/anims),ref=(direction==="up"||direction==="down")?"top":"left",positiveMotion=(direction==="up"||direction==="left"),animation={},animation1={},animation2={},queuelen=element.queue().length;$.effects.createPlaceholder(element);animation[ref]=(positiveMotion?"-=":"+=")+distance;animation1[ref]=(positiveMotion?"+=":"-=")+distance*2;animation2[ref]=(positiveMotion?"-=":"+=")+distance*2;element.animate(animation,speed,options.easing);for(;i<times;i++){element.animate(animation1,speed,options.easing).animate(animation2,speed,options.easing);}
element.animate(animation1,speed,options.easing).animate(animation,speed/2,options.easing).queue(done);$.effects.unshift(element,queuelen,anims+1);});var effectsEffectSlide=$.effects.define("slide","show",function(options,done){var startClip,startRef,element=$(this),map={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},mode=options.mode,direction=options.direction||"left",ref=(direction==="up"||direction==="down")?"top":"left",positiveMotion=(direction==="up"||direction==="left"),distance=options.distance||element[ref==="top"?"outerHeight":"outerWidth"](true),animation={};$.effects.createPlaceholder(element);startClip=element.cssClip();startRef=element.position()[ref];animation[ref]=(positiveMotion?-1:1)*distance+startRef;animation.clip=element.cssClip();animation.clip[map[direction][1]]=animation.clip[map[direction][0]];if(mode==="show"){element.cssClip(animation.clip);element.css(ref,animation[ref]);animation.clip=startClip;animation[ref]=startRef;}
element.animate(animation,{queue:false,duration:options.duration,easing:options.easing,complete:done});});var effect;if($.uiBackCompat!==false){effect=$.effects.define("transfer",function(options,done){$(this).transfer(options,done);});}
var effectsEffectTransfer=effect;$.ui.focusable=function(element,hasTabindex){var map,mapName,img,focusableIfVisible,fieldset,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false;}
img=$("img[usemap='#"+mapName+"']");return img.length>0&&img.is(":visible");}
if(/^(input|select|textarea|button|object)$/.test(nodeName)){focusableIfVisible=!element.disabled;if(focusableIfVisible){fieldset=$(element).closest("fieldset")[0];if(fieldset){focusableIfVisible=!fieldset.disabled;}}}else if("a"===nodeName){focusableIfVisible=element.href||hasTabindex;}else{focusableIfVisible=hasTabindex;}
return focusableIfVisible&&$(element).is(":visible")&&visible($(element));};function visible(element){var visibility=element.css("visibility");while(visibility==="inherit"){element=element.parent();visibility=element.css("visibility");}
return visibility==="visible";}
$.extend($.expr.pseudos,{focusable:function(element){return $.ui.focusable(element,$.attr(element,"tabindex")!=null);}});var focusable=$.ui.focusable;var form=$.fn._form=function(){return typeof this[0].form==="string"?this.closest("form"):$(this[0].form);};var formResetMixin=$.ui.formResetMixin={_formResetHandler:function(){var form=$(this);setTimeout(function(){var instances=form.data("ui-form-reset-instances");$.each(instances,function(){this.refresh();});});},_bindFormResetHandler:function(){this.form=this.element._form();if(!this.form.length){return;}
var instances=this.form.data("ui-form-reset-instances")||[];if(!instances.length){this.form.on("reset.ui-form-reset",this._formResetHandler);}
instances.push(this);this.form.data("ui-form-reset-instances",instances);},_unbindFormResetHandler:function(){if(!this.form.length){return;}
var instances=this.form.data("ui-form-reset-instances");instances.splice($.inArray(this,instances),1);if(instances.length){this.form.data("ui-form-reset-instances",instances);}else{this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset");}}};if(!$.expr.pseudos){$.expr.pseudos=$.expr[":"];}
if(!$.uniqueSort){$.uniqueSort=$.unique;}
if(!$.escapeSelector){var rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;var fcssescape=function(ch,asCodePoint){if(asCodePoint){if(ch==="\0"){return"\uFFFD";}
return ch.slice(0,-1)+"\\"+ch.charCodeAt(ch.length-1).toString(16)+" ";}
return"\\"+ch;};$.escapeSelector=function(sel){return(sel+"").replace(rcssescape,fcssescape);};}
if(!$.fn.even||!$.fn.odd){$.fn.extend({even:function(){return this.filter(function(i){return i%2===0;});},odd:function(){return this.filter(function(i){return i%2===1;});}});};var keycode=$.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};var labels=$.fn.labels=function(){var ancestor,selector,id,labels,ancestors;if(!this.length){return this.pushStack([]);}
if(this[0].labels&&this[0].labels.length){return this.pushStack(this[0].labels);}
labels=this.eq(0).parents("label");id=this.attr("id");if(id){ancestor=this.eq(0).parents().last();ancestors=ancestor.add(ancestor.length?ancestor.siblings():this.siblings());selector="label[for='"+$.escapeSelector(id)+"']";labels=labels.add(ancestors.find(selector).addBack(selector));}
return this.pushStack(labels);};var scrollParent=$.fn.scrollParent=function(includeHidden){var position=this.css("position"),excludeStaticParent=position==="absolute",overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=this.parents().filter(function(){var parent=$(this);if(excludeStaticParent&&parent.css("position")==="static"){return false;}
return overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+
parent.css("overflow-x"));}).eq(0);return position==="fixed"||!scrollParent.length?$(this[0].ownerDocument||document):scrollParent;};var tabbable=$.extend($.expr.pseudos,{tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),hasTabindex=tabIndex!=null;return(!hasTabindex||tabIndex>=0)&&$.ui.focusable(element,hasTabindex);}});var uniqueId=$.fn.extend({uniqueId:(function(){var uuid=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++uuid);}});};})(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){$(this).removeAttr("id");}});}});var widgetsAccordion=$.widget("ui.accordion",{version:"1.13.2",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:false,event:"click",header:function(elem){return elem.find("> li > :first-child").add(elem.find("> :not(li)").even());},heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var options=this.options;this.prevShow=this.prevHide=$();this._addClass("ui-accordion","ui-widget ui-helper-reset");this.element.attr("role","tablist");if(!options.collapsible&&(options.active===false||options.active==null)){options.active=0;}
this._processPanels();if(options.active<0){options.active+=this.headers.length;}
this._refresh();},_getCreateEventData:function(){return{header:this.active,panel:!this.active.length?$():this.active.next()};},_createIcons:function(){var icon,children,icons=this.options.icons;if(icons){icon=$("<span>");this._addClass(icon,"ui-accordion-header-icon","ui-icon "+icons.header);icon.prependTo(this.headers);children=this.active.children(".ui-accordion-header-icon");this._removeClass(children,icons.header)._addClass(children,null,icons.activeHeader)._addClass(this.headers,"ui-accordion-icons");}},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons");this.headers.children(".ui-accordion-header-icon").remove();},_destroy:function(){var contents;this.element.removeAttr("role");this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId();this._destroyIcons();contents=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId();if(this.options.heightStyle!=="content"){contents.css("height","");}},_setOption:function(key,value){if(key==="active"){this._activate(value);return;}
if(key==="event"){if(this.options.event){this._off(this.headers,this.options.event);}
this._setupEvents(value);}
this._super(key,value);if(key==="collapsible"&&!value&&this.options.active===false){this._activate(0);}
if(key==="icons"){this._destroyIcons();if(value){this._createIcons();}}},_setOptionDisabled:function(value){this._super(value);this.element.attr("aria-disabled",value);this._toggleClass(null,"ui-state-disabled",!!value);this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!value);},_keydown:function(event){if(event.altKey||event.ctrlKey){return;}
var keyCode=$.ui.keyCode,length=this.headers.length,currentIndex=this.headers.index(event.target),toFocus=false;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:this._eventHandler(event);break;case keyCode.HOME:toFocus=this.headers[0];break;case keyCode.END:toFocus=this.headers[length-1];break;}
if(toFocus){$(event.target).attr("tabIndex",-1);$(toFocus).attr("tabIndex",0);$(toFocus).trigger("focus");event.preventDefault();}},_panelKeyDown:function(event){if(event.keyCode===$.ui.keyCode.UP&&event.ctrlKey){$(event.currentTarget).prev().trigger("focus");}},refresh:function(){var options=this.options;this._processPanels();if((options.active===false&&options.collapsible===true)||!this.headers.length){options.active=false;this.active=$();}else if(options.active===false){this._activate(0);}else if(this.active.length&&!$.contains(this.element[0],this.active[0])){if(this.headers.length===this.headers.find(".ui-state-disabled").length){options.active=false;this.active=$();}else{this._activate(Math.max(0,options.active-1));}}else{options.active=this.headers.index(this.active);}
this._destroyIcons();this._refresh();},_processPanels:function(){var prevHeaders=this.headers,prevPanels=this.panels;if(typeof this.options.header==="function"){this.headers=this.options.header(this.element);}else{this.headers=this.element.find(this.options.header);}
this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default");this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide();this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content");if(prevPanels){this._off(prevHeaders.not(this.headers));this._off(prevPanels.not(this.panels));}},_refresh:function(){var maxHeight,options=this.options,heightStyle=options.heightStyle,parent=this.element.parent();this.active=this._findActive(options.active);this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed");this._addClass(this.active.next(),"ui-accordion-content-active");this.active.next().show();this.headers.attr("role","tab").each(function(){var header=$(this),headerId=header.uniqueId().attr("id"),panel=header.next(),panelId=panel.uniqueId().attr("id");header.attr("aria-controls",panelId);panel.attr("aria-labelledby",headerId);}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex",0);}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"});}
this._createIcons();this._setupEvents(options.event);if(heightStyle==="fill"){maxHeight=parent.height();this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed"){return;}
maxHeight-=elem.outerHeight(true);});this.headers.each(function(){maxHeight-=$(this).outerHeight(true);});this.headers.next().each(function(){$(this).height(Math.max(0,maxHeight-
$(this).innerHeight()+$(this).height()));}).css("overflow","auto");}else if(heightStyle==="auto"){maxHeight=0;this.headers.next().each(function(){var isVisible=$(this).is(":visible");if(!isVisible){$(this).show();}
maxHeight=Math.max(maxHeight,$(this).css("height","").height());if(!isVisible){$(this).hide();}}).height(maxHeight);}},_activate:function(index){var active=this._findActive(index)[0];if(active===this.active[0]){return;}
active=active||this.active[0];this._eventHandler({target:active,currentTarget:active,preventDefault:$.noop});},_findActive:function(selector){return typeof selector==="number"?this.headers.eq(selector):$();},_setupEvents:function(event){var events={keydown:"_keydown"};if(event){$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler";});}
this._off(this.headers.add(this.headers.next()));this._on(this.headers,events);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers);},_eventHandler:function(event){var activeChildren,clickedChildren,options=this.options,active=this.active,clicked=$(event.currentTarget),clickedIsActive=clicked[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():clicked.next(),toHide=active.next(),eventData={oldHeader:active,oldPanel:toHide,newHeader:collapsing?$():clicked,newPanel:toShow};event.preventDefault();if((clickedIsActive&&!options.collapsible)||(this._trigger("beforeActivate",event,eventData)===false)){return;}
options.active=collapsing?false:this.headers.index(clicked);this.active=clickedIsActive?$():clicked;this._toggle(eventData);this._removeClass(active,"ui-accordion-header-active","ui-state-active");if(options.icons){activeChildren=active.children(".ui-accordion-header-icon");this._removeClass(activeChildren,null,options.icons.activeHeader)._addClass(activeChildren,null,options.icons.header);}
if(!clickedIsActive){this._removeClass(clicked,"ui-accordion-header-collapsed")._addClass(clicked,"ui-accordion-header-active","ui-state-active");if(options.icons){clickedChildren=clicked.children(".ui-accordion-header-icon");this._removeClass(clickedChildren,null,options.icons.header)._addClass(clickedChildren,null,options.icons.activeHeader);}
this._addClass(clicked.next(),"ui-accordion-content-active");}},_toggle:function(data){var toShow=data.newPanel,toHide=this.prevShow.length?this.prevShow:data.oldPanel;this.prevShow.add(this.prevHide).stop(true,true);this.prevShow=toShow;this.prevHide=toHide;if(this.options.animate){this._animate(toShow,toHide,data);}else{toHide.hide();toShow.show();this._toggleComplete(data);}
toHide.attr({"aria-hidden":"true"});toHide.prev().attr({"aria-selected":"false","aria-expanded":"false"});if(toShow.length&&toHide.length){toHide.prev().attr({"tabIndex":-1,"aria-expanded":"false"});}else if(toShow.length){this.headers.filter(function(){return parseInt($(this).attr("tabIndex"),10)===0;}).attr("tabIndex",-1);}
toShow.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});},_animate:function(toShow,toHide,data){var total,easing,duration,that=this,adjust=0,boxSizing=toShow.css("box-sizing"),down=toShow.length&&(!toHide.length||(toShow.index()<toHide.index())),animate=this.options.animate||{},options=down&&animate.down||animate,complete=function(){that._toggleComplete(data);};if(typeof options==="number"){duration=options;}
if(typeof options==="string"){easing=options;}
easing=easing||options.easing||animate.easing;duration=duration||options.duration||animate.duration;if(!toHide.length){return toShow.animate(this.showProps,duration,easing,complete);}
if(!toShow.length){return toHide.animate(this.hideProps,duration,easing,complete);}
total=toShow.show().outerHeight();toHide.animate(this.hideProps,{duration:duration,easing:easing,step:function(now,fx){fx.now=Math.round(now);}});toShow.hide().animate(this.showProps,{duration:duration,easing:easing,complete:complete,step:function(now,fx){fx.now=Math.round(now);if(fx.prop!=="height"){if(boxSizing==="content-box"){adjust+=fx.now;}}else if(that.options.heightStyle!=="content"){fx.now=Math.round(total-toHide.outerHeight()-adjust);adjust=0;}}});},_toggleComplete:function(data){var toHide=data.oldPanel,prev=toHide.prev();this._removeClass(toHide,"ui-accordion-content-active");this._removeClass(prev,"ui-accordion-header-active")._addClass(prev,"ui-accordion-header-collapsed");if(toHide.length){toHide.parent()[0].className=toHide.parent()[0].className;}
this._trigger("activate",null,data);}});var safeActiveElement=$.ui.safeActiveElement=function(document){var activeElement;try{activeElement=document.activeElement;}catch(error){activeElement=document.body;}
if(!activeElement){activeElement=document.body;}
if(!activeElement.nodeName){activeElement=document.body;}
return activeElement;};var widgetsMenu=$.widget("ui.menu",{version:"1.13.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.lastMousePosition={x:null,y:null};this.element.uniqueId().attr({role:this.options.role,tabIndex:0});this._addClass("ui-menu","ui-widget ui-widget-content");this._on({"mousedown .ui-menu-item":function(event){event.preventDefault();this._activateItem(event);},"click .ui-menu-item":function(event){var target=$(event.target);var active=$($.ui.safeActiveElement(this.document[0]));if(!this.mouseHandled&&target.not(".ui-state-disabled").length){this.select(event);if(!event.isPropagationStopped()){this.mouseHandled=true;}
if(target.has(".ui-menu").length){this.expand(event);}else if(!this.element.is(":focus")&&active.closest(".ui-menu").length){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer);}}}},"mouseenter .ui-menu-item":"_activateItem","mousemove .ui-menu-item":"_activateItem",mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event,keepActiveItem){var item=this.active||this._menuItems().first();if(!keepActiveItem){this.focus(event,item);}},blur:function(event){this._delay(function(){var notContained=!$.contains(this.element[0],$.ui.safeActiveElement(this.document[0]));if(notContained){this.collapseAll(event);}});},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(event){if(this._closeOnDocumentClick(event)){this.collapseAll(event,true);}
this.mouseHandled=false;}});},_activateItem:function(event){if(this.previousFilter){return;}
if(event.clientX===this.lastMousePosition.x&&event.clientY===this.lastMousePosition.y){return;}
this.lastMousePosition={x:event.clientX,y:event.clientY};var actualTarget=$(event.target).closest(".ui-menu-item"),target=$(event.currentTarget);if(actualTarget[0]!==target[0]){return;}
if(target.is(".ui-state-active")){return;}
this._removeClass(target.siblings().children(".ui-state-active"),null,"ui-state-active");this.focus(event,target);},_destroy:function(){var items=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),submenus=items.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled "+"tabIndex").removeUniqueId().show();submenus.children().each(function(){var elem=$(this);if(elem.data("ui-menu-submenu-caret")){elem.remove();}});},_keydown:function(event){var match,prev,character,skip,preventDefault=true;switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;case $.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(event);}
break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=false;prev=this.previousFilter||"";skip=false;character=event.keyCode>=96&&event.keyCode<=105?(event.keyCode-96).toString():String.fromCharCode(event.keyCode);clearTimeout(this.filterTimer);if(character===prev){skip=true;}else{character=prev+character;}
match=this._filterMenuItems(character);match=skip&&match.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):match;if(!match.length){character=String.fromCharCode(event.keyCode);match=this._filterMenuItems(character);}
if(match.length){this.focus(event,match);this.previousFilter=character;this.filterTimer=this._delay(function(){delete this.previousFilter;},1000);}else{delete this.previousFilter;}}
if(preventDefault){event.preventDefault();}},_activate:function(event){if(this.active&&!this.active.is(".ui-state-disabled")){if(this.active.children("[aria-haspopup='true']").length){this.expand(event);}else{this.select(event);}}},refresh:function(){var menus,items,newSubmenus,newItems,newWrappers,that=this,icon=this.options.icons.submenu,submenus=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length);newSubmenus=submenus.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var menu=$(this),item=menu.prev(),submenuCaret=$("<span>").data("ui-menu-submenu-caret",true);that._addClass(submenuCaret,"ui-menu-icon","ui-icon "+icon);item.attr("aria-haspopup","true").prepend(submenuCaret);menu.attr("aria-labelledby",item.attr("id"));});this._addClass(newSubmenus,"ui-menu","ui-widget ui-widget-content ui-front");menus=submenus.add(this.element);items=menus.find(this.options.items);items.not(".ui-menu-item").each(function(){var item=$(this);if(that._isDivider(item)){that._addClass(item,"ui-menu-divider","ui-widget-content");}});newItems=items.not(".ui-menu-item, .ui-menu-divider");newWrappers=newItems.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()});this._addClass(newItems,"ui-menu-item")._addClass(newWrappers,"ui-menu-item-wrapper");items.filter(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!$.contains(this.element[0],this.active[0])){this.blur();}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role];},_setOption:function(key,value){if(key==="icons"){var icons=this.element.find(".ui-menu-icon");this._removeClass(icons,null,this.options.icons.submenu)._addClass(icons,null,value.submenu);}
this._super(key,value);},_setOptionDisabled:function(value){this._super(value);this.element.attr("aria-disabled",String(value));this._toggleClass(null,"ui-state-disabled",!!value);},focus:function(event,item){var nested,focused,activeParent;this.blur(event,event&&event.type==="focus");this._scrollIntoView(item);this.active=item.first();focused=this.active.children(".ui-menu-item-wrapper");this._addClass(focused,null,"ui-state-active");if(this.options.role){this.element.attr("aria-activedescendant",focused.attr("id"));}
activeParent=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper");this._addClass(activeParent,null,"ui-state-active");if(event&&event.type==="keydown"){this._close();}else{this.timer=this._delay(function(){this._close();},this.delay);}
nested=item.children(".ui-menu");if(nested.length&&event&&(/^mouse/.test(event.type))){this._startOpening(nested);}
this.activeMenu=item.parent();this._trigger("focus",event,{item:item});},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;if(this._hasScroll()){borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0;paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0;offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop;scroll=this.activeMenu.scrollTop();elementHeight=this.activeMenu.height();itemHeight=item.outerHeight();if(offset<0){this.activeMenu.scrollTop(scroll+offset);}else if(offset+itemHeight>elementHeight){this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight);}}},blur:function(event,fromFocus){if(!fromFocus){clearTimeout(this.timer);}
if(!this.active){return;}
this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active");this._trigger("blur",event,{item:this.active});this.active=null;},_startOpening:function(submenu){clearTimeout(this.timer);if(submenu.attr("aria-hidden")!=="true"){return;}
this.timer=this._delay(function(){this._close();this._open(submenu);},this.delay);},_open:function(submenu){var position=$.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden","true");submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position);},collapseAll:function(event,all){clearTimeout(this.timer);this.timer=this._delay(function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));if(!currentMenu.length){currentMenu=this.element;}
this._close(currentMenu);this.blur(event);this._removeClass(currentMenu.find(".ui-state-active"),null,"ui-state-active");this.activeMenu=currentMenu;},all?0:this.delay);},_close:function(startMenu){if(!startMenu){startMenu=this.active?this.active.parent():this.element;}
startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false");},_closeOnDocumentClick:function(event){return!$(event.target).closest(".ui-menu").length;},_isDivider:function(item){return!/[^\-\u2014\u2013\s]/.test(item.text());},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(newItem&&newItem.length){this._close();this.focus(event,newItem);}},expand:function(event){var newItem=this.active&&this._menuItems(this.active.children(".ui-menu")).first();if(newItem&&newItem.length){this._open(newItem.parent());this._delay(function(){this.focus(event,newItem);});}},next:function(event){this._move("next","first",event);},previous:function(event){this._move("prev","last",event);},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length;},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length;},_menuItems:function(menu){return(menu||this.element).find(this.options.items).filter(".ui-menu-item");},_move:function(direction,filter,event){var next;if(this.active){if(direction==="first"||direction==="last"){next=this.active
[direction==="first"?"prevAll":"nextAll"](".ui-menu-item").last();}else{next=this.active
[direction+"All"](".ui-menu-item").first();}}
if(!next||!next.length||!this.active){next=this._menuItems(this.activeMenu)[filter]();}
this.focus(event,next);},nextPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}
if(this.isLastItem()){return;}
if(this._hasScroll()){base=this.active.offset().top;height=this.element.innerHeight();if($.fn.jquery.indexOf("3.2.")===0){height+=this.element[0].offsetHeight-this.element.outerHeight();}
this.active.nextAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base-height<0;});this.focus(event,item);}else{this.focus(event,this._menuItems(this.activeMenu)
[!this.active?"first":"last"]());}},previousPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}
if(this.isFirstItem()){return;}
if(this._hasScroll()){base=this.active.offset().top;height=this.element.innerHeight();if($.fn.jquery.indexOf("3.2.")===0){height+=this.element[0].offsetHeight-this.element.outerHeight();}
this.active.prevAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base+height>0;});this.focus(event,item);}else{this.focus(event,this._menuItems(this.activeMenu).first());}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight");},select:function(event){this.active=this.active||$(event.target).closest(".ui-menu-item");var ui={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(event,true);}
this._trigger("select",event,ui);},_filterMenuItems:function(character){var escapedCharacter=character.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),regex=new RegExp("^"+escapedCharacter,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return regex.test(String.prototype.trim.call($(this).children(".ui-menu-item-wrapper").text()));});}});$.widget("ui.autocomplete",{version:"1.13.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_create:function(){var suppressKeyPress,suppressKeyPressRepeat,suppressInput,nodeName=this.element[0].nodeName.toLowerCase(),isTextarea=nodeName==="textarea",isInput=nodeName==="input";this.isMultiLine=isTextarea||!isInput&&this._isContentEditable(this.element);this.valueMethod=this.element[isTextarea||isInput?"val":"text"];this.isNewMenu=true;this._addClass("ui-autocomplete-input");this.element.attr("autocomplete","off");this._on(this.element,{keydown:function(event){if(this.element.prop("readOnly")){suppressKeyPress=true;suppressInput=true;suppressKeyPressRepeat=true;return;}
suppressKeyPress=false;suppressInput=false;suppressKeyPressRepeat=false;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:suppressKeyPress=true;this._move("previousPage",event);break;case keyCode.PAGE_DOWN:suppressKeyPress=true;this._move("nextPage",event);break;case keyCode.UP:suppressKeyPress=true;this._keyEvent("previous",event);break;case keyCode.DOWN:suppressKeyPress=true;this._keyEvent("next",event);break;case keyCode.ENTER:if(this.menu.active){suppressKeyPress=true;event.preventDefault();this.menu.select(event);}
break;case keyCode.TAB:if(this.menu.active){this.menu.select(event);}
break;case keyCode.ESCAPE:if(this.menu.element.is(":visible")){if(!this.isMultiLine){this._value(this.term);}
this.close(event);event.preventDefault();}
break;default:suppressKeyPressRepeat=true;this._searchTimeout(event);break;}},keypress:function(event){if(suppressKeyPress){suppressKeyPress=false;if(!this.isMultiLine||this.menu.element.is(":visible")){event.preventDefault();}
return;}
if(suppressKeyPressRepeat){return;}
var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:this._move("previousPage",event);break;case keyCode.PAGE_DOWN:this._move("nextPage",event);break;case keyCode.UP:this._keyEvent("previous",event);break;case keyCode.DOWN:this._keyEvent("next",event);break;}},input:function(event){if(suppressInput){suppressInput=false;event.preventDefault();return;}
this._searchTimeout(event);},focus:function(){this.selectedItem=null;this.previous=this._value();},blur:function(event){clearTimeout(this.searching);this.close(event);this._change(event);}});this._initSource();this.menu=$("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().attr({"unselectable":"on"}).menu("instance");this._addClass(this.menu.element,"ui-autocomplete","ui-front");this._on(this.menu.element,{mousedown:function(event){event.preventDefault();},menufocus:function(event,ui){var label,item;if(this.isNewMenu){this.isNewMenu=false;if(event.originalEvent&&/^mouse/.test(event.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){$(event.target).trigger(event.originalEvent);});return;}}
item=ui.item.data("ui-autocomplete-item");if(false!==this._trigger("focus",event,{item:item})){if(event.originalEvent&&/^key/.test(event.originalEvent.type)){this._value(item.value);}}
label=ui.item.attr("aria-label")||item.value;if(label&&String.prototype.trim.call(label).length){clearTimeout(this.liveRegionTimer);this.liveRegionTimer=this._delay(function(){this.liveRegion.html($("<div>").text(label));},100);}},menuselect:function(event,ui){var item=ui.item.data("ui-autocomplete-item"),previous=this.previous;if(this.element[0]!==$.ui.safeActiveElement(this.document[0])){this.element.trigger("focus");this.previous=previous;this._delay(function(){this.previous=previous;this.selectedItem=item;});}
if(false!==this._trigger("select",event,{item:item})){this._value(item.value);}
this.term=this._value();this.close(event);this.selectedItem=item;}});this.liveRegion=$("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete");}});},_destroy:function(){clearTimeout(this.searching);this.element.removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove();},_setOption:function(key,value){this._super(key,value);if(key==="source"){this._initSource();}
if(key==="appendTo"){this.menu.element.appendTo(this._appendTo());}
if(key==="disabled"&&value&&this.xhr){this.xhr.abort();}},_isEventTargetInWidget:function(event){var menuElement=this.menu.element[0];return event.target===this.element[0]||event.target===menuElement||$.contains(menuElement,event.target);},_closeOnClickOutside:function(event){if(!this._isEventTargetInWidget(event)){this.close();}},_appendTo:function(){var element=this.options.appendTo;if(element){element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0);}
if(!element||!element[0]){element=this.element.closest(".ui-front, dialog");}
if(!element.length){element=this.document[0].body;}
return element;},_initSource:function(){var array,url,that=this;if(Array.isArray(this.options.source)){array=this.options.source;this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term));};}else if(typeof this.options.source==="string"){url=this.options.source;this.source=function(request,response){if(that.xhr){that.xhr.abort();}
that.xhr=$.ajax({url:url,data:request,dataType:"json",success:function(data){response(data);},error:function(){response([]);}});};}else{this.source=this.options.source;}},_searchTimeout:function(event){clearTimeout(this.searching);this.searching=this._delay(function(){var equalValues=this.term===this._value(),menuVisible=this.menu.element.is(":visible"),modifierKey=event.altKey||event.ctrlKey||event.metaKey||event.shiftKey;if(!equalValues||(equalValues&&!menuVisible&&!modifierKey)){this.selectedItem=null;this.search(null,event);}},this.options.delay);},search:function(value,event){value=value!=null?value:this._value();this.term=this._value();if(value.length<this.options.minLength){return this.close(event);}
if(this._trigger("search",event)===false){return;}
return this._search(value);},_search:function(value){this.pending++;this._addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:value},this._response());},_response:function(){var index=++this.requestIndex;return function(content){if(index===this.requestIndex){this.__response(content);}
this.pending--;if(!this.pending){this._removeClass("ui-autocomplete-loading");}}.bind(this);},__response:function(content){if(content){content=this._normalize(content);}
this._trigger("response",null,{content:content});if(!this.options.disabled&&content&&content.length&&!this.cancelSearch){this._suggest(content);this._trigger("open");}else{this._close();}},close:function(event){this.cancelSearch=true;this._close(event);},_close:function(event){this._off(this.document,"mousedown");if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",event);}},_change:function(event){if(this.previous!==this._value()){this._trigger("change",event,{item:this.selectedItem});}},_normalize:function(items){if(items.length&&items[0].label&&items[0].value){return items;}
return $.map(items,function(item){if(typeof item==="string"){return{label:item,value:item};}
return $.extend({},item,{label:item.label||item.value,value:item.value||item.label});});},_suggest:function(items){var ul=this.menu.element.empty();this._renderMenu(ul,items);this.isNewMenu=true;this.menu.refresh();ul.show();this._resizeMenu();ul.position($.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next();}
this._on(this.document,{mousedown:"_closeOnClickOutside"});},_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth()+1,this.element.outerWidth()));},_renderMenu:function(ul,items){var that=this;$.each(items,function(index,item){that._renderItemData(ul,item);});},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-autocomplete-item",item);},_renderItem:function(ul,item){return $("<li>").append($("<div>").text(item.label)).appendTo(ul);},_move:function(direction,event){if(!this.menu.element.is(":visible")){this.search(null,event);return;}
if(this.menu.isFirstItem()&&/^previous/.test(direction)||this.menu.isLastItem()&&/^next/.test(direction)){if(!this.isMultiLine){this._value(this.term);}
this.menu.blur();return;}
this.menu[direction](event);},widget:function(){return this.menu.element;},_value:function(){return this.valueMethod.apply(this.element,arguments);},_keyEvent:function(keyEvent,event){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(keyEvent,event);event.preventDefault();}},_isContentEditable:function(element){if(!element.length){return false;}
var editable=element.prop("contentEditable");if(editable==="inherit"){return this._isContentEditable(element.parent());}
return editable==="true";}});$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,function(value){return matcher.test(value.label||value.value||value);});}});$.widget("ui.autocomplete",$.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(amount){return amount+(amount>1?" results are":" result is")+" available, use up and down arrow keys to navigate.";}}},__response:function(content){var message;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return;}
if(content&&content.length){message=this.options.messages.results(content.length);}else{message=this.options.messages.noResults;}
clearTimeout(this.liveRegionTimer);this.liveRegionTimer=this._delay(function(){this.liveRegion.html($("<div>").text(message));},100);}});var widgetsAutocomplete=$.ui.autocomplete;var controlgroupCornerRegex=/ui-corner-([a-z]){2,6}/g;var widgetsControlgroup=$.widget("ui.controlgroup",{version:"1.13.2",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:true,items:{"button":"input[type=button], input[type=submit], input[type=reset], button, a","controlgroupLabel":".ui-controlgroup-label","checkboxradio":"input[type='checkbox'], input[type='radio']","selectmenu":"select","spinner":".ui-spinner-input"}},_create:function(){this._enhance();},_enhance:function(){this.element.attr("role","toolbar");this.refresh();},_destroy:function(){this._callChildMethod("destroy");this.childWidgets.removeData("ui-controlgroup-data");this.element.removeAttr("role");if(this.options.items.controlgroupLabel){this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap();}},_initWidgets:function(){var that=this,childWidgets=[];$.each(this.options.items,function(widget,selector){var labels;var options={};if(!selector){return;}
if(widget==="controlgroupLabel"){labels=that.element.find(selector);labels.each(function(){var element=$(this);if(element.children(".ui-controlgroup-label-contents").length){return;}
element.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>");});that._addClass(labels,null,"ui-widget ui-widget-content ui-state-default");childWidgets=childWidgets.concat(labels.get());return;}
if(!$.fn[widget]){return;}
if(that["_"+widget+"Options"]){options=that["_"+widget+"Options"]("middle");}else{options={classes:{}};}
that.element.find(selector).each(function(){var element=$(this);var instance=element[widget]("instance");var instanceOptions=$.widget.extend({},options);if(widget==="button"&&element.parent(".ui-spinner").length){return;}
if(!instance){instance=element[widget]()[widget]("instance");}
if(instance){instanceOptions.classes=that._resolveClassesValues(instanceOptions.classes,instance);}
element[widget](instanceOptions);var widgetElement=element[widget]("widget");$.data(widgetElement[0],"ui-controlgroup-data",instance?instance:element[widget]("instance"));childWidgets.push(widgetElement[0]);});});this.childWidgets=$($.uniqueSort(childWidgets));this._addClass(this.childWidgets,"ui-controlgroup-item");},_callChildMethod:function(method){this.childWidgets.each(function(){var element=$(this),data=element.data("ui-controlgroup-data");if(data&&data[method]){data[method]();}});},_updateCornerClass:function(element,position){var remove="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all";var add=this._buildSimpleOptions(position,"label").classes.label;this._removeClass(element,null,remove);this._addClass(element,null,add);},_buildSimpleOptions:function(position,key){var direction=this.options.direction==="vertical";var result={classes:{}};result.classes[key]={"middle":"","first":"ui-corner-"+(direction?"top":"left"),"last":"ui-corner-"+(direction?"bottom":"right"),"only":"ui-corner-all"}[position];return result;},_spinnerOptions:function(position){var options=this._buildSimpleOptions(position,"ui-spinner");options.classes["ui-spinner-up"]="";options.classes["ui-spinner-down"]="";return options;},_buttonOptions:function(position){return this._buildSimpleOptions(position,"ui-button");},_checkboxradioOptions:function(position){return this._buildSimpleOptions(position,"ui-checkboxradio-label");},_selectmenuOptions:function(position){var direction=this.options.direction==="vertical";return{width:direction?"auto":false,classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(direction?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(direction?"top":"left")},last:{"ui-selectmenu-button-open":direction?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(direction?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[position]};},_resolveClassesValues:function(classes,instance){var result={};$.each(classes,function(key){var current=instance.options.classes[key]||"";current=String.prototype.trim.call(current.replace(controlgroupCornerRegex,""));result[key]=(current+" "+classes[key]).replace(/\s+/g," ");});return result;},_setOption:function(key,value){if(key==="direction"){this._removeClass("ui-controlgroup-"+this.options.direction);}
this._super(key,value);if(key==="disabled"){this._callChildMethod(value?"disable":"enable");return;}
this.refresh();},refresh:function(){var children,that=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction);if(this.options.direction==="horizontal"){this._addClass(null,"ui-helper-clearfix");}
this._initWidgets();children=this.childWidgets;if(this.options.onlyVisible){children=children.filter(":visible");}
if(children.length){$.each(["first","last"],function(index,value){var instance=children[value]().data("ui-controlgroup-data");if(instance&&that["_"+instance.widgetName+"Options"]){var options=that["_"+instance.widgetName+"Options"](children.length===1?"only":value);options.classes=that._resolveClassesValues(options.classes,instance);instance.element[instance.widgetName](options);}else{that._updateCornerClass(children[value](),value);}});this._callChildMethod("refresh");}}});$.widget("ui.checkboxradio",[$.ui.formResetMixin,{version:"1.13.2",options:{disabled:null,label:null,icon:true,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var disabled,labels,labelContents;var options=this._super()||{};this._readType();labels=this.element.labels();this.label=$(labels[labels.length-1]);if(!this.label.length){$.error("No label found for checkboxradio widget");}
this.originalLabel="";labelContents=this.label.contents().not(this.element[0]);if(labelContents.length){this.originalLabel+=labelContents.clone().wrapAll("<div></div>").parent().html();}
if(this.originalLabel){options.label=this.originalLabel;}
disabled=this.element[0].disabled;if(disabled!=null){options.disabled=disabled;}
return options;},_create:function(){var checked=this.element[0].checked;this._bindFormResetHandler();if(this.options.disabled==null){this.options.disabled=this.element[0].disabled;}
this._setOption("disabled",this.options.disabled);this._addClass("ui-checkboxradio","ui-helper-hidden-accessible");this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget");if(this.type==="radio"){this._addClass(this.label,"ui-checkboxradio-radio-label");}
if(this.options.label&&this.options.label!==this.originalLabel){this._updateLabel();}else if(this.originalLabel){this.options.label=this.originalLabel;}
this._enhance();if(checked){this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active");}
this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus");},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus");}});},_readType:function(){var nodeName=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type;if(nodeName!=="input"||!/radio|checkbox/.test(this.type)){$.error("Can't create checkboxradio on element.nodeName="+nodeName+" and element.type="+this.type);}},_enhance:function(){this._updateIcon(this.element[0].checked);},widget:function(){return this.label;},_getRadioGroup:function(){var group;var name=this.element[0].name;var nameSelector="input[name='"+$.escapeSelector(name)+"']";if(!name){return $([]);}
if(this.form.length){group=$(this.form[0].elements).filter(nameSelector);}else{group=$(nameSelector).filter(function(){return $(this)._form().length===0;});}
return group.not(this.element);},_toggleClasses:function(){var checked=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",checked);if(this.options.icon&&this.type==="checkbox"){this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",checked)._toggleClass(this.icon,null,"ui-icon-blank",!checked);}
if(this.type==="radio"){this._getRadioGroup().each(function(){var instance=$(this).checkboxradio("instance");if(instance){instance._removeClass(instance.label,"ui-checkboxradio-checked","ui-state-active");}});}},_destroy:function(){this._unbindFormResetHandler();if(this.icon){this.icon.remove();this.iconSpace.remove();}},_setOption:function(key,value){if(key==="label"&&!value){return;}
this._super(key,value);if(key==="disabled"){this._toggleClass(this.label,null,"ui-state-disabled",value);this.element[0].disabled=value;return;}
this.refresh();},_updateIcon:function(checked){var toAdd="ui-icon ui-icon-background ";if(this.options.icon){if(!this.icon){this.icon=$("<span>");this.iconSpace=$("<span> </span>");this._addClass(this.iconSpace,"ui-checkboxradio-icon-space");}
if(this.type==="checkbox"){toAdd+=checked?"ui-icon-check ui-state-checked":"ui-icon-blank";this._removeClass(this.icon,null,checked?"ui-icon-blank":"ui-icon-check");}else{toAdd+="ui-icon-blank";}
this._addClass(this.icon,"ui-checkboxradio-icon",toAdd);if(!checked){this._removeClass(this.icon,null,"ui-icon-check ui-state-checked");}
this.icon.prependTo(this.label).after(this.iconSpace);}else if(this.icon!==undefined){this.icon.remove();this.iconSpace.remove();delete this.icon;}},_updateLabel:function(){var contents=this.label.contents().not(this.element[0]);if(this.icon){contents=contents.not(this.icon[0]);}
if(this.iconSpace){contents=contents.not(this.iconSpace[0]);}
contents.remove();this.label.append(this.options.label);},refresh:function(){var checked=this.element[0].checked,isDisabled=this.element[0].disabled;this._updateIcon(checked);this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",checked);if(this.options.label!==null){this._updateLabel();}
if(isDisabled!==this.options.disabled){this._setOptions({"disabled":isDisabled});}}}]);var widgetsCheckboxradio=$.ui.checkboxradio;$.widget("ui.button",{version:"1.13.2",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:true},_getCreateOptions:function(){var disabled,options=this._super()||{};this.isInput=this.element.is("input");disabled=this.element[0].disabled;if(disabled!=null){options.disabled=disabled;}
this.originalLabel=this.isInput?this.element.val():this.element.html();if(this.originalLabel){options.label=this.originalLabel;}
return options;},_create:function(){if(!this.option.showLabel&!this.options.icon){this.options.showLabel=true;}
if(this.options.disabled==null){this.options.disabled=this.element[0].disabled||false;}
this.hasTitle=!!this.element.attr("title");if(this.options.label&&this.options.label!==this.originalLabel){if(this.isInput){this.element.val(this.options.label);}else{this.element.html(this.options.label);}}
this._addClass("ui-button","ui-widget");this._setOption("disabled",this.options.disabled);this._enhance();if(this.element.is("a")){this._on({"keyup":function(event){if(event.keyCode===$.ui.keyCode.SPACE){event.preventDefault();if(this.element[0].click){this.element[0].click();}else{this.element.trigger("click");}}}});}},_enhance:function(){if(!this.element.is("button")){this.element.attr("role","button");}
if(this.options.icon){this._updateIcon("icon",this.options.icon);this._updateTooltip();}},_updateTooltip:function(){this.title=this.element.attr("title");if(!this.options.showLabel&&!this.title){this.element.attr("title",this.options.label);}},_updateIcon:function(option,value){var icon=option!=="iconPosition",position=icon?this.options.iconPosition:value,displayBlock=position==="top"||position==="bottom";if(!this.icon){this.icon=$("<span>");this._addClass(this.icon,"ui-button-icon","ui-icon");if(!this.options.showLabel){this._addClass("ui-button-icon-only");}}else if(icon){this._removeClass(this.icon,null,this.options.icon);}
if(icon){this._addClass(this.icon,null,value);}
this._attachIcon(position);if(displayBlock){this._addClass(this.icon,null,"ui-widget-icon-block");if(this.iconSpace){this.iconSpace.remove();}}else{if(!this.iconSpace){this.iconSpace=$("<span> </span>");this._addClass(this.iconSpace,"ui-button-icon-space");}
this._removeClass(this.icon,null,"ui-wiget-icon-block");this._attachIconSpace(position);}},_destroy:function(){this.element.removeAttr("role");if(this.icon){this.icon.remove();}
if(this.iconSpace){this.iconSpace.remove();}
if(!this.hasTitle){this.element.removeAttr("title");}},_attachIconSpace:function(iconPosition){this.icon[/^(?:end|bottom)/.test(iconPosition)?"before":"after"](this.iconSpace);},_attachIcon:function(iconPosition){this.element[/^(?:end|bottom)/.test(iconPosition)?"append":"prepend"](this.icon);},_setOptions:function(options){var newShowLabel=options.showLabel===undefined?this.options.showLabel:options.showLabel,newIcon=options.icon===undefined?this.options.icon:options.icon;if(!newShowLabel&&!newIcon){options.showLabel=true;}
this._super(options);},_setOption:function(key,value){if(key==="icon"){if(value){this._updateIcon(key,value);}else if(this.icon){this.icon.remove();if(this.iconSpace){this.iconSpace.remove();}}}
if(key==="iconPosition"){this._updateIcon(key,value);}
if(key==="showLabel"){this._toggleClass("ui-button-icon-only",null,!value);this._updateTooltip();}
if(key==="label"){if(this.isInput){this.element.val(value);}else{this.element.html(value);if(this.icon){this._attachIcon(this.options.iconPosition);this._attachIconSpace(this.options.iconPosition);}}}
this._super(key,value);if(key==="disabled"){this._toggleClass(null,"ui-state-disabled",value);this.element[0].disabled=value;if(value){this.element.trigger("blur");}}},refresh:function(){var isDisabled=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");if(isDisabled!==this.options.disabled){this._setOptions({disabled:isDisabled});}
this._updateTooltip();}});if($.uiBackCompat!==false){$.widget("ui.button",$.ui.button,{options:{text:true,icons:{primary:null,secondary:null}},_create:function(){if(this.options.showLabel&&!this.options.text){this.options.showLabel=this.options.text;}
if(!this.options.showLabel&&this.options.text){this.options.text=this.options.showLabel;}
if(!this.options.icon&&(this.options.icons.primary||this.options.icons.secondary)){if(this.options.icons.primary){this.options.icon=this.options.icons.primary;}else{this.options.icon=this.options.icons.secondary;this.options.iconPosition="end";}}else if(this.options.icon){this.options.icons.primary=this.options.icon;}
this._super();},_setOption:function(key,value){if(key==="text"){this._super("showLabel",value);return;}
if(key==="showLabel"){this.options.text=value;}
if(key==="icon"){this.options.icons.primary=value;}
if(key==="icons"){if(value.primary){this._super("icon",value.primary);this._super("iconPosition","beginning");}else if(value.secondary){this._super("icon",value.secondary);this._super("iconPosition","end");}}
this._superApply(arguments);}});$.fn.button=(function(orig){return function(options){var isMethodCall=typeof options==="string";var args=Array.prototype.slice.call(arguments,1);var returnValue=this;if(isMethodCall){if(!this.length&&options==="instance"){returnValue=undefined;}else{this.each(function(){var methodValue;var type=$(this).attr("type");var name=type!=="checkbox"&&type!=="radio"?"button":"checkboxradio";var instance=$.data(this,"ui-"+name);if(options==="instance"){returnValue=instance;return false;}
if(!instance){return $.error("cannot call methods on button"+" prior to initialization; "+"attempted to call method '"+options+"'");}
if(typeof instance[options]!=="function"||options.charAt(0)==="_"){return $.error("no such method '"+options+"' for button"+" widget instance");}
methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false;}});}}else{if(args.length){options=$.widget.extend.apply(null,[options].concat(args));}
this.each(function(){var type=$(this).attr("type");var name=type!=="checkbox"&&type!=="radio"?"button":"checkboxradio";var instance=$.data(this,"ui-"+name);if(instance){instance.option(options||{});if(instance._init){instance._init();}}else{if(name==="button"){orig.call($(this),options);return;}
$(this).checkboxradio($.extend({icon:false},options));}});}
return returnValue;};})($.fn.button);$.fn.buttonset=function(){if(!$.ui.controlgroup){$.error("Controlgroup widget missing");}
if(arguments[0]==="option"&&arguments[1]==="items"&&arguments[2]){return this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]);}
if(arguments[0]==="option"&&arguments[1]==="items"){return this.controlgroup.apply(this,[arguments[0],"items.button"]);}
if(typeof arguments[0]==="object"&&arguments[0].items){arguments[0].items={button:arguments[0].items};}
return this.controlgroup.apply(this,arguments);};}
var widgetsButton=$.ui.button;$.extend($.ui,{datepicker:{version:"1.13.2"}});var datepicker_instActive;function datepicker_getZindex(elem){var position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value;}}
elem=elem.parent();}
return 0;}
function Datepicker(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:"",selectMonthLabel:"Select month",selectYearLabel:"Select year"};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,onUpdateDatepicker:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};$.extend(this._defaults,this.regional[""]);this.regional.en=$.extend(true,{},this.regional[""]);this.regional["en-US"]=$.extend(true,{},this.regional.en);this.dpDiv=datepicker_bindHover($("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));}
$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv;},setDefaults:function(settings){datepicker_extendRemove(this._defaults,settings||{});return this;},_attachDatepicker:function(target,settings){var nodeName,inline,inst;nodeName=target.nodeName.toLowerCase();inline=(nodeName==="div"||nodeName==="span");if(!target.id){this.uuid+=1;target.id="dp"+this.uuid;}
inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{});if(nodeName==="input"){this._connectDatepicker(target,inst);}else if(inline){this._inlineDatepicker(target,inst);}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:datepicker_bindHover($("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")))};},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return;}
this._attachments(input,inst);input.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp);this._autoSize(inst);$.data(target,"datepicker",inst);if(inst.settings.disabled){this._disableDatepicker(target);}},_attachments:function(input,inst){var showOn,buttonText,buttonImage,appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");if(inst.append){inst.append.remove();}
if(appendText){inst.append=$("<span>").addClass(this._appendClass).text(appendText);input[isRTL?"before":"after"](inst.append);}
input.off("focus",this._showDatepicker);if(inst.trigger){inst.trigger.remove();}
showOn=this._get(inst,"showOn");if(showOn==="focus"||showOn==="both"){input.on("focus",this._showDatepicker);}
if(showOn==="button"||showOn==="both"){buttonText=this._get(inst,"buttonText");buttonImage=this._get(inst,"buttonImage");if(this._get(inst,"buttonImageOnly")){inst.trigger=$("<img>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText});}else{inst.trigger=$("<button type='button'>").addClass(this._triggerClass);if(buttonImage){inst.trigger.html($("<img>").attr({src:buttonImage,alt:buttonText,title:buttonText}));}else{inst.trigger.text(buttonText);}}
input[isRTL?"before":"after"](inst.trigger);inst.trigger.on("click",function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput===input[0]){$.datepicker._hideDatepicker();}else if($.datepicker._datepickerShowing&&$.datepicker._lastInput!==input[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(input[0]);}else{$.datepicker._showDatepicker(input[0]);}
return false;});}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var findMax,max,maxI,i,date=new Date(2009,12-1,20),dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){findMax=function(names){max=0;maxI=0;for(i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i;}}
return maxI;};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?"dayNames":"dayNamesShort")))+20-date.getDay());}
inst.input.attr("size",this._formatDate(inst,date).length);}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return;}
divSpan.addClass(this.markerClassName).append(inst.dpDiv);$.data(target,"datepicker",inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);if(inst.settings.disabled){this._disableDatepicker(target);}
inst.dpDiv.css("display","block");},_dialogDatepicker:function(input,date,onSelect,settings,pos){var id,browserWidth,browserHeight,scrollX,scrollY,inst=this._dialogInst;if(!inst){this.uuid+=1;id="dp"+this.uuid;this._dialogInput=$("<input type='text' id='"+id+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.on("keydown",this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],"datepicker",inst);}
datepicker_extendRemove(inst.settings,settings||{});date=(date&&date.constructor===Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){browserWidth=document.documentElement.clientWidth;browserHeight=document.documentElement.clientHeight;scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY];}
this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv);}
$.data(this._dialogInput[0],"datepicker",inst);return this;},_destroyDatepicker:function(target){var nodeName,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();$.removeData(target,"datepicker");if(nodeName==="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp);}else if(nodeName==="div"||nodeName==="span"){$target.removeClass(this.markerClassName).empty();}
if(datepicker_instActive===inst){datepicker_instActive=null;this._curInst=null;}},_enableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false;}).end().filter("img").css({opacity:"1.0",cursor:""});}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false);}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===target?null:value);});},_disableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true;}).end().filter("img").css({opacity:"0.5",cursor:"default"});}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true);}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===target?null:value);});this._disabledInputs[this._disabledInputs.length]=target;},_isDisabledDatepicker:function(target){if(!target){return false;}
for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]===target){return true;}}
return false;},_getInst:function(target){try{return $.data(target,"datepicker");}catch(err){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(target,name,value){var settings,date,minDate,maxDate,inst=this._getInst(target);if(arguments.length===2&&typeof name==="string"){return(name==="defaults"?$.extend({},$.datepicker._defaults):(inst?(name==="all"?$.extend({},inst.settings):this._get(inst,name)):null));}
settings=name||{};if(typeof name==="string"){settings={};settings[name]=value;}
if(inst){if(this._curInst===inst){this._hideDatepicker();}
date=this._getDateDatepicker(target,true);minDate=this._getMinMaxDate(inst,"min");maxDate=this._getMinMaxDate(inst,"max");datepicker_extendRemove(inst.settings,settings);if(minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined){inst.settings.minDate=this._formatDate(inst,minDate);}
if(maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined){inst.settings.maxDate=this._formatDate(inst,maxDate);}
if("disabled"in settings){if(settings.disabled){this._disableDatepicker(target);}else{this._enableDatepicker(target);}}
this._attachments($(target),inst);this._autoSize(inst);this._setDate(inst,date);this._updateAlternate(inst);this._updateDatepicker(inst);}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value);},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst);}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst);}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst,noDefault);}
return(inst?this._getDate(inst):null);},_doKeyDown:function(event){var onSelect,dateStr,sel,inst=$.datepicker._getInst(event.target),handled=true,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:sel=$("td."+$.datepicker._dayOverClass+":not(."+
$.datepicker._currentClass+")",inst.dpDiv);if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]);}
onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){dateStr=$.datepicker._formatDate(inst);onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else{$.datepicker._hideDatepicker();}
return false;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target);}
handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target);}
handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?+1:-1),"D");}
handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");}
break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D");}
handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?-1:+1),"D");}
handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");}
break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D");}
handled=event.ctrlKey||event.metaKey;break;default:handled=false;}}else if(event.keyCode===36&&event.ctrlKey){$.datepicker._showDatepicker(this);}else{handled=false;}
if(handled){event.preventDefault();event.stopPropagation();}},_doKeyPress:function(event){var chars,chr,inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));chr=String.fromCharCode(event.charCode==null?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||(chr<" "||!chars||chars.indexOf(chr)>-1);}},_doKeyUp:function(event){var date,inst=$.datepicker._getInst(event.target);if(inst.input.val()!==inst.lastVal){try{date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),(inst.input?inst.input.val():null),$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst);}}catch(err){}}
return true;},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!=="input"){input=$("input",input.parentNode)[0];}
if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput===input){return;}
var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!==inst){$.datepicker._curInst.dpDiv.stop(true,true);if(inst&&$.datepicker._datepickerShowing){$.datepicker._hideDatepicker($.datepicker._curInst.input[0]);}}
beforeShow=$.datepicker._get(inst,"beforeShow");beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false){return;}
datepicker_extendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value="";}
if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight;}
isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")==="fixed";return!isFixed;});offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){showAnim=$.datepicker._get(inst,"showAnim");duration=$.datepicker._get(inst,"duration");inst.dpDiv.css("z-index",datepicker_getZindex($(input))+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects.effect[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration);}else{inst.dpDiv[showAnim||"show"](showAnim?duration:null);}
if($.datepicker._shouldFocusInput(inst)){inst.input.trigger("focus");}
$.datepicker._curInst=inst;}},_updateDatepicker:function(inst){this.maxRows=4;datepicker_instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));this._attachHandlers(inst);var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17,activeCell=inst.dpDiv.find("."+this._dayOverClass+" a"),onUpdateDatepicker=$.datepicker._get(inst,"onUpdateDatepicker");if(activeCell.length>0){datepicker_handleMouseover.apply(activeCell.get(0));}
inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em");}
inst.dpDiv[(numMonths[0]!==1||numMonths[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst===$.datepicker._curInst&&$.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(inst)){inst.input.trigger("focus");}
if(inst.yearshtml){origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&inst.yearshtml){inst.dpDiv.find("select.ui-datepicker-year").first().replaceWith(inst.yearshtml);}
origyearshtml=inst.yearshtml=null;},0);}
if(onUpdateDatepicker){onUpdateDatepicker.apply((inst.input?inst.input[0]:null),[inst]);}},_shouldFocusInput:function(inst){return inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&!inst.input.is(":focus");},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left===inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top===(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight):0);return offset;},_findPos:function(obj){var position,inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");while(obj&&(obj.type==="hidden"||obj.nodeType!==1||$.expr.pseudos.hidden(obj))){obj=obj[isRTL?"previousSibling":"nextSibling"];}
position=$(obj).offset();return[position.left,position.top];},_hideDatepicker:function(input){var showAnim,duration,postProcess,onClose,inst=this._curInst;if(!inst||(input&&inst!==$.data(input,"datepicker"))){return;}
if(this._datepickerShowing){showAnim=this._get(inst,"showAnim");duration=this._get(inst,"duration");postProcess=function(){$.datepicker._tidyDialog(inst);};if($.effects&&($.effects.effect[showAnim]||$.effects[showAnim])){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess);}else{inst.dpDiv[(showAnim==="slideDown"?"slideUp":(showAnim==="fadeIn"?"fadeOut":"hide"))]((showAnim?duration:null),postProcess);}
if(!showAnim){postProcess();}
this._datepickerShowing=false;onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst]);}
this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv);}}
this._inDialog=false;}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar");},_checkExternalClick:function(event){if(!$.datepicker._curInst){return;}
var $target=$(event.target),inst=$.datepicker._getInst($target[0]);if((($target[0].id!==$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length===0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)))||($target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!==inst)){$.datepicker._hideDatepicker();}},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return;}
this._adjustInstDate(inst,offset,period);this._updateDatepicker(inst);},_gotoToday:function(id){var date,target=$(id),inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear;}else{date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();}
this._notifyChange(inst);this._adjustDate(target);},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+(period==="M"?"Month":"Year")]=inst["draw"+(period==="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target);},_selectDay:function(id,month,year,td){var inst,target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return;}
inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=parseInt($("a",td).attr("data-date"));inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear));},_clearDate:function(id){var target=$(id);this._selectDate(target,"");},_selectDate:function(id,dateStr){var onSelect,target=$(id),inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr);}
this._updateAlternate(inst);onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else if(inst.input){inst.input.trigger("change");}
if(inst.inline){this._updateDatepicker(inst);}else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof(inst.input[0])!=="object"){inst.input.trigger("focus");}
this._lastInput=null;}},_updateAlternate:function(inst){var altFormat,date,dateStr,altField=this._get(inst,"altField");if(altField){altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");date=this._getDate(inst);dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(document).find(altField).val(dateStr);}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""];},iso8601Week:function(date){var time,checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1;},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments";}
value=(typeof value==="object"?value.toString():value+"");if(value===""){return null;}
var iFormat,dim,extra,iValue=0,shortYearCutoffTemp=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff,shortYearCutoff=(typeof shortYearCutoffTemp!=="string"?shortYearCutoffTemp:new Date().getFullYear()%100+parseInt(shortYearCutoffTemp,10)),dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=false,date,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;},getNumber=function(match){var isDoubled=lookAhead(match),size=(match==="@"?14:(match==="!"?20:(match==="y"&&isDoubled?4:(match==="o"?3:2)))),minSize=(match==="y"?size:1),digits=new RegExp("^\\d{"+minSize+","+size+"}"),num=value.substring(iValue).match(digits);if(!num){throw"Missing number at position "+iValue;}
iValue+=num[0].length;return parseInt(num[0],10);},getName=function(match,shortNames,longNames){var index=-1,names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]];}).sort(function(a,b){return-(a[1].length-b[1].length);});$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()===name.toLowerCase()){index=pair[0];iValue+=name.length;return false;}});if(index!==-1){return index+1;}else{throw"Unknown name at position "+iValue;}},checkLiteral=function(){if(value.charAt(iValue)!==format.charAt(iFormat)){throw"Unexpected literal at position "+iValue;}
iValue++;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{checkLiteral();}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"!":date=new Date((getNumber("!")-this._ticksTo1970)/10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral();}else{literal=true;}
break;default:checkLiteral();}}}
if(iValue<value.length){extra=value.substr(iValue);if(!/^\s+/.test(extra)){throw"Extra/unparsed characters found in date: "+extra;}}
if(year===-1){year=new Date().getFullYear();}else if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+
(year<=shortYearCutoff?0:-100);}
if(doy>-1){month=1;day=doy;do{dim=this._getDaysInMonth(year,month-1);if(day<=dim){break;}
month++;day-=dim;}while(true);}
date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!==year||date.getMonth()+1!==month||date.getDate()!==day){throw"Invalid date";}
return date;},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+
Math.floor(1970/400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date){return"";}
var iFormat,dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num;}}
return num;},formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value]);},output="",literal=false;if(date){for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{output+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getFullYear()%100<10?"0":"")+date.getFullYear()%100);break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'";}else{literal=true;}
break;default:output+=format.charAt(iFormat);}}}}
return output;},_possibleChars:function(format){var iFormat,chars="",literal=false,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{chars+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'";}else{literal=true;}
break;default:chars+=format.charAt(iFormat);}}}
return chars;},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name];},_setDateFromField:function(inst,noDefault){if(inst.input.val()===inst.lastVal){return;}
var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,defaultDate=this._getDefaultDate(inst),date=defaultDate,settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate;}catch(event){dates=(noDefault?"":dates);}
inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst);},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date()));},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date;},offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst));}catch(e){}
var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date(),year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;}
matches=pattern.exec(offset);}
return new Date(year,month,day);},newDate=(date==null||date===""?defaultDate:(typeof date==="string"?offsetString(date):(typeof date==="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):new Date(date.getTime()))));newDate=(newDate&&newDate.toString()==="Invalid Date"?defaultDate:newDate);if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0);}
return this._daylightSavingAdjust(newDate);},_daylightSavingAdjust:function(date){if(!date){return null;}
date.setHours(date.getHours()>12?date.getHours()+2:0);return date;},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date()));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!==inst.selectedMonth||origYear!==inst.selectedYear)&&!noChange){this._notifyChange(inst);}
this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst));}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()==="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate;},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){$.datepicker._adjustDate(id,-stepMonths,"M");},next:function(){$.datepicker._adjustDate(id,+stepMonths,"M");},hide:function(){$.datepicker._hideDatepicker();},today:function(){$.datepicker._gotoToday(id);},selectDay:function(){$.datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false;},selectMonth:function(){$.datepicker._selectMonthYear(id,this,"M");return false;},selectYear:function(){$.datepicker._selectMonthYear(id,this,"Y");return false;}};$(this).on(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")]);});},_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date(),today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=(numMonths[0]!==1||numMonths[1]!==1),currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay))),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--;}
if(maxDate){maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--;}}}
inst.drawMonth=drawMonth;inst.drawYear=drawYear;prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));if(this._canAdjustMonth(inst,-1,drawYear,drawMonth)){prev=$("<a>").attr({"class":"ui-datepicker-prev ui-corner-all","data-handler":"prev","data-event":"click",title:prevText}).append($("<span>").addClass("ui-icon ui-icon-circle-triangle-"+
(isRTL?"e":"w")).text(prevText))[0].outerHTML;}else if(hideIfNoPrevNext){prev="";}else{prev=$("<a>").attr({"class":"ui-datepicker-prev ui-corner-all ui-state-disabled",title:prevText}).append($("<span>").addClass("ui-icon ui-icon-circle-triangle-"+
(isRTL?"e":"w")).text(prevText))[0].outerHTML;}
nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));if(this._canAdjustMonth(inst,+1,drawYear,drawMonth)){next=$("<a>").attr({"class":"ui-datepicker-next ui-corner-all","data-handler":"next","data-event":"click",title:nextText}).append($("<span>").addClass("ui-icon ui-icon-circle-triangle-"+
(isRTL?"w":"e")).text(nextText))[0].outerHTML;}else if(hideIfNoPrevNext){next="";}else{next=$("<a>").attr({"class":"ui-datepicker-next ui-corner-all ui-state-disabled",title:nextText}).append($("<span>").attr("class","ui-icon ui-icon-circle-triangle-"+
(isRTL?"w":"e")).text(nextText))[0].outerHTML;}
currentText=this._get(inst,"currentText");gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));controls="";if(!inst.inline){controls=$("<button>").attr({type:"button","class":"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all","data-handler":"hide","data-event":"click"}).text(this._get(inst,"closeText"))[0].outerHTML;}
buttonPanel="";if(showButtonPanel){buttonPanel=$("<div class='ui-datepicker-buttonpane ui-widget-content'>").append(isRTL?controls:"").append(this._isInRange(inst,gotoDate)?$("<button>").attr({type:"button","class":"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all","data-handler":"today","data-event":"click"}).text(currentText):"").append(isRTL?"":controls)[0].outerHTML;}
firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);showWeek=this._get(inst,"showWeek");dayNames=this._get(inst,"dayNames");dayNamesMin=this._get(inst,"dayNamesMin");monthNames=this._get(inst,"monthNames");monthNamesShort=this._get(inst,"monthNamesShort");beforeShowDay=this._get(inst,"beforeShowDay");showOtherMonths=this._get(inst,"showOtherMonths");selectOtherMonths=this._get(inst,"selectOtherMonths");defaultDate=this._getDefaultDate(inst);html="";for(row=0;row<numMonths[0];row++){group="";this.maxRows=4;for(col=0;col<numMonths[1];col++){selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));cornerClass=" ui-corner-all";calender="";if(isMultiMonth){calender+="<div class='ui-datepicker-group";if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break;}}
calender+="'>";}
calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'>"+
(/all|left/.test(cornerClass)&&row===0?(isRTL?next:prev):"")+
(/all|right/.test(cornerClass)&&row===0?(isRTL?prev:next):"")+
this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";thead=(showWeek?"<th class='ui-datepicker-week-col'>"+this._get(inst,"weekHeader")+"</th>":"");for(dow=0;dow<7;dow++){day=(dow+firstDay)%7;thead+="<th scope='col'"+((dow+firstDay+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+dayNames[day]+"'>"+dayNamesMin[day]+"</span></th>";}
calender+=thead+"</tr></thead><tbody>";daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth);}
leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;curRows=Math.ceil((leadDays+daysInMonth)/7);numRows=(isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows);this.maxRows=numRows;printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(dRow=0;dRow<numRows;dRow++){calender+="<tr>";tbody=(!showWeek?"":"<td class='ui-datepicker-week-col'>"+
this._get(inst,"calculateWeek")(printDate)+"</td>");for(dow=0;dow<7;dow++){daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);otherMonth=(printDate.getMonth()!==drawMonth);unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+="<td class='"+
((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+
(otherMonth?" ui-datepicker-other-month":"")+
((printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime())?" "+this._dayOverClass:"")+
(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+
(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+
(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+
(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+
((!otherMonth||showOtherMonths)&&daySettings[2]?" title='"+daySettings[2].replace(/'/g,"&#39;")+"'":"")+
(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+
(otherMonth&&!showOtherMonths?"&#xa0;":(unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+
(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+
(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+
(otherMonth?" ui-priority-secondary":"")+"' href='#' aria-current='"+(printDate.getTime()===currentDate.getTime()?"true":"false")+"' data-date='"+printDate.getDate()+"'>"+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate);}
calender+=tbody+"</tr>";}
drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++;}
calender+="</tbody></table>"+(isMultiMonth?"</div>"+
((numMonths[0]>0&&col===numMonths[1]-1)?"<div class='ui-datepicker-row-break'></div>":""):"");group+=calender;}
html+=group;}
html+=buttonPanel;inst._keyEvent=false;return html;},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var inMinYear,inMaxYear,month,years,thisYear,determineYear,year,endYear,changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),selectMonthLabel=this._get(inst,"selectMonthLabel"),selectYearLabel=this._get(inst,"selectYearLabel"),html="<div class='ui-datepicker-title'>",monthHtml="";if(secondary||!changeMonth){monthHtml+="<span class='ui-datepicker-month'>"+monthNames[drawMonth]+"</span>";}else{inMinYear=(minDate&&minDate.getFullYear()===drawYear);inMaxYear=(maxDate&&maxDate.getFullYear()===drawYear);monthHtml+="<select class='ui-datepicker-month' aria-label='"+selectMonthLabel+"' data-handler='selectMonth' data-event='change'>";for(month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+="<option value='"+month+"'"+
(month===drawMonth?" selected='selected'":"")+">"+monthNamesShort[month]+"</option>";}}
monthHtml+="</select>";}
if(!showMonthAfterYear){html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"");}
if(!inst.yearshtml){inst.yearshtml="";if(secondary||!changeYear){html+="<span class='ui-datepicker-year'>"+drawYear+"</span>";}else{years=this._get(inst,"yearRange").split(":");thisYear=new Date().getFullYear();determineYear=function(value){var year=(value.match(/c[+\-].*/)?drawYear+parseInt(value.substring(1),10):(value.match(/[+\-].*/)?thisYear+parseInt(value,10):parseInt(value,10)));return(isNaN(year)?thisYear:year);};year=determineYear(years[0]);endYear=Math.max(year,determineYear(years[1]||""));year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);inst.yearshtml+="<select class='ui-datepicker-year' aria-label='"+selectYearLabel+"' data-handler='selectYear' data-event='change'>";for(;year<=endYear;year++){inst.yearshtml+="<option value='"+year+"'"+
(year===drawYear?" selected='selected'":"")+">"+year+"</option>";}
inst.yearshtml+="</select>";html+=inst.yearshtml;inst.yearshtml=null;}}
html+=this._get(inst,"yearSuffix");if(showMonthAfterYear){html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml;}
html+="</div>";return html;},_adjustInstDate:function(inst,offset,period){var year=inst.selectedYear+(period==="Y"?offset:0),month=inst.selectedMonth+(period==="M"?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period==="D"?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period==="M"||period==="Y"){this._notifyChange(inst);}},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=(minDate&&date<minDate?minDate:date);return(maxDate&&newDate>maxDate?maxDate:newDate);},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst]);}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths==="number"?[1,numMonths]:numMonths));},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null);},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate();},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay();},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));}
return this._isInRange(inst,date);},_isInRange:function(inst,date){var yearSplit,currentYear,minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),minYear=null,maxYear=null,years=this._get(inst,"yearRange");if(years){yearSplit=years.split(":");currentYear=new Date().getFullYear();minYear=parseInt(yearSplit[0],10);maxYear=parseInt(yearSplit[1],10);if(yearSplit[0].match(/[+\-].*/)){minYear+=currentYear;}
if(yearSplit[1].match(/[+\-].*/)){maxYear+=currentYear;}}
return((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())&&(!minYear||date.getFullYear()>=minYear)&&(!maxYear||date.getFullYear()<=maxYear));},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!=="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")};},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear;}
var date=(day?(typeof day==="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst));}});function datepicker_bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.on("mouseout",selector,function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).removeClass("ui-datepicker-prev-hover");}
if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).removeClass("ui-datepicker-next-hover");}}).on("mouseover",selector,datepicker_handleMouseover);}
function datepicker_handleMouseover(){if(!$.datepicker._isDisabledDatepicker(datepicker_instActive.inline?datepicker_instActive.dpDiv.parent()[0]:datepicker_instActive.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).addClass("ui-datepicker-prev-hover");}
if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).addClass("ui-datepicker-next-hover");}}}
function datepicker_extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null){target[name]=props[name];}}
return target;}
$.fn.datepicker=function(options){if(!this.length){return this;}
if(!$.datepicker.initialized){$(document).on("mousedown",$.datepicker._checkExternalClick);$.datepicker.initialized=true;}
if($("#"+$.datepicker._mainDivId).length===0){$("body").append($.datepicker.dpDiv);}
var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options==="string"&&(options==="isDisabled"||options==="getDate"||options==="widget")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}
if(options==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}
return this.each(function(){if(typeof options==="string"){$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs));}else{$.datepicker._attachDatepicker(this,options);}});};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.13.2";var widgetsDatepicker=$.datepicker;var ie=$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var mouseHandled=false;$(document).on("mouseup",function(){mouseHandled=false;});var widgetsMouse=$.widget("ui.mouse",{version:"1.13.2",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.on("mousedown."+this.widgetName,function(event){return that._mouseDown(event);}).on("click."+this.widgetName,function(event){if(true===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+".preventClickEvent");event.stopImmediatePropagation();return false;}});this.started=false;},_mouseDestroy:function(){this.element.off("."+this.widgetName);if(this._mouseMoveDelegate){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);}},_mouseDown:function(event){if(mouseHandled){return;}
this._mouseMoved=false;if(this._mouseStarted){this._mouseUp(event);}
this._mouseDownEvent=event;var that=this,btnIsLeft=(event.which===1),elIsCancel=(typeof this.options.cancel==="string"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:false);if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true;}
this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=true;},this.options.delay);}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(event)!==false);if(!this._mouseStarted){event.preventDefault();return true;}}
if(true===$.data(event.target,this.widgetName+".preventClickEvent")){$.removeData(event.target,this.widgetName+".preventClickEvent");}
this._mouseMoveDelegate=function(event){return that._mouseMove(event);};this._mouseUpDelegate=function(event){return that._mouseUp(event);};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true;},_mouseMove:function(event){if(this._mouseMoved){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button){return this._mouseUp(event);}else if(!event.which){if(event.originalEvent.altKey||event.originalEvent.ctrlKey||event.originalEvent.metaKey||event.originalEvent.shiftKey){this.ignoreMissingWhich=true;}else if(!this.ignoreMissingWhich){return this._mouseUp(event);}}}
if(event.which||event.button){this._mouseMoved=true;}
if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault();}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,event)!==false);if(this._mouseStarted){this._mouseDrag(event);}else{this._mouseUp(event);}}
return!this._mouseStarted;},_mouseUp:function(event){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(event.target===this._mouseDownEvent.target){$.data(event.target,this.widgetName+".preventClickEvent",true);}
this._mouseStop(event);}
if(this._mouseDelayTimer){clearTimeout(this._mouseDelayTimer);delete this._mouseDelayTimer;}
this.ignoreMissingWhich=false;mouseHandled=false;event.preventDefault();},_mouseDistanceMet:function(event){return(Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance);},_mouseDelayMet:function(){return this.mouseDelayMet;},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true;}});var plugin=$.ui.plugin={add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];if(!set){return;}
if(!allowDisconnected&&(!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11)){return;}
for(i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args);}}}};var safeBlur=$.ui.safeBlur=function(element){if(element&&element.nodeName.toLowerCase()!=="body"){$(element).trigger("blur");}};$.widget("ui.draggable",$.ui.mouse,{version:"1.13.2",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"){this._setPositionRelative();}
if(this.options.addClasses){this._addClass("ui-draggable");}
this._setHandleClassName();this._mouseInit();},_setOption:function(key,value){this._super(key,value);if(key==="handle"){this._removeHandleClassName();this._setHandleClassName();}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return;}
this._removeHandleClassName();this._mouseDestroy();},_mouseCapture:function(event){var o=this.options;if(this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0){return false;}
this.handle=this._getHandle(event);if(!this.handle){return false;}
this._blurActiveElement(event);this._blockFrames(o.iframeFix===true?"iframe":o.iframeFix);return true;},_blockFrames:function(selector){this.iframeBlocks=this.document.find(selector).map(function(){var iframe=$(this);return $("<div>").css("position","absolute").appendTo(iframe.parent()).outerWidth(iframe.outerWidth()).outerHeight(iframe.outerHeight()).offset(iframe.offset())[0];});},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks;}},_blurActiveElement:function(event){var activeElement=$.ui.safeActiveElement(this.document[0]),target=$(event.target);if(target.closest(activeElement).length){return;}
$.ui.safeBlur(activeElement);},_mouseStart:function(event){var o=this.options;this.helper=this._createHelper(event);this._addClass(this.helper,"ui-draggable-dragging");this._cacheHelperProportions();if($.ui.ddmanager){$.ui.ddmanager.current=this;}
this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return $(this).css("position")==="fixed";}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(event);this.originalPosition=this.position=this._generatePosition(event,false);this.originalPageX=event.pageX;this.originalPageY=event.pageY;if(o.cursorAt){this._adjustOffsetFromHelper(o.cursorAt);}
this._setContainment();if(this._trigger("start",event)===false){this._clear();return false;}
this._cacheHelperProportions();if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}
this._mouseDrag(event,true);if($.ui.ddmanager){$.ui.ddmanager.dragStart(this,event);}
return true;},_refreshOffsets:function(event){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:event.pageX-this.offset.left,top:event.pageY-this.offset.top};},_mouseDrag:function(event,noPropagation){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset();}
this.position=this._generatePosition(event,true);this.positionAbs=this._convertPositionTo("absolute");if(!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===false){this._mouseUp(new $.Event("mouseup",event));return false;}
this.position=ui.position;}
this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if($.ui.ddmanager){$.ui.ddmanager.drag(this,event);}
return false;},_mouseStop:function(event){var that=this,dropped=false;if($.ui.ddmanager&&!this.options.dropBehaviour){dropped=$.ui.ddmanager.drop(this,event);}
if(this.dropped){dropped=this.dropped;this.dropped=false;}
if((this.options.revert==="invalid"&&!dropped)||(this.options.revert==="valid"&&dropped)||this.options.revert===true||(typeof this.options.revert==="function"&&this.options.revert.call(this.element,dropped))){$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(that._trigger("stop",event)!==false){that._clear();}});}else{if(this._trigger("stop",event)!==false){this._clear();}}
return false;},_mouseUp:function(event){this._unblockFrames();if($.ui.ddmanager){$.ui.ddmanager.dragStop(this,event);}
if(this.handleElement.is(event.target)){this.element.trigger("focus");}
return $.ui.mouse.prototype._mouseUp.call(this,event);},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp(new $.Event("mouseup",{target:this.element[0]}));}else{this._clear();}
return this;},_getHandle:function(event){return this.options.handle?!!$(event.target).closest(this.element.find(this.options.handle)).length:true;},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this._addClass(this.handleElement,"ui-draggable-handle");},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle");},_createHelper:function(event){var o=this.options,helperIsFunction=typeof o.helper==="function",helper=helperIsFunction?$(o.helper.apply(this.element[0],[event])):(o.helper==="clone"?this.element.clone().removeAttr("id"):this.element);if(!helper.parents("body").length){helper.appendTo((o.appendTo==="parent"?this.element[0].parentNode:o.appendTo));}
if(helperIsFunction&&helper[0]===this.element[0]){this._setPositionRelative();}
if(helper[0]!==this.element[0]&&!(/(fixed|absolute)/).test(helper.css("position"))){helper.css("position","absolute");}
return helper;},_setPositionRelative:function(){if(!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative";}},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string"){obj=obj.split(" ");}
if(Array.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}
if("left"in obj){this.offset.click.left=obj.left+this.margins.left;}
if("right"in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}
if("top"in obj){this.offset.click.top=obj.top+this.margins.top;}
if("bottom"in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_isRootNode:function(element){return(/(html|body)/i).test(element.tagName)||element===this.document[0];},_getParentOffset:function(){var po=this.offsetParent.offset(),document=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}
if(this._isRootNode(this.offsetParent[0])){po={top:0,left:0};}
return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0};}
var p=this.element.position(),scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+
(!scrollIsRootNode?this.scrollParent.scrollTop():0),left:p.left-(parseInt(this.helper.css("left"),10)||0)+
(!scrollIsRootNode?this.scrollParent.scrollLeft():0)};},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var isUserScrollable,c,ce,o=this.options,document=this.document[0];this.relativeContainer=null;if(!o.containment){this.containment=null;return;}
if(o.containment==="window"){this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-
this.helperProportions.width-this.margins.left,$(window).scrollTop()+
($(window).height()||document.body.parentNode.scrollHeight)-
this.helperProportions.height-this.margins.top];return;}
if(o.containment==="document"){this.containment=[0,0,$(document).width()-this.helperProportions.width-this.margins.left,($(document).height()||document.body.parentNode.scrollHeight)-
this.helperProportions.height-this.margins.top];return;}
if(o.containment.constructor===Array){this.containment=o.containment;return;}
if(o.containment==="parent"){o.containment=this.helper[0].parentNode;}
c=$(o.containment);ce=c[0];if(!ce){return;}
isUserScrollable=/(scroll|auto)/.test(c.css("overflow"));this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+
(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+
(parseInt(c.css("paddingTop"),10)||0),(isUserScrollable?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-
(parseInt(c.css("borderRightWidth"),10)||0)-
(parseInt(c.css("paddingRight"),10)||0)-
this.helperProportions.width-
this.margins.left-
this.margins.right,(isUserScrollable?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-
(parseInt(c.css("borderBottomWidth"),10)||0)-
(parseInt(c.css("paddingBottom"),10)||0)-
this.helperProportions.height-
this.margins.top-
this.margins.bottom];this.relativeContainer=c;},_convertPositionTo:function(d,pos){if(!pos){pos=this.position;}
var mod=d==="absolute"?1:-1,scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:(pos.top+
this.offset.relative.top*mod+
this.offset.parent.top*mod-
((this.cssPosition==="fixed"?-this.offset.scroll.top:(scrollIsRootNode?0:this.offset.scroll.top))*mod)),left:(pos.left+
this.offset.relative.left*mod+
this.offset.parent.left*mod-
((this.cssPosition==="fixed"?-this.offset.scroll.left:(scrollIsRootNode?0:this.offset.scroll.left))*mod))};},_generatePosition:function(event,constrainPosition){var containment,co,top,left,o=this.options,scrollIsRootNode=this._isRootNode(this.scrollParent[0]),pageX=event.pageX,pageY=event.pageY;if(!scrollIsRootNode||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()};}
if(constrainPosition){if(this.containment){if(this.relativeContainer){co=this.relativeContainer.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top];}else{containment=this.containment;}
if(event.pageX-this.offset.click.left<containment[0]){pageX=containment[0]+this.offset.click.left;}
if(event.pageY-this.offset.click.top<containment[1]){pageY=containment[1]+this.offset.click.top;}
if(event.pageX-this.offset.click.left>containment[2]){pageX=containment[2]+this.offset.click.left;}
if(event.pageY-this.offset.click.top>containment[3]){pageY=containment[3]+this.offset.click.top;}}
if(o.grid){top=o.grid[1]?this.originalPageY+Math.round((pageY-
this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;pageY=containment?((top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3])?top:((top-this.offset.click.top>=containment[1])?top-o.grid[1]:top+o.grid[1])):top;left=o.grid[0]?this.originalPageX+
Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment?((left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2])?left:((left-this.offset.click.left>=containment[0])?left-o.grid[0]:left+o.grid[0])):left;}
if(o.axis==="y"){pageX=this.originalPageX;}
if(o.axis==="x"){pageY=this.originalPageY;}}
return{top:(pageY-
this.offset.click.top-
this.offset.relative.top-
this.offset.parent.top+
(this.cssPosition==="fixed"?-this.offset.scroll.top:(scrollIsRootNode?0:this.offset.scroll.top))),left:(pageX-
this.offset.click.left-
this.offset.relative.left-
this.offset.parent.left+
(this.cssPosition==="fixed"?-this.offset.scroll.left:(scrollIsRootNode?0:this.offset.scroll.left)))};},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove();}
this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy();}},_trigger:function(type,event,ui){ui=ui||this._uiHash();$.ui.plugin.call(this,type,[event,ui,this],true);if(/^(drag|start|stop)/.test(type)){this.positionAbs=this._convertPositionTo("absolute");ui.offset=this.positionAbs;}
return $.Widget.prototype._trigger.call(this,type,event,ui);},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs};}});$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.sortables=[];$(draggable.options.connectToSortable).each(function(){var sortable=$(this).sortable("instance");if(sortable&&!sortable.options.disabled){draggable.sortables.push(sortable);sortable.refreshPositions();sortable._trigger("activate",event,uiSortable);}});},stop:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.cancelHelperRemoval=false;$.each(draggable.sortables,function(){var sortable=this;if(sortable.isOver){sortable.isOver=0;draggable.cancelHelperRemoval=true;sortable.cancelHelperRemoval=false;sortable._storedCSS={position:sortable.placeholder.css("position"),top:sortable.placeholder.css("top"),left:sortable.placeholder.css("left")};sortable._mouseStop(event);sortable.options.helper=sortable.options._helper;}else{sortable.cancelHelperRemoval=true;sortable._trigger("deactivate",event,uiSortable);}});},drag:function(event,ui,draggable){$.each(draggable.sortables,function(){var innermostIntersecting=false,sortable=this;sortable.positionAbs=draggable.positionAbs;sortable.helperProportions=draggable.helperProportions;sortable.offset.click=draggable.offset.click;if(sortable._intersectsWith(sortable.containerCache)){innermostIntersecting=true;$.each(draggable.sortables,function(){this.positionAbs=draggable.positionAbs;this.helperProportions=draggable.helperProportions;this.offset.click=draggable.offset.click;if(this!==sortable&&this._intersectsWith(this.containerCache)&&$.contains(sortable.element[0],this.element[0])){innermostIntersecting=false;}
return innermostIntersecting;});}
if(innermostIntersecting){if(!sortable.isOver){sortable.isOver=1;draggable._parent=ui.helper.parent();sortable.currentItem=ui.helper.appendTo(sortable.element).data("ui-sortable-item",true);sortable.options._helper=sortable.options.helper;sortable.options.helper=function(){return ui.helper[0];};event.target=sortable.currentItem[0];sortable._mouseCapture(event,true);sortable._mouseStart(event,true,true);sortable.offset.click.top=draggable.offset.click.top;sortable.offset.click.left=draggable.offset.click.left;sortable.offset.parent.left-=draggable.offset.parent.left-
sortable.offset.parent.left;sortable.offset.parent.top-=draggable.offset.parent.top-
sortable.offset.parent.top;draggable._trigger("toSortable",event);draggable.dropped=sortable.element;$.each(draggable.sortables,function(){this.refreshPositions();});draggable.currentItem=draggable.element;sortable.fromOutside=draggable;}
if(sortable.currentItem){sortable._mouseDrag(event);ui.position=sortable.position;}}else{if(sortable.isOver){sortable.isOver=0;sortable.cancelHelperRemoval=true;sortable.options._revert=sortable.options.revert;sortable.options.revert=false;sortable._trigger("out",event,sortable._uiHash(sortable));sortable._mouseStop(event,true);sortable.options.revert=sortable.options._revert;sortable.options.helper=sortable.options._helper;if(sortable.placeholder){sortable.placeholder.remove();}
ui.helper.appendTo(draggable._parent);draggable._refreshOffsets(event);ui.position=draggable._generatePosition(event,true);draggable._trigger("fromSortable",event);draggable.dropped=false;$.each(draggable.sortables,function(){this.refreshPositions();});}}});}});$.ui.plugin.add("draggable","cursor",{start:function(event,ui,instance){var t=$("body"),o=instance.options;if(t.css("cursor")){o._cursor=t.css("cursor");}
t.css("cursor",o.cursor);},stop:function(event,ui,instance){var o=instance.options;if(o._cursor){$("body").css("cursor",o._cursor);}}});$.ui.plugin.add("draggable","opacity",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;if(t.css("opacity")){o._opacity=t.css("opacity");}
t.css("opacity",o.opacity);},stop:function(event,ui,instance){var o=instance.options;if(o._opacity){$(ui.helper).css("opacity",o._opacity);}}});$.ui.plugin.add("draggable","scroll",{start:function(event,ui,i){if(!i.scrollParentNotHidden){i.scrollParentNotHidden=i.helper.scrollParent(false);}
if(i.scrollParentNotHidden[0]!==i.document[0]&&i.scrollParentNotHidden[0].tagName!=="HTML"){i.overflowOffset=i.scrollParentNotHidden.offset();}},drag:function(event,ui,i){var o=i.options,scrolled=false,scrollParent=i.scrollParentNotHidden[0],document=i.document[0];if(scrollParent!==document&&scrollParent.tagName!=="HTML"){if(!o.axis||o.axis!=="x"){if((i.overflowOffset.top+scrollParent.offsetHeight)-event.pageY<o.scrollSensitivity){scrollParent.scrollTop=scrolled=scrollParent.scrollTop+o.scrollSpeed;}else if(event.pageY-i.overflowOffset.top<o.scrollSensitivity){scrollParent.scrollTop=scrolled=scrollParent.scrollTop-o.scrollSpeed;}}
if(!o.axis||o.axis!=="y"){if((i.overflowOffset.left+scrollParent.offsetWidth)-event.pageX<o.scrollSensitivity){scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft+o.scrollSpeed;}else if(event.pageX-i.overflowOffset.left<o.scrollSensitivity){scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft-o.scrollSpeed;}}}else{if(!o.axis||o.axis!=="x"){if(event.pageY-$(document).scrollTop()<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);}else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);}}
if(!o.axis||o.axis!=="y"){if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);}else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}}}
if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(i,event);}}});$.ui.plugin.add("draggable","snap",{start:function(event,ui,i){var o=i.options;i.snapElements=[];$(o.snap.constructor!==String?(o.snap.items||":data(ui-draggable)"):o.snap).each(function(){var $t=$(this),$o=$t.offset();if(this!==i.element[0]){i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left});}});},drag:function(event,ui,inst){var ts,bs,ls,rs,l,r,t,b,i,first,o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--){l=inst.snapElements[i].left-inst.margins.left;r=l+inst.snapElements[i].width;t=inst.snapElements[i].top-inst.margins.top;b=t+inst.snapElements[i].height;if(x2<l-d||x1>r+d||y2<t-d||y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item)){if(inst.snapElements[i].snapping){if(inst.options.snap.release){inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item}));}}
inst.snapElements[i].snapping=false;continue;}
if(o.snapMode!=="inner"){ts=Math.abs(t-y2)<=d;bs=Math.abs(b-y1)<=d;ls=Math.abs(l-x2)<=d;rs=Math.abs(r-x1)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top;}
if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top;}
if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left;}
if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left;}}
first=(ts||bs||ls||rs);if(o.snapMode!=="outer"){ts=Math.abs(t-y1)<=d;bs=Math.abs(b-y2)<=d;ls=Math.abs(l-x1)<=d;rs=Math.abs(r-x2)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top;}
if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top;}
if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left;}
if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left;}}
if(!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)){if(inst.options.snap.snap){inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item}));}}
inst.snapElements[i].snapping=(ts||bs||ls||rs||first);}}});$.ui.plugin.add("draggable","stack",{start:function(event,ui,instance){var min,o=instance.options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-
(parseInt($(b).css("zIndex"),10)||0);});if(!group.length){return;}
min=parseInt($(group[0]).css("zIndex"),10)||0;$(group).each(function(i){$(this).css("zIndex",min+i);});this.css("zIndex",(min+group.length));}});$.ui.plugin.add("draggable","zIndex",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;if(t.css("zIndex")){o._zIndex=t.css("zIndex");}
t.css("zIndex",o.zIndex);},stop:function(event,ui,instance){var o=instance.options;if(o._zIndex){$(ui.helper).css("zIndex",o._zIndex);}}});var widgetsDraggable=$.ui.draggable;$.widget("ui.resizable",$.ui.mouse,{version:"1.13.2",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(value){return parseFloat(value)||0;},_isNumber:function(value){return!isNaN(parseFloat(value));},_hasScroll:function(el,a){if($(el).css("overflow")==="hidden"){return false;}
var scroll=(a&&a==="left")?"scrollLeft":"scrollTop",has=false;if(el[scroll]>0){return true;}
try{el[scroll]=1;has=(el[scroll]>0);el[scroll]=0;}catch(e){}
return has;},_create:function(){var margins,o=this.options,that=this;this._addClass("ui-resizable");$.extend(this,{_aspectRatio:!!(o.aspectRatio),aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap($("<div class='ui-wrapper'></div>").css({overflow:"hidden",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;margins={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")};this.element.css(margins);this.originalElement.css("margin",0);this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css(margins);this._proportionallyResize();}
this._setupHandles();if(o.autoHide){$(this.element).on("mouseenter",function(){if(o.disabled){return;}
that._removeClass("ui-resizable-autohide");that._handles.show();}).on("mouseleave",function(){if(o.disabled){return;}
if(!that.resizing){that._addClass("ui-resizable-autohide");that._handles.hide();}});}
this._mouseInit();},_destroy:function(){this._mouseDestroy();this._addedHandles.remove();var wrapper,_destroy=function(exp){$(exp).removeData("resizable").removeData("ui-resizable").off(".resizable");};if(this.elementIsWrapper){_destroy(this.element);wrapper=this.element;this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")}).insertAfter(wrapper);wrapper.remove();}
this.originalElement.css("resize",this.originalResizeStyle);_destroy(this.originalElement);return this;},_setOption:function(key,value){this._super(key,value);switch(key){case"handles":this._removeHandles();this._setupHandles();break;case"aspectRatio":this._aspectRatio=!!value;break;default:break;}},_setupHandles:function(){var o=this.options,handle,i,n,hname,axis,that=this;this.handles=o.handles||(!$(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});this._handles=$();this._addedHandles=$();if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw";}
n=this.handles.split(",");this.handles={};for(i=0;i<n.length;i++){handle=String.prototype.trim.call(n[i]);hname="ui-resizable-"+handle;axis=$("<div>");this._addClass(axis,"ui-resizable-handle "+hname);axis.css({zIndex:o.zIndex});this.handles[handle]=".ui-resizable-"+handle;if(!this.element.children(this.handles[handle]).length){this.element.append(axis);this._addedHandles=this._addedHandles.add(axis);}}}
this._renderAxis=function(target){var i,axis,padPos,padWrapper;target=target||this.element;for(i in this.handles){if(this.handles[i].constructor===String){this.handles[i]=this.element.children(this.handles[i]).first().show();}else if(this.handles[i].jquery||this.handles[i].nodeType){this.handles[i]=$(this.handles[i]);this._on(this.handles[i],{"mousedown":that._mouseDown});}
if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){axis=$(this.handles[i],this.element);padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");target.css(padPos,padWrapper);this._proportionallyResize();}
this._handles=this._handles.add(this.handles[i]);}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",function(){if(!that.resizing){if(this.className){axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);}
that.axis=axis&&axis[1]?axis[1]:"se";}});if(o.autoHide){this._handles.hide();this._addClass("ui-resizable-autohide");}},_removeHandles:function(){this._addedHandles.remove();},_mouseCapture:function(event){var i,handle,capture=false;for(i in this.handles){handle=$(this.handles[i])[0];if(handle===event.target||$.contains(handle,event.target)){capture=true;}}
return!this.options.disabled&&capture;},_mouseStart:function(event){var curleft,curtop,cursor,o=this.options,el=this.element;this.resizing=true;this._renderProxy();curleft=this._num(this.helper.css("left"));curtop=this._num(this.helper.css("top"));if(o.containment){curleft+=$(o.containment).scrollLeft()||0;curtop+=$(o.containment).scrollTop()||0;}
this.offset=this.helper.offset();this.position={left:curleft,top:curtop};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:el.width(),height:el.height()};this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()};this.originalPosition={left:curleft,top:curtop};this.originalMousePosition={left:event.pageX,top:event.pageY};this.aspectRatio=(typeof o.aspectRatio==="number")?o.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);cursor=$(".ui-resizable-"+this.axis).css("cursor");$("body").css("cursor",cursor==="auto"?this.axis+"-resize":cursor);this._addClass("ui-resizable-resizing");this._propagate("start",event);return true;},_mouseDrag:function(event){var data,props,smp=this.originalMousePosition,a=this.axis,dx=(event.pageX-smp.left)||0,dy=(event.pageY-smp.top)||0,trigger=this._change[a];this._updatePrevProperties();if(!trigger){return false;}
data=trigger.apply(this,[event,dx,dy]);this._updateVirtualBoundaries(event.shiftKey);if(this._aspectRatio||event.shiftKey){data=this._updateRatio(data,event);}
data=this._respectSize(data,event);this._updateCache(data);this._propagate("resize",event);props=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize();}
if(!$.isEmptyObject(props)){this._updatePrevProperties();this._trigger("resize",event,this.ui());this._applyChanges();}
return false;},_mouseStop:function(event){this.resizing=false;var pr,ista,soffseth,soffsetw,s,left,top,o=this.options,that=this;if(this._helper){pr=this._proportionallyResizeElements;ista=pr.length&&(/textarea/i).test(pr[0].nodeName);soffseth=ista&&this._hasScroll(pr[0],"left")?0:that.sizeDiff.height;soffsetw=ista?0:that.sizeDiff.width;s={width:(that.helper.width()-soffsetw),height:(that.helper.height()-soffseth)};left=(parseFloat(that.element.css("left"))+
(that.position.left-that.originalPosition.left))||null;top=(parseFloat(that.element.css("top"))+
(that.position.top-that.originalPosition.top))||null;if(!o.animate){this.element.css($.extend(s,{top:top,left:left}));}
that.helper.height(that.size.height);that.helper.width(that.size.width);if(this._helper&&!o.animate){this._proportionallyResize();}}
$("body").css("cursor","auto");this._removeClass("ui-resizable-resizing");this._propagate("stop",event);if(this._helper){this.helper.remove();}
return false;},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height};},_applyChanges:function(){var props={};if(this.position.top!==this.prevPosition.top){props.top=this.position.top+"px";}
if(this.position.left!==this.prevPosition.left){props.left=this.position.left+"px";}
if(this.size.width!==this.prevSize.width){props.width=this.size.width+"px";}
if(this.size.height!==this.prevSize.height){props.height=this.size.height+"px";}
this.helper.css(props);return props;},_updateVirtualBoundaries:function(forceAspectRatio){var pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b,o=this.options;b={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||forceAspectRatio){pMinWidth=b.minHeight*this.aspectRatio;pMinHeight=b.minWidth/this.aspectRatio;pMaxWidth=b.maxHeight*this.aspectRatio;pMaxHeight=b.maxWidth/this.aspectRatio;if(pMinWidth>b.minWidth){b.minWidth=pMinWidth;}
if(pMinHeight>b.minHeight){b.minHeight=pMinHeight;}
if(pMaxWidth<b.maxWidth){b.maxWidth=pMaxWidth;}
if(pMaxHeight<b.maxHeight){b.maxHeight=pMaxHeight;}}
this._vBoundaries=b;},_updateCache:function(data){this.offset=this.helper.offset();if(this._isNumber(data.left)){this.position.left=data.left;}
if(this._isNumber(data.top)){this.position.top=data.top;}
if(this._isNumber(data.height)){this.size.height=data.height;}
if(this._isNumber(data.width)){this.size.width=data.width;}},_updateRatio:function(data){var cpos=this.position,csize=this.size,a=this.axis;if(this._isNumber(data.height)){data.width=(data.height*this.aspectRatio);}else if(this._isNumber(data.width)){data.height=(data.width/this.aspectRatio);}
if(a==="sw"){data.left=cpos.left+(csize.width-data.width);data.top=null;}
if(a==="nw"){data.top=cpos.top+(csize.height-data.height);data.left=cpos.left+(csize.width-data.width);}
return data;},_respectSize:function(data){var o=this._vBoundaries,a=this.axis,ismaxw=this._isNumber(data.width)&&o.maxWidth&&(o.maxWidth<data.width),ismaxh=this._isNumber(data.height)&&o.maxHeight&&(o.maxHeight<data.height),isminw=this._isNumber(data.width)&&o.minWidth&&(o.minWidth>data.width),isminh=this._isNumber(data.height)&&o.minHeight&&(o.minHeight>data.height),dw=this.originalPosition.left+this.originalSize.width,dh=this.originalPosition.top+this.originalSize.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);if(isminw){data.width=o.minWidth;}
if(isminh){data.height=o.minHeight;}
if(ismaxw){data.width=o.maxWidth;}
if(ismaxh){data.height=o.maxHeight;}
if(isminw&&cw){data.left=dw-o.minWidth;}
if(ismaxw&&cw){data.left=dw-o.maxWidth;}
if(isminh&&ch){data.top=dh-o.minHeight;}
if(ismaxh&&ch){data.top=dh-o.maxHeight;}
if(!data.width&&!data.height&&!data.left&&data.top){data.top=null;}else if(!data.width&&!data.height&&!data.top&&data.left){data.left=null;}
return data;},_getPaddingPlusBorderDimensions:function(element){var i=0,widths=[],borders=[element.css("borderTopWidth"),element.css("borderRightWidth"),element.css("borderBottomWidth"),element.css("borderLeftWidth")],paddings=[element.css("paddingTop"),element.css("paddingRight"),element.css("paddingBottom"),element.css("paddingLeft")];for(;i<4;i++){widths[i]=(parseFloat(borders[i])||0);widths[i]+=(parseFloat(paddings[i])||0);}
return{height:widths[0]+widths[2],width:widths[1]+widths[3]};},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return;}
var prel,i=0,element=this.helper||this.element;for(;i<this._proportionallyResizeElements.length;i++){prel=this._proportionallyResizeElements[i];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(prel);}
prel.css({height:(element.height()-this.outerDimensions.height)||0,width:(element.width()-this.outerDimensions.width)||0});}},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset();if(this._helper){this.helper=this.helper||$("<div></div>").css({overflow:"hidden"});this._addClass(this.helper,this._helper);this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex});this.helper.appendTo("body").disableSelection();}else{this.helper=this.element;}},_change:{e:function(event,dx){return{width:this.originalSize.width+dx};},w:function(event,dx){var cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx};},n:function(event,dx,dy){var cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy};},s:function(event,dx,dy){return{height:this.originalSize.height+dy};},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]);if(n!=="resize"){this._trigger(n,event,this.ui());}},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition};}});$.ui.plugin.add("resizable","animate",{stop:function(event){var that=$(this).resizable("instance"),o=that.options,pr=that._proportionallyResizeElements,ista=pr.length&&(/textarea/i).test(pr[0].nodeName),soffseth=ista&&that._hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:(that.size.width-soffsetw),height:(that.size.height-soffseth)},left=(parseFloat(that.element.css("left"))+
(that.position.left-that.originalPosition.left))||null,top=(parseFloat(that.element.css("top"))+
(that.position.top-that.originalPosition.top))||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseFloat(that.element.css("width")),height:parseFloat(that.element.css("height")),top:parseFloat(that.element.css("top")),left:parseFloat(that.element.css("left"))};if(pr&&pr.length){$(pr[0]).css({width:data.width,height:data.height});}
that._updateCache(data);that._propagate("resize",event);}});}});$.ui.plugin.add("resizable","containment",{start:function(){var element,p,co,ch,cw,width,height,that=$(this).resizable("instance"),o=that.options,el=that.element,oc=o.containment,ce=(oc instanceof $)?oc.get(0):(/parent/.test(oc))?el.parent().get(0):oc;if(!ce){return;}
that.containerElement=$(ce);if(/document/.test(oc)||oc===document){that.containerOffset={left:0,top:0};that.containerPosition={left:0,top:0};that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight};}else{element=$(ce);p=[];$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=that._num(element.css("padding"+name));});that.containerOffset=element.offset();that.containerPosition=element.position();that.containerSize={height:(element.innerHeight()-p[3]),width:(element.innerWidth()-p[1])};co=that.containerOffset;ch=that.containerSize.height;cw=that.containerSize.width;width=(that._hasScroll(ce,"left")?ce.scrollWidth:cw);height=(that._hasScroll(ce)?ce.scrollHeight:ch);that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height};}},resize:function(event){var woset,hoset,isParent,isOffsetRelative,that=$(this).resizable("instance"),o=that.options,co=that.containerOffset,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement,continueResize=true;if(ce[0]!==document&&(/static/).test(ce.css("position"))){cop=co;}
if(cp.left<(that._helper?co.left:0)){that.size.width=that.size.width+
(that._helper?(that.position.left-co.left):(that.position.left-cop.left));if(pRatio){that.size.height=that.size.width/that.aspectRatio;continueResize=false;}
that.position.left=o.helper?co.left:0;}
if(cp.top<(that._helper?co.top:0)){that.size.height=that.size.height+
(that._helper?(that.position.top-co.top):that.position.top);if(pRatio){that.size.width=that.size.height*that.aspectRatio;continueResize=false;}
that.position.top=that._helper?co.top:0;}
isParent=that.containerElement.get(0)===that.element.parent().get(0);isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position"));if(isParent&&isOffsetRelative){that.offset.left=that.parentData.left+that.position.left;that.offset.top=that.parentData.top+that.position.top;}else{that.offset.left=that.element.offset().left;that.offset.top=that.element.offset().top;}
woset=Math.abs(that.sizeDiff.width+
(that._helper?that.offset.left-cop.left:(that.offset.left-co.left)));hoset=Math.abs(that.sizeDiff.height+
(that._helper?that.offset.top-cop.top:(that.offset.top-co.top)));if(woset+that.size.width>=that.parentData.width){that.size.width=that.parentData.width-woset;if(pRatio){that.size.height=that.size.width/that.aspectRatio;continueResize=false;}}
if(hoset+that.size.height>=that.parentData.height){that.size.height=that.parentData.height-hoset;if(pRatio){that.size.width=that.size.height*that.aspectRatio;continueResize=false;}}
if(!continueResize){that.position.left=that.prevPosition.left;that.position.top=that.prevPosition.top;that.size.width=that.prevSize.width;that.size.height=that.prevSize.height;}},stop:function(){var that=$(this).resizable("instance"),o=that.options,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;if(that._helper&&!o.animate&&(/relative/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}
if(that._helper&&!o.animate&&(/static/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}}});$.ui.plugin.add("resizable","alsoResize",{start:function(){var that=$(this).resizable("instance"),o=that.options;$(o.alsoResize).each(function(){var el=$(this);el.data("ui-resizable-alsoresize",{width:parseFloat(el.width()),height:parseFloat(el.height()),left:parseFloat(el.css("left")),top:parseFloat(el.css("top"))});});},resize:function(event,ui){var that=$(this).resizable("instance"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:(that.size.height-os.height)||0,width:(that.size.width-os.width)||0,top:(that.position.top-op.top)||0,left:(that.position.left-op.left)||0};$(o.alsoResize).each(function(){var el=$(this),start=$(this).data("ui-resizable-alsoresize"),style={},css=el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);if(sum&&sum>=0){style[prop]=sum||null;}});el.css(style);});},stop:function(){$(this).removeData("ui-resizable-alsoresize");}});$.ui.plugin.add("resizable","ghost",{start:function(){var that=$(this).resizable("instance"),cs=that.size;that.ghost=that.originalElement.clone();that.ghost.css({opacity:0.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0});that._addClass(that.ghost,"ui-resizable-ghost");if($.uiBackCompat!==false&&typeof that.options.ghost==="string"){that.ghost.addClass(this.options.ghost);}
that.ghost.appendTo(that.helper);},resize:function(){var that=$(this).resizable("instance");if(that.ghost){that.ghost.css({position:"relative",height:that.size.height,width:that.size.width});}},stop:function(){var that=$(this).resizable("instance");if(that.ghost&&that.helper){that.helper.get(0).removeChild(that.ghost.get(0));}}});$.ui.plugin.add("resizable","grid",{resize:function(){var outerDimensions,that=$(this).resizable("instance"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,grid=typeof o.grid==="number"?[o.grid,o.grid]:o.grid,gridX=(grid[0]||1),gridY=(grid[1]||1),ox=Math.round((cs.width-os.width)/gridX)*gridX,oy=Math.round((cs.height-os.height)/gridY)*gridY,newWidth=os.width+ox,newHeight=os.height+oy,isMaxWidth=o.maxWidth&&(o.maxWidth<newWidth),isMaxHeight=o.maxHeight&&(o.maxHeight<newHeight),isMinWidth=o.minWidth&&(o.minWidth>newWidth),isMinHeight=o.minHeight&&(o.minHeight>newHeight);o.grid=grid;if(isMinWidth){newWidth+=gridX;}
if(isMinHeight){newHeight+=gridY;}
if(isMaxWidth){newWidth-=gridX;}
if(isMaxHeight){newHeight-=gridY;}
if(/^(se|s|e)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;}else if(/^(ne)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.top=op.top-oy;}else if(/^(sw)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.left=op.left-ox;}else{if(newHeight-gridY<=0||newWidth-gridX<=0){outerDimensions=that._getPaddingPlusBorderDimensions(this);}
if(newHeight-gridY>0){that.size.height=newHeight;that.position.top=op.top-oy;}else{newHeight=gridY-outerDimensions.height;that.size.height=newHeight;that.position.top=op.top+os.height-newHeight;}
if(newWidth-gridX>0){that.size.width=newWidth;that.position.left=op.left-ox;}else{newWidth=gridX-outerDimensions.width;that.size.width=newWidth;that.position.left=op.left+os.width-newWidth;}}}});var widgetsResizable=$.ui.resizable;$.widget("ui.dialog",{version:"1.13.2",options:{appendTo:"body",autoOpen:true,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:true,closeText:"Close",draggable:true,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(pos){var topOffset=$(this).css(pos).offset().top;if(topOffset<0){$(this).css("top",pos.top-topOffset);}}},resizable:true,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions:{maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");if(this.options.title==null&&this.originalTitle!=null){this.options.title=this.originalTitle;}
if(this.options.disabled){this.options.disabled=false;}
this._createWrapper();this.element.show().removeAttr("title").appendTo(this.uiDialog);this._addClass("ui-dialog-content","ui-widget-content");this._createTitlebar();this._createButtonPane();if(this.options.draggable&&$.fn.draggable){this._makeDraggable();}
if(this.options.resizable&&$.fn.resizable){this._makeResizable();}
this._isOpen=false;this._trackFocus();},_init:function(){if(this.options.autoOpen){this.open();}},_appendTo:function(){var element=this.options.appendTo;if(element&&(element.jquery||element.nodeType)){return $(element);}
return this.document.find(element||"body").eq(0);},_destroy:function(){var next,originalPosition=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().css(this.originalCss).detach();this.uiDialog.remove();if(this.originalTitle){this.element.attr("title",this.originalTitle);}
next=originalPosition.parent.children().eq(originalPosition.index);if(next.length&&next[0]!==this.element[0]){next.before(this.element);}else{originalPosition.parent.append(this.element);}},widget:function(){return this.uiDialog;},disable:$.noop,enable:$.noop,close:function(event){var that=this;if(!this._isOpen||this._trigger("beforeClose",event)===false){return;}
this._isOpen=false;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();if(!this.opener.filter(":focusable").trigger("focus").length){$.ui.safeBlur($.ui.safeActiveElement(this.document[0]));}
this._hide(this.uiDialog,this.options.hide,function(){that._trigger("close",event);});},isOpen:function(){return this._isOpen;},moveToTop:function(){this._moveToTop();},_moveToTop:function(event,silent){var moved=false,zIndices=this.uiDialog.siblings(".ui-front:visible").map(function(){return+$(this).css("z-index");}).get(),zIndexMax=Math.max.apply(null,zIndices);if(zIndexMax>=+this.uiDialog.css("z-index")){this.uiDialog.css("z-index",zIndexMax+1);moved=true;}
if(moved&&!silent){this._trigger("focus",event);}
return moved;},open:function(){var that=this;if(this._isOpen){if(this._moveToTop()){this._focusTabbable();}
return;}
this._isOpen=true;this.opener=$($.ui.safeActiveElement(this.document[0]));this._size();this._position();this._createOverlay();this._moveToTop(null,true);if(this.overlay){this.overlay.css("z-index",this.uiDialog.css("z-index")-1);}
this._show(this.uiDialog,this.options.show,function(){that._focusTabbable();that._trigger("focus");});this._makeFocusTarget();this._trigger("open");},_focusTabbable:function(){var hasFocus=this._focusedElement;if(!hasFocus){hasFocus=this.element.find("[autofocus]");}
if(!hasFocus.length){hasFocus=this.element.find(":tabbable");}
if(!hasFocus.length){hasFocus=this.uiDialogButtonPane.find(":tabbable");}
if(!hasFocus.length){hasFocus=this.uiDialogTitlebarClose.filter(":tabbable");}
if(!hasFocus.length){hasFocus=this.uiDialog;}
hasFocus.eq(0).trigger("focus");},_restoreTabbableFocus:function(){var activeElement=$.ui.safeActiveElement(this.document[0]),isActive=this.uiDialog[0]===activeElement||$.contains(this.uiDialog[0],activeElement);if(!isActive){this._focusTabbable();}},_keepFocus:function(event){event.preventDefault();this._restoreTabbableFocus();this._delay(this._restoreTabbableFocus);},_createWrapper:function(){this.uiDialog=$("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front");this._on(this.uiDialog,{keydown:function(event){if(this.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE){event.preventDefault();this.close(event);return;}
if(event.keyCode!==$.ui.keyCode.TAB||event.isDefaultPrevented()){return;}
var tabbables=this.uiDialog.find(":tabbable"),first=tabbables.first(),last=tabbables.last();if((event.target===last[0]||event.target===this.uiDialog[0])&&!event.shiftKey){this._delay(function(){first.trigger("focus");});event.preventDefault();}else if((event.target===first[0]||event.target===this.uiDialog[0])&&event.shiftKey){this._delay(function(){last.trigger("focus");});event.preventDefault();}},mousedown:function(event){if(this._moveToTop(event)){this._focusTabbable();}}});if(!this.element.find("[aria-describedby]").length){this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")});}},_createTitlebar:function(){var uiDialogTitle;this.uiDialogTitlebar=$("<div>");this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix");this._on(this.uiDialogTitlebar,{mousedown:function(event){if(!$(event.target).closest(".ui-dialog-titlebar-close")){this.uiDialog.trigger("focus");}}});this.uiDialogTitlebarClose=$("<button type='button'></button>").button({label:$("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:false}).appendTo(this.uiDialogTitlebar);this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close");this._on(this.uiDialogTitlebarClose,{click:function(event){event.preventDefault();this.close(event);}});uiDialogTitle=$("<span>").uniqueId().prependTo(this.uiDialogTitlebar);this._addClass(uiDialogTitle,"ui-dialog-title");this._title(uiDialogTitle);this.uiDialogTitlebar.prependTo(this.uiDialog);this.uiDialog.attr({"aria-labelledby":uiDialogTitle.attr("id")});},_title:function(title){if(this.options.title){title.text(this.options.title);}else{title.html("&#160;");}},_createButtonPane:function(){this.uiDialogButtonPane=$("<div>");this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix");this.uiButtonSet=$("<div>").appendTo(this.uiDialogButtonPane);this._addClass(this.uiButtonSet,"ui-dialog-buttonset");this._createButtons();},_createButtons:function(){var that=this,buttons=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if($.isEmptyObject(buttons)||(Array.isArray(buttons)&&!buttons.length)){this._removeClass(this.uiDialog,"ui-dialog-buttons");return;}
$.each(buttons,function(name,props){var click,buttonOptions;props=typeof props==="function"?{click:props,text:name}:props;props=$.extend({type:"button"},props);click=props.click;buttonOptions={icon:props.icon,iconPosition:props.iconPosition,showLabel:props.showLabel,icons:props.icons,text:props.text};delete props.click;delete props.icon;delete props.iconPosition;delete props.showLabel;delete props.icons;if(typeof props.text==="boolean"){delete props.text;}
$("<button></button>",props).button(buttonOptions).appendTo(that.uiButtonSet).on("click",function(){click.apply(that.element[0],arguments);});});this._addClass(this.uiDialog,"ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog);},_makeDraggable:function(){var that=this,options=this.options;function filteredUi(ui){return{position:ui.position,offset:ui.offset};}
this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(event,ui){that._addClass($(this),"ui-dialog-dragging");that._blockFrames();that._trigger("dragStart",event,filteredUi(ui));},drag:function(event,ui){that._trigger("drag",event,filteredUi(ui));},stop:function(event,ui){var left=ui.offset.left-that.document.scrollLeft(),top=ui.offset.top-that.document.scrollTop();options.position={my:"left top",at:"left"+(left>=0?"+":"")+left+" "+"top"+(top>=0?"+":"")+top,of:that.window};that._removeClass($(this),"ui-dialog-dragging");that._unblockFrames();that._trigger("dragStop",event,filteredUi(ui));}});},_makeResizable:function(){var that=this,options=this.options,handles=options.resizable,position=this.uiDialog.css("position"),resizeHandles=typeof handles==="string"?handles:"n,e,s,w,se,sw,ne,nw";function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size};}
this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:this._minHeight(),handles:resizeHandles,start:function(event,ui){that._addClass($(this),"ui-dialog-resizing");that._blockFrames();that._trigger("resizeStart",event,filteredUi(ui));},resize:function(event,ui){that._trigger("resize",event,filteredUi(ui));},stop:function(event,ui){var offset=that.uiDialog.offset(),left=offset.left-that.document.scrollLeft(),top=offset.top-that.document.scrollTop();options.height=that.uiDialog.height();options.width=that.uiDialog.width();options.position={my:"left top",at:"left"+(left>=0?"+":"")+left+" "+"top"+(top>=0?"+":"")+top,of:that.window};that._removeClass($(this),"ui-dialog-resizing");that._unblockFrames();that._trigger("resizeStop",event,filteredUi(ui));}}).css("position",position);},_trackFocus:function(){this._on(this.widget(),{focusin:function(event){this._makeFocusTarget();this._focusedElement=$(event.target);}});},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this);},_untrackInstance:function(){var instances=this._trackingInstances(),exists=$.inArray(this,instances);if(exists!==-1){instances.splice(exists,1);}},_trackingInstances:function(){var instances=this.document.data("ui-dialog-instances");if(!instances){instances=[];this.document.data("ui-dialog-instances",instances);}
return instances;},_minHeight:function(){var options=this.options;return options.height==="auto"?options.minHeight:Math.min(options.minHeight,options.height);},_position:function(){var isVisible=this.uiDialog.is(":visible");if(!isVisible){this.uiDialog.show();}
this.uiDialog.position(this.options.position);if(!isVisible){this.uiDialog.hide();}},_setOptions:function(options){var that=this,resize=false,resizableOptions={};$.each(options,function(key,value){that._setOption(key,value);if(key in that.sizeRelatedOptions){resize=true;}
if(key in that.resizableRelatedOptions){resizableOptions[key]=value;}});if(resize){this._size();this._position();}
if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option",resizableOptions);}},_setOption:function(key,value){var isDraggable,isResizable,uiDialog=this.uiDialog;if(key==="disabled"){return;}
this._super(key,value);if(key==="appendTo"){this.uiDialog.appendTo(this._appendTo());}
if(key==="buttons"){this._createButtons();}
if(key==="closeText"){this.uiDialogTitlebarClose.button({label:$("<a>").text(""+this.options.closeText).html()});}
if(key==="draggable"){isDraggable=uiDialog.is(":data(ui-draggable)");if(isDraggable&&!value){uiDialog.draggable("destroy");}
if(!isDraggable&&value){this._makeDraggable();}}
if(key==="position"){this._position();}
if(key==="resizable"){isResizable=uiDialog.is(":data(ui-resizable)");if(isResizable&&!value){uiDialog.resizable("destroy");}
if(isResizable&&typeof value==="string"){uiDialog.resizable("option","handles",value);}
if(!isResizable&&value!==false){this._makeResizable();}}
if(key==="title"){this._title(this.uiDialogTitlebar.find(".ui-dialog-title"));}},_size:function(){var nonContentHeight,minContentHeight,maxContentHeight,options=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});if(options.minWidth>options.width){options.width=options.minWidth;}
nonContentHeight=this.uiDialog.css({height:"auto",width:options.width}).outerHeight();minContentHeight=Math.max(0,options.minHeight-nonContentHeight);maxContentHeight=typeof options.maxHeight==="number"?Math.max(0,options.maxHeight-nonContentHeight):"none";if(options.height==="auto"){this.element.css({minHeight:minContentHeight,maxHeight:maxContentHeight,height:"auto"});}else{this.element.height(Math.max(0,options.height-nonContentHeight));}
if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight());}},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var iframe=$(this);return $("<div>").css({position:"absolute",width:iframe.outerWidth(),height:iframe.outerHeight()}).appendTo(iframe.parent()).offset(iframe.offset())[0];});},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks;}},_allowInteraction:function(event){if($(event.target).closest(".ui-dialog").length){return true;}
return!!$(event.target).closest(".ui-datepicker").length;},_createOverlay:function(){if(!this.options.modal){return;}
var jqMinor=$.fn.jquery.substring(0,4);var isOpening=true;this._delay(function(){isOpening=false;});if(!this.document.data("ui-dialog-overlays")){this.document.on("focusin.ui-dialog",function(event){if(isOpening){return;}
var instance=this._trackingInstances()[0];if(!instance._allowInteraction(event)){event.preventDefault();instance._focusTabbable();if(jqMinor==="3.4."||jqMinor==="3.5."){instance._delay(instance._restoreTabbableFocus);}}}.bind(this));}
this.overlay=$("<div>").appendTo(this._appendTo());this._addClass(this.overlay,null,"ui-widget-overlay ui-front");this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1);},_destroyOverlay:function(){if(!this.options.modal){return;}
if(this.overlay){var overlays=this.document.data("ui-dialog-overlays")-1;if(!overlays){this.document.off("focusin.ui-dialog");this.document.removeData("ui-dialog-overlays");}else{this.document.data("ui-dialog-overlays",overlays);}
this.overlay.remove();this.overlay=null;}}});if($.uiBackCompat!==false){$.widget("ui.dialog",$.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super();this.uiDialog.addClass(this.options.dialogClass);},_setOption:function(key,value){if(key==="dialogClass"){this.uiDialog.removeClass(this.options.dialogClass).addClass(value);}
this._superApply(arguments);}});}
var widgetsDialog=$.ui.dialog;$.widget("ui.droppable",{version:"1.13.2",widgetEventPrefix:"drop",options:{accept:"*",addClasses:true,greedy:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var proportions,o=this.options,accept=o.accept;this.isover=false;this.isout=true;this.accept=typeof accept==="function"?accept:function(d){return d.is(accept);};this.proportions=function(){if(arguments.length){proportions=arguments[0];}else{return proportions?proportions:proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};}};this._addToManager(o.scope);if(o.addClasses){this._addClass("ui-droppable");}},_addToManager:function(scope){$.ui.ddmanager.droppables[scope]=$.ui.ddmanager.droppables[scope]||[];$.ui.ddmanager.droppables[scope].push(this);},_splice:function(drop){var i=0;for(;i<drop.length;i++){if(drop[i]===this){drop.splice(i,1);}}},_destroy:function(){var drop=$.ui.ddmanager.droppables[this.options.scope];this._splice(drop);},_setOption:function(key,value){if(key==="accept"){this.accept=typeof value==="function"?value:function(d){return d.is(value);};}else if(key==="scope"){var drop=$.ui.ddmanager.droppables[this.options.scope];this._splice(drop);this._addToManager(value);}
this._super(key,value);},_activate:function(event){var draggable=$.ui.ddmanager.current;this._addActiveClass();if(draggable){this._trigger("activate",event,this.ui(draggable));}},_deactivate:function(event){var draggable=$.ui.ddmanager.current;this._removeActiveClass();if(draggable){this._trigger("deactivate",event,this.ui(draggable));}},_over:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return;}
if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this._addHoverClass();this._trigger("over",event,this.ui(draggable));}},_out:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return;}
if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this._removeHoverClass();this._trigger("out",event,this.ui(draggable));}},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current,childrenIntersection=false;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return false;}
this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var inst=$(this).droppable("instance");if(inst.options.greedy&&!inst.options.disabled&&inst.options.scope===draggable.options.scope&&inst.accept.call(inst.element[0],(draggable.currentItem||draggable.element))&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance,event)){childrenIntersection=true;return false;}});if(childrenIntersection){return false;}
if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this._removeActiveClass();this._removeHoverClass();this._trigger("drop",event,this.ui(draggable));return this.element;}
return false;},ui:function(c){return{draggable:(c.currentItem||c.element),helper:c.helper,position:c.position,offset:c.positionAbs};},_addHoverClass:function(){this._addClass("ui-droppable-hover");},_removeHoverClass:function(){this._removeClass("ui-droppable-hover");},_addActiveClass:function(){this._addClass("ui-droppable-active");},_removeActiveClass:function(){this._removeClass("ui-droppable-active");}});$.ui.intersect=(function(){function isOverAxis(x,reference,size){return(x>=reference)&&(x<(reference+size));}
return function(draggable,droppable,toleranceMode,event){if(!droppable.offset){return false;}
var x1=(draggable.positionAbs||draggable.position.absolute).left+draggable.margins.left,y1=(draggable.positionAbs||draggable.position.absolute).top+draggable.margins.top,x2=x1+draggable.helperProportions.width,y2=y1+draggable.helperProportions.height,l=droppable.offset.left,t=droppable.offset.top,r=l+droppable.proportions().width,b=t+droppable.proportions().height;switch(toleranceMode){case"fit":return(l<=x1&&x2<=r&&t<=y1&&y2<=b);case"intersect":return(l<x1+(draggable.helperProportions.width/2)&&x2-(draggable.helperProportions.width/2)<r&&t<y1+(draggable.helperProportions.height/2)&&y2-(draggable.helperProportions.height/2)<b);case"pointer":return isOverAxis(event.pageY,t,droppable.proportions().height)&&isOverAxis(event.pageX,l,droppable.proportions().width);case"touch":return((y1>=t&&y1<=b)||(y2>=t&&y2<=b)||(y1<t&&y2>b))&&((x1>=l&&x1<=r)||(x2>=l&&x2<=r)||(x1<l&&x2>r));default:return false;}};})();$.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,event){var i,j,m=$.ui.ddmanager.droppables[t.options.scope]||[],type=event?event.type:null,list=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(i=0;i<m.length;i++){if(m[i].options.disabled||(t&&!m[i].accept.call(m[i].element[0],(t.currentItem||t.element)))){continue;}
for(j=0;j<list.length;j++){if(list[j]===m[i].element[0]){m[i].proportions().height=0;continue droppablesLoop;}}
m[i].visible=m[i].element.css("display")!=="none";if(!m[i].visible){continue;}
if(type==="mousedown"){m[i]._activate.call(m[i],event);}
m[i].offset=m[i].element.offset();m[i].proportions({width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight});}},drop:function(draggable,event){var dropped=false;$.each(($.ui.ddmanager.droppables[draggable.options.scope]||[]).slice(),function(){if(!this.options){return;}
if(!this.options.disabled&&this.visible&&$.ui.intersect(draggable,this,this.options.tolerance,event)){dropped=this._drop.call(this,event)||dropped;}
if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this.isout=true;this.isover=false;this._deactivate.call(this,event);}});return dropped;},dragStart:function(draggable,event){draggable.element.parentsUntil("body").on("scroll.droppable",function(){if(!draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}});},drag:function(draggable,event){if(draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}
$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return;}
var parentInstance,scope,parent,intersects=$.ui.intersect(draggable,this,this.options.tolerance,event),c=!intersects&&this.isover?"isout":(intersects&&!this.isover?"isover":null);if(!c){return;}
if(this.options.greedy){scope=this.options.scope;parent=this.element.parents(":data(ui-droppable)").filter(function(){return $(this).droppable("instance").options.scope===scope;});if(parent.length){parentInstance=$(parent[0]).droppable("instance");parentInstance.greedyChild=(c==="isover");}}
if(parentInstance&&c==="isover"){parentInstance.isover=false;parentInstance.isout=true;parentInstance._out.call(parentInstance,event);}
this[c]=true;this[c==="isout"?"isover":"isout"]=false;this[c==="isover"?"_over":"_out"].call(this,event);if(parentInstance&&c==="isout"){parentInstance.isout=false;parentInstance.isover=true;parentInstance._over.call(parentInstance,event);}});},dragStop:function(draggable,event){draggable.element.parentsUntil("body").off("scroll.droppable");if(!draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}}};if($.uiBackCompat!==false){$.widget("ui.droppable",$.ui.droppable,{options:{hoverClass:false,activeClass:false},_addActiveClass:function(){this._super();if(this.options.activeClass){this.element.addClass(this.options.activeClass);}},_removeActiveClass:function(){this._super();if(this.options.activeClass){this.element.removeClass(this.options.activeClass);}},_addHoverClass:function(){this._super();if(this.options.hoverClass){this.element.addClass(this.options.hoverClass);}},_removeHoverClass:function(){this._super();if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass);}}});}
var widgetsDroppable=$.ui.droppable;var widgetsProgressbar=$.widget("ui.progressbar",{version:"1.13.2",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.attr({role:"progressbar","aria-valuemin":this.min});this._addClass("ui-progressbar","ui-widget ui-widget-content");this.valueDiv=$("<div>").appendTo(this.element);this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header");this._refreshValue();},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow");this.valueDiv.remove();},value:function(newValue){if(newValue===undefined){return this.options.value;}
this.options.value=this._constrainedValue(newValue);this._refreshValue();},_constrainedValue:function(newValue){if(newValue===undefined){newValue=this.options.value;}
this.indeterminate=newValue===false;if(typeof newValue!=="number"){newValue=0;}
return this.indeterminate?false:Math.min(this.options.max,Math.max(this.min,newValue));},_setOptions:function(options){var value=options.value;delete options.value;this._super(options);this.options.value=this._constrainedValue(value);this._refreshValue();},_setOption:function(key,value){if(key==="max"){value=Math.max(this.min,value);}
this._super(key,value);},_setOptionDisabled:function(value){this._super(value);this.element.attr("aria-disabled",value);this._toggleClass(null,"ui-state-disabled",!!value);},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min);},_refreshValue:function(){var value=this.options.value,percentage=this._percentage();this.valueDiv.toggle(this.indeterminate||value>this.min).width(percentage.toFixed(0)+"%");this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,value===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate);if(this.indeterminate){this.element.removeAttr("aria-valuenow");if(!this.overlayDiv){this.overlayDiv=$("<div>").appendTo(this.valueDiv);this._addClass(this.overlayDiv,"ui-progressbar-overlay");}}else{this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":value});if(this.overlayDiv){this.overlayDiv.remove();this.overlayDiv=null;}}
if(this.oldValue!==value){this.oldValue=value;this._trigger("change");}
if(value===this.options.max){this._trigger("complete");}}});var widgetsSelectable=$.widget("ui.selectable",$.ui.mouse,{version:"1.13.2",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var that=this;this._addClass("ui-selectable");this.dragged=false;this.refresh=function(){that.elementPos=$(that.element[0]).offset();that.selectees=$(that.options.filter,that.element[0]);that._addClass(that.selectees,"ui-selectee");that.selectees.each(function(){var $this=$(this),selecteeOffset=$this.offset(),pos={left:selecteeOffset.left-that.elementPos.left,top:selecteeOffset.top-that.elementPos.top};$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:false,selected:$this.hasClass("ui-selected"),selecting:$this.hasClass("ui-selecting"),unselecting:$this.hasClass("ui-unselecting")});});};this.refresh();this._mouseInit();this.helper=$("<div>");this._addClass(this.helper,"ui-selectable-helper");},_destroy:function(){this.selectees.removeData("selectable-item");this._mouseDestroy();},_mouseStart:function(event){var that=this,options=this.options;this.opos=[event.pageX,event.pageY];this.elementPos=$(this.element[0]).offset();if(this.options.disabled){return;}
this.selectees=$(options.filter,this.element[0]);this._trigger("start",event);$(options.appendTo).append(this.helper);this.helper.css({"left":event.pageX,"top":event.pageY,"width":0,"height":0});if(options.autoRefresh){this.refresh();}
this.selectees.filter(".ui-selected").each(function(){var selectee=$.data(this,"selectable-item");selectee.startselected=true;if(!event.metaKey&&!event.ctrlKey){that._removeClass(selectee.$element,"ui-selected");selectee.selected=false;that._addClass(selectee.$element,"ui-unselecting");selectee.unselecting=true;that._trigger("unselecting",event,{unselecting:selectee.element});}});$(event.target).parents().addBack().each(function(){var doSelect,selectee=$.data(this,"selectable-item");if(selectee){doSelect=(!event.metaKey&&!event.ctrlKey)||!selectee.$element.hasClass("ui-selected");that._removeClass(selectee.$element,doSelect?"ui-unselecting":"ui-selected")._addClass(selectee.$element,doSelect?"ui-selecting":"ui-unselecting");selectee.unselecting=!doSelect;selectee.selecting=doSelect;selectee.selected=doSelect;if(doSelect){that._trigger("selecting",event,{selecting:selectee.element});}else{that._trigger("unselecting",event,{unselecting:selectee.element});}
return false;}});},_mouseDrag:function(event){this.dragged=true;if(this.options.disabled){return;}
var tmp,that=this,options=this.options,x1=this.opos[0],y1=this.opos[1],x2=event.pageX,y2=event.pageY;if(x1>x2){tmp=x2;x2=x1;x1=tmp;}
if(y1>y2){tmp=y2;y2=y1;y1=tmp;}
this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1});this.selectees.each(function(){var selectee=$.data(this,"selectable-item"),hit=false,offset={};if(!selectee||selectee.element===that.element[0]){return;}
offset.left=selectee.left+that.elementPos.left;offset.right=selectee.right+that.elementPos.left;offset.top=selectee.top+that.elementPos.top;offset.bottom=selectee.bottom+that.elementPos.top;if(options.tolerance==="touch"){hit=(!(offset.left>x2||offset.right<x1||offset.top>y2||offset.bottom<y1));}else if(options.tolerance==="fit"){hit=(offset.left>x1&&offset.right<x2&&offset.top>y1&&offset.bottom<y2);}
if(hit){if(selectee.selected){that._removeClass(selectee.$element,"ui-selected");selectee.selected=false;}
if(selectee.unselecting){that._removeClass(selectee.$element,"ui-unselecting");selectee.unselecting=false;}
if(!selectee.selecting){that._addClass(selectee.$element,"ui-selecting");selectee.selecting=true;that._trigger("selecting",event,{selecting:selectee.element});}}else{if(selectee.selecting){if((event.metaKey||event.ctrlKey)&&selectee.startselected){that._removeClass(selectee.$element,"ui-selecting");selectee.selecting=false;that._addClass(selectee.$element,"ui-selected");selectee.selected=true;}else{that._removeClass(selectee.$element,"ui-selecting");selectee.selecting=false;if(selectee.startselected){that._addClass(selectee.$element,"ui-unselecting");selectee.unselecting=true;}
that._trigger("unselecting",event,{unselecting:selectee.element});}}
if(selectee.selected){if(!event.metaKey&&!event.ctrlKey&&!selectee.startselected){that._removeClass(selectee.$element,"ui-selected");selectee.selected=false;that._addClass(selectee.$element,"ui-unselecting");selectee.unselecting=true;that._trigger("unselecting",event,{unselecting:selectee.element});}}}});return false;},_mouseStop:function(event){var that=this;this.dragged=false;$(".ui-unselecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");that._removeClass(selectee.$element,"ui-unselecting");selectee.unselecting=false;selectee.startselected=false;that._trigger("unselected",event,{unselected:selectee.element});});$(".ui-selecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");that._removeClass(selectee.$element,"ui-selecting")._addClass(selectee.$element,"ui-selected");selectee.selecting=false;selectee.selected=true;selectee.startselected=true;that._trigger("selected",event,{selected:selectee.element});});this._trigger("stop",event);this.helper.remove();return false;}});var widgetsSelectmenu=$.widget("ui.selectmenu",[$.ui.formResetMixin,{version:"1.13.2",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:false,change:null,close:null,focus:null,open:null,select:null},_create:function(){var selectmenuId=this.element.uniqueId().attr("id");this.ids={element:selectmenuId,button:selectmenuId+"-button",menu:selectmenuId+"-menu"};this._drawButton();this._drawMenu();this._bindFormResetHandler();this._rendered=false;this.menuItems=$();},_drawButton:function(){var icon,that=this,item=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button);this._on(this.labels,{click:function(event){this.button.trigger("focus");event.preventDefault();}});this.element.hide();this.button=$("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element);this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget");icon=$("<span>").appendTo(this.button);this._addClass(icon,"ui-selectmenu-icon","ui-icon "+this.options.icons.button);this.buttonItem=this._renderButtonItem(item).appendTo(this.button);if(this.options.width!==false){this._resizeButton();}
this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){if(!that._rendered){that._refreshMenu();}});},_drawMenu:function(){var that=this;this.menu=$("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=$("<div>").append(this.menu);this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front");this.menuWrap.appendTo(this._appendTo());this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(event,ui){event.preventDefault();that._setSelection();that._select(ui.item.data("ui-selectmenu-item"),event);},focus:function(event,ui){var item=ui.item.data("ui-selectmenu-item");if(that.focusIndex!=null&&item.index!==that.focusIndex){that._trigger("focus",event,{item:item});if(!that.isOpen){that._select(item,event);}}
that.focusIndex=item.index;that.button.attr("aria-activedescendant",that.menuItems.eq(item.index).attr("id"));}}).menu("instance");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return false;};this.menuInstance._isDivider=function(){return false;};},refresh:function(){this._refreshMenu();this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{}));if(this.options.width===null){this._resizeButton();}},_refreshMenu:function(){var item,options=this.element.find("option");this.menu.empty();this._parseOptions(options);this._renderMenu(this.menu,this.items);this.menuInstance.refresh();this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper");this._rendered=true;if(!options.length){return;}
item=this._getSelectedItem();this.menuInstance.focus(null,item);this._setAria(item.data("ui-selectmenu-item"));this._setOption("disabled",this.element.prop("disabled"));},open:function(event){if(this.options.disabled){return;}
if(!this._rendered){this._refreshMenu();}else{this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active");this.menuInstance.focus(null,this._getSelectedItem());}
if(!this.menuItems.length){return;}
this.isOpen=true;this._toggleAttr();this._resizeMenu();this._position();this._on(this.document,this._documentClick);this._trigger("open",event);},_position:function(){this.menuWrap.position($.extend({of:this.button},this.options.position));},close:function(event){if(!this.isOpen){return;}
this.isOpen=false;this._toggleAttr();this.range=null;this._off(this.document);this._trigger("close",event);},widget:function(){return this.button;},menuWidget:function(){return this.menu;},_renderButtonItem:function(item){var buttonItem=$("<span>");this._setText(buttonItem,item.label);this._addClass(buttonItem,"ui-selectmenu-text");return buttonItem;},_renderMenu:function(ul,items){var that=this,currentOptgroup="";$.each(items,function(index,item){var li;if(item.optgroup!==currentOptgroup){li=$("<li>",{text:item.optgroup});that._addClass(li,"ui-selectmenu-optgroup","ui-menu-divider"+
(item.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""));li.appendTo(ul);currentOptgroup=item.optgroup;}
that._renderItemData(ul,item);});},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-selectmenu-item",item);},_renderItem:function(ul,item){var li=$("<li>"),wrapper=$("<div>",{title:item.element.attr("title")});if(item.disabled){this._addClass(li,null,"ui-state-disabled");}
this._setText(wrapper,item.label);return li.append(wrapper).appendTo(ul);},_setText:function(element,value){if(value){element.text(value);}else{element.html("&#160;");}},_move:function(direction,event){var item,next,filter=".ui-menu-item";if(this.isOpen){item=this.menuItems.eq(this.focusIndex).parent("li");}else{item=this.menuItems.eq(this.element[0].selectedIndex).parent("li");filter+=":not(.ui-state-disabled)";}
if(direction==="first"||direction==="last"){next=item[direction==="first"?"prevAll":"nextAll"](filter).eq(-1);}else{next=item[direction+"All"](filter).eq(0);}
if(next.length){this.menuInstance.focus(event,next);}},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li");},_toggle:function(event){this[this.isOpen?"close":"open"](event);},_setSelection:function(){var selection;if(!this.range){return;}
if(window.getSelection){selection=window.getSelection();selection.removeAllRanges();selection.addRange(this.range);}else{this.range.select();}
this.button.trigger("focus");},_documentClick:{mousedown:function(event){if(!this.isOpen){return;}
if(!$(event.target).closest(".ui-selectmenu-menu, #"+
$.escapeSelector(this.ids.button)).length){this.close(event);}}},_buttonEvents:{mousedown:function(){var selection;if(window.getSelection){selection=window.getSelection();if(selection.rangeCount){this.range=selection.getRangeAt(0);}}else{this.range=document.selection.createRange();}},click:function(event){this._setSelection();this._toggle(event);},keydown:function(event){var preventDefault=true;switch(event.keyCode){case $.ui.keyCode.TAB:case $.ui.keyCode.ESCAPE:this.close(event);preventDefault=false;break;case $.ui.keyCode.ENTER:if(this.isOpen){this._selectFocusedItem(event);}
break;case $.ui.keyCode.UP:if(event.altKey){this._toggle(event);}else{this._move("prev",event);}
break;case $.ui.keyCode.DOWN:if(event.altKey){this._toggle(event);}else{this._move("next",event);}
break;case $.ui.keyCode.SPACE:if(this.isOpen){this._selectFocusedItem(event);}else{this._toggle(event);}
break;case $.ui.keyCode.LEFT:this._move("prev",event);break;case $.ui.keyCode.RIGHT:this._move("next",event);break;case $.ui.keyCode.HOME:case $.ui.keyCode.PAGE_UP:this._move("first",event);break;case $.ui.keyCode.END:case $.ui.keyCode.PAGE_DOWN:this._move("last",event);break;default:this.menu.trigger(event);preventDefault=false;}
if(preventDefault){event.preventDefault();}}},_selectFocusedItem:function(event){var item=this.menuItems.eq(this.focusIndex).parent("li");if(!item.hasClass("ui-state-disabled")){this._select(item.data("ui-selectmenu-item"),event);}},_select:function(item,event){var oldIndex=this.element[0].selectedIndex;this.element[0].selectedIndex=item.index;this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(item));this._setAria(item);this._trigger("select",event,{item:item});if(item.index!==oldIndex){this._trigger("change",event,{item:item});}
this.close(event);},_setAria:function(item){var id=this.menuItems.eq(item.index).attr("id");this.button.attr({"aria-labelledby":id,"aria-activedescendant":id});this.menu.attr("aria-activedescendant",id);},_setOption:function(key,value){if(key==="icons"){var icon=this.button.find("span.ui-icon");this._removeClass(icon,null,this.options.icons.button)._addClass(icon,null,value.button);}
this._super(key,value);if(key==="appendTo"){this.menuWrap.appendTo(this._appendTo());}
if(key==="width"){this._resizeButton();}},_setOptionDisabled:function(value){this._super(value);this.menuInstance.option("disabled",value);this.button.attr("aria-disabled",value);this._toggleClass(this.button,null,"ui-state-disabled",value);this.element.prop("disabled",value);if(value){this.button.attr("tabindex",-1);this.close();}else{this.button.attr("tabindex",0);}},_appendTo:function(){var element=this.options.appendTo;if(element){element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0);}
if(!element||!element[0]){element=this.element.closest(".ui-front, dialog");}
if(!element.length){element=this.document[0].body;}
return element;},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen);this._removeClass(this.button,"ui-selectmenu-button-"+
(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+
(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen);this.menu.attr("aria-hidden",!this.isOpen);},_resizeButton:function(){var width=this.options.width;if(width===false){this.button.css("width","");return;}
if(width===null){width=this.element.show().outerWidth();this.element.hide();}
this.button.outerWidth(width);},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1));},_getCreateOptions:function(){var options=this._super();options.disabled=this.element.prop("disabled");return options;},_parseOptions:function(options){var that=this,data=[];options.each(function(index,item){if(item.hidden){return;}
data.push(that._parseOption($(item),index));});this.items=data;},_parseOption:function(option,index){var optgroup=option.parent("optgroup");return{element:option,index:index,value:option.val(),label:option.text(),optgroup:optgroup.attr("label")||"",disabled:optgroup.prop("disabled")||option.prop("disabled")};},_destroy:function(){this._unbindFormResetHandler();this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.labels.attr("for",this.ids.element);}}]);var widgetsSlider=$.widget("ui.slider",$.ui.mouse,{version:"1.13.2",widgetEventPrefix:"slide",options:{animate:false,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content");this._refresh();this._animateOff=false;},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue();},_createHandles:function(){var i,handleCount,options=this.options,existingHandles=this.element.find(".ui-slider-handle"),handle="<span tabindex='0'></span>",handles=[];handleCount=(options.values&&options.values.length)||1;if(existingHandles.length>handleCount){existingHandles.slice(handleCount).remove();existingHandles=existingHandles.slice(0,handleCount);}
for(i=existingHandles.length;i<handleCount;i++){handles.push(handle);}
this.handles=existingHandles.add($(handles.join("")).appendTo(this.element));this._addClass(this.handles,"ui-slider-handle","ui-state-default");this.handle=this.handles.eq(0);this.handles.each(function(i){$(this).data("ui-slider-handle-index",i).attr("tabIndex",0);});},_createRange:function(){var options=this.options;if(options.range){if(options.range===true){if(!options.values){options.values=[this._valueMin(),this._valueMin()];}else if(options.values.length&&options.values.length!==2){options.values=[options.values[0],options.values[0]];}else if(Array.isArray(options.values)){options.values=options.values.slice(0);}}
if(!this.range||!this.range.length){this.range=$("<div>").appendTo(this.element);this._addClass(this.range,"ui-slider-range");}else{this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max");this.range.css({"left":"","bottom":""});}
if(options.range==="min"||options.range==="max"){this._addClass(this.range,"ui-slider-range-"+options.range);}}else{if(this.range){this.range.remove();}
this.range=null;}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles);},_destroy:function(){this.handles.remove();if(this.range){this.range.remove();}
this._mouseDestroy();},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;if(o.disabled){return false;}
this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();position={x:event.pageX,y:event.pageY};normValue=this._normValueFromMouse(position);distance=this._valueMax()-this._valueMin()+1;this.handles.each(function(i){var thisDistance=Math.abs(normValue-that.values(i));if((distance>thisDistance)||(distance===thisDistance&&(i===that._lastChangedValue||that.values(i)===o.min))){distance=thisDistance;closestHandle=$(this);index=i;}});allowed=this._start(event,index);if(allowed===false){return false;}
this._mouseSliding=true;this._handleIndex=index;this._addClass(closestHandle,null,"ui-state-active");closestHandle.trigger("focus");offset=closestHandle.offset();mouseOverHandle=!$(event.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-(closestHandle.width()/2),top:event.pageY-offset.top-
(closestHandle.height()/2)-
(parseInt(closestHandle.css("borderTopWidth"),10)||0)-
(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+
(parseInt(closestHandle.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(event,index,normValue);}
this._animateOff=true;return true;},_mouseStart:function(){return true;},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);this._slide(event,this._handleIndex,normValue);return false;},_mouseStop:function(event){this._removeClass(this.handles,null,"ui-state-active");this._mouseSliding=false;this._stop(event,this._handleIndex);this._change(event,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false;},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal";},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;if(this.orientation==="horizontal"){pixelTotal=this.elementSize.width;pixelMouse=position.x-this.elementOffset.left-
(this._clickOffset?this._clickOffset.left:0);}else{pixelTotal=this.elementSize.height;pixelMouse=position.y-this.elementOffset.top-
(this._clickOffset?this._clickOffset.top:0);}
percentMouse=(pixelMouse/pixelTotal);if(percentMouse>1){percentMouse=1;}
if(percentMouse<0){percentMouse=0;}
if(this.orientation==="vertical"){percentMouse=1-percentMouse;}
valueTotal=this._valueMax()-this._valueMin();valueMouse=this._valueMin()+percentMouse*valueTotal;return this._trimAlignValue(valueMouse);},_uiHash:function(index,value,values){var uiHash={handle:this.handles[index],handleIndex:index,value:value!==undefined?value:this.value()};if(this._hasMultipleValues()){uiHash.value=value!==undefined?value:this.values(index);uiHash.values=values||this.values();}
return uiHash;},_hasMultipleValues:function(){return this.options.values&&this.options.values.length;},_start:function(event,index){return this._trigger("start",event,this._uiHash(index));},_slide:function(event,index,newVal){var allowed,otherVal,currentValue=this.value(),newValues=this.values();if(this._hasMultipleValues()){otherVal=this.values(index?0:1);currentValue=this.values(index);if(this.options.values.length===2&&this.options.range===true){newVal=index===0?Math.min(otherVal,newVal):Math.max(otherVal,newVal);}
newValues[index]=newVal;}
if(newVal===currentValue){return;}
allowed=this._trigger("slide",event,this._uiHash(index,newVal,newValues));if(allowed===false){return;}
if(this._hasMultipleValues()){this.values(index,newVal);}else{this.value(newVal);}},_stop:function(event,index){this._trigger("stop",event,this._uiHash(index));},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){this._lastChangedValue=index;this._trigger("change",event,this._uiHash(index));}},value:function(newValue){if(arguments.length){this.options.value=this._trimAlignValue(newValue);this._refreshValue();this._change(null,0);return;}
return this._value();},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1){this.options.values[index]=this._trimAlignValue(newValue);this._refreshValue();this._change(null,index);return;}
if(arguments.length){if(Array.isArray(arguments[0])){vals=this.options.values;newValues=arguments[0];for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(newValues[i]);this._change(null,i);}
this._refreshValue();}else{if(this._hasMultipleValues()){return this._values(index);}else{return this.value();}}}else{return this._values();}},_setOption:function(key,value){var i,valsLength=0;if(key==="range"&&this.options.range===true){if(value==="min"){this.options.value=this._values(0);this.options.values=null;}else if(value==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null;}}
if(Array.isArray(this.options.values)){valsLength=this.options.values.length;}
this._super(key,value);switch(key){case"orientation":this._detectOrientation();this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation);this._refreshValue();if(this.options.range){this._refreshRange(value);}
this.handles.css(value==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(i=valsLength-1;i>=0;i--){this._change(null,i);}
this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break;}},_setOptionDisabled:function(value){this._super(value);this._toggleClass(null,"ui-state-disabled",!!value);},_value:function(){var val=this.options.value;val=this._trimAlignValue(val);return val;},_values:function(index){var val,vals,i;if(arguments.length){val=this.options.values[index];val=this._trimAlignValue(val);return val;}else if(this._hasMultipleValues()){vals=this.options.values.slice();for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(vals[i]);}
return vals;}else{return[];}},_trimAlignValue:function(val){if(val<=this._valueMin()){return this._valueMin();}
if(val>=this._valueMax()){return this._valueMax();}
var step=(this.options.step>0)?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;if(Math.abs(valModStep)*2>=step){alignValue+=(valModStep>0)?step:(-step);}
return parseFloat(alignValue.toFixed(5));},_calculateNewMax:function(){var max=this.options.max,min=this._valueMin(),step=this.options.step,aboveMin=Math.round((max-min)/step)*step;max=aboveMin+min;if(max>this.options.max){max-=step;}
this.max=parseFloat(max.toFixed(this._precision()));},_precision:function(){var precision=this._precisionOf(this.options.step);if(this.options.min!==null){precision=Math.max(precision,this._precisionOf(this.options.min));}
return precision;},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return decimal===-1?0:str.length-decimal-1;},_valueMin:function(){return this.options.min;},_valueMax:function(){return this.max;},_refreshRange:function(orientation){if(orientation==="vertical"){this.range.css({"width":"","left":""});}
if(orientation==="horizontal"){this.range.css({"height":"","bottom":""});}},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=(!this._animateOff)?o.animate:false,_set={};if(this._hasMultipleValues()){this.handles.each(function(i){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-
that._valueMin())*100;_set[that.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate);if(that.options.range===true){if(that.orientation==="horizontal"){if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate);}
if(i===1){that.range[animate?"animate":"css"]({width:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}else{if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({bottom:(valPercent)+"%"},o.animate);}
if(i===1){that.range[animate?"animate":"css"]({height:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}}
lastValPercent=valPercent;});}else{value=this.value();valueMin=this._valueMin();valueMax=this._valueMax();valPercent=(valueMax!==valueMin)?(value-valueMin)/(valueMax-valueMin)*100:0;_set[this.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate);if(oRange==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate);}
if(oRange==="max"&&this.orientation==="horizontal"){this.range.stop(1,1)[animate?"animate":"css"]({width:(100-valPercent)+"%"},o.animate);}
if(oRange==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate);}
if(oRange==="max"&&this.orientation==="vertical"){this.range.stop(1,1)[animate?"animate":"css"]({height:(100-valPercent)+"%"},o.animate);}}},_handleEvents:{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:event.preventDefault();if(!this._keySliding){this._keySliding=true;this._addClass($(event.target),null,"ui-state-active");allowed=this._start(event,index);if(allowed===false){return;}}
break;}
step=this.options.step;if(this._hasMultipleValues()){curVal=newVal=this.values(index);}else{curVal=newVal=this.value();}
switch(event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+((this._valueMax()-this._valueMin())/this.numPages));break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-((this._valueMax()-this._valueMin())/this.numPages));break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax()){return;}
newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin()){return;}
newVal=this._trimAlignValue(curVal-step);break;}
this._slide(event,index,newVal);},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(event,index);this._change(event,index);this._removeClass($(event.target),null,"ui-state-active");}}}});var widgetsSortable=$.widget("ui.sortable",$.ui.mouse,{version:"1.13.2",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(x,reference,size){return(x>=reference)&&(x<(reference+size));},_isFloating:function(item){return(/left|right/).test(item.css("float"))||(/inline|table-cell/).test(item.css("display"));},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true;},_setOption:function(key,value){this._super(key,value);if(key==="handle"){this._setHandleClassName();}},_setHandleClassName:function(){var that=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");$.each(this.items,function(){that._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle");});},_destroy:function(){this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--){this.items[i].item.removeData(this.widgetName+"-item");}
return this;},_mouseCapture:function(event,overrideHandle){var currentItem=null,validHandle=false,that=this;if(this.reverting){return false;}
if(this.options.disabled||this.options.type==="static"){return false;}
this._refreshItems(event);$(event.target).parents().each(function(){if($.data(this,that.widgetName+"-item")===that){currentItem=$(this);return false;}});if($.data(event.target,that.widgetName+"-item")===that){currentItem=$(event.target);}
if(!currentItem){return false;}
if(this.options.handle&&!overrideHandle){$(this.options.handle,currentItem).find("*").addBack().each(function(){if(this===event.target){validHandle=true;}});if(!validHandle){return false;}}
this.currentItem=currentItem;this._removeCurrentsFromItems();return true;},_mouseStart:function(event,overrideHandle,noActivation){var i,body,o=this.options;this.currentContainer=this;this.refreshPositions();this.appendTo=$(o.appendTo!=="parent"?o.appendTo:this.currentItem.parent());this.helper=this._createHelper(event);this._cacheHelperProportions();this._cacheMargins();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");if(o.cursorAt){this._adjustOffsetFromHelper(o.cursorAt);}
this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide();}
this._createPlaceholder();this.scrollParent=this.placeholder.scrollParent();$.extend(this.offset,{parent:this._getParentOffset()});if(o.containment){this._setContainment();}
if(o.cursor&&o.cursor!=="auto"){body=this.document.find("body");this.storedCursor=body.css("cursor");body.css("cursor",o.cursor);this.storedStylesheet=$("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(body);}
if(o.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex");}
this.helper.css("zIndex",o.zIndex);}
if(o.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity");}
this.helper.css("opacity",o.opacity);}
if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset();}
this._trigger("start",event,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions();}
if(!noActivation){for(i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("activate",event,this._uiHash(this));}}
if($.ui.ddmanager){$.ui.ddmanager.current=this;}
if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}
this.dragging=true;this._addClass(this.helper,"ui-sortable-helper");if(!this.helper.parent().is(this.appendTo)){this.helper.detach().appendTo(this.appendTo);this.offset.parent=this._getParentOffset();}
this.position=this.originalPosition=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute");this._mouseDrag(event);return true;},_scroll:function(event){var o=this.options,scrolled=false;if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-
event.pageY<o.scrollSensitivity){this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed;}else if(event.pageY-this.overflowOffset.top<o.scrollSensitivity){this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed;}
if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-
event.pageX<o.scrollSensitivity){this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed;}else if(event.pageX-this.overflowOffset.left<o.scrollSensitivity){this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed;}}else{if(event.pageY-this.document.scrollTop()<o.scrollSensitivity){scrolled=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed);}else if(this.window.height()-(event.pageY-this.document.scrollTop())<o.scrollSensitivity){scrolled=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed);}
if(event.pageX-this.document.scrollLeft()<o.scrollSensitivity){scrolled=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed);}else if(this.window.width()-(event.pageX-this.document.scrollLeft())<o.scrollSensitivity){scrolled=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed);}}
return scrolled;},_mouseDrag:function(event){var i,item,itemElement,intersection,o=this.options;this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px";}
if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px";}
if(o.scroll){if(this._scroll(event)!==false){this._refreshItemPositions(true);if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}}}
this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()};for(i=this.items.length-1;i>=0;i--){item=this.items[i];itemElement=item.item[0];intersection=this._intersectsWithPointer(item);if(!intersection){continue;}
if(item.instance!==this.currentContainer){continue;}
if(itemElement!==this.currentItem[0]&&this.placeholder[intersection===1?"next":"prev"]()[0]!==itemElement&&!$.contains(this.placeholder[0],itemElement)&&(this.options.type==="semi-dynamic"?!$.contains(this.element[0],itemElement):true)){this.direction=intersection===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(item)){this._rearrange(event,item);}else{break;}
this._trigger("change",event,this._uiHash());break;}}
this._contactContainers(event);if($.ui.ddmanager){$.ui.ddmanager.drag(this,event);}
this._trigger("sort",event,this._uiHash());this.lastPositionAbs=this.positionAbs;return false;},_mouseStop:function(event,noPropagation){if(!event){return;}
if($.ui.ddmanager&&!this.options.dropBehaviour){$.ui.ddmanager.drop(this,event);}
if(this.options.revert){var that=this,cur=this.placeholder.offset(),axis=this.options.axis,animation={};if(!axis||axis==="x"){animation.left=cur.left-this.offset.parent.left-this.margins.left+
(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft);}
if(!axis||axis==="y"){animation.top=cur.top-this.offset.parent.top-this.margins.top+
(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop);}
this.reverting=true;$(this.helper).animate(animation,parseInt(this.options.revert,10)||500,function(){that._clear(event);});}else{this._clear(event,noPropagation);}
return false;},cancel:function(){if(this.dragging){this._mouseUp(new $.Event("mouseup",{target:null}));if(this.options.helper==="original"){this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper");}else{this.currentItem.show();}
for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("deactivate",null,this._uiHash(this));if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",null,this._uiHash(this));this.containers[i].containerCache.over=0;}}}
if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0]);}
if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove();}
$.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){$(this.domPosition.prev).after(this.currentItem);}else{$(this.domPosition.parent).prepend(this.currentItem);}}
return this;},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];o=o||{};$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||(/(.+)[\-=_](.+)/));if(res){str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]));}});if(!str.length&&o.key){str.push(o.key+"=");}
return str.join("&");},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];o=o||{};items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"");});return ret;},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElementHeight=(this.options.axis==="x")||((y1+dyClick)>t&&(y1+dyClick)<b),isOverElementWidth=(this.options.axis==="y")||((x1+dxClick)>l&&(x1+dxClick)<r),isOverElement=isOverElementHeight&&isOverElementWidth;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"])){return isOverElement;}else{return(l<x1+(this.helperProportions.width/2)&&x2-(this.helperProportions.width/2)<r&&t<y1+(this.helperProportions.height/2)&&y2-(this.helperProportions.height/2)<b);}},_intersectsWithPointer:function(item){var verticalDirection,horizontalDirection,isOverElementHeight=(this.options.axis==="x")||this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth=(this.options.axis==="y")||this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth;if(!isOverElement){return false;}
verticalDirection=this.dragDirection.vertical;horizontalDirection=this.dragDirection.horizontal;return this.floating?((horizontalDirection==="right"||verticalDirection==="down")?2:1):(verticalDirection&&(verticalDirection==="down"?2:1));},_intersectsWithSides:function(item){var isOverBottomHalf=this._isOverAxis(this.positionAbs.top+
this.offset.click.top,item.top+(item.height/2),item.height),isOverRightHalf=this._isOverAxis(this.positionAbs.left+
this.offset.click.left,item.left+(item.width/2),item.width),verticalDirection=this.dragDirection.vertical,horizontalDirection=this.dragDirection.horizontal;if(this.floating&&horizontalDirection){return((horizontalDirection==="right"&&isOverRightHalf)||(horizontalDirection==="left"&&!isOverRightHalf));}else{return verticalDirection&&((verticalDirection==="down"&&isOverBottomHalf)||(verticalDirection==="up"&&!isOverBottomHalf));}},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return delta!==0&&(delta>0?"down":"up");},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return delta!==0&&(delta>0?"right":"left");},refresh:function(event){this._refreshItems(event);this._setHandleClassName();this.refreshPositions();return this;},_connectWith:function(){var options=this.options;return options.connectWith.constructor===String?[options.connectWith]:options.connectWith;},_getItemsAsjQuery:function(connected){var i,j,cur,inst,items=[],queries=[],connectWith=this._connectWith();if(connectWith&&connected){for(i=connectWith.length-1;i>=0;i--){cur=$(connectWith[i],this.document[0]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);if(inst&&inst!==this&&!inst.options.disabled){queries.push([typeof inst.options.items==="function"?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst]);}}}}
queries.push([typeof this.options.items==="function"?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function addItems(){items.push(this);}
for(i=queries.length-1;i>=0;i--){queries[i][0].each(addItems);}
return $(items);},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,function(item){for(var j=0;j<list.length;j++){if(list[j]===item.item[0]){return false;}}
return true;});},_refreshItems:function(event){this.items=[];this.containers=[this];var i,j,cur,inst,targetData,_queries,item,queriesLength,items=this.items,queries=[[typeof this.options.items==="function"?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready){for(i=connectWith.length-1;i>=0;i--){cur=$(connectWith[i],this.document[0]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);if(inst&&inst!==this&&!inst.options.disabled){queries.push([typeof inst.options.items==="function"?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]);this.containers.push(inst);}}}}
for(i=queries.length-1;i>=0;i--){targetData=queries[i][1];_queries=queries[i][0];for(j=0,queriesLength=_queries.length;j<queriesLength;j++){item=$(_queries[j]);item.data(this.widgetName+"-item",targetData);items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0});}}},_refreshItemPositions:function(fast){var i,item,t,p;for(i=this.items.length-1;i>=0;i--){item=this.items[i];if(this.currentContainer&&item.instance!==this.currentContainer&&item.item[0]!==this.currentItem[0]){continue;}
t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item;if(!fast){item.width=t.outerWidth();item.height=t.outerHeight();}
p=t.offset();item.left=p.left;item.top=p.top;}},refreshPositions:function(fast){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):false;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset();}
this._refreshItemPositions(fast);var i,p;if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this);}else{for(i=this.containers.length-1;i>=0;i--){p=this.containers[i].element.offset();this.containers[i].containerCache.left=p.left;this.containers[i].containerCache.top=p.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight();}}
return this;},_createPlaceholder:function(that){that=that||this;var className,nodeName,o=that.options;if(!o.placeholder||o.placeholder.constructor===String){className=o.placeholder;nodeName=that.currentItem[0].nodeName.toLowerCase();o.placeholder={element:function(){var element=$("<"+nodeName+">",that.document[0]);that._addClass(element,"ui-sortable-placeholder",className||that.currentItem[0].className)._removeClass(element,"ui-sortable-helper");if(nodeName==="tbody"){that._createTrPlaceholder(that.currentItem.find("tr").eq(0),$("<tr>",that.document[0]).appendTo(element));}else if(nodeName==="tr"){that._createTrPlaceholder(that.currentItem,element);}else if(nodeName==="img"){element.attr("src",that.currentItem.attr("src"));}
if(!className){element.css("visibility","hidden");}
return element;},update:function(container,p){if(className&&!o.forcePlaceholderSize){return;}
if(!p.height()||(o.forcePlaceholderSize&&(nodeName==="tbody"||nodeName==="tr"))){p.height(that.currentItem.innerHeight()-
parseInt(that.currentItem.css("paddingTop")||0,10)-
parseInt(that.currentItem.css("paddingBottom")||0,10));}
if(!p.width()){p.width(that.currentItem.innerWidth()-
parseInt(that.currentItem.css("paddingLeft")||0,10)-
parseInt(that.currentItem.css("paddingRight")||0,10));}}};}
that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem));that.currentItem.after(that.placeholder);o.placeholder.update(that,that.placeholder);},_createTrPlaceholder:function(sourceTr,targetTr){var that=this;sourceTr.children().each(function(){$("<td>&#160;</td>",that.document[0]).attr("colspan",$(this).attr("colspan")||1).appendTo(targetTr);});},_contactContainers:function(event){var i,j,dist,itemWithLeastDistance,posProperty,sizeProperty,cur,nearBottom,floating,axis,innermostContainer=null,innermostIndex=null;for(i=this.containers.length-1;i>=0;i--){if($.contains(this.currentItem[0],this.containers[i].element[0])){continue;}
if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0])){continue;}
innermostContainer=this.containers[i];innermostIndex=i;}else{if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",event,this._uiHash(this));this.containers[i].containerCache.over=0;}}}
if(!innermostContainer){return;}
if(this.containers.length===1){if(!this.containers[innermostIndex].containerCache.over){this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}}else{dist=10000;itemWithLeastDistance=null;floating=innermostContainer.floating||this._isFloating(this.currentItem);posProperty=floating?"left":"top";sizeProperty=floating?"width":"height";axis=floating?"pageX":"pageY";for(j=this.items.length-1;j>=0;j--){if(!$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0])){continue;}
if(this.items[j].item[0]===this.currentItem[0]){continue;}
cur=this.items[j].item.offset()[posProperty];nearBottom=false;if(event[axis]-cur>this.items[j][sizeProperty]/2){nearBottom=true;}
if(Math.abs(event[axis]-cur)<dist){dist=Math.abs(event[axis]-cur);itemWithLeastDistance=this.items[j];this.direction=nearBottom?"up":"down";}}
if(!itemWithLeastDistance&&!this.options.dropOnEmpty){return;}
if(this.currentContainer===this.containers[innermostIndex]){if(!this.currentContainer.containerCache.over){this.containers[innermostIndex]._trigger("over",event,this._uiHash());this.currentContainer.containerCache.over=1;}
return;}
if(itemWithLeastDistance){this._rearrange(event,itemWithLeastDistance,null,true);}else{this._rearrange(event,null,this.containers[innermostIndex].element,true);}
this._trigger("change",event,this._uiHash());this.containers[innermostIndex]._trigger("change",event,this._uiHash(this));this.currentContainer=this.containers[innermostIndex];this.options.placeholder.update(this.currentContainer,this.placeholder);this.scrollParent=this.placeholder.scrollParent();if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset();}
this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}},_createHelper:function(event){var o=this.options,helper=typeof o.helper==="function"?$(o.helper.apply(this.element[0],[event,this.currentItem])):(o.helper==="clone"?this.currentItem.clone():this.currentItem);if(!helper.parents("body").length){this.appendTo[0].appendChild(helper[0]);}
if(helper[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};}
if(!helper[0].style.width||o.forceHelperSize){helper.width(this.currentItem.width());}
if(!helper[0].style.height||o.forceHelperSize){helper.height(this.currentItem.height());}
return helper;},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string"){obj=obj.split(" ");}
if(Array.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}
if("left"in obj){this.offset.click.left=obj.left+this.margins.left;}
if("right"in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}
if("top"in obj){this.offset.click.top=obj.top+this.margins.top;}
if("bottom"in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}
if(this.offsetParent[0]===this.document[0].body||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&$.ui.ie)){po={top:0,left:0};}
return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+
this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+
this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var ce,co,over,o=this.options;if(o.containment==="parent"){o.containment=this.helper[0].parentNode;}
if(o.containment==="document"||o.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,o.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(o.containment==="document"?(this.document.height()||document.body.parentNode.scrollHeight):this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];}
if(!(/^(document|window|parent)$/).test(o.containment)){ce=$(o.containment)[0];co=$(o.containment).offset();over=($(ce).css("overflow")!=="hidden");this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+
(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+
(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-
(parseInt($(ce).css("borderLeftWidth"),10)||0)-
(parseInt($(ce).css("paddingRight"),10)||0)-
this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-
(parseInt($(ce).css("borderTopWidth"),10)||0)-
(parseInt($(ce).css("paddingBottom"),10)||0)-
this.helperProportions.height-this.margins.top];}},_convertPositionTo:function(d,pos){if(!pos){pos=this.position;}
var mod=d==="absolute"?1:-1,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);return{top:(pos.top+
this.offset.relative.top*mod+
this.offset.parent.top*mod-
((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop()))*mod)),left:(pos.left+
this.offset.relative.left*mod+
this.offset.parent.left*mod-
((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod))};},_generatePosition:function(event){var top,left,o=this.options,pageX=event.pageX,pageY=event.pageY,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset();}
if(this.originalPosition){if(this.containment){if(event.pageX-this.offset.click.left<this.containment[0]){pageX=this.containment[0]+this.offset.click.left;}
if(event.pageY-this.offset.click.top<this.containment[1]){pageY=this.containment[1]+this.offset.click.top;}
if(event.pageX-this.offset.click.left>this.containment[2]){pageX=this.containment[2]+this.offset.click.left;}
if(event.pageY-this.offset.click.top>this.containment[3]){pageY=this.containment[3]+this.offset.click.top;}}
if(o.grid){top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];pageY=this.containment?((top-this.offset.click.top>=this.containment[1]&&top-this.offset.click.top<=this.containment[3])?top:((top-this.offset.click.top>=this.containment[1])?top-o.grid[1]:top+o.grid[1])):top;left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0];pageX=this.containment?((left-this.offset.click.left>=this.containment[0]&&left-this.offset.click.left<=this.containment[2])?left:((left-this.offset.click.left>=this.containment[0])?left-o.grid[0]:left+o.grid[0])):left;}}
return{top:(pageY-
this.offset.click.top-
this.offset.relative.top-
this.offset.parent.top+
((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop())))),left:(pageX-
this.offset.click.left-
this.offset.relative.left-
this.offset.parent.left+
((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())))};},_rearrange:function(event,i,a,hardRefresh){if(a){a[0].appendChild(this.placeholder[0]);}else{i.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction==="down"?i.item[0]:i.item[0].nextSibling));}
this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){if(counter===this.counter){this.refreshPositions(!hardRefresh);}});},_clear:function(event,noPropagation){this.reverting=false;var i,delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem);}
this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS){if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static"){this._storedCSS[i]="";}}
this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper");}else{this.currentItem.show();}
if(this.fromOutside&&!noPropagation){delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside));});}
if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!noPropagation){delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash());});}
if(this!==this.currentContainer){if(!noPropagation){delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash());});delayedTriggers.push((function(c){return function(event){c._trigger("receive",event,this._uiHash(this));};}).call(this,this.currentContainer));delayedTriggers.push((function(c){return function(event){c._trigger("update",event,this._uiHash(this));};}).call(this,this.currentContainer));}}
function delayEvent(type,instance,container){return function(event){container._trigger(type,event,instance._uiHash(instance));};}
for(i=this.containers.length-1;i>=0;i--){if(!noPropagation){delayedTriggers.push(delayEvent("deactivate",this,this.containers[i]));}
if(this.containers[i].containerCache.over){delayedTriggers.push(delayEvent("out",this,this.containers[i]));this.containers[i].containerCache.over=0;}}
if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove();}
if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity);}
if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex);}
this.dragging=false;if(!noPropagation){this._trigger("beforeStop",event,this._uiHash());}
this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove();}
this.helper=null;}
if(!noPropagation){for(i=0;i<delayedTriggers.length;i++){delayedTriggers[i].call(this,event);}
this._trigger("stop",event,this._uiHash());}
this.fromOutside=false;return!this.cancelHelperRemoval;},_trigger:function(){if($.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel();}},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null};}});function spinnerModifier(fn){return function(){var previous=this.element.val();fn.apply(this,arguments);this._refresh();if(previous!==this.element.val()){this._trigger("change");}};}
$.widget("ui.spinner",{version:"1.13.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:true,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);if(this.value()!==""){this._value(this.element.val(),true);}
this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete");}});},_getCreateOptions:function(){var options=this._super();var element=this.element;$.each(["min","max","step"],function(i,option){var value=element.attr(option);if(value!=null&&value.length){options[option]=value;}});return options;},_events:{keydown:function(event){if(this._start(event)&&this._keydown(event)){event.preventDefault();}},keyup:"_stop",focus:function(){this.previous=this.element.val();},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return;}
this._stop();this._refresh();if(this.previous!==this.element.val()){this._trigger("change",event);}},mousewheel:function(event,delta){var activeElement=$.ui.safeActiveElement(this.document[0]);var isActive=this.element[0]===activeElement;if(!isActive||!delta){return;}
if(!this.spinning&&!this._start(event)){return false;}
this._spin((delta>0?1:-1)*this.options.step,event);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){if(this.spinning){this._stop(event);}},100);event.preventDefault();},"mousedown .ui-spinner-button":function(event){var previous;previous=this.element[0]===$.ui.safeActiveElement(this.document[0])?this.previous:this.element.val();function checkFocus(){var isActive=this.element[0]===$.ui.safeActiveElement(this.document[0]);if(!isActive){this.element.trigger("focus");this.previous=previous;this._delay(function(){this.previous=previous;});}}
event.preventDefault();checkFocus.call(this);this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;checkFocus.call(this);});if(this._start(event)===false){return;}
this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event);},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(event){if(!$(event.currentTarget).hasClass("ui-state-active")){return;}
if(this._start(event)===false){return false;}
this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event);},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>");},_draw:function(){this._enhance();this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content");this._addClass("ui-spinner-input");this.element.attr("role","spinbutton");this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",true).button({classes:{"ui-button":""}});this._removeClass(this.buttons,"ui-corner-all");this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up");this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down");this.buttons.first().button({"icon":this.options.icons.up,"showLabel":false});this.buttons.last().button({"icon":this.options.icons.down,"showLabel":false});if(this.buttons.height()>Math.ceil(this.uiSpinner.height()*0.5)&&this.uiSpinner.height()>0){this.uiSpinner.height(this.uiSpinner.height());}},_keydown:function(event){var options=this.options,keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.UP:this._repeat(null,1,event);return true;case keyCode.DOWN:this._repeat(null,-1,event);return true;case keyCode.PAGE_UP:this._repeat(null,options.page,event);return true;case keyCode.PAGE_DOWN:this._repeat(null,-options.page,event);return true;}
return false;},_start:function(event){if(!this.spinning&&this._trigger("start",event)===false){return false;}
if(!this.counter){this.counter=1;}
this.spinning=true;return true;},_repeat:function(i,steps,event){i=i||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,steps,event);},i);this._spin(steps*this.options.step,event);},_spin:function(step,event){var value=this.value()||0;if(!this.counter){this.counter=1;}
value=this._adjustValue(value+step*this._increment(this.counter));if(!this.spinning||this._trigger("spin",event,{value:value})!==false){this._value(value);this.counter++;}},_increment:function(i){var incremental=this.options.incremental;if(incremental){return typeof incremental==="function"?incremental(i):Math.floor(i*i*i/50000-i*i/500+17*i/200+1);}
return 1;},_precision:function(){var precision=this._precisionOf(this.options.step);if(this.options.min!==null){precision=Math.max(precision,this._precisionOf(this.options.min));}
return precision;},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return decimal===-1?0:str.length-decimal-1;},_adjustValue:function(value){var base,aboveMin,options=this.options;base=options.min!==null?options.min:0;aboveMin=value-base;aboveMin=Math.round(aboveMin/options.step)*options.step;value=base+aboveMin;value=parseFloat(value.toFixed(this._precision()));if(options.max!==null&&value>options.max){return options.max;}
if(options.min!==null&&value<options.min){return options.min;}
return value;},_stop:function(event){if(!this.spinning){return;}
clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=false;this._trigger("stop",event);},_setOption:function(key,value){var prevValue,first,last;if(key==="culture"||key==="numberFormat"){prevValue=this._parse(this.element.val());this.options[key]=value;this.element.val(this._format(prevValue));return;}
if(key==="max"||key==="min"||key==="step"){if(typeof value==="string"){value=this._parse(value);}}
if(key==="icons"){first=this.buttons.first().find(".ui-icon");this._removeClass(first,null,this.options.icons.up);this._addClass(first,null,value.up);last=this.buttons.last().find(".ui-icon");this._removeClass(last,null,this.options.icons.down);this._addClass(last,null,value.down);}
this._super(key,value);},_setOptionDisabled:function(value){this._super(value);this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!value);this.element.prop("disabled",!!value);this.buttons.button(value?"disable":"enable");},_setOptions:spinnerModifier(function(options){this._super(options);}),_parse:function(val){if(typeof val==="string"&&val!==""){val=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(val,10,this.options.culture):+val;}
return val===""||isNaN(val)?null:val;},_format:function(value){if(value===""){return"";}
return window.Globalize&&this.options.numberFormat?Globalize.format(value,this.options.numberFormat,this.options.culture):value;},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())});},isValid:function(){var value=this.value();if(value===null){return false;}
return value===this._adjustValue(value);},_value:function(value,allowAny){var parsed;if(value!==""){parsed=this._parse(value);if(parsed!==null){if(!allowAny){parsed=this._adjustValue(parsed);}
value=this._format(parsed);}}
this.element.val(value);this._refresh();},_destroy:function(){this.element.prop("disabled",false).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow");this.uiSpinner.replaceWith(this.element);},stepUp:spinnerModifier(function(steps){this._stepUp(steps);}),_stepUp:function(steps){if(this._start()){this._spin((steps||1)*this.options.step);this._stop();}},stepDown:spinnerModifier(function(steps){this._stepDown(steps);}),_stepDown:function(steps){if(this._start()){this._spin((steps||1)*-this.options.step);this._stop();}},pageUp:spinnerModifier(function(pages){this._stepUp((pages||1)*this.options.page);}),pageDown:spinnerModifier(function(pages){this._stepDown((pages||1)*this.options.page);}),value:function(newVal){if(!arguments.length){return this._parse(this.element.val());}
spinnerModifier(this._value).call(this,newVal);},widget:function(){return this.uiSpinner;}});if($.uiBackCompat!==false){$.widget("ui.spinner",$.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());},_uiSpinnerHtml:function(){return"<span>";},_buttonHtml:function(){return"<a></a><a></a>";}});}
var widgetsSpinner=$.ui.spinner;$.widget("ui.tabs",{version:"1.13.2",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:false,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(function(){var rhash=/#.*$/;return function(anchor){var anchorUrl,locationUrl;anchorUrl=anchor.href.replace(rhash,"");locationUrl=location.href.replace(rhash,"");try{anchorUrl=decodeURIComponent(anchorUrl);}catch(error){}
try{locationUrl=decodeURIComponent(locationUrl);}catch(error){}
return anchor.hash.length>1&&anchorUrl===locationUrl;};})(),_create:function(){var that=this,options=this.options;this.running=false;this._addClass("ui-tabs","ui-widget ui-widget-content");this._toggleClass("ui-tabs-collapsible",null,options.collapsible);this._processTabs();options.active=this._initialActive();if(Array.isArray(options.disabled)){options.disabled=$.uniqueSort(options.disabled.concat($.map(this.tabs.filter(".ui-state-disabled"),function(li){return that.tabs.index(li);}))).sort();}
if(this.options.active!==false&&this.anchors.length){this.active=this._findActive(options.active);}else{this.active=$();}
this._refresh();if(this.active.length){this.load(options.active);}},_initialActive:function(){var active=this.options.active,collapsible=this.options.collapsible,locationHash=location.hash.substring(1);if(active===null){if(locationHash){this.tabs.each(function(i,tab){if($(tab).attr("aria-controls")===locationHash){active=i;return false;}});}
if(active===null){active=this.tabs.index(this.tabs.filter(".ui-tabs-active"));}
if(active===null||active===-1){active=this.tabs.length?0:false;}}
if(active!==false){active=this.tabs.index(this.tabs.eq(active));if(active===-1){active=collapsible?false:0;}}
if(!collapsible&&active===false&&this.anchors.length){active=0;}
return active;},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?$():this._getPanelForTab(this.active)};},_tabKeydown:function(event){var focusedTab=$($.ui.safeActiveElement(this.document[0])).closest("li"),selectedIndex=this.tabs.index(focusedTab),goingForward=true;if(this._handlePageNav(event)){return;}
switch(event.keyCode){case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:selectedIndex++;break;case $.ui.keyCode.UP:case $.ui.keyCode.LEFT:goingForward=false;selectedIndex--;break;case $.ui.keyCode.END:selectedIndex=this.anchors.length-1;break;case $.ui.keyCode.HOME:selectedIndex=0;break;case $.ui.keyCode.SPACE:event.preventDefault();clearTimeout(this.activating);this._activate(selectedIndex);return;case $.ui.keyCode.ENTER:event.preventDefault();clearTimeout(this.activating);this._activate(selectedIndex===this.options.active?false:selectedIndex);return;default:return;}
event.preventDefault();clearTimeout(this.activating);selectedIndex=this._focusNextTab(selectedIndex,goingForward);if(!event.ctrlKey&&!event.metaKey){focusedTab.attr("aria-selected","false");this.tabs.eq(selectedIndex).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",selectedIndex);},this.delay);}},_panelKeydown:function(event){if(this._handlePageNav(event)){return;}
if(event.ctrlKey&&event.keyCode===$.ui.keyCode.UP){event.preventDefault();this.active.trigger("focus");}},_handlePageNav:function(event){if(event.altKey&&event.keyCode===$.ui.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true;}
if(event.altKey&&event.keyCode===$.ui.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true;}},_findNextTab:function(index,goingForward){var lastTabIndex=this.tabs.length-1;function constrain(){if(index>lastTabIndex){index=0;}
if(index<0){index=lastTabIndex;}
return index;}
while($.inArray(constrain(),this.options.disabled)!==-1){index=goingForward?index+1:index-1;}
return index;},_focusNextTab:function(index,goingForward){index=this._findNextTab(index,goingForward);this.tabs.eq(index).trigger("focus");return index;},_setOption:function(key,value){if(key==="active"){this._activate(value);return;}
this._super(key,value);if(key==="collapsible"){this._toggleClass("ui-tabs-collapsible",null,value);if(!value&&this.options.active===false){this._activate(0);}}
if(key==="event"){this._setupEvents(value);}
if(key==="heightStyle"){this._setupHeightStyle(value);}},_sanitizeSelector:function(hash){return hash?hash.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):"";},refresh:function(){var options=this.options,lis=this.tablist.children(":has(a[href])");options.disabled=$.map(lis.filter(".ui-state-disabled"),function(tab){return lis.index(tab);});this._processTabs();if(options.active===false||!this.anchors.length){options.active=false;this.active=$();}else if(this.active.length&&!$.contains(this.tablist[0],this.active[0])){if(this.tabs.length===options.disabled.length){options.active=false;this.active=$();}else{this._activate(this._findNextTab(Math.max(0,options.active-1),false));}}else{options.active=this.tabs.index(this.active);}
this._refresh();},_refresh:function(){this._setOptionDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});if(!this.active.length){this.tabs.eq(0).attr("tabIndex",0);}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});this._addClass(this.active,"ui-tabs-active","ui-state-active");this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"});}},_processTabs:function(){var that=this,prevTabs=this.tabs,prevAnchors=this.anchors,prevPanels=this.panels;this.tablist=this._getList().attr("role","tablist");this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header");this.tablist.on("mousedown"+this.eventNamespace,"> li",function(event){if($(this).is(".ui-state-disabled")){event.preventDefault();}}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){if($(this).closest("li").is(".ui-state-disabled")){this.blur();}});this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1});this._addClass(this.tabs,"ui-tabs-tab","ui-state-default");this.anchors=this.tabs.map(function(){return $("a",this)[0];}).attr({tabIndex:-1});this._addClass(this.anchors,"ui-tabs-anchor");this.panels=$();this.anchors.each(function(i,anchor){var selector,panel,panelId,anchorId=$(anchor).uniqueId().attr("id"),tab=$(anchor).closest("li"),originalAriaControls=tab.attr("aria-controls");if(that._isLocal(anchor)){selector=anchor.hash;panelId=selector.substring(1);panel=that.element.find(that._sanitizeSelector(selector));}else{panelId=tab.attr("aria-controls")||$({}).uniqueId()[0].id;selector="#"+panelId;panel=that.element.find(selector);if(!panel.length){panel=that._createPanel(panelId);panel.insertAfter(that.panels[i-1]||that.tablist);}
panel.attr("aria-live","polite");}
if(panel.length){that.panels=that.panels.add(panel);}
if(originalAriaControls){tab.data("ui-tabs-aria-controls",originalAriaControls);}
tab.attr({"aria-controls":panelId,"aria-labelledby":anchorId});panel.attr("aria-labelledby",anchorId);});this.panels.attr("role","tabpanel");this._addClass(this.panels,"ui-tabs-panel","ui-widget-content");if(prevTabs){this._off(prevTabs.not(this.tabs));this._off(prevAnchors.not(this.anchors));this._off(prevPanels.not(this.panels));}},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0);},_createPanel:function(id){return $("<div>").attr("id",id).data("ui-tabs-destroy",true);},_setOptionDisabled:function(disabled){var currentItem,li,i;if(Array.isArray(disabled)){if(!disabled.length){disabled=false;}else if(disabled.length===this.anchors.length){disabled=true;}}
for(i=0;(li=this.tabs[i]);i++){currentItem=$(li);if(disabled===true||$.inArray(i,disabled)!==-1){currentItem.attr("aria-disabled","true");this._addClass(currentItem,null,"ui-state-disabled");}else{currentItem.removeAttr("aria-disabled");this._removeClass(currentItem,null,"ui-state-disabled");}}
this.options.disabled=disabled;this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,disabled===true);},_setupEvents:function(event){var events={};if(event){$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler";});}
this._off(this.anchors.add(this.tabs).add(this.panels));this._on(true,this.anchors,{click:function(event){event.preventDefault();}});this._on(this.anchors,events);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs);},_setupHeightStyle:function(heightStyle){var maxHeight,parent=this.element.parent();if(heightStyle==="fill"){maxHeight=parent.height();maxHeight-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed"){return;}
maxHeight-=elem.outerHeight(true);});this.element.children().not(this.panels).each(function(){maxHeight-=$(this).outerHeight(true);});this.panels.each(function(){$(this).height(Math.max(0,maxHeight-
$(this).innerHeight()+$(this).height()));}).css("overflow","auto");}else if(heightStyle==="auto"){maxHeight=0;this.panels.each(function(){maxHeight=Math.max(maxHeight,$(this).height("").height());}).height(maxHeight);}},_eventHandler:function(event){var options=this.options,active=this.active,anchor=$(event.currentTarget),tab=anchor.closest("li"),clickedIsActive=tab[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():this._getPanelForTab(tab),toHide=!active.length?$():this._getPanelForTab(active),eventData={oldTab:active,oldPanel:toHide,newTab:collapsing?$():tab,newPanel:toShow};event.preventDefault();if(tab.hasClass("ui-state-disabled")||tab.hasClass("ui-tabs-loading")||this.running||(clickedIsActive&&!options.collapsible)||(this._trigger("beforeActivate",event,eventData)===false)){return;}
options.active=collapsing?false:this.tabs.index(tab);this.active=clickedIsActive?$():tab;if(this.xhr){this.xhr.abort();}
if(!toHide.length&&!toShow.length){$.error("jQuery UI Tabs: Mismatching fragment identifier.");}
if(toShow.length){this.load(this.tabs.index(tab),event);}
this._toggle(event,eventData);},_toggle:function(event,eventData){var that=this,toShow=eventData.newPanel,toHide=eventData.oldPanel;this.running=true;function complete(){that.running=false;that._trigger("activate",event,eventData);}
function show(){that._addClass(eventData.newTab.closest("li"),"ui-tabs-active","ui-state-active");if(toShow.length&&that.options.show){that._show(toShow,that.options.show,complete);}else{toShow.show();complete();}}
if(toHide.length&&this.options.hide){this._hide(toHide,this.options.hide,function(){that._removeClass(eventData.oldTab.closest("li"),"ui-tabs-active","ui-state-active");show();});}else{this._removeClass(eventData.oldTab.closest("li"),"ui-tabs-active","ui-state-active");toHide.hide();show();}
toHide.attr("aria-hidden","true");eventData.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});if(toShow.length&&toHide.length){eventData.oldTab.attr("tabIndex",-1);}else if(toShow.length){this.tabs.filter(function(){return $(this).attr("tabIndex")===0;}).attr("tabIndex",-1);}
toShow.attr("aria-hidden","false");eventData.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});},_activate:function(index){var anchor,active=this._findActive(index);if(active[0]===this.active[0]){return;}
if(!active.length){active=this.active;}
anchor=active.find(".ui-tabs-anchor")[0];this._eventHandler({target:anchor,currentTarget:anchor,preventDefault:$.noop});},_findActive:function(index){return index===false?$():this.tabs.eq(index);},_getIndex:function(index){if(typeof index==="string"){index=this.anchors.index(this.anchors.filter("[href$='"+
$.escapeSelector(index)+"']"));}
return index;},_destroy:function(){if(this.xhr){this.xhr.abort();}
this.tablist.removeAttr("role").off(this.eventNamespace);this.anchors.removeAttr("role tabIndex").removeUniqueId();this.tabs.add(this.panels).each(function(){if($.data(this,"ui-tabs-destroy")){$(this).remove();}else{$(this).removeAttr("role tabIndex "+"aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded");}});this.tabs.each(function(){var li=$(this),prev=li.data("ui-tabs-aria-controls");if(prev){li.attr("aria-controls",prev).removeData("ui-tabs-aria-controls");}else{li.removeAttr("aria-controls");}});this.panels.show();if(this.options.heightStyle!=="content"){this.panels.css("height","");}},enable:function(index){var disabled=this.options.disabled;if(disabled===false){return;}
if(index===undefined){disabled=false;}else{index=this._getIndex(index);if(Array.isArray(disabled)){disabled=$.map(disabled,function(num){return num!==index?num:null;});}else{disabled=$.map(this.tabs,function(li,num){return num!==index?num:null;});}}
this._setOptionDisabled(disabled);},disable:function(index){var disabled=this.options.disabled;if(disabled===true){return;}
if(index===undefined){disabled=true;}else{index=this._getIndex(index);if($.inArray(index,disabled)!==-1){return;}
if(Array.isArray(disabled)){disabled=$.merge([index],disabled).sort();}else{disabled=[index];}}
this._setOptionDisabled(disabled);},load:function(index,event){index=this._getIndex(index);var that=this,tab=this.tabs.eq(index),anchor=tab.find(".ui-tabs-anchor"),panel=this._getPanelForTab(tab),eventData={tab:tab,panel:panel},complete=function(jqXHR,status){if(status==="abort"){that.panels.stop(false,true);}
that._removeClass(tab,"ui-tabs-loading");panel.removeAttr("aria-busy");if(jqXHR===that.xhr){delete that.xhr;}};if(this._isLocal(anchor[0])){return;}
this.xhr=$.ajax(this._ajaxSettings(anchor,event,eventData));if(this.xhr&&this.xhr.statusText!=="canceled"){this._addClass(tab,"ui-tabs-loading");panel.attr("aria-busy","true");this.xhr.done(function(response,status,jqXHR){setTimeout(function(){panel.html(response);that._trigger("load",event,eventData);complete(jqXHR,status);},1);}).fail(function(jqXHR,status){setTimeout(function(){complete(jqXHR,status);},1);});}},_ajaxSettings:function(anchor,event,eventData){var that=this;return{url:anchor.attr("href").replace(/#.*$/,""),beforeSend:function(jqXHR,settings){return that._trigger("beforeLoad",event,$.extend({jqXHR:jqXHR,ajaxSettings:settings},eventData));}};},_getPanelForTab:function(tab){var id=$(tab).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+id));}});if($.uiBackCompat!==false){$.widget("ui.tabs",$.ui.tabs,{_processTabs:function(){this._superApply(arguments);this._addClass(this.tabs,"ui-tab");}});}
var widgetsTabs=$.ui.tabs;$.widget("ui.tooltip",{version:"1.13.2",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var title=$(this).attr("title");return $("<a>").text(title).html();},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,track:false,close:null,open:null},_addDescribedBy:function(elem,id){var describedby=(elem.attr("aria-describedby")||"").split(/\s+/);describedby.push(id);elem.data("ui-tooltip-id",id).attr("aria-describedby",String.prototype.trim.call(describedby.join(" ")));},_removeDescribedBy:function(elem){var id=elem.data("ui-tooltip-id"),describedby=(elem.attr("aria-describedby")||"").split(/\s+/),index=$.inArray(id,describedby);if(index!==-1){describedby.splice(index,1);}
elem.removeData("ui-tooltip-id");describedby=String.prototype.trim.call(describedby.join(" "));if(describedby){elem.attr("aria-describedby",describedby);}else{elem.removeAttr("aria-describedby");}},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.liveRegion=$("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this.disabledTitles=$([]);},_setOption:function(key,value){var that=this;this._super(key,value);if(key==="content"){$.each(this.tooltips,function(id,tooltipData){that._updateContent(tooltipData.element);});}},_setOptionDisabled:function(value){this[value?"_disable":"_enable"]();},_disable:function(){var that=this;$.each(this.tooltips,function(id,tooltipData){var event=$.Event("blur");event.target=event.currentTarget=tooltipData.element[0];that.close(event,true);});this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var element=$(this);if(element.is("[title]")){return element.data("ui-tooltip-title",element.attr("title")).removeAttr("title");}}));},_enable:function(){this.disabledTitles.each(function(){var element=$(this);if(element.data("ui-tooltip-title")){element.attr("title",element.data("ui-tooltip-title"));}});this.disabledTitles=$([]);},open:function(event){var that=this,target=$(event?event.target:this.element).closest(this.options.items);if(!target.length||target.data("ui-tooltip-id")){return;}
if(target.attr("title")){target.data("ui-tooltip-title",target.attr("title"));}
target.data("ui-tooltip-open",true);if(event&&event.type==="mouseover"){target.parents().each(function(){var parent=$(this),blurEvent;if(parent.data("ui-tooltip-open")){blurEvent=$.Event("blur");blurEvent.target=blurEvent.currentTarget=this;that.close(blurEvent,true);}
if(parent.attr("title")){parent.uniqueId();that.parents[this.id]={element:this,title:parent.attr("title")};parent.attr("title","");}});}
this._registerCloseHandlers(event,target);this._updateContent(target,event);},_updateContent:function(target,event){var content,contentOption=this.options.content,that=this,eventType=event?event.type:null;if(typeof contentOption==="string"||contentOption.nodeType||contentOption.jquery){return this._open(event,target,contentOption);}
content=contentOption.call(target[0],function(response){that._delay(function(){if(!target.data("ui-tooltip-open")){return;}
if(event){event.type=eventType;}
this._open(event,target,response);});});if(content){this._open(event,target,content);}},_open:function(event,target,content){var tooltipData,tooltip,delayedShow,a11yContent,positionOption=$.extend({},this.options.position);if(!content){return;}
tooltipData=this._find(target);if(tooltipData){tooltipData.tooltip.find(".ui-tooltip-content").html(content);return;}
if(target.is("[title]")){if(event&&event.type==="mouseover"){target.attr("title","");}else{target.removeAttr("title");}}
tooltipData=this._tooltip(target);tooltip=tooltipData.tooltip;this._addDescribedBy(target,tooltip.attr("id"));tooltip.find(".ui-tooltip-content").html(content);this.liveRegion.children().hide();a11yContent=$("<div>").html(tooltip.find(".ui-tooltip-content").html());a11yContent.removeAttr("name").find("[name]").removeAttr("name");a11yContent.removeAttr("id").find("[id]").removeAttr("id");a11yContent.appendTo(this.liveRegion);function position(event){positionOption.of=event;if(tooltip.is(":hidden")){return;}
tooltip.position(positionOption);}
if(this.options.track&&event&&/^mouse/.test(event.type)){this._on(this.document,{mousemove:position});position(event);}else{tooltip.position($.extend({of:target},this.options.position));}
tooltip.hide();this._show(tooltip,this.options.show);if(this.options.track&&this.options.show&&this.options.show.delay){delayedShow=this.delayedShow=setInterval(function(){if(tooltip.is(":visible")){position(positionOption.of);clearInterval(delayedShow);}},13);}
this._trigger("open",event,{tooltip:tooltip});},_registerCloseHandlers:function(event,target){var events={keyup:function(event){if(event.keyCode===$.ui.keyCode.ESCAPE){var fakeEvent=$.Event(event);fakeEvent.currentTarget=target[0];this.close(fakeEvent,true);}}};if(target[0]!==this.element[0]){events.remove=function(){var targetElement=this._find(target);if(targetElement){this._removeTooltip(targetElement.tooltip);}};}
if(!event||event.type==="mouseover"){events.mouseleave="close";}
if(!event||event.type==="focusin"){events.focusout="close";}
this._on(true,target,events);},close:function(event){var tooltip,that=this,target=$(event?event.currentTarget:this.element),tooltipData=this._find(target);if(!tooltipData){target.removeData("ui-tooltip-open");return;}
tooltip=tooltipData.tooltip;if(tooltipData.closing){return;}
clearInterval(this.delayedShow);if(target.data("ui-tooltip-title")&&!target.attr("title")){target.attr("title",target.data("ui-tooltip-title"));}
this._removeDescribedBy(target);tooltipData.hiding=true;tooltip.stop(true);this._hide(tooltip,this.options.hide,function(){that._removeTooltip($(this));});target.removeData("ui-tooltip-open");this._off(target,"mouseleave focusout keyup");if(target[0]!==this.element[0]){this._off(target,"remove");}
this._off(this.document,"mousemove");if(event&&event.type==="mouseleave"){$.each(this.parents,function(id,parent){$(parent.element).attr("title",parent.title);delete that.parents[id];});}
tooltipData.closing=true;this._trigger("close",event,{tooltip:tooltip});if(!tooltipData.hiding){tooltipData.closing=false;}},_tooltip:function(element){var tooltip=$("<div>").attr("role","tooltip"),content=$("<div>").appendTo(tooltip),id=tooltip.uniqueId().attr("id");this._addClass(content,"ui-tooltip-content");this._addClass(tooltip,"ui-tooltip","ui-widget ui-widget-content");tooltip.appendTo(this._appendTo(element));return this.tooltips[id]={element:element,tooltip:tooltip};},_find:function(target){var id=target.data("ui-tooltip-id");return id?this.tooltips[id]:null;},_removeTooltip:function(tooltip){clearInterval(this.delayedShow);tooltip.remove();delete this.tooltips[tooltip.attr("id")];},_appendTo:function(target){var element=target.closest(".ui-front, dialog");if(!element.length){element=this.document[0].body;}
return element;},_destroy:function(){var that=this;$.each(this.tooltips,function(id,tooltipData){var event=$.Event("blur"),element=tooltipData.element;event.target=event.currentTarget=element[0];that.close(event,true);$("#"+id).remove();if(element.data("ui-tooltip-title")){if(!element.attr("title")){element.attr("title",element.data("ui-tooltip-title"));}
element.removeData("ui-tooltip-title");}});this.liveRegion.remove();}});if($.uiBackCompat!==false){$.widget("ui.tooltip",$.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var tooltipData=this._superApply(arguments);if(this.options.tooltipClass){tooltipData.tooltip.addClass(this.options.tooltipClass);}
return tooltipData;}});}
var widgetsTooltip=$.ui.tooltip;});if(typeof jQuery==='undefined'){throw new Error('Bootstrap\'s JavaScript requires jQuery')}
+function($){'use strict';var version=$.fn.jquery.split(' ')[0].split('.')
if((version[0]<2&&version[1]<9)||(version[0]==1&&version[1]==9&&version[2]<1)||(version[0]>3)){throw new Error('Bootstrap\'s JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4')}}(jQuery);+function($){'use strict';function transitionEnd(){var el=document.createElement('bootstrap')
var transEndEventNames={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'oTransitionEnd otransitionend',transition:'transitionend'}
for(var name in transEndEventNames){if(el.style[name]!==undefined){return{end:transEndEventNames[name]}}}
return false}
$.fn.emulateTransitionEnd=function(duration){var called=false
var $el=this
$(this).one('bsTransitionEnd',function(){called=true})
var callback=function(){if(!called)$($el).trigger($.support.transition.end)}
setTimeout(callback,duration)
return this}
$(function(){$.support.transition=transitionEnd()
if(!$.support.transition)return
$.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(e){if($(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}})}(jQuery);+function($){'use strict';var dismiss='[data-dismiss="alert"]'
var Alert=function(el){$(el).on('click',dismiss,this.close)}
Alert.VERSION='3.3.7'
Alert.TRANSITION_DURATION=150
Alert.prototype.close=function(e){var $this=$(this)
var selector=$this.attr('data-target')
if(!selector){selector=$this.attr('href')
selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,'')}
var $parent=$(selector==='#'?[]:selector)
if(e)e.preventDefault()
if(!$parent.length){$parent=$this.closest('.alert')}
$parent.trigger(e=$.Event('close.bs.alert'))
if(e.isDefaultPrevented())return
$parent.removeClass('in')
function removeElement(){$parent.detach().trigger('closed.bs.alert').remove()}
$.support.transition&&$parent.hasClass('fade')?$parent.one('bsTransitionEnd',removeElement).emulateTransitionEnd(Alert.TRANSITION_DURATION):removeElement()}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.alert')
if(!data)$this.data('bs.alert',(data=new Alert(this)))
if(typeof option=='string')data[option].call($this)})}
var old=$.fn.alert
$.fn.alert=Plugin
$.fn.alert.Constructor=Alert
$.fn.alert.noConflict=function(){$.fn.alert=old
return this}
$(document).on('click.bs.alert.data-api',dismiss,Alert.prototype.close)}(jQuery);+function($){'use strict';var Button=function(element,options){this.$element=$(element)
this.options=$.extend({},Button.DEFAULTS,options)
this.isLoading=false}
Button.VERSION='3.3.7'
Button.DEFAULTS={loadingText:'loading...'}
Button.prototype.setState=function(state){var d='disabled'
var $el=this.$element
var val=$el.is('input')?'val':'html'
var data=$el.data()
state+='Text'
if(data.resetText==null)$el.data('resetText',$el[val]())
setTimeout($.proxy(function(){$el[val](data[state]==null?this.options[state]:data[state])
if(state=='loadingText'){this.isLoading=true
$el.addClass(d).attr(d,d).prop(d,true)}else if(this.isLoading){this.isLoading=false
$el.removeClass(d).removeAttr(d).prop(d,false)}},this),0)}
Button.prototype.toggle=function(){var changed=true
var $parent=this.$element.closest('[data-toggle="buttons"]')
if($parent.length){var $input=this.$element.find('input')
if($input.prop('type')=='radio'){if($input.prop('checked'))changed=false
$parent.find('.active').removeClass('active')
this.$element.addClass('active')}else if($input.prop('type')=='checkbox'){if(($input.prop('checked'))!==this.$element.hasClass('active'))changed=false
this.$element.toggleClass('active')}
$input.prop('checked',this.$element.hasClass('active'))
if(changed)$input.trigger('change')}else{this.$element.attr('aria-pressed',!this.$element.hasClass('active'))
this.$element.toggleClass('active')}}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.button')
var options=typeof option=='object'&&option
if(!data)$this.data('bs.button',(data=new Button(this,options)))
if(option=='toggle')data.toggle()
else if(option)data.setState(option)})}
var old=$.fn.button
$.fn.button=Plugin
$.fn.button.Constructor=Button
$.fn.button.noConflict=function(){$.fn.button=old
return this}
$(document).on('click.bs.button.data-api','[data-toggle^="button"]',function(e){var $btn=$(e.target).closest('.btn')
Plugin.call($btn,'toggle')
if(!($(e.target).is('input[type="radio"], input[type="checkbox"]'))){e.preventDefault()
if($btn.is('input,button'))$btn.trigger('focus')
else $btn.find('input:visible,button:visible').first().trigger('focus')}}).on('focus.bs.button.data-api blur.bs.button.data-api','[data-toggle^="button"]',function(e){$(e.target).closest('.btn').toggleClass('focus',/^focus(in)?$/.test(e.type))})}(jQuery);+function($){'use strict';var Carousel=function(element,options){this.$element=$(element)
this.$indicators=this.$element.find('.carousel-indicators')
this.options=options
this.paused=null
this.sliding=null
this.interval=null
this.$active=null
this.$items=null
this.options.keyboard&&this.$element.on('keydown.bs.carousel',$.proxy(this.keydown,this))
this.options.pause=='hover'&&!('ontouchstart'in document.documentElement)&&this.$element.on('mouseenter.bs.carousel',$.proxy(this.pause,this)).on('mouseleave.bs.carousel',$.proxy(this.cycle,this))}
Carousel.VERSION='3.3.7'
Carousel.TRANSITION_DURATION=600
Carousel.DEFAULTS={interval:5000,pause:'hover',wrap:true,keyboard:true}
Carousel.prototype.keydown=function(e){if(/input|textarea/i.test(e.target.tagName))return
switch(e.which){case 37:this.prev();break
case 39:this.next();break
default:return}
e.preventDefault()}
Carousel.prototype.cycle=function(e){e||(this.paused=false)
this.interval&&clearInterval(this.interval)
this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval))
return this}
Carousel.prototype.getItemIndex=function(item){this.$items=item.parent().children('.item')
return this.$items.index(item||this.$active)}
Carousel.prototype.getItemForDirection=function(direction,active){var activeIndex=this.getItemIndex(active)
var willWrap=(direction=='prev'&&activeIndex===0)||(direction=='next'&&activeIndex==(this.$items.length-1))
if(willWrap&&!this.options.wrap)return active
var delta=direction=='prev'?-1:1
var itemIndex=(activeIndex+delta)%this.$items.length
return this.$items.eq(itemIndex)}
Carousel.prototype.to=function(pos){var that=this
var activeIndex=this.getItemIndex(this.$active=this.$element.find('.item.active'))
if(pos>(this.$items.length-1)||pos<0)return
if(this.sliding)return this.$element.one('slid.bs.carousel',function(){that.to(pos)})
if(activeIndex==pos)return this.pause().cycle()
return this.slide(pos>activeIndex?'next':'prev',this.$items.eq(pos))}
Carousel.prototype.pause=function(e){e||(this.paused=true)
if(this.$element.find('.next, .prev').length&&$.support.transition){this.$element.trigger($.support.transition.end)
this.cycle(true)}
this.interval=clearInterval(this.interval)
return this}
Carousel.prototype.next=function(){if(this.sliding)return
return this.slide('next')}
Carousel.prototype.prev=function(){if(this.sliding)return
return this.slide('prev')}
Carousel.prototype.slide=function(type,next){var $active=this.$element.find('.item.active')
var $next=next||this.getItemForDirection(type,$active)
var isCycling=this.interval
var direction=type=='next'?'left':'right'
var that=this
if($next.hasClass('active'))return(this.sliding=false)
var relatedTarget=$next[0]
var slideEvent=$.Event('slide.bs.carousel',{relatedTarget:relatedTarget,direction:direction})
this.$element.trigger(slideEvent)
if(slideEvent.isDefaultPrevented())return
this.sliding=true
isCycling&&this.pause()
if(this.$indicators.length){this.$indicators.find('.active').removeClass('active')
var $nextIndicator=$(this.$indicators.children()[this.getItemIndex($next)])
$nextIndicator&&$nextIndicator.addClass('active')}
var slidEvent=$.Event('slid.bs.carousel',{relatedTarget:relatedTarget,direction:direction})
if($.support.transition&&this.$element.hasClass('slide')){$next.addClass(type)
$next[0].offsetWidth
$active.addClass(direction)
$next.addClass(direction)
$active.one('bsTransitionEnd',function(){$next.removeClass([type,direction].join(' ')).addClass('active')
$active.removeClass(['active',direction].join(' '))
that.sliding=false
setTimeout(function(){that.$element.trigger(slidEvent)},0)}).emulateTransitionEnd(Carousel.TRANSITION_DURATION)}else{$active.removeClass('active')
$next.addClass('active')
this.sliding=false
this.$element.trigger(slidEvent)}
isCycling&&this.cycle()
return this}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.carousel')
var options=$.extend({},Carousel.DEFAULTS,$this.data(),typeof option=='object'&&option)
var action=typeof option=='string'?option:options.slide
if(!data)$this.data('bs.carousel',(data=new Carousel(this,options)))
if(typeof option=='number')data.to(option)
else if(action)data[action]()
else if(options.interval)data.pause().cycle()})}
var old=$.fn.carousel
$.fn.carousel=Plugin
$.fn.carousel.Constructor=Carousel
$.fn.carousel.noConflict=function(){$.fn.carousel=old
return this}
var clickHandler=function(e){var href
var $this=$(this)
var $target=$($this.attr('data-target')||(href=$this.attr('href'))&&href.replace(/.*(?=#[^\s]+$)/,''))
if(!$target.hasClass('carousel'))return
var options=$.extend({},$target.data(),$this.data())
var slideIndex=$this.attr('data-slide-to')
if(slideIndex)options.interval=false
Plugin.call($target,options)
if(slideIndex){$target.data('bs.carousel').to(slideIndex)}
e.preventDefault()}
$(document).on('click.bs.carousel.data-api','[data-slide]',clickHandler).on('click.bs.carousel.data-api','[data-slide-to]',clickHandler)
$(window).on('load',function(){$('[data-ride="carousel"]').each(function(){var $carousel=$(this)
Plugin.call($carousel,$carousel.data())})})}(jQuery);+function($){'use strict';var Collapse=function(element,options){this.$element=$(element)
this.options=$.extend({},Collapse.DEFAULTS,options)
this.$trigger=$('[data-toggle="collapse"][href="#'+element.id+'"],'+'[data-toggle="collapse"][data-target="#'+element.id+'"]')
this.transitioning=null
if(this.options.parent){this.$parent=this.getParent()}else{this.addAriaAndCollapsedClass(this.$element,this.$trigger)}
if(this.options.toggle)this.toggle()}
Collapse.VERSION='3.3.7'
Collapse.TRANSITION_DURATION=350
Collapse.DEFAULTS={toggle:true}
Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass('width')
return hasWidth?'width':'height'}
Collapse.prototype.show=function(){if(this.transitioning||this.$element.hasClass('in'))return
var activesData
var actives=this.$parent&&this.$parent.children('.panel').children('.in, .collapsing')
if(actives&&actives.length){activesData=actives.data('bs.collapse')
if(activesData&&activesData.transitioning)return}
var startEvent=$.Event('show.bs.collapse')
this.$element.trigger(startEvent)
if(startEvent.isDefaultPrevented())return
if(actives&&actives.length){Plugin.call(actives,'hide')
activesData||actives.data('bs.collapse',null)}
var dimension=this.dimension()
this.$element.removeClass('collapse').addClass('collapsing')[dimension](0).attr('aria-expanded',true)
this.$trigger.removeClass('collapsed').attr('aria-expanded',true)
this.transitioning=1
var complete=function(){this.$element.removeClass('collapsing').addClass('collapse in')[dimension]('')
this.transitioning=0
this.$element.trigger('shown.bs.collapse')}
if(!$.support.transition)return complete.call(this)
var scrollSize=$.camelCase(['scroll',dimension].join('-'))
this.$element.one('bsTransitionEnd',$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])}
Collapse.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass('in'))return
var startEvent=$.Event('hide.bs.collapse')
this.$element.trigger(startEvent)
if(startEvent.isDefaultPrevented())return
var dimension=this.dimension()
this.$element[dimension](this.$element[dimension]())[0].offsetHeight
this.$element.addClass('collapsing').removeClass('collapse in').attr('aria-expanded',false)
this.$trigger.addClass('collapsed').attr('aria-expanded',false)
this.transitioning=1
var complete=function(){this.transitioning=0
this.$element.removeClass('collapsing').addClass('collapse').trigger('hidden.bs.collapse')}
if(!$.support.transition)return complete.call(this)
this.$element
[dimension](0).one('bsTransitionEnd',$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)}
Collapse.prototype.toggle=function(){this[this.$element.hasClass('in')?'hide':'show']()}
Collapse.prototype.getParent=function(){return $(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each($.proxy(function(i,element){var $element=$(element)
this.addAriaAndCollapsedClass(getTargetFromTrigger($element),$element)},this)).end()}
Collapse.prototype.addAriaAndCollapsedClass=function($element,$trigger){var isOpen=$element.hasClass('in')
$element.attr('aria-expanded',isOpen)
$trigger.toggleClass('collapsed',!isOpen).attr('aria-expanded',isOpen)}
function getTargetFromTrigger($trigger){var href
var target=$trigger.attr('data-target')||(href=$trigger.attr('href'))&&href.replace(/.*(?=#[^\s]+$)/,'')
return $(target)}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.collapse')
var options=$.extend({},Collapse.DEFAULTS,$this.data(),typeof option=='object'&&option)
if(!data&&options.toggle&&/show|hide/.test(option))options.toggle=false
if(!data)$this.data('bs.collapse',(data=new Collapse(this,options)))
if(typeof option=='string')data[option]()})}
var old=$.fn.collapse
$.fn.collapse=Plugin
$.fn.collapse.Constructor=Collapse
$.fn.collapse.noConflict=function(){$.fn.collapse=old
return this}
$(document).on('click.bs.collapse.data-api','[data-toggle="collapse"]',function(e){var $this=$(this)
if(!$this.attr('data-target'))e.preventDefault()
var $target=getTargetFromTrigger($this)
var data=$target.data('bs.collapse')
var option=data?'toggle':$this.data()
Plugin.call($target,option)})}(jQuery);+function($){'use strict';var backdrop='.dropdown-backdrop'
var toggle='[data-toggle="dropdown"]'
var Dropdown=function(element){$(element).on('click.bs.dropdown',this.toggle)}
Dropdown.VERSION='3.3.7'
function getParent($this){var selector=$this.attr('data-target')
if(!selector){selector=$this.attr('href')
selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,'')}
var $parent=selector&&$(selector)
return $parent&&$parent.length?$parent:$this.parent()}
function clearMenus(e){if(e&&e.which===3)return
$(backdrop).remove()
$(toggle).each(function(){var $this=$(this)
var $parent=getParent($this)
var relatedTarget={relatedTarget:this}
if(!$parent.hasClass('open'))return
if(e&&e.type=='click'&&/input|textarea/i.test(e.target.tagName)&&$.contains($parent[0],e.target))return
$parent.trigger(e=$.Event('hide.bs.dropdown',relatedTarget))
if(e.isDefaultPrevented())return
$this.attr('aria-expanded','false')
$parent.removeClass('open').trigger($.Event('hidden.bs.dropdown',relatedTarget))})}
Dropdown.prototype.toggle=function(e){var $this=$(this)
if($this.is('.disabled, :disabled'))return
var $parent=getParent($this)
var isActive=$parent.hasClass('open')
clearMenus()
if(!isActive){if('ontouchstart'in document.documentElement&&!$parent.closest('.navbar-nav').length){$(document.createElement('div')).addClass('dropdown-backdrop').insertAfter($(this)).on('click',clearMenus)}
var relatedTarget={relatedTarget:this}
$parent.trigger(e=$.Event('show.bs.dropdown',relatedTarget))
if(e.isDefaultPrevented())return
$this.trigger('focus').attr('aria-expanded','true')
$parent.toggleClass('open').trigger($.Event('shown.bs.dropdown',relatedTarget))}
return false}
Dropdown.prototype.keydown=function(e){if(!/(38|40|27|32)/.test(e.which)||/input|textarea/i.test(e.target.tagName))return
var $this=$(this)
e.preventDefault()
e.stopPropagation()
if($this.is('.disabled, :disabled'))return
var $parent=getParent($this)
var isActive=$parent.hasClass('open')
if(!isActive&&e.which!=27||isActive&&e.which==27){if(e.which==27)$parent.find(toggle).trigger('focus')
return $this.trigger('click')}
var desc=' li:not(.disabled):visible a'
var $items=$parent.find('.dropdown-menu'+desc)
if(!$items.length)return
var index=$items.index(e.target)
if(e.which==38&&index>0)index--
if(e.which==40&&index<$items.length-1)index++
if(!~index)index=0
$items.eq(index).trigger('focus')}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.dropdown')
if(!data)$this.data('bs.dropdown',(data=new Dropdown(this)))
if(typeof option=='string')data[option].call($this)})}
var old=$.fn.dropdown
$.fn.dropdown=Plugin
$.fn.dropdown.Constructor=Dropdown
$.fn.dropdown.noConflict=function(){$.fn.dropdown=old
return this}
$(document).on('click.bs.dropdown.data-api',clearMenus).on('click.bs.dropdown.data-api','.dropdown form',function(e){e.stopPropagation()}).on('click.bs.dropdown.data-api',toggle,Dropdown.prototype.toggle).on('keydown.bs.dropdown.data-api',toggle,Dropdown.prototype.keydown).on('keydown.bs.dropdown.data-api','.dropdown-menu',Dropdown.prototype.keydown)}(jQuery);+function($){'use strict';var Modal=function(element,options){this.options=options
this.$body=$(document.body)
this.$element=$(element)
this.$dialog=this.$element.find('.modal-dialog')
this.$backdrop=null
this.isShown=null
this.originalBodyPad=null
this.scrollbarWidth=0
this.ignoreBackdropClick=false
if(this.options.remote){this.$element.find('.modal-content').load(this.options.remote,$.proxy(function(){this.$element.trigger('loaded.bs.modal')},this))}}
Modal.VERSION='3.3.7'
Modal.TRANSITION_DURATION=300
Modal.BACKDROP_TRANSITION_DURATION=150
Modal.DEFAULTS={backdrop:true,keyboard:true,show:true}
Modal.prototype.toggle=function(_relatedTarget){return this.isShown?this.hide():this.show(_relatedTarget)}
Modal.prototype.show=function(_relatedTarget){var that=this
var e=$.Event('show.bs.modal',{relatedTarget:_relatedTarget})
this.$element.trigger(e)
if(this.isShown||e.isDefaultPrevented())return
this.isShown=true
this.checkScrollbar()
this.setScrollbar()
this.$body.addClass('modal-open')
this.escape()
this.resize()
this.$element.on('click.dismiss.bs.modal','[data-dismiss="modal"]',$.proxy(this.hide,this))
this.$dialog.on('mousedown.dismiss.bs.modal',function(){that.$element.one('mouseup.dismiss.bs.modal',function(e){if($(e.target).is(that.$element))that.ignoreBackdropClick=true})})
this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass('fade')
if(!that.$element.parent().length){that.$element.appendTo(that.$body)}
that.$element.show().scrollTop(0)
that.adjustDialog()
if(transition){that.$element[0].offsetWidth}
that.$element.addClass('in')
that.enforceFocus()
var e=$.Event('shown.bs.modal',{relatedTarget:_relatedTarget})
transition?that.$dialog.one('bsTransitionEnd',function(){that.$element.trigger('focus').trigger(e)}).emulateTransitionEnd(Modal.TRANSITION_DURATION):that.$element.trigger('focus').trigger(e)})}
Modal.prototype.hide=function(e){if(e)e.preventDefault()
e=$.Event('hide.bs.modal')
this.$element.trigger(e)
if(!this.isShown||e.isDefaultPrevented())return
this.isShown=false
this.escape()
this.resize()
$(document).off('focusin.bs.modal')
this.$element.removeClass('in').off('click.dismiss.bs.modal').off('mouseup.dismiss.bs.modal')
this.$dialog.off('mousedown.dismiss.bs.modal')
$.support.transition&&this.$element.hasClass('fade')?this.$element.one('bsTransitionEnd',$.proxy(this.hideModal,this)).emulateTransitionEnd(Modal.TRANSITION_DURATION):this.hideModal()}
Modal.prototype.enforceFocus=function(){$(document).off('focusin.bs.modal').on('focusin.bs.modal',$.proxy(function(e){if(document!==e.target&&this.$element[0]!==e.target&&!this.$element.has(e.target).length){this.$element.trigger('focus')}},this))}
Modal.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on('keydown.dismiss.bs.modal',$.proxy(function(e){e.which==27&&this.hide()},this))}else if(!this.isShown){this.$element.off('keydown.dismiss.bs.modal')}}
Modal.prototype.resize=function(){if(this.isShown){$(window).on('resize.bs.modal',$.proxy(this.handleUpdate,this))}else{$(window).off('resize.bs.modal')}}
Modal.prototype.hideModal=function(){var that=this
this.$element.hide()
this.backdrop(function(){that.$body.removeClass('modal-open')
that.resetAdjustments()
that.resetScrollbar()
that.$element.trigger('hidden.bs.modal')})}
Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove()
this.$backdrop=null}
Modal.prototype.backdrop=function(callback){var that=this
var animate=this.$element.hasClass('fade')?'fade':''
if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate
this.$backdrop=$(document.createElement('div')).addClass('modal-backdrop '+animate).appendTo(this.$body)
this.$element.on('click.dismiss.bs.modal',$.proxy(function(e){if(this.ignoreBackdropClick){this.ignoreBackdropClick=false
return}
if(e.target!==e.currentTarget)return
this.options.backdrop=='static'?this.$element[0].focus():this.hide()},this))
if(doAnimate)this.$backdrop[0].offsetWidth
this.$backdrop.addClass('in')
if(!callback)return
doAnimate?this.$backdrop.one('bsTransitionEnd',callback).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass('in')
var callbackRemove=function(){that.removeBackdrop()
callback&&callback()}
$.support.transition&&this.$element.hasClass('fade')?this.$backdrop.one('bsTransitionEnd',callbackRemove).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callbackRemove()}else if(callback){callback()}}
Modal.prototype.handleUpdate=function(){this.adjustDialog()}
Modal.prototype.adjustDialog=function(){var modalIsOverflowing=this.$element[0].scrollHeight>document.documentElement.clientHeight
this.$element.css({paddingLeft:!this.bodyIsOverflowing&&modalIsOverflowing?this.scrollbarWidth:'',paddingRight:this.bodyIsOverflowing&&!modalIsOverflowing?this.scrollbarWidth:''})}
Modal.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:'',paddingRight:''})}
Modal.prototype.checkScrollbar=function(){var fullWindowWidth=window.innerWidth
if(!fullWindowWidth){var documentElementRect=document.documentElement.getBoundingClientRect()
fullWindowWidth=documentElementRect.right-Math.abs(documentElementRect.left)}
this.bodyIsOverflowing=document.body.clientWidth<fullWindowWidth
this.scrollbarWidth=this.measureScrollbar()}
Modal.prototype.setScrollbar=function(){var bodyPad=parseInt((this.$body.css('padding-right')||0),10)
this.originalBodyPad=document.body.style.paddingRight||''
if(this.bodyIsOverflowing)this.$body.css('padding-right',bodyPad+this.scrollbarWidth)}
Modal.prototype.resetScrollbar=function(){this.$body.css('padding-right',this.originalBodyPad)}
Modal.prototype.measureScrollbar=function(){var scrollDiv=document.createElement('div')
scrollDiv.className='modal-scrollbar-measure'
this.$body.append(scrollDiv)
var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth
this.$body[0].removeChild(scrollDiv)
return scrollbarWidth}
function Plugin(option,_relatedTarget){return this.each(function(){var $this=$(this)
var data=$this.data('bs.modal')
var options=$.extend({},Modal.DEFAULTS,$this.data(),typeof option=='object'&&option)
if(!data)$this.data('bs.modal',(data=new Modal(this,options)))
if(typeof option=='string')data[option](_relatedTarget)
else if(options.show)data.show(_relatedTarget)})}
var old=$.fn.modal
$.fn.modal=Plugin
$.fn.modal.Constructor=Modal
$.fn.modal.noConflict=function(){$.fn.modal=old
return this}
$(document).on('click.bs.modal.data-api','[data-toggle="modal"]',function(e){var $this=$(this)
var href=$this.attr('href')
var $target=$($this.attr('data-target')||(href&&href.replace(/.*(?=#[^\s]+$)/,'')))
var option=$target.data('bs.modal')?'toggle':$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data())
if($this.is('a'))e.preventDefault()
$target.one('show.bs.modal',function(showEvent){if(showEvent.isDefaultPrevented())return
$target.one('hidden.bs.modal',function(){$this.is(':visible')&&$this.trigger('focus')})})
Plugin.call($target,option,this)})}(jQuery);+function($){'use strict';var Tooltip=function(element,options){this.type=null
this.options=null
this.enabled=null
this.timeout=null
this.hoverState=null
this.$element=null
this.inState=null
this.init('tooltip',element,options)}
Tooltip.VERSION='3.3.7'
Tooltip.TRANSITION_DURATION=150
Tooltip.DEFAULTS={animation:true,placement:'top',selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:'hover focus',title:'',delay:0,html:false,container:false,viewport:{selector:'body',padding:0}}
Tooltip.prototype.init=function(type,element,options){this.enabled=true
this.type=type
this.$element=$(element)
this.options=this.getOptions(options)
this.$viewport=this.options.viewport&&$($.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):(this.options.viewport.selector||this.options.viewport))
this.inState={click:false,hover:false,focus:false}
if(this.$element[0]instanceof document.constructor&&!this.options.selector){throw new Error('`selector` option must be specified when initializing '+this.type+' on the window.document object!')}
var triggers=this.options.trigger.split(' ')
for(var i=triggers.length;i--;){var trigger=triggers[i]
if(trigger=='click'){this.$element.on('click.'+this.type,this.options.selector,$.proxy(this.toggle,this))}else if(trigger!='manual'){var eventIn=trigger=='hover'?'mouseenter':'focusin'
var eventOut=trigger=='hover'?'mouseleave':'focusout'
this.$element.on(eventIn+'.'+this.type,this.options.selector,$.proxy(this.enter,this))
this.$element.on(eventOut+'.'+this.type,this.options.selector,$.proxy(this.leave,this))}}
this.options.selector?(this._options=$.extend({},this.options,{trigger:'manual',selector:''})):this.fixTitle()}
Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS}
Tooltip.prototype.getOptions=function(options){options=$.extend({},this.getDefaults(),this.$element.data(),options)
if(options.delay&&typeof options.delay=='number'){options.delay={show:options.delay,hide:options.delay}}
return options}
Tooltip.prototype.getDelegateOptions=function(){var options={}
var defaults=this.getDefaults()
this._options&&$.each(this._options,function(key,value){if(defaults[key]!=value)options[key]=value})
return options}
Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data('bs.'+this.type)
if(!self){self=new this.constructor(obj.currentTarget,this.getDelegateOptions())
$(obj.currentTarget).data('bs.'+this.type,self)}
if(obj instanceof $.Event){self.inState[obj.type=='focusin'?'focus':'hover']=true}
if(self.tip().hasClass('in')||self.hoverState=='in'){self.hoverState='in'
return}
clearTimeout(self.timeout)
self.hoverState='in'
if(!self.options.delay||!self.options.delay.show)return self.show()
self.timeout=setTimeout(function(){if(self.hoverState=='in')self.show()},self.options.delay.show)}
Tooltip.prototype.isInStateTrue=function(){for(var key in this.inState){if(this.inState[key])return true}
return false}
Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data('bs.'+this.type)
if(!self){self=new this.constructor(obj.currentTarget,this.getDelegateOptions())
$(obj.currentTarget).data('bs.'+this.type,self)}
if(obj instanceof $.Event){self.inState[obj.type=='focusout'?'focus':'hover']=false}
if(self.isInStateTrue())return
clearTimeout(self.timeout)
self.hoverState='out'
if(!self.options.delay||!self.options.delay.hide)return self.hide()
self.timeout=setTimeout(function(){if(self.hoverState=='out')self.hide()},self.options.delay.hide)}
Tooltip.prototype.show=function(){var e=$.Event('show.bs.'+this.type)
if(this.hasContent()&&this.enabled){this.$element.trigger(e)
var inDom=$.contains(this.$element[0].ownerDocument.documentElement,this.$element[0])
if(e.isDefaultPrevented()||!inDom)return
var that=this
var $tip=this.tip()
var tipId=this.getUID(this.type)
this.setContent()
$tip.attr('id',tipId)
this.$element.attr('aria-describedby',tipId)
if(this.options.animation)$tip.addClass('fade')
var placement=typeof this.options.placement=='function'?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement
var autoToken=/\s?auto?\s?/i
var autoPlace=autoToken.test(placement)
if(autoPlace)placement=placement.replace(autoToken,'')||'top'
$tip.detach().css({top:0,left:0,display:'block'}).addClass(placement).data('bs.'+this.type,this)
this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element)
this.$element.trigger('inserted.bs.'+this.type)
var pos=this.getPosition()
var actualWidth=$tip[0].offsetWidth
var actualHeight=$tip[0].offsetHeight
if(autoPlace){var orgPlacement=placement
var viewportDim=this.getPosition(this.$viewport)
placement=placement=='bottom'&&pos.bottom+actualHeight>viewportDim.bottom?'top':placement=='top'&&pos.top-actualHeight<viewportDim.top?'bottom':placement=='right'&&pos.right+actualWidth>viewportDim.width?'left':placement=='left'&&pos.left-actualWidth<viewportDim.left?'right':placement
$tip.removeClass(orgPlacement).addClass(placement)}
var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight)
this.applyPlacement(calculatedOffset,placement)
var complete=function(){var prevHoverState=that.hoverState
that.$element.trigger('shown.bs.'+that.type)
that.hoverState=null
if(prevHoverState=='out')that.leave(that)}
$.support.transition&&this.$tip.hasClass('fade')?$tip.one('bsTransitionEnd',complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete()}}
Tooltip.prototype.applyPlacement=function(offset,placement){var $tip=this.tip()
var width=$tip[0].offsetWidth
var height=$tip[0].offsetHeight
var marginTop=parseInt($tip.css('margin-top'),10)
var marginLeft=parseInt($tip.css('margin-left'),10)
if(isNaN(marginTop))marginTop=0
if(isNaN(marginLeft))marginLeft=0
offset.top+=marginTop
offset.left+=marginLeft
$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0)
$tip.addClass('in')
var actualWidth=$tip[0].offsetWidth
var actualHeight=$tip[0].offsetHeight
if(placement=='top'&&actualHeight!=height){offset.top=offset.top+height-actualHeight}
var delta=this.getViewportAdjustedDelta(placement,offset,actualWidth,actualHeight)
if(delta.left)offset.left+=delta.left
else offset.top+=delta.top
var isVertical=/top|bottom/.test(placement)
var arrowDelta=isVertical?delta.left*2-width+actualWidth:delta.top*2-height+actualHeight
var arrowOffsetPosition=isVertical?'offsetWidth':'offsetHeight'
$tip.offset(offset)
this.replaceArrow(arrowDelta,$tip[0][arrowOffsetPosition],isVertical)}
Tooltip.prototype.replaceArrow=function(delta,dimension,isVertical){this.arrow().css(isVertical?'left':'top',50*(1-delta/dimension)+'%').css(isVertical?'top':'left','')}
Tooltip.prototype.setContent=function(){var $tip=this.tip()
var title=this.getTitle()
$tip.find('.tooltip-inner')[this.options.html?'html':'text'](title)
$tip.removeClass('fade in top bottom left right')}
Tooltip.prototype.hide=function(callback){var that=this
var $tip=$(this.$tip)
var e=$.Event('hide.bs.'+this.type)
function complete(){if(that.hoverState!='in')$tip.detach()
if(that.$element){that.$element.removeAttr('aria-describedby').trigger('hidden.bs.'+that.type)}
callback&&callback()}
this.$element.trigger(e)
if(e.isDefaultPrevented())return
$tip.removeClass('in')
$.support.transition&&$tip.hasClass('fade')?$tip.one('bsTransitionEnd',complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete()
this.hoverState=null
return this}
Tooltip.prototype.fixTitle=function(){var $e=this.$element
if($e.attr('title')||typeof $e.attr('data-original-title')!='string'){$e.attr('data-original-title',$e.attr('title')||'').attr('title','')}}
Tooltip.prototype.hasContent=function(){return this.getTitle()}
Tooltip.prototype.getPosition=function($element){$element=$element||this.$element
var el=$element[0]
var isBody=el.tagName=='BODY'
var elRect=el.getBoundingClientRect()
if(elRect.width==null){elRect=$.extend({},elRect,{width:elRect.right-elRect.left,height:elRect.bottom-elRect.top})}
var isSvg=window.SVGElement&&el instanceof window.SVGElement
var elOffset=isBody?{top:0,left:0}:(isSvg?null:$element.offset())
var scroll={scroll:isBody?document.documentElement.scrollTop||document.body.scrollTop:$element.scrollTop()}
var outerDims=isBody?{width:$(window).width(),height:$(window).height()}:null
return $.extend({},elRect,scroll,outerDims,elOffset)}
Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return placement=='bottom'?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:placement=='top'?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:placement=='left'?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}}
Tooltip.prototype.getViewportAdjustedDelta=function(placement,pos,actualWidth,actualHeight){var delta={top:0,left:0}
if(!this.$viewport)return delta
var viewportPadding=this.options.viewport&&this.options.viewport.padding||0
var viewportDimensions=this.getPosition(this.$viewport)
if(/right|left/.test(placement)){var topEdgeOffset=pos.top-viewportPadding-viewportDimensions.scroll
var bottomEdgeOffset=pos.top+viewportPadding-viewportDimensions.scroll+actualHeight
if(topEdgeOffset<viewportDimensions.top){delta.top=viewportDimensions.top-topEdgeOffset}else if(bottomEdgeOffset>viewportDimensions.top+viewportDimensions.height){delta.top=viewportDimensions.top+viewportDimensions.height-bottomEdgeOffset}}else{var leftEdgeOffset=pos.left-viewportPadding
var rightEdgeOffset=pos.left+viewportPadding+actualWidth
if(leftEdgeOffset<viewportDimensions.left){delta.left=viewportDimensions.left-leftEdgeOffset}else if(rightEdgeOffset>viewportDimensions.right){delta.left=viewportDimensions.left+viewportDimensions.width-rightEdgeOffset}}
return delta}
Tooltip.prototype.getTitle=function(){var title
var $e=this.$element
var o=this.options
title=$e.attr('data-original-title')||(typeof o.title=='function'?o.title.call($e[0]):o.title)
return title}
Tooltip.prototype.getUID=function(prefix){do prefix+=~~(Math.random()*1000000)
while(document.getElementById(prefix))
return prefix}
Tooltip.prototype.tip=function(){if(!this.$tip){this.$tip=$(this.options.template)
if(this.$tip.length!=1){throw new Error(this.type+' `template` option must consist of exactly 1 top-level element!')}}
return this.$tip}
Tooltip.prototype.arrow=function(){return(this.$arrow=this.$arrow||this.tip().find('.tooltip-arrow'))}
Tooltip.prototype.enable=function(){this.enabled=true}
Tooltip.prototype.disable=function(){this.enabled=false}
Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled}
Tooltip.prototype.toggle=function(e){var self=this
if(e){self=$(e.currentTarget).data('bs.'+this.type)
if(!self){self=new this.constructor(e.currentTarget,this.getDelegateOptions())
$(e.currentTarget).data('bs.'+this.type,self)}}
if(e){self.inState.click=!self.inState.click
if(self.isInStateTrue())self.enter(self)
else self.leave(self)}else{self.tip().hasClass('in')?self.leave(self):self.enter(self)}}
Tooltip.prototype.destroy=function(){var that=this
clearTimeout(this.timeout)
this.hide(function(){that.$element.off('.'+that.type).removeData('bs.'+that.type)
if(that.$tip){that.$tip.detach()}
that.$tip=null
that.$arrow=null
that.$viewport=null
that.$element=null})}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.tooltip')
var options=typeof option=='object'&&option
if(!data&&/destroy|hide/.test(option))return
if(!data)$this.data('bs.tooltip',(data=new Tooltip(this,options)))
if(typeof option=='string')data[option]()})}
var old=$.fn.tooltip
$.fn.tooltip=Plugin
$.fn.tooltip.Constructor=Tooltip
$.fn.tooltip.noConflict=function(){$.fn.tooltip=old
return this}}(jQuery);+function($){'use strict';var Popover=function(element,options){this.init('popover',element,options)}
if(!$.fn.tooltip)throw new Error('Popover requires tooltip.js')
Popover.VERSION='3.3.7'
Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:'right',trigger:'click',content:'',template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'})
Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype)
Popover.prototype.constructor=Popover
Popover.prototype.getDefaults=function(){return Popover.DEFAULTS}
Popover.prototype.setContent=function(){var $tip=this.tip()
var title=this.getTitle()
var content=this.getContent()
$tip.find('.popover-title')[this.options.html?'html':'text'](title)
$tip.find('.popover-content').children().detach().end()[this.options.html?(typeof content=='string'?'html':'append'):'text'](content)
$tip.removeClass('fade top bottom left right in')
if(!$tip.find('.popover-title').html())$tip.find('.popover-title').hide()}
Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()}
Popover.prototype.getContent=function(){var $e=this.$element
var o=this.options
return $e.attr('data-content')||(typeof o.content=='function'?o.content.call($e[0]):o.content)}
Popover.prototype.arrow=function(){return(this.$arrow=this.$arrow||this.tip().find('.arrow'))}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.popover')
var options=typeof option=='object'&&option
if(!data&&/destroy|hide/.test(option))return
if(!data)$this.data('bs.popover',(data=new Popover(this,options)))
if(typeof option=='string')data[option]()})}
var old=$.fn.popover
$.fn.popover=Plugin
$.fn.popover.Constructor=Popover
$.fn.popover.noConflict=function(){$.fn.popover=old
return this}}(jQuery);+function($){'use strict';function ScrollSpy(element,options){this.$body=$(document.body)
this.$scrollElement=$(element).is(document.body)?$(window):$(element)
this.options=$.extend({},ScrollSpy.DEFAULTS,options)
this.selector=(this.options.target||'')+' .nav li > a'
this.offsets=[]
this.targets=[]
this.activeTarget=null
this.scrollHeight=0
this.$scrollElement.on('scroll.bs.scrollspy',$.proxy(this.process,this))
this.refresh()
this.process()}
ScrollSpy.VERSION='3.3.7'
ScrollSpy.DEFAULTS={offset:10}
ScrollSpy.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)}
ScrollSpy.prototype.refresh=function(){var that=this
var offsetMethod='offset'
var offsetBase=0
this.offsets=[]
this.targets=[]
this.scrollHeight=this.getScrollHeight()
if(!$.isWindow(this.$scrollElement[0])){offsetMethod='position'
offsetBase=this.$scrollElement.scrollTop()}
this.$body.find(this.selector).map(function(){var $el=$(this)
var href=$el.data('target')||$el.attr('href')
var $href=/^#./.test(href)&&$(href)
return($href&&$href.length&&$href.is(':visible')&&[[$href[offsetMethod]().top+offsetBase,href]])||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){that.offsets.push(this[0])
that.targets.push(this[1])})}
ScrollSpy.prototype.process=function(){var scrollTop=this.$scrollElement.scrollTop()+this.options.offset
var scrollHeight=this.getScrollHeight()
var maxScroll=this.options.offset+scrollHeight-this.$scrollElement.height()
var offsets=this.offsets
var targets=this.targets
var activeTarget=this.activeTarget
var i
if(this.scrollHeight!=scrollHeight){this.refresh()}
if(scrollTop>=maxScroll){return activeTarget!=(i=targets[targets.length-1])&&this.activate(i)}
if(activeTarget&&scrollTop<offsets[0]){this.activeTarget=null
return this.clear()}
for(i=offsets.length;i--;){activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(offsets[i+1]===undefined||scrollTop<offsets[i+1])&&this.activate(targets[i])}}
ScrollSpy.prototype.activate=function(target){this.activeTarget=target
this.clear()
var selector=this.selector+'[data-target="'+target+'"],'+
this.selector+'[href="'+target+'"]'
var active=$(selector).parents('li').addClass('active')
if(active.parent('.dropdown-menu').length){active=active.closest('li.dropdown').addClass('active')}
active.trigger('activate.bs.scrollspy')}
ScrollSpy.prototype.clear=function(){$(this.selector).parentsUntil(this.options.target,'.active').removeClass('active')}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.scrollspy')
var options=typeof option=='object'&&option
if(!data)$this.data('bs.scrollspy',(data=new ScrollSpy(this,options)))
if(typeof option=='string')data[option]()})}
var old=$.fn.scrollspy
$.fn.scrollspy=Plugin
$.fn.scrollspy.Constructor=ScrollSpy
$.fn.scrollspy.noConflict=function(){$.fn.scrollspy=old
return this}
$(window).on('load.bs.scrollspy.data-api',function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this)
Plugin.call($spy,$spy.data())})})}(jQuery);+function($){'use strict';var Tab=function(element){this.element=$(element)}
Tab.VERSION='3.3.7'
Tab.TRANSITION_DURATION=150
Tab.prototype.show=function(){var $this=this.element
var $ul=$this.closest('ul:not(.dropdown-menu)')
var selector=$this.data('target')
if(!selector){selector=$this.attr('href')
selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,'')}
if($this.parent('li').hasClass('active'))return
var $previous=$ul.find('.active:last a')
var hideEvent=$.Event('hide.bs.tab',{relatedTarget:$this[0]})
var showEvent=$.Event('show.bs.tab',{relatedTarget:$previous[0]})
$previous.trigger(hideEvent)
$this.trigger(showEvent)
if(showEvent.isDefaultPrevented()||hideEvent.isDefaultPrevented())return
var $target=$(selector)
this.activate($this.closest('li'),$ul)
this.activate($target,$target.parent(),function(){$previous.trigger({type:'hidden.bs.tab',relatedTarget:$this[0]})
$this.trigger({type:'shown.bs.tab',relatedTarget:$previous[0]})})}
Tab.prototype.activate=function(element,container,callback){var $active=container.find('> .active')
var transition=callback&&$.support.transition&&($active.length&&$active.hasClass('fade')||!!container.find('> .fade').length)
function next(){$active.removeClass('active').find('> .dropdown-menu > .active').removeClass('active').end().find('[data-toggle="tab"]').attr('aria-expanded',false)
element.addClass('active').find('[data-toggle="tab"]').attr('aria-expanded',true)
if(transition){element[0].offsetWidth
element.addClass('in')}else{element.removeClass('fade')}
if(element.parent('.dropdown-menu').length){element.closest('li.dropdown').addClass('active').end().find('[data-toggle="tab"]').attr('aria-expanded',true)}
callback&&callback()}
$active.length&&transition?$active.one('bsTransitionEnd',next).emulateTransitionEnd(Tab.TRANSITION_DURATION):next()
$active.removeClass('in')}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.tab')
if(!data)$this.data('bs.tab',(data=new Tab(this)))
if(typeof option=='string')data[option]()})}
var old=$.fn.tab
$.fn.tab=Plugin
$.fn.tab.Constructor=Tab
$.fn.tab.noConflict=function(){$.fn.tab=old
return this}
var clickHandler=function(e){e.preventDefault()
Plugin.call($(this),'show')}
$(document).on('click.bs.tab.data-api','[data-toggle="tab"]',clickHandler).on('click.bs.tab.data-api','[data-toggle="pill"]',clickHandler)}(jQuery);+function($){'use strict';var Affix=function(element,options){this.options=$.extend({},Affix.DEFAULTS,options)
this.$target=$(this.options.target).on('scroll.bs.affix.data-api',$.proxy(this.checkPosition,this)).on('click.bs.affix.data-api',$.proxy(this.checkPositionWithEventLoop,this))
this.$element=$(element)
this.affixed=null
this.unpin=null
this.pinnedOffset=null
this.checkPosition()}
Affix.VERSION='3.3.7'
Affix.RESET='affix affix-top affix-bottom'
Affix.DEFAULTS={offset:0,target:window}
Affix.prototype.getState=function(scrollHeight,height,offsetTop,offsetBottom){var scrollTop=this.$target.scrollTop()
var position=this.$element.offset()
var targetHeight=this.$target.height()
if(offsetTop!=null&&this.affixed=='top')return scrollTop<offsetTop?'top':false
if(this.affixed=='bottom'){if(offsetTop!=null)return(scrollTop+this.unpin<=position.top)?false:'bottom'
return(scrollTop+targetHeight<=scrollHeight-offsetBottom)?false:'bottom'}
var initializing=this.affixed==null
var colliderTop=initializing?scrollTop:position.top
var colliderHeight=initializing?targetHeight:height
if(offsetTop!=null&&scrollTop<=offsetTop)return'top'
if(offsetBottom!=null&&(colliderTop+colliderHeight>=scrollHeight-offsetBottom))return'bottom'
return false}
Affix.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset
this.$element.removeClass(Affix.RESET).addClass('affix')
var scrollTop=this.$target.scrollTop()
var position=this.$element.offset()
return(this.pinnedOffset=position.top-scrollTop)}
Affix.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1)}
Affix.prototype.checkPosition=function(){if(!this.$element.is(':visible'))return
var height=this.$element.height()
var offset=this.options.offset
var offsetTop=offset.top
var offsetBottom=offset.bottom
var scrollHeight=Math.max($(document).height(),$(document.body).height())
if(typeof offset!='object')offsetBottom=offsetTop=offset
if(typeof offsetTop=='function')offsetTop=offset.top(this.$element)
if(typeof offsetBottom=='function')offsetBottom=offset.bottom(this.$element)
var affix=this.getState(scrollHeight,height,offsetTop,offsetBottom)
if(this.affixed!=affix){if(this.unpin!=null)this.$element.css('top','')
var affixType='affix'+(affix?'-'+affix:'')
var e=$.Event(affixType+'.bs.affix')
this.$element.trigger(e)
if(e.isDefaultPrevented())return
this.affixed=affix
this.unpin=affix=='bottom'?this.getPinnedOffset():null
this.$element.removeClass(Affix.RESET).addClass(affixType).trigger(affixType.replace('affix','affixed')+'.bs.affix')}
if(affix=='bottom'){this.$element.offset({top:scrollHeight-height-offsetBottom})}}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.affix')
var options=typeof option=='object'&&option
if(!data)$this.data('bs.affix',(data=new Affix(this,options)))
if(typeof option=='string')data[option]()})}
var old=$.fn.affix
$.fn.affix=Plugin
$.fn.affix.Constructor=Affix
$.fn.affix.noConflict=function(){$.fn.affix=old
return this}
$(window).on('load',function(){$('[data-spy="affix"]').each(function(){var $spy=$(this)
var data=$spy.data()
data.offset=data.offset||{}
if(data.offsetBottom!=null)data.offset.bottom=data.offsetBottom
if(data.offsetTop!=null)data.offset.top=data.offsetTop
Plugin.call($spy,data)})})}(jQuery);(function($){"use strict";var uniqueId=function(prefix){return(prefix||'ui-id')+'-'+Math.floor((Math.random()*1000)+1)}
var removeMultiValAttributes=function(el,attr,val){var describedby=(el.attr(attr)||"").split(/\s+/),index=$.inArray(val,describedby)
if(index!==-1){describedby.splice(index,1)}
describedby=$.trim(describedby.join(" "))
if(describedby){el.attr(attr,describedby)}else{el.removeAttr(attr)}}
var focusable=function(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false;}
img=$("img[usemap='#"+mapName+"']")[0];return!!img&&visible(img);}
return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element);}
var visible=function(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden";}).length;}
$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName);};}):function(elem,i,match){return!!$.data(elem,match[3]);},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")));},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN);}});$('.modal-dialog').attr({'role':'document'})
var modalhide=$.fn.modal.Constructor.prototype.hide
$.fn.modal.Constructor.prototype.hide=function(){modalhide.apply(this,arguments)
$(document).off('keydown.bs.modal')}
var modalfocus=$.fn.modal.Constructor.prototype.enforceFocus
$.fn.modal.Constructor.prototype.enforceFocus=function(){var focEls=this.$element.find(":tabbable"),lastEl=focEls[focEls.length-1]
$(document).on('keydown.bs.modal',$.proxy(function(ev){if(!this.$element.has(ev.target).length&&ev.shiftKey&&ev.keyCode===9){lastEl.focus()
ev.preventDefault();}},this))
modalfocus.apply(this,arguments)}
var toggle='[data-toggle=dropdown]',$par,firstItem,focusDelay=200,menus=$(toggle).parent().find('ul').attr('role','menu'),lis=menus.find('li').attr('role','presentation')
lis.find('a').attr({'role':'menuitem','tabIndex':'-1'})
$(toggle).attr({'aria-haspopup':'true','aria-expanded':'false'})
$(toggle).parent().on('shown.bs.dropdown',function(e){$par=$(this)
var $toggle=$par.find(toggle)
$toggle.attr('aria-expanded','true')
$toggle.on('keydown.bs.dropdown',$.proxy(function(ev){setTimeout(function(){firstItem=$('.dropdown-menu [role=menuitem]:visible',$par)[0]
try{firstItem.focus()}catch(ex){}},focusDelay)},this))}).on('hidden.bs.dropdown',function(e){$par=$(this)
var $toggle=$par.find(toggle)
$toggle.attr('aria-expanded','false')})
$(document).on('focusout.dropdown.data-api','.dropdown-menu',function(e){var $this=$(this),that=this;if(!$this.parent().hasClass('open')){return;}
setTimeout(function(){if(!$.contains(that,document.activeElement)){$this.parent().find('[data-toggle=dropdown]').dropdown('toggle')}},150)}).on('keydown.bs.dropdown.data-api',toggle+', [role=menu]',$.fn.dropdown.Constructor.prototype.keydown)
var $tablist=$('.nav-tabs, .nav-pills'),$lis=$tablist.children('li'),$tabs=$tablist.find('[data-toggle="tab"], [data-toggle="pill"]')
if($tabs){$tablist.attr('role','tablist')
$lis.attr('role','presentation')
$tabs.attr('role','tab')}
$tabs.each(function(index){var tabpanel=$($(this).attr('href')),tab=$(this),tabid=tab.attr('id')||uniqueId('ui-tab')
tab.attr('id',tabid)
if(tab.parent().hasClass('active')){tab.attr({'tabIndex':'0','aria-selected':'true','aria-controls':tab.attr('href').substr(1)})
tabpanel.attr({'role':'tabpanel','tabIndex':'0','aria-hidden':'false','aria-labelledby':tabid})}else{tab.attr({'tabIndex':'-1','aria-selected':'false','aria-controls':tab.attr('href').substr(1)})
tabpanel.attr({'role':'tabpanel','tabIndex':'-1','aria-hidden':'true','aria-labelledby':tabid})}})
$.fn.tab.Constructor.prototype.keydown=function(e){var $this=$(this),$items,$ul=$this.closest('ul[role=tablist] '),index,k=e.which||e.keyCode
$this=$(this)
if(!/(37|38|39|40)/.test(k))return
$items=$ul.find('[role=tab]:visible')
index=$items.index($items.filter(':focus'))
if(k==38||k==37)index--
if(k==39||k==40)index++
if(index<0)index=$items.length-1
if(index==$items.length)index=0
var nextTab=$items.eq(index)
if(nextTab.attr('role')==='tab'){nextTab.tab('show').focus()}
e.preventDefault()
e.stopPropagation()}
$(document).on('keydown.tab.data-api','[data-toggle="tab"], [data-toggle="pill"]',$.fn.tab.Constructor.prototype.keydown)
var tabactivate=$.fn.tab.Constructor.prototype.activate;$.fn.tab.Constructor.prototype.activate=function(element,container,callback){var $active=container.find('> .active')
$active.find('[data-toggle=tab], [data-toggle=pill]').attr({'tabIndex':'-1','aria-selected':false})
$active.filter('.tab-pane').attr({'aria-hidden':true,'tabIndex':'-1'})
tabactivate.apply(this,arguments)
element.addClass('active')
element.find('[data-toggle=tab], [data-toggle=pill]').attr({'tabIndex':'0','aria-selected':true})
element.filter('.tab-pane').attr({'aria-hidden':false,'tabIndex':'0'})}
var $colltabs=$('[data-toggle="collapse"]')
$colltabs.each(function(index){var colltab=$(this),collpanel=(colltab.attr('data-target'))?$(colltab.attr('data-target')):$(colltab.attr('href')),parent=colltab.attr('data-parent'),collparent=parent&&$(parent),collid=colltab.attr('id')||uniqueId('ui-collapse')
colltab.attr('id',collid)
if(collparent){colltab.attr({'role':'tab','aria-selected':'false','aria-expanded':'false'})
$(collparent).find('div:not(.collapse,.panel-body), h4').attr('role','presentation')
collparent.attr({'role':'tablist','aria-multiselectable':'true'})
if(collpanel.hasClass('in')){colltab.attr({'aria-controls':collpanel.attr('id'),'aria-selected':'true','aria-expanded':'true','tabindex':'0'})
collpanel.attr({'role':'tabpanel','tabindex':'0','aria-labelledby':collid,'aria-hidden':'false'})}else{colltab.attr({'aria-controls':collpanel.attr('id'),'tabindex':'-1'})
collpanel.attr({'role':'tabpanel','tabindex':'-1','aria-labelledby':collid,'aria-hidden':'true'})}}})
var collToggle=$.fn.collapse.Constructor.prototype.toggle
$.fn.collapse.Constructor.prototype.toggle=function(){var prevTab=this.$parent&&this.$parent.find('[aria-expanded="true"]'),href
if(prevTab){var prevPanel=prevTab.attr('data-target')||(href=prevTab.attr('href'))&&href.replace(/.*(?=#[^\s]+$)/,''),$prevPanel=$(prevPanel),$curPanel=this.$element,par=this.$parent,curTab
if(this.$parent)curTab=this.$parent.find('[data-toggle=collapse][href="#'+this.$element.attr('id')+'"]')
collToggle.apply(this,arguments)
if($.support.transition){this.$element.one($.support.transition.end,function(){prevTab.attr({'aria-selected':'false','aria-expanded':'false','tabIndex':'-1'})
$prevPanel.attr({'aria-hidden':'true','tabIndex':'-1'})
curTab.attr({'aria-selected':'true','aria-expanded':'true','tabIndex':'0'})
if($curPanel.hasClass('in')){$curPanel.attr({'aria-hidden':'false','tabIndex':'0'})}else{curTab.attr({'aria-selected':'false','aria-expanded':'false'})
$curPanel.attr({'aria-hidden':'true','tabIndex':'-1'})}})}}else{collToggle.apply(this,arguments)}}
$.fn.collapse.Constructor.prototype.keydown=function(e){var $this=$(this),$items,$tablist=$this.closest('div[role=tablist] '),index,k=e.which||e.keyCode
$this=$(this)
if(!/(32|37|38|39|40)/.test(k))return
if(k==32)$this.click()
$items=$tablist.find('[role=tab]')
index=$items.index($items.filter(':focus'))
if(k==38||k==37)index--
if(k==39||k==40)index++
if(index<0)index=$items.length-1
if(index==$items.length)index=0
$items.eq(index).focus()
e.preventDefault()
e.stopPropagation()}
$(document).on('keydown.collapse.data-api','[data-toggle="collapse"]',$.fn.collapse.Constructor.prototype.keydown)
$('.carousel').each(function(index){function setTablistHighlightBox(){var $tab,offset,height,width,highlightBox={}
highlightBox.top=0
highlightBox.left=32000
highlightBox.height=0
highlightBox.width=0
for(var i=0;i<$tabs.length;i++){$tab=$tabs[i]
offset=$($tab).offset()
height=$($tab).height()
width=$($tab).width()
if(highlightBox.top<offset.top){highlightBox.top=Math.round(offset.top)}
if(highlightBox.height<height){highlightBox.height=Math.round(height)}
if(highlightBox.left>offset.left){highlightBox.left=Math.round(offset.left)}
var w=(offset.left-highlightBox.left)+Math.round(width)
if(highlightBox.width<w){highlightBox.width=w}}
$tablistHighlight.style.top=(highlightBox.top-2)+'px'
$tablistHighlight.style.left=(highlightBox.left-2)+'px'
$tablistHighlight.style.height=(highlightBox.height+7)+'px'
$tablistHighlight.style.width=(highlightBox.width+8)+'px'}
var $this=$(this),$prev=$this.find('[data-slide="prev"]'),$next=$this.find('[data-slide="next"]'),$tablist=$this.find('.carousel-indicators'),$tabs=$this.find('.carousel-indicators li'),$tabpanels=$this.find('.item'),$tabpanel,$tablistHighlight,$pauseCarousel,$complementaryLandmark,$tab,$is_paused=false,offset,height,width,i,id_title='id_title',id_desc='id_desc'
$tablist.attr('role','tablist')
$tabs.focus(function(){$this.carousel('pause')
$is_paused=true
$pauseCarousel.innerHTML="Play Carousel"
$(this).parent().addClass('active');setTablistHighlightBox()
$($tablistHighlight).addClass('focus')
$(this).parents('.carousel').addClass('contrast')})
$tabs.blur(function(event){$(this).parent().removeClass('active');$($tablistHighlight).removeClass('focus')
$(this).parents('.carousel').removeClass('contrast')})
for(i=0;i<$tabpanels.length;i++){$tabpanel=$tabpanels[i]
$tabpanel.setAttribute('role','tabpanel')
$tabpanel.setAttribute('id','tabpanel-'+index+'-'+i)
$tabpanel.setAttribute('aria-labelledby','tab-'+index+'-'+i)}
if(typeof $this.attr('role')!=='string'){$this.attr('role','complementary');$this.attr('aria-labelledby',id_title);$this.attr('aria-describedby',id_desc);$this.prepend('<p  id="'+id_desc+'" class="sr-only">A carousel is a rotating set of images, rotation stops on keyboard focus on carousel tab controls or hovering the mouse pointer over images.  Use the tabs or the previous and next buttons to change the displayed slide.</p>')
$this.prepend('<h2 id="'+id_title+'" class="sr-only">Carousel content with '+$tabpanels.length+' slides.</h2>')}
for(i=0;i<$tabs.length;i++){$tab=$tabs[i]
$tab.setAttribute('role','tab')
$tab.setAttribute('id','tab-'+index+'-'+i)
$tab.setAttribute('aria-controls','tabpanel-'+index+'-'+i)
var tpId='#tabpanel-'+index+'-'+i
var caption=$this.find(tpId).find('h1').text()
if((typeof caption!=='string')||(caption.length===0))caption=$this.find(tpId).text()
if((typeof caption!=='string')||(caption.length===0))caption=$this.find(tpId).find('h3').text()
if((typeof caption!=='string')||(caption.length===0))caption=$this.find(tpId).find('h4').text()
if((typeof caption!=='string')||(caption.length===0))caption=$this.find(tpId).find('h5').text()
if((typeof caption!=='string')||(caption.length===0))caption=$this.find(tpId).find('h6').text()
if((typeof caption!=='string')||(caption.length===0))caption="no title";var tabName=document.createElement('span')
tabName.setAttribute('class','sr-only')
tabName.innerHTML='Slide '+(i+1)
if(caption)tabName.innerHTML+=": "+caption
$tab.appendChild(tabName)}
$tablistHighlight=document.createElement('div')
$tablistHighlight.className='carousel-tablist-highlight'
document.body.appendChild($tablistHighlight)
$complementaryLandmark=document.createElement('aside')
$complementaryLandmark.setAttribute('aria-label','carousel pause/play control')
$(document.body).prepend($complementaryLandmark)
$pauseCarousel=document.createElement('button')
$pauseCarousel.className="carousel-pause-button"
$pauseCarousel.innerHTML="Pause Carousel"
$pauseCarousel.setAttribute('title',"Pause/Play carousel button can be used by screen reader users to stop carousel animations")
$($complementaryLandmark).append($pauseCarousel)
$($pauseCarousel).click(function(){if($is_paused){$pauseCarousel.innerHTML="Pause Carousel"
$this.carousel('cycle')
$is_paused=false}
else{$pauseCarousel.innerHTML="Play Carousel"
$this.carousel('pause')
$is_paused=true}})
$($pauseCarousel).focus(function(){$(this).addClass('focus')})
$($pauseCarousel).blur(function(){$(this).removeClass('focus')})
setTablistHighlightBox()
$(window).resize(function(){setTablistHighlightBox()})
$prev.attr('aria-label','Previous Slide')
$prev.keydown(function(e){var k=e.which||e.keyCode
if(/(13|32)/.test(k)){e.preventDefault()
e.stopPropagation()
$prev.trigger('click');}});$prev.focus(function(){$(this).parents('.carousel').addClass('contrast')})
$prev.blur(function(){$(this).parents('.carousel').removeClass('contrast')})
$next.attr('aria-label','Next Slide')
$next.keydown(function(e){var k=e.which||e.keyCode
if(/(13|32)/.test(k)){e.preventDefault()
e.stopPropagation()
$next.trigger('click');}});$next.focus(function(){$(this).parents('.carousel').addClass('contrast')})
$next.blur(function(){$(this).parents('.carousel').removeClass('contrast')})
$('.carousel-inner a').focus(function(){$(this).parents('.carousel').addClass('contrast')})
$('.carousel-inner a').blur(function(){$(this).parents('.carousel').removeClass('contrast')})
$tabs.each(function(){var item=$(this)
if(item.hasClass('active')){item.attr({'aria-selected':'true','tabindex':'0'})}else{item.attr({'aria-selected':'false','tabindex':'-1'})}})})
var slideCarousel=$.fn.carousel.Constructor.prototype.slide
$.fn.carousel.Constructor.prototype.slide=function(type,next){var $element=this.$element,$active=$element.find('[role=tabpanel].active'),$next=next||$active[type](),$tab,$tab_count=$element.find('[role=tabpanel]').size(),$prev_side=$element.find('[data-slide="prev"]'),$next_side=$element.find('[data-slide="next"]'),$index=0,$prev_index=$tab_count-1,$next_index=1,$id
if($next&&$next.attr('id')){$id=$next.attr('id')
$index=$id.lastIndexOf("-")
if($index>=0)$index=parseInt($id.substring($index+1),10)
$prev_index=$index-1
if($prev_index<1)$prev_index=$tab_count-1
$next_index=$index+1
if($next_index>=$tab_count)$next_index=0}
$prev_side.attr('aria-label','Show slide '+($prev_index+1)+' of '+$tab_count)
$next_side.attr('aria-label','Show slide '+($next_index+1)+' of '+$tab_count)
slideCarousel.apply(this,arguments)
$active.one('bsTransitionEnd',function(){var $tab
$tab=$element.find('li[aria-controls="'+$active.attr('id')+'"]')
if($tab)$tab.attr({'aria-selected':false,'tabIndex':'-1'})
$tab=$element.find('li[aria-controls="'+$next.attr('id')+'"]')
if($tab)$tab.attr({'aria-selected':true,'tabIndex':'0'})})}
var $this;$.fn.carousel.Constructor.prototype.keydown=function(e){$this=$this||$(this)
if(this instanceof Node)$this=$(this)
function selectTab(index){if(index>=$tabs.length)return
if(index<0)return
$carousel.carousel(index)
setTimeout(function(){$tabs[index].focus()},150)}
var $carousel=$(e.target).closest('.carousel'),$tabs=$carousel.find('[role=tab]'),k=e.which||e.keyCode,index
if(!/(37|38|39|40)/.test(k))return
index=$tabs.index($tabs.filter('.active'))
if(k==37||k==38){index--
selectTab(index);}
if(k==39||k==40){index++
selectTab(index);}
e.preventDefault()
e.stopPropagation()}
$(document).on('keydown.carousel.data-api','li[role=tab]',$.fn.carousel.Constructor.prototype.keydown)})(jQuery);function StringBuffer()
{this.buffer=[];}
StringBuffer.prototype.append=function append(string)
{this.buffer.push(string);return this;};StringBuffer.prototype.toString=function toString()
{return this.buffer.join("");};var Base64={codex:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",encode:function(input)
{var output=new StringBuffer();var enumerator=new Utf8EncodeEnumerator(input);while(enumerator.moveNext())
{var chr1=enumerator.current;enumerator.moveNext();var chr2=enumerator.current;enumerator.moveNext();var chr3=enumerator.current;var enc1=chr1>>2;var enc2=((chr1&3)<<4)|(chr2>>4);var enc3=((chr2&15)<<2)|(chr3>>6);var enc4=chr3&63;if(isNaN(chr2))
{enc3=enc4=64;}
else if(isNaN(chr3))
{enc4=64;}
output.append(this.codex.charAt(enc1)+this.codex.charAt(enc2)+this.codex.charAt(enc3)+this.codex.charAt(enc4));}
return output.toString();},decode:function(input)
{var output=new StringBuffer();var enumerator=new Base64DecodeEnumerator(input);while(enumerator.moveNext())
{var charCode=enumerator.current;if(charCode<128)
output.append(String.fromCharCode(charCode));else if((charCode>191)&&(charCode<224))
{enumerator.moveNext();var charCode2=enumerator.current;output.append(String.fromCharCode(((charCode&31)<<6)|(charCode2&63)));}
else
{enumerator.moveNext();var charCode2=enumerator.current;enumerator.moveNext();var charCode3=enumerator.current;output.append(String.fromCharCode(((charCode&15)<<12)|((charCode2&63)<<6)|(charCode3&63)));}}
return output.toString();}}
function Utf8EncodeEnumerator(input)
{this._input=input;this._index=-1;this._buffer=[];}
Utf8EncodeEnumerator.prototype={current:Number.NaN,moveNext:function()
{if(this._buffer.length>0)
{this.current=this._buffer.shift();return true;}
else if(this._index>=(this._input.length-1))
{this.current=Number.NaN;return false;}
else
{var charCode=this._input.charCodeAt(++this._index);if((charCode==13)&&(this._input.charCodeAt(this._index+1)==10))
{charCode=10;this._index+=2;}
if(charCode<128)
{this.current=charCode;}
else if((charCode>127)&&(charCode<2048))
{this.current=(charCode>>6)|192;this._buffer.push((charCode&63)|128);}
else
{this.current=(charCode>>12)|224;this._buffer.push(((charCode>>6)&63)|128);this._buffer.push((charCode&63)|128);}
return true;}}}
function Base64DecodeEnumerator(input)
{this._input=input;this._index=-1;this._buffer=[];}
Base64DecodeEnumerator.prototype={current:64,moveNext:function()
{if(this._buffer.length>0)
{this.current=this._buffer.shift();return true;}
else if(this._index>=(this._input.length-1))
{this.current=64;return false;}
else
{var enc1=Base64.codex.indexOf(this._input.charAt(++this._index));var enc2=Base64.codex.indexOf(this._input.charAt(++this._index));var enc3=Base64.codex.indexOf(this._input.charAt(++this._index));var enc4=Base64.codex.indexOf(this._input.charAt(++this._index));var chr1=(enc1<<2)|(enc2>>4);var chr2=((enc2&15)<<4)|(enc3>>2);var chr3=((enc3&3)<<6)|enc4;this.current=chr1;if(enc3!=64)
this._buffer.push(chr2);if(enc4!=64)
this._buffer.push(chr3);return true;}}};(function(global,factory){if(typeof define==="function"&&define.amd){define(['jquery'],factory);}else if(typeof exports!=="undefined"){factory(require('jquery'));}else{var mod={exports:{}};factory(global.jquery);global.bootstrapSwitch=mod.exports;}})(this,function(_jquery){'use strict';var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}
var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}
return target;};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var $=_jquery2.default||window.jQuery||window.$;var BootstrapSwitch=function(){function BootstrapSwitch(element){var _this=this;var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,BootstrapSwitch);this.$element=$(element);this.options=$.extend({},$.fn.bootstrapSwitch.defaults,this._getElementOptions(),options);this.prevOptions={};this.$wrapper=$('<div>',{class:function _class(){var classes=[];classes.push(_this.options.state?'on':'off');if(_this.options.size){classes.push(_this.options.size);}
if(_this.options.disabled){classes.push('disabled');}
if(_this.options.readonly){classes.push('readonly');}
if(_this.options.indeterminate){classes.push('indeterminate');}
if(_this.options.inverse){classes.push('inverse');}
if(_this.$element.attr('id')){classes.push('id-'+_this.$element.attr('id'));}
return classes.map(_this._getClass.bind(_this)).concat([_this.options.baseClass],_this._getClasses(_this.options.wrapperClass)).join(' ');}});this.$container=$('<div>',{class:this._getClass('container')});this.$on=$('<span>',{html:this.options.onText,class:this._getClass('handle-on')+' '+this._getClass(this.options.onColor)});this.$off=$('<span>',{html:this.options.offText,class:this._getClass('handle-off')+' '+this._getClass(this.options.offColor)});this.$label=$('<span>',{html:this.options.labelText,class:this._getClass('label')});this.$element.on('init.bootstrapSwitch',this.options.onInit.bind(this,element));this.$element.on('switchChange.bootstrapSwitch',function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
if(_this.options.onSwitchChange.apply(element,args)===false){if(_this.$element.is(':radio')){$('[name="'+_this.$element.attr('name')+'"]').trigger('previousState.bootstrapSwitch',true);}else{_this.$element.trigger('previousState.bootstrapSwitch',true);}}});this.$container=this.$element.wrap(this.$container).parent();this.$wrapper=this.$container.wrap(this.$wrapper).parent();this.$element.before(this.options.inverse?this.$off:this.$on).before(this.$label).before(this.options.inverse?this.$on:this.$off);if(this.options.indeterminate){this.$element.prop('indeterminate',true);}
this._init();this._elementHandlers();this._handleHandlers();this._labelHandlers();this._formHandler();this._externalLabelHandler();this.$element.trigger('init.bootstrapSwitch',this.options.state);}
_createClass(BootstrapSwitch,[{key:'setPrevOptions',value:function setPrevOptions(){this.prevOptions=_extends({},this.options);}},{key:'state',value:function state(value,skip){if(typeof value==='undefined'){return this.options.state;}
if(this.options.disabled||this.options.readonly||this.options.state&&!this.options.radioAllOff&&this.$element.is(':radio')){return this.$element;}
if(this.$element.is(':radio')){$('[name="'+this.$element.attr('name')+'"]').trigger('setPreviousOptions.bootstrapSwitch');}else{this.$element.trigger('setPreviousOptions.bootstrapSwitch');}
if(this.options.indeterminate){this.indeterminate(false);}
this.$element.prop('checked',Boolean(value)).trigger('change.bootstrapSwitch',skip);return this.$element;}},{key:'toggleState',value:function toggleState(skip){if(this.options.disabled||this.options.readonly){return this.$element;}
if(this.options.indeterminate){this.indeterminate(false);return this.state(true);}else{return this.$element.prop('checked',!this.options.state).trigger('change.bootstrapSwitch',skip);}}},{key:'size',value:function size(value){if(typeof value==='undefined'){return this.options.size;}
if(this.options.size!=null){this.$wrapper.removeClass(this._getClass(this.options.size));}
if(value){this.$wrapper.addClass(this._getClass(value));}
this._width();this._containerPosition();this.options.size=value;return this.$element;}},{key:'animate',value:function animate(value){if(typeof value==='undefined'){return this.options.animate;}
if(this.options.animate===Boolean(value)){return this.$element;}
return this.toggleAnimate();}},{key:'toggleAnimate',value:function toggleAnimate(){this.options.animate=!this.options.animate;this.$wrapper.toggleClass(this._getClass('animate'));return this.$element;}},{key:'disabled',value:function disabled(value){if(typeof value==='undefined'){return this.options.disabled;}
if(this.options.disabled===Boolean(value)){return this.$element;}
return this.toggleDisabled();}},{key:'toggleDisabled',value:function toggleDisabled(){this.options.disabled=!this.options.disabled;this.$element.prop('disabled',this.options.disabled);this.$wrapper.toggleClass(this._getClass('disabled'));return this.$element;}},{key:'readonly',value:function readonly(value){if(typeof value==='undefined'){return this.options.readonly;}
if(this.options.readonly===Boolean(value)){return this.$element;}
return this.toggleReadonly();}},{key:'toggleReadonly',value:function toggleReadonly(){this.options.readonly=!this.options.readonly;this.$element.prop('readonly',this.options.readonly);this.$wrapper.toggleClass(this._getClass('readonly'));return this.$element;}},{key:'indeterminate',value:function indeterminate(value){if(typeof value==='undefined'){return this.options.indeterminate;}
if(this.options.indeterminate===Boolean(value)){return this.$element;}
return this.toggleIndeterminate();}},{key:'toggleIndeterminate',value:function toggleIndeterminate(){this.options.indeterminate=!this.options.indeterminate;this.$element.prop('indeterminate',this.options.indeterminate);this.$wrapper.toggleClass(this._getClass('indeterminate'));this._containerPosition();return this.$element;}},{key:'inverse',value:function inverse(value){if(typeof value==='undefined'){return this.options.inverse;}
if(this.options.inverse===Boolean(value)){return this.$element;}
return this.toggleInverse();}},{key:'toggleInverse',value:function toggleInverse(){this.$wrapper.toggleClass(this._getClass('inverse'));var $on=this.$on.clone(true);var $off=this.$off.clone(true);this.$on.replaceWith($off);this.$off.replaceWith($on);this.$on=$off;this.$off=$on;this.options.inverse=!this.options.inverse;return this.$element;}},{key:'onColor',value:function onColor(value){if(typeof value==='undefined'){return this.options.onColor;}
if(this.options.onColor){this.$on.removeClass(this._getClass(this.options.onColor));}
this.$on.addClass(this._getClass(value));this.options.onColor=value;return this.$element;}},{key:'offColor',value:function offColor(value){if(typeof value==='undefined'){return this.options.offColor;}
if(this.options.offColor){this.$off.removeClass(this._getClass(this.options.offColor));}
this.$off.addClass(this._getClass(value));this.options.offColor=value;return this.$element;}},{key:'onText',value:function onText(value){if(typeof value==='undefined'){return this.options.onText;}
this.$on.html(value);this._width();this._containerPosition();this.options.onText=value;return this.$element;}},{key:'offText',value:function offText(value){if(typeof value==='undefined'){return this.options.offText;}
this.$off.html(value);this._width();this._containerPosition();this.options.offText=value;return this.$element;}},{key:'labelText',value:function labelText(value){if(typeof value==='undefined'){return this.options.labelText;}
this.$label.html(value);this._width();this.options.labelText=value;return this.$element;}},{key:'handleWidth',value:function handleWidth(value){if(typeof value==='undefined'){return this.options.handleWidth;}
this.options.handleWidth=value;this._width();this._containerPosition();return this.$element;}},{key:'labelWidth',value:function labelWidth(value){if(typeof value==='undefined'){return this.options.labelWidth;}
this.options.labelWidth=value;this._width();this._containerPosition();return this.$element;}},{key:'baseClass',value:function baseClass(value){return this.options.baseClass;}},{key:'wrapperClass',value:function wrapperClass(value){if(typeof value==='undefined'){return this.options.wrapperClass;}
if(!value){value=$.fn.bootstrapSwitch.defaults.wrapperClass;}
this.$wrapper.removeClass(this._getClasses(this.options.wrapperClass).join(' '));this.$wrapper.addClass(this._getClasses(value).join(' '));this.options.wrapperClass=value;return this.$element;}},{key:'radioAllOff',value:function radioAllOff(value){if(typeof value==='undefined'){return this.options.radioAllOff;}
var val=Boolean(value);if(this.options.radioAllOff===val){return this.$element;}
this.options.radioAllOff=val;return this.$element;}},{key:'onInit',value:function onInit(value){if(typeof value==='undefined'){return this.options.onInit;}
if(!value){value=$.fn.bootstrapSwitch.defaults.onInit;}
this.options.onInit=value;return this.$element;}},{key:'onSwitchChange',value:function onSwitchChange(value){if(typeof value==='undefined'){return this.options.onSwitchChange;}
if(!value){value=$.fn.bootstrapSwitch.defaults.onSwitchChange;}
this.options.onSwitchChange=value;return this.$element;}},{key:'destroy',value:function destroy(){var $form=this.$element.closest('form');if($form.length){$form.off('reset.bootstrapSwitch').removeData('bootstrap-switch');}
this.$container.children().not(this.$element).remove();this.$element.unwrap().unwrap().off('.bootstrapSwitch').removeData('bootstrap-switch');return this.$element;}},{key:'_getElementOptions',value:function _getElementOptions(){return{state:this.$element.is(':checked'),size:this.$element.data('size'),animate:this.$element.data('animate'),disabled:this.$element.is(':disabled'),readonly:this.$element.is('[readonly]'),indeterminate:this.$element.data('indeterminate'),inverse:this.$element.data('inverse'),radioAllOff:this.$element.data('radio-all-off'),onColor:this.$element.data('on-color'),offColor:this.$element.data('off-color'),onText:this.$element.data('on-text'),offText:this.$element.data('off-text'),labelText:this.$element.data('label-text'),handleWidth:this.$element.data('handle-width'),labelWidth:this.$element.data('label-width'),baseClass:this.$element.data('base-class'),wrapperClass:this.$element.data('wrapper-class')};}},{key:'_width',value:function _width(){var _this2=this;var $handles=this.$on.add(this.$off).add(this.$label).css('width','');var handleWidth=this.options.handleWidth==='auto'?Math.round(Math.max(this.$on.width(),this.$off.width())):this.options.handleWidth;$handles.width(handleWidth);this.$label.width(function(index,width){if(_this2.options.labelWidth!=='auto'){return _this2.options.labelWidth;}
if(width<handleWidth){return handleWidth;}
return width;});this._handleWidth=this.$on.outerWidth();this._labelWidth=this.$label.outerWidth();this.$container.width(this._handleWidth*2+this._labelWidth);return this.$wrapper.width(this._handleWidth+this._labelWidth);}},{key:'_containerPosition',value:function _containerPosition(){var _this3=this;var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.options.state;var callback=arguments[1];this.$container.css('margin-left',function(){var values=[0,'-'+_this3._handleWidth+'px'];if(_this3.options.indeterminate){return'-'+_this3._handleWidth/2+'px';}
if(state){if(_this3.options.inverse){return values[1];}else{return values[0];}}else{if(_this3.options.inverse){return values[0];}else{return values[1];}}});}},{key:'_init',value:function _init(){var _this4=this;var init=function init(){_this4.setPrevOptions();_this4._width();_this4._containerPosition();setTimeout(function(){if(_this4.options.animate){return _this4.$wrapper.addClass(_this4._getClass('animate'));}},50);};if(this.$wrapper.is(':visible')){init();return;}
var initInterval=window.setInterval(function(){if(_this4.$wrapper.is(':visible')){init();return window.clearInterval(initInterval);}},50);}},{key:'_elementHandlers',value:function _elementHandlers(){var _this5=this;return this.$element.on({'setPreviousOptions.bootstrapSwitch':this.setPrevOptions.bind(this),'previousState.bootstrapSwitch':function previousStateBootstrapSwitch(){_this5.options=_this5.prevOptions;if(_this5.options.indeterminate){_this5.$wrapper.addClass(_this5._getClass('indeterminate'));}
_this5.$element.prop('checked',_this5.options.state).trigger('change.bootstrapSwitch',true);},'change.bootstrapSwitch':function changeBootstrapSwitch(event,skip){event.preventDefault();event.stopImmediatePropagation();var state=_this5.$element.is(':checked');_this5._containerPosition(state);if(state===_this5.options.state){return;}
_this5.options.state=state;_this5.$wrapper.toggleClass(_this5._getClass('off')).toggleClass(_this5._getClass('on'));if(!skip){if(_this5.$element.is(':radio')){$('[name="'+_this5.$element.attr('name')+'"]').not(_this5.$element).prop('checked',false).trigger('change.bootstrapSwitch',true);}
_this5.$element.trigger('switchChange.bootstrapSwitch',[state]);}},'focus.bootstrapSwitch':function focusBootstrapSwitch(event){event.preventDefault();_this5.$wrapper.addClass(_this5._getClass('focused'));},'blur.bootstrapSwitch':function blurBootstrapSwitch(event){event.preventDefault();_this5.$wrapper.removeClass(_this5._getClass('focused'));},'keydown.bootstrapSwitch':function keydownBootstrapSwitch(event){if(!event.which||_this5.options.disabled||_this5.options.readonly){return;}
if(event.which===37||event.which===39){event.preventDefault();event.stopImmediatePropagation();_this5.state(event.which===39);}}});}},{key:'_handleHandlers',value:function _handleHandlers(){var _this6=this;this.$on.on('click.bootstrapSwitch',function(event){event.preventDefault();event.stopPropagation();_this6.state(false);return _this6.$element.trigger('focus.bootstrapSwitch');});return this.$off.on('click.bootstrapSwitch',function(event){event.preventDefault();event.stopPropagation();_this6.state(true);return _this6.$element.trigger('focus.bootstrapSwitch');});}},{key:'_labelHandlers',value:function _labelHandlers(){var _this7=this;var handlers={click:function click(event){event.stopPropagation();},'mousedown.bootstrapSwitch touchstart.bootstrapSwitch':function mousedownBootstrapSwitchTouchstartBootstrapSwitch(event){if(_this7._dragStart||_this7.options.disabled||_this7.options.readonly){return;}
event.preventDefault();event.stopPropagation();_this7._dragStart=(event.pageX||event.originalEvent.touches[0].pageX)-parseInt(_this7.$container.css('margin-left'),10);if(_this7.options.animate){_this7.$wrapper.removeClass(_this7._getClass('animate'));}
_this7.$element.trigger('focus.bootstrapSwitch');},'mousemove.bootstrapSwitch touchmove.bootstrapSwitch':function mousemoveBootstrapSwitchTouchmoveBootstrapSwitch(event){if(_this7._dragStart==null){return;}
var difference=(event.pageX||event.originalEvent.touches[0].pageX)-_this7._dragStart;event.preventDefault();if(difference<-_this7._handleWidth||difference>0){return;}
_this7._dragEnd=difference;_this7.$container.css('margin-left',_this7._dragEnd+'px');},'mouseup.bootstrapSwitch touchend.bootstrapSwitch':function mouseupBootstrapSwitchTouchendBootstrapSwitch(event){if(!_this7._dragStart){return;}
event.preventDefault();if(_this7.options.animate){_this7.$wrapper.addClass(_this7._getClass('animate'));}
if(_this7._dragEnd){var state=_this7._dragEnd>-(_this7._handleWidth/2);_this7._dragEnd=false;_this7.state(_this7.options.inverse?!state:state);}else{_this7.state(!_this7.options.state);}
_this7._dragStart=false;},'mouseleave.bootstrapSwitch':function mouseleaveBootstrapSwitch(){_this7.$label.trigger('mouseup.bootstrapSwitch');}};this.$label.on(handlers);}},{key:'_externalLabelHandler',value:function _externalLabelHandler(){var _this8=this;var $externalLabel=this.$element.closest('label');$externalLabel.on('click',function(event){event.preventDefault();event.stopImmediatePropagation();if(event.target===$externalLabel[0]){_this8.toggleState();}});}},{key:'_formHandler',value:function _formHandler(){var $form=this.$element.closest('form');if($form.data('bootstrap-switch')){return;}
$form.on('reset.bootstrapSwitch',function(){window.setTimeout(function(){$form.find('input').filter(function(){return $(this).data('bootstrap-switch');}).each(function(){return $(this).bootstrapSwitch('state',this.checked);});},1);}).data('bootstrap-switch',true);}},{key:'_getClass',value:function _getClass(name){return this.options.baseClass+'-'+name;}},{key:'_getClasses',value:function _getClasses(classes){if(!$.isArray(classes)){return[this._getClass(classes)];}
return classes.map(this._getClass.bind(this));}}]);return BootstrapSwitch;}();$.fn.bootstrapSwitch=function(option){for(var _len2=arguments.length,args=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2];}
function reducer(ret,next){var $this=$(next);var existingData=$this.data('bootstrap-switch');var data=existingData||new BootstrapSwitch(next,option);if(!existingData){$this.data('bootstrap-switch',data);}
if(typeof option==='string'){return data[option].apply(data,args);}
return ret;}
return Array.prototype.reduce.call(this,reducer,this);};$.fn.bootstrapSwitch.Constructor=BootstrapSwitch;$.fn.bootstrapSwitch.defaults={state:true,size:null,animate:true,disabled:false,readonly:false,indeterminate:false,inverse:false,radioAllOff:false,onColor:'primary',offColor:'default',onText:'ON',offText:'OFF',labelText:'&nbsp',handleWidth:'auto',labelWidth:'auto',baseClass:'bootstrap-switch',wrapperClass:'wrapper',onInit:function onInit(){},onSwitchChange:function onSwitchChange(){}};});window.CopyProtection={track:function track(courseNum,userCopyProtection){var alreadyShownWarning=false
$('body').bind('cut copy',function(e){if(userCopyProtection==='False'&&!alreadyShownWarning){alreadyShownWarning=true
$.meDialog.open2({'url':'/reader/copy_protection/','closeButton':false,'id':'copy_protection_dialog','title':'Lockout Warning','width':'700px'})}
var ids=[]
var userSelection=window.getSelection()
var selectedText=userSelection.toString()
var rangeObject=userSelection.getRangeAt(0)
var range=document.createRange()
var isIE=navigator.appName==='Microsoft Internet Explorer'||!!(navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/rv 11/))
var lookupKey=isIE?'parentNode':'parentElement'
if(rangeObject.startContainer[lookupKey].id===rangeObject.endContainer[lookupKey].id){var id=rangeObject.startContainer[lookupKey].id===''?rangeObject.startContainer[lookupKey][lookupKey].id:rangeObject.startContainer[lookupKey].id
ids.push(id)}
range.setStart(rangeObject.startContainer,0)
range.setEnd(rangeObject.endContainer,0)
var nodes=range.cloneContents().querySelectorAll('p.para')
for(var i=0;i<nodes.length;i++){ids.push(nodes[i].id)}
$.ajax({url:'/account/support_dashboard.update_tracking/'+courseNum+'/',contentType:'application/json charset=utf-8',dataType:'json',data:JSON.stringify({ids:ids,text:selectedText}),type:'POST',progressBarStyle:false})})}};window.digitalspaghetti=window.digitalspaghetti||{};digitalspaghetti.password={'defaults':{'displayMinChar':true,'minChar':8,'minCharText':'You must enter a minimum of %d characters','colors':["#f00","#c06","#f60","#3c0","#3f0"],'scores':[20,30,43,50],'verdicts':['Weak','Normal','Medium','Strong','Very Strong'],'raisePower':1.4,'debug':false},'ruleScores':{'length':0,'lowercase':1,'uppercase':3,'one_number':3,'three_numbers':5,'one_special_char':3,'two_special_char':5,'upper_lower_combo':2,'letter_number_combo':2,'letter_number_char_combo':2},'rules':{'length':true,'lowercase':true,'uppercase':true,'one_number':true,'three_numbers':true,'one_special_char':true,'two_special_char':true,'upper_lower_combo':true,'letter_number_combo':true,'letter_number_char_combo':true},'validationRules':{'length':function(word,score){digitalspaghetti.password.tooShort=false;var wordlen=word.length;var lenScore=Math.pow(wordlen,digitalspaghetti.password.options.raisePower);if(wordlen<digitalspaghetti.password.options.minChar){lenScore=(lenScore-100);digitalspaghetti.password.tooShort=true;}
return lenScore;},'lowercase':function(word,score){return word.match(/[a-z]/)&&score;},'uppercase':function(word,score){return word.match(/[A-Z]/)&&score;},'one_number':function(word,score){return word.match(/\d+/)&&score;},'three_numbers':function(word,score){return word.match(/(.*[0-9].*[0-9].*[0-9])/)&&score;},'one_special_char':function(word,score){return word.match(/.[!,@,#,$,%,\^,&,*,?,_,~]/)&&score;},'two_special_char':function(word,score){return word.match(/(.*[!,@,#,$,%,\^,&,*,?,_,~].*[!,@,#,$,%,\^,&,*,?,_,~])/)&&score;},'upper_lower_combo':function(word,score){return word.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&score;},'letter_number_combo':function(word,score){return word.match(/([a-zA-Z])/)&&word.match(/([0-9])/)&&score;},'letter_number_char_combo':function(word,score){return word.match(/([a-zA-Z0-9].*[!,@,#,$,%,\^,&,*,?,_,~])|([!,@,#,$,%,\^,&,*,?,_,~].*[a-zA-Z0-9])/)&&score;}},'attachWidget':function(element){var output=['<div id="password-strength">'];if(digitalspaghetti.password.options.displayMinChar&&!digitalspaghetti.password.tooShort){output.push('<span class="password-min-char">'+digitalspaghetti.password.options.minCharText.replace('%d',digitalspaghetti.password.options.minChar)+'</span>');}
output.push('<span class="password-strength-bar"></span>');output.push('</div>');output=output.join('');jQuery(element).after(output);},'debugOutput':function(element){if(typeof console.log==='function'){console.log(digitalspaghetti.password);}else{alert(digitalspaghetti.password);}},'addRule':function(name,method,score,active){digitalspaghetti.password.rules[name]=active;digitalspaghetti.password.ruleScores[name]=score;digitalspaghetti.password.validationRules[name]=method;return true;},'init':function(element,options){digitalspaghetti.password.options=jQuery.extend({},digitalspaghetti.password.defaults,options);digitalspaghetti.password.attachWidget(element);jQuery(element).keyup(function(){digitalspaghetti.password.calculateScore(jQuery(this).val());});if(digitalspaghetti.password.options.debug){digitalspaghetti.password.debugOutput();}},'calculateScore':function(word){digitalspaghetti.password.totalscore=0;digitalspaghetti.password.width=0;for(var key in digitalspaghetti.password.rules)if(digitalspaghetti.password.rules.hasOwnProperty(key)){if(digitalspaghetti.password.rules[key]===true){var score=digitalspaghetti.password.ruleScores[key];var result=digitalspaghetti.password.validationRules[key](word,score);if(result){digitalspaghetti.password.totalscore+=result;}}
if(digitalspaghetti.password.totalscore<=digitalspaghetti.password.options.scores[0]){digitalspaghetti.password.strColor=digitalspaghetti.password.options.colors[0];digitalspaghetti.password.strText=digitalspaghetti.password.options.verdicts[0];digitalspaghetti.password.width="1";}else if(digitalspaghetti.password.totalscore>digitalspaghetti.password.options.scores[0]&&digitalspaghetti.password.totalscore<=digitalspaghetti.password.options.scores[1]){digitalspaghetti.password.strColor=digitalspaghetti.password.options.colors[1];digitalspaghetti.password.strText=digitalspaghetti.password.options.verdicts[1];digitalspaghetti.password.width="25";}else if(digitalspaghetti.password.totalscore>digitalspaghetti.password.options.scores[1]&&digitalspaghetti.password.totalscore<=digitalspaghetti.password.options.scores[2]){digitalspaghetti.password.strColor=digitalspaghetti.password.options.colors[2];digitalspaghetti.password.strText=digitalspaghetti.password.options.verdicts[2];digitalspaghetti.password.width="50";}else if(digitalspaghetti.password.totalscore>digitalspaghetti.password.options.scores[2]&&digitalspaghetti.password.totalscore<=digitalspaghetti.password.options.scores[3]){digitalspaghetti.password.strColor=digitalspaghetti.password.options.colors[3];digitalspaghetti.password.strText=digitalspaghetti.password.options.verdicts[3];digitalspaghetti.password.width="75";}else{digitalspaghetti.password.strColor=digitalspaghetti.password.options.colors[4];digitalspaghetti.password.strText=digitalspaghetti.password.options.verdicts[4];digitalspaghetti.password.width="99";}
jQuery('.password-strength-bar').stop();if(digitalspaghetti.password.options.displayMinChar&&!digitalspaghetti.password.tooShort){jQuery('.password-min-char').hide();}else{jQuery('.password-min-char').show();}
jQuery('.password-strength-bar').animate({opacity:0.5},'fast','linear',function(){jQuery(this).css({'display':'block','background-color':digitalspaghetti.password.strColor,'width':digitalspaghetti.password.width+"%"}).text(digitalspaghetti.password.strText);jQuery(this).animate({opacity:1},'fast','linear');});}}};jQuery.extend(jQuery.fn,{'pstrength':function(options){return this.each(function(){digitalspaghetti.password.init(this,options);});}});jQuery.extend(jQuery.fn.pstrength,{'addRule':function(name,method,score,active){digitalspaghetti.password.addRule(name,method,score,active);return true;},'changeScore':function(rule,score){digitalspaghetti.password.ruleScores[rule]=score;return true;},'ruleActive':function(rule,active){digitalspaghetti.password.rules[rule]=active;return true;}});(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports;}
var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports;}
__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter});}};__webpack_require__.r=function(exports){if(typeof Symbol!=='undefined'&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:'Module'});}
Object.defineProperty(exports,'__esModule',{value:true});};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if((mode&4)&&typeof value==='object'&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,'default',{enumerable:true,value:value});if(mode&2&&typeof value!='string')for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key];}.bind(null,key));return ns;};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module['default'];}:function getModuleExports(){return module;};__webpack_require__.d(getter,'a',getter);return getter;};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property);};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=0);})
({"./dmp-common.src.js":(function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es6.promise */ \"./node_modules/core-js/modules/es6.promise.js\");\n/* harmony import */ var core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es6.string.iterator */ \"./node_modules/core-js/modules/es6.string.iterator.js\");\n/* harmony import */ var core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es6.object.keys */ \"./node_modules/core-js/modules/es6.object.keys.js\");\n/* harmony import */ var core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es6.array.iterator */ \"./node_modules/core-js/modules/es6.array.iterator.js\");\n/* harmony import */ var core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es7.symbol.async-iterator */ \"./node_modules/core-js/modules/es7.symbol.async-iterator.js\");\n/* harmony import */ var core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es6.symbol */ \"./node_modules/core-js/modules/es6.symbol.js\");\n/* harmony import */ var core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/web.dom.iterable */ \"./node_modules/core-js/modules/web.dom.iterable.js\");\n/* harmony import */ var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nif (!window[\"DMP_CONTEXT\"]) {\n  /** Main DMP class - a single instance of this class is set as window.DMP_CONTEXT */\n  var DMP =\n  /*#__PURE__*/\n  function () {\n    function DMP() {\n      _classCallCheck(this, DMP);\n\n      this.__version__ = '5.11.2'; // DMP version to check for mismatches\n\n      this.contexts = {}; // id -> context1\n\n      this.templates = {}; // app/template -> info\n\n      this.lastContext = null; // last inserted context (see getAll() below)\n\n      this.logEnabled = null; // whether the log is DEBUG in settings\n    }\n    /*\n        Sets a context in the main object.\n        This is called by the DMP context provider.\n    */\n\n\n    _createClass(DMP, [{\n      key: \"set\",\n      value: function set(context) {\n        this.logEnabled = context.log || this.logEnabled;\n\n        if (this.__version__ != context.version) {\n          this.log(['server version', context.version, 'is different from dmp-common.js', DMP_CONTEXT.__version__, '- unexpected behavior may occur']);\n        }\n\n        this.log(['creating context for', context.templates[context.templates.length - 1]], context, context);\n        this.contexts[context.id] = context;\n        this.lastContext = context;\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = context.templates[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var tname = _step.value;\n            this.getTemplate(tname).addContext(context);\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      }\n      /* Gets the template object for the given name, creating if needed */\n\n    }, {\n      key: \"getTemplate\",\n      value: function getTemplate(tname) {\n        var template = this.templates[tname];\n\n        if (!template) {\n          template = new Template(this, tname);\n          this.templates[tname] = template;\n        }\n\n        return template;\n      }\n      /* Ensures a context: gets the context by the given id, or returns the context if not a string */\n\n    }, {\n      key: \"getContextById\",\n      value: function getContextById(context) {\n        if (typeof context === 'string' || context instanceof String) {\n          return this.contexts[context];\n        }\n\n        return context; // might already be a context object\n      }\n      /*\n          Convenience method to retrieve context values. If multiple script contexts are found,\n          such as when ajax retrieves the same template snippet multiple times, the first \"previously unreturned\"\n          one is returned. This method does not return the full context objects but rather the values dictionary.\n               DMP_CONTEXT.get()                                           // values for the currently-executing script\n              DMP_CONTEXT.get('myapp/mytemplate')                         // values for the app/template\n              DMP_CONTEXT.get(document.querySelector('some selector'))    // values for the specified <script> tag\n              DMP_CONTEXT.get('context id')                               // values for the given context\n      */\n\n    }, {\n      key: \"get\",\n      value: function get(option) {\n        var contexts = this.getAll(option); // step through the contexts and return the first one that hasn't ever been returned.\n        // this way if the script content has been disconnected from the <script> tag (jQuery, I'm looking at you),\n        // we return the contexts in the best order possible.\n\n        for (var i = 0; i < contexts.length; i++) {\n          var context = contexts[i];\n\n          if (!context.returnedByGet || i == contexts.length - 1) {\n            // if at last context, return it anyway\n            context.returnedByGet = true;\n            return context.values;\n          }\n        } // if we get here, the list was empty\n\n\n        return undefined;\n      }\n      /*\n          Retrieves the contexts for all scripts on the page matching the option.\n          The returned array usually has one context item, but if a template is included\n          more than once in a request, it will generally have a context for each render.\n          Note that this method returns the full context objects, not just the values.\n          Ways to call:\n              // returns an array of one: the currently-executing script\n              // (this is the preferred way when on script's first execution)\n              DMP_CONTEXT.getAll()\n              // returns an array of one: the context for the given <script> element\n              // (elem retrieved with querySelector, getElementById, etc.)\n              DMP_CONTEXT.getAll(script_elem)\n              // an array of all contexts matching this template name\n              DMP_CONTEXT.getAll('myapp/mytemplate')\n              // an array of one: the context matching the given id\n              DMP_CONTEXT.getAll('context id')\n      */\n\n    }, {\n      key: \"getAll\",\n      value: function getAll(option) {\n        // if empty option and we have currentScript[data-context=\"something\"], use that for the option\n        if (!option && document.currentScript && document.currentScript.getAttribute('data-context')) {\n          option = document.currentScript;\n        } // if still empty option, get the last-added context\n\n\n        if (!option && this.lastContext) {\n          return [this.lastContext];\n        } // if a string, assume it is a context name in format \"app/template\"\n        else if (typeof option === 'string' || option instanceof String) {\n            var template = this.templates[option];\n\n            if (template) {\n              return template.contexts;\n            }\n\n            var context = this.getContextById(option);\n\n            if (context) {\n              return [context];\n            }\n          } // if script[current-context=\"something\"]\n          else if (option && option.nodeType === 1 && option.nodeName.toLowerCase() == 'script' && option.getAttribute('data-context')) {\n              var _context = this.getContextById(option.getAttribute('data-context'));\n\n              if (_context) {\n                return [_context];\n              }\n            } //if\n\n\n        return [];\n      } ////////////////////////////////////////\n      ///  Webpack-related methods\n\n      /*\n          Links bundle-defined template functions so they can be calling\n          from DMP_CONTEXT (i.e. outside the bundle).\n      */\n\n    }, {\n      key: \"loadBundle\",\n      value: function loadBundle(bundle) {\n        // insert these functions into the main map\n        this.log(['initializing loaders in bundle'], null, Object.keys(bundle));\n\n        var _arr = Object.keys(bundle);\n\n        for (var _i = 0; _i < _arr.length; _i++) {\n          var tname = _arr[_i];\n          var template = this.getTemplate(tname);\n          template.loader = bundle[tname];\n        } // check the templates impacted by this bundle\n\n\n        var _arr2 = Object.keys(bundle);\n\n        for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n          var _tname = _arr2[_i2];\n\n          this.getTemplate(_tname)._checkReady();\n        }\n      }\n      /* Called by the webpack provider - main trigger for template code */\n\n    }, {\n      key: \"callBundleContext\",\n      value: function callBundleContext(context) {\n        var _this = this;\n\n        context = this.getContextById(context); // wait for the template functions to load from the bundle\n\n        var notifyPromises = context.templates.map(function (tname) {\n          return _this.getTemplate(tname).notifyReady();\n        });\n        Promise.all(notifyPromises).then(function (templates) {\n          var _iteratorNormalCompletion2 = true;\n          var _didIteratorError2 = false;\n          var _iteratorError2 = undefined;\n\n          try {\n            for (var _iterator2 = templates[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              var template = _step2.value;\n\n              _this.log(['calling', template.tname], context, context);\n\n              template.call(context);\n            }\n          } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n                _iterator2.return();\n              }\n            } finally {\n              if (_didIteratorError2) {\n                throw _iteratorError2;\n              }\n            }\n          }\n        });\n      }\n      /* Enabled when DMP's logger is set to DEBUG in settings */\n\n    }, {\n      key: \"log\",\n      value: function log(messages, context, data) {\n        if (this.logEnabled) {\n          context = this.getContextById(context);\n\n          if (context) {\n            messages.unshift(\"-\");\n            messages.unshift(\"(\" + context.templates[context.templates.length - 1] + \")\");\n            messages.unshift(context.id);\n          }\n\n          messages.unshift('[DMP]');\n          console.debug(messages.join(' '), data || '');\n        }\n      }\n    }]);\n\n    return DMP;\n  }(); //DMP class\n\n\n  var Template =\n  /*#__PURE__*/\n  function () {\n    function Template(dmp, tname) {\n      _classCallCheck(this, Template);\n\n      this.dmp = dmp; // backwards reference to DMP instance\n\n      this.tname = tname; // app/page name of this template\n\n      this.contexts = []; // contexts that include this template\n\n      this.loader = null; // webpack function associated with this template\n\n      this.loaderCalled = false; // whether the loader function has been called\n\n      this.modules = null; // the dynamically-imported modules (once loaded)\n\n      this.unresolvedPromises = []; // promise queue during loading of webpack function\n    }\n    /* Associates a context with this template */\n\n\n    _createClass(Template, [{\n      key: \"addContext\",\n      value: function addContext(context) {\n        this.contexts.push(context);\n      }\n      /*\n          Calls the default exported functions in the modules list of this template.\n          Assumes that the modules are loaded (notifyReady has resolved).\n      */\n\n    }, {\n      key: \"call\",\n      value: function call(context) {\n        context = this.dmp.getContextById(context);\n\n        if (context) {\n          // step through the imported modules and run any that have a default function.\n          // some modules take effect simply by importing them (e.g. CSS), but other\n          // modules export a function that needs to be called (e.g. JS). The function is\n          // required because importing only runs the first time it's imported. If a template\n          // is included more than once in a request (such as <%include> in a for loop), the\n          // JS should run once for each time it's included. Hence a default exported function.\n          var _iteratorNormalCompletion3 = true;\n          var _didIteratorError3 = false;\n          var _iteratorError3 = undefined;\n\n          try {\n            for (var _iterator3 = this.modules[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n              var module = _step3.value;\n\n              if (module && module.default && module.default.apply) {\n                module.default.apply(context, [context.values]);\n              }\n            }\n          } catch (err) {\n            _didIteratorError3 = true;\n            _iteratorError3 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n                _iterator3.return();\n              }\n            } finally {\n              if (_didIteratorError3) {\n                throw _iteratorError3;\n              }\n            }\n          }\n        }\n      }\n      /* Returns a promise to be resolved when the bundle for this template is loaded */\n\n    }, {\n      key: \"notifyReady\",\n      value: function notifyReady() {\n        var _this2 = this;\n\n        var promise = new Promise(function (resolve, reject) {\n          _this2.unresolvedPromises.push(resolve);\n        });\n\n        this._checkReady();\n\n        return promise;\n      }\n      /*\n          Private method that checks loading status, resolving promises if ready.\n          This is triggered internally each time the template might be ready:\n              1. loadBundle() is called by the __entry__ file\n              2. the dynamic imports finish loading\n              3. callBundleContext calls notifyReady (might be ready immediately)\n      */\n\n    }, {\n      key: \"_checkReady\",\n      value: function _checkReady() {\n        var _this3 = this;\n\n        // is the bundle here yet?\n        if (!this.loader) {\n          this.dmp.log([this.tname, 'waiting for bundle']);\n          return;\n        } // not all templates in a bundle need to load, so only\n        // continue if someone has asked to be notified\n\n\n        if (this.unresolvedPromises.length == 0) {\n          return;\n        } // has the loader function run yet?\n\n\n        if (!this.loaderCalled) {\n          this.dmp.log([this.tname, 'calling loader']);\n          this.loaderCalled = true;\n          Promise.all(this.loader()).then(function (modules) {\n            _this3.modules = modules;\n\n            _this3._checkReady();\n          });\n          return;\n        } // are we still waiting on the dynamically-imported modules to load?\n\n\n        if (this.modules == null) {\n          this.dmp.log([this.tname, 'waiting on dynamic imports']);\n          return;\n        } // stick a fork in this template...it's ready - notify everyone\n\n\n        while (this.unresolvedPromises.length > 0) {\n          this.dmp.log([this.tname, 'dynamic imports loaded']);\n          var resolve = this.unresolvedPromises.shift();\n          resolve(this);\n        }\n      }\n    }]);\n\n    return Template;\n  }(); // main instance - right now it has to be in the global window scope\n  // so <script> tags can get to it.\n  // we checked at the top, but checking for rerun of this script one\n  // more time before setting in the window\n\n\n  if (!window[\"DMP_CONTEXT\"]) {\n    window[\"DMP_CONTEXT\"] = new DMP();\n  }\n} // default export for ES6 environments\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (window[\"DMP_CONTEXT\"]);\n\n//# sourceURL=webpack:///./dmp-common.src.js?");}),"./node_modules/core-js/modules/_a-function.js":(function(module,exports){eval("module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_a-function.js?");}),"./node_modules/core-js/modules/_add-to-unscopables.js":(function(module,exports,__webpack_require__){eval("// 22.1.3.31 Array.prototype[@@unscopables]\nvar UNSCOPABLES = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('unscopables');\n\nvar ArrayProto = Array.prototype;\nif (ArrayProto[UNSCOPABLES] == undefined) __webpack_require__(/*! ./_hide */ \"./node_modules/core-js/modules/_hide.js\")(ArrayProto, UNSCOPABLES, {});\n\nmodule.exports = function (key) {\n  ArrayProto[UNSCOPABLES][key] = true;\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_add-to-unscopables.js?");}),"./node_modules/core-js/modules/_an-instance.js":(function(module,exports){eval("module.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || forbiddenField !== undefined && forbiddenField in it) {\n    throw TypeError(name + ': incorrect invocation!');\n  }\n\n  return it;\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_an-instance.js?");}),"./node_modules/core-js/modules/_an-object.js":(function(module,exports,__webpack_require__){eval("var isObject = __webpack_require__(/*! ./_is-object */ \"./node_modules/core-js/modules/_is-object.js\");\n\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_an-object.js?");}),"./node_modules/core-js/modules/_array-includes.js":(function(module,exports,__webpack_require__){eval("// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ \"./node_modules/core-js/modules/_to-iobject.js\");\n\nvar toLength = __webpack_require__(/*! ./_to-length */ \"./node_modules/core-js/modules/_to-length.js\");\n\nvar toAbsoluteIndex = __webpack_require__(/*! ./_to-absolute-index */ \"./node_modules/core-js/modules/_to-absolute-index.js\");\n\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value; // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++]; // eslint-disable-next-line no-self-compare\n\n      if (value != value) return true; // Array#indexOf ignores holes, Array#includes - not\n    } else for (; length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    }\n    return !IS_INCLUDES && -1;\n  };\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_array-includes.js?");}),"./node_modules/core-js/modules/_classof.js":(function(module,exports,__webpack_require__){eval("// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = __webpack_require__(/*! ./_cof */ \"./node_modules/core-js/modules/_cof.js\");\n\nvar TAG = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('toStringTag'); // ES3 wrong here\n\n\nvar ARG = cof(function () {\n  return arguments;\n}()) == 'Arguments'; // fallback for IE11 Script Access Denied error\n\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) {\n    /* empty */\n  }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null' // @@toStringTag case\n  : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T // builtinTag case\n  : ARG ? cof(O) // ES3 arguments fallback\n  : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_classof.js?");}),"./node_modules/core-js/modules/_cof.js":(function(module,exports){eval("var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_cof.js?");}),"./node_modules/core-js/modules/_core.js":(function(module,exports){eval("var core = module.exports = {\n  version: '2.6.3'\n};\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_core.js?");}),"./node_modules/core-js/modules/_ctx.js":(function(module,exports,__webpack_require__){eval("// optional / simple context binding\nvar aFunction = __webpack_require__(/*! ./_a-function */ \"./node_modules/core-js/modules/_a-function.js\");\n\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n\n  switch (length) {\n    case 1:\n      return function (a) {\n        return fn.call(that, a);\n      };\n\n    case 2:\n      return function (a, b) {\n        return fn.call(that, a, b);\n      };\n\n    case 3:\n      return function (a, b, c) {\n        return fn.call(that, a, b, c);\n      };\n  }\n\n  return function ()\n  /* ...args */\n  {\n    return fn.apply(that, arguments);\n  };\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_ctx.js?");}),"./node_modules/core-js/modules/_defined.js":(function(module,exports){eval("// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_defined.js?");}),"./node_modules/core-js/modules/_descriptors.js":(function(module,exports,__webpack_require__){eval("// Thank's IE8 for his funny defineProperty\nmodule.exports = !__webpack_require__(/*! ./_fails */ \"./node_modules/core-js/modules/_fails.js\")(function () {\n  return Object.defineProperty({}, 'a', {\n    get: function () {\n      return 7;\n    }\n  }).a != 7;\n});\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_descriptors.js?");}),"./node_modules/core-js/modules/_dom-create.js":(function(module,exports,__webpack_require__){eval("var isObject = __webpack_require__(/*! ./_is-object */ \"./node_modules/core-js/modules/_is-object.js\");\n\nvar document = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\").document; // typeof document.createElement is 'object' in old IE\n\n\nvar is = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_dom-create.js?");}),"./node_modules/core-js/modules/_enum-bug-keys.js":(function(module,exports){eval("// IE 8- don't enum bug keys\nmodule.exports = 'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'.split(',');\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_enum-bug-keys.js?");}),"./node_modules/core-js/modules/_enum-keys.js":(function(module,exports,__webpack_require__){eval("// all enumerable object keys, includes symbols\nvar getKeys = __webpack_require__(/*! ./_object-keys */ \"./node_modules/core-js/modules/_object-keys.js\");\n\nvar gOPS = __webpack_require__(/*! ./_object-gops */ \"./node_modules/core-js/modules/_object-gops.js\");\n\nvar pIE = __webpack_require__(/*! ./_object-pie */ \"./node_modules/core-js/modules/_object-pie.js\");\n\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  }\n\n  return result;\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_enum-keys.js?");}),"./node_modules/core-js/modules/_export.js":(function(module,exports,__webpack_require__){eval("var global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\n\nvar core = __webpack_require__(/*! ./_core */ \"./node_modules/core-js/modules/_core.js\");\n\nvar hide = __webpack_require__(/*! ./_hide */ \"./node_modules/core-js/modules/_hide.js\");\n\nvar redefine = __webpack_require__(/*! ./_redefine */ \"./node_modules/core-js/modules/_redefine.js\");\n\nvar ctx = __webpack_require__(/*! ./_ctx */ \"./node_modules/core-js/modules/_ctx.js\");\n\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE];\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});\n  var key, own, out, exp;\n  if (IS_GLOBAL) source = name;\n\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined; // export native or passed\n\n    out = (own ? target : source)[key]; // bind timers to global for call from export context\n\n    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out; // extend global\n\n    if (target) redefine(target, key, out, type & $export.U); // export\n\n    if (exports[key] != out) hide(exports, key, exp);\n    if (IS_PROTO && expProto[key] != out) expProto[key] = out;\n  }\n};\n\nglobal.core = core; // type bitmap\n\n$export.F = 1; // forced\n\n$export.G = 2; // global\n\n$export.S = 4; // static\n\n$export.P = 8; // proto\n\n$export.B = 16; // bind\n\n$export.W = 32; // wrap\n\n$export.U = 64; // safe\n\n$export.R = 128; // real proto method for `library`\n\nmodule.exports = $export;\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_export.js?");}),"./node_modules/core-js/modules/_fails.js":(function(module,exports){eval("module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_fails.js?");}),"./node_modules/core-js/modules/_for-of.js":(function(module,exports,__webpack_require__){eval("var ctx = __webpack_require__(/*! ./_ctx */ \"./node_modules/core-js/modules/_ctx.js\");\n\nvar call = __webpack_require__(/*! ./_iter-call */ \"./node_modules/core-js/modules/_iter-call.js\");\n\nvar isArrayIter = __webpack_require__(/*! ./_is-array-iter */ \"./node_modules/core-js/modules/_is-array-iter.js\");\n\nvar anObject = __webpack_require__(/*! ./_an-object */ \"./node_modules/core-js/modules/_an-object.js\");\n\nvar toLength = __webpack_require__(/*! ./_to-length */ \"./node_modules/core-js/modules/_to-length.js\");\n\nvar getIterFn = __webpack_require__(/*! ./core.get-iterator-method */ \"./node_modules/core-js/modules/core.get-iterator-method.js\");\n\nvar BREAK = {};\nvar RETURN = {};\n\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () {\n    return iterable;\n  } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!'); // fast case for arrays with default iterator\n\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\n\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_for-of.js?");}),"./node_modules/core-js/modules/_global.js":(function(module,exports){eval("// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math ? window : typeof self != 'undefined' && self.Math == Math ? self // eslint-disable-next-line no-new-func\n: Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_global.js?");}),"./node_modules/core-js/modules/_has.js":(function(module,exports){eval("var hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_has.js?");}),"./node_modules/core-js/modules/_hide.js":(function(module,exports,__webpack_require__){eval("var dP = __webpack_require__(/*! ./_object-dp */ \"./node_modules/core-js/modules/_object-dp.js\");\n\nvar createDesc = __webpack_require__(/*! ./_property-desc */ \"./node_modules/core-js/modules/_property-desc.js\");\n\nmodule.exports = __webpack_require__(/*! ./_descriptors */ \"./node_modules/core-js/modules/_descriptors.js\") ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_hide.js?");}),"./node_modules/core-js/modules/_html.js":(function(module,exports,__webpack_require__){eval("var document = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\").document;\n\nmodule.exports = document && document.documentElement;\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_html.js?");}),"./node_modules/core-js/modules/_ie8-dom-define.js":(function(module,exports,__webpack_require__){eval("module.exports = !__webpack_require__(/*! ./_descriptors */ \"./node_modules/core-js/modules/_descriptors.js\") && !__webpack_require__(/*! ./_fails */ \"./node_modules/core-js/modules/_fails.js\")(function () {\n  return Object.defineProperty(__webpack_require__(/*! ./_dom-create */ \"./node_modules/core-js/modules/_dom-create.js\")('div'), 'a', {\n    get: function () {\n      return 7;\n    }\n  }).a != 7;\n});\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_ie8-dom-define.js?");}),"./node_modules/core-js/modules/_invoke.js":(function(module,exports){eval("// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n\n  switch (args.length) {\n    case 0:\n      return un ? fn() : fn.call(that);\n\n    case 1:\n      return un ? fn(args[0]) : fn.call(that, args[0]);\n\n    case 2:\n      return un ? fn(args[0], args[1]) : fn.call(that, args[0], args[1]);\n\n    case 3:\n      return un ? fn(args[0], args[1], args[2]) : fn.call(that, args[0], args[1], args[2]);\n\n    case 4:\n      return un ? fn(args[0], args[1], args[2], args[3]) : fn.call(that, args[0], args[1], args[2], args[3]);\n  }\n\n  return fn.apply(that, args);\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_invoke.js?");}),"./node_modules/core-js/modules/_iobject.js":(function(module,exports,__webpack_require__){eval("// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = __webpack_require__(/*! ./_cof */ \"./node_modules/core-js/modules/_cof.js\"); // eslint-disable-next-line no-prototype-builtins\n\n\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_iobject.js?");}),"./node_modules/core-js/modules/_is-array-iter.js":(function(module,exports,__webpack_require__){eval("// check on default Array iterator\nvar Iterators = __webpack_require__(/*! ./_iterators */ \"./node_modules/core-js/modules/_iterators.js\");\n\nvar ITERATOR = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('iterator');\n\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_is-array-iter.js?");}),"./node_modules/core-js/modules/_is-array.js":(function(module,exports,__webpack_require__){eval("// 7.2.2 IsArray(argument)\nvar cof = __webpack_require__(/*! ./_cof */ \"./node_modules/core-js/modules/_cof.js\");\n\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_is-array.js?");}),"./node_modules/core-js/modules/_is-object.js":(function(module,exports){eval("module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_is-object.js?");}),"./node_modules/core-js/modules/_iter-call.js":(function(module,exports,__webpack_require__){eval("// call something on iterator step with safe closing on error\nvar anObject = __webpack_require__(/*! ./_an-object */ \"./node_modules/core-js/modules/_an-object.js\");\n\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value); // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_iter-call.js?");}),"./node_modules/core-js/modules/_iter-create.js":(function(module,exports,__webpack_require__){"use strict";eval("\n\nvar create = __webpack_require__(/*! ./_object-create */ \"./node_modules/core-js/modules/_object-create.js\");\n\nvar descriptor = __webpack_require__(/*! ./_property-desc */ \"./node_modules/core-js/modules/_property-desc.js\");\n\nvar setToStringTag = __webpack_require__(/*! ./_set-to-string-tag */ \"./node_modules/core-js/modules/_set-to-string-tag.js\");\n\nvar IteratorPrototype = {}; // 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n\n__webpack_require__(/*! ./_hide */ \"./node_modules/core-js/modules/_hide.js\")(IteratorPrototype, __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('iterator'), function () {\n  return this;\n});\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, {\n    next: descriptor(1, next)\n  });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_iter-create.js?");}),"./node_modules/core-js/modules/_iter-define.js":(function(module,exports,__webpack_require__){"use strict";eval("\n\nvar LIBRARY = __webpack_require__(/*! ./_library */ \"./node_modules/core-js/modules/_library.js\");\n\nvar $export = __webpack_require__(/*! ./_export */ \"./node_modules/core-js/modules/_export.js\");\n\nvar redefine = __webpack_require__(/*! ./_redefine */ \"./node_modules/core-js/modules/_redefine.js\");\n\nvar hide = __webpack_require__(/*! ./_hide */ \"./node_modules/core-js/modules/_hide.js\");\n\nvar Iterators = __webpack_require__(/*! ./_iterators */ \"./node_modules/core-js/modules/_iterators.js\");\n\nvar $iterCreate = __webpack_require__(/*! ./_iter-create */ \"./node_modules/core-js/modules/_iter-create.js\");\n\nvar setToStringTag = __webpack_require__(/*! ./_set-to-string-tag */ \"./node_modules/core-js/modules/_set-to-string-tag.js\");\n\nvar getPrototypeOf = __webpack_require__(/*! ./_object-gpo */ \"./node_modules/core-js/modules/_object-gpo.js\");\n\nvar ITERATOR = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('iterator');\n\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\n\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () {\n  return this;\n};\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n\n    switch (kind) {\n      case KEYS:\n        return function keys() {\n          return new Constructor(this, kind);\n        };\n\n      case VALUES:\n        return function values() {\n          return new Constructor(this, kind);\n        };\n    }\n\n    return function entries() {\n      return new Constructor(this, kind);\n    };\n  };\n\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype; // Fix native\n\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true); // fix for some old engines\n\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  } // fix Array#{values, @@iterator}.name in V8 / FF\n\n\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n\n    $default = function values() {\n      return $native.call(this);\n    };\n  } // Define iterator\n\n\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  } // Plug for library\n\n\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n\n  return methods;\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_iter-define.js?");}),"./node_modules/core-js/modules/_iter-detect.js":(function(module,exports,__webpack_require__){eval("var ITERATOR = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('iterator');\n\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n\n  riter['return'] = function () {\n    SAFE_CLOSING = true;\n  }; // eslint-disable-next-line no-throw-literal\n\n\n  Array.from(riter, function () {\n    throw 2;\n  });\n} catch (e) {\n  /* empty */\n}\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n\n    iter.next = function () {\n      return {\n        done: safe = true\n      };\n    };\n\n    arr[ITERATOR] = function () {\n      return iter;\n    };\n\n    exec(arr);\n  } catch (e) {\n    /* empty */\n  }\n\n  return safe;\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_iter-detect.js?");}),"./node_modules/core-js/modules/_iter-step.js":(function(module,exports){eval("module.exports = function (done, value) {\n  return {\n    value: value,\n    done: !!done\n  };\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_iter-step.js?");}),"./node_modules/core-js/modules/_iterators.js":(function(module,exports){eval("module.exports = {};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_iterators.js?");}),"./node_modules/core-js/modules/_library.js":(function(module,exports){eval("module.exports = false;\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_library.js?");}),"./node_modules/core-js/modules/_meta.js":(function(module,exports,__webpack_require__){eval("var META = __webpack_require__(/*! ./_uid */ \"./node_modules/core-js/modules/_uid.js\")('meta');\n\nvar isObject = __webpack_require__(/*! ./_is-object */ \"./node_modules/core-js/modules/_is-object.js\");\n\nvar has = __webpack_require__(/*! ./_has */ \"./node_modules/core-js/modules/_has.js\");\n\nvar setDesc = __webpack_require__(/*! ./_object-dp */ \"./node_modules/core-js/modules/_object-dp.js\").f;\n\nvar id = 0;\n\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\n\nvar FREEZE = !__webpack_require__(/*! ./_fails */ \"./node_modules/core-js/modules/_fails.js\")(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\n\nvar setMeta = function (it) {\n  setDesc(it, META, {\n    value: {\n      i: 'O' + ++id,\n      // object ID\n      w: {} // weak collections IDs\n\n    }\n  });\n};\n\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F'; // not necessary to add metadata\n\n    if (!create) return 'E'; // add missing metadata\n\n    setMeta(it); // return object ID\n  }\n\n  return it[META].i;\n};\n\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true; // not necessary to add metadata\n\n    if (!create) return false; // add missing metadata\n\n    setMeta(it); // return hash weak collections IDs\n  }\n\n  return it[META].w;\n}; // add metadata on freeze-family methods calling\n\n\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\n\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_meta.js?");}),"./node_modules/core-js/modules/_microtask.js":(function(module,exports,__webpack_require__){eval("var global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\n\nvar macrotask = __webpack_require__(/*! ./_task */ \"./node_modules/core-js/modules/_task.js\").set;\n\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = __webpack_require__(/*! ./_cof */ \"./node_modules/core-js/modules/_cof.js\")(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();else last = undefined;\n        throw e;\n      }\n    }\n\n    last = undefined;\n    if (parent) parent.enter();\n  }; // Node.js\n\n\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    }; // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, {\n      characterData: true\n    }); // eslint-disable-line no-new\n\n    notify = function () {\n      node.data = toggle = !toggle;\n    }; // environments with maybe non-completely correct, but existent Promise\n\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    var promise = Promise.resolve(undefined);\n\n    notify = function () {\n      promise.then(flush);\n    }; // for other environments - macrotask based on:\n    // - setImmediate\n    // - MessageChannel\n    // - window.postMessag\n    // - onreadystatechange\n    // - setTimeout\n\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = {\n      fn: fn,\n      next: undefined\n    };\n    if (last) last.next = task;\n\n    if (!head) {\n      head = task;\n      notify();\n    }\n\n    last = task;\n  };\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_microtask.js?");}),"./node_modules/core-js/modules/_new-promise-capability.js":(function(module,exports,__webpack_require__){"use strict";eval(" // 25.4.1.5 NewPromiseCapability(C)\n\nvar aFunction = __webpack_require__(/*! ./_a-function */ \"./node_modules/core-js/modules/_a-function.js\");\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_new-promise-capability.js?");}),"./node_modules/core-js/modules/_object-create.js":(function(module,exports,__webpack_require__){eval("// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = __webpack_require__(/*! ./_an-object */ \"./node_modules/core-js/modules/_an-object.js\");\n\nvar dPs = __webpack_require__(/*! ./_object-dps */ \"./node_modules/core-js/modules/_object-dps.js\");\n\nvar enumBugKeys = __webpack_require__(/*! ./_enum-bug-keys */ \"./node_modules/core-js/modules/_enum-bug-keys.js\");\n\nvar IE_PROTO = __webpack_require__(/*! ./_shared-key */ \"./node_modules/core-js/modules/_shared-key.js\")('IE_PROTO');\n\nvar Empty = function () {\n  /* empty */\n};\n\nvar PROTOTYPE = 'prototype'; // Create object with fake `null` prototype: use iframe Object with cleared prototype\n\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = __webpack_require__(/*! ./_dom-create */ \"./node_modules/core-js/modules/_dom-create.js\")('iframe');\n\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n\n  __webpack_require__(/*! ./_html */ \"./node_modules/core-js/modules/_html.js\").appendChild(iframe);\n\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null; // add \"__proto__\" for Object.getPrototypeOf polyfill\n\n    result[IE_PROTO] = O;\n  } else result = createDict();\n\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_object-create.js?");}),"./node_modules/core-js/modules/_object-dp.js":(function(module,exports,__webpack_require__){eval("var anObject = __webpack_require__(/*! ./_an-object */ \"./node_modules/core-js/modules/_an-object.js\");\n\nvar IE8_DOM_DEFINE = __webpack_require__(/*! ./_ie8-dom-define */ \"./node_modules/core-js/modules/_ie8-dom-define.js\");\n\nvar toPrimitive = __webpack_require__(/*! ./_to-primitive */ \"./node_modules/core-js/modules/_to-primitive.js\");\n\nvar dP = Object.defineProperty;\nexports.f = __webpack_require__(/*! ./_descriptors */ \"./node_modules/core-js/modules/_descriptors.js\") ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) {\n    /* empty */\n  }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_object-dp.js?");}),"./node_modules/core-js/modules/_object-dps.js":(function(module,exports,__webpack_require__){eval("var dP = __webpack_require__(/*! ./_object-dp */ \"./node_modules/core-js/modules/_object-dp.js\");\n\nvar anObject = __webpack_require__(/*! ./_an-object */ \"./node_modules/core-js/modules/_an-object.js\");\n\nvar getKeys = __webpack_require__(/*! ./_object-keys */ \"./node_modules/core-js/modules/_object-keys.js\");\n\nmodule.exports = __webpack_require__(/*! ./_descriptors */ \"./node_modules/core-js/modules/_descriptors.js\") ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n\n  return O;\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_object-dps.js?");}),"./node_modules/core-js/modules/_object-gopd.js":(function(module,exports,__webpack_require__){eval("var pIE = __webpack_require__(/*! ./_object-pie */ \"./node_modules/core-js/modules/_object-pie.js\");\n\nvar createDesc = __webpack_require__(/*! ./_property-desc */ \"./node_modules/core-js/modules/_property-desc.js\");\n\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ \"./node_modules/core-js/modules/_to-iobject.js\");\n\nvar toPrimitive = __webpack_require__(/*! ./_to-primitive */ \"./node_modules/core-js/modules/_to-primitive.js\");\n\nvar has = __webpack_require__(/*! ./_has */ \"./node_modules/core-js/modules/_has.js\");\n\nvar IE8_DOM_DEFINE = __webpack_require__(/*! ./_ie8-dom-define */ \"./node_modules/core-js/modules/_ie8-dom-define.js\");\n\nvar gOPD = Object.getOwnPropertyDescriptor;\nexports.f = __webpack_require__(/*! ./_descriptors */ \"./node_modules/core-js/modules/_descriptors.js\") ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) {\n    /* empty */\n  }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_object-gopd.js?");}),"./node_modules/core-js/modules/_object-gopn-ext.js":(function(module,exports,__webpack_require__){eval("// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ \"./node_modules/core-js/modules/_to-iobject.js\");\n\nvar gOPN = __webpack_require__(/*! ./_object-gopn */ \"./node_modules/core-js/modules/_object-gopn.js\").f;\n\nvar toString = {}.toString;\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_object-gopn-ext.js?");}),"./node_modules/core-js/modules/_object-gopn.js":(function(module,exports,__webpack_require__){eval("// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = __webpack_require__(/*! ./_object-keys-internal */ \"./node_modules/core-js/modules/_object-keys-internal.js\");\n\nvar hiddenKeys = __webpack_require__(/*! ./_enum-bug-keys */ \"./node_modules/core-js/modules/_enum-bug-keys.js\").concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_object-gopn.js?");}),"./node_modules/core-js/modules/_object-gops.js":(function(module,exports){eval("exports.f = Object.getOwnPropertySymbols;\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_object-gops.js?");}),"./node_modules/core-js/modules/_object-gpo.js":(function(module,exports,__webpack_require__){eval("// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = __webpack_require__(/*! ./_has */ \"./node_modules/core-js/modules/_has.js\");\n\nvar toObject = __webpack_require__(/*! ./_to-object */ \"./node_modules/core-js/modules/_to-object.js\");\n\nvar IE_PROTO = __webpack_require__(/*! ./_shared-key */ \"./node_modules/core-js/modules/_shared-key.js\")('IE_PROTO');\n\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  }\n\n  return O instanceof Object ? ObjectProto : null;\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_object-gpo.js?");}),"./node_modules/core-js/modules/_object-keys-internal.js":(function(module,exports,__webpack_require__){eval("var has = __webpack_require__(/*! ./_has */ \"./node_modules/core-js/modules/_has.js\");\n\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ \"./node_modules/core-js/modules/_to-iobject.js\");\n\nvar arrayIndexOf = __webpack_require__(/*! ./_array-includes */ \"./node_modules/core-js/modules/_array-includes.js\")(false);\n\nvar IE_PROTO = __webpack_require__(/*! ./_shared-key */ \"./node_modules/core-js/modules/_shared-key.js\")('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key); // Don't enum bug & hidden keys\n\n\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n\n  return result;\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_object-keys-internal.js?");}),"./node_modules/core-js/modules/_object-keys.js":(function(module,exports,__webpack_require__){eval("// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = __webpack_require__(/*! ./_object-keys-internal */ \"./node_modules/core-js/modules/_object-keys-internal.js\");\n\nvar enumBugKeys = __webpack_require__(/*! ./_enum-bug-keys */ \"./node_modules/core-js/modules/_enum-bug-keys.js\");\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_object-keys.js?");}),"./node_modules/core-js/modules/_object-pie.js":(function(module,exports){eval("exports.f = {}.propertyIsEnumerable;\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_object-pie.js?");}),"./node_modules/core-js/modules/_object-sap.js":(function(module,exports,__webpack_require__){eval("// most Object methods by ES6 should accept primitives\nvar $export = __webpack_require__(/*! ./_export */ \"./node_modules/core-js/modules/_export.js\");\n\nvar core = __webpack_require__(/*! ./_core */ \"./node_modules/core-js/modules/_core.js\");\n\nvar fails = __webpack_require__(/*! ./_fails */ \"./node_modules/core-js/modules/_fails.js\");\n\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () {\n    fn(1);\n  }), 'Object', exp);\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_object-sap.js?");}),"./node_modules/core-js/modules/_perform.js":(function(module,exports){eval("module.exports = function (exec) {\n  try {\n    return {\n      e: false,\n      v: exec()\n    };\n  } catch (e) {\n    return {\n      e: true,\n      v: e\n    };\n  }\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_perform.js?");}),"./node_modules/core-js/modules/_promise-resolve.js":(function(module,exports,__webpack_require__){eval("var anObject = __webpack_require__(/*! ./_an-object */ \"./node_modules/core-js/modules/_an-object.js\");\n\nvar isObject = __webpack_require__(/*! ./_is-object */ \"./node_modules/core-js/modules/_is-object.js\");\n\nvar newPromiseCapability = __webpack_require__(/*! ./_new-promise-capability */ \"./node_modules/core-js/modules/_new-promise-capability.js\");\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_promise-resolve.js?");}),"./node_modules/core-js/modules/_property-desc.js":(function(module,exports){eval("module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_property-desc.js?");}),"./node_modules/core-js/modules/_redefine-all.js":(function(module,exports,__webpack_require__){eval("var redefine = __webpack_require__(/*! ./_redefine */ \"./node_modules/core-js/modules/_redefine.js\");\n\nmodule.exports = function (target, src, safe) {\n  for (var key in src) redefine(target, key, src[key], safe);\n\n  return target;\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_redefine-all.js?");}),"./node_modules/core-js/modules/_redefine.js":(function(module,exports,__webpack_require__){eval("var global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\n\nvar hide = __webpack_require__(/*! ./_hide */ \"./node_modules/core-js/modules/_hide.js\");\n\nvar has = __webpack_require__(/*! ./_has */ \"./node_modules/core-js/modules/_has.js\");\n\nvar SRC = __webpack_require__(/*! ./_uid */ \"./node_modules/core-js/modules/_uid.js\")('src');\n\nvar TO_STRING = 'toString';\nvar $toString = Function[TO_STRING];\nvar TPL = ('' + $toString).split(TO_STRING);\n\n__webpack_require__(/*! ./_core */ \"./node_modules/core-js/modules/_core.js\").inspectSource = function (it) {\n  return $toString.call(it);\n};\n\n(module.exports = function (O, key, val, safe) {\n  var isFunction = typeof val == 'function';\n  if (isFunction) has(val, 'name') || hide(val, 'name', key);\n  if (O[key] === val) return;\n  if (isFunction) has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n\n  if (O === global) {\n    O[key] = val;\n  } else if (!safe) {\n    delete O[key];\n    hide(O, key, val);\n  } else if (O[key]) {\n    O[key] = val;\n  } else {\n    hide(O, key, val);\n  } // add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n\n})(Function.prototype, TO_STRING, function toString() {\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_redefine.js?");}),"./node_modules/core-js/modules/_set-species.js":(function(module,exports,__webpack_require__){"use strict";eval("\n\nvar global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\n\nvar dP = __webpack_require__(/*! ./_object-dp */ \"./node_modules/core-js/modules/_object-dp.js\");\n\nvar DESCRIPTORS = __webpack_require__(/*! ./_descriptors */ \"./node_modules/core-js/modules/_descriptors.js\");\n\nvar SPECIES = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('species');\n\nmodule.exports = function (KEY) {\n  var C = global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () {\n      return this;\n    }\n  });\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_set-species.js?");}),"./node_modules/core-js/modules/_set-to-string-tag.js":(function(module,exports,__webpack_require__){eval("var def = __webpack_require__(/*! ./_object-dp */ \"./node_modules/core-js/modules/_object-dp.js\").f;\n\nvar has = __webpack_require__(/*! ./_has */ \"./node_modules/core-js/modules/_has.js\");\n\nvar TAG = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, {\n    configurable: true,\n    value: tag\n  });\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_set-to-string-tag.js?");}),"./node_modules/core-js/modules/_shared-key.js":(function(module,exports,__webpack_require__){eval("var shared = __webpack_require__(/*! ./_shared */ \"./node_modules/core-js/modules/_shared.js\")('keys');\n\nvar uid = __webpack_require__(/*! ./_uid */ \"./node_modules/core-js/modules/_uid.js\");\n\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_shared-key.js?");}),"./node_modules/core-js/modules/_shared.js":(function(module,exports,__webpack_require__){eval("var core = __webpack_require__(/*! ./_core */ \"./node_modules/core-js/modules/_core.js\");\n\nvar global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: __webpack_require__(/*! ./_library */ \"./node_modules/core-js/modules/_library.js\") ? 'pure' : 'global',\n  copyright: ' 2019 Denis Pushkarev (zloirock.ru)'\n});\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_shared.js?");}),"./node_modules/core-js/modules/_species-constructor.js":(function(module,exports,__webpack_require__){eval("// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = __webpack_require__(/*! ./_an-object */ \"./node_modules/core-js/modules/_an-object.js\");\n\nvar aFunction = __webpack_require__(/*! ./_a-function */ \"./node_modules/core-js/modules/_a-function.js\");\n\nvar SPECIES = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('species');\n\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_species-constructor.js?");}),"./node_modules/core-js/modules/_string-at.js":(function(module,exports,__webpack_require__){eval("var toInteger = __webpack_require__(/*! ./_to-integer */ \"./node_modules/core-js/modules/_to-integer.js\");\n\nvar defined = __webpack_require__(/*! ./_defined */ \"./node_modules/core-js/modules/_defined.js\"); // true  -> String#at\n// false -> String#codePointAt\n\n\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff ? TO_STRING ? s.charAt(i) : a : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_string-at.js?");}),"./node_modules/core-js/modules/_task.js":(function(module,exports,__webpack_require__){eval("var ctx = __webpack_require__(/*! ./_ctx */ \"./node_modules/core-js/modules/_ctx.js\");\n\nvar invoke = __webpack_require__(/*! ./_invoke */ \"./node_modules/core-js/modules/_invoke.js\");\n\nvar html = __webpack_require__(/*! ./_html */ \"./node_modules/core-js/modules/_html.js\");\n\nvar cel = __webpack_require__(/*! ./_dom-create */ \"./node_modules/core-js/modules/_dom-create.js\");\n\nvar global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\n\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\n\nvar run = function () {\n  var id = +this; // eslint-disable-next-line no-prototype-builtins\n\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\n\nvar listener = function (event) {\n  run.call(event.data);\n}; // Node.js 0.9+ & IE10+ has setImmediate, otherwise:\n\n\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n\n    while (arguments.length > i) args.push(arguments[i++]);\n\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n\n    defer(counter);\n    return counter;\n  };\n\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  }; // Node.js 0.8-\n\n\n  if (__webpack_require__(/*! ./_cof */ \"./node_modules/core-js/modules/_cof.js\")(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    }; // Sphere (JS game engine) Dispatch API\n\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    }; // Browsers with MessageChannel, includes WebWorkers\n\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1); // Browsers with postMessage, skip WebWorkers\n    // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n\n    global.addEventListener('message', listener, false); // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    }; // Rest old browsers\n\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\n\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_task.js?");}),"./node_modules/core-js/modules/_to-absolute-index.js":(function(module,exports,__webpack_require__){eval("var toInteger = __webpack_require__(/*! ./_to-integer */ \"./node_modules/core-js/modules/_to-integer.js\");\n\nvar max = Math.max;\nvar min = Math.min;\n\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_to-absolute-index.js?");}),"./node_modules/core-js/modules/_to-integer.js":(function(module,exports){eval("// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\n\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_to-integer.js?");}),"./node_modules/core-js/modules/_to-iobject.js":(function(module,exports,__webpack_require__){eval("// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = __webpack_require__(/*! ./_iobject */ \"./node_modules/core-js/modules/_iobject.js\");\n\nvar defined = __webpack_require__(/*! ./_defined */ \"./node_modules/core-js/modules/_defined.js\");\n\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_to-iobject.js?");}),"./node_modules/core-js/modules/_to-length.js":(function(module,exports,__webpack_require__){eval("// 7.1.15 ToLength\nvar toInteger = __webpack_require__(/*! ./_to-integer */ \"./node_modules/core-js/modules/_to-integer.js\");\n\nvar min = Math.min;\n\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_to-length.js?");}),"./node_modules/core-js/modules/_to-object.js":(function(module,exports,__webpack_require__){eval("// 7.1.13 ToObject(argument)\nvar defined = __webpack_require__(/*! ./_defined */ \"./node_modules/core-js/modules/_defined.js\");\n\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_to-object.js?");}),"./node_modules/core-js/modules/_to-primitive.js":(function(module,exports,__webpack_require__){eval("// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = __webpack_require__(/*! ./_is-object */ \"./node_modules/core-js/modules/_is-object.js\"); // instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\n\n\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_to-primitive.js?");}),"./node_modules/core-js/modules/_uid.js":(function(module,exports){eval("var id = 0;\nvar px = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_uid.js?");}),"./node_modules/core-js/modules/_user-agent.js":(function(module,exports,__webpack_require__){eval("var global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\n\nvar navigator = global.navigator;\nmodule.exports = navigator && navigator.userAgent || '';\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_user-agent.js?");}),"./node_modules/core-js/modules/_wks-define.js":(function(module,exports,__webpack_require__){eval("var global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\n\nvar core = __webpack_require__(/*! ./_core */ \"./node_modules/core-js/modules/_core.js\");\n\nvar LIBRARY = __webpack_require__(/*! ./_library */ \"./node_modules/core-js/modules/_library.js\");\n\nvar wksExt = __webpack_require__(/*! ./_wks-ext */ \"./node_modules/core-js/modules/_wks-ext.js\");\n\nvar defineProperty = __webpack_require__(/*! ./_object-dp */ \"./node_modules/core-js/modules/_object-dp.js\").f;\n\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, {\n    value: wksExt.f(name)\n  });\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_wks-define.js?");}),"./node_modules/core-js/modules/_wks-ext.js":(function(module,exports,__webpack_require__){eval("exports.f = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\");\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_wks-ext.js?");}),"./node_modules/core-js/modules/_wks.js":(function(module,exports,__webpack_require__){eval("var store = __webpack_require__(/*! ./_shared */ \"./node_modules/core-js/modules/_shared.js\")('wks');\n\nvar uid = __webpack_require__(/*! ./_uid */ \"./node_modules/core-js/modules/_uid.js\");\n\nvar Symbol = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\").Symbol;\n\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] = USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/_wks.js?");}),"./node_modules/core-js/modules/core.get-iterator-method.js":(function(module,exports,__webpack_require__){eval("var classof = __webpack_require__(/*! ./_classof */ \"./node_modules/core-js/modules/_classof.js\");\n\nvar ITERATOR = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('iterator');\n\nvar Iterators = __webpack_require__(/*! ./_iterators */ \"./node_modules/core-js/modules/_iterators.js\");\n\nmodule.exports = __webpack_require__(/*! ./_core */ \"./node_modules/core-js/modules/_core.js\").getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR] || it['@@iterator'] || Iterators[classof(it)];\n};\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/core.get-iterator-method.js?");}),"./node_modules/core-js/modules/es6.array.iterator.js":(function(module,exports,__webpack_require__){"use strict";eval("\n\nvar addToUnscopables = __webpack_require__(/*! ./_add-to-unscopables */ \"./node_modules/core-js/modules/_add-to-unscopables.js\");\n\nvar step = __webpack_require__(/*! ./_iter-step */ \"./node_modules/core-js/modules/_iter-step.js\");\n\nvar Iterators = __webpack_require__(/*! ./_iterators */ \"./node_modules/core-js/modules/_iterators.js\");\n\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ \"./node_modules/core-js/modules/_to-iobject.js\"); // 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\n\n\nmodule.exports = __webpack_require__(/*! ./_iter-define */ \"./node_modules/core-js/modules/_iter-define.js\")(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n\n  this._i = 0; // next index\n\n  this._k = kind; // kind\n  // 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values'); // argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\n\nIterators.Arguments = Iterators.Array;\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/es6.array.iterator.js?");}),"./node_modules/core-js/modules/es6.object.keys.js":(function(module,exports,__webpack_require__){eval("// 19.1.2.14 Object.keys(O)\nvar toObject = __webpack_require__(/*! ./_to-object */ \"./node_modules/core-js/modules/_to-object.js\");\n\nvar $keys = __webpack_require__(/*! ./_object-keys */ \"./node_modules/core-js/modules/_object-keys.js\");\n\n__webpack_require__(/*! ./_object-sap */ \"./node_modules/core-js/modules/_object-sap.js\")('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/es6.object.keys.js?");}),"./node_modules/core-js/modules/es6.promise.js":(function(module,exports,__webpack_require__){"use strict";eval("\n\nvar LIBRARY = __webpack_require__(/*! ./_library */ \"./node_modules/core-js/modules/_library.js\");\n\nvar global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\n\nvar ctx = __webpack_require__(/*! ./_ctx */ \"./node_modules/core-js/modules/_ctx.js\");\n\nvar classof = __webpack_require__(/*! ./_classof */ \"./node_modules/core-js/modules/_classof.js\");\n\nvar $export = __webpack_require__(/*! ./_export */ \"./node_modules/core-js/modules/_export.js\");\n\nvar isObject = __webpack_require__(/*! ./_is-object */ \"./node_modules/core-js/modules/_is-object.js\");\n\nvar aFunction = __webpack_require__(/*! ./_a-function */ \"./node_modules/core-js/modules/_a-function.js\");\n\nvar anInstance = __webpack_require__(/*! ./_an-instance */ \"./node_modules/core-js/modules/_an-instance.js\");\n\nvar forOf = __webpack_require__(/*! ./_for-of */ \"./node_modules/core-js/modules/_for-of.js\");\n\nvar speciesConstructor = __webpack_require__(/*! ./_species-constructor */ \"./node_modules/core-js/modules/_species-constructor.js\");\n\nvar task = __webpack_require__(/*! ./_task */ \"./node_modules/core-js/modules/_task.js\").set;\n\nvar microtask = __webpack_require__(/*! ./_microtask */ \"./node_modules/core-js/modules/_microtask.js\")();\n\nvar newPromiseCapabilityModule = __webpack_require__(/*! ./_new-promise-capability */ \"./node_modules/core-js/modules/_new-promise-capability.js\");\n\nvar perform = __webpack_require__(/*! ./_perform */ \"./node_modules/core-js/modules/_perform.js\");\n\nvar userAgent = __webpack_require__(/*! ./_user-agent */ \"./node_modules/core-js/modules/_user-agent.js\");\n\nvar promiseResolve = __webpack_require__(/*! ./_promise-resolve */ \"./node_modules/core-js/modules/_promise-resolve.js\");\n\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8 || '';\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\n\nvar empty = function () {\n  /* empty */\n};\n\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n\n    var FakePromise = (promise.constructor = {})[__webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('species')] = function (exec) {\n      exec(empty, empty);\n    }; // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n\n\n    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise // v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n    // we can't detect it synchronously, so just check versions\n    && v8.indexOf('6.6') !== 0 && userAgent.indexOf('Chrome/66') === -1;\n  } catch (e) {\n    /* empty */\n  }\n}(); // helpers\n\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\n\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n\n          if (handler === true) result = value;else {\n            if (domain) domain.enter();\n            result = handler(value); // may throw\n\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        if (domain && !exited) domain.exit();\n        reject(e);\n      }\n    };\n\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n\n\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\n\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({\n            promise: promise,\n            reason: value\n          });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      }); // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    }\n\n    promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\n\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\n\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({\n        promise: promise,\n        reason: promise._v\n      });\n    }\n  });\n};\n\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\n\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = {\n          _w: promise,\n          _d: false\n        }; // wrap\n\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({\n      _w: promise,\n      _d: false\n    }, e); // wrap\n  }\n}; // constructor polyfill\n\n\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  }; // eslint-disable-next-line no-unused-vars\n\n\n  Internal = function Promise(executor) {\n    this._c = []; // <- awaiting reactions\n\n    this._a = undefined; // <- checked in isUnhandled reactions\n\n    this._s = 0; // <- state\n\n    this._d = false; // <- done\n\n    this._v = undefined; // <- value\n\n    this._h = 0; // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n\n    this._n = false; // <- notify\n  };\n\n  Internal.prototype = __webpack_require__(/*! ./_redefine-all */ \"./node_modules/core-js/modules/_redefine-all.js\")($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n\n      this._c.push(reaction);\n\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper ? new OwnPromiseCapability(C) : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {\n  Promise: $Promise\n});\n\n__webpack_require__(/*! ./_set-to-string-tag */ \"./node_modules/core-js/modules/_set-to-string-tag.js\")($Promise, PROMISE);\n\n__webpack_require__(/*! ./_set-species */ \"./node_modules/core-js/modules/_set-species.js\")(PROMISE);\n\nWrapper = __webpack_require__(/*! ./_core */ \"./node_modules/core-js/modules/_core.js\")[PROMISE]; // statics\n\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && __webpack_require__(/*! ./_iter-detect */ \"./node_modules/core-js/modules/_iter-detect.js\")(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/es6.promise.js?");}),"./node_modules/core-js/modules/es6.string.iterator.js":(function(module,exports,__webpack_require__){"use strict";eval("\n\nvar $at = __webpack_require__(/*! ./_string-at */ \"./node_modules/core-js/modules/_string-at.js\")(true); // 21.1.3.27 String.prototype[@@iterator]()\n\n\n__webpack_require__(/*! ./_iter-define */ \"./node_modules/core-js/modules/_iter-define.js\")(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n\n  this._i = 0; // next index\n  // 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return {\n    value: undefined,\n    done: true\n  };\n  point = $at(O, index);\n  this._i += point.length;\n  return {\n    value: point,\n    done: false\n  };\n});\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/es6.string.iterator.js?");}),"./node_modules/core-js/modules/es6.symbol.js":(function(module,exports,__webpack_require__){"use strict";eval(" // ECMAScript 6 symbols shim\n\nvar global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\n\nvar has = __webpack_require__(/*! ./_has */ \"./node_modules/core-js/modules/_has.js\");\n\nvar DESCRIPTORS = __webpack_require__(/*! ./_descriptors */ \"./node_modules/core-js/modules/_descriptors.js\");\n\nvar $export = __webpack_require__(/*! ./_export */ \"./node_modules/core-js/modules/_export.js\");\n\nvar redefine = __webpack_require__(/*! ./_redefine */ \"./node_modules/core-js/modules/_redefine.js\");\n\nvar META = __webpack_require__(/*! ./_meta */ \"./node_modules/core-js/modules/_meta.js\").KEY;\n\nvar $fails = __webpack_require__(/*! ./_fails */ \"./node_modules/core-js/modules/_fails.js\");\n\nvar shared = __webpack_require__(/*! ./_shared */ \"./node_modules/core-js/modules/_shared.js\");\n\nvar setToStringTag = __webpack_require__(/*! ./_set-to-string-tag */ \"./node_modules/core-js/modules/_set-to-string-tag.js\");\n\nvar uid = __webpack_require__(/*! ./_uid */ \"./node_modules/core-js/modules/_uid.js\");\n\nvar wks = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\");\n\nvar wksExt = __webpack_require__(/*! ./_wks-ext */ \"./node_modules/core-js/modules/_wks-ext.js\");\n\nvar wksDefine = __webpack_require__(/*! ./_wks-define */ \"./node_modules/core-js/modules/_wks-define.js\");\n\nvar enumKeys = __webpack_require__(/*! ./_enum-keys */ \"./node_modules/core-js/modules/_enum-keys.js\");\n\nvar isArray = __webpack_require__(/*! ./_is-array */ \"./node_modules/core-js/modules/_is-array.js\");\n\nvar anObject = __webpack_require__(/*! ./_an-object */ \"./node_modules/core-js/modules/_an-object.js\");\n\nvar isObject = __webpack_require__(/*! ./_is-object */ \"./node_modules/core-js/modules/_is-object.js\");\n\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ \"./node_modules/core-js/modules/_to-iobject.js\");\n\nvar toPrimitive = __webpack_require__(/*! ./_to-primitive */ \"./node_modules/core-js/modules/_to-primitive.js\");\n\nvar createDesc = __webpack_require__(/*! ./_property-desc */ \"./node_modules/core-js/modules/_property-desc.js\");\n\nvar _create = __webpack_require__(/*! ./_object-create */ \"./node_modules/core-js/modules/_object-create.js\");\n\nvar gOPNExt = __webpack_require__(/*! ./_object-gopn-ext */ \"./node_modules/core-js/modules/_object-gopn-ext.js\");\n\nvar $GOPD = __webpack_require__(/*! ./_object-gopd */ \"./node_modules/core-js/modules/_object-gopd.js\");\n\nvar $DP = __webpack_require__(/*! ./_object-dp */ \"./node_modules/core-js/modules/_object-dp.js\");\n\nvar $keys = __webpack_require__(/*! ./_object-keys */ \"./node_modules/core-js/modules/_object-keys.js\");\n\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\n\nvar _stringify = $JSON && $JSON.stringify;\n\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = global.QObject; // Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\n\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild; // fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\n\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () {\n      return dP(this, 'a', {\n        value: 7\n      }).a;\n    }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, {\n        enumerable: createDesc(0, false)\n      });\n    }\n\n    return setSymbolDesc(it, key, D);\n  }\n\n  return dP(it, key, D);\n};\n\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n\n  return it;\n};\n\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\n\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\n\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\n\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  }\n\n  return result;\n};\n\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  }\n\n  return result;\n}; // 19.4.1.1 Symbol([description])\n\n\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, {\n      configurable: true,\n      set: $set\n    });\n    return wrap(tag);\n  };\n\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  __webpack_require__(/*! ./_object-gopn */ \"./node_modules/core-js/modules/_object-gopn.js\").f = gOPNExt.f = $getOwnPropertyNames;\n  __webpack_require__(/*! ./_object-pie */ \"./node_modules/core-js/modules/_object-pie.js\").f = $propertyIsEnumerable;\n  __webpack_require__(/*! ./_object-gops */ \"./node_modules/core-js/modules/_object-gops.js\").f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !__webpack_require__(/*! ./_library */ \"./node_modules/core-js/modules/_library.js\")) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {\n  Symbol: $Symbol\n});\n\nfor (var es6Symbols = // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'.split(','), j = 0; es6Symbols.length > j;) wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '') ? SymbolRegistry[key] : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () {\n    setter = true;\n  },\n  useSimple: function () {\n    setter = false;\n  }\n});\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n}); // 24.3.2 JSON.stringify(value [, replacer [, space]])\n\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol(); // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n\n  return _stringify([S]) != '[null]' || _stringify({\n    a: S\n  }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n\n    while (arguments.length > i) args.push(arguments[i++]);\n\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n}); // 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || __webpack_require__(/*! ./_hide */ \"./node_modules/core-js/modules/_hide.js\")($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf); // 19.4.3.5 Symbol.prototype[@@toStringTag]\n\nsetToStringTag($Symbol, 'Symbol'); // 20.2.1.9 Math[@@toStringTag]\n\nsetToStringTag(Math, 'Math', true); // 24.3.3 JSON[@@toStringTag]\n\nsetToStringTag(global.JSON, 'JSON', true);\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/es6.symbol.js?");}),"./node_modules/core-js/modules/es7.symbol.async-iterator.js":(function(module,exports,__webpack_require__){eval("__webpack_require__(/*! ./_wks-define */ \"./node_modules/core-js/modules/_wks-define.js\")('asyncIterator');\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/es7.symbol.async-iterator.js?");}),"./node_modules/core-js/modules/web.dom.iterable.js":(function(module,exports,__webpack_require__){eval("var $iterators = __webpack_require__(/*! ./es6.array.iterator */ \"./node_modules/core-js/modules/es6.array.iterator.js\");\n\nvar getKeys = __webpack_require__(/*! ./_object-keys */ \"./node_modules/core-js/modules/_object-keys.js\");\n\nvar redefine = __webpack_require__(/*! ./_redefine */ \"./node_modules/core-js/modules/_redefine.js\");\n\nvar global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\n\nvar hide = __webpack_require__(/*! ./_hide */ \"./node_modules/core-js/modules/_hide.js\");\n\nvar Iterators = __webpack_require__(/*! ./_iterators */ \"./node_modules/core-js/modules/_iterators.js\");\n\nvar wks = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\");\n\nvar ITERATOR = wks('iterator');\nvar TO_STRING_TAG = wks('toStringTag');\nvar ArrayValues = Iterators.Array;\nvar DOMIterables = {\n  CSSRuleList: true,\n  // TODO: Not spec compliant, should be false.\n  CSSStyleDeclaration: false,\n  CSSValueList: false,\n  ClientRectList: false,\n  DOMRectList: false,\n  DOMStringList: false,\n  DOMTokenList: true,\n  DataTransferItemList: false,\n  FileList: false,\n  HTMLAllCollection: false,\n  HTMLCollection: false,\n  HTMLFormElement: false,\n  HTMLSelectElement: false,\n  MediaList: true,\n  // TODO: Not spec compliant, should be false.\n  MimeTypeArray: false,\n  NamedNodeMap: false,\n  NodeList: true,\n  PaintRequestList: false,\n  Plugin: false,\n  PluginArray: false,\n  SVGLengthList: false,\n  SVGNumberList: false,\n  SVGPathSegList: false,\n  SVGPointList: false,\n  SVGStringList: false,\n  SVGTransformList: false,\n  SourceBufferList: false,\n  StyleSheetList: true,\n  // TODO: Not spec compliant, should be false.\n  TextTrackCueList: false,\n  TextTrackList: false,\n  TouchList: false\n};\n\nfor (var collections = getKeys(DOMIterables), i = 0; i < collections.length; i++) {\n  var NAME = collections[i];\n  var explicit = DOMIterables[NAME];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  var key;\n\n  if (proto) {\n    if (!proto[ITERATOR]) hide(proto, ITERATOR, ArrayValues);\n    if (!proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n    Iterators[NAME] = ArrayValues;\n    if (explicit) for (key in $iterators) if (!proto[key]) redefine(proto, key, $iterators[key], true);\n  }\n}\n\n//# sourceURL=webpack:///./node_modules/core-js/modules/web.dom.iterable.js?");}),0:(function(module,exports,__webpack_require__){eval("module.exports = __webpack_require__(/*! ./dmp-common.src.js */\"./dmp-common.src.js\");\n\n\n//# sourceURL=webpack:///multi_./dmp-common.src.js?");})});window.HRCPCustom={changeLogoLink:function changeLogoLink(){$('#myeducator_logo_container').find('a').attr('href','http://www.hr.com')},labelFiguresAsExhibits:function labelFiguresAsExhibits(){$('.caption,a:contains("Figure")').each(function(_,element){var exhibit=$(element)
var text=exhibit.html()
if(text){exhibit.html('Exhibit'+text.substring(6))}})}};(function(C,n){"object"===typeof exports?n(exports):"function"===typeof define&&define.amd?define(["exports"],n):n(C)})(this,function(C){function n(a){this._targetElement=a;this._introItems=[];this._options={nextLabel:"Next &rarr;",prevLabel:"&larr; Back",skipLabel:"Skip",doneLabel:"Done",hidePrev:!1,hideNext:!1,tooltipPosition:"bottom",tooltipClass:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!0,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,overlayOpacity:0.8,scrollPadding:30,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,hintPosition:"top-middle",hintButtonLabel:"Got it",hintAnimation:!0}}function V(a){var b=[],c=this;if(this._options.steps)for(var d=0,e=this._options.steps.length;d<e;d++){var f=y(this._options.steps[d]);f.step=b.length+1;"string"===typeof f.element&&(f.element=document.querySelector(f.element));if("undefined"===typeof f.element||null==f.element){var g=document.querySelector(".introjsFloatingElement");null==g&&(g=document.createElement("div"),g.className="introjsFloatingElement",document.body.appendChild(g));f.element=g;f.position="floating"}null!=f.element&&b.push(f)}else{e=a.querySelectorAll("*[data-intro]");if(1>e.length)return!1;d=0;for(f=e.length;d<f;d++)if(g=e[d],"none"!=g.style.display){var k=parseInt(g.getAttribute("data-step"),10);0<k&&(b[k-1]={element:g,intro:g.getAttribute("data-intro"),step:parseInt(g.getAttribute("data-step"),10),tooltipClass:g.getAttribute("data-tooltipClass"),highlightClass:g.getAttribute("data-highlightClass"),position:g.getAttribute("data-position")||this._options.tooltipPosition})}d=k=0;for(f=e.length;d<f;d++)if(g=e[d],null==g.getAttribute("data-step")){for(;"undefined"!=typeof b[k];)k++;b[k]={element:g,intro:g.getAttribute("data-intro"),step:k+1,tooltipClass:g.getAttribute("data-tooltipClass"),highlightClass:g.getAttribute("data-highlightClass"),position:g.getAttribute("data-position")||this._options.tooltipPosition}}}d=[];for(e=0;e<b.length;e++)b[e]&&d.push(b[e]);b=d;b.sort(function(a,b){return a.step-
b.step});c._introItems=b;W.call(c,a)&&(x.call(c),a.querySelector(".introjs-skipbutton"),a.querySelector(".introjs-nextbutton"),c._onKeyDown=function(b){if(27===b.keyCode&&!0==c._options.exitOnEsc)z.call(c,a);else if(37===b.keyCode)E.call(c);else if(39===b.keyCode)x.call(c);else if(13===b.keyCode){var d=b.target||b.srcElement;d&&0<d.className.indexOf("introjs-prevbutton")?E.call(c):d&&0<d.className.indexOf("introjs-skipbutton")?(c._introItems.length-1==c._currentStep&&"function"===typeof c._introCompleteCallback&&c._introCompleteCallback.call(c),z.call(c,a)):x.call(c);b.preventDefault?b.preventDefault():b.returnValue=!1}},c._onResize=function(a){t.call(c,document.querySelector(".introjs-helperLayer"));t.call(c,document.querySelector(".introjs-tooltipReferenceLayer"))},window.addEventListener?(this._options.keyboardNavigation&&window.addEventListener("keydown",c._onKeyDown,!0),window.addEventListener("resize",c._onResize,!0)):document.attachEvent&&(this._options.keyboardNavigation&&document.attachEvent("onkeydown",c._onKeyDown),document.attachEvent("onresize",c._onResize)));return!1}function y(a){if(null==a||"object"!=typeof a||"undefined"!=typeof a.nodeType)return a;var b={},c;for(c in a)b[c]="undefined"!=typeof jQuery&&a[c]instanceof jQuery?a[c]:y(a[c]);return b}function x(){this._direction="forward";if("undefined"!==typeof this._currentStepNumber)for(var a=0,b=this._introItems.length;a<b;a++)this._introItems[a].step===this._currentStepNumber&&(this._currentStep=a-1,this._currentStepNumber=void 0);"undefined"===typeof this._currentStep?this._currentStep=0:++this._currentStep;this._introItems.length<=this._currentStep?("function"===typeof this._introCompleteCallback&&this._introCompleteCallback.call(this),z.call(this,this._targetElement)):(a=this._introItems[this._currentStep],"undefined"!==typeof this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,a.element),N.call(this,a))}function E(){this._direction="backward";if(0===this._currentStep)return!1;var a=this._introItems[--this._currentStep];"undefined"!==typeof this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,a.element);N.call(this,a)}function z(a){var b=a.querySelectorAll(".introjs-overlay");if(b&&0<b.length)for(var c=b.length-1;0<=c;c--){var d=b[c];d.style.opacity=0;setTimeout(function(){this.parentNode&&this.parentNode.removeChild(this)}.bind(d),500)}(c=a.querySelector(".introjs-helperLayer"))&&c.parentNode.removeChild(c);(c=a.querySelector(".introjs-tooltipReferenceLayer"))&&c.parentNode.removeChild(c);(a=a.querySelector(".introjs-disableInteraction"))&&a.parentNode.removeChild(a);(a=document.querySelector(".introjsFloatingElement"))&&a.parentNode.removeChild(a);O();if((a=document.querySelectorAll(".introjs-fixParent"))&&0<a.length)for(c=a.length-1;0<=c;c--)a[c].className=a[c].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");window.removeEventListener?window.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown);void 0!=this._introExitCallback&&this._introExitCallback.call(self);this._currentStep=void 0}function F(a,b,c,d,e){var f="",g,k;e=e||!1;b.style.top=null;b.style.right=null;b.style.bottom=null;b.style.left=null;b.style.marginLeft=null;b.style.marginTop=null;c.style.display="inherit";"undefined"!=typeof d&&null!=d&&(d.style.top=null,d.style.left=null);if(this._introItems[this._currentStep]){f=this._introItems[this._currentStep];f="string"===typeof f.tooltipClass?f.tooltipClass:this._options.tooltipClass;b.className=("introjs-tooltip "+f).replace(/^\s+|\s+$/g,"");k=this._introItems[this._currentStep].position;if(("auto"==k||"auto"==this._options.tooltipPosition)&&"floating"!=k){f=k;g=this._options.positionPrecedence.slice();k=G();var w=u(b).height+10,m=u(b).width+20,h=u(a),l="floating";h.left+m>k.width||0>h.left+h.width/2-m?(s(g,"bottom"),s(g,"top")):(h.height+h.top+w>k.height&&s(g,"bottom"),0>h.top-w&&s(g,"top"));h.width+h.left+m>k.width&&s(g,"right");0>h.left-m&&s(g,"left");0<g.length&&(l=g[0]);f&&"auto"!=f&&-1<g.indexOf(f)&&(l=f);k=l}f=u(a);a=u(b);g=G();switch(k){case"top":c.className="introjs-arrow bottom";H(f,e?0:15,a,g,b);b.style.bottom=f.height+20+"px";break;case"right":b.style.left=f.width+20+"px";f.top+a.height>g.height?(c.className="introjs-arrow left-bottom",b.style.top="-"+(a.height-f.height-20)+"px"):c.className="introjs-arrow left";break;case"left":e||!0!=this._options.showStepNumbers||(b.style.top="15px");f.top+a.height>g.height?(b.style.top="-"+(a.height-f.height-20)+"px",c.className="introjs-arrow right-bottom"):c.className="introjs-arrow right";b.style.right=f.width+20+"px";break;case"floating":c.style.display="none";b.style.left="50%";b.style.top="50%";b.style.marginLeft="-"+a.width/2+"px";b.style.marginTop="-"+a.height/2+"px";"undefined"!=typeof d&&null!=d&&(d.style.left="-"+(a.width/2+18)+"px",d.style.top="-"+(a.height/2+18)+"px");break;case"bottom-right-aligned":c.className="introjs-arrow top-right";P(f,0,a,b);b.style.top=f.height+20+"px";break;case"bottom-middle-aligned":c.className="introjs-arrow top-middle";c=f.width/2-a.width/2;e&&(c+=5);P(f,c,a,b)&&(b.style.right=null,H(f,c,a,g,b));b.style.top=f.height+20+"px";break;default:c.className="introjs-arrow top",H(f,0,a,g,b),b.style.top=f.height+20+"px"}}}function H(a,b,c,d,e){if(a.left+b+c.width>d.width)return e.style.left=d.width-c.width-a.left+"px",!1;e.style.left=b+"px";return!0}function P(a,b,c,d){if(0>a.left+a.width-b-c.width)return d.style.left=-a.left+"px",!1;d.style.right=b+"px";return!0}function s(a,b){-1<a.indexOf(b)&&a.splice(a.indexOf(b),1)}function t(a){if(a&&this._introItems[this._currentStep]){var b=this._introItems[this._currentStep],c=u(b.element),d=10;I(b.element)?a.className+=" introjs-fixedTooltip":a.className=a.className.replace(" introjs-fixedTooltip","");"floating"==b.position&&(d=0);a.setAttribute("style","width: "+(c.width+d)+"px; height:"+(c.height+d)+"px; top:"+(c.top-5)+"px;left: "+(c.left-5)+"px;")}}function X(){var a=document.querySelector(".introjs-disableInteraction");null===a&&(a=document.createElement("div"),a.className="introjs-disableInteraction",this._targetElement.appendChild(a));t.call(this,a)}function D(a){a.setAttribute("role","button");a.tabIndex=0}function N(a){"undefined"!==typeof this._introChangeCallback&&this._introChangeCallback.call(this,a.element);var b=this,c=document.querySelector(".introjs-helperLayer"),d=document.querySelector(".introjs-tooltipReferenceLayer"),e="introjs-helperLayer";u(a.element);"string"===typeof a.highlightClass&&(e+=" "+a.highlightClass);"string"===typeof this._options.highlightClass&&(e+=" "+this._options.highlightClass);if(null!=c){var f=d.querySelector(".introjs-helperNumberLayer"),g=d.querySelector(".introjs-tooltiptext"),k=d.querySelector(".introjs-arrow"),w=d.querySelector(".introjs-tooltip"),m=d.querySelector(".introjs-skipbutton"),h=d.querySelector(".introjs-prevbutton"),l=d.querySelector(".introjs-nextbutton");c.className=e;w.style.opacity=0;w.style.display="none";if(null!=f){var p=this._introItems[0<=a.step-2?a.step-2:0];if(null!=p&&"forward"==this._direction&&"floating"==p.position||"backward"==this._direction&&"floating"==a.position)f.style.opacity=0}t.call(b,c);t.call(b,d);if((p=document.querySelectorAll(".introjs-fixParent"))&&0<p.length)for(e=p.length-1;0<=e;e--)p[e].className=p[e].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");O();b._lastShowElementTimer&&clearTimeout(b._lastShowElementTimer);b._lastShowElementTimer=setTimeout(function(){null!=f&&(f.innerHTML=a.step);g.innerHTML=a.intro;w.style.display="block";F.call(b,a.element,w,k,f);b._options.showBullets&&(d.querySelector(".introjs-bullets li > a.active").className="",d.querySelector('.introjs-bullets li > a[data-stepnumber="'+a.step+'"]').className="active");d.querySelector(".introjs-progress .introjs-progressbar").setAttribute("style","width:"+Q.call(b)+"%;");w.style.opacity=1;f&&(f.style.opacity=1);-1===l.tabIndex?m.focus():l.focus()},350)}else{var n=document.createElement("div"),h=document.createElement("div"),c=document.createElement("div"),q=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div"),v=document.createElement("div"),A=document.createElement("div");n.className=e;h.className="introjs-tooltipReferenceLayer";t.call(b,n);t.call(b,h);this._targetElement.appendChild(n);this._targetElement.appendChild(h);c.className="introjs-arrow";r.className="introjs-tooltiptext";r.innerHTML=a.intro;s.className="introjs-bullets";!1===this._options.showBullets&&(s.style.display="none");for(var n=document.createElement("ul"),e=0,C=this._introItems.length;e<C;e++){var y=document.createElement("li"),B=document.createElement("a");B.onclick=function(){b.goToStep(this.getAttribute("data-stepnumber"))};e===a.step-1&&(B.className="active");D(B);B.innerHTML="&nbsp;";B.setAttribute("data-stepnumber",this._introItems[e].step);y.appendChild(B);n.appendChild(y)}s.appendChild(n);v.className="introjs-progress";!1===this._options.showProgress&&(v.style.display="none");e=document.createElement("div");e.className="introjs-progressbar";e.setAttribute("style","width:"+Q.call(this)+"%;");v.appendChild(e);A.className="introjs-tooltipbuttons";!1===this._options.showButtons&&(A.style.display="none");q.className="introjs-tooltip";q.appendChild(r);q.appendChild(s);q.appendChild(v);!0==this._options.showStepNumbers&&(p=document.createElement("span"),p.className="introjs-helperNumberLayer",p.innerHTML=a.step,h.appendChild(p));q.appendChild(c);h.appendChild(q);l=document.createElement("a");l.onclick=function(){b._introItems.length-1!=b._currentStep&&x.call(b)};D(l);l.innerHTML=this._options.nextLabel;h=document.createElement("a");h.onclick=function(){0!=b._currentStep&&E.call(b)};D(h);h.innerHTML=this._options.prevLabel;m=document.createElement("a");m.className="introjs-button introjs-skipbutton";D(m);m.innerHTML=this._options.skipLabel;m.onclick=function(){b._introItems.length-1==b._currentStep&&"function"===typeof b._introCompleteCallback&&b._introCompleteCallback.call(b);z.call(b,b._targetElement)};A.appendChild(m);1<this._introItems.length&&(A.appendChild(h),A.appendChild(l));q.appendChild(A);F.call(b,a.element,q,c,p)}!0===this._options.disableInteraction&&X.call(b);h.removeAttribute("tabIndex");l.removeAttribute("tabIndex");0==this._currentStep&&1<this._introItems.length?(m.className="introjs-button introjs-skipbutton",l.className="introjs-button introjs-nextbutton",!0==this._options.hidePrev?(h.className="introjs-button introjs-prevbutton introjs-hidden",l.className+=" introjs-fullbutton"):h.className="introjs-button introjs-prevbutton introjs-disabled",h.tabIndex="-1",m.innerHTML=this._options.skipLabel):this._introItems.length-1==this._currentStep||1==this._introItems.length?(m.innerHTML=this._options.doneLabel,m.className+=" introjs-donebutton",h.className="introjs-button introjs-prevbutton",!0==this._options.hideNext?(l.className="introjs-button introjs-nextbutton introjs-hidden",h.className+=" introjs-fullbutton"):l.className="introjs-button introjs-nextbutton introjs-disabled",l.tabIndex="-1"):(m.className="introjs-button introjs-skipbutton",h.className="introjs-button introjs-prevbutton",l.className="introjs-button introjs-nextbutton",m.innerHTML=this._options.skipLabel);l.focus();Y(a);Z(a.element)||!0!==this._options.scrollToElement||(q=a.element.getBoundingClientRect(),p=G().height,c=q.bottom-(q.bottom-q.top),q=q.bottom-p,0>c||a.element.clientHeight>p?window.scrollBy(0,c-this._options.scrollPadding):window.scrollBy(0,q+70+this._options.scrollPadding));"undefined"!==typeof this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,a.element)}function O(){for(var a=document.querySelectorAll(".introjs-showElement"),b=0,c=a.length;b<c;b++){var d=a[b],e=/introjs-[a-zA-Z]+/g;if(d instanceof SVGElement){var f=d.getAttribute("class")||"";d.setAttribute("class",f.replace(e,"").replace(/^\s+|\s+$/g,""))}else d.className=d.className.replace(e,"").replace(/^\s+|\s+$/g,"")}}function Y(a){if(a.element instanceof SVGElement)for(var b=a.element.parentNode;null!=a.element.parentNode&&b.tagName&&"body"!==b.tagName.toLowerCase();)"svg"===b.tagName.toLowerCase()&&J(b,"introjs-showElement introjs-relativePosition"),b=b.parentNode;J(a.element,"introjs-showElement");b=r(a.element,"position");"absolute"!==b&&("relative"!==b&&"fixed"!==b)&&J(a.element,"introjs-relativePosition");for(b=a.element.parentNode;null!=b&&b.tagName&&"body"!==b.tagName.toLowerCase();){a=r(b,"z-index");var c=parseFloat(r(b,"opacity")),d=r(b,"transform")||r(b,"-webkit-transform")||r(b,"-moz-transform")||r(b,"-ms-transform")||r(b,"-o-transform");if(/[0-9]+/.test(a)||1>c||"none"!==d&&void 0!==d)b.className+=" introjs-fixParent";b=b.parentNode}}function J(a,b){if(a instanceof SVGElement){var c=a.getAttribute("class")||"";a.setAttribute("class",c+" "+b)}else a.className+=" "+b}function r(a,b){var c="";a.currentStyle?c=a.currentStyle[b]:document.defaultView&&document.defaultView.getComputedStyle&&(c=document.defaultView.getComputedStyle(a,null).getPropertyValue(b));return c&&c.toLowerCase?c.toLowerCase():c}function I(a){var b=a.parentNode;return b&&"HTML"!==b.nodeName?"fixed"==r(a,"position")?!0:I(b):!1}function G(){if(void 0!=window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var a=document.documentElement;return{width:a.clientWidth,height:a.clientHeight}}function Z(a){a=a.getBoundingClientRect();return 0<=a.top&&0<=a.left&&a.bottom+80<=window.innerHeight&&a.right<=window.innerWidth}function W(a){var b=document.createElement("div"),c="",d=this;b.className="introjs-overlay";if(a.tagName&&"body"!==a.tagName.toLowerCase()){var e=u(a);e&&(c+="width: "+e.width+"px; height:"+e.height+"px; top:"+e.top+"px;left: "+e.left+"px;",b.setAttribute("style",c))}else c+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",b.setAttribute("style",c);a.appendChild(b);b.onclick=function(){!0==d._options.exitOnOverlayClick&&z.call(d,a)};setTimeout(function(){c+="opacity: "+d._options.overlayOpacity.toString()+";";b.setAttribute("style",c)},10);return!0}function v(){var a=this._targetElement.querySelector(".introjs-hintReference");if(a){var b=a.getAttribute("data-step");a.parentNode.removeChild(a);return b}}function R(a){this._introItems=[];if(this._options.hints){a=0;for(var b=this._options.hints.length;a<b;a++){var c=y(this._options.hints[a]);"string"===typeof c.element&&(c.element=document.querySelector(c.element));c.hintPosition=c.hintPosition||this._options.hintPosition;c.hintAnimation=c.hintAnimation||this._options.hintAnimation;null!=c.element&&this._introItems.push(c)}}else{c=a.querySelectorAll("*[data-hint]");if(1>c.length)return!1;a=0;for(b=c.length;a<b;a++){var d=c[a],e=d.getAttribute("data-hintAnimation"),e=e?"true"==e:this._options.hintAnimation;this._introItems.push({element:d,hint:d.getAttribute("data-hint"),hintPosition:d.getAttribute("data-hintPosition")||this._options.hintPosition,hintAnimation:e,tooltipClass:d.getAttribute("data-tooltipClass"),position:d.getAttribute("data-position")||this._options.tooltipPosition})}}$.call(this);document.addEventListener?(document.addEventListener("click",v.bind(this),!1),window.addEventListener("resize",K.bind(this),!0)):document.attachEvent&&(document.attachEvent("onclick",v.bind(this)),document.attachEvent("onresize",K.bind(this)))}function K(){for(var a=0,b=this._introItems.length;a<b;a++){var c=this._introItems[a];"undefined"!=typeof c.targetElement&&S.call(this,c.hintPosition,c.element,c.targetElement)}}function L(a){v.call(this);var b=this._targetElement.querySelector('.introjs-hint[data-step="'+a+'"]');b&&(b.className+=" introjs-hidehint");"undefined"!==typeof this._hintCloseCallback&&this._hintCloseCallback.call(this,a)}function T(a){if(a=this._targetElement.querySelector('.introjs-hint[data-step="'+a+'"]'))a.className=a.className.replace(/introjs\-hidehint/g,"")}function U(a){(a=this._targetElement.querySelector('.introjs-hint[data-step="'+a+'"]'))&&a.parentNode.removeChild(a)}function $(){var a=this,b=document.querySelector(".introjs-hints");null==b&&(b=document.createElement("div"),b.className="introjs-hints");for(var c=0,d=this._introItems.length;c<d;c++){var e=this._introItems[c];if(!document.querySelector('.introjs-hint[data-step="'+c+'"]')){var f=document.createElement("a");D(f);(function(b,c,d){b.onclick=function(e){e=e?e:window.event;e.stopPropagation&&e.stopPropagation();null!=e.cancelBubble&&(e.cancelBubble=!0);aa.call(a,b,c,d)}})(f,e,c);f.className="introjs-hint";e.hintAnimation||(f.className+=" introjs-hint-no-anim");I(e.element)&&(f.className+=" introjs-fixedhint");var g=document.createElement("div");g.className="introjs-hint-dot";var k=document.createElement("div");k.className="introjs-hint-pulse";f.appendChild(g);f.appendChild(k);f.setAttribute("data-step",c);e.targetElement=e.element;e.element=f;S.call(this,e.hintPosition,f,e.targetElement);b.appendChild(f)}}document.body.appendChild(b);"undefined"!==typeof this._hintsAddedCallback&&this._hintsAddedCallback.call(this)}function S(a,b,c){c=u.call(this,c);switch(a){default:case"top-left":b.style.left=c.left+"px";b.style.top=c.top+"px";break;case"top-right":b.style.left=c.left+c.width-20+"px";b.style.top=c.top+"px";break;case"bottom-left":b.style.left=c.left+"px";b.style.top=c.top+c.height-20+"px";break;case"bottom-right":b.style.left=c.left+c.width-20+"px";b.style.top=c.top+c.height-20+"px";break;case"middle-left":b.style.left=c.left+"px";b.style.top=c.top+(c.height-20)/2+"px";break;case"middle-right":b.style.left=c.left+c.width-20+"px";b.style.top=c.top+(c.height-20)/2+"px";break;case"middle-middle":b.style.left=c.left+(c.width-20)/2+"px";b.style.top=c.top+(c.height-20)/2+"px";break;case"bottom-middle":b.style.left=c.left+(c.width-20)/2+"px";b.style.top=c.top+c.height-20+"px";break;case"top-middle":b.style.left=c.left+(c.width-
20)/2+"px",b.style.top=c.top+"px"}}function aa(a,b,c){"undefined"!==typeof this._hintClickCallback&&this._hintClickCallback.call(this,a,b,c);var d=v.call(this);if(parseInt(d,10)!=c){var d=document.createElement("div"),e=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div");d.className="introjs-tooltip";d.onclick=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0};e.className="introjs-tooltiptext";var k=document.createElement("p");k.innerHTML=b.hint;b=document.createElement("a");b.className="introjs-button";b.innerHTML=this._options.hintButtonLabel;b.onclick=L.bind(this,c);e.appendChild(k);e.appendChild(b);f.className="introjs-arrow";d.appendChild(f);d.appendChild(e);this._currentStep=a.getAttribute("data-step");g.className="introjs-tooltipReferenceLayer introjs-hintReference";g.setAttribute("data-step",a.getAttribute("data-step"));t.call(this,g);g.appendChild(d);document.body.appendChild(g);F.call(this,a,d,f,null,!0)}}function u(a){var b={},c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,c=window.pageXOffset||d.scrollLeft||c.scrollLeft;if(a instanceof SVGElement)a=a.getBoundingClientRect(),b.top=a.top+e,b.width=a.width,b.height=a.height,b.left=a.left+c;else{b.width=a.offsetWidth;b.height=a.offsetHeight;for(c=e=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)e+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;b.top=c;b.left=e}return b}function Q(){return 100*(parseInt(this._currentStep+1,10)/this._introItems.length)}
var M=function(a){if("object"===typeof a)return new n(a);if("string"===typeof a){if(a=document.querySelector(a))return new n(a);throw Error("There is no element with given selector.");}return new n(document.body)};M.version="2.5.0";M.fn=n.prototype={clone:function(){return new n(this)},setOption:function(a,b){this._options[a]=b;return this},setOptions:function(a){var b=this._options,c={},d;for(d in b)c[d]=b[d];for(d in a)c[d]=a[d];this._options=c;return this},start:function(){V.call(this,this._targetElement);return this},goToStep:function(a){this._currentStep=a-2;"undefined"!==typeof this._introItems&&x.call(this);return this},addStep:function(a){this._options.steps||(this._options.steps=[]);this._options.steps.push(a);return this},addSteps:function(a){if(a.length){for(var b=0;b<a.length;b++)this.addStep(a[b]);return this}},goToStepNumber:function(a){this._currentStepNumber=a;"undefined"!==typeof this._introItems&&x.call(this);return this},nextStep:function(){x.call(this);return this},previousStep:function(){E.call(this);return this},exit:function(){z.call(this,this._targetElement);return this},refresh:function(){t.call(this,document.querySelector(".introjs-helperLayer"));t.call(this,document.querySelector(".introjs-tooltipReferenceLayer"));K.call(this);return this},onbeforechange:function(a){if("function"===typeof a)this._introBeforeChangeCallback=a;else throw Error("Provided callback for onbeforechange was not a function");return this},onchange:function(a){if("function"===typeof a)this._introChangeCallback=a;else throw Error("Provided callback for onchange was not a function.");return this},onafterchange:function(a){if("function"===typeof a)this._introAfterChangeCallback=a;else throw Error("Provided callback for onafterchange was not a function");return this},oncomplete:function(a){if("function"===typeof a)this._introCompleteCallback=a;else throw Error("Provided callback for oncomplete was not a function.");return this},onhintsadded:function(a){if("function"===typeof a)this._hintsAddedCallback=a;else throw Error("Provided callback for onhintsadded was not a function.");return this},onhintclick:function(a){if("function"===typeof a)this._hintClickCallback=a;else throw Error("Provided callback for onhintclick was not a function.");return this},onhintclose:function(a){if("function"===typeof a)this._hintCloseCallback=a;else throw Error("Provided callback for onhintclose was not a function.");return this},onexit:function(a){if("function"===typeof a)this._introExitCallback=a;else throw Error("Provided callback for onexit was not a function.");return this},addHints:function(){R.call(this,this._targetElement);return this},hideHint:function(a){L.call(this,a);return this},hideHints:function(){var a=this._targetElement.querySelectorAll(".introjs-hint");if(a&&0<a.length)for(var b=0;b<a.length;b++)L.call(this,a[b].getAttribute("data-step"));return this},showHint:function(a){T.call(this,a);return this},showHints:function(){var a=this._targetElement.querySelectorAll(".introjs-hint");if(a&&0<a.length)for(var b=0;b<a.length;b++)T.call(this,a[b].getAttribute("data-step"));else R.call(this,this._targetElement);return this},removeHints:function(){var a=this._targetElement.querySelectorAll(".introjs-hint");if(a&&0<a.length)for(var b=0;b<a.length;b++)U.call(this,a[b].getAttribute("data-step"));return this},removeHint:function(a){U.call(this,a);return this}};return C.introJs=M});(function(jQuery){jQuery.each(['backgroundColor','borderBottomColor','borderLeftColor','borderRightColor','borderTopColor','color','outlineColor'],function(i,attr){jQuery.fx.step[attr]=function(fx){if(fx.state==0){fx.start=getColor(fx.elem,attr);fx.end=getRGB(fx.end);}
fx.elem.style[attr]="rgb("+[Math.max(Math.min(parseInt((fx.pos*(fx.end[0]-fx.start[0]))+fx.start[0]),255),0),Math.max(Math.min(parseInt((fx.pos*(fx.end[1]-fx.start[1]))+fx.start[1]),255),0),Math.max(Math.min(parseInt((fx.pos*(fx.end[2]-fx.start[2]))+fx.start[2]),255),0)].join(",")+")";}});function getRGB(color){var result;if(color&&color.constructor==Array&&color.length==3)
return color;if(result=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(color))
return[parseInt(result[1]),parseInt(result[2]),parseInt(result[3])];if(result=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(color))
return[parseFloat(result[1])*2.55,parseFloat(result[2])*2.55,parseFloat(result[3])*2.55];if(result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(color))
return[parseInt(result[1],16),parseInt(result[2],16),parseInt(result[3],16)];if(result=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(color))
return[parseInt(result[1]+result[1],16),parseInt(result[2]+result[2],16),parseInt(result[3]+result[3],16)];return colors[jQuery.trim(color).toLowerCase()];}
function getColor(elem,attr){var color;do{color=jQuery.curCSS(elem,attr);if(color!=''&&color!='transparent'||jQuery.nodeName(elem,"body"))
break;attr="backgroundColor";}while(elem=elem.parentNode);return getRGB(color);};var colors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};})(jQuery);(function($){$.fn.colorPicker=function(){if(this.length>0)buildSelector();return this.each(function(i){buildPicker(this)});};var selectorOwner;var selectorShowing=false;buildPicker=function(element){control=$("<div class='color_picker'>&nbsp;</div>")
control.css('background-color',$(element).val());control.bind("click",toggleSelector);$(element).after(control);$(element).bind("change",function(){selectedValue=toHex($(element).val());$(element).next(".color_picker").css("background-color",selectedValue);});$(element).hide();};buildSelector=function(){selector=$("<div id='color_selector'></div>");$.each($.fn.colorPicker.defaultColors,function(i){swatch=$("<div class='color_swatch'>&nbsp;</div>")
swatch.css("background-color","#"+this);swatch.bind("click",function(e){changeColor($(this).css("background-color"))});swatch.bind("mouseover",function(e){$(this).css("border-color","#598FEF");$("input#color_value").val(toHex($(this).css("background-color")));});swatch.bind("mouseout",function(e){$(this).css("border-color","#000");$("input#color_value").val(toHex($(selectorOwner).css("background-color")));});swatch.appendTo(selector);});hex_field=$("<label for='color_value'>Hex</label><input type='text' size='8' id='color_value'/>");hex_field.bind("keydown",function(event){if(event.keyCode==13){changeColor($(this).val());}
if(event.keyCode==27){toggleSelector()}});$("<div id='color_custom'></div>").append(hex_field).appendTo(selector);$("body").append(selector);selector.hide();};checkMouse=function(event){var selector="div#color_selector";var selectorParent=$(event.target).parents(selector).length;if(event.target==$(selector)[0]||event.target==selectorOwner||selectorParent>0)return
hideSelector();}
hideSelector=function(){var selector=$("div#color_selector");$(document).unbind("mousedown",checkMouse);selector.hide();selectorShowing=false}
showSelector=function(){var selector=$("div#color_selector");selector.css({top:$(selectorOwner).offset().top+($(selectorOwner).outerHeight()),left:$(selectorOwner).offset().left});hexColor=$(selectorOwner).prev("input").val();$("input#color_value").val(hexColor);selector.show();$(document).bind("mousedown",checkMouse);selectorShowing=true}
toggleSelector=function(event){selectorOwner=this;selectorShowing?hideSelector():showSelector();}
changeColor=function(value){if(selectedValue=toHex(value)){$(selectorOwner).css("background-color",selectedValue);$(selectorOwner).prev("input").val(selectedValue).change();hideSelector();}};toHex=function(color){if(color.match(/[0-9a-fA-F]{3}$/)||color.match(/[0-9a-fA-F]{6}$/)){color=(color.charAt(0)=="#")?color:("#"+color);}
else if(color.match(/^rgb\(([0-9]|[1-9][0-9]|[1][0-9]{2}|[2][0-4][0-9]|[2][5][0-5]),[ ]{0,1}([0-9]|[1-9][0-9]|[1][0-9]{2}|[2][0-4][0-9]|[2][5][0-5]),[ ]{0,1}([0-9]|[1-9][0-9]|[1][0-9]{2}|[2][0-4][0-9]|[2][5][0-5])\)$/)){var c=([parseInt(RegExp.$1),parseInt(RegExp.$2),parseInt(RegExp.$3)]);var pad=function(str){if(str.length<2){for(var i=0,len=2-str.length;i<len;i++){str='0'+str;}}
return str;}
if(c.length==3){var r=pad(c[0].toString(16)),g=pad(c[1].toString(16)),b=pad(c[2].toString(16));color='#'+r+g+b;}}
else color=false;return color}
$.fn.colorPicker.addColors=function(colorArray){$.fn.colorPicker.defaultColors=$.fn.colorPicker.defaultColors.concat(colorArray);};$.fn.colorPicker.defaultColors=['D2B48C','C3B091','CCCCCC','808080','464646','084C9E','049cdb','007FFF','008080','46a546','228B22','808000','ffc40d','DAA520','FF7F50','883300','800000','DC143C','843179','7a43bd']})(jQuery);var DateFormatter;(function(){"use strict";var _compare,_lpad,_extend,defaultSettings,DAY,HOUR;DAY=1000*60*60*24;HOUR=3600;_compare=function(str1,str2){return typeof(str1)==='string'&&typeof(str2)==='string'&&str1.toLowerCase()===str2.toLowerCase();};_lpad=function(value,length,char){var chr=char||'0',val=value.toString();return val.length<length?_lpad(chr+val,length):val;};_extend=function(out){var i,obj;out=out||{};for(i=1;i<arguments.length;i++){obj=arguments[i];if(!obj){continue;}
for(var key in obj){if(obj.hasOwnProperty(key)){if(typeof obj[key]==='object'){_extend(out[key],obj[key]);}else{out[key]=obj[key];}}}}
return out;};defaultSettings={dateSettings:{days:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],daysShort:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],months:['January','February','March','April','May','June','July','August','September','October','November','December'],monthsShort:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],meridiem:['AM','PM'],ordinal:function(number){var n=number%10,suffixes={1:'st',2:'nd',3:'rd'};return Math.floor(number%100/10)===1||!suffixes[n]?'th':suffixes[n];}},separators:/[ \-+\/\.T:@]/g,validParts:/[dDjlNSwzWFmMntLoYyaABgGhHisueTIOPZcrU]/g,intParts:/[djwNzmnyYhHgGis]/g,tzParts:/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,tzClip:/[^-+\dA-Z]/g};DateFormatter=function(options){var self=this,config=_extend(defaultSettings,options);self.dateSettings=config.dateSettings;self.separators=config.separators;self.validParts=config.validParts;self.intParts=config.intParts;self.tzParts=config.tzParts;self.tzClip=config.tzClip;};DateFormatter.prototype={constructor:DateFormatter,parseDate:function(vDate,vFormat){var self=this,vFormatParts,vDateParts,i,vDateFlag=false,vTimeFlag=false,vDatePart,iDatePart,vSettings=self.dateSettings,vMonth,vMeriIndex,vMeriOffset,len,mer,out={date:null,year:null,month:null,day:null,hour:0,min:0,sec:0};if(!vDate){return undefined;}
if(vDate instanceof Date){return vDate;}
if(typeof vDate==='number'){return new Date(vDate);}
if(vFormat==='U'){i=parseInt(vDate);return i?new Date(i*1000):vDate;}
if(typeof vDate!=='string'){return'';}
vFormatParts=vFormat.match(self.validParts);if(!vFormatParts||vFormatParts.length===0){throw new Error("Invalid date format definition.");}
vDateParts=vDate.replace(self.separators,'\0').split('\0');for(i=0;i<vDateParts.length;i++){vDatePart=vDateParts[i];iDatePart=parseInt(vDatePart);switch(vFormatParts[i]){case'y':case'Y':len=vDatePart.length;if(len===2){out.year=parseInt((iDatePart<70?'20':'19')+vDatePart);}else if(len===4){out.year=iDatePart;}
vDateFlag=true;break;case'm':case'n':case'M':case'F':if(isNaN(vDatePart)){vMonth=vSettings.monthsShort.indexOf(vDatePart);if(vMonth>-1){out.month=vMonth+1;}
vMonth=vSettings.months.indexOf(vDatePart);if(vMonth>-1){out.month=vMonth+1;}}else{if(iDatePart>=1&&iDatePart<=12){out.month=iDatePart;}}
vDateFlag=true;break;case'd':case'j':if(iDatePart>=1&&iDatePart<=31){out.day=iDatePart;}
vDateFlag=true;break;case'g':case'h':vMeriIndex=(vFormatParts.indexOf('a')>-1)?vFormatParts.indexOf('a'):(vFormatParts.indexOf('A')>-1)?vFormatParts.indexOf('A'):-1;mer=vDateParts[vMeriIndex];if(vMeriIndex>-1){vMeriOffset=_compare(mer,vSettings.meridiem[0])?0:(_compare(mer,vSettings.meridiem[1])?12:-1);if(iDatePart>=1&&iDatePart<=12&&vMeriOffset>-1){out.hour=iDatePart+vMeriOffset;}else if(iDatePart>=0&&iDatePart<=23){out.hour=iDatePart;}}else if(iDatePart>=0&&iDatePart<=23){out.hour=iDatePart;}
vTimeFlag=true;break;case'G':case'H':if(iDatePart>=0&&iDatePart<=23){out.hour=iDatePart;}
vTimeFlag=true;break;case'i':if(iDatePart>=0&&iDatePart<=59){out.min=iDatePart;}
vTimeFlag=true;break;case's':if(iDatePart>=0&&iDatePart<=59){out.sec=iDatePart;}
vTimeFlag=true;break;}}
if(vDateFlag===true&&out.year&&out.month&&out.day){out.date=new Date(out.year,out.month-1,out.day,out.hour,out.min,out.sec,0);}else{if(vTimeFlag!==true){return false;}
out.date=new Date(0,0,0,out.hour,out.min,out.sec,0);}
return out.date;},guessDate:function(vDateStr,vFormat){if(typeof vDateStr!=='string'){return vDateStr;}
var self=this,vParts=vDateStr.replace(self.separators,'\0').split('\0'),vPattern=/^[djmn]/g,vFormatParts=vFormat.match(self.validParts),vDate=new Date(),vDigit=0,vYear,i,iPart,iSec;if(!vPattern.test(vFormatParts[0])){return vDateStr;}
for(i=0;i<vParts.length;i++){vDigit=2;iPart=vParts[i];iSec=parseInt(iPart.substr(0,2));switch(i){case 0:if(vFormatParts[0]==='m'||vFormatParts[0]==='n'){vDate.setMonth(iSec-1);}else{vDate.setDate(iSec);}
break;case 1:if(vFormatParts[0]==='m'||vFormatParts[0]==='n'){vDate.setDate(iSec);}else{vDate.setMonth(iSec-1);}
break;case 2:vYear=vDate.getFullYear();if(iPart.length<4){vDate.setFullYear(parseInt(vYear.toString().substr(0,4-iPart.length)+iPart));vDigit=iPart.length;}else{vDate.setFullYear=parseInt(iPart.substr(0,4));vDigit=4;}
break;case 3:vDate.setHours(iSec);break;case 4:vDate.setMinutes(iSec);break;case 5:vDate.setSeconds(iSec);break;}
if(iPart.substr(vDigit).length>0){vParts.splice(i+1,0,iPart.substr(vDigit));}}
return vDate;},parseFormat:function(vChar,vDate){var self=this,vSettings=self.dateSettings,fmt,backspace=/\\?(.?)/gi,doFormat=function(t,s){return fmt[t]?fmt[t]():s;};fmt={d:function(){return _lpad(fmt.j(),2);},D:function(){return vSettings.daysShort[fmt.w()];},j:function(){return vDate.getDate();},l:function(){return vSettings.days[fmt.w()];},N:function(){return fmt.w()||7;},w:function(){return vDate.getDay();},z:function(){var a=new Date(fmt.Y(),fmt.n()-1,fmt.j()),b=new Date(fmt.Y(),0,1);return Math.round((a-b)/DAY);},W:function(){var a=new Date(fmt.Y(),fmt.n()-1,fmt.j()-fmt.N()+3),b=new Date(a.getFullYear(),0,4);return _lpad(1+Math.round((a-b)/DAY/7),2);},F:function(){return vSettings.months[vDate.getMonth()];},m:function(){return _lpad(fmt.n(),2);},M:function(){return vSettings.monthsShort[vDate.getMonth()];},n:function(){return vDate.getMonth()+1;},t:function(){return(new Date(fmt.Y(),fmt.n(),0)).getDate();},L:function(){var Y=fmt.Y();return(Y%4===0&&Y%100!==0||Y%400===0)?1:0;},o:function(){var n=fmt.n(),W=fmt.W(),Y=fmt.Y();return Y+(n===12&&W<9?1:n===1&&W>9?-1:0);},Y:function(){return vDate.getFullYear();},y:function(){return fmt.Y().toString().slice(-2);},a:function(){return fmt.A().toLowerCase();},A:function(){var n=fmt.G()<12?0:1;return vSettings.meridiem[n];},B:function(){var H=vDate.getUTCHours()*HOUR,i=vDate.getUTCMinutes()*60,s=vDate.getUTCSeconds();return _lpad(Math.floor((H+i+s+HOUR)/86.4)%1000,3);},g:function(){return fmt.G()%12||12;},G:function(){return vDate.getHours();},h:function(){return _lpad(fmt.g(),2);},H:function(){return _lpad(fmt.G(),2);},i:function(){return _lpad(vDate.getMinutes(),2);},s:function(){return _lpad(vDate.getSeconds(),2);},u:function(){return _lpad(vDate.getMilliseconds()*1000,6);},e:function(){var str=/\((.*)\)/.exec(String(vDate))[1];return str||'Coordinated Universal Time';},T:function(){var str=(String(vDate).match(self.tzParts)||[""]).pop().replace(self.tzClip,"");return str||'UTC';},I:function(){var a=new Date(fmt.Y(),0),c=Date.UTC(fmt.Y(),0),b=new Date(fmt.Y(),6),d=Date.UTC(fmt.Y(),6);return((a-c)!==(b-d))?1:0;},O:function(){var tzo=vDate.getTimezoneOffset(),a=Math.abs(tzo);return(tzo>0?'-':'+')+_lpad(Math.floor(a/60)*100+a%60,4);},P:function(){var O=fmt.O();return(O.substr(0,3)+':'+O.substr(3,2));},Z:function(){return-vDate.getTimezoneOffset()*60;},c:function(){return'Y-m-d\\TH:i:sP'.replace(backspace,doFormat);},r:function(){return'D, d M Y H:i:s O'.replace(backspace,doFormat);},U:function(){return vDate.getTime()/1000||0;}};return doFormat(vChar,vChar);},formatDate:function(vDate,vFormat){var self=this,i,n,len,str,vChar,vDateStr='';if(typeof vDate==='string'){vDate=self.parseDate(vDate,vFormat);if(vDate===false){return false;}}
if(vDate instanceof Date){len=vFormat.length;for(i=0;i<len;i++){vChar=vFormat.charAt(i);if(vChar==='S'){continue;}
str=self.parseFormat(vChar,vDate);if(i!==(len-1)&&self.intParts.test(vChar)&&vFormat.charAt(i+1)==='S'){n=parseInt(str);str+=self.dateSettings.ordinal(n);}
vDateStr+=str;}
return vDateStr;}
return'';}};})();;(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','jquery-mousewheel'],factory);}else if(typeof exports==='object'){module.exports=factory;}else{factory(jQuery);}}(function($){'use strict';var currentlyScrollingTimeDiv=false;var default_options={i18n:{ar:{months:[" ","","","","","","","",""," "," "," "],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","","",""]},ro:{months:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],dayOfWeekShort:["Du","Lu","Ma","Mi","Jo","Vi","S"],dayOfWeek:["Duminic","Luni","Mari","Miercuri","Joi","Vineri","Smbt"]},id:{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],dayOfWeekShort:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],dayOfWeek:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},is:{months:["Janar","Febrar","Mars","Aprl","Ma","Jn","Jl","gst","September","Oktber","Nvember","Desember"],dayOfWeekShort:["Sun","Mn","ri","Mi","Fim","Fs","Lau"],dayOfWeek:["Sunnudagur","Mnudagur","rijudagur","Mivikudagur","Fimmtudagur","Fstudagur","Laugardagur"]},bg:{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},fa:{months:['','','','','','','','','','','',''],dayOfWeekShort:['','',' ','','','',''],dayOfWeek:["","","","","","","",""]},ru:{months:['','','','','','','','','','','',''],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},uk:{months:['','','','','','','','','','','',''],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","'",""]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},el:{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},de:{months:['Januar','Februar','Mrz','April','Mai','Juni','Juli','August','September','Oktober','November','Dezember'],dayOfWeekShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayOfWeek:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeekShort:["zo","ma","di","wo","do","vr","za"],dayOfWeek:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},tr:{months:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],dayOfWeekShort:["Paz","Pts","Sal","ar","Per","Cum","Cts"],dayOfWeek:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},fr:{months:["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],dayOfWeekShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],dayOfWeek:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeekShort:["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],dayOfWeek:["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"]},th:{months:['','','','','','','','','','','',''],dayOfWeekShort:['.','.','.','.','.','.','.'],dayOfWeek:["","","","","","","",""]},pl:{months:["stycze","luty","marzec","kwiecie","maj","czerwiec","lipiec","sierpie","wrzesie","padziernik","listopad","grudzie"],dayOfWeekShort:["nd","pn","wt","r","cz","pt","sb"],dayOfWeek:["niedziela","poniedziaek","wtorek","roda","czwartek","pitek","sobota"]},pt:{months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeekShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],dayOfWeek:["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"]},ch:{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeekShort:["Sn","Mn","Tis","Ons","Tor","Fre","Lr"]},kr:{months:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeekShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayOfWeek:["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"]},da:{months:["January","Februar","Marts","April","Maj","Juni","July","August","September","Oktober","November","December"],dayOfWeekShort:["Sn","Man","Tir","Ons","Tor","Fre","Lr"],dayOfWeek:["sndag","mandag","tirsdag","onsdag","torsdag","fredag","lrdag"]},no:{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dayOfWeekShort:["Sn","Man","Tir","Ons","Tor","Fre","Lr"],dayOfWeek:['Sndag','Mandag','Tirsdag','Onsdag','Torsdag','Fredag','Lrdag']},ja:{months:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},vi:{months:["Thng 1","Thng 2","Thng 3","Thng 4","Thng 5","Thng 6","Thng 7","Thng 8","Thng 9","Thng 10","Thng 11","Thng 12"],dayOfWeekShort:["CN","T2","T3","T4","T5","T6","T7"],dayOfWeek:["Ch nht","Th hai","Th ba","Th t","Th nm","Th su","Th by"]},sl:{months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],dayOfWeekShort:["Ned","Pon","Tor","Sre","et","Pet","Sob"],dayOfWeek:["Nedelja","Ponedeljek","Torek","Sreda","etrtek","Petek","Sobota"]},cs:{months:["Leden","nor","Bezen","Duben","Kvten","erven","ervenec","Srpen","Z","jen","Listopad","Prosinec"],dayOfWeekShort:["Ne","Po","t","St","t","P","So"]},hu:{months:["Janur","Februr","Mrcius","prilis","Mjus","Jnius","Jlius","Augusztus","Szeptember","Oktber","November","December"],dayOfWeekShort:["Va","H","Ke","Sze","Cs","P","Szo"],dayOfWeek:["vasrnap","htf","kedd","szerda","cstrtk","pntek","szombat"]},az:{months:["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],dayOfWeekShort:["B","Be","a","","Ca","C",""],dayOfWeek:["Bazar","Bazar ertsi","rnb axam","rnb","Cm axam","Cm","nb"]},bs:{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeekShort:["Ned","Pon","Uto","Sri","et","Pet","Sub"],dayOfWeek:["Nedjelja","Ponedjeljak","Utorak","Srijeda","etvrtak","Petak","Subota"]},ca:{months:["Gener","Febrer","Mar","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],dayOfWeekShort:["Dg","Dl","Dt","Dc","Dj","Dv","Ds"],dayOfWeek:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"]},'en-GB':{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},et:{months:["Jaanuar","Veebruar","Mrts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],dayOfWeekShort:["P","E","T","K","N","R","L"],dayOfWeek:["Phapev","Esmaspev","Teisipev","Kolmapev","Neljapev","Reede","Laupev"]},eu:{months:["Urtarrila","Otsaila","Martxoa","Apirila","Maiatza","Ekaina","Uztaila","Abuztua","Iraila","Urria","Azaroa","Abendua"],dayOfWeekShort:["Ig.","Al.","Ar.","Az.","Og.","Or.","La."],dayOfWeek:['Igandea','Astelehena','Asteartea','Asteazkena','Osteguna','Ostirala','Larunbata']},fi:{months:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Keskuu","Heinkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dayOfWeekShort:["Su","Ma","Ti","Ke","To","Pe","La"],dayOfWeek:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"]},gl:{months:["Xan","Feb","Maz","Abr","Mai","Xun","Xul","Ago","Set","Out","Nov","Dec"],dayOfWeekShort:["Dom","Lun","Mar","Mer","Xov","Ven","Sab"],dayOfWeek:["Domingo","Luns","Martes","Mrcores","Xoves","Venres","Sbado"]},hr:{months:["Sijeanj","Veljaa","Oujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],dayOfWeekShort:["Ned","Pon","Uto","Sri","et","Pet","Sub"],dayOfWeek:["Nedjelja","Ponedjeljak","Utorak","Srijeda","etvrtak","Petak","Subota"]},ko:{months:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},lt:{months:["Sausio","Vasario","Kovo","Balandio","Gegus","Birelio","Liepos","Rugpjio","Rugsjo","Spalio","Lapkriio","Gruodio"],dayOfWeekShort:["Sek","Pir","Ant","Tre","Ket","Pen","e"],dayOfWeek:["Sekmadienis","Pirmadienis","Antradienis","Treiadienis","Ketvirtadienis","Penktadienis","etadienis"]},lv:{months:["Janvris","Februris","Marts","Aprlis ","Maijs","Jnijs","Jlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],dayOfWeekShort:["Sv","Pr","Ot","Tr","Ct","Pk","St"],dayOfWeek:["Svtdiena","Pirmdiena","Otrdiena","Trediena","Ceturtdiena","Piektdiena","Sestdiena"]},mk:{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},mn:{months:["1- ","2- ","3- ","4- ","5- ","6- ","7- ","8- ","9- ","10- ","11- ","12- "],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},'pt-BR':{months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeekShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],dayOfWeek:["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"]},sk:{months:["Janur","Februr","Marec","Aprl","Mj","Jn","Jl","August","September","Oktber","November","December"],dayOfWeekShort:["Ne","Po","Ut","St","t","Pi","So"],dayOfWeek:["Nedea","Pondelok","Utorok","Streda","tvrtok","Piatok","Sobota"]},sq:{months:["Janar","Shkurt","Mars","Prill","Maj","Qershor","Korrik","Gusht","Shtator","Tetor","Nntor","Dhjetor"],dayOfWeekShort:["Die","Hn","Mar","Mr","Enj","Pre","Shtu"],dayOfWeek:["E Diel","E Hn","E Mart","E Mrkur","E Enjte","E Premte","E Shtun"]},'sr-YU':{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeekShort:["Ned","Pon","Uto","Sre","et","Pet","Sub"],dayOfWeek:["Nedelja","Ponedeljak","Utorak","Sreda","etvrtak","Petak","Subota"]},sr:{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},sv:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeekShort:["Sn","Mn","Tis","Ons","Tor","Fre","Lr"],dayOfWeek:["Sndag","Mndag","Tisdag","Onsdag","Torsdag","Fredag","Lrdag"]},'zh-TW':{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},zh:{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},he:{months:['','','','','','','','','','','',''],dayOfWeekShort:['\'','\'','\'','\'','\'','\'',''],dayOfWeek:["","","","","","","",""]},hy:{months:["","","","","","","","","","","",""],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},kg:{months:[' ',' ',' ',' ','','','',' ',' ',' ',' ',' '],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},rm:{months:["Schaner","Favrer","Mars","Avrigl","Matg","Zercladur","Fanadur","Avust","Settember","October","November","December"],dayOfWeekShort:["Du","Gli","Ma","Me","Gie","Ve","So"],dayOfWeek:["Dumengia","Glindesdi","Mardi","Mesemna","Gievgia","Venderdi","Sonda"]},ka:{months:['','','','','','','','','','','',''],dayOfWeekShort:["","","","","","",""],dayOfWeek:["","","","","","",""]},},value:'',rtl:false,format:'Y/m/d H:i',formatTime:'H:i',formatDate:'Y/m/d',startDate:false,step:60,monthChangeSpinner:true,closeOnDateSelect:false,closeOnTimeSelect:true,closeOnWithoutClick:true,closeOnInputClick:true,timepicker:true,datepicker:true,weeks:false,defaultTime:false,defaultDate:false,minDate:false,maxDate:false,minTime:false,maxTime:false,disabledMinTime:false,disabledMaxTime:false,allowTimes:[],opened:false,initTime:true,inline:false,theme:'',onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onGetWeekOfYear:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:true,inverseButton:false,hours12:false,next:'xdsoft_next',prev:'xdsoft_prev',dayOfWeekStart:0,parentID:'body',timeHeightInTimePicker:25,timepickerScrollbar:true,todayButton:true,prevButton:true,nextButton:true,defaultSelect:true,scrollMonth:true,scrollTime:true,scrollInput:true,lazyInit:false,mask:false,validateOnBlur:true,allowBlank:true,yearStart:1950,yearEnd:2050,monthStart:0,monthEnd:11,style:'',id:'',fixed:false,roundTime:'round',className:'',weekends:[],highlightedDates:[],highlightedPeriods:[],allowDates:[],allowDateRe:null,disabledDates:[],disabledWeekDays:[],yearOffset:0,beforeShowDay:null,enterLikeTab:true,showApplyButton:false};var dateHelper=null,globalLocaleDefault='en',globalLocale='en';var dateFormatterOptionsDefault={meridiem:['AM','PM']};var initDateFormatter=function(){var locale=default_options.i18n[globalLocale],opts={days:locale.dayOfWeek,daysShort:locale.dayOfWeekShort,months:locale.months,monthsShort:$.map(locale.months,function(n){return n.substring(0,3)}),};dateHelper=new DateFormatter({dateSettings:$.extend({},dateFormatterOptionsDefault,opts)});};$.datetimepicker={setLocale:function(locale){var newLocale=default_options.i18n[locale]?locale:globalLocaleDefault;if(globalLocale!=newLocale){globalLocale=newLocale;initDateFormatter();}},setDateFormatter:function(dateFormatter){dateHelper=dateFormatter;},RFC_2822:'D, d M Y H:i:s O',ATOM:'Y-m-d\TH:i:sP',ISO_8601:'Y-m-d\TH:i:sO',RFC_822:'D, d M y H:i:s O',RFC_850:'l, d-M-y H:i:s T',RFC_1036:'D, d M y H:i:s O',RFC_1123:'D, d M Y H:i:s O',RSS:'D, d M Y H:i:s O',W3C:'Y-m-d\TH:i:sP'};initDateFormatter();if(!window.getComputedStyle){window.getComputedStyle=function(el,pseudo){this.el=el;this.getPropertyValue=function(prop){var re=/(\-([a-z]){1})/g;if(prop==='float'){prop='styleFloat';}
if(re.test(prop)){prop=prop.replace(re,function(a,b,c){return c.toUpperCase();});}
return el.currentStyle[prop]||null;};return this;};}
if(!Array.prototype.indexOf){Array.prototype.indexOf=function(obj,start){var i,j;for(i=(start||0),j=this.length;i<j;i+=1){if(this[i]===obj){return i;}}
return-1;};}
Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate();};$.fn.xdsoftScroller=function(percent){return this.each(function(){var timeboxparent=$(this),pointerEventToXY=function(e){var out={x:0,y:0},touch;if(e.type==='touchstart'||e.type==='touchmove'||e.type==='touchend'||e.type==='touchcancel'){touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];out.x=touch.clientX;out.y=touch.clientY;}else if(e.type==='mousedown'||e.type==='mouseup'||e.type==='mousemove'||e.type==='mouseover'||e.type==='mouseout'||e.type==='mouseenter'||e.type==='mouseleave'){out.x=e.clientX;out.y=e.clientY;}
return out;},timebox,parentHeight,height,scrollbar,scroller,maximumOffset=100,start=false,startY=0,startTop=0,h1=0,touchStart=false,startTopScroll=0,calcOffset=function(){};if(percent==='hide'){timeboxparent.find('.xdsoft_scrollbar').hide();return;}
if(!$(this).hasClass('xdsoft_scroller_box')){timebox=timeboxparent.children().eq(0);parentHeight=timeboxparent[0].clientHeight;height=timebox[0].offsetHeight;scrollbar=$('<div class="xdsoft_scrollbar"></div>');scroller=$('<div class="xdsoft_scroller"></div>');scrollbar.append(scroller);timeboxparent.addClass('xdsoft_scroller_box').append(scrollbar);calcOffset=function calcOffset(event){var offset=pointerEventToXY(event).y-startY+startTopScroll;if(offset<0){offset=0;}
if(offset+scroller[0].offsetHeight>h1){offset=h1-scroller[0].offsetHeight;}
timeboxparent.trigger('scroll_element.xdsoft_scroller',[maximumOffset?offset/maximumOffset:0]);};scroller.on('touchstart.xdsoft_scroller mousedown.xdsoft_scroller',function(event){if(!parentHeight){timeboxparent.trigger('resize_scroll.xdsoft_scroller',[percent]);}
startY=pointerEventToXY(event).y;startTopScroll=parseInt(scroller.css('margin-top'),10);h1=scrollbar[0].offsetHeight;if(event.type==='mousedown'||event.type==='touchstart'){if(document){$(document.body).addClass('xdsoft_noselect');}
$([document.body,window]).on('touchend mouseup.xdsoft_scroller',function arguments_callee(){$([document.body,window]).off('touchend mouseup.xdsoft_scroller',arguments_callee).off('mousemove.xdsoft_scroller',calcOffset).removeClass('xdsoft_noselect');});$(document.body).on('mousemove.xdsoft_scroller',calcOffset);}else{touchStart=true;event.stopPropagation();event.preventDefault();}}).on('touchmove',function(event){if(touchStart){event.preventDefault();calcOffset(event);}}).on('touchend touchcancel',function(){touchStart=false;startTopScroll=0;});timeboxparent.on('scroll_element.xdsoft_scroller',function(event,percentage){if(!parentHeight){timeboxparent.trigger('resize_scroll.xdsoft_scroller',[percentage,true]);}
percentage=percentage>1?1:(percentage<0||isNaN(percentage))?0:percentage;scroller.css('margin-top',maximumOffset*percentage);setTimeout(function(){timebox.css('marginTop',-parseInt((timebox[0].offsetHeight-parentHeight)*percentage,10));},10);}).on('resize_scroll.xdsoft_scroller',function(event,percentage,noTriggerScroll){var percent,sh;parentHeight=timeboxparent[0].clientHeight;height=timebox[0].offsetHeight;percent=parentHeight/height;sh=percent*scrollbar[0].offsetHeight;if(percent>1){scroller.hide();}else{scroller.show();scroller.css('height',parseInt(sh>10?sh:10,10));maximumOffset=scrollbar[0].offsetHeight-scroller[0].offsetHeight;if(noTriggerScroll!==true){timeboxparent.trigger('scroll_element.xdsoft_scroller',[percentage||Math.abs(parseInt(timebox.css('marginTop'),10))/(height-parentHeight)]);}}});timeboxparent.on('mousewheel',function(event){var top=Math.abs(parseInt(timebox.css('marginTop'),10));top=top-(event.deltaY*20);if(top<0){top=0;}
timeboxparent.trigger('scroll_element.xdsoft_scroller',[top/(height-parentHeight)]);event.stopPropagation();return false;});timeboxparent.on('touchstart',function(event){start=pointerEventToXY(event);startTop=Math.abs(parseInt(timebox.css('marginTop'),10));});timeboxparent.on('touchmove',function(event){if(start){event.preventDefault();var coord=pointerEventToXY(event);timeboxparent.trigger('scroll_element.xdsoft_scroller',[(startTop-(coord.y-start.y))/(height-parentHeight)]);}});timeboxparent.on('touchend touchcancel',function(){start=false;startTop=0;});}
timeboxparent.trigger('resize_scroll.xdsoft_scroller',[percent]);});};$.fn.datetimepicker=function(opt,opt2){var result=this,KEY0=48,KEY9=57,_KEY0=96,_KEY9=105,CTRLKEY=17,DEL=46,ENTER=13,ESC=27,BACKSPACE=8,ARROWLEFT=37,ARROWUP=38,ARROWRIGHT=39,ARROWDOWN=40,TAB=9,F5=116,AKEY=65,CKEY=67,VKEY=86,ZKEY=90,YKEY=89,ctrlDown=false,options=($.isPlainObject(opt)||!opt)?$.extend(true,{},default_options,opt):$.extend(true,{},default_options),lazyInitTimer=0,createDateTimePicker,destroyDateTimePicker,lazyInit=function(input){input.on('open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart',function initOnActionCallback(){if(input.is(':disabled')||input.data('xdsoft_datetimepicker')){return;}
clearTimeout(lazyInitTimer);lazyInitTimer=setTimeout(function(){if(!input.data('xdsoft_datetimepicker')){createDateTimePicker(input);}
input.off('open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart',initOnActionCallback).trigger('open.xdsoft');},100);});};createDateTimePicker=function(input){var datetimepicker=$('<div class="xdsoft_datetimepicker xdsoft_noselect"></div>'),xdsoft_copyright=$('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),datepicker=$('<div class="xdsoft_datepicker active"></div>'),month_picker=$('<div class="xdsoft_monthpicker"><button type="button" class="xdsoft_prev">Previous</button><button type="button" class="xdsoft_today_button">Today</button>'+'<div class="xdsoft_label xdsoft_month"><span></span><i></i></div>'+'<div class="xdsoft_label xdsoft_year"><span></span><i></i></div>'+'<button type="button" class="xdsoft_next">Next</button></div>'),calendar=$('<div class="xdsoft_calendar"></div>'),timepicker=$('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev">Previous</button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next">Next</button></div>'),timeboxparent=timepicker.find('.xdsoft_time_box').eq(0),timebox=$('<div class="xdsoft_time_variant"></div>'),applyButton=$('<button type="button" class="xdsoft_save_selected blue-gradient-button">Save Selected</button>'),monthselect=$('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),yearselect=$('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),triggerAfterOpen=false,XDSoft_datetime,xchangeTimer,timerclick,current_time_index,setPos,timer=0,_xdsoft_datetime,forEachAncestorOf,throttle;if(options.id){datetimepicker.attr('id',options.id);}
if(options.style){datetimepicker.attr('style',options.style);}
if(options.weeks){datetimepicker.addClass('xdsoft_showweeks');}
if(options.rtl){datetimepicker.addClass('xdsoft_rtl');}
datetimepicker.addClass('xdsoft_'+options.theme);datetimepicker.addClass(options.className);month_picker.find('.xdsoft_month span').after(monthselect);month_picker.find('.xdsoft_year span').after(yearselect);month_picker.find('.xdsoft_month,.xdsoft_year').on('touchstart mousedown.xdsoft',function(event){var select=$(this).find('.xdsoft_select').eq(0),val=0,top=0,visible=select.is(':visible'),items,i;month_picker.find('.xdsoft_select').hide();if(_xdsoft_datetime.currentTime){val=_xdsoft_datetime.currentTime[$(this).hasClass('xdsoft_month')?'getMonth':'getFullYear']();}
select[visible?'hide':'show']();for(items=select.find('div.xdsoft_option'),i=0;i<items.length;i+=1){if(items.eq(i).data('value')===val){break;}else{top+=items[0].offsetHeight;}}
select.xdsoftScroller(top/(select.children()[0].offsetHeight-(select[0].clientHeight)));event.stopPropagation();return false;});month_picker.find('.xdsoft_select').xdsoftScroller().on('touchstart mousedown.xdsoft',function(event){event.stopPropagation();event.preventDefault();}).on('touchstart mousedown.xdsoft','.xdsoft_option',function(){if(_xdsoft_datetime.currentTime===undefined||_xdsoft_datetime.currentTime===null){_xdsoft_datetime.currentTime=_xdsoft_datetime.now();}
var year=_xdsoft_datetime.currentTime.getFullYear();if(_xdsoft_datetime&&_xdsoft_datetime.currentTime){_xdsoft_datetime.currentTime[$(this).parent().parent().hasClass('xdsoft_monthselect')?'setMonth':'setFullYear']($(this).data('value'));}
$(this).parent().parent().hide();datetimepicker.trigger('xchange.xdsoft');if(options.onChangeMonth&&$.isFunction(options.onChangeMonth)){options.onChangeMonth.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'));}
if(year!==_xdsoft_datetime.currentTime.getFullYear()&&$.isFunction(options.onChangeYear)){options.onChangeYear.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'));}});datetimepicker.getValue=function(){return _xdsoft_datetime.getCurrentTime();};datetimepicker.setOptions=function(_options){var highlightedDates={};options=$.extend(true,{},options,_options);if(_options.allowTimes&&$.isArray(_options.allowTimes)&&_options.allowTimes.length){options.allowTimes=$.extend(true,[],_options.allowTimes);}
if(_options.weekends&&$.isArray(_options.weekends)&&_options.weekends.length){options.weekends=$.extend(true,[],_options.weekends);}
if(_options.allowDates&&$.isArray(_options.allowDates)&&_options.allowDates.length){options.allowDates=$.extend(true,[],_options.allowDates);}
if(_options.allowDateRe&&Object.prototype.toString.call(_options.allowDateRe)==="[object String]"){options.allowDateRe=new RegExp(_options.allowDateRe);}
if(_options.highlightedDates&&$.isArray(_options.highlightedDates)&&_options.highlightedDates.length){$.each(_options.highlightedDates,function(index,value){var splitData=$.map(value.split(','),$.trim),exDesc,hDate=new HighlightedDate(dateHelper.parseDate(splitData[0],options.formatDate),splitData[1],splitData[2]),keyDate=dateHelper.formatDate(hDate.date,options.formatDate);if(highlightedDates[keyDate]!==undefined){exDesc=highlightedDates[keyDate].desc;if(exDesc&&exDesc.length&&hDate.desc&&hDate.desc.length){highlightedDates[keyDate].desc=exDesc+"\n"+hDate.desc;}}else{highlightedDates[keyDate]=hDate;}});options.highlightedDates=$.extend(true,[],highlightedDates);}
if(_options.highlightedPeriods&&$.isArray(_options.highlightedPeriods)&&_options.highlightedPeriods.length){highlightedDates=$.extend(true,[],options.highlightedDates);$.each(_options.highlightedPeriods,function(index,value){var dateTest,dateEnd,desc,hDate,keyDate,exDesc,style;if($.isArray(value)){dateTest=value[0];dateEnd=value[1];desc=value[2];style=value[3];}
else{var splitData=$.map(value.split(','),$.trim);dateTest=dateHelper.parseDate(splitData[0],options.formatDate);dateEnd=dateHelper.parseDate(splitData[1],options.formatDate);desc=splitData[2];style=splitData[3];}
while(dateTest<=dateEnd){hDate=new HighlightedDate(dateTest,desc,style);keyDate=dateHelper.formatDate(dateTest,options.formatDate);dateTest.setDate(dateTest.getDate()+1);if(highlightedDates[keyDate]!==undefined){exDesc=highlightedDates[keyDate].desc;if(exDesc&&exDesc.length&&hDate.desc&&hDate.desc.length){highlightedDates[keyDate].desc=exDesc+"\n"+hDate.desc;}}else{highlightedDates[keyDate]=hDate;}}});options.highlightedDates=$.extend(true,[],highlightedDates);}
if(_options.disabledDates&&$.isArray(_options.disabledDates)&&_options.disabledDates.length){options.disabledDates=$.extend(true,[],_options.disabledDates);}
if(_options.disabledWeekDays&&$.isArray(_options.disabledWeekDays)&&_options.disabledWeekDays.length){options.disabledWeekDays=$.extend(true,[],_options.disabledWeekDays);}
if((options.open||options.opened)&&(!options.inline)){input.trigger('open.xdsoft');}
if(options.inline){triggerAfterOpen=true;datetimepicker.addClass('xdsoft_inline');input.after(datetimepicker).hide();}
if(options.inverseButton){options.next='xdsoft_prev';options.prev='xdsoft_next';}
if(options.datepicker){datepicker.addClass('active');}else{datepicker.removeClass('active');}
if(options.timepicker){timepicker.addClass('active');}else{timepicker.removeClass('active');}
if(options.value){_xdsoft_datetime.setCurrentTime(options.value);if(input&&input.val){input.val(_xdsoft_datetime.str);}}
if(isNaN(options.dayOfWeekStart)){options.dayOfWeekStart=0;}else{options.dayOfWeekStart=parseInt(options.dayOfWeekStart,10)%7;}
if(!options.timepickerScrollbar){timeboxparent.xdsoftScroller('hide');}
if(options.minDate&&/^[\+\-](.*)$/.test(options.minDate)){options.minDate=dateHelper.formatDate(_xdsoft_datetime.strToDateTime(options.minDate),options.formatDate);}
if(options.maxDate&&/^[\+\-](.*)$/.test(options.maxDate)){options.maxDate=dateHelper.formatDate(_xdsoft_datetime.strToDateTime(options.maxDate),options.formatDate);}
applyButton.toggle(options.showApplyButton);month_picker.find('.xdsoft_today_button').css('visibility',!options.todayButton?'hidden':'visible');month_picker.find('.'+options.prev).css('visibility',!options.prevButton?'hidden':'visible');month_picker.find('.'+options.next).css('visibility',!options.nextButton?'hidden':'visible');setMask(options);if(options.validateOnBlur){input.off('blur.xdsoft').on('blur.xdsoft',function(){if(options.allowBlank&&(!$.trim($(this).val()).length||(typeof options.mask=="string"&&$.trim($(this).val())===options.mask.replace(/[0-9]/g,'_')))){$(this).val(null);datetimepicker.data('xdsoft_datetime').empty();}else{var d=dateHelper.parseDate($(this).val(),options.format);if(d){$(this).val(dateHelper.formatDate(d,options.format));}else{var splittedHours=+([$(this).val()[0],$(this).val()[1]].join('')),splittedMinutes=+([$(this).val()[2],$(this).val()[3]].join(''));if(!options.datepicker&&options.timepicker&&splittedHours>=0&&splittedHours<24&&splittedMinutes>=0&&splittedMinutes<60){$(this).val([splittedHours,splittedMinutes].map(function(item){return item>9?item:'0'+item;}).join(':'));}else{$(this).val(dateHelper.formatDate(_xdsoft_datetime.now(),options.format));}}
datetimepicker.data('xdsoft_datetime').setCurrentTime($(this).val());}
datetimepicker.trigger('changedatetime.xdsoft');datetimepicker.trigger('close.xdsoft');});}
options.dayOfWeekStartPrev=(options.dayOfWeekStart===0)?6:options.dayOfWeekStart-1;datetimepicker.trigger('xchange.xdsoft').trigger('afterOpen.xdsoft');};datetimepicker.data('options',options).on('touchstart mousedown.xdsoft',function(event){event.stopPropagation();event.preventDefault();yearselect.hide();monthselect.hide();return false;});timeboxparent.append(timebox);timeboxparent.xdsoftScroller();datetimepicker.on('afterOpen.xdsoft',function(){timeboxparent.xdsoftScroller();});datetimepicker.append(datepicker).append(timepicker);if(options.withoutCopyright!==true){datetimepicker.append(xdsoft_copyright);}
datepicker.append(month_picker).append(calendar).append(applyButton);$(options.parentID).append(datetimepicker);XDSoft_datetime=function(){var _this=this;_this.now=function(norecursion){var d=new Date(),date,time;if(!norecursion&&options.defaultDate){date=_this.strToDateTime(options.defaultDate);d.setFullYear(date.getFullYear());d.setMonth(date.getMonth());d.setDate(date.getDate());}
if(options.yearOffset){d.setFullYear(d.getFullYear()+options.yearOffset);}
if(!norecursion&&options.defaultTime){time=_this.strtotime(options.defaultTime);d.setHours(time.getHours());d.setMinutes(time.getMinutes());}
return d;};_this.isValidDate=function(d){if(Object.prototype.toString.call(d)!=="[object Date]"){return false;}
return!isNaN(d.getTime());};_this.setCurrentTime=function(dTime,requireValidDate){if(typeof dTime==='string'){_this.currentTime=_this.strToDateTime(dTime);}
else if(_this.isValidDate(dTime)){_this.currentTime=dTime;}
else if(!dTime&&!requireValidDate&&options.allowBlank){_this.currentTime=null;}
else{_this.currentTime=_this.now();}
datetimepicker.trigger('xchange.xdsoft');};_this.empty=function(){_this.currentTime=null;};_this.getCurrentTime=function(dTime){return _this.currentTime;};_this.nextMonth=function(){if(_this.currentTime===undefined||_this.currentTime===null){_this.currentTime=_this.now();}
var month=_this.currentTime.getMonth()+1,year;if(month===12){_this.currentTime.setFullYear(_this.currentTime.getFullYear()+1);month=0;}
year=_this.currentTime.getFullYear();_this.currentTime.setDate(Math.min(new Date(_this.currentTime.getFullYear(),month+1,0).getDate(),_this.currentTime.getDate()));_this.currentTime.setMonth(month);if(options.onChangeMonth&&$.isFunction(options.onChangeMonth)){options.onChangeMonth.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'));}
if(year!==_this.currentTime.getFullYear()&&$.isFunction(options.onChangeYear)){options.onChangeYear.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'));}
datetimepicker.trigger('xchange.xdsoft');return month;};_this.prevMonth=function(){if(_this.currentTime===undefined||_this.currentTime===null){_this.currentTime=_this.now();}
var month=_this.currentTime.getMonth()-1;if(month===-1){_this.currentTime.setFullYear(_this.currentTime.getFullYear()-1);month=11;}
_this.currentTime.setDate(Math.min(new Date(_this.currentTime.getFullYear(),month+1,0).getDate(),_this.currentTime.getDate()));_this.currentTime.setMonth(month);if(options.onChangeMonth&&$.isFunction(options.onChangeMonth)){options.onChangeMonth.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'));}
datetimepicker.trigger('xchange.xdsoft');return month;};_this.getWeekOfYear=function(datetime){if(options.onGetWeekOfYear&&$.isFunction(options.onGetWeekOfYear)){var week=options.onGetWeekOfYear.call(datetimepicker,datetime);if(typeof week!=='undefined'){return week;}}
var onejan=new Date(datetime.getFullYear(),0,1);if(onejan.getDay()!=4)
onejan.setMonth(0,1+((4-onejan.getDay()+7)%7));return Math.ceil((((datetime-onejan)/86400000)+onejan.getDay()+1)/7);};_this.strToDateTime=function(sDateTime){var tmpDate=[],timeOffset,currentTime;if(sDateTime&&sDateTime instanceof Date&&_this.isValidDate(sDateTime)){return sDateTime;}
tmpDate=/^(\+|\-)(.*)$/.exec(sDateTime);if(tmpDate){tmpDate[2]=dateHelper.parseDate(tmpDate[2],options.formatDate);}
if(tmpDate&&tmpDate[2]){timeOffset=tmpDate[2].getTime()-(tmpDate[2].getTimezoneOffset())*60000;currentTime=new Date((_this.now(true)).getTime()+parseInt(tmpDate[1]+'1',10)*timeOffset);}else{currentTime=sDateTime?dateHelper.parseDate(sDateTime,options.format):_this.now();}
if(!_this.isValidDate(currentTime)){currentTime=_this.now();}
return currentTime;};_this.strToDate=function(sDate){if(sDate&&sDate instanceof Date&&_this.isValidDate(sDate)){return sDate;}
var currentTime=sDate?dateHelper.parseDate(sDate,options.formatDate):_this.now(true);if(!_this.isValidDate(currentTime)){currentTime=_this.now(true);}
return currentTime;};_this.strtotime=function(sTime){if(sTime&&sTime instanceof Date&&_this.isValidDate(sTime)){return sTime;}
var currentTime=sTime?dateHelper.parseDate(sTime,options.formatTime):_this.now(true);if(!_this.isValidDate(currentTime)){currentTime=_this.now(true);}
return currentTime;};_this.str=function(){return dateHelper.formatDate(_this.currentTime,options.format);};_this.currentTime=this.now();};_xdsoft_datetime=new XDSoft_datetime();applyButton.on('touchend click',function(e){e.preventDefault();datetimepicker.data('changed',true);_xdsoft_datetime.setCurrentTime(getCurrentValue());input.val(_xdsoft_datetime.str());datetimepicker.trigger('close.xdsoft');});month_picker.find('.xdsoft_today_button').on('touchend mousedown.xdsoft',function(){datetimepicker.data('changed',true);_xdsoft_datetime.setCurrentTime(0,true);datetimepicker.trigger('afterOpen.xdsoft');}).on('dblclick.xdsoft',function(){var currentDate=_xdsoft_datetime.getCurrentTime(),minDate,maxDate;currentDate=new Date(currentDate.getFullYear(),currentDate.getMonth(),currentDate.getDate());minDate=_xdsoft_datetime.strToDate(options.minDate);minDate=new Date(minDate.getFullYear(),minDate.getMonth(),minDate.getDate());if(currentDate<minDate){return;}
maxDate=_xdsoft_datetime.strToDate(options.maxDate);maxDate=new Date(maxDate.getFullYear(),maxDate.getMonth(),maxDate.getDate());if(currentDate>maxDate){return;}
input.val(_xdsoft_datetime.str());input.trigger('change');datetimepicker.trigger('close.xdsoft');});month_picker.find('.xdsoft_prev,.xdsoft_next').on('touchend mousedown.xdsoft',function(){var $this=$(this),timer=0,stop=false;(function arguments_callee1(v){if($this.hasClass(options.next)){_xdsoft_datetime.nextMonth();}else if($this.hasClass(options.prev)){_xdsoft_datetime.prevMonth();}
if(options.monthChangeSpinner){if(!stop){timer=setTimeout(arguments_callee1,v||100);}}}(500));$([document.body,window]).on('touchend mouseup.xdsoft',function arguments_callee2(){clearTimeout(timer);stop=true;$([document.body,window]).off('touchend mouseup.xdsoft',arguments_callee2);});});timepicker.find('.xdsoft_prev,.xdsoft_next').on('touchend mousedown.xdsoft',function(){var $this=$(this),timer=0,stop=false,period=110;(function arguments_callee4(v){var pheight=timeboxparent[0].clientHeight,height=timebox[0].offsetHeight,top=Math.abs(parseInt(timebox.css('marginTop'),10));if($this.hasClass(options.next)&&(height-pheight)-options.timeHeightInTimePicker>=top){timebox.css('marginTop','-'+(top+options.timeHeightInTimePicker)+'px');}else if($this.hasClass(options.prev)&&top-options.timeHeightInTimePicker>=0){timebox.css('marginTop','-'+(top-options.timeHeightInTimePicker)+'px');}
timeboxparent.trigger('scroll_element.xdsoft_scroller',[Math.abs(parseInt(timebox[0].style.marginTop,10)/(height-pheight))]);period=(period>10)?10:period-10;if(!stop){timer=setTimeout(arguments_callee4,v||period);}}(500));$([document.body,window]).on('touchend mouseup.xdsoft',function arguments_callee5(){clearTimeout(timer);stop=true;$([document.body,window]).off('touchend mouseup.xdsoft',arguments_callee5);});});xchangeTimer=0;datetimepicker.on('xchange.xdsoft',function(event){clearTimeout(xchangeTimer);xchangeTimer=setTimeout(function(){if(_xdsoft_datetime.currentTime===undefined||_xdsoft_datetime.currentTime===null){if(options.allowBlank)
return;_xdsoft_datetime.currentTime=_xdsoft_datetime.now();}
var table='',start=new Date(_xdsoft_datetime.currentTime.getFullYear(),_xdsoft_datetime.currentTime.getMonth(),1,12,0,0),i=0,j,today=_xdsoft_datetime.now(),maxDate=false,minDate=false,hDate,day,d,y,m,w,classes=[],customDateSettings,newRow=true,time='',h='',line_time,description;while(start.getDay()!==options.dayOfWeekStart){start.setDate(start.getDate()-1);}
table+='<table><thead><tr>';if(options.weeks){table+='<th></th>';}
for(j=0;j<7;j+=1){table+='<th>'+options.i18n[globalLocale].dayOfWeekShort[(j+options.dayOfWeekStart)%7]+'</th>';}
table+='</tr></thead>';table+='<tbody>';if(options.maxDate!==false){maxDate=_xdsoft_datetime.strToDate(options.maxDate);maxDate=new Date(maxDate.getFullYear(),maxDate.getMonth(),maxDate.getDate(),23,59,59,999);}
if(options.minDate!==false){minDate=_xdsoft_datetime.strToDate(options.minDate);minDate=new Date(minDate.getFullYear(),minDate.getMonth(),minDate.getDate());}
while(i<_xdsoft_datetime.currentTime.countDaysInMonth()||start.getDay()!==options.dayOfWeekStart||_xdsoft_datetime.currentTime.getMonth()===start.getMonth()){classes=[];i+=1;day=start.getDay();d=start.getDate();y=start.getFullYear();m=start.getMonth();w=_xdsoft_datetime.getWeekOfYear(start);description='';classes.push('xdsoft_date');if(options.beforeShowDay&&$.isFunction(options.beforeShowDay.call)){customDateSettings=options.beforeShowDay.call(datetimepicker,start);}else{customDateSettings=null;}
if(options.allowDateRe&&Object.prototype.toString.call(options.allowDateRe)==="[object RegExp]"){if(!options.allowDateRe.test(dateHelper.formatDate(start,options.formatDate))){classes.push('xdsoft_disabled');}}else if(options.allowDates&&options.allowDates.length>0){if(options.allowDates.indexOf(dateHelper.formatDate(start,options.formatDate))===-1){classes.push('xdsoft_disabled');}}else if((maxDate!==false&&start>maxDate)||(minDate!==false&&start<minDate)||(customDateSettings&&customDateSettings[0]===false)){classes.push('xdsoft_disabled');}else if(options.disabledDates.indexOf(dateHelper.formatDate(start,options.formatDate))!==-1){classes.push('xdsoft_disabled');}else if(options.disabledWeekDays.indexOf(day)!==-1){classes.push('xdsoft_disabled');}else if(input.is('[readonly]')){classes.push('xdsoft_disabled');}
if(customDateSettings&&customDateSettings[1]!==""){classes.push(customDateSettings[1]);}
if(_xdsoft_datetime.currentTime.getMonth()!==m){classes.push('xdsoft_other_month');}
if((options.defaultSelect||datetimepicker.data('changed'))&&dateHelper.formatDate(_xdsoft_datetime.currentTime,options.formatDate)===dateHelper.formatDate(start,options.formatDate)){classes.push('xdsoft_current');}
if(dateHelper.formatDate(today,options.formatDate)===dateHelper.formatDate(start,options.formatDate)){classes.push('xdsoft_today');}
if(start.getDay()===0||start.getDay()===6||options.weekends.indexOf(dateHelper.formatDate(start,options.formatDate))!==-1){classes.push('xdsoft_weekend');}
if(options.highlightedDates[dateHelper.formatDate(start,options.formatDate)]!==undefined){hDate=options.highlightedDates[dateHelper.formatDate(start,options.formatDate)];classes.push(hDate.style===undefined?'xdsoft_highlighted_default':hDate.style);description=hDate.desc===undefined?'':hDate.desc;}
if(options.beforeShowDay&&$.isFunction(options.beforeShowDay)){classes.push(options.beforeShowDay(start));}
if(newRow){table+='<tr>';newRow=false;if(options.weeks){table+='<th>'+w+'</th>';}}
table+='<td data-date="'+d+'" data-month="'+m+'" data-year="'+y+'"'+' class="xdsoft_date xdsoft_day_of_week'+start.getDay()+' '+classes.join(' ')+'" title="'+description+'">'+'<div>'+d+'</div>'+'</td>';if(start.getDay()===options.dayOfWeekStartPrev){table+='</tr>';newRow=true;}
start.setDate(d+1);}
table+='</tbody></table>';calendar.html(table);month_picker.find('.xdsoft_label span').eq(0).text(options.i18n[globalLocale].months[_xdsoft_datetime.currentTime.getMonth()]);month_picker.find('.xdsoft_label span').eq(1).text(_xdsoft_datetime.currentTime.getFullYear());time='';h='';m='';line_time=function line_time(h,m){var now=_xdsoft_datetime.now(),optionDateTime,current_time,isALlowTimesInit=options.allowTimes&&$.isArray(options.allowTimes)&&options.allowTimes.length;now.setHours(h);h=parseInt(now.getHours(),10);now.setMinutes(m);m=parseInt(now.getMinutes(),10);optionDateTime=new Date(_xdsoft_datetime.currentTime);optionDateTime.setHours(h);optionDateTime.setMinutes(m);classes=[];if((options.minDateTime!==false&&options.minDateTime>optionDateTime)||(options.maxTime!==false&&_xdsoft_datetime.strtotime(options.maxTime).getTime()<now.getTime())||(options.minTime!==false&&_xdsoft_datetime.strtotime(options.minTime).getTime()>now.getTime())){classes.push('xdsoft_disabled');}else if((options.minDateTime!==false&&options.minDateTime>optionDateTime)||((options.disabledMinTime!==false&&now.getTime()>_xdsoft_datetime.strtotime(options.disabledMinTime).getTime())&&(options.disabledMaxTime!==false&&now.getTime()<_xdsoft_datetime.strtotime(options.disabledMaxTime).getTime()))){classes.push('xdsoft_disabled');}else if(input.is('[readonly]')){classes.push('xdsoft_disabled');}
current_time=new Date(_xdsoft_datetime.currentTime);current_time.setHours(parseInt(_xdsoft_datetime.currentTime.getHours(),10));if(!isALlowTimesInit){current_time.setMinutes(Math[options.roundTime](_xdsoft_datetime.currentTime.getMinutes()/options.step)*options.step);}
if((options.initTime||options.defaultSelect||datetimepicker.data('changed'))&&current_time.getHours()===parseInt(h,10)&&((!isALlowTimesInit&&options.step>59)||current_time.getMinutes()===parseInt(m,10))){if(options.defaultSelect||datetimepicker.data('changed')){classes.push('xdsoft_current');}else if(options.initTime){classes.push('xdsoft_init_time');}}
if(parseInt(today.getHours(),10)===parseInt(h,10)&&parseInt(today.getMinutes(),10)===parseInt(m,10)){classes.push('xdsoft_today');}
time+='<div class="xdsoft_time '+classes.join(' ')+'" data-hour="'+h+'" data-minute="'+m+'">'+dateHelper.formatDate(now,options.formatTime)+'</div>';};if(!options.allowTimes||!$.isArray(options.allowTimes)||!options.allowTimes.length){for(i=0,j=0;i<(options.hours12?12:24);i+=1){for(j=0;j<60;j+=options.step){h=(i<10?'0':'')+i;m=(j<10?'0':'')+j;line_time(h,m);}}}else{for(i=0;i<options.allowTimes.length;i+=1){h=_xdsoft_datetime.strtotime(options.allowTimes[i]).getHours();m=_xdsoft_datetime.strtotime(options.allowTimes[i]).getMinutes();line_time(h,m);}}
timebox.html(time);opt='';i=0;for(i=parseInt(options.yearStart,10)+options.yearOffset;i<=parseInt(options.yearEnd,10)+options.yearOffset;i+=1){opt+='<div class="xdsoft_option '+(_xdsoft_datetime.currentTime.getFullYear()===i?'xdsoft_current':'')+'" data-value="'+i+'">'+i+'</div>';}
yearselect.children().eq(0).html(opt);for(i=parseInt(options.monthStart,10),opt='';i<=parseInt(options.monthEnd,10);i+=1){opt+='<div class="xdsoft_option '+(_xdsoft_datetime.currentTime.getMonth()===i?'xdsoft_current':'')+'" data-value="'+i+'">'+options.i18n[globalLocale].months[i]+'</div>';}
monthselect.children().eq(0).html(opt);$(datetimepicker).trigger('generate.xdsoft');},10);event.stopPropagation();}).on('afterOpen.xdsoft',function(){if(options.timepicker){var classType,pheight,height,top;if(timebox.find('.xdsoft_current').length){classType='.xdsoft_current';}else if(timebox.find('.xdsoft_init_time').length){classType='.xdsoft_init_time';}
if(classType){pheight=timeboxparent[0].clientHeight;height=timebox[0].offsetHeight;top=timebox.find(classType).index()*options.timeHeightInTimePicker+1;if((height-pheight)<top){top=height-pheight;}
timeboxparent.trigger('scroll_element.xdsoft_scroller',[parseInt(top,10)/(height-pheight)]);}else{timeboxparent.trigger('scroll_element.xdsoft_scroller',[0]);}}});timerclick=0;calendar.on('touchend click.xdsoft','td',function(xdevent){xdevent.stopPropagation();timerclick+=1;var $this=$(this),currentTime=_xdsoft_datetime.currentTime;if(currentTime===undefined||currentTime===null){_xdsoft_datetime.currentTime=_xdsoft_datetime.now();currentTime=_xdsoft_datetime.currentTime;}
if($this.hasClass('xdsoft_disabled')){return false;}
currentTime.setDate(1);currentTime.setFullYear($this.data('year'));currentTime.setMonth($this.data('month'));currentTime.setDate($this.data('date'));datetimepicker.trigger('select.xdsoft',[currentTime]);input.val(_xdsoft_datetime.str());if(options.onSelectDate&&$.isFunction(options.onSelectDate)){options.onSelectDate.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'),xdevent);}
datetimepicker.data('changed',true);datetimepicker.trigger('xchange.xdsoft');datetimepicker.trigger('changedatetime.xdsoft');if((timerclick>1||(options.closeOnDateSelect===true||(options.closeOnDateSelect===false&&!options.timepicker)))&&!options.inline){datetimepicker.trigger('close.xdsoft');}
setTimeout(function(){timerclick=0;},200);});timebox.on('touchmove','div',function(){currentlyScrollingTimeDiv=true;}).on('touchend click.xdsoft','div',function(xdevent){xdevent.stopPropagation();if(currentlyScrollingTimeDiv){currentlyScrollingTimeDiv=false;return;}
var $this=$(this),currentTime=_xdsoft_datetime.currentTime;if(currentTime===undefined||currentTime===null){_xdsoft_datetime.currentTime=_xdsoft_datetime.now();currentTime=_xdsoft_datetime.currentTime;}
if($this.hasClass('xdsoft_disabled')){return false;}
currentTime.setHours($this.data('hour'));currentTime.setMinutes($this.data('minute'));datetimepicker.trigger('select.xdsoft',[currentTime]);datetimepicker.data('input').val(_xdsoft_datetime.str());if(options.onSelectTime&&$.isFunction(options.onSelectTime)){options.onSelectTime.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'),xdevent);}
datetimepicker.data('changed',true);datetimepicker.trigger('xchange.xdsoft');datetimepicker.trigger('changedatetime.xdsoft');if(options.inline!==true&&options.closeOnTimeSelect===true){datetimepicker.trigger('close.xdsoft');}});datepicker.on('mousewheel.xdsoft',function(event){if(!options.scrollMonth){return true;}
if(event.deltaY<0){_xdsoft_datetime.nextMonth();}else{_xdsoft_datetime.prevMonth();}
return false;});input.on('mousewheel.xdsoft',function(event){if(!options.scrollInput){return true;}
if(!options.datepicker&&options.timepicker){current_time_index=timebox.find('.xdsoft_current').length?timebox.find('.xdsoft_current').eq(0).index():0;if(current_time_index+event.deltaY>=0&&current_time_index+event.deltaY<timebox.children().length){current_time_index+=event.deltaY;}
if(timebox.children().eq(current_time_index).length){timebox.children().eq(current_time_index).trigger('mousedown');}
return false;}
if(options.datepicker&&!options.timepicker){datepicker.trigger(event,[event.deltaY,event.deltaX,event.deltaY]);if(input.val){input.val(_xdsoft_datetime.str());}
datetimepicker.trigger('changedatetime.xdsoft');return false;}});datetimepicker.on('changedatetime.xdsoft',function(event){if(options.onChangeDateTime&&$.isFunction(options.onChangeDateTime)){var $input=datetimepicker.data('input');options.onChangeDateTime.call(datetimepicker,_xdsoft_datetime.currentTime,$input,event);delete options.value;$input.trigger('change');}}).on('generate.xdsoft',function(){if(options.onGenerate&&$.isFunction(options.onGenerate)){options.onGenerate.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'));}
if(triggerAfterOpen){datetimepicker.trigger('afterOpen.xdsoft');triggerAfterOpen=false;}}).on('click.xdsoft',function(xdevent){xdevent.stopPropagation();});current_time_index=0;forEachAncestorOf=function(node,callback){do{node=node.parentNode;if(callback(node)===false){break;}}while(node.nodeName!=='HTML');};setPos=function(){var dateInputOffset,dateInputElem,verticalPosition,left,position,datetimepickerElem,dateInputHasFixedAncestor,$dateInput,windowWidth,verticalAnchorEdge,datetimepickerCss,windowHeight,windowScrollTop;$dateInput=datetimepicker.data('input');dateInputOffset=$dateInput.offset();dateInputElem=$dateInput[0];verticalAnchorEdge='top';verticalPosition=(dateInputOffset.top+dateInputElem.offsetHeight)-1;left=dateInputOffset.left;position="absolute";windowWidth=$(window).width();windowHeight=$(window).height();windowScrollTop=$(window).scrollTop();if((document.documentElement.clientWidth-dateInputOffset.left)<datepicker.parent().outerWidth(true)){var diff=datepicker.parent().outerWidth(true)-dateInputElem.offsetWidth;left=left-diff;}
if($dateInput.parent().css('direction')==='rtl'){left-=(datetimepicker.outerWidth()-$dateInput.outerWidth());}
if(options.fixed){verticalPosition-=windowScrollTop;left-=$(window).scrollLeft();position="fixed";}else{dateInputHasFixedAncestor=false;forEachAncestorOf(dateInputElem,function(ancestorNode){if(window.getComputedStyle(ancestorNode).getPropertyValue('position')==='fixed'){dateInputHasFixedAncestor=true;return false;}});if(dateInputHasFixedAncestor){position='fixed';if(verticalPosition+datetimepicker.outerHeight()>windowHeight+windowScrollTop){verticalAnchorEdge='bottom';verticalPosition=(windowHeight+windowScrollTop)-dateInputOffset.top;}else{verticalPosition-=windowScrollTop;}}else{if(verticalPosition+dateInputElem.offsetHeight>windowHeight+windowScrollTop){verticalPosition=dateInputOffset.top-dateInputElem.offsetHeight+1;}}
if(verticalPosition<0){verticalPosition=0;}
if(left+dateInputElem.offsetWidth>windowWidth){left=windowWidth-dateInputElem.offsetWidth;}}
datetimepickerElem=datetimepicker[0];forEachAncestorOf(datetimepickerElem,function(ancestorNode){var ancestorNodePosition;ancestorNodePosition=window.getComputedStyle(ancestorNode).getPropertyValue('position');if(ancestorNodePosition==='relative'&&windowWidth>=ancestorNode.offsetWidth){left=left-((windowWidth-ancestorNode.offsetWidth)/2);return false;}});datetimepickerCss={position:position,left:left,top:'',bottom:''};datetimepickerCss[verticalAnchorEdge]=verticalPosition;datetimepicker.css(datetimepickerCss);};datetimepicker.on('open.xdsoft',function(event){var onShow=true;if(options.onShow&&$.isFunction(options.onShow)){onShow=options.onShow.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'),event);}
if(onShow!==false){datetimepicker.show();setPos();$(window).off('resize.xdsoft',setPos).on('resize.xdsoft',setPos);if(options.closeOnWithoutClick){$([document.body,window]).on('touchstart mousedown.xdsoft',function arguments_callee6(){datetimepicker.trigger('close.xdsoft');$([document.body,window]).off('touchstart mousedown.xdsoft',arguments_callee6);});}}}).on('close.xdsoft',function(event){var onClose=true;month_picker.find('.xdsoft_month,.xdsoft_year').find('.xdsoft_select').hide();if(options.onClose&&$.isFunction(options.onClose)){onClose=options.onClose.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'),event);}
if(onClose!==false&&!options.opened&&!options.inline){datetimepicker.hide();}
event.stopPropagation();}).on('toggle.xdsoft',function(){if(datetimepicker.is(':visible')){datetimepicker.trigger('close.xdsoft');}else{datetimepicker.trigger('open.xdsoft');}}).data('input',input);timer=0;datetimepicker.data('xdsoft_datetime',_xdsoft_datetime);datetimepicker.setOptions(options);function getCurrentValue(){var ct=false,time;if(options.startDate){ct=_xdsoft_datetime.strToDate(options.startDate);}else{ct=options.value||((input&&input.val&&input.val())?input.val():'');if(ct){ct=_xdsoft_datetime.strToDateTime(ct);}else if(options.defaultDate){ct=_xdsoft_datetime.strToDateTime(options.defaultDate);if(options.defaultTime){time=_xdsoft_datetime.strtotime(options.defaultTime);ct.setHours(time.getHours());ct.setMinutes(time.getMinutes());}}}
if(ct&&_xdsoft_datetime.isValidDate(ct)){datetimepicker.data('changed',true);}else{ct='';}
return ct||0;}
function setMask(options){var isValidValue=function(mask,value){var reg=mask.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,'\\$1').replace(/_/g,'{digit+}').replace(/([0-9]{1})/g,'{digit$1}').replace(/\{digit([0-9]{1})\}/g,'[0-$1_]{1}').replace(/\{digit[\+]\}/g,'[0-9_]{1}');return(new RegExp(reg)).test(value);},getCaretPos=function(input){try{if(document.selection&&document.selection.createRange){var range=document.selection.createRange();return range.getBookmark().charCodeAt(2)-2;}
if(input.setSelectionRange){return input.selectionStart;}}catch(e){return 0;}},setCaretPos=function(node,pos){node=(typeof node==="string"||node instanceof String)?document.getElementById(node):node;if(!node){return false;}
if(node.createTextRange){var textRange=node.createTextRange();textRange.collapse(true);textRange.moveEnd('character',pos);textRange.moveStart('character',pos);textRange.select();return true;}
if(node.setSelectionRange){node.setSelectionRange(pos,pos);return true;}
return false;};if(options.mask){input.off('keydown.xdsoft');}
if(options.mask===true){if(typeof moment!='undefined'){options.mask=options.format.replace(/Y{4}/g,'9999').replace(/Y{2}/g,'99').replace(/M{2}/g,'19').replace(/D{2}/g,'39').replace(/H{2}/g,'29').replace(/m{2}/g,'59').replace(/s{2}/g,'59');}else{options.mask=options.format.replace(/Y/g,'9999').replace(/F/g,'9999').replace(/m/g,'19').replace(/d/g,'39').replace(/H/g,'29').replace(/i/g,'59').replace(/s/g,'59');}}
if($.type(options.mask)==='string'){if(!isValidValue(options.mask,input.val())){input.val(options.mask.replace(/[0-9]/g,'_'));setCaretPos(input[0],0);}
input.on('keydown.xdsoft',function(event){var val=this.value,key=event.which,pos,digit;if(((key>=KEY0&&key<=KEY9)||(key>=_KEY0&&key<=_KEY9))||(key===BACKSPACE||key===DEL)){pos=getCaretPos(this);digit=(key!==BACKSPACE&&key!==DEL)?String.fromCharCode((_KEY0<=key&&key<=_KEY9)?key-KEY0:key):'_';if((key===BACKSPACE||key===DEL)&&pos){pos-=1;digit='_';}
while(/[^0-9_]/.test(options.mask.substr(pos,1))&&pos<options.mask.length&&pos>0){pos+=(key===BACKSPACE||key===DEL)?-1:1;}
val=val.substr(0,pos)+digit+val.substr(pos+1);if($.trim(val)===''){val=options.mask.replace(/[0-9]/g,'_');}else{if(pos===options.mask.length){event.preventDefault();return false;}}
pos+=(key===BACKSPACE||key===DEL)?0:1;while(/[^0-9_]/.test(options.mask.substr(pos,1))&&pos<options.mask.length&&pos>0){pos+=(key===BACKSPACE||key===DEL)?-1:1;}
if(isValidValue(options.mask,val)){this.value=val;setCaretPos(this,pos);}else if($.trim(val)===''){this.value=options.mask.replace(/[0-9]/g,'_');}else{input.trigger('error_input.xdsoft');}}else{if(([AKEY,CKEY,VKEY,ZKEY,YKEY].indexOf(key)!==-1&&ctrlDown)||[ESC,ARROWUP,ARROWDOWN,ARROWLEFT,ARROWRIGHT,F5,CTRLKEY,TAB,ENTER].indexOf(key)!==-1){return true;}}
event.preventDefault();return false;});}}
_xdsoft_datetime.setCurrentTime(getCurrentValue());input.data('xdsoft_datetimepicker',datetimepicker).on('open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart',function(){if(input.is(':disabled')||(input.data('xdsoft_datetimepicker').is(':visible')&&options.closeOnInputClick)){return;}
clearTimeout(timer);timer=setTimeout(function(){if(input.is(':disabled')){return;}
triggerAfterOpen=true;_xdsoft_datetime.setCurrentTime(getCurrentValue(),true);if(options.mask){setMask(options);}
datetimepicker.trigger('open.xdsoft');},100);}).on('keydown.xdsoft',function(event){var elementSelector,key=event.which;if([ENTER].indexOf(key)!==-1&&options.enterLikeTab){elementSelector=$("input:visible,textarea:visible,button:visible,a:visible");datetimepicker.trigger('close.xdsoft');elementSelector.eq(elementSelector.index(this)+1).focus();return false;}
if([TAB].indexOf(key)!==-1){datetimepicker.trigger('close.xdsoft');return true;}}).on('blur.xdsoft',function(){datetimepicker.trigger('close.xdsoft');});};destroyDateTimePicker=function(input){var datetimepicker=input.data('xdsoft_datetimepicker');if(datetimepicker){datetimepicker.data('xdsoft_datetime',null);datetimepicker.remove();input.data('xdsoft_datetimepicker',null).off('.xdsoft');$(window).off('resize.xdsoft');$([window,document.body]).off('mousedown.xdsoft touchstart');if(input.unmousewheel){input.unmousewheel();}}};$(document).off('keydown.xdsoftctrl keyup.xdsoftctrl').on('keydown.xdsoftctrl',function(e){if(e.keyCode===CTRLKEY){ctrlDown=true;}}).on('keyup.xdsoftctrl',function(e){if(e.keyCode===CTRLKEY){ctrlDown=false;}});this.each(function(){var datetimepicker=$(this).data('xdsoft_datetimepicker'),$input;if(datetimepicker){if($.type(opt)==='string'){switch(opt){case'show':$(this).select().focus();datetimepicker.trigger('open.xdsoft');break;case'hide':datetimepicker.trigger('close.xdsoft');break;case'toggle':datetimepicker.trigger('toggle.xdsoft');break;case'destroy':destroyDateTimePicker($(this));break;case'reset':this.value=this.defaultValue;if(!this.value||!datetimepicker.data('xdsoft_datetime').isValidDate(dateHelper.parseDate(this.value,options.format))){datetimepicker.data('changed',false);}
datetimepicker.data('xdsoft_datetime').setCurrentTime(this.value);break;case'validate':$input=datetimepicker.data('input');$input.trigger('blur.xdsoft');break;default:if(datetimepicker[opt]&&$.isFunction(datetimepicker[opt])){result=datetimepicker[opt](opt2);}}}else{datetimepicker.setOptions(opt);}
return 0;}
if($.type(opt)!=='string'){if(!options.lazyInit||options.open||options.inline){createDateTimePicker($(this));}else{lazyInit($(this));}}});return result;};$.fn.datetimepicker.defaults=default_options;function HighlightedDate(date,desc,style){"use strict";this.date=date;this.desc=desc;this.style=style;}}));(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){module.exports=factory;}else{factory(jQuery);}}(function($){var toFix=['wheel','mousewheel','DOMMouseScroll','MozMousePixelScroll'],toBind=('onwheel'in document||document.documentMode>=9)?['wheel']:['mousewheel','DomMouseScroll','MozMousePixelScroll'],slice=Array.prototype.slice,nullLowestDeltaTimeout,lowestDelta;if($.event.fixHooks){for(var i=toFix.length;i;){$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;}}
var special=$.event.special.mousewheel={version:'3.1.12',setup:function(){if(this.addEventListener){for(var i=toBind.length;i;){this.addEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=handler;}
$.data(this,'mousewheel-line-height',special.getLineHeight(this));$.data(this,'mousewheel-page-height',special.getPageHeight(this));},teardown:function(){if(this.removeEventListener){for(var i=toBind.length;i;){this.removeEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=null;}
$.removeData(this,'mousewheel-line-height');$.removeData(this,'mousewheel-page-height');},getLineHeight:function(elem){var $elem=$(elem),$parent=$elem['offsetParent'in $.fn?'offsetParent':'parent']();if(!$parent.length){$parent=$('body');}
return parseInt($parent.css('fontSize'),10)||parseInt($elem.css('fontSize'),10)||16;},getPageHeight:function(elem){return $(elem).height();},settings:{adjustOldDeltas:true,normalizeOffset:true}};$.fn.extend({mousewheel:function(fn){return fn?this.bind('mousewheel',fn):this.trigger('mousewheel');},unmousewheel:function(fn){return this.unbind('mousewheel',fn);}});function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0,offsetX=0,offsetY=0;event=$.event.fix(orgEvent);event.type='mousewheel';if('detail'in orgEvent){deltaY=orgEvent.detail*-1;}
if('wheelDelta'in orgEvent){deltaY=orgEvent.wheelDelta;}
if('wheelDeltaY'in orgEvent){deltaY=orgEvent.wheelDeltaY;}
if('wheelDeltaX'in orgEvent){deltaX=orgEvent.wheelDeltaX*-1;}
if('axis'in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS){deltaX=deltaY*-1;deltaY=0;}
delta=deltaY===0?deltaX:deltaY;if('deltaY'in orgEvent){deltaY=orgEvent.deltaY*-1;delta=deltaY;}
if('deltaX'in orgEvent){deltaX=orgEvent.deltaX;if(deltaY===0){delta=deltaX*-1;}}
if(deltaY===0&&deltaX===0){return;}
if(orgEvent.deltaMode===1){var lineHeight=$.data(this,'mousewheel-line-height');delta*=lineHeight;deltaY*=lineHeight;deltaX*=lineHeight;}else if(orgEvent.deltaMode===2){var pageHeight=$.data(this,'mousewheel-page-height');delta*=pageHeight;deltaY*=pageHeight;deltaX*=pageHeight;}
absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX));if(!lowestDelta||absDelta<lowestDelta){lowestDelta=absDelta;if(shouldAdjustOldDeltas(orgEvent,absDelta)){lowestDelta/=40;}}
if(shouldAdjustOldDeltas(orgEvent,absDelta)){delta/=40;deltaX/=40;deltaY/=40;}
delta=Math[delta>=1?'floor':'ceil'](delta/lowestDelta);deltaX=Math[deltaX>=1?'floor':'ceil'](deltaX/lowestDelta);deltaY=Math[deltaY>=1?'floor':'ceil'](deltaY/lowestDelta);if(special.settings.normalizeOffset&&this.getBoundingClientRect){var boundingRect=this.getBoundingClientRect();offsetX=event.clientX-boundingRect.left;offsetY=event.clientY-boundingRect.top;}
event.deltaX=deltaX;event.deltaY=deltaY;event.deltaFactor=lowestDelta;event.offsetX=offsetX;event.offsetY=offsetY;event.deltaMode=0;args.unshift(event,delta,deltaX,deltaY);if(nullLowestDeltaTimeout){clearTimeout(nullLowestDeltaTimeout);}
nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200);return($.event.dispatch||$.event.handle).apply(this,args);}
function nullLowestDelta(){lowestDelta=null;}
function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&orgEvent.type==='mousewheel'&&absDelta%120===0;}}));(function(factory){"use strict";if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else{factory((typeof(jQuery)!='undefined')?jQuery:window.Zepto);}}
(function($){"use strict";var feature={};feature.fileapi=$("<input type='file'/>").get(0).files!==undefined;feature.formdata=window.FormData!==undefined;var hasProp=!!$.fn.prop;$.fn.attr2=function(){if(!hasProp){return this.attr.apply(this,arguments);}
var val=this.prop.apply(this,arguments);if((val&&val.jquery)||typeof val==='string'){return val;}
return this.attr.apply(this,arguments);};$.fn.ajaxSubmit=function(options){if(!this.length){log('ajaxSubmit: skipping submit process - no element selected');return this;}
var method,action,url,$form=this;if(typeof options=='function'){options={success:options};}
else if(options===undefined){options={};}
method=options.type||this.attr2('method');action=options.url||this.attr2('action');url=(typeof action==='string')?$.trim(action):'';url=url||window.location.href||'';if(url){url=(url.match(/^([^#]+)/)||[])[1];}
options=$.extend(true,{url:url,success:$.ajaxSettings.success,type:method||$.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank'},options);var veto={};this.trigger('form-pre-serialize',[this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');return this;}
if(options.beforeSerialize&&options.beforeSerialize(this,options)===false){log('ajaxSubmit: submit aborted via beforeSerialize callback');return this;}
var traditional=options.traditional;if(traditional===undefined){traditional=$.ajaxSettings.traditional;}
var elements=[];var qx,a=this.formToArray(options.semantic,elements);if(options.data){options.extraData=options.data;qx=$.param(options.data,traditional);}
if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){log('ajaxSubmit: submit aborted via beforeSubmit callback');return this;}
this.trigger('form-submit-validate',[a,this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-submit-validate trigger');return this;}
var q=$.param(a,traditional);if(qx){q=(q?(q+'&'+qx):qx);}
if(options.type.toUpperCase()=='GET'){options.url+=(options.url.indexOf('?')>=0?'&':'?')+q;options.data=null;}
else{options.data=q;}
var callbacks=[];if(options.resetForm){callbacks.push(function(){$form.resetForm();});}
if(options.clearForm){callbacks.push(function(){$form.clearForm(options.includeHidden);});}
if(!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){var fn=options.replaceTarget?'replaceWith':'html';$(options.target)[fn](data).each(oldSuccess,arguments);});}
else if(options.success){callbacks.push(options.success);}
options.success=function(data,status,xhr){var context=options.context||this;for(var i=0,max=callbacks.length;i<max;i++){callbacks[i].apply(context,[data,status,xhr||$form,$form]);}};if(options.error){var oldError=options.error;options.error=function(xhr,status,error){var context=options.context||this;oldError.apply(context,[xhr,status,error,$form]);};}
if(options.complete){var oldComplete=options.complete;options.complete=function(xhr,status){var context=options.context||this;oldComplete.apply(context,[xhr,status,$form]);};}
var fileInputs=$('input[type=file]:enabled',this).filter(function(){return $(this).val()!=='';});var hasFileInputs=fileInputs.length>0;var mp='multipart/form-data';var multipart=($form.attr('enctype')==mp||$form.attr('encoding')==mp);var fileAPI=feature.fileapi&&feature.formdata;log("fileAPI :"+fileAPI);var shouldUseFrame=(hasFileInputs||multipart)&&!fileAPI;var jqxhr;if(options.iframe!==false&&(options.iframe||shouldUseFrame)){if(options.closeKeepAlive){$.get(options.closeKeepAlive,function(){jqxhr=fileUploadIframe(a);});}
else{jqxhr=fileUploadIframe(a);}}
else if((hasFileInputs||multipart)&&fileAPI){jqxhr=fileUploadXhr(a);}
else{jqxhr=$.ajax(options);}
$form.removeData('jqxhr').data('jqxhr',jqxhr);for(var k=0;k<elements.length;k++){elements[k]=null;}
this.trigger('form-submit-notify',[this,options]);return this;function deepSerialize(extraData){var serialized=$.param(extraData,options.traditional).split('&');var len=serialized.length;var result=[];var i,part;for(i=0;i<len;i++){serialized[i]=serialized[i].replace(/\+/g,' ');part=serialized[i].split('=');result.push([decodeURIComponent(part[0]),decodeURIComponent(part[1])]);}
return result;}
function fileUploadXhr(a){var formdata=new FormData();for(var i=0;i<a.length;i++){formdata.append(a[i].name,a[i].value);}
if(options.extraData){var serializedData=deepSerialize(options.extraData);for(i=0;i<serializedData.length;i++){if(serializedData[i]){formdata.append(serializedData[i][0],serializedData[i][1]);}}}
options.data=null;var s=$.extend(true,{},$.ajaxSettings,options,{contentType:false,processData:false,cache:false,type:method||'POST'});if(options.uploadProgress){s.xhr=function(){var xhr=$.ajaxSettings.xhr();if(xhr.upload){xhr.upload.addEventListener('progress',function(event){var percent=0;var position=event.loaded||event.position;var total=event.total;if(event.lengthComputable){percent=Math.ceil(position/total*100);}
options.uploadProgress(event,position,total,percent);},false);}
return xhr;};}
s.data=null;var beforeSend=s.beforeSend;s.beforeSend=function(xhr,o){if(options.formData){o.data=options.formData;}
else{o.data=formdata;}
if(beforeSend){beforeSend.call(this,xhr,o);}};return $.ajax(s);}
function fileUploadIframe(a){var form=$form[0],el,i,s,g,id,$io,io,xhr,sub,n,timedOut,timeoutHandle;var deferred=$.Deferred();deferred.abort=function(status){xhr.abort(status);};if(a){for(i=0;i<elements.length;i++){el=$(elements[i]);if(hasProp){el.prop('disabled',false);}
else{el.removeAttr('disabled');}}}
s=$.extend(true,{},$.ajaxSettings,options);s.context=s.context||s;id='jqFormIO'+(new Date().getTime());if(s.iframeTarget){$io=$(s.iframeTarget);n=$io.attr2('name');if(!n){$io.attr2('name',id);}
else{id=n;}}
else{$io=$('<iframe name="'+id+'" src="'+s.iframeSrc+'" />');$io.css({position:'absolute',top:'-1000px',left:'-1000px'});}
io=$io[0];xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:'n/a',getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(status){var e=(status==='timeout'?'timeout':'aborted');log('aborting upload... '+e);this.aborted=1;try{if(io.contentWindow.document.execCommand){io.contentWindow.document.execCommand('Stop');}}
catch(ignore){}
$io.attr('src',s.iframeSrc);xhr.error=e;if(s.error){s.error.call(s.context,xhr,e,status);}
if(g){$.event.trigger("ajaxError",[xhr,s,e]);}
if(s.complete){s.complete.call(s.context,xhr,e);}}};g=s.global;if(g&&0===$.active++){$.event.trigger("ajaxStart");}
if(g){$.event.trigger("ajaxSend",[xhr,s]);}
if(s.beforeSend&&s.beforeSend.call(s.context,xhr,s)===false){if(s.global){$.active--;}
deferred.reject();return deferred;}
if(xhr.aborted){deferred.reject();return deferred;}
sub=form.clk;if(sub){n=sub.name;if(n&&!sub.disabled){s.extraData=s.extraData||{};s.extraData[n]=sub.value;if(sub.type=="image"){s.extraData[n+'.x']=form.clk_x;s.extraData[n+'.y']=form.clk_y;}}}
var CLIENT_TIMEOUT_ABORT=1;var SERVER_ABORT=2;function getDoc(frame){var doc=null;try{if(frame.contentWindow){doc=frame.contentWindow.document;}}catch(err){log('cannot get iframe.contentWindow document: '+err);}
if(doc){return doc;}
try{doc=frame.contentDocument?frame.contentDocument:frame.document;}catch(err){log('cannot get iframe.contentDocument: '+err);doc=frame.document;}
return doc;}
var csrf_token=$('meta[name=csrf-token]').attr('content');var csrf_param=$('meta[name=csrf-param]').attr('content');if(csrf_param&&csrf_token){s.extraData=s.extraData||{};s.extraData[csrf_param]=csrf_token;}
function doSubmit(){var t=$form.attr2('target'),a=$form.attr2('action'),mp='multipart/form-data',et=$form.attr('enctype')||$form.attr('encoding')||mp;form.setAttribute('target',id);if(!method||/post/i.test(method)){form.setAttribute('method','POST');}
if(a!=s.url){form.setAttribute('action',s.url);}
if(!s.skipEncodingOverride&&(!method||/post/i.test(method))){$form.attr({encoding:'multipart/form-data',enctype:'multipart/form-data'});}
if(s.timeout){timeoutHandle=setTimeout(function(){timedOut=true;cb(CLIENT_TIMEOUT_ABORT);},s.timeout);}
function checkState(){try{var state=getDoc(io).readyState;log('state = '+state);if(state&&state.toLowerCase()=='uninitialized'){setTimeout(checkState,50);}}
catch(e){log('Server abort: ',e,' (',e.name,')');cb(SERVER_ABORT);if(timeoutHandle){clearTimeout(timeoutHandle);}
timeoutHandle=undefined;}}
var extraInputs=[];try{if(s.extraData){for(var n in s.extraData){if(s.extraData.hasOwnProperty(n)){if($.isPlainObject(s.extraData[n])&&s.extraData[n].hasOwnProperty('name')&&s.extraData[n].hasOwnProperty('value')){extraInputs.push($('<input type="hidden" name="'+s.extraData[n].name+'">').val(s.extraData[n].value).appendTo(form)[0]);}else{extraInputs.push($('<input type="hidden" name="'+n+'">').val(s.extraData[n]).appendTo(form)[0]);}}}}
if(!s.iframeTarget){$io.appendTo('body');}
if(io.attachEvent){io.attachEvent('onload',cb);}
else{io.addEventListener('load',cb,false);}
setTimeout(checkState,15);try{form.submit();}catch(err){var submitFn=document.createElement('form').submit;submitFn.apply(form);}}
finally{form.setAttribute('action',a);form.setAttribute('enctype',et);if(t){form.setAttribute('target',t);}else{$form.removeAttr('target');}
$(extraInputs).remove();}}
if(s.forceSync){doSubmit();}
else{setTimeout(doSubmit,10);}
var data,doc,domCheckCount=50,callbackProcessed;function cb(e){if(xhr.aborted||callbackProcessed){return;}
doc=getDoc(io);if(!doc){log('cannot access response document');e=SERVER_ABORT;}
if(e===CLIENT_TIMEOUT_ABORT&&xhr){xhr.abort('timeout');deferred.reject(xhr,'timeout');return;}
else if(e==SERVER_ABORT&&xhr){xhr.abort('server abort');deferred.reject(xhr,'error','server abort');return;}
if(!doc||doc.location.href==s.iframeSrc){if(!timedOut){return;}}
if(io.detachEvent){io.detachEvent('onload',cb);}
else{io.removeEventListener('load',cb,false);}
var status='success',errMsg;try{if(timedOut){throw'timeout';}
var isXml=s.dataType=='xml'||doc.XMLDocument||$.isXMLDoc(doc);log('isXml='+isXml);if(!isXml&&window.opera&&(doc.body===null||!doc.body.innerHTML)){if(--domCheckCount){log('requeing onLoad callback, DOM not available');setTimeout(cb,250);return;}}
var docRoot=doc.body?doc.body:doc.documentElement;xhr.responseText=docRoot?docRoot.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;if(isXml){s.dataType='xml';}
xhr.getResponseHeader=function(header){var headers={'content-type':s.dataType};return headers[header.toLowerCase()];};if(docRoot){xhr.status=Number(docRoot.getAttribute('status'))||xhr.status;xhr.statusText=docRoot.getAttribute('statusText')||xhr.statusText;}
var dt=(s.dataType||'').toLowerCase();var scr=/(json|script|text)/.test(dt);if(scr||s.textarea){var ta=doc.getElementsByTagName('textarea')[0];if(ta){xhr.responseText=ta.value;xhr.status=Number(ta.getAttribute('status'))||xhr.status;xhr.statusText=ta.getAttribute('statusText')||xhr.statusText;}
else if(scr){var pre=doc.getElementsByTagName('pre')[0];var b=doc.getElementsByTagName('body')[0];if(pre){xhr.responseText=pre.textContent?pre.textContent:pre.innerText;}
else if(b){xhr.responseText=b.textContent?b.textContent:b.innerText;}}}
else if(dt=='xml'&&!xhr.responseXML&&xhr.responseText){xhr.responseXML=toXml(xhr.responseText);}
try{data=httpData(xhr,dt,s);}
catch(err){status='parsererror';xhr.error=errMsg=(err||status);}}
catch(err){log('error caught: ',err);status='error';xhr.error=errMsg=(err||status);}
if(xhr.aborted){log('upload aborted');status=null;}
if(xhr.status){status=(xhr.status>=200&&xhr.status<300||xhr.status===304)?'success':'error';}
if(status==='success'){if(s.success){s.success.call(s.context,data,'success',xhr);}
deferred.resolve(xhr.responseText,'success',xhr);if(g){$.event.trigger("ajaxSuccess",[xhr,s]);}}
else if(status){if(errMsg===undefined){errMsg=xhr.statusText;}
if(s.error){s.error.call(s.context,xhr,status,errMsg);}
deferred.reject(xhr,'error',errMsg);if(g){$.event.trigger("ajaxError",[xhr,s,errMsg]);}}
if(g){$.event.trigger("ajaxComplete",[xhr,s]);}
if(g&&!--$.active){$.event.trigger("ajaxStop");}
if(s.complete){s.complete.call(s.context,xhr,status);}
callbackProcessed=true;if(s.timeout){clearTimeout(timeoutHandle);}
setTimeout(function(){if(!s.iframeTarget){$io.remove();}
else{$io.attr('src',s.iframeSrc);}
xhr.responseXML=null;},100);}
var toXml=$.parseXML||function(s,doc){if(window.ActiveXObject){doc=new ActiveXObject('Microsoft.XMLDOM');doc.async='false';doc.loadXML(s);}
else{doc=(new DOMParser()).parseFromString(s,'text/xml');}
return(doc&&doc.documentElement&&doc.documentElement.nodeName!='parsererror')?doc:null;};var parseJSON=$.parseJSON||function(s){return window['eval']('('+s+')');};var httpData=function(xhr,type,s){var ct=xhr.getResponseHeader('content-type')||'',xml=type==='xml'||!type&&ct.indexOf('xml')>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.nodeName==='parsererror'){if($.error){$.error('parsererror');}}
if(s&&s.dataFilter){data=s.dataFilter(data,type);}
if(typeof data==='string'){if(type==='json'||!type&&ct.indexOf('json')>=0){data=parseJSON(data);}else if(type==="script"||!type&&ct.indexOf("javascript")>=0){$.globalEval(data);}}
return data;};return deferred;}};$.fn.ajaxForm=function(options){options=options||{};options.delegation=options.delegation&&$.isFunction($.fn.on);if(!options.delegation&&this.length===0){var o={s:this.selector,c:this.context};if(!$.isReady&&o.s){log('DOM not ready, queuing ajaxForm');$(function(){$(o.s,o.c).ajaxForm(options);});return this;}
log('terminating; zero elements found by selector'+($.isReady?'':' (DOM not ready)'));return this;}
if(options.delegation){$(document).off('submit.form-plugin',this.selector,doAjaxSubmit).off('click.form-plugin',this.selector,captureSubmittingElement).on('submit.form-plugin',this.selector,options,doAjaxSubmit).on('click.form-plugin',this.selector,options,captureSubmittingElement);return this;}
return this.ajaxFormUnbind().bind('submit.form-plugin',options,doAjaxSubmit).bind('click.form-plugin',options,captureSubmittingElement);};function doAjaxSubmit(e){var options=e.data;if(!e.isDefaultPrevented()){e.preventDefault();$(e.target).ajaxSubmit(options);}}
function captureSubmittingElement(e){var target=e.target;var $el=$(target);if(!($el.is("[type=submit],[type=image]"))){var t=$el.closest('[type=submit]');if(t.length===0){return;}
target=t[0];}
var form=this;form.clk=target;if(target.type=='image'){if(e.offsetX!==undefined){form.clk_x=e.offsetX;form.clk_y=e.offsetY;}else if(typeof $.fn.offset=='function'){var offset=$el.offset();form.clk_x=e.pageX-offset.left;form.clk_y=e.pageY-offset.top;}else{form.clk_x=e.pageX-target.offsetLeft;form.clk_y=e.pageY-target.offsetTop;}}
setTimeout(function(){form.clk=form.clk_x=form.clk_y=null;},100);}
$.fn.ajaxFormUnbind=function(){return this.unbind('submit.form-plugin click.form-plugin');};$.fn.formToArray=function(semantic,elements){var a=[];if(this.length===0){return a;}
var form=this[0];var formId=this.attr('id');var els=semantic?form.getElementsByTagName('*'):form.elements;var els2;if(els&&!/MSIE [678]/.test(navigator.userAgent)){els=$(els).get();}
if(formId){els2=$(':input[form="'+formId+'"]').get();if(els2.length){els=(els||[]).concat(els2);}}
if(!els||!els.length){return a;}
var i,j,n,v,el,max,jmax;for(i=0,max=els.length;i<max;i++){el=els[i];n=el.name;if(!n||el.disabled){continue;}
if(semantic&&form.clk&&el.type=="image"){if(form.clk==el){a.push({name:n,value:$(el).val(),type:el.type});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}
continue;}
v=$.fieldValue(el,true);if(v&&v.constructor==Array){if(elements){elements.push(el);}
for(j=0,jmax=v.length;j<jmax;j++){a.push({name:n,value:v[j]});}}
else if(feature.fileapi&&el.type=='file'){if(elements){elements.push(el);}
var files=el.files;if(files.length){for(j=0;j<files.length;j++){a.push({name:n,value:files[j],type:el.type});}}
else{a.push({name:n,value:'',type:el.type});}}
else if(v!==null&&typeof v!='undefined'){if(elements){elements.push(el);}
a.push({name:n,value:v,type:el.type,required:el.required});}}
if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0];n=input.name;if(n&&!input.disabled&&input.type=='image'){a.push({name:n,value:$input.val()});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}}
return a;};$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic));};$.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n){return;}
var v=$.fieldValue(this,successful);if(v&&v.constructor==Array){for(var i=0,max=v.length;i<max;i++){a.push({name:n,value:v[i]});}}
else if(v!==null&&typeof v!='undefined'){a.push({name:this.name,value:v});}});return $.param(a);};$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=$.fieldValue(el,successful);if(v===null||typeof v=='undefined'||(v.constructor==Array&&!v.length)){continue;}
if(v.constructor==Array){$.merge(val,v);}
else{val.push(v);}}
return val;};$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(successful===undefined){successful=true;}
if(successful&&(!n||el.disabled||t=='reset'||t=='button'||(t=='checkbox'||t=='radio')&&!el.checked||(t=='submit'||t=='image')&&el.form&&el.form.clk!=el||tag=='select'&&el.selectedIndex==-1)){return null;}
if(tag=='select'){var index=el.selectedIndex;if(index<0){return null;}
var a=[],ops=el.options;var one=(t=='select-one');var max=(one?index+1:ops.length);for(var i=(one?index:0);i<max;i++){var op=ops[i];if(op.selected){var v=op.value;if(!v){v=(op.attributes&&op.attributes.value&&!(op.attributes.value.specified))?op.text:op.value;}
if(one){return v;}
a.push(v);}}
return a;}
return $(el).val();};$.fn.clearForm=function(includeHidden){return this.each(function(){$('input,select,textarea',this).clearFields(includeHidden);});};$.fn.clearFields=$.fn.clearInputs=function(includeHidden){var re=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(re.test(t)||tag=='textarea'){this.value='';}
else if(t=='checkbox'||t=='radio'){this.checked=false;}
else if(tag=='select'){this.selectedIndex=-1;}
else if(t=="file"){if(/MSIE/.test(navigator.userAgent)){$(this).replaceWith($(this).clone(true));}else{$(this).val('');}}
else if(includeHidden){if((includeHidden===true&&/hidden/.test(t))||(typeof includeHidden=='string'&&$(this).is(includeHidden))){this.value='';}}});};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=='function'||(typeof this.reset=='object'&&!this.reset.nodeType)){this.reset();}});};$.fn.enable=function(b){if(b===undefined){b=true;}
return this.each(function(){this.disabled=!b;});};$.fn.selected=function(select){if(select===undefined){select=true;}
return this.each(function(){var t=this.type;if(t=='checkbox'||t=='radio'){this.checked=select;}
else if(this.tagName.toLowerCase()=='option'){var $sel=$(this).parent('select');if(select&&$sel[0]&&$sel[0].type=='select-one'){$sel.find('option').selected(false);}
this.selected=select;}});};$.fn.ajaxSubmit.debug=false;function log(){if(!$.fn.ajaxSubmit.debug){return;}
var msg='[jquery.form] '+Array.prototype.join.call(arguments,'');if(window.console&&window.console.log){window.console.log(msg);}
else if(window.opera&&window.opera.postError){window.opera.postError(msg);}}}));(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else{factory(jQuery);}}(function($){"use strict";var k={},max=Math.max,min=Math.min;k.c={};k.c.d=$(document);k.c.t=function(e){return e.originalEvent.touches.length-1;};k.o=function(){var s=this;this.o=null;this.$=null;this.i=null;this.g=null;this.v=null;this.cv=null;this.x=0;this.y=0;this.w=0;this.h=0;this.$c=null;this.c=null;this.t=0;this.isInit=false;this.fgColor=null;this.pColor=null;this.dH=null;this.cH=null;this.eH=null;this.rH=null;this.scale=1;this.relative=false;this.relativeWidth=false;this.relativeHeight=false;this.$div=null;this.run=function(){var cf=function(e,conf){var k;for(k in conf){s.o[k]=conf[k];}
s._carve().init();s._configure()._draw();};if(this.$.data('kontroled'))return;this.$.data('kontroled',true);this.extend();this.o=$.extend({min:this.$.data('min')!==undefined?this.$.data('min'):0,max:this.$.data('max')!==undefined?this.$.data('max'):100,stopper:true,readOnly:this.$.data('readonly')||(this.$.attr('readonly')==='readonly'),cursor:this.$.data('cursor')===true&&30||this.$.data('cursor')||0,thickness:this.$.data('thickness')&&Math.max(Math.min(this.$.data('thickness'),1),0.01)||0.35,lineCap:this.$.data('linecap')||'butt',width:this.$.data('width')||200,height:this.$.data('height')||200,displayInput:this.$.data('displayinput')==null||this.$.data('displayinput'),displayPrevious:this.$.data('displayprevious'),fgColor:this.$.data('fgcolor')||'#87CEEB',inputColor:this.$.data('inputcolor'),font:this.$.data('font')||'Arial',fontWeight:this.$.data('font-weight')||'bold',inline:false,step:this.$.data('step')||1,rotation:this.$.data('rotation'),draw:null,change:null,cancel:null,release:null,format:function(v){return v;},parse:function(v){return parseFloat(v);}},this.o);this.o.flip=this.o.rotation==='anticlockwise'||this.o.rotation==='acw';if(!this.o.inputColor){this.o.inputColor=this.o.fgColor;}
if(this.$.is('fieldset')){this.v={};this.i=this.$.find('input');this.i.each(function(k){var $this=$(this);s.i[k]=$this;s.v[k]=s.o.parse($this.val());$this.bind('change blur',function(){var val={};val[k]=$this.val();s.val(val);});});this.$.find('legend').remove();}else{this.i=this.$;this.v=this.o.parse(this.$.val());this.v===''&&(this.v=this.o.min);this.$.bind('change blur',function(){s.val(s._validate(s.o.parse(s.$.val())));});}
!this.o.displayInput&&this.$.hide();this.$c=$(document.createElement('canvas')).attr({width:this.o.width,height:this.o.height});this.$div=$('<div style="'
+(this.o.inline?'display:inline;':'')
+'width:'+this.o.width+'px;height:'+this.o.height+'px;'
+'"></div>');this.$.wrap(this.$div).before(this.$c);this.$div=this.$.parent();if(typeof G_vmlCanvasManager!=='undefined'){G_vmlCanvasManager.initElement(this.$c[0]);}
this.c=this.$c[0].getContext?this.$c[0].getContext('2d'):null;if(!this.c){throw{name:"CanvasNotSupportedException",message:"Canvas not supported. Please use excanvas on IE8.0.",toString:function(){return this.name+": "+this.message}}}
this.scale=(window.devicePixelRatio||1)/(this.c.webkitBackingStorePixelRatio||this.c.mozBackingStorePixelRatio||this.c.msBackingStorePixelRatio||this.c.oBackingStorePixelRatio||this.c.backingStorePixelRatio||1);this.relativeWidth=this.o.width%1!==0&&this.o.width.indexOf('%');this.relativeHeight=this.o.height%1!==0&&this.o.height.indexOf('%');this.relative=this.relativeWidth||this.relativeHeight;this._carve();if(this.v instanceof Object){this.cv={};this.copy(this.v,this.cv);}else{this.cv=this.v;}
this.$.bind("configure",cf).parent().bind("configure",cf);this._listen()._configure()._xy().init();this.isInit=true;this.$.val(this.o.format(this.v));this._draw();return this;};this._carve=function(){if(this.relative){var w=this.relativeWidth?this.$div.parent().width()*parseInt(this.o.width)/100:this.$div.parent().width(),h=this.relativeHeight?this.$div.parent().height()*parseInt(this.o.height)/100:this.$div.parent().height();this.w=this.h=Math.min(w,h);}else{this.w=this.o.width;this.h=this.o.height;}
this.$div.css({'width':this.w+'px','height':this.h+'px'});this.$c.attr({width:this.w,height:this.h});if(this.scale!==1){this.$c[0].width=this.$c[0].width*this.scale;this.$c[0].height=this.$c[0].height*this.scale;this.$c.width(this.w);this.$c.height(this.h);}
return this;}
this._draw=function(){var d=true;s.g=s.c;s.clear();s.dH&&(d=s.dH());d!==false&&s.draw();};this._touch=function(e){var touchMove=function(e){var v=s.xy2val(e.originalEvent.touches[s.t].pageX,e.originalEvent.touches[s.t].pageY);if(v==s.cv)return;if(s.cH&&s.cH(v)===false)return;s.change(s._validate(v));s._draw();};this.t=k.c.t(e);touchMove(e);k.c.d.bind("touchmove.k",touchMove).bind("touchend.k",function(){k.c.d.unbind('touchmove.k touchend.k');s.val(s.cv);});return this;};this._mouse=function(e){var mouseMove=function(e){var v=s.xy2val(e.pageX,e.pageY);if(v==s.cv)return;if(s.cH&&(s.cH(v)===false))return;s.change(s._validate(v));s._draw();};mouseMove(e);k.c.d.bind("mousemove.k",mouseMove).bind("keyup.k",function(e){if(e.keyCode===27){k.c.d.unbind("mouseup.k mousemove.k keyup.k");if(s.eH&&s.eH()===false)
return;s.cancel();}}).bind("mouseup.k",function(e){k.c.d.unbind('mousemove.k mouseup.k keyup.k');s.val(s.cv);});return this;};this._xy=function(){var o=this.$c.offset();this.x=o.left;this.y=o.top;return this;};this._listen=function(){if(!this.o.readOnly){this.$c.bind("mousedown",function(e){e.preventDefault();s._xy()._mouse(e);}).bind("touchstart",function(e){e.preventDefault();s._xy()._touch(e);});this.listen();}else{this.$.attr('readonly','readonly');}
if(this.relative){$(window).resize(function(){s._carve().init();s._draw();});}
return this;};this._configure=function(){if(this.o.draw)this.dH=this.o.draw;if(this.o.change)this.cH=this.o.change;if(this.o.cancel)this.eH=this.o.cancel;if(this.o.release)this.rH=this.o.release;if(this.o.displayPrevious){this.pColor=this.h2rgba(this.o.fgColor,"0.4");this.fgColor=this.h2rgba(this.o.fgColor,"0.6");}else{this.fgColor=this.o.fgColor;}
return this;};this._clear=function(){this.$c[0].width=this.$c[0].width;};this._validate=function(v){return(~~(((v<0)?-0.5:0.5)+(v/this.o.step)))*this.o.step;};this.listen=function(){};this.extend=function(){};this.init=function(){};this.change=function(v){};this.val=function(v){};this.xy2val=function(x,y){};this.draw=function(){};this.clear=function(){this._clear();};this.h2rgba=function(h,a){var rgb;h=h.substring(1,7)
rgb=[parseInt(h.substring(0,2),16),parseInt(h.substring(2,4),16),parseInt(h.substring(4,6),16)];return"rgba("+rgb[0]+","+rgb[1]+","+rgb[2]+","+a+")";};this.copy=function(f,t){for(var i in f){t[i]=f[i];}};};k.Dial=function(){k.o.call(this);this.startAngle=null;this.xy=null;this.radius=null;this.lineWidth=null;this.cursorExt=null;this.w2=null;this.PI2=2*Math.PI;this.extend=function(){this.o=$.extend({bgColor:this.$.data('bgcolor')||'#EEEEEE',angleOffset:this.$.data('angleoffset')||0,angleArc:this.$.data('anglearc')||360,inline:true},this.o);};this.val=function(v,triggerRelease){if(null!=v){v=this.o.parse(v);if(triggerRelease!==false&&v!=this.v&&this.rH&&this.rH(v)===false){return;}
this.cv=this.o.stopper?max(min(v,this.o.max),this.o.min):v;this.v=this.cv;this.$.val(this.o.format(this.v));this._draw();}else{return this.v;}};this.xy2val=function(x,y){var a,ret;a=Math.atan2(x-(this.x+this.w2),-(y-this.y-this.w2))-this.angleOffset;if(this.o.flip){a=this.angleArc-a-this.PI2;}
if(this.angleArc!=this.PI2&&(a<0)&&(a>-0.5)){a=0;}else if(a<0){a+=this.PI2;}
ret=~~(0.5+(a*(this.o.max-this.o.min)/this.angleArc))+this.o.min;this.o.stopper&&(ret=max(min(ret,this.o.max),this.o.min));return ret;};this.listen=function(){var s=this,mwTimerStop,mwTimerRelease,mw=function(e){e.preventDefault();var ori=e.originalEvent,deltaX=ori.detail||ori.wheelDeltaX,deltaY=ori.detail||ori.wheelDeltaY,v=s._validate(s.o.parse(s.$.val()))
+(deltaX>0||deltaY>0?s.o.step:deltaX<0||deltaY<0?-s.o.step:0);v=max(min(v,s.o.max),s.o.min);s.val(v,false);if(s.rH){clearTimeout(mwTimerStop);mwTimerStop=setTimeout(function(){s.rH(v);mwTimerStop=null;},100);if(!mwTimerRelease){mwTimerRelease=setTimeout(function(){if(mwTimerStop)
s.rH(v);mwTimerRelease=null;},200);}}},kval,to,m=1,kv={37:-s.o.step,38:s.o.step,39:s.o.step,40:-s.o.step};this.$.bind("keydown",function(e){var kc=e.keyCode;if(kc>=96&&kc<=105){kc=e.keyCode=kc-48;}
kval=parseInt(String.fromCharCode(kc));if(isNaN(kval)){(kc!==13)&&kc!==8&&kc!==9&&kc!==189&&(kc!==190||s.$.val().match(/\./))&&e.preventDefault();if($.inArray(kc,[37,38,39,40])>-1){e.preventDefault();var v=s.o.parse(s.$.val())+kv[kc]*m;s.o.stopper&&(v=max(min(v,s.o.max),s.o.min));s.change(v);s._draw();to=window.setTimeout(function(){m*=2;},30);}}}).bind("keyup",function(e){if(isNaN(kval)){if(to){window.clearTimeout(to);to=null;m=1;s.val(s.$.val());}}else{(s.$.val()>s.o.max&&s.$.val(s.o.max))||(s.$.val()<s.o.min&&s.$.val(s.o.min));}});this.$c.bind("mousewheel DOMMouseScroll",mw);this.$.bind("mousewheel DOMMouseScroll",mw)};this.init=function(){if(this.v<this.o.min||this.v>this.o.max){this.v=this.o.min;}
this.$.val(this.v);this.w2=this.w/2;this.cursorExt=this.o.cursor/100;this.xy=this.w2*this.scale;this.lineWidth=this.xy*this.o.thickness;this.lineCap=this.o.lineCap;this.radius=this.xy-this.lineWidth/2;this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset);this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc);this.angleOffset=this.o.angleOffset*Math.PI/180;this.angleArc=this.o.angleArc*Math.PI/180;this.startAngle=1.5*Math.PI+this.angleOffset;this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var s=max(String(Math.abs(this.o.max)).length,String(Math.abs(this.o.min)).length,2)+2;this.o.displayInput&&this.i.css({'width':((this.w/2+4)>>0)+'px','height':((this.w/3)>>0)+'px','position':'absolute','vertical-align':'middle','margin-top':((this.w/3)>>0)+'px','margin-left':'-'+((this.w*3/4+2)>>0)+'px','border':0,'background':'none','font':this.o.fontWeight+' '+((this.w/s)>>0)+'px '+this.o.font,'text-align':'center','color':this.o.inputColor||this.o.fgColor,'padding':'0px','-webkit-appearance':'none'})||this.i.css({'width':'0px','visibility':'hidden'});};this.change=function(v){this.cv=v;this.$.val(this.o.format(v));};this.angle=function(v){return(v-this.o.min)*this.angleArc/(this.o.max-this.o.min);};this.arc=function(v){var sa,ea;v=this.angle(v);if(this.o.flip){sa=this.endAngle+0.00001;ea=sa-v-0.00001;}else{sa=this.startAngle-0.00001;ea=sa+v+0.00001;}
this.o.cursor&&(sa=ea-this.cursorExt)&&(ea=ea+this.cursorExt);return{s:sa,e:ea,d:this.o.flip&&!this.o.cursor};};this.draw=function(){var c=this.g,a=this.arc(this.cv),pa,r=1;c.lineWidth=this.lineWidth;c.lineCap=this.lineCap;if(this.o.bgColor!=="none"){c.beginPath();c.strokeStyle=this.o.bgColor;c.arc(this.xy,this.xy,this.radius,this.endAngle-0.00001,this.startAngle+0.00001,true);c.stroke();}
if(this.o.displayPrevious){pa=this.arc(this.v);c.beginPath();c.strokeStyle=this.pColor;c.arc(this.xy,this.xy,this.radius,pa.s,pa.e,pa.d);c.stroke();r=this.cv==this.v;}
c.beginPath();c.strokeStyle=r?this.o.fgColor:this.fgColor;c.arc(this.xy,this.xy,this.radius,a.s,a.e,a.d);c.stroke();};this.cancel=function(){this.val(this.v);};};$.fn.dial=$.fn.knob=function(o){return this.each(function(){var d=new k.Dial();d.o=o;d.$=$(this);d.run();}).parent();};}));(function($){$.loadmodal=function(options){if($.type(options)=='string'){options={url:options,};}
options=$.extend(true,{url:null,id:'jquery-loadmodal-js',idBody:'jquery-loadmodal-js-body',prependToSelector:null,appendToSelector:null,title:window.document.title||'Dialog',width:'400px',dlgClass:'fade',size:'modal-lg',closeButton:true,buttons:{},modal:{},ajax:{url:null,},onSuccess:null,onCreate:null,onShow:null,onClose:null,},options);options.ajax.url=options.ajax.url||options.url;if(!options.ajax.url){throw new Error('$().loadmodal requires a url.');}
options.onSuccess=forceFuncArray(options.onSuccess);options.onCreate=forceFuncArray(options.onCreate);options.onShow=forceFuncArray(options.onShow);options.onClose=forceFuncArray(options.onClose);$('#'+options.id).modal('hide');options.ajax.success=$.isArray(options.ajax.success)?options.ajax.success:options.ajax.success?[options.ajax.success]:[];options.ajax.success.unshift(function(data,status,xhr){for(var i=0;i<options.onSuccess.length;i++){var ret=options.onSuccess[i].apply(null,[data,status,xhr]);if(ret===false){return false;}else if($.type(ret)==="string"){data=ret;}}
var div=$(['<div id="'+options.id+'" class="modal '+options.dlgClass+' jquery-loadmodal-js" tabindex="0" role="dialog" aria-labeledby="'+options.id+'-title">','  <div class="modal-dialog '+options.size+'" role="document">','      <div class="modal-content">','        <div class="modal-header">',options.closeButton?'          <button aria-label="Close" class="close" data-dismiss="modal" type="button">x</button>':'','          <h4 id="'+options.id+'-title" class="modal-title">'+options.title+'</h4>','        </div>','        <div id="'+options.idBody+'" class="modal-body">','        </div>','      </div>','    </div>','  </div>',].join('\n'));if(options.appendToSelector&&!options.prependToSelector){$(options.appendToSelector).append(div);}else{$(options.prependToSelector||'body').prepend(div);}
div.find('.modal-body').html(data);div.find('.modal-dialog').css('width',options.width);if(!$.isEmptyObject(options.buttons)){div.find('.modal-body').append('<div class="button-panel"></div>');var button_class='btn btn-primary';$.each(options.buttons,function(key,func){var button=$('<button class="'+button_class+'">'+key+'</button>');div.find('.button-panel').append(button);button.on('click.button-panel',function(evt){var closeDialog=true;if(func&&func(evt)===false){closeDialog=false;}
if(closeDialog){div.modal('hide');}});button_class='btn btn-default';});}
for(var i=0;i<options.onCreate.length;i++){if(options.onCreate[i].apply(div.get(0),[data,status,xhr])===false){return false;}}
div.on('shown.bs.modal',function(event){if(div.find('[autofocus]').length>0){div.find('[autofocus]').get(0).focus();}else if(div.find('.modal-body').find(':input:enabled:visible').length>0){div.find('.modal-body').find(':input:enabled:visible').get(0).focus();}else if(options.CloseButton){div.find('.close').get(0).focus();}});div.on('shown.bs.modal',function(event){for(var i=0;i<options.onShow.length;i++){options.onShow[i].apply(div.get(0),[event]);}});div.on('hidden.bs.modal',function(event){for(var i=0;i<options.onClose.length;i++){options.onClose[i].apply(div.get(0),[event]);}
div.removeData();div.remove();});div.modal(options.modal);});var promise=$.ajax(options.ajax);$.extend(promise,{create:function(func){options.onCreate.push(func);return this;},show:function(func){options.onShow.push(func);return this;},close:function(func){options.onClose.push(func);return this;},});return promise;};function forceFuncArray(ar){if(!ar){return[];}
if($.isArray(ar)){return ar;}
return[ar];}})(jQuery);;(function($){$.expr[":"].onScreen=function(elem){var $elem=$(elem)
if(!$elem.is(':visible')){return false;}
var $window=$(window)
var viewport_top=$window.scrollTop()
var viewport_height=$window.height()
var viewport_bottom=viewport_top+viewport_height
var top=$elem.offset().top
var height=$elem.height()
var bottom=top+height
return(top>=viewport_top&&top<viewport_bottom)||(bottom>viewport_top&&bottom<=viewport_bottom)||(height>viewport_height&&top<=viewport_top&&bottom>=viewport_bottom)}})(jQuery);;(function($){$.expr[":"].onScreenWithTopPadding=function(elem){var $elem=$(elem)
if(!$elem.is(':visible')){return false;}
var $window=$(window)
var viewport_top=$window.scrollTop()+42;var viewport_height=$window.height()-42;var viewport_bottom=viewport_top+viewport_height
var top=$elem.offset().top
var height=$elem.height()
var bottom=top+height
return(top>=viewport_top&&top<viewport_bottom)||(bottom>viewport_top&&bottom<=viewport_bottom)||(height>viewport_height&&top<=viewport_top&&bottom>=viewport_bottom)}})(jQuery);(function($){$.fn.extend({powerTimer:function(options,timerName){switch(options){case'stop':return funcStop.call(this,timerName);case'pause':return funcPause.call(this,timerName);case'continue':return funcContinue.call(this,timerName);case'options':return funcOptions.call(this,timerName);}
options=$.extend({func:null,params:{},name:TIMER_KEY,delay:-1,interval:-1,intervalAfter:-1,sleep:-1,sleepAfter:-1,stopAfter:-1,},options||{});funcStop.call(this,options.name);$(this).each(function(){setTimerValue(this,options.name,'options',options);setTimerValue(this,options.name,'starttime',new Date().getTime());funcContinue.call(this,options.name)});return this;}});var funcStop=function(name){name=name||TIMER_KEY;$(this).each(function(){stopTimerByName(this,name);removeTimerValues(this,name);});return this;};var funcPause=function(name){name=name||TIMER_KEY;$(this).each(function(){stopTimerByName(this,name);setTimerValue(this,name,'timerid',false);});return this;};var funcContinue=function(name){name=name||TIMER_KEY;stopTimerByName(this,name);var options=getTimerValue(this,name,'options');if(options){$(this).each(function(){if(options.delay>=0){registerTimeout(this,options,options.delay);}else if(options.interval>=0){registerTimeout(this,options,options.interval);}else if(options.intervalAfter>=0){registerTimeout(this,options,0);}else if(options.sleep>=0){registerTimeout(this,options,options.sleep);}else if(options.sleepAfter>=0){registerTimeout(this,options,0);}});}
return this;};var funcOptions=function(name){return getTimerValue(this,name||TIMER_KEY,'options');};TIMER_KEY='jquery.powertimers.js';function registerTimeout(elem,options,duration){if(duration>0){setTimerValue(elem,options.name,'timerid',window.setTimeout(function(){callWithElement(elem,options);},duration));}else{setTimerValue(elem,options.name,'timerid','dummy');callWithElement(elem,options)}}
function callWithElement(elem,options){var inDOM=document==elem||$.contains(document,elem);var now=new Date().getTime();var pastStop=options.stopAfter&&options.stopAfter>0&&now-getTimerValue(elem,options.name,'starttime')>options.stopAfter;if(!inDOM||pastStop){$(elem).powerTimer('stop');return false;}
var ret=options.func.call(elem,options.params);stopTimerByName(elem,options.name);if(ret!==false&&options.delay<=0&&getTimerValue(elem,options.name,'timerid')){if(options.interval>=0){registerTimeout(elem,options,Math.max(0,options.interval-(new Date().getTime()-now)));}else if(options.intervalAfter>=0){registerTimeout(elem,options,Math.max(0,options.intervalAfter-(new Date().getTime()-now)));}else if(options.sleep>=0){registerTimeout(elem,options,options.sleep);}else if(options.sleepAfter>=0){registerTimeout(elem,options,options.sleepAfter);}}
return ret;}
function stopTimerByName(elem,name,clear){var timerid=getTimerValue(elem,name,'timerid');if(timerid){window.clearTimeout(timerid);}}
function getTimerValue(elem,name,key){var $elem=$(elem);if(!$elem.data(TIMER_KEY)){$elem.data(TIMER_KEY,[]);}
if(!$elem.data(TIMER_KEY)[name]){$elem.data(TIMER_KEY)[name]=[];}
return $elem.data(TIMER_KEY)[name][key];}
function setTimerValue(elem,name,key,value){getTimerValue(elem,name,key);$(elem).data(TIMER_KEY)[name][key]=value;}
function removeTimerValues(elem,name){getTimerValue(elem,name,'dummy');delete $(elem).data(TIMER_KEY)[name];}})(jQuery);(function($){var FALSE=false,NULL=null;$.quickFlip={wrappers:[],opts:[],objs:[],init:function(options,box){var options=options||{};options.closeSpeed=options.closeSpeed||180;options.openSpeed=options.openSpeed||120;options.ctaSelector=options.ctaSelector||'.quickFlipCta';options.refresh=options.refresh||FALSE;options.easing=options.easing||'swing';options.noResize=options.noResize||FALSE;options.vertical=options.vertical||FALSE;var $box=typeof(box)!='undefined'?$(box):$('.quickFlip'),$kids=$box.children();if($box.css('position')=='static')$box.css('position','relative');var i=$.quickFlip.wrappers.length;$kids.each(function(j){var $this=$(this);if(options.ctaSelector){$this.find(options.ctaSelector).click(function(ev){ev.preventDefault();$.quickFlip.flip(i);});}
if(j)$this.hide();});$.quickFlip.opts.push(options);$.quickFlip.objs.push({$box:$($box),$kids:$($kids)});$.quickFlip.build(i);if(!options.noResize){$(window).resize(function(){for(var i=0;i<$.quickFlip.wrappers.length;i++){$.quickFlip.removeFlipDivs(i);$.quickFlip.build(i);}});}},build:function(i,currPanel){$.quickFlip.opts[i].panelWidth=$.quickFlip.opts[i].panelWidth||$.quickFlip.objs[i].$box.width();$.quickFlip.opts[i].panelHeight=$.quickFlip.opts[i].panelHeight||$.quickFlip.objs[i].$box.height();var options=$.quickFlip.opts[i],thisFlip={wrapper:$.quickFlip.objs[i].$box,index:i,half:parseInt((options.vertical?options.panelHeight:options.panelWidth)/2),panels:[],flipDivs:[],flipDivCols:[],currPanel:currPanel||0,options:options};$.quickFlip.objs[i].$kids.each(function(j){var $thisPanel=$(this).css({position:'absolute',top:0,left:0,margin:0,padding:0,width:options.panelWidth,height:options.panelHeight});thisFlip.panels[j]=$thisPanel;var $flipDivs=buildFlip(thisFlip,j).hide().appendTo(thisFlip.wrapper);thisFlip.flipDivs[j]=$flipDivs;thisFlip.flipDivCols[j]=$flipDivs.children();});$.quickFlip.wrappers[i]=thisFlip;function buildFlip(x,y){function buildFlipCol(x,y){var $col=$('<div></div>'),$inner=x.panels[y].clone().show();$col.css(flipCss);$col.html($inner);return $col;}
var $out=$('<div></div>'),inner=x.panels[y].html(),flipCss={width:options.vertical?options.panelWidth:x.half,height:options.vertical?x.half:options.panelHeight,position:'absolute',overflow:'hidden',margin:0,padding:0};if(options.vertical)flipCss.left=0;else flipCss.top=0;var $col1=$(buildFlipCol(x,y)).appendTo($out),$col2=$(buildFlipCol(x,y)).appendTo($out);if(options.vertical){$col1.css('bottom',x.half);$col2.css('top',x.half);$col2.children().css({top:NULL,bottom:0});}
else{$col1.css('right',x.half);$col2.css('left',x.half);$col2.children().css({right:0,left:'auto'});}
return $out;}},flip:function(i,nextPanel,repeater,options){function combineOpts(opts1,opts2){opts1=opts1||{};opts2=opts2||{};for(opt in opts1){opts2[opt]=opts1[opt];}
return opts2;}
if(typeof i!='number'||typeof $.quickFlip.wrappers[i]=='undefined')return;var x=$.quickFlip.wrappers[i],j=x.currPanel,k=(typeof(nextPanel)!='undefined'&&nextPanel!=NULL)?nextPanel:(x.panels.length>j+1)?j+1:0;x.currPanel=k,repeater=(typeof(repeater)!='undefined'&&repeater!=NULL)?repeater:1;options=combineOpts(options,$.quickFlip.opts[i]);x.panels[j].hide()
if(options.refresh){$.quickFlip.removeFlipDivs(i);$.quickFlip.build(i,k);x=$.quickFlip.wrappers[i];}
x.flipDivs[j].show();var panelFlipCount1=0,panelFlipCount2=0,closeCss=options.vertical?{height:0}:{width:0},openCss=options.vertical?{height:x.half}:{width:x.half};x.flipDivCols[j].animate(closeCss,options.closeSpeed,options.easing,function(){if(!panelFlipCount1){panelFlipCount1++;}
else{x.flipDivs[k].show();x.flipDivCols[k].css(closeCss);x.flipDivCols[k].animate(openCss,options.openSpeed,options.easing,function(){if(!panelFlipCount2){panelFlipCount2++;}
else{x.flipDivs[k].hide();x.panels[k].show();switch(repeater){case 0:case-1:$.quickFlip.flip(i,NULL,-1);break;case 1:break;default:$.quickFlip.flip(i,NULL,repeater-1);break;}}});}});},removeFlipDivs:function(i){for(var j=0;j<$.quickFlip.wrappers[i].flipDivs.length;j++)$.quickFlip.wrappers[i].flipDivs[j].remove();}};$.fn.quickFlip=function(options){this.each(function(){new $.quickFlip.init(options,this);});return this;};$.fn.whichQuickFlip=function(){function compare(obj1,obj2){if(!obj1||!obj2||!obj1.length||!obj2.length||obj1.length!=obj2.length)return FALSE;for(var i=0;i<obj1.length;i++){if(obj1[i]!==obj2[i])return FALSE;}
return true;}
var out=NULL;for(var i=0;i<$.quickFlip.wrappers.length;i++){if(compare(this,$($.quickFlip.wrappers[i].wrapper)))out=i;}
return out;};$.fn.quickFlipper=function(options,nextPanel,repeater){this.each(function(){var $this=$(this),thisIndex=$this.whichQuickFlip();if(thisIndex==NULL){$this.quickFlip(options);thisIndex=$this.whichQuickFlip();}
$.quickFlip.flip(thisIndex,nextPanel,repeater,options);});};})(jQuery);;(function(f){"use strict";"function"===typeof define&&define.amd?define(["jquery"],f):"undefined"!==typeof module&&module.exports?module.exports=f(require("jquery")):f(jQuery)})(function($){"use strict";function n(a){return!a.nodeName||-1!==$.inArray(a.nodeName.toLowerCase(),["iframe","#document","html","body"])}function h(a){return $.isFunction(a)||$.isPlainObject(a)?a:{top:a,left:a}}var p=$.scrollTo=function(a,d,b){return $(window).scrollTo(a,d,b)};p.defaults={axis:"xy",duration:0,limit:!0};$.fn.scrollTo=function(a,d,b){"object"===typeof d&&(b=d,d=0);"function"===typeof b&&(b={onAfter:b});"max"===a&&(a=9E9);b=$.extend({},p.defaults,b);d=d||b.duration;var u=b.queue&&1<b.axis.length;u&&(d/=2);b.offset=h(b.offset);b.over=h(b.over);return this.each(function(){function k(a){var k=$.extend({},b,{queue:!0,duration:d,complete:a&&function(){a.call(q,e,b)}});r.animate(f,k)}if(null!==a){var l=n(this),q=l?this.contentWindow||window:this,r=$(q),e=a,f={},t;switch(typeof e){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(e)){e=h(e);break}e=l?$(e):$(e,q);case"object":if(e.length===0)return;if(e.is||e.style)t=(e=$(e)).offset()}var v=$.isFunction(b.offset)&&b.offset(q,e)||b.offset;$.each(b.axis.split(""),function(a,c){var d="x"===c?"Left":"Top",m=d.toLowerCase(),g="scroll"+d,h=r[g](),n=p.max(q,c);t?(f[g]=t[m]+(l?0:h-r.offset()[m]),b.margin&&(f[g]-=parseInt(e.css("margin"+d),10)||0,f[g]-=parseInt(e.css("border"+d+"Width"),10)||0),f[g]+=v[m]||0,b.over[m]&&(f[g]+=e["x"===c?"width":"height"]()*b.over[m])):(d=e[m],f[g]=d.slice&&"%"===d.slice(-1)?parseFloat(d)/100*n:d);b.limit&&/^\d+$/.test(f[g])&&(f[g]=0>=f[g]?0:Math.min(f[g],n));!a&&1<b.axis.length&&(h===f[g]?f={}:u&&(k(b.onAfterFirst),f={}))});k(b.onAfter)}})};p.max=function(a,d){var b="x"===d?"Width":"Height",h="scroll"+b;if(!n(a))return a[h]-$(a)[b.toLowerCase()]();var b="client"+b,k=a.ownerDocument||a.document,l=k.documentElement,k=k.body;return Math.max(l[h],k[h])-Math.min(l[b],k[b])};$.Tween.propHooks.scrollLeft=$.Tween.propHooks.scrollTop={get:function(a){return $(a.elem)[a.prop]()},set:function(a){var d=this.get(a);if(a.options.interrupt&&a._last&&a._last!==d)return $(a.elem).stop();var b=Math.round(a.now);d!==b&&($(a.elem)[a.prop](b),a._last=this.get(a))}};return p});!(function($){"use strict";$.extend({tablesorter:new function(){var ts=this;ts.version="2.10.6";ts.parsers=[];ts.widgets=[];ts.defaults={theme:'default',widthFixed:false,showProcessing:false,headerTemplate:'{content}',onRenderTemplate:null,onRenderHeader:null,cancelSelection:true,dateFormat:'mmddyyyy',sortMultiSortKey:'shiftKey',sortResetKey:'ctrlKey',usNumberFormat:true,delayInit:false,serverSideSorting:false,headers:{},ignoreCase:true,sortForce:null,sortList:[],sortAppend:null,sortInitialOrder:'asc',sortLocaleCompare:false,sortReset:false,sortRestart:false,emptyTo:'bottom',stringTo:'max',textExtraction:'simple',textSorter:null,widgets:[],widgetOptions:{zebra:['even','odd']},initWidgets:true,initialized:null,tableClass:'tablesorter',cssAsc:'tablesorter-headerAsc',cssChildRow:'tablesorter-childRow',cssDesc:'tablesorter-headerDesc',cssHeader:'tablesorter-header',cssHeaderRow:'tablesorter-headerRow',cssIcon:'tablesorter-icon',cssInfoBlock:'tablesorter-infoOnly',cssProcessing:'tablesorter-processing',selectorHeaders:'> thead th:not([colspan]), > thead td:not([colspan])',selectorSort:'th, td',selectorRemove:'.remove-me',debug:false,headerList:[],empties:{},strings:{},parsers:[]};function log(s){if(typeof console!=="undefined"&&typeof console.log!=="undefined"){console.log(s);}else{alert(s);}}
function benchmark(s,d){log(s+" ("+(new Date().getTime()-d.getTime())+"ms)");}
ts.log=log;ts.benchmark=benchmark;function getElementText(table,node,cellIndex){if(!node){return"";}
var c=table.config,t=c.textExtraction,text="";if(t==="simple"){if(c.supportsTextContent){text=node.textContent;}else{text=$(node).text();}}else{if(typeof t==="function"){text=t(node,table,cellIndex);}else if(typeof t==="object"&&t.hasOwnProperty(cellIndex)){text=t[cellIndex](node,table,cellIndex);}else{text=c.supportsTextContent?node.textContent:$(node).text();}}
return $.trim(text);}
function detectParserForColumn(table,rows,rowIndex,cellIndex){var cur,i=ts.parsers.length,node=false,nodeValue='',keepLooking=true;while(nodeValue===''&&keepLooking){rowIndex++;if(rows[rowIndex]){node=rows[rowIndex].cells[cellIndex];nodeValue=getElementText(table,node,cellIndex);if(table.config.debug){log('Checking if value was empty on row '+rowIndex+', column: '+cellIndex+': "'+nodeValue+'"');}}else{keepLooking=false;}}
while(--i>=0){cur=ts.parsers[i];if(cur&&cur.id!=='text'&&cur.is&&cur.is(nodeValue,table,node)){return cur;}}
return ts.getParserById('text');}
function buildParserCache(table){var c=table.config,tb=c.$tbodies=c.$table.children('tbody:not(.'+c.cssInfoBlock+')'),rows,list,l,i,h,ch,p,parsersDebug="";if(tb.length===0){return c.debug?log('*Empty table!* Not building a parser cache'):'';}
rows=tb[0].rows;if(rows[0]){list=[];l=rows[0].cells.length;for(i=0;i<l;i++){h=c.$headers.filter(':not([colspan])');h=h.add(c.$headers.filter('[colspan="1"]')).filter('[data-column="'+i+'"]:last');ch=c.headers[i];p=ts.getParserById(ts.getData(h,ch,'sorter'));c.empties[i]=ts.getData(h,ch,'empty')||c.emptyTo||(c.emptyToBottom?'bottom':'top');c.strings[i]=ts.getData(h,ch,'string')||c.stringTo||'max';if(!p){p=detectParserForColumn(table,rows,-1,i);}
if(c.debug){parsersDebug+="column:"+i+"; parser:"+p.id+"; string:"+c.strings[i]+'; empty: '+c.empties[i]+"\n";}
list.push(p);}}
if(c.debug){log(parsersDebug);}
c.parsers=list;}
function buildCache(table){var b=table.tBodies,tc=table.config,totalRows,totalCells,parsers=tc.parsers,t,v,i,j,k,c,cols,cacheTime,colMax=[];tc.cache={};if(!parsers){return tc.debug?log('*Empty table!* Not building a cache'):'';}
if(tc.debug){cacheTime=new Date();}
if(tc.showProcessing){ts.isProcessing(table,true);}
for(k=0;k<b.length;k++){tc.cache[k]={row:[],normalized:[]};if(!$(b[k]).hasClass(tc.cssInfoBlock)){totalRows=(b[k]&&b[k].rows.length)||0;totalCells=(b[k].rows[0]&&b[k].rows[0].cells.length)||0;for(i=0;i<totalRows;++i){c=$(b[k].rows[i]);cols=[];if(c.hasClass(tc.cssChildRow)){tc.cache[k].row[tc.cache[k].row.length-1]=tc.cache[k].row[tc.cache[k].row.length-1].add(c);continue;}
tc.cache[k].row.push(c);for(j=0;j<totalCells;++j){t=getElementText(table,c[0].cells[j],j);v=parsers[j].format(t,table,c[0].cells[j],j);cols.push(v);if((parsers[j].type||'').toLowerCase()==="numeric"){colMax[j]=Math.max(Math.abs(v)||0,colMax[j]||0);}}
cols.push(tc.cache[k].normalized.length);tc.cache[k].normalized.push(cols);}
tc.cache[k].colMax=colMax;}}
if(tc.showProcessing){ts.isProcessing(table);}
if(tc.debug){benchmark("Building cache for "+totalRows+" rows",cacheTime);}}
function appendToTable(table,init){var c=table.config,b=table.tBodies,rows=[],c2=c.cache,r,n,totalRows,checkCell,$bk,$tb,i,j,k,l,pos,appendTime;if(!c2[0]){return;}
if(c.debug){appendTime=new Date();}
for(k=0;k<b.length;k++){$bk=$(b[k]);if($bk.length&&!$bk.hasClass(c.cssInfoBlock)){$tb=ts.processTbody(table,$bk,true);r=c2[k].row;n=c2[k].normalized;totalRows=n.length;checkCell=totalRows?(n[0].length-1):0;for(i=0;i<totalRows;i++){pos=n[i][checkCell];rows.push(r[pos]);if(!c.appender||!c.removeRows){l=r[pos].length;for(j=0;j<l;j++){$tb.append(r[pos][j]);}}}
ts.processTbody(table,$tb,false);}}
if(c.appender){c.appender(table,rows);}
if(c.debug){benchmark("Rebuilt table",appendTime);}
if(!init){ts.applyWidget(table);}
$(table).trigger("sortEnd",table);}
function computeThIndexes(t){var matrix=[],lookup={},cols=0,trs=$(t).find('thead:eq(0), tfoot').children('tr'),i,j,k,l,c,cells,rowIndex,cellId,rowSpan,colSpan,firstAvailCol,matrixrow;for(i=0;i<trs.length;i++){cells=trs[i].cells;for(j=0;j<cells.length;j++){c=cells[j];rowIndex=c.parentNode.rowIndex;cellId=rowIndex+"-"+c.cellIndex;rowSpan=c.rowSpan||1;colSpan=c.colSpan||1;if(typeof(matrix[rowIndex])==="undefined"){matrix[rowIndex]=[];}
for(k=0;k<matrix[rowIndex].length+1;k++){if(typeof(matrix[rowIndex][k])==="undefined"){firstAvailCol=k;break;}}
lookup[cellId]=firstAvailCol;cols=Math.max(firstAvailCol,cols);$(c).attr({'data-column':firstAvailCol});for(k=rowIndex;k<rowIndex+rowSpan;k++){if(typeof(matrix[k])==="undefined"){matrix[k]=[];}
matrixrow=matrix[k];for(l=firstAvailCol;l<firstAvailCol+colSpan;l++){matrixrow[l]="x";}}}}
t.config.columns=cols;return lookup;}
function formatSortingOrder(v){return(/^d/i.test(v)||v===1);}
function buildHeaders(table){var header_index=computeThIndexes(table),ch,$t,h,i,t,lock,time,c=table.config;c.headerList=[];c.headerContent=[];if(c.debug){time=new Date();}
i=c.cssIcon?'<i class="'+c.cssIcon+'"></i>':'';c.$headers=$(table).find(c.selectorHeaders).each(function(index){$t=$(this);ch=c.headers[index];c.headerContent[index]=this.innerHTML;t=c.headerTemplate.replace(/\{content\}/g,this.innerHTML).replace(/\{icon\}/g,i);if(c.onRenderTemplate){h=c.onRenderTemplate.apply($t,[index,t]);if(h&&typeof h==='string'){t=h;}}
this.innerHTML='<div class="d-inline-block">'+t+'</div>';if(c.onRenderHeader){c.onRenderHeader.apply($t,[index]);}
this.column=header_index[this.parentNode.rowIndex+"-"+this.cellIndex];this.order=formatSortingOrder(ts.getData($t,ch,'sortInitialOrder')||c.sortInitialOrder)?[1,0,2]:[0,1,2];this.count=-1;this.lockedOrder=false;lock=ts.getData($t,ch,'lockedOrder')||false;if(typeof lock!=='undefined'&&lock!==false){this.order=this.lockedOrder=formatSortingOrder(lock)?[1,1,1]:[0,0,0];}
$t.addClass(c.cssHeader);c.headerList[index]=this;$t.parent().addClass(c.cssHeaderRow);$t.attr("tabindex",0);});updateHeader(table);if(c.debug){benchmark("Built headers:",time);log(c.$headers);}}
function commonUpdate(table,resort,callback){var c=table.config;c.$table.find(c.selectorRemove).remove();buildParserCache(table);buildCache(table);checkResort(c.$table,resort,callback);}
function updateHeader(table){var s,c=table.config;c.$headers.each(function(index,th){s=ts.getData(th,c.headers[index],'sorter')==='false';th.sortDisabled=s;$(th)[s?'addClass':'removeClass']('sorter-false');});}
function setHeadersCss(table){var f,i,j,l,c=table.config,list=c.sortList,css=[c.cssAsc,c.cssDesc],$t=$(table).find('tfoot tr').children().removeClass(css.join(' '));c.$headers.removeClass(css.join(' '));l=list.length;for(i=0;i<l;i++){if(list[i][1]!==2){f=c.$headers.not('.sorter-false').filter('[data-column="'+list[i][0]+'"]'+(l===1?':last':''));if(f.length){for(j=0;j<f.length;j++){if(!f[j].sortDisabled){f.eq(j).addClass(css[list[i][1]]);if($t.length){$t.filter('[data-column="'+list[i][0]+'"]').eq(j).addClass(css[list[i][1]]);}}}}}}}
function fixColumnWidth(table){if(table.config.widthFixed&&$(table).find('colgroup').length===0){var colgroup=$('<colgroup>'),overallWidth=$(table).width();$(table.tBodies[0]).find("tr:first").children("td").each(function(){colgroup.append($('<col>').css('width',parseInt(($(this).width()/overallWidth)*1000,10)/10+'%'));});$(table).prepend(colgroup);}}
function updateHeaderSortCount(table,list){var s,t,o,c=table.config,sl=list||c.sortList;c.sortList=[];$.each(sl,function(i,v){s=[parseInt(v[0],10),parseInt(v[1],10)];o=c.headerList[s[0]];if(o){c.sortList.push(s);t=$.inArray(s[1],o.order);o.count=t>=0?t:s[1]%(c.sortReset?3:2);}});}
function getCachedSortType(parsers,i){return(parsers&&parsers[i])?parsers[i].type||'':'';}
function initSort(table,cell,e){var a,i,j,o,s,c=table.config,k=!e[c.sortMultiSortKey],$this=$(table);$this.trigger("sortStart",table);cell.count=e[c.sortResetKey]?2:(cell.count+1)%(c.sortReset?3:2);if(c.sortRestart){i=cell;c.$headers.each(function(){if(this!==i&&(k||!$(this).is('.'+c.cssDesc+',.'+c.cssAsc))){this.count=-1;}});}
i=cell.column;if(k){c.sortList=[];if(c.sortForce!==null){a=c.sortForce;for(j=0;j<a.length;j++){if(a[j][0]!==i){c.sortList.push(a[j]);}}}
o=cell.order[cell.count];if(o<2){c.sortList.push([i,o]);if(cell.colSpan>1){for(j=1;j<cell.colSpan;j++){c.sortList.push([i+j,o]);}}}}else{if(c.sortAppend&&c.sortList.length>1){if(ts.isValueInArray(c.sortAppend[0][0],c.sortList)){c.sortList.pop();}}
if(ts.isValueInArray(i,c.sortList)){for(j=0;j<c.sortList.length;j++){s=c.sortList[j];o=c.headerList[s[0]];if(s[0]===i){s[1]=o.order[o.count];if(s[1]===2){c.sortList.splice(j,1);o.count=-1;}}}}else{o=cell.order[cell.count];if(o<2){c.sortList.push([i,o]);if(cell.colSpan>1){for(j=1;j<cell.colSpan;j++){c.sortList.push([i+j,o]);}}}}}
if(c.sortAppend!==null){a=c.sortAppend;for(j=0;j<a.length;j++){if(a[j][0]!==i){c.sortList.push(a[j]);}}}
$this.trigger("sortBegin",table);setTimeout(function(){setHeadersCss(table);multisort(table);appendToTable(table);},1);}
function multisort(table){var dir=0,tc=table.config,sortList=tc.sortList,l=sortList.length,bl=table.tBodies.length,sortTime,i,k,c,colMax,cache,lc,s,order,orgOrderCol;if(tc.serverSideSorting||!tc.cache[0]){return;}
if(tc.debug){sortTime=new Date();}
for(k=0;k<bl;k++){colMax=tc.cache[k].colMax;cache=tc.cache[k].normalized;lc=cache.length;orgOrderCol=(cache&&cache[0])?cache[0].length-1:0;cache.sort(function(a,b){for(i=0;i<l;i++){c=sortList[i][0];order=sortList[i][1];s=/n/i.test(getCachedSortType(tc.parsers,c))?"Numeric":"Text";s+=order===0?"":"Desc";if(/Numeric/.test(s)&&tc.strings[c]){if(typeof(tc.string[tc.strings[c]])==='boolean'){dir=(order===0?1:-1)*(tc.string[tc.strings[c]]?-1:1);}else{dir=(tc.strings[c])?tc.string[tc.strings[c]]||0:0;}}
var sort=$.tablesorter["sort"+s](table,a[c],b[c],c,colMax[c],dir);if(sort){return sort;}}
return a[orgOrderCol]-b[orgOrderCol];});}
if(tc.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time",sortTime);}}
function resortComplete($table,callback){$table.trigger('updateComplete');if(typeof callback==="function"){callback($table[0]);}}
function checkResort($table,flag,callback){if(flag!==false&&!$table[0].isProcessing){$table.trigger("sorton",[$table[0].config.sortList,function(){resortComplete($table,callback);}]);}else{resortComplete($table,callback);}}
function bindEvents(table){var c=table.config,$this=c.$table,j,downTime;c.$headers.find(c.selectorSort).add(c.$headers.filter(c.selectorSort)).unbind('mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter').bind('mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter',function(e,external){if(((e.which||e.button)!==1&&!/sort|keypress/.test(e.type))||(e.type==='keypress'&&e.which!==13)){return false;}
if(e.type==='mouseup'&&external!==true&&(new Date().getTime()-downTime>250)){return false;}
if(e.type==='mousedown'){downTime=new Date().getTime();return e.target.tagName==="INPUT"?'':!c.cancelSelection;}
if(c.delayInit&&!c.cache){buildCache(table);}
var $cell=/TH|TD/.test(this.tagName)?$(this):$(this).parents('th, td').filter(':last'),cell=$cell[0];if(!cell.sortDisabled){initSort(table,cell,e);}});if(c.cancelSelection){c.$headers.attr('unselectable','on').bind('selectstart',false).css({'user-select':'none','MozUserSelect':'none'});}
$this.unbind('sortReset update updateRows updateCell updateAll addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave '.split(' ').join('.tablesorter ')).bind("sortReset.tablesorter",function(e){e.stopPropagation();c.sortList=[];setHeadersCss(table);multisort(table);appendToTable(table);}).bind("updateAll.tablesorter",function(e,resort,callback){e.stopPropagation();ts.refreshWidgets(table,true,true);ts.restoreHeaders(table);buildHeaders(table);bindEvents(table);commonUpdate(table,resort,callback);}).bind("update.tablesorter updateRows.tablesorter",function(e,resort,callback){e.stopPropagation();updateHeader(table);commonUpdate(table,resort,callback);}).bind("updateCell.tablesorter",function(e,cell,resort,callback){e.stopPropagation();$this.find(c.selectorRemove).remove();var l,row,icell,$tb=$this.find('tbody'),tbdy=$tb.index($(cell).parents('tbody').filter(':last')),$row=$(cell).parents('tr').filter(':last');cell=$(cell)[0];if($tb.length&&tbdy>=0){row=$tb.eq(tbdy).find('tr').index($row);icell=cell.cellIndex;l=c.cache[tbdy].normalized[row].length-1;c.cache[tbdy].row[table.config.cache[tbdy].normalized[row][l]]=$row;c.cache[tbdy].normalized[row][icell]=c.parsers[icell].format(getElementText(table,cell,icell),table,cell,icell);checkResort($this,resort,callback);}}).bind("addRows.tablesorter",function(e,$row,resort,callback){e.stopPropagation();var i,rows=$row.filter('tr').length,dat=[],l=$row[0].cells.length,tbdy=$this.find('tbody').index($row.parents('tbody').filter(':last'));if(!c.parsers){buildParserCache(table);}
for(i=0;i<rows;i++){for(j=0;j<l;j++){dat[j]=c.parsers[j].format(getElementText(table,$row[i].cells[j],j),table,$row[i].cells[j],j);}
dat.push(c.cache[tbdy].row.length);c.cache[tbdy].row.push([$row[i]]);c.cache[tbdy].normalized.push(dat);dat=[];}
checkResort($this,resort,callback);}).bind("sorton.tablesorter",function(e,list,callback,init){e.stopPropagation();$this.trigger("sortStart",this);updateHeaderSortCount(table,list);setHeadersCss(table);$this.trigger("sortBegin",this);multisort(table);appendToTable(table,init);if(typeof callback==="function"){callback(table);}}).bind("appendCache.tablesorter",function(e,callback,init){e.stopPropagation();appendToTable(table,init);if(typeof callback==="function"){callback(table);}}).bind("applyWidgetId.tablesorter",function(e,id){e.stopPropagation();ts.getWidgetById(id).format(table,c,c.widgetOptions);}).bind("applyWidgets.tablesorter",function(e,init){e.stopPropagation();ts.applyWidget(table,init);}).bind("refreshWidgets.tablesorter",function(e,all,dontapply){e.stopPropagation();ts.refreshWidgets(table,all,dontapply);}).bind("destroy.tablesorter",function(e,c,cb){e.stopPropagation();ts.destroy(table,c,cb);});}
ts.construct=function(settings){return this.each(function(){if(!this.tHead||this.tBodies.length===0||this.hasInitialized===true){return(this.config&&this.config.debug)?log('stopping initialization! No thead, tbody or tablesorter has already been initialized'):'';}
var $this=$(this),table=this,c,k='',m=$.metadata;table.hasInitialized=false;table.isProcessing=true;table.config={};c=$.extend(true,table.config,ts.defaults,settings);$.data(table,"tablesorter",c);if(c.debug){$.data(table,'startoveralltimer',new Date());}
c.supportsTextContent=$('<span>x</span>')[0].textContent==='x';c.supportsDataObject=parseFloat($.fn.jquery)>=1.4;c.string={'max':1,'min':-1,'max+':1,'max-':-1,'zero':0,'none':0,'null':0,'top':true,'bottom':false};if(!/tablesorter\-/.test($this.attr('class'))){k=(c.theme!==''?' tablesorter-'+c.theme:'');}
c.$table=$this.addClass(c.tableClass+k);c.$tbodies=$this.children('tbody:not(.'+c.cssInfoBlock+')');buildHeaders(table);fixColumnWidth(table);buildParserCache(table);if(!c.delayInit){buildCache(table);}
bindEvents(table);if(c.supportsDataObject&&typeof $this.data().sortlist!=='undefined'){c.sortList=$this.data().sortlist;}else if(m&&($this.metadata()&&$this.metadata().sortlist)){c.sortList=$this.metadata().sortlist;}
ts.applyWidget(table,true);if(c.sortList.length>0){$this.trigger("sorton",[c.sortList,{},!c.initWidgets]);}else if(c.initWidgets){ts.applyWidget(table);}
if(c.showProcessing){$this.unbind('sortBegin.tablesorter sortEnd.tablesorter').bind('sortBegin.tablesorter sortEnd.tablesorter',function(e){ts.isProcessing(table,e.type==='sortBegin');});}
table.hasInitialized=true;table.isProcessing=false;if(c.debug){ts.benchmark("Overall initialization time",$.data(table,'startoveralltimer'));}
$this.trigger('tablesorter-initialized',table);if(typeof c.initialized==='function'){c.initialized(table);}});};ts.isProcessing=function(table,toggle,$ths){table=$(table);var c=table[0].config,$h=$ths||table.find('.'+c.cssHeader);if(toggle){if(c.sortList.length>0){$h=$h.filter(function(){return this.sortDisabled?false:ts.isValueInArray(parseFloat($(this).attr('data-column')),c.sortList);});}
$h.addClass(c.cssProcessing);}else{$h.removeClass(c.cssProcessing);}};ts.processTbody=function(table,$tb,getIt){var holdr;if(getIt){table.isProcessing=true;$tb.before('<span class="tablesorter-savemyplace"/>');holdr=($.fn.detach)?$tb.detach():$tb.remove();return holdr;}
holdr=$(table).find('span.tablesorter-savemyplace');$tb.insertAfter(holdr);holdr.remove();table.isProcessing=false;};ts.clearTableBody=function(table){$(table)[0].config.$tbodies.empty();};ts.restoreHeaders=function(table){var c=table.config;c.$table.find(c.selectorHeaders).each(function(i){if($(this).find('.tablesorter-header-inner').length){$(this).html(c.headerContent[i]);}});};ts.destroy=function(table,removeClasses,callback){table=$(table)[0];if(!table.hasInitialized){return;}
ts.refreshWidgets(table,true,true);var $t=$(table),c=table.config,$h=$t.find('thead:first'),$r=$h.find('tr.'+c.cssHeaderRow).removeClass(c.cssHeaderRow),$f=$t.find('tfoot:first > tr').children('th, td');$h.find('tr').not($r).remove();$t.removeData('tablesorter').unbind('sortReset update updateAll updateRows updateCell addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd '.split(' ').join('.tablesorter '));c.$headers.add($f).removeClass(c.cssHeader+' '+c.cssAsc+' '+c.cssDesc).removeAttr('data-column');$r.find(c.selectorSort).unbind('mousedown.tablesorter mouseup.tablesorter keypress.tablesorter');ts.restoreHeaders(table);if(removeClasses!==false){$t.removeClass(c.tableClass+' tablesorter-'+c.theme);}
table.hasInitialized=false;if(typeof callback==='function'){callback(table);}};ts.regex=[/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,/^0x[0-9a-f]+$/i];ts.sortText=function(table,a,b,col){if(a===b){return 0;}
var c=table.config,e=c.string[(c.empties[col]||c.emptyTo)],r=ts.regex,xN,xD,yN,yD,xF,yF,i,mx;if(a===''&&e!==0){return typeof e==='boolean'?(e?-1:1):-e||-1;}
if(b===''&&e!==0){return typeof e==='boolean'?(e?1:-1):e||1;}
if(typeof c.textSorter==='function'){return c.textSorter(a,b,table,col);}
xN=a.replace(r[0],'\\0$1\\0').replace(/\\0$/,'').replace(/^\\0/,'').split('\\0');yN=b.replace(r[0],'\\0$1\\0').replace(/\\0$/,'').replace(/^\\0/,'').split('\\0');xD=parseInt(a.match(r[2]),16)||(xN.length!==1&&a.match(r[1])&&Date.parse(a));yD=parseInt(b.match(r[2]),16)||(xD&&b.match(r[1])&&Date.parse(b))||null;if(yD){if(xD<yD){return-1;}
if(xD>yD){return 1;}}
mx=Math.max(xN.length,yN.length);for(i=0;i<mx;i++){xF=isNaN(xN[i])?xN[i]||0:parseFloat(xN[i])||0;yF=isNaN(yN[i])?yN[i]||0:parseFloat(yN[i])||0;if(isNaN(xF)!==isNaN(yF)){return(isNaN(xF))?1:-1;}
if(typeof xF!==typeof yF){xF+='';yF+='';}
if(xF<yF){return-1;}
if(xF>yF){return 1;}}
return 0;};ts.sortTextDesc=function(table,a,b,col){if(a===b){return 0;}
var c=table.config,e=c.string[(c.empties[col]||c.emptyTo)];if(a===''&&e!==0){return typeof e==='boolean'?(e?-1:1):e||1;}
if(b===''&&e!==0){return typeof e==='boolean'?(e?1:-1):-e||-1;}
if(typeof c.textSorter==='function'){return c.textSorter(b,a,table,col);}
return ts.sortText(table,b,a);};ts.getTextValue=function(a,mx,d){if(mx){var i,l=a?a.length:0,n=mx+d;for(i=0;i<l;i++){n+=a.charCodeAt(i);}
return d*n;}
return 0;};ts.sortNumeric=function(table,a,b,col,mx,d){if(a===b){return 0;}
var c=table.config,e=c.string[(c.empties[col]||c.emptyTo)];if(a===''&&e!==0){return typeof e==='boolean'?(e?-1:1):-e||-1;}
if(b===''&&e!==0){return typeof e==='boolean'?(e?1:-1):e||1;}
if(isNaN(a)){a=ts.getTextValue(a,mx,d);}
if(isNaN(b)){b=ts.getTextValue(b,mx,d);}
return a-b;};ts.sortNumericDesc=function(table,a,b,col,mx,d){if(a===b){return 0;}
var c=table.config,e=c.string[(c.empties[col]||c.emptyTo)];if(a===''&&e!==0){return typeof e==='boolean'?(e?-1:1):e||1;}
if(b===''&&e!==0){return typeof e==='boolean'?(e?1:-1):-e||-1;}
if(isNaN(a)){a=ts.getTextValue(a,mx,d);}
if(isNaN(b)){b=ts.getTextValue(b,mx,d);}
return b-a;};ts.characterEquivalents={"a":"\u00e1\u00e0\u00e2\u00e3\u00e4\u0105\u00e5","A":"\u00c1\u00c0\u00c2\u00c3\u00c4\u0104\u00c5","c":"\u00e7\u0107\u010d","C":"\u00c7\u0106\u010c","e":"\u00e9\u00e8\u00ea\u00eb\u011b\u0119","E":"\u00c9\u00c8\u00ca\u00cb\u011a\u0118","i":"\u00ed\u00ec\u0130\u00ee\u00ef\u0131","I":"\u00cd\u00cc\u0130\u00ce\u00cf","o":"\u00f3\u00f2\u00f4\u00f5\u00f6","O":"\u00d3\u00d2\u00d4\u00d5\u00d6","ss":"\u00df","SS":"\u1e9e","u":"\u00fa\u00f9\u00fb\u00fc\u016f","U":"\u00da\u00d9\u00db\u00dc\u016e"};ts.replaceAccents=function(s){var a,acc='[',eq=ts.characterEquivalents;if(!ts.characterRegex){ts.characterRegexArray={};for(a in eq){if(typeof a==='string'){acc+=eq[a];ts.characterRegexArray[a]=new RegExp('['+eq[a]+']','g');}}
ts.characterRegex=new RegExp(acc+']');}
if(ts.characterRegex.test(s)){for(a in eq){if(typeof a==='string'){s=s.replace(ts.characterRegexArray[a],a);}}}
return s;};ts.isValueInArray=function(v,a){var i,l=a.length;for(i=0;i<l;i++){if(a[i][0]===v){return true;}}
return false;};ts.addParser=function(parser){var i,l=ts.parsers.length,a=true;for(i=0;i<l;i++){if(ts.parsers[i].id.toLowerCase()===parser.id.toLowerCase()){a=false;}}
if(a){ts.parsers.push(parser);}};ts.getParserById=function(name){var i,l=ts.parsers.length;for(i=0;i<l;i++){if(ts.parsers[i].id.toLowerCase()===(name.toString()).toLowerCase()){return ts.parsers[i];}}
return false;};ts.addWidget=function(widget){ts.widgets.push(widget);};ts.getWidgetById=function(name){var i,w,l=ts.widgets.length;for(i=0;i<l;i++){w=ts.widgets[i];if(w&&w.hasOwnProperty('id')&&w.id.toLowerCase()===name.toLowerCase()){return w;}}};ts.applyWidget=function(table,init){table=$(table)[0];var c=table.config,wo=c.widgetOptions,widgets=[],time,i,w,wd;if(c.debug){time=new Date();}
if(c.widgets.length){c.widgets=$.grep(c.widgets,function(v,k){return $.inArray(v,c.widgets)===k;});$.each(c.widgets||[],function(i,n){wd=ts.getWidgetById(n);if(wd&&wd.id){if(!wd.priority){wd.priority=10;}
widgets[i]=wd;}});widgets.sort(function(a,b){return a.priority<b.priority?-1:a.priority===b.priority?0:1;});$.each(widgets,function(i,w){if(w){if(init){if(w.hasOwnProperty('options')){wo=table.config.widgetOptions=$.extend(true,{},w.options,wo);}
if(w.hasOwnProperty('init')){w.init(table,w,c,wo);}}else if(!init&&w.hasOwnProperty('format')){w.format(table,c,wo,false);}}});}
if(c.debug){w=c.widgets.length;benchmark("Completed "+(init===true?"initializing ":"applying ")+w+" widget"+(w!==1?"s":""),time);}};ts.refreshWidgets=function(table,doAll,dontapply){table=$(table)[0];var i,c=table.config,cw=c.widgets,w=ts.widgets,l=w.length;for(i=0;i<l;i++){if(w[i]&&w[i].id&&(doAll||$.inArray(w[i].id,cw)<0)){if(c.debug){log('Refeshing widgets: Removing '+w[i].id);}
if(w[i].hasOwnProperty('remove')){w[i].remove(table,c,c.widgetOptions);}}}
if(dontapply!==true){ts.applyWidget(table,doAll);}};ts.getData=function(h,ch,key){var val='',$h=$(h),m,cl;if(!$h.length){return'';}
m=$.metadata?$h.metadata():false;cl=' '+($h.attr('class')||'');if(typeof $h.data(key)!=='undefined'||typeof $h.data(key.toLowerCase())!=='undefined'){val+=$h.data(key)||$h.data(key.toLowerCase());}else if(m&&typeof m[key]!=='undefined'){val+=m[key];}else if(ch&&typeof ch[key]!=='undefined'){val+=ch[key];}else if(cl!==' '&&cl.match(' '+key+'-')){val=cl.match(new RegExp('\\s'+key+'-([\\w-]+)'))[1]||'';}
return $.trim(val);};ts.formatFloat=function(s,table){if(typeof s!=='string'||s===''){return s;}
var i,t=table&&table.config?table.config.usNumberFormat!==false:typeof table!=="undefined"?table:true;if(t){s=s.replace(/,/g,'');}else{s=s.replace(/[\s|\.]/g,'').replace(/,/g,'.');}
if(/^\s*\([.\d]+\)/.test(s)){s=s.replace(/^\s*\(/,'-').replace(/\)/,'');}
i=parseFloat(s);return isNaN(i)?$.trim(s):i;};ts.isDigit=function(s){return isNaN(s)?(/^[\-+(]?\d+[)]?$/).test(s.toString().replace(/[,.'"\s]/g,'')):true;};}()});var ts=$.tablesorter;$.fn.extend({tablesorter:ts.construct});ts.addParser({id:"text",is:function(){return true;},format:function(s,table){var c=table.config;if(s){s=$.trim(c.ignoreCase?s.toLocaleLowerCase():s);s=c.sortLocaleCompare?ts.replaceAccents(s):s;}
return s;},type:"text"});ts.addParser({id:"digit",is:function(s){return ts.isDigit(s);},format:function(s,table){var n=ts.formatFloat((s||'').replace(/[^\w,. \-()]/g,""),table);return s&&typeof n==='number'?n:s?$.trim(s&&table.config.ignoreCase?s.toLocaleLowerCase():s):s;},type:"numeric"});ts.addParser({id:"currency",is:function(s){return(/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/).test((s||'').replace(/[,. ]/g,''));},format:function(s,table){var n=ts.formatFloat((s||'').replace(/[^\w,. \-()]/g,""),table);return s&&typeof n==='number'?n:s?$.trim(s&&table.config.ignoreCase?s.toLocaleLowerCase():s):s;},type:"numeric"});ts.addParser({id:"ipAddress",is:function(s){return(/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/).test(s);},format:function(s,table){var i,a=s?s.split("."):'',r="",l=a.length;for(i=0;i<l;i++){r+=("00"+a[i]).slice(-3);}
return s?ts.formatFloat(r,table):s;},type:"numeric"});ts.addParser({id:"url",is:function(s){return(/^(https?|ftp|file):\/\//).test(s);},format:function(s){return s?$.trim(s.replace(/(https?|ftp|file):\/\//,'')):s;},type:"text"});ts.addParser({id:"isoDate",is:function(s){return(/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/).test(s);},format:function(s,table){return s?ts.formatFloat((s!=="")?(new Date(s.replace(/-/g,"/")).getTime()||""):"",table):s;},type:"numeric"});ts.addParser({id:"percent",is:function(s){return(/(\d\s?%|%\s?\d)/).test(s);},format:function(s,table){return s?ts.formatFloat(s.replace(/%/g,""),table):s;},type:"numeric"});ts.addParser({id:"usLongDate",is:function(s){return(/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i).test(s)||(/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i).test(s);},format:function(s,table){return s?ts.formatFloat((new Date(s.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||''),table):s;},type:"numeric"});ts.addParser({id:"shortDate",is:function(s){return(/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/).test((s||'').replace(/\s+/g," ").replace(/[\-.,]/g,"/"));},format:function(s,table,cell,cellIndex){if(s){var c=table.config,ci=c.headerList[cellIndex],format=ci.dateFormat||ts.getData(ci,c.headers[cellIndex],'dateFormat')||c.dateFormat;s=s.replace(/\s+/g," ").replace(/[\-.,]/g,"/");if(format==="mmddyyyy"){s=s.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2");}else if(format==="ddmmyyyy"){s=s.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1");}else if(format==="yyyymmdd"){s=s.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,"$1/$2/$3");}}
return s?ts.formatFloat((new Date(s).getTime()||''),table):s;},type:"numeric"});ts.addParser({id:"time",is:function(s){return(/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i).test(s);},format:function(s,table){return s?ts.formatFloat((new Date("2000/01/01 "+s.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||""),table):s;},type:"numeric"});ts.addParser({id:"metadata",is:function(){return false;},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?'sortValue':c.parserMetadataName;return $(cell).metadata()[p];},type:"numeric"});ts.addWidget({id:"zebra",priority:90,format:function(table,c,wo){var $tb,$tv,$tr,row,even,time,k,l,child=new RegExp(c.cssChildRow,'i'),b=c.$tbodies;if(c.debug){time=new Date();}
for(k=0;k<b.length;k++){$tb=b.eq(k);l=$tb.children('tr').length;if(l>1){row=0;$tv=$tb.children('tr:visible');$tv.each(function(){$tr=$(this);if(!child.test(this.className)){row++;}
even=(row%2===0);$tr.removeClass(wo.zebra[even?1:0]).addClass(wo.zebra[even?0:1]);});}}
if(c.debug){ts.benchmark("Applying Zebra widget",time);}},remove:function(table,c,wo){var k,$tb,b=c.$tbodies,rmv=(wo.zebra||["even","odd"]).join(' ');for(k=0;k<b.length;k++){$tb=$.tablesorter.processTbody(table,b.eq(k),true);$tb.children().removeClass(rmv);$.tablesorter.processTbody(table,$tb,false);}}});})(jQuery);(function($){$.support.touch='ontouchend'in document;if(!$.support.touch){return;}
var mouseProto=$.ui.mouse.prototype,_mouseInit=mouseProto._mouseInit,_mouseDestroy=mouseProto._mouseDestroy,touchHandled;function simulateMouseEvent(event,simulatedType){if(event.originalEvent.touches.length>1){return;}
event.preventDefault();var touch=event.originalEvent.changedTouches[0],simulatedEvent=document.createEvent('MouseEvents');simulatedEvent.initMouseEvent(simulatedType,true,true,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,false,false,false,false,0,null);event.target.dispatchEvent(simulatedEvent);}
mouseProto._touchStart=function(event){var self=this;if(touchHandled||!self._mouseCapture(event.originalEvent.changedTouches[0])){return;}
touchHandled=true;self._touchMoved=false;simulateMouseEvent(event,'mouseover');simulateMouseEvent(event,'mousemove');simulateMouseEvent(event,'mousedown');};mouseProto._touchMove=function(event){if(!touchHandled){return;}
this._touchMoved=true;simulateMouseEvent(event,'mousemove');};mouseProto._touchEnd=function(event){if(!touchHandled){return;}
simulateMouseEvent(event,'mouseup');simulateMouseEvent(event,'mouseout');if(!this._touchMoved){simulateMouseEvent(event,'click');}
touchHandled=false;};mouseProto._mouseInit=function(){var self=this;self.element.bind({touchstart:$.proxy(self,'_touchStart'),touchmove:$.proxy(self,'_touchMove'),touchend:$.proxy(self,'_touchEnd')});_mouseInit.call(self);};mouseProto._mouseDestroy=function(){var self=this;self.element.unbind({touchstart:$.proxy(self,'_touchStart'),touchmove:$.proxy(self,'_touchMove'),touchend:$.proxy(self,'_touchEnd')});_mouseDestroy.call(self);};})(jQuery);;(function(factory){if(typeof define==='function'&&define.amd){define(factory);}else if(typeof exports==='object'){module.exports=factory();}else{var OldCookies=window.Cookies;var api=window.Cookies=factory();api.noConflict=function(){window.Cookies=OldCookies;return api;};}}(function(){function extend(){var i=0;var result={};for(;i<arguments.length;i++){var attributes=arguments[i];for(var key in attributes){result[key]=attributes[key];}}
return result;}
function init(converter){function api(key,value,attributes){var result;if(typeof document==='undefined'){return;}
if(arguments.length>1){attributes=extend({path:'/'},api.defaults,attributes);if(typeof attributes.expires==='number'){var expires=new Date();expires.setMilliseconds(expires.getMilliseconds()+attributes.expires*864e+5);attributes.expires=expires;}
try{result=JSON.stringify(value);if(/^[\{\[]/.test(result)){value=result;}}catch(e){}
if(!converter.write){value=encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent);}else{value=converter.write(value,key);}
key=encodeURIComponent(String(key));key=key.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent);key=key.replace(/[\(\)]/g,escape);return(document.cookie=[key,'=',value,attributes.expires&&'; expires='+attributes.expires.toUTCString(),attributes.path&&'; path='+attributes.path,attributes.domain&&'; domain='+attributes.domain,attributes.secure?'; secure':''].join(''));}
if(!key){result={};}
var cookies=document.cookie?document.cookie.split('; '):[];var rdecode=/(%[0-9A-Z]{2})+/g;var i=0;for(;i<cookies.length;i++){var parts=cookies[i].split('=');var name=parts[0].replace(rdecode,decodeURIComponent);var cookie=parts.slice(1).join('=');if(cookie.charAt(0)==='"'){cookie=cookie.slice(1,-1);}
try{cookie=converter.read?converter.read(cookie,name):converter(cookie,name)||cookie.replace(rdecode,decodeURIComponent);if(this.json){try{cookie=JSON.parse(cookie);}catch(e){}}
if(key===name){result=cookie;break;}
if(!key){result[name]=cookie;}}catch(e){}}
return result;}
api.set=api;api.get=function(key){return api(key);};api.getJSON=function(){return api.apply({json:true},[].slice.call(arguments));};api.defaults={};api.remove=function(key,attributes){api(key,'',extend(attributes,{expires:-1}));};api.withConverter=init;return api;}
return init(function(){});}));(function($){if(!$||!($.toJSON||Object.toJSON||window.JSON)){throw new Error("jQuery, MooTools or Prototype needs to be loaded before jStorage!");}
var
_storage={},_storage_service={jStorage:"{}"},_storage_elm=null,_storage_size=0,json_encode=$.toJSON||Object.toJSON||(window.JSON&&(JSON.encode||JSON.stringify)),json_decode=$.evalJSON||(window.JSON&&(JSON.decode||JSON.parse))||function(str){return String(str).evalJSON();},_backend=false,_ttl_timeout,_XMLService={isXML:function(elm){var documentElement=(elm?elm.ownerDocument||elm:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false;},encode:function(xmlNode){if(!this.isXML(xmlNode)){return false;}
try{return new XMLSerializer().serializeToString(xmlNode);}catch(E1){try{return xmlNode.xml;}catch(E2){}}
return false;},decode:function(xmlString){var dom_parser=("DOMParser"in window&&(new DOMParser()).parseFromString)||(window.ActiveXObject&&function(_xmlString){var xml_doc=new ActiveXObject('Microsoft.XMLDOM');xml_doc.async='false';xml_doc.loadXML(_xmlString);return xml_doc;}),resultXML;if(!dom_parser){return false;}
resultXML=dom_parser.call("DOMParser"in window&&(new DOMParser())||window,xmlString,'text/xml');return this.isXML(resultXML)?resultXML:false;}};function _init(){var localStorageReallyWorks=false;if("localStorage"in window){try{window.localStorage.setItem('_tmptest','tmpval');localStorageReallyWorks=true;window.localStorage.removeItem('_tmptest');}catch(BogusQuotaExceededErrorOnIos5){}}
if(localStorageReallyWorks){try{if(window.localStorage){_storage_service=window.localStorage;_backend="localStorage";}}catch(E3){}}
else if("globalStorage"in window){try{if(window.globalStorage){_storage_service=window.globalStorage[window.location.hostname];_backend="globalStorage";}}catch(E4){}}
else{_storage_elm=document.createElement('link');if(_storage_elm.addBehavior){_storage_elm.style.behavior='url(#default#userData)';document.getElementsByTagName('head')[0].appendChild(_storage_elm);_storage_elm.load("jStorage");var data="{}";try{data=_storage_elm.getAttribute("jStorage");}catch(E5){}
_storage_service.jStorage=data;_backend="userDataBehavior";}else{_storage_elm=null;return;}}
_load_storage();_handleTTL();}
function _load_storage(){if(_storage_service.jStorage){try{_storage=json_decode(String(_storage_service.jStorage));}catch(E6){_storage_service.jStorage="{}";}}else{_storage_service.jStorage="{}";}
_storage_size=_storage_service.jStorage?String(_storage_service.jStorage).length:0;}
function _save(){try{_storage_service.jStorage=json_encode(_storage);if(_storage_elm){_storage_elm.setAttribute("jStorage",_storage_service.jStorage);_storage_elm.save("jStorage");}
_storage_size=_storage_service.jStorage?String(_storage_service.jStorage).length:0;}catch(E7){}}
function _checkKey(key){if(!key||(typeof key!="string"&&typeof key!="number")){throw new TypeError('Key name must be string or numeric');}
if(key=="__jstorage_meta"){throw new TypeError('Reserved key name');}
return true;}
function _handleTTL(){var curtime,i,TTL,nextExpire=Infinity,changed=false;clearTimeout(_ttl_timeout);if(!_storage.__jstorage_meta||typeof _storage.__jstorage_meta.TTL!="object"){return;}
curtime=+new Date();TTL=_storage.__jstorage_meta.TTL;for(i in TTL){if(TTL.hasOwnProperty(i)){if(TTL[i]<=curtime){delete TTL[i];delete _storage[i];changed=true;}else if(TTL[i]<nextExpire){nextExpire=TTL[i];}}}
if(nextExpire!=Infinity){_ttl_timeout=setTimeout(_handleTTL,nextExpire-curtime);}
if(changed){_save();}}
$.jStorage={version:"0.1.6.1",set:function(key,value){_checkKey(key);if(_XMLService.isXML(value)){value={_is_xml:true,xml:_XMLService.encode(value)};}else if(typeof value=="function"){value=null;}else if(value&&typeof value=="object"){value=json_decode(json_encode(value));}
_storage[key]=value;_save();return value;},get:function(key,def){_checkKey(key);if(key in _storage){if(_storage[key]&&typeof _storage[key]=="object"&&_storage[key]._is_xml&&_storage[key]._is_xml){return _XMLService.decode(_storage[key].xml);}else{return _storage[key];}}
return typeof(def)=='undefined'?null:def;},deleteKey:function(key){_checkKey(key);if(key in _storage){delete _storage[key];if(_storage.__jstorage_meta&&typeof _storage.__jstorage_meta.TTL=="object"&&key in _storage.__jstorage_meta.TTL){delete _storage.__jstorage_meta.TTL[key];}
_save();return true;}
return false;},setTTL:function(key,ttl){var curtime=+new Date();_checkKey(key);ttl=Number(ttl)||0;if(key in _storage){if(!_storage.__jstorage_meta){_storage.__jstorage_meta={};}
if(!_storage.__jstorage_meta.TTL){_storage.__jstorage_meta.TTL={};}
if(ttl>0){_storage.__jstorage_meta.TTL[key]=curtime+ttl;}else{delete _storage.__jstorage_meta.TTL[key];}
_save();_handleTTL();return true;}
return false;},flush:function(){_storage={};_save();return true;},storageObj:function(){function F(){}
F.prototype=_storage;return new F();},index:function(){var index=[],i;for(i in _storage){if(_storage.hasOwnProperty(i)&&i!="__jstorage_meta"){index.push(i);}}
return index;},storageSize:function(){return _storage_size;},currentBackend:function(){return _backend;},storageAvailable:function(){return!!_backend;},reInit:function(){var new_storage_elm,data;if(_storage_elm&&_storage_elm.addBehavior){new_storage_elm=document.createElement('link');_storage_elm.parentNode.replaceChild(new_storage_elm,_storage_elm);_storage_elm=new_storage_elm;_storage_elm.style.behavior='url(#default#userData)';document.getElementsByTagName('head')[0].appendChild(_storage_elm);_storage_elm.load("jStorage");data="{}";try{data=_storage_elm.getAttribute("jStorage");}catch(E5){}
_storage_service.jStorage=data;_backend="userDataBehavior";}
_load_storage();}};_init();})(window.jQuery||window.$);(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(exports):typeof define==='function'&&define.amd?define(['exports'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.MathLive={}));})(this,(function(exports){'use strict';var MathLive=(()=>{var __defProp=Object.defineProperty;var __defProps=Object.defineProperties;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropDescs=Object.getOwnPropertyDescriptors;var __getOwnPropNames=Object.getOwnPropertyNames;var __getOwnPropSymbols=Object.getOwnPropertySymbols;var __hasOwnProp=Object.prototype.hasOwnProperty;var __propIsEnum=Object.prototype.propertyIsEnumerable;var __defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:true,configurable:true,writable:true,value}):obj[key]=value;var __spreadValues=(a,b)=>{for(var prop in b||(b={}))
if(__hasOwnProp.call(b,prop))
__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)
for(var prop of __getOwnPropSymbols(b)){if(__propIsEnum.call(b,prop))
__defNormalProp(a,prop,b[prop]);}
return a;};var __spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b));var __restKey=(key)=>typeof key==="symbol"?key:key+"";var __objRest=(source,exclude)=>{var target={};for(var prop in source)
if(__hasOwnProp.call(source,prop)&&exclude.indexOf(prop)<0)
target[prop]=source[prop];if(source!=null&&__getOwnPropSymbols)
for(var prop of __getOwnPropSymbols(source)){if(exclude.indexOf(prop)<0&&__propIsEnum.call(source,prop))
target[prop]=source[prop];}
return target;};var __export=(target,all)=>{for(var name in all)
__defProp(target,name,{get:all[name],enumerable:true});};var __copyProps=(to,from,except,desc)=>{if(from&&typeof from==="object"||typeof from==="function"){for(let key of __getOwnPropNames(from))
if(!__hasOwnProp.call(to,key)&&key!==except)
__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});}
return to;};var __toCommonJS=(mod)=>__copyProps(__defProp({},"__esModule",{value:true}),mod);var mathlive_exports={};__export(mathlive_exports,{MathfieldElement:()=>MathfieldElement,_renderMathInElement:()=>_renderMathInElement,convertAsciiMathToLatex:()=>convertAsciiMathToLatex,convertLatexToAsciiMath:()=>convertLatexToAsciiMath,convertLatexToMarkup:()=>convertLatexToMarkup,convertLatexToMathMl:()=>convertLatexToMathMl,convertLatexToSpeakableText:()=>convertLatexToSpeakableText,convertMathJsonToLatex:()=>convertMathJsonToLatex,globalMathLive:()=>globalMathLive,renderMathInDocument:()=>renderMathInDocument,renderMathInElement:()=>renderMathInElement,validateLatex:()=>validateLatex2,version:()=>version});function isArray(x){return Array.isArray(x);}
var STRINGS={"en":{"keyboard.tooltip.symbols":"Symbols","keyboard.tooltip.greek":"Greek Letters","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.alphabetic":"Roman Letters","tooltip.copy to clipboard":"Copy to Clipboard","tooltip.cut to clipboard":"Cut to Clipboard","tooltip.paste from clipboard":"Paste from Clipboard","tooltip.redo":"Redo","tooltip.toggle virtual keyboard":"Toggle Virtual Keyboard","tooltip.menu":"Menu","tooltip.undo":"Undo","menu.borders":"Borders","menu.insert matrix":"Insert Matrix","menu.array.add row above":"Add Row Before","menu.array.add row below":"Add Row After","menu.array.add column after":"Add Column After","menu.array.add column before":"Add Column Before","menu.array.delete row":"Delete Row","menu.array.delete rows":"Delete Selected Rows","menu.array.delete column":"Delete Column","menu.array.delete columns":"Delete Selected Columns","menu.mode":"Mode","menu.mode-math":"Math","menu.mode-text":"Text","menu.mode-latex":"LaTeX","menu.insert":"Insert","menu.insert.abs":"Absolute Value","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"n<sup>th</sup> Root","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"Logarithm base a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"Calculus","menu.insert.derivative":"Derivative","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"n<sup>th</sup> derivative","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"Integral","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"Sum","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"Product","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"Complex Numbers","menu.insert.modulus":"Modulus","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"Argument","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"Real Part","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"Imaginary Part","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"Conjugate","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"Blackboard","tooltip.bold":"Bold","tooltip.italic":"Italic","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligraphic","tooltip.typewriter":"Typewriter","tooltip.roman-upright":"Roman Upright","tooltip.row-by-col":"%@ \xD7 %@","menu.font-style":"Font Style","menu.accent":"Accent","menu.decoration":"Decoration","menu.color":"Color","menu.background-color":"Background","menu.evaluate":"Evaluate","menu.simplify":"Simplify","menu.solve":"Solve","menu.solve-for":"Solve for %@","menu.cut":"Cut","menu.copy":"Copy","menu.copy-as-latex":"Copy as LaTeX","menu.copy-as-ascii-math":"Copy as ASCII Math","menu.copy-as-mathml":"Copy as MathML","menu.paste":"Paste","menu.select-all":"Select All","color.red":"Red","color.orange":"Orange","color.yellow":"Yellow","color.lime":"Lime","color.green":"Green","color.teal":"Teal","color.cyan":"Cyan","color.blue":"Blue","color.indigo":"Indigo","color.purple":"Purple","color.magenta":"Magenta","color.black":"Black","color.dark-grey":"Dark Grey","color.grey":"Grey","color.light-grey":"Light Grey","color.white":"White"},"ar":{"keyboard.tooltip.symbols":"\u062D\u0631\u0641 \u0627\u0648 \u0631\u0645\u0632","keyboard.tooltip.greek":"\u062D\u0631\u0648\u0641 \u064A\u0648\u0646\u0627\u0646\u064A\u0629","keyboard.tooltip.numeric":"\u0627\u0644\u0631\u0642\u0645\u064A\u0629","keyboard.tooltip.alphabetic":"\u0631\u0645\u0648\u0632 \u0627\u0644\u0627\u062D\u0631\u0641 \u0627\u0644\u0631\u0648\u0645\u0627\u0646\u064A\u0629","tooltip.copy to clipboard":"\u0646\u0633\u062E \u0625\u0644\u0649 \u0627\u0644\u062D\u0627\u0641\u0638\u0629","tooltip.cut to clipboard":"\u0642\u0635 \u0625\u0644\u0649 \u0627\u0644\u062D\u0627\u0641\u0638\u0629","tooltip.paste from clipboard":"\u0644\u0635\u0642 \u0645\u0646 \u0627\u0644\u062D\u0627\u0641\u0638\u0629","tooltip.redo":"\u0627\u0644\u0625\u0639\u0627\u062F\u0629","tooltip.toggle virtual keyboard":"\u062A\u0628\u062F\u064A\u0644 \u0644\u0648\u062D\u0629 \u0627\u0644\u0645\u0641\u0627\u062A\u064A\u062D \u0627\u0644\u0625\u0641\u062A\u0631\u0627\u0636\u064A\u0629","tooltip.undo":"\u0625\u0644\u063A\u0627\u0621","menu.insert matrix":"\u0623\u062F\u062E\u0644 \u0627\u0644\u0645\u0635\u0641\u0648\u0641\u0629","menu.borders":"\u0645\u062D\u062F\u062F\u0627\u062A \u0627\u0644\u0645\u0635\u0641\u0648\u0641\u0629","menu.array.add row above":"\u0623\u0636\u0641 \u0635\u0641\u064B\u0627 \u0628\u0639\u062F \u0630\u0644\u0643","menu.array.add row below":"\u0623\u0636\u0641 \u0627\u0644\u0635\u0641 \u0642\u0628\u0644","menu.array.add column after":"\u0623\u0636\u0641 \u0627\u0644\u0639\u0645\u0648\u062F \u0628\u0639\u062F \u0630\u0644\u0643","menu.array.add column before":"\u0623\u0636\u0641 \u0627\u0644\u0639\u0645\u0648\u062F \u0642\u0628\u0644","menu.array.delete row":"\u0627\u062D\u0630\u0641 \u0635\u0641","menu.array.delete rows":"\u062D\u0630\u0641 \u0627\u0644\u0635\u0641\u0648\u0641 \u0627\u0644\u0645\u062D\u062F\u062F\u0629","menu.array.delete column":"\u062D\u0630\u0641 \u0627\u0644\u0639\u0645\u0648\u062F","menu.array.delete columns":"\u062D\u0630\u0641 \u0627\u0644\u0623\u0639\u0645\u062F\u0629 \u0627\u0644\u0645\u062D\u062F\u062F\u0629","menu.mode":"\u0648\u0636\u0639","menu.mode-math":"\u0631\u064A\u0627\u0636\u064A\u0627\u062A","menu.mode-text":"\u0646\u0635","menu.mode-latex":"\u0644\u0627\u062A\u0643\u0633","tooltip.blackboard":"\u0633\u0628\u0648\u0631\u0629","tooltip.bold":"\u0639\u0631\u064A\u0636","tooltip.italic":"\u0645\u0627\u0626\u0644","tooltip.fraktur":"\u0641\u0631\u0627\u0643\u062A\u0648\u0631","tooltip.script":"\u0633\u0643\u0631\u064A\u0628\u062A","tooltip.caligraphic":"\u0643\u0627\u0644\u064A\u062C\u0631\u0627\u0641\u064A\u0643","tooltip.typewriter":"\u0622\u0644\u0629 \u0643\u0627\u062A\u0628\u0629","tooltip.roman-upright":"\u0631\u0648\u0645\u0627\u0646\u064A \u0645\u0633\u062A\u0642\u064A\u0645","tooltip.row-by-col":"%@ \xD7 %@","menu.font-style":"\u0646\u0645\u0637 \u0627\u0644\u062E\u0637","menu.accent":"\u062A\u0634\u0643\u064A\u0644","menu.decoration":"\u0632\u062E\u0631\u0641\u0629","menu.color":"\u0644\u0648\u0646","menu.background-color":"\u0627\u0644\u062E\u0644\u0641\u064A\u0629","menu.evaluate":"\u062A\u0642\u064A\u064A\u0645","menu.simplify":"\u062A\u0628\u0633\u064A\u0637","menu.solve":"\u062D\u0644","menu.solve-for":"\u062D\u0644 \u0644\u0640 %@","menu.cut":"\u0642\u0635","menu.copy":"\u0646\u0633\u062E","menu.copy-as-latex":"\u0646\u0633\u062E \u0643\u0640 LaTeX","menu.copy-as-ascii-math":"\u0646\u0633\u062E \u0643\u0640 ASCII Math","menu.copy-as-mathml":"\u0646\u0633\u062E \u0643\u0640 MathML","menu.paste":"\u0644\u0635\u0642","menu.select-all":"\u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0643\u0644","color.red":"\u0623\u062D\u0645\u0631","color.orange":"\u0628\u0631\u062A\u0642\u0627\u0644\u064A","color.yellow":"\u0623\u0635\u0641\u0631","color.lime":"\u0644\u064A\u0645\u0648\u0646\u064A","color.green":"\u0623\u062E\u0636\u0631","color.teal":"\u0633\u0645\u0627\u0648\u064A","color.cyan":"\u0633\u0645\u0627\u0648\u064A \u0641\u0627\u062A\u062D","color.blue":"\u0623\u0632\u0631\u0642","color.indigo":"\u0646\u064A\u0644\u064A","color.purple":"\u0628\u0646\u0641\u0633\u062C\u064A","color.magenta":"\u0623\u0631\u062C\u0648\u0627\u0646\u064A","color.black":"\u0623\u0633\u0648\u062F","color.dark-grey":"\u0631\u0645\u0627\u062F\u064A \u063A\u0627\u0645\u0642","color.grey":"\u0631\u0645\u0627\u062F\u064A","color.light-grey":"\u0631\u0645\u0627\u062F\u064A \u0641\u0627\u062A\u062D","color.white":"\u0623\u0628\u064A\u0636"},"de":{"keyboard.tooltip.symbols":"Symbole","keyboard.tooltip.greek":"Griechische Buchstaben","keyboard.tooltip.numeric":"Numerisch","keyboard.tooltip.alphabetic":"R\xF6mische Buchstaben","tooltip.copy to clipboard":"In die Zwischenablage kopieren","tooltip.redo":"Wiederholen","tooltip.toggle virtual keyboard":"Virtuelle Tastatur umschalten","tooltip.undo":"Widerrufen","menu.insert matrix":"Matrix einf\xFCgen","menu.borders":"Matrixtrennzeichen","menu.array.add row above":"Zeile hinzuf\xFCgen nach","menu.array.add row below":"Zeile hinzuf\xFCgen vor","menu.array.add column after":"Spalte hinzuf\xFCgen nach","menu.array.add column before":"Spalte hinzuf\xFCgen vor","menu.array.delete row":"Zeile l\xF6schen","menu.array.delete rows":"Ausgew\xE4hlte Zeilen l\xF6schen","menu.array.delete column":"Spalte l\xF6schen","menu.array.delete columns":"Ausgew\xE4hlte Spalten l\xF6schen","menu.mode":"Modus","menu.mode-math":"Mathematik","menu.mode-text":"Text","menu.mode-latex":"LaTeX","tooltip.blackboard":"Tafel","tooltip.bold":"Fett","tooltip.italic":"Kursiv","tooltip.fraktur":"Fraktur","tooltip.script":"Skript","tooltip.caligraphic":"Kalligraphie","tooltip.typewriter":"Schreibmaschine","tooltip.roman-upright":"R\xF6misch aufrecht","tooltip.row-by-col":"%@ \xD7 %@","menu.font-style":"Schriftstil","menu.accent":"Akzent","menu.decoration":"Dekoration","menu.color":"Farbe","menu.background-color":"Hintergrund","menu.evaluate":"Auswerten","menu.simplify":"Vereinfachen","menu.solve":"L\xF6sen","menu.solve-for":"L\xF6sen f\xFCr %@","menu.cut":"Ausschneiden","menu.copy":"Kopieren","menu.copy-as-latex":"Als LaTeX kopieren","menu.copy-as-ascii-math":"Als ASCII Math kopieren","menu.copy-as-mathml":"Als MathML kopieren","menu.paste":"Einf\xFCgen","menu.select-all":"Alles ausw\xE4hlen","color.red":"Rot","color.orange":"Orange","color.yellow":"Gelb","color.lime":"Limette","color.green":"Gr\xFCn","color.teal":"Blaugr\xFCn","color.cyan":"Cyan","color.blue":"Blau","color.indigo":"Indigo","color.purple":"Lila","color.magenta":"Magenta","color.black":"Schwarz","color.dark-grey":"Dunkelgrau","color.grey":"Grau","color.light-grey":"Hellgrau","color.white":"Wei\xDF"},"el":{"keyboard.tooltip.symbols":"\u03C3\u03CD\u03BC\u03B2\u03BF\u03BB\u03B1","keyboard.tooltip.greek":"\u03B5\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC \u03B3\u03C1\u03AC\u03BC\u03BC\u03B1\u03C4\u03B1","keyboard.tooltip.numeric":"\u0391\u03C1\u03B9\u03B8\u03BC\u03B7\u03C4\u03B9\u03BA\u03CC\u03C2","keyboard.tooltip.alphabetic":"\u03A1\u03C9\u03BC\u03B1\u03CA\u03BA\u03AC \u03B3\u03C1\u03AC\u03BC\u03BC\u03B1\u03C4\u03B1","tooltip.copy to clipboard":"\u0391\u03BD\u03C4\u03B9\u03B3\u03C1\u03B1\u03C6\u03AE \u03C3\u03C4\u03BF \u03C0\u03C1\u03CC\u03C7\u03B5\u03B9\u03C1\u03BF","tooltip.redo":"\u039E\u03B1\u03BD\u03B1\u03BA\u03AC\u03BD\u03C9","tooltip.toggle virtual keyboard":"\u0395\u03BD\u03B1\u03BB\u03BB\u03B1\u03B3\u03AE \u03B5\u03B9\u03BA\u03BF\u03BD\u03B9\u03BA\u03BF\u03CD \u03C0\u03BB\u03B7\u03BA\u03C4\u03C1\u03BF\u03BB\u03BF\u03B3\u03AF\u03BF\u03C5","tooltip.undo":"\u039E\u03B5\u03BA\u03AC\u03BD\u03C9","menu.insert matrix":"\u0395\u03B9\u03C3\u03B1\u03B3\u03C9\u03B3\u03AE \u03BC\u03AE\u03C4\u03C1\u03B1","menu.borders":"\u039F\u03C1\u03B9\u03BF\u03B8\u03AD\u03C4\u03B5\u03C2 \u03BC\u03AE\u03C4\u03C1\u03B1","menu.array.add row above":"\u03A0\u03C1\u03BF\u03C3\u03B8\u03AE\u03BA\u03B7 \u03C3\u03B5\u03B9\u03C1\u03AC\u03C2 \u03BC\u03B5\u03C4\u03AC","menu.array.add row below":"\u03A0\u03C1\u03BF\u03C3\u03B8\u03AE\u03BA\u03B7 \u03C3\u03B5\u03B9\u03C1\u03AC\u03C2 \u03C0\u03C1\u03B9\u03BD","menu.array.add column after":"\u03A0\u03C1\u03BF\u03C3\u03B8\u03AE\u03BA\u03B7 \u03C3\u03C4\u03AE\u03BB\u03B7\u03C2 \u03BC\u03B5\u03C4\u03AC","menu.array.add column before":"\u03A0\u03C1\u03BF\u03C3\u03B8\u03AE\u03BA\u03B7 \u03C3\u03C4\u03AE\u03BB\u03B7\u03C2 \u03C0\u03C1\u03B9\u03BD","menu.array.delete row":"\u0394\u03B9\u03B1\u03B3\u03C1\u03B1\u03C6\u03AE \u03C3\u03B5\u03B9\u03C1\u03AC\u03C2","menu.array.delete rows":"\u0394\u03B9\u03B1\u03B3\u03C1\u03B1\u03C6\u03AE \u03B5\u03C0\u03B9\u03BB\u03B5\u03B3\u03BC\u03AD\u03BD\u03C9\u03BD \u03C3\u03B5\u03B9\u03C1\u03CE\u03BD","menu.array.delete column":"\u0394\u03B9\u03B1\u03B3\u03C1\u03B1\u03C6\u03AE \u03C3\u03C4\u03AE\u03BB\u03B7\u03C2","menu.array.delete columns":"\u0394\u03B9\u03B1\u03B3\u03C1\u03B1\u03C6\u03AE \u03B5\u03C0\u03B9\u03BB\u03B5\u03B3\u03BC\u03AD\u03BD\u03C9\u03BD \u03C3\u03C4\u03B7\u03BB\u03CE\u03BD","menu.mode":"\u039B\u03B5\u03B9\u03C4\u03BF\u03C5\u03C1\u03B3\u03AF\u03B1","menu.mode-math":"\u039C\u03B1\u03B8\u03B7\u03BC\u03B1\u03C4\u03B9\u03BA\u03AC","menu.mode-text":"\u039A\u03B5\u03AF\u03BC\u03B5\u03BD\u03BF","menu.mode-latex":"LaTeX","tooltip.blackboard":"\u03A0\u03AF\u03BD\u03B1\u03BA\u03B1\u03C2","tooltip.bold":"\u0388\u03BD\u03C4\u03BF\u03BD\u03B7","tooltip.italic":"\u03A0\u03BB\u03AC\u03B3\u03B9\u03B1","tooltip.fraktur":"\u03A6\u03C1\u03AC\u03BA\u03C4\u03BF\u03C5\u03C1","tooltip.script":"\u03A3\u03B5\u03BD\u03AC\u03C1\u03B9\u03BF","tooltip.caligraphic":"\u039A\u03B1\u03BB\u03BB\u03B9\u03B3\u03C1\u03B1\u03C6\u03B9\u03BA\u03AE","tooltip.typewriter":"\u039C\u03B7\u03C7\u03B1\u03BD\u03AE \u03B3\u03C1\u03B1\u03C6\u03AE\u03C2","tooltip.roman-upright":"\u03A1\u03C9\u03BC\u03B1\u03CA\u03BA\u03CC \u039A\u03B1\u03C4\u03B1\u03BA\u03CC\u03C1\u03C5\u03C6\u03BF","tooltip.row-by-col":"%@ \xD7 %@","menu.font-style":"\u03A3\u03C4\u03C5\u03BB \u03B3\u03C1\u03B1\u03BC\u03BC\u03B1\u03C4\u03BF\u03C3\u03B5\u03B9\u03C1\u03AC\u03C2","menu.accent":"\u03A4\u03CC\u03BD\u03BF\u03C2","menu.decoration":"\u0394\u03B9\u03B1\u03BA\u03CC\u03C3\u03BC\u03B7\u03C3\u03B7","menu.color":"\u03A7\u03C1\u03CE\u03BC\u03B1","menu.background-color":"\u03A7\u03C1\u03CE\u03BC\u03B1 \u03C6\u03CC\u03BD\u03C4\u03BF\u03C5","menu.evaluate":"\u0391\u03BE\u03B9\u03BF\u03BB\u03CC\u03B3\u03B7\u03C3\u03B7","menu.simplify":"\u0391\u03C0\u03BB\u03BF\u03C0\u03BF\u03AF\u03B7\u03C3\u03B7","menu.solve":"\u039B\u03CD\u03C3\u03B7","menu.solve-for":"\u039B\u03CD\u03C3\u03B7 \u03B3\u03B9\u03B1 %@","menu.cut":"\u0391\u03C0\u03BF\u03BA\u03BF\u03C0\u03AE","menu.copy":"\u0391\u03BD\u03C4\u03B9\u03B3\u03C1\u03B1\u03C6\u03AE","menu.copy-as-latex":"\u0391\u03BD\u03C4\u03B9\u03B3\u03C1\u03B1\u03C6\u03AE \u03C9\u03C2 LaTeX","menu.copy-as-ascii-math":"\u0391\u03BD\u03C4\u03B9\u03B3\u03C1\u03B1\u03C6\u03AE \u03C9\u03C2 ASCII Math","menu.copy-as-mathml":"\u0391\u03BD\u03C4\u03B9\u03B3\u03C1\u03B1\u03C6\u03AE \u03C9\u03C2 MathML","menu.paste":"\u0395\u03C0\u03B9\u03BA\u03CC\u03BB\u03BB\u03B7\u03C3\u03B7","menu.select-all":"\u0395\u03C0\u03B9\u03BB\u03BF\u03B3\u03AE \u03CC\u03BB\u03C9\u03BD","color.red":"\u039A\u03CC\u03BA\u03BA\u03B9\u03BD\u03BF","color.orange":"\u03A0\u03BF\u03C1\u03C4\u03BF\u03BA\u03B1\u03BB\u03AF","color.yellow":"\u039A\u03AF\u03C4\u03C1\u03B9\u03BD\u03BF","color.lime":"\u039B\u03B1\u03C7\u03B1\u03BD\u03AF","color.green":"\u03A0\u03C1\u03AC\u03C3\u03B9\u03BD\u03BF","color.teal":"\u039A\u03C5\u03B1\u03BD\u03CC","color.cyan":"\u0393\u03B1\u03BB\u03AC\u03B6\u03B9\u03BF","color.blue":"\u039C\u03C0\u03BB\u03B5","color.indigo":"\u0399\u03BD\u03B4\u03B9\u03BA\u03CC","color.purple":"\u039C\u03C9\u03B2","color.magenta":"\u039C\u03B1\u03C4\u03B6\u03AD\u03BD\u03C4\u03B1","color.black":"\u039C\u03B1\u03CD\u03C1\u03BF","color.dark-grey":"\u03A3\u03BA\u03BF\u03CD\u03C1\u03BF \u0393\u03BA\u03C1\u03B9","color.grey":"\u0393\u03BA\u03C1\u03B9","color.light-grey":"\u0391\u03BD\u03BF\u03B9\u03C7\u03C4\u03CC \u0393\u03BA\u03C1\u03B9","color.white":"\u039B\u03B5\u03C5\u03BA\u03CC"},"es":{"keyboard.tooltip.symbols":"S\xEDmbolos","keyboard.tooltip.greek":"Letras griegas","keyboard.tooltip.numeric":"Num\xE9rico","keyboard.tooltip.alphabetic":"Letras romanas","tooltip.copy to clipboard":"Copiar al portapapeles","tooltip.redo":"Rehacer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Deshacer","menu.insert matrix":"A\xF1adir Matriz","menu.borders":"Delimitadores de Matriz","menu.array.add row above":"A\xF1adir L\xEDnea Antes","menu.array.add row below":"A\xF1adir L\xEDnea Despues","menu.array.add column after":"A\xF1adir Columna Despues","menu.array.add column before":"A\xF1adir Columna Antes","menu.array.delete row":"Borrar L\xEDnea","menu.array.delete rows":"Borrar L\xEDneas Seleccionadas","menu.array.delete column":"Borrar Columna","menu.array.delete columns":"Borrar Columnas Seleccionadas","menu.mode":"Modo","menu.mode-math":"Matem\xE1ticas","menu.mode-text":"Texto","menu.mode-latex":"LaTeX","tooltip.blackboard":"Pizarra","tooltip.bold":"Negrita","tooltip.italic":"Cursiva","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligr\xE1fico","tooltip.typewriter":"M\xE1quina de escribir","tooltip.roman-upright":"Romano Vertical","tooltip.row-by-col":"%@ \xD7 %@","menu.font-style":"Estilo de fuente","menu.accent":"Acento","menu.decoration":"Decoraci\xF3n","menu.color":"Color","menu.background-color":"Fondo","menu.evaluate":"Evaluar","menu.simplify":"Simplificar","menu.solve":"Resolver","menu.solve-for":"Resolver para %@","menu.cut":"Cortar","menu.copy":"Copiar","menu.copy-as-latex":"Copiar como LaTeX","menu.copy-as-ascii-math":"Copiar como ASCII Math","menu.copy-as-mathml":"Copiar como MathML","menu.paste":"Pegar","menu.select-all":"Seleccionar todo","color.red":"Rojo","color.orange":"Naranja","color.yellow":"Amarillo","color.lime":"Lima","color.green":"Verde","color.teal":"Verde azulado","color.cyan":"Cian","color.blue":"Azul","color.indigo":"\xCDndigo","color.purple":"Morado","color.magenta":"Magenta","color.black":"Negro","color.dark-grey":"Gris oscuro","color.grey":"Gris","color.light-grey":"Gris claro","color.white":"Blanco"},"fr":{"keyboard.tooltip.symbols":"Symboles","keyboard.tooltip.greek":"Lettres grecques","keyboard.tooltip.numeric":"Num\xE9rique","keyboard.tooltip.alphabetic":"Lettres romaines","tooltip.menu":"Menu","tooltip.copy to clipboard":"Copier dans le presse-papiers","tooltip.redo":"R\xE9tablir","tooltip.toggle virtual keyboard":"Afficher/Masquer le clavier virtuel","tooltip.undo":"Annuler","menu.insert matrix":"Ins\xE9rer une Matrice","menu.borders":"Bords","menu.array.add row above":"Ajouter une Ligne Avant","menu.array.add row below":"Ajouter une Ligne Apr\xE8s","menu.array.add column before":"Ajouter une Colonne Avant","menu.array.add column after":"Ajouter une Colonne Apr\xE8s","menu.array.delete row":"Enlever une Ligne","menu.array.delete rows":"Enlever les Lignes S\xE9lection\xE9es","menu.array.delete column":"Enlever une Colone","menu.array.delete columns":"Enlever les Colonnes S\xE9lection\xE9es","menu.mode":"Mode","menu.mode-math":"Math","menu.mode-text":"Text","menu.mode-latex":"LaTeX","tooltip.blackboard":"Tableau noir","tooltip.bold":"Gras","tooltip.italic":"Italique","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Calligraphique","tooltip.typewriter":"Machine \xE0 \xE9crire","tooltip.roman-upright":"Romain droit","tooltip.row-by-col":"%@ \xD7 %@","menu.font-style":"Style de police","menu.accent":"Accent","menu.decoration":"D\xE9coration","menu.color":"Couleur","menu.background-color":"Arri\xE8re-plan","menu.evaluate":"\xC9valuer","menu.simplify":"Simplifier","menu.solve":"R\xE9soudre","menu.solve-for":"R\xE9soudre pour %@","menu.cut":"Couper","menu.copy":"Copier","menu.copy-as-latex":"Copier en LaTeX","menu.copy-as-ascii-math":"Copier en ASCII Math","menu.copy-as-mathml":"Copier en MathML","menu.paste":"Coller","menu.select-all":"S\xE9lectionner tout","color.red":"Rouge","color.orange":"Orange","color.yellow":"Jaune","color.lime":"Citron vert","color.green":"Vert","color.teal":"Turquoise","color.cyan":"Cyan","color.blue":"Bleu","color.indigo":"Indigo","color.purple":"Violet","color.magenta":"Magenta","color.black":"Noir","color.dark-grey":"Gris fonc\xE9","color.grey":"Gris","color.light-grey":"Gris clair","color.white":"Blanc"},"he":{"keyboard.tooltip.symbols":"\u05E1\u05DE\u05DC\u05D9\u05DD","keyboard.tooltip.greek":"\u05D0\u05D5\u05EA\u05D9\u05D5\u05EA \u05D9\u05D5\u05D5\u05E0\u05D9\u05D5\u05EA","keyboard.tooltip.numeric":"\u05DE\u05E1\u05E4\u05E8\u05D9","keyboard.tooltip.alphabetic":"\u05DE\u05DB\u05EA\u05D1\u05D9\u05DD \u05E8\u05D5\u05DE\u05D9\u05D9\u05DD","tooltip.copy to clipboard":"\u05D4\u05E2\u05EA\u05E7 \u05DC\u05DC\u05D5\u05D7","tooltip.redo":"\u05DC\u05B7\u05E2\u05B2\u05E9\u05C2\u05D5\u05B9\u05EA \u05E9\u05C1\u05D5\u05BC\u05D1","tooltip.toggle virtual keyboard":"\u05D4\u05D7\u05DC\u05E3 \u05D0\u05EA \u05D4\u05DE\u05E7\u05DC\u05D3\u05EA \u05D4\u05D5\u05D5\u05D9\u05E8\u05D8\u05D5\u05D0\u05DC\u05D9\u05EA","tooltip.undo":"\u05DC\u05D1\u05D8\u05DC","menu.insert matrix":"\u05D4\u05DB\u05E0\u05E1 \u05DE\u05D8\u05E8\u05D9\u05E7\u05E1","menu.borders":"\u05DE\u05E4\u05E8\u05D9\u05D3\u05D9 \u05DE\u05D8\u05E8\u05D9\u05E7\u05E1","menu.array.add row above":"\u05D4\u05D5\u05E1\u05E3 \u05E9\u05D5\u05E8\u05D4 \u05D0\u05D7\u05E8\u05D9","menu.array.add row below":"\u05D4\u05D5\u05E1\u05E3 \u05E9\u05D5\u05E8\u05D4 \u05DC\u05E4\u05E0\u05D9","menu.array.add column after":"\u05D4\u05D5\u05E1\u05E3 \u05E2\u05DE\u05D5\u05D3\u05D4 \u05D0\u05D7\u05E8\u05D9","menu.array.add column before":"\u05D4\u05D5\u05E1\u05E3 \u05E2\u05DE\u05D5\u05D3\u05D4 \u05DC\u05E4\u05E0\u05D9","menu.array.delete row":"\u05DE\u05D7\u05E7 \u05E9\u05D5\u05E8\u05D4","menu.array.delete rows":"\u05DE\u05D7\u05E7 \u05E9\u05D5\u05E8\u05D5\u05EA \u05E9\u05E0\u05D1\u05D7\u05E8\u05D5","menu.array.delete column":"\u05DE\u05D7\u05E7 \u05E2\u05DE\u05D5\u05D3\u05D4","menu.array.delete columns":"\u05DE\u05D7\u05E7 \u05E2\u05DE\u05D5\u05D3\u05D5\u05EA \u05E9\u05E0\u05D1\u05D7\u05E8\u05D5","menu.mode":"\u05DE\u05E6\u05D1","menu.mode-math":"\u05DE\u05EA\u05DE\u05D8\u05D9\u05E7\u05D4","menu.mode-text":"\u05D8\u05E7\u05E1\u05D8","menu.mode-latex":"LaTeX","tooltip.blackboard":"\u05DC\u05D5\u05D7 \u05E9\u05D7\u05D5\u05E8","tooltip.bold":"\u05DE\u05D5\u05D3\u05D2\u05E9","tooltip.italic":"\u05E0\u05D8\u05D5\u05D9","tooltip.fraktur":"\u05E4\u05E8\u05E7\u05D8\u05D5\u05E8","tooltip.script":"\u05DB\u05EA\u05D1","tooltip.caligraphic":"\u05E7\u05DC\u05D9\u05D2\u05E8\u05E4\u05D9","tooltip.typewriter":"\u05DE\u05DB\u05D5\u05E0\u05EA \u05DB\u05EA\u05D9\u05D1\u05D4","tooltip.roman-upright":"\u05E8\u05D5\u05DE\u05D9 \u05D9\u05E9\u05E8","tooltip.row-by-col":"%@ \xD7 %@","menu.font-style":"\u05E1\u05D2\u05E0\u05D5\u05DF \u05D2\u05D5\u05E4\u05DF","menu.accent":"\u05E6\u05DC\u05D9\u05DC","menu.decoration":"\u05E7\u05D9\u05E9\u05D5\u05D8","menu.color":"\u05E6\u05D1\u05E2","menu.background-color":"\u05E8\u05E7\u05E2","menu.evaluate":"\u05D7\u05E9\u05D1","menu.simplify":"\u05E4\u05E9\u05D8","menu.solve":"\u05E4\u05EA\u05D5\u05E8","menu.solve-for":"\u05E4\u05EA\u05D5\u05E8 \u05E2\u05D1\u05D5\u05E8 %@","menu.cut":"\u05D2\u05D6\u05D5\u05E8","menu.copy":"\u05D4\u05E2\u05EA\u05E7","menu.copy-as-latex":"\u05D4\u05E2\u05EA\u05E7 \u05DB\u05BELaTeX","menu.copy-as-ascii-math":"\u05D4\u05E2\u05EA\u05E7 \u05DB\u05BEASCII Math","menu.copy-as-mathml":"\u05D4\u05E2\u05EA\u05E7 \u05DB\u05BEMathML","menu.paste":"\u05D4\u05D3\u05D1\u05E7","menu.select-all":"\u05D1\u05D7\u05E8 \u05D4\u05DB\u05DC","color.red":"\u05D0\u05D3\u05D5\u05DD","color.orange":"\u05DB\u05EA\u05D5\u05DD","color.yellow":"\u05E6\u05D4\u05D5\u05D1","color.lime":"\u05D9\u05E8\u05D5\u05E7 \u05DC\u05D9\u05D9\u05DD","color.green":"\u05D9\u05E8\u05D5\u05E7","color.teal":"\u05D8\u05D9\u05DC","color.cyan":"\u05E6\u05D9\u05D0\u05DF","color.blue":"\u05DB\u05D7\u05D5\u05DC","color.indigo":"\u05D0\u05D9\u05E0\u05D3\u05D9\u05D2\u05D5","color.purple":"\u05E1\u05D2\u05D5\u05DC","color.magenta":"\u05DE\u05D2\u05E0\u05D8\u05D4","color.black":"\u05E9\u05D7\u05D5\u05E8","color.dark-grey":"\u05D0\u05E4\u05D5\u05E8 \u05DB\u05D4\u05D4","color.grey":"\u05D0\u05E4\u05D5\u05E8","color.light-grey":"\u05D0\u05E4\u05D5\u05E8 \u05D1\u05D4\u05D9\u05E8","color.white":"\u05DC\u05D1\u05DF"},"it":{"keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Lettere greche","keyboard.tooltip.numeric":"Numerico","keyboard.tooltip.alphabetic":"Lettere romane","tooltip.copy to clipboard":"Copia negli appunti","tooltip.redo":"Rifare","tooltip.toggle virtual keyboard":"Attiva / disattiva la tastiera virtuale","tooltip.undo":"Disfare","menu.insert matrix":"Inserisci una Matrice","menu.borders":"Delimitatori di Matrice","menu.array.add row above":"Aggiungi una Riga Prima","menu.array.add row below":"Aggiungi una Riga Dopo","menu.array.add column before":"Aggiungi una Colonna Prima","menu.array.add column after":"Aggiungi una Colonna Dopo","menu.array.delete row":"Rimuovi una Riga","menu.array.delete rows":"Rimuovi le Righe Selezionate","menu.array.delete column":"Rimuovi una Colonna","menu.array.delete columns":"Rimuovi le Colonne Selezionate","menu.mode":"Modalit\xE0","menu.mode-math":"Matematica","menu.mode-text":"Testo","menu.mode-latex":"LaTeX","tooltip.blackboard":"Lavagna","tooltip.bold":"Grassetto","tooltip.italic":"Corsivo","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligrafico","tooltip.typewriter":"Macchina da scrivere","tooltip.roman-upright":"Romano dritto","tooltip.row-by-col":"%@ \xD7 %@","menu.font-style":"Stile del carattere","menu.accent":"Accento","menu.decoration":"Decorazione","menu.color":"Colore","menu.background-color":"Sfondo","menu.evaluate":"Valuta","menu.simplify":"Semplifica","menu.solve":"Risolvi","menu.solve-for":"Risolvi per %@","menu.cut":"Taglia","menu.copy":"Copia","menu.copy-as-latex":"Copia come LaTeX","menu.copy-as-ascii-math":"Copia come ASCII Math","menu.copy-as-mathml":"Copia come MathML","menu.paste":"Incolla","menu.select-all":"Seleziona tutto","color.red":"Rosso","color.orange":"Arancione","color.yellow":"Giallo","color.lime":"Lime","color.green":"Verde","color.teal":"Verde acqua","color.cyan":"Ciano","color.blue":"Blu","color.indigo":"Indaco","color.purple":"Viola","color.magenta":"Magenta","color.black":"Nero","color.dark-grey":"Grigio scuro","color.grey":"Grigio","color.light-grey":"Grigio chiaro","color.white":"Bianco"},"ja":{"keyboard.tooltip.symbols":"\u30B7\u30F3\u30DC\u30EB","keyboard.tooltip.greek":"\u30AE\u30EA\u30B7\u30E3\u6587\u5B57","keyboard.tooltip.numeric":"\u6570\u5024","keyboard.tooltip.alphabetic":"\u30ED\u30FC\u30DE\u5B57","tooltip.menu":"\u30E1\u30CB\u30E5\u30FC","tooltip.copy to clipboard":"\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30B3\u30D4\u30FC","tooltip.redo":"\u3084\u308A\u76F4\u3057","tooltip.toggle virtual keyboard":"\u4EEE\u60F3\u30AD\u30FC\u30DC\u30FC\u30C9\u306E\u5207\u308A\u66FF\u3048","tooltip.undo":"\u5143\u306B\u623B\u3059","menu.insert matrix":"\u30DE\u30C8\u30EA\u30C3\u30AF\u30B9\u3092\u633F\u5165","menu.borders":"\u884C\u5217\u533A\u5207\u308A\u6587\u5B57","menu.array.add row above":"\u5F8C\u306B\u884C\u3092\u8FFD\u52A0","menu.array.add row below":"\u524D\u306B\u884C\u3092\u8FFD\u52A0","menu.array.add column after":"\u5F8C\u306B\u5217\u3092\u8FFD\u52A0","menu.array.add column before":"\u524D\u306B\u5217\u3092\u8FFD\u52A0","menu.array.delete row":"\u884C\u3092\u524A\u9664","menu.array.delete rows":"\u9078\u629E\u3057\u305F\u884C\u3092\u524A\u9664\u3059\u308B","menu.array.delete column":"\u5217\u3092\u524A\u9664","menu.array.delete columns":"\u9078\u629E\u3057\u305F\u5217\u3092\u524A\u9664\u3059\u308B","menu.mode":"\u30E2\u30FC\u30C9","menu.mode-math":"\u6570\u5F0F","menu.mode-text":"\u30C6\u30AD\u30B9\u30C8","menu.mode-latex":"LaTeX","tooltip.blackboard":"\u9ED2\u677F","tooltip.bold":"\u592A\u5B57","tooltip.italic":"\u30A4\u30BF\u30EA\u30C3\u30AF","tooltip.fraktur":"\u30D5\u30E9\u30AF\u30C8\u30A5\u30FC\u30EB","tooltip.script":"\u30B9\u30AF\u30EA\u30D7\u30C8","tooltip.caligraphic":"\u30AB\u30EA\u30B0\u30E9\u30D5\u30A3\u30C3\u30AF","tooltip.typewriter":"\u30BF\u30A4\u30D7\u30E9\u30A4\u30BF\u30FC","tooltip.roman-upright":"\u30ED\u30FC\u30DE\u76F4\u7ACB","tooltip.row-by-col":"%@ \xD7 %@","menu.font-style":"\u30D5\u30A9\u30F3\u30C8\u30B9\u30BF\u30A4\u30EB","menu.accent":"\u30A2\u30AF\u30BB\u30F3\u30C8","menu.decoration":"\u88C5\u98FE","menu.color":"\u8272","menu.background-color":"\u80CC\u666F","menu.evaluate":"\u8A55\u4FA1","menu.simplify":"\u7C21\u7565\u5316","menu.solve":"\u89E3\u304F","menu.solve-for":"%@ \u3092\u89E3\u304F","menu.cut":"\u5207\u308A\u53D6\u308A","menu.copy":"\u30B3\u30D4\u30FC","menu.copy-as-latex":"LaTeX\u3068\u3057\u3066\u30B3\u30D4\u30FC","menu.copy-as-ascii-math":"ASCII Math\u3068\u3057\u3066\u30B3\u30D4\u30FC","menu.copy-as-mathml":"MathML\u3068\u3057\u3066\u30B3\u30D4\u30FC","menu.paste":"\u8CBC\u308A\u4ED8\u3051","menu.select-all":"\u3059\u3079\u3066\u9078\u629E","color.red":"\u8D64","color.orange":"\u30AA\u30EC\u30F3\u30B8","color.yellow":"\u9EC4\u8272","color.lime":"\u30E9\u30A4\u30E0","color.green":"\u7DD1","color.teal":"\u30C6\u30A3\u30FC\u30EB","color.cyan":"\u30B7\u30A2\u30F3","color.blue":"\u9752","color.indigo":"\u30A4\u30F3\u30C7\u30A3\u30B4","color.purple":"\u7D2B","color.magenta":"\u30DE\u30BC\u30F3\u30BF","color.black":"\u9ED2","color.dark-grey":"\u6FC3\u3044\u30B0\u30EC\u30FC","color.grey":"\u30B0\u30EC\u30FC","color.light-grey":"\u8584\u3044\u30B0\u30EC\u30FC","color.white":"\u767D"},"ko":{"keyboard.tooltip.symbols":"\uAE30\uD638","keyboard.tooltip.greek":"\uADF8\uB9AC\uC2A4 \uBB38\uC790","keyboard.tooltip.numeric":"\uC22B\uC790","keyboard.tooltip.alphabetic":"\uB85C\uB9C8 \uBB38\uC790","tooltip.copy to clipboard":"\uD074\uB9BD \uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC","tooltip.redo":"\uB2E4\uC2DC \uD558\uB2E4","tooltip.toggle virtual keyboard":"\uAC00\uC0C1 \uD0A4\uBCF4\uB4DC \uC804\uD658","tooltip.undo":"\uC2E4\uD589 \uCDE8\uC18C","menu.insert matrix":"\uB9E4\uD2B8\uB9AD\uC2A4 \uC0BD\uC785","menu.borders":"\uD589\uB82C \uAD6C\uBD84 \uAE30\uD638","menu.array.add row above":"\uB4A4\uC5D0 \uD589 \uCD94\uAC00","menu.array.add row below":"\uC55E\uC5D0 \uD589 \uCD94\uAC00","menu.array.add column after":"\uB4A4\uC5D0 \uC5F4 \uCD94\uAC00","menu.array.add column before":"\uC55E\uC5D0 \uC5F4 \uCD94\uAC00","menu.array.delete row":"\uD589 \uC0AD\uC81C","menu.array.delete rows":"\uC120\uD0DD\uD55C \uD589 \uC0AD\uC81C","menu.array.delete column":"\uC5F4 \uC0AD\uC81C","menu.array.delete columns":"\uC120\uD0DD\uD55C \uC5F4 \uC0AD\uC81C","menu.mode":"\u30E2\u30FC\u30C9","menu.mode-math":"\u6570\u5F0F","menu.mode-text":"\u30C6\u30AD\u30B9\u30C8","menu.mode-latex":"LaTeX","tooltip.blackboard":"\uCE60\uD310","tooltip.bold":"\uAD75\uAC8C","tooltip.italic":"\uC774\uD0E4\uB9AD","tooltip.fraktur":"\uD504\uB799\uD22C\uC5B4","tooltip.script":"\uC2A4\uD06C\uB9BD\uD2B8","tooltip.caligraphic":"\uCE98\uB9AC\uADF8\uB798\uD53D","tooltip.typewriter":"\uD0C0\uC790\uAE30","tooltip.roman-upright":"\uB85C\uB9C8 \uC9C1\uB9BD","tooltip.row-by-col":"%@ \xD7 %@","menu.font-style":"\uAE00\uAF34 \uC2A4\uD0C0\uC77C","menu.accent":"\uC545\uC13C\uD2B8","menu.decoration":"\uC7A5\uC2DD","menu.color":"\uC0C9\uC0C1","menu.background-color":"\uBC30\uACBD","menu.evaluate":"\uD3C9\uAC00","menu.simplify":"\uAC04\uC18C\uD654","menu.solve":"\uD574\uACB0","menu.solve-for":"%@\uC5D0 \uB300\uD574 \uD574\uACB0","menu.cut":"\uC798\uB77C\uB0B4\uAE30","menu.copy":"\uBCF5\uC0AC","menu.copy-as-latex":"LaTeX\uB85C \uBCF5\uC0AC","menu.copy-as-ascii-math":"ASCII Math\uB85C \uBCF5\uC0AC","menu.copy-as-mathml":"MathML\uB85C \uBCF5\uC0AC","menu.paste":"\uBD99\uC5EC\uB123\uAE30","menu.select-all":"\uBAA8\uB450 \uC120\uD0DD","color.red":"\uBE68\uAC15","color.orange":"\uC8FC\uD669","color.yellow":"\uB178\uB791","color.lime":"\uB77C\uC784","color.green":"\uCD08\uB85D","color.teal":"\uCCAD\uB85D","color.cyan":"\uCCAD\uC0C9","color.blue":"\uD30C\uB791","color.indigo":"\uB0A8\uC0C9","color.purple":"\uBCF4\uB77C","color.magenta":"\uC790\uD64D","color.black":"\uAC80\uC815","color.dark-grey":"\uC9C4\uD55C \uD68C\uC0C9","color.grey":"\uD68C\uC0C9","color.light-grey":"\uC5F0\uD55C \uD68C\uC0C9","color.white":"\uD770\uC0C9"},"pl":{"keyboard.tooltip.symbols":"Symbolika","keyboard.tooltip.greek":"Litery greckie","keyboard.tooltip.numeric":"Numeryczne","keyboard.tooltip.alphabetic":"Litery rzymskie","tooltip.copy to clipboard":"Kopiuj do Schowka","tooltip.cut to clipboard":"Wytnij ze Schowka","tooltip.paste from clipboard":"Wklej ze Schowka","tooltip.redo":"Przywr\xF3\u0107","tooltip.toggle virtual keyboard":"Prze\u0142\u0105cz klawiatur\u0119 wirtualn\u0105","tooltip.menu":"Menu","tooltip.undo":"Cofnij","menu.borders":"Ograniczniki macierzy","menu.insert matrix":"Wstaw macierz","menu.array.add row above":"Dodaj wiersz przed","menu.array.add row below":"Dodaj wiersz po","menu.array.add column after":"Dodaj kolumn\u0119 po","menu.array.add column before":"Dodaj kolumn\u0119 przed","menu.array.delete row":"Usu\u0144 wiersz","menu.array.delete rows":"Usu\u0144 wybrane wiersze","menu.array.delete column":"Usu\u0144 kolumn\u0119","menu.array.delete columns":"Usu\u0144 wybrane kolumny","menu.mode":"Tryb","menu.mode-math":"Formu\u0142a","menu.mode-text":"Tekst","menu.mode-latex":"LaTeX","menu.insert":"Wstaw","menu.insert.abs":"Warto\u015B\u0107 bezwzgl\u0119dna","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"Pierwiastek n-tego stopnia","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"Logarytm o podstawie a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"Rachunek r\xF3\u017Cniczkowy i ca\u0142kowy","menu.insert.derivative":"Pochodna","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"Pochodna n-tego rz\u0119du","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"Ca\u0142ka","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"Suma","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"Iloczyn","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"Liczby zespolone","menu.insert.modulus":"Modu\u0142","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"Argument","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"Cz\u0119\u015B\u0107 rzeczywista","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"Cz\u0119\u015B\u0107 urojona","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"Sprz\u0119\u017Cenie","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"Tablica","tooltip.bold":"Pogrubienie","tooltip.italic":"Kursywa","tooltip.fraktur":"Fraktura","tooltip.script":"Skrypt","tooltip.caligraphic":"Kaligraficzny","tooltip.typewriter":"Maszynowy","tooltip.roman-upright":"Rzymski prosto","tooltip.row-by-col":"%@ \xD7 %@","menu.font-style":"Styl czcionki","menu.accent":"Akcent","menu.decoration":"Dekoracja","menu.color":"Kolor","menu.background-color":"T\u0142o","menu.evaluate":"Oblicz","menu.simplify":"Upro\u015B\u0107","menu.solve":"Rozwi\u0105\u017C","menu.solve-for":"Rozwi\u0105\u017C dla %@","menu.cut":"Wytnij","menu.copy":"Kopiuj","menu.copy-as-latex":"Kopiuj jako LaTeX","menu.copy-as-ascii-math":"Kopiuj jako ASCII Math","menu.copy-as-mathml":"Kopiuj jako MathML","menu.paste":"Wklej","menu.select-all":"Zaznacz wszystko","color.red":"Czerwony","color.orange":"Pomara\u0144czowy","color.yellow":"\u017B\xF3\u0142ty","color.lime":"Limetkowy","color.green":"Zielony","color.teal":"Turkusowy","color.cyan":"Cyjan","color.blue":"Niebieski","color.indigo":"Indygo","color.purple":"Fioletowy","color.magenta":"Magenta","color.black":"Czarny","color.dark-grey":"Ciemnoszary","color.grey":"Szary","color.light-grey":"Jasnoszary","color.white":"Bia\u0142y"},"pt":{"keyboard.tooltip.symbols":"S\xEDmbolos","keyboard.tooltip.greek":"Letras gregas","keyboard.tooltip.numeric":"Num\xE9rico","keyboard.tooltip.alphabetic":"Letras romanas","tooltip.copy to clipboard":"Copiar para \xE1rea de transfer\xEAncia","tooltip.redo":"Refazer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Desfazer","menu.insert matrix":"Inserir Matriz","menu.borders":"Delimitadores de matriz","menu.array.add row above":"Adicionar linha depois","menu.array.add row below":"Adicionar linha antes","menu.array.add column after":"Adicionar coluna depois","menu.array.add column before":"Adicionar coluna antes","menu.array.delete row":"Excluir linha","menu.array.delete rows":"Excluir linhas selecionadas","menu.array.delete column":"Apagar Coluna","menu.array.delete columns":"Excluir Colunas Selecionadas","menu.mode":"Modo","menu.mode-math":"F\xF3rmula","menu.mode-text":"Texto","menu.mode-latex":"LaTeX","tooltip.blackboard":"Quadro Negro","tooltip.bold":"Negrito","tooltip.italic":"It\xE1lico","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligr\xE1fico","tooltip.typewriter":"M\xE1quina de Escrever","tooltip.roman-upright":"Romano Vertical","tooltip.row-by-col":"%@ \xD7 %@","menu.font-style":"Estilo da Fonte","menu.accent":"Acento","menu.decoration":"Decora\xE7\xE3o","menu.color":"Cor","menu.background-color":"Cor de Fundo","menu.evaluate":"Avaliar","menu.simplify":"Simplificar","menu.solve":"Resolver","menu.solve-for":"Resolver para %@","menu.cut":"Recortar","menu.copy":"Copiar","menu.copy-as-latex":"Copiar como LaTeX","menu.copy-as-ascii-math":"Copiar como ASCII Math","menu.copy-as-mathml":"Copiar como MathML","menu.paste":"Colar","menu.select-all":"Selecionar Tudo","color.red":"Vermelho","color.orange":"Laranja","color.yellow":"Amarelo","color.lime":"Verde Lima","color.green":"Verde","color.teal":"Verde-azulado","color.cyan":"Ciano","color.blue":"Azul","color.indigo":"\xCDndigo","color.purple":"Roxo","color.magenta":"Magenta","color.black":"Preto","color.dark-grey":"Cinza Escuro","color.grey":"Cinza","color.light-grey":"Cinza Claro","color.white":"Branco"},"uk":{"keyboard.tooltip.symbols":"\u0421\u0438\u043C\u0432\u043E\u043B\u0438","keyboard.tooltip.greek":"\u0413\u0440\u0435\u0446\u044C\u043A\u0456 \u043B\u0456\u0442\u0435\u0440\u0438","keyboard.tooltip.numeric":"\u0427\u0438\u0441\u043B\u043E\u0432\u0438\u0439","keyboard.tooltip.alphabetic":"\u0420\u0438\u043C\u0441\u044C\u043A\u0456 \u043B\u0456\u0442\u0435\u0440\u0438","tooltip.copy to clipboard":"\u041A\u043E\u043F\u0456\u044E\u0432\u0430\u0442\u0438 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043E\u0431\u043C\u0456\u043D\u0443","tooltip.cut to clipboard":"\u0412\u0438\u0440\u0456\u0437\u0430\u0442\u0438 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043E\u0431\u043C\u0456\u043D\u0443","tooltip.paste from clipboard":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0437 \u0431\u0443\u0444\u0435\u0440\u0430 \u043E\u0431\u043C\u0456\u043D\u0443","tooltip.redo":"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0438","tooltip.toggle virtual keyboard":"\u041F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0438\u0442\u0438 \u0432\u0456\u0440\u0442\u0443\u0430\u043B\u044C\u043D\u0443 \u043A\u043B\u0430\u0432\u0456\u0430\u0442\u0443\u0440\u0443","tooltip.menu":"\u041C\u0435\u043D\u044E","tooltip.undo":"\u0421\u043A\u0430\u0441\u0443\u0432\u0430\u0442\u0438","menu.borders":"\u041C\u0435\u0436\u0456","menu.insert matrix":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u043C\u0430\u0442\u0440\u0438\u0446\u044E","menu.array.add row above":"\u0414\u043E\u0434\u0430\u0442\u0438 \u0440\u044F\u0434\u043E\u043A \u043F\u0435\u0440\u0435\u0434","menu.array.add row below":"\u0414\u043E\u0434\u0430\u0442\u0438 \u0440\u044F\u0434\u043E\u043A \u043F\u0456\u0441\u043B\u044F","menu.array.add column after":"\u0414\u043E\u0434\u0430\u0442\u0438 \u0441\u0442\u043E\u0432\u043F\u0435\u0446\u044C \u043F\u0456\u0441\u043B\u044F","menu.array.add column before":"\u0414\u043E\u0434\u0430\u0442\u0438 \u0441\u0442\u043E\u0432\u043F\u0435\u0446\u044C \u043F\u0435\u0440\u0435\u0434","menu.array.delete row":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0440\u044F\u0434\u043E\u043A","menu.array.delete rows":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0432\u0438\u0431\u0440\u0430\u043D\u0456 \u0440\u044F\u0434\u043A\u0438","menu.array.delete column":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0441\u0442\u043E\u0432\u043F\u0435\u0446\u044C","menu.array.delete columns":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0432\u0438\u0431\u0440\u0430\u043D\u0456 \u0441\u0442\u043E\u0432\u043F\u0446\u0456","menu.mode":"\u0420\u0435\u0436\u0438\u043C","menu.mode-math":"\u041C\u0430\u0442\u0435\u043C\u0430\u0442\u0438\u043A\u0430","menu.mode-text":"\u0422\u0435\u043A\u0441\u0442","menu.mode-latex":"LaTeX","menu.insert":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438","menu.insert.abs":"\u0410\u0431\u0441\u043E\u043B\u044E\u0442\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"\u041A\u043E\u0440\u0456\u043D\u044C n-\u0433\u043E \u0441\u0442\u0435\u043F\u0435\u043D\u044F","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"\u041B\u043E\u0433\u0430\u0440\u0438\u0444\u043C \u0437\u0430 \u043E\u0441\u043D\u043E\u0432\u043E\u044E a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"\u041E\u0431\u0447\u0438\u0441\u043B\u0435\u043D\u043D\u044F","menu.insert.derivative":"\u041F\u043E\u0445\u0456\u0434\u043D\u0430","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"\u041F\u043E\u0445\u0456\u0434\u043D\u0430 n-\u0433\u043E \u043F\u043E\u0440\u044F\u0434\u043A\u0443","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"\u0406\u043D\u0442\u0435\u0433\u0440\u0430\u043B","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"\u0421\u0443\u043C\u0430","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"\u0414\u043E\u0431\u0443\u0442\u043E\u043A","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"\u041A\u043E\u043C\u043F\u043B\u0435\u043A\u0441\u043D\u0456 \u0447\u0438\u0441\u043B\u0430","menu.insert.modulus":"\u041C\u043E\u0434\u0443\u043B\u044C","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"\u0410\u0440\u0433\u0443\u043C\u0435\u043D\u0442","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"\u0414\u0456\u0439\u0441\u043D\u0430 \u0447\u0430\u0441\u0442\u0438\u043D\u0430","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"\u0423\u044F\u0432\u043D\u0430 \u0447\u0430\u0441\u0442\u0438\u043D\u0430","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"\u0421\u043F\u0440\u044F\u0436\u0435\u043D\u0435 \u0447\u0438\u0441\u043B\u043E","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"\u0414\u043E\u0448\u043A\u0430","tooltip.bold":"\u0416\u0438\u0440\u043D\u0438\u0439","tooltip.italic":"\u041A\u0443\u0440\u0441\u0438\u0432","tooltip.fraktur":"\u0424\u0440\u0430\u043A\u0442\u0443\u0440\u043D\u0438\u0439","tooltip.script":"\u0420\u0443\u043A\u043E\u043F\u0438\u0441\u043D\u0438\u0439","tooltip.caligraphic":"\u041A\u0430\u043B\u0456\u0433\u0440\u0430\u0444\u0456\u0447\u043D\u0438\u0439","tooltip.typewriter":"\u0414\u0440\u0443\u043A\u0430\u0440\u0441\u044C\u043A\u0438\u0439","tooltip.roman-upright":"\u041F\u0440\u044F\u043C\u0438\u0439 \u0440\u0438\u043C\u0441\u044C\u043A\u0438\u0439","tooltip.row-by-col":"%@ \xD7 %@","menu.font-style":"\u0421\u0442\u0438\u043B\u044C \u0448\u0440\u0438\u0444\u0442\u0443","menu.accent":"\u0410\u043A\u0446\u0435\u043D\u0442","menu.decoration":"\u041E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u043D\u044F","menu.color":"\u041A\u043E\u043B\u0456\u0440","menu.background-color":"\u0424\u043E\u043D","menu.evaluate":"\u041E\u0431\u0447\u0438\u0441\u043B\u0438\u0442\u0438","menu.simplify":"\u0421\u043F\u0440\u043E\u0441\u0442\u0438\u0442\u0438","menu.solve":"\u0420\u043E\u0437\u0432\u2019\u044F\u0437\u0430\u0442\u0438","menu.solve-for":"\u0420\u043E\u0437\u0432\u2019\u044F\u0437\u0430\u0442\u0438 \u0434\u043B\u044F %@","menu.cut":"\u0412\u0438\u0440\u0456\u0437\u0430\u0442\u0438","menu.copy":"\u041A\u043E\u043F\u0456\u044E\u0432\u0430\u0442\u0438","menu.copy-as-latex":"\u041A\u043E\u043F\u0456\u044E\u0432\u0430\u0442\u0438 \u044F\u043A LaTeX","menu.copy-as-ascii-math":"\u041A\u043E\u043F\u0456\u044E\u0432\u0430\u0442\u0438 \u044F\u043A ASCII Math","menu.copy-as-mathml":"\u041A\u043E\u043F\u0456\u044E\u0432\u0430\u0442\u0438 \u044F\u043A MathML","menu.paste":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438","menu.select-all":"\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u0432\u0441\u0435","color.red":"\u0427\u0435\u0440\u0432\u043E\u043D\u0438\u0439","color.orange":"\u041F\u043E\u043C\u0430\u0440\u0430\u043D\u0447\u0435\u0432\u0438\u0439","color.yellow":"\u0416\u043E\u0432\u0442\u0438\u0439","color.lime":"\u041B\u0430\u0439\u043C\u043E\u0432\u0438\u0439","color.green":"\u0417\u0435\u043B\u0435\u043D\u0438\u0439","color.teal":"\u0411\u0456\u0440\u044E\u0437\u043E\u0432\u0438\u0439","color.cyan":"\u0421\u0438\u043D\u044C\u043E-\u0437\u0435\u043B\u0435\u043D\u0438\u0439","color.blue":"\u0421\u0438\u043D\u0456\u0439","color.indigo":"\u0406\u043D\u0434\u0438\u0433\u043E","color.purple":"\u0424\u0456\u043E\u043B\u0435\u0442\u043E\u0432\u0438\u0439","color.magenta":"\u041F\u0443\u0440\u043F\u0443\u0440\u043D\u0438\u0439","color.black":"\u0427\u043E\u0440\u043D\u0438\u0439","color.dark-grey":"\u0422\u0435\u043C\u043D\u043E-\u0441\u0456\u0440\u0438\u0439","color.grey":"\u0421\u0456\u0440\u0438\u0439","color.light-grey":"\u0421\u0432\u0456\u0442\u043B\u043E-\u0441\u0456\u0440\u0438\u0439","color.white":"\u0411\u0456\u043B\u0438\u0439"},"zh-cn":{"keyboard.tooltip.symbols":"\u7B26\u53F7","keyboard.tooltip.greek":"\u5E0C\u814A\u5B57\u6BCD","keyboard.tooltip.numeric":"\u6570\u5B57","keyboard.tooltip.alphabetic":"\u7F57\u9A6C\u5B57\u6BCD","tooltip.copy to clipboard":"\u590D\u5236\u5230\u526A\u8D34\u677F","tooltip.redo":"\u91CD\u505A","tooltip.toggle virtual keyboard":"\u5207\u6362\u865A\u62DF\u952E\u76D8","tooltip.undo":"\u64A4\u6D88","menu.insert matrix":"\u63D2\u5165\u77E9\u9635","menu.borders":"\u77E9\u9635\u5206\u9694\u7B26","menu.array.add row above":"\u5728\u540E\u9762\u6DFB\u52A0\u884C","menu.array.add row below":"\u5728\u524D\u9762\u6DFB\u52A0\u884C","menu.array.add column after":"\u5728\u540E\u9762\u6DFB\u52A0\u5217r","menu.array.add column before":"\u5728\u524D\u9762\u6DFB\u52A0\u5217","menu.array.delete row":"\u5220\u9664\u884C","menu.array.delete rows":"\u5220\u9664\u9009\u5B9A\u884C","menu.array.delete column":"\u5220\u9664\u5217","menu.array.delete columns":"\u5220\u9664\u9009\u5B9A\u7684\u5217","menu.mode":"\u6A21\u5F0F","menu.mode-math":"\u6570\u5B66","menu.mode-text":"\u6587\u672C","menu.mode-latex":"LaTeX","tooltip.blackboard":"\u9ED1\u677F","tooltip.bold":"\u7C97\u4F53","tooltip.italic":"\u659C\u4F53","tooltip.fraktur":"Fraktur","tooltip.script":"\u811A\u672C","tooltip.caligraphic":"\u8349\u4E66","tooltip.typewriter":"\u6253\u5B57\u673A","tooltip.roman-upright":"\u7F57\u9A6C\u76F4\u7ACB","tooltip.row-by-col":"%@ \xD7 %@","menu.font-style":"\u5B57\u4F53\u6837\u5F0F","menu.accent":"\u91CD\u97F3","menu.decoration":"\u88C5\u9970","menu.color":"\u989C\u8272","menu.background-color":"\u80CC\u666F","menu.evaluate":"\u8BA1\u7B97","menu.simplify":"\u7B80\u5316","menu.solve":"\u6C42\u89E3","menu.solve-for":"\u6C42\u89E3 %@","menu.cut":"\u526A\u5207","menu.copy":"\u590D\u5236","menu.copy-as-latex":"\u590D\u5236\u4E3A LaTeX","menu.copy-as-ascii-math":"\u590D\u5236\u4E3A ASCII Math","menu.copy-as-mathml":"\u590D\u5236\u4E3A MathML","menu.paste":"\u7C98\u8D34","menu.select-all":"\u5168\u9009","color.red":"\u7EA2\u8272","color.orange":"\u6A59\u8272","color.yellow":"\u9EC4\u8272","color.lime":"\u7EFF\u9EC4\u8272","color.green":"\u7EFF\u8272","color.teal":"\u9752\u8272","color.cyan":"\u84DD\u7EFF\u8272","color.blue":"\u84DD\u8272","color.indigo":"\u975B\u84DD\u8272","color.purple":"\u7D2B\u8272","color.magenta":"\u6D0B\u7EA2\u8272","color.black":"\u9ED1\u8272","color.dark-grey":"\u6DF1\u7070\u8272","color.grey":"\u7070\u8272","color.light-grey":"\u6D45\u7070\u8272","color.white":"\u767D\u8272"},"zh-tw":{"keyboard.tooltip.symbols":"\u7B26\u865F","keyboard.tooltip.greek":"\u5E0C\u81D8\u5B57\u6BCD","keyboard.tooltip.numeric":"\u6578\u5B57","keyboard.tooltip.alphabetic":"\u7F85\u99AC\u5B57\u6BCD","tooltip.copy to clipboard":"\u8907\u88FD\u5230\u526A\u8CBC\u677F","tooltip.redo":"\u91CD\u505A","tooltip.toggle virtual keyboard":"\u5207\u63DB\u865B\u64EC\u9375\u76E4","tooltip.undo":"\u64A4\u6D88","menu.insert matrix":"\u63D2\u5165\u77E9\u9663","menu.borders":"\u77E9\u9663\u5206\u9694\u7B26","menu.array.add row above":"\u5728\u5F8C\u9762\u6DFB\u52A0\u884C","menu.array.add row below":"\u5728\u524D\u9762\u6DFB\u52A0\u884C","menu.array.add column after":"\u5728\u5F8C\u9762\u6DFB\u52A0\u5217","menu.array.add column before":"\u5728\u524D\u9762\u6DFB\u52A0\u5217","menu.array.delete row":"\u522A\u9664\u884C","menu.array.delete rows":"\u522A\u9664\u9078\u5B9A\u884C","menu.array.delete column":"\u522A\u9664\u5217","menu.array.delete columns":"\u522A\u9664\u9078\u5B9A\u7684\u5217","menu.mode":"\u6A21\u5F0F","menu.mode-math":"\u6578\u5B78","menu.mode-text":"\u6587\u672C","menu.mode-latex":"LaTeX","tooltip.blackboard":"\u9ED1\u677F","tooltip.bold":"\u7C97\u9AD4","tooltip.italic":"\u659C\u9AD4","tooltip.fraktur":"Fraktur","tooltip.script":"\u8173\u672C","tooltip.caligraphic":"\u8349\u66F8","tooltip.typewriter":"\u6253\u5B57\u6A5F","tooltip.roman-upright":"\u7F85\u99AC\u76F4\u7ACB","tooltip.row-by-col":"%@ \xD7 %@","menu.font-style":"\u5B57\u9AD4\u6A23\u5F0F","menu.accent":"\u91CD\u97F3","menu.decoration":"\u88DD\u98FE","menu.color":"\u984F\u8272","menu.background-color":"\u80CC\u666F","menu.evaluate":"\u8A08\u7B97","menu.simplify":"\u7C21\u5316","menu.solve":"\u6C42\u89E3","menu.solve-for":"\u6C42\u89E3 %@","menu.cut":"\u526A\u4E0B","menu.copy":"\u8907\u88FD","menu.copy-as-latex":"\u8907\u88FD\u70BA LaTeX","menu.copy-as-ascii-math":"\u8907\u88FD\u70BA ASCII Math","menu.copy-as-mathml":"\u8907\u88FD\u70BA MathML","menu.paste":"\u8CBC\u4E0A","menu.select-all":"\u5168\u9078","color.red":"\u7D05\u8272","color.orange":"\u6A59\u8272","color.yellow":"\u9EC3\u8272","color.lime":"\u7DA0\u9EC3\u8272","color.green":"\u7DA0\u8272","color.teal":"\u9752\u8272","color.cyan":"\u85CD\u7DA0\u8272","color.blue":"\u85CD\u8272","color.indigo":"\u975B\u85CD\u8272","color.purple":"\u7D2B\u8272","color.magenta":"\u6D0B\u7D05\u8272","color.black":"\u9ED1\u8272","color.dark-grey":"\u6DF1\u7070\u8272","color.grey":"\u7070\u8272","color.light-grey":"\u6DFA\u7070\u8272","color.white":"\u767D\u8272"}};function isBrowser(){return"window"in globalThis&&"document"in globalThis;}
function isTouchCapable(){if("matchMedia"in window)
return window.matchMedia("(pointer: coarse)").matches;return"ontouchstart"in window||navigator.maxTouchPoints>0;}
function isInIframe(){try{return window.self!==window.top;}catch(e){return true;}}
function canVibrate(){return typeof navigator.vibrate==="function";}
function osPlatform(){var _a3,_b3;if(!isBrowser())return"other";const platform2=(_b3=(_a3=navigator["userAgentData"])==null?void 0:_a3.platform)!=null?_b3:navigator.platform;if(/^mac/i.test(platform2)){if(navigator.maxTouchPoints===5)return"ios";return"macos";}
if(/^win/i.test(platform2))return"windows";if(/android/i.test(navigator.userAgent))return"android";if(/iphone|ipod|ipad/i.test(navigator.userAgent))return"ios";if(/\bcros\b/i.test(navigator.userAgent))return"chromeos";return"other";}
function supportRegexPropertyEscape(){if(!isBrowser())return true;if(/firefox/i.test(navigator.userAgent)){const m=navigator.userAgent.match(/firefox\/(\d+)/i);if(!m)return false;const version2=parseInt(m[1]);return version2>=78;}
if(/trident/i.test(navigator.userAgent))return false;if(/edge/i.test(navigator.userAgent)){const m=navigator.userAgent.match(/edg\/(\d+)/i);if(!m)return false;const version2=parseInt(m[1]);return version2>=79;}
return true;}
function supportPopover(){return HTMLElement.prototype.hasOwnProperty("popover");}
var l10n={strings:STRINGS,_locale:"",_dirty:false,_subscribers:[],_numberFormatter:void 0,get locale(){if(!l10n._locale)
l10n._locale=isBrowser()?navigator.language.slice(0,5):"en-US";return l10n._locale;},set locale(value){l10n._locale=value;l10n._numberFormatter=void 0;l10n.dirty=true;},get numberFormatter(){if(!l10n._numberFormatter){try{l10n._numberFormatter=new Intl.NumberFormat(l10n.locale);}catch(e){try{l10n._numberFormatter=new Intl.NumberFormat(l10n.locale.slice(0,2));}catch(e2){l10n._numberFormatter=new Intl.NumberFormat("en-US");}}}
return l10n._numberFormatter;},merge(locale,strings){if(typeof locale==="string"&&strings){l10n.strings[locale]=__spreadValues(__spreadValues({},l10n.strings[locale]),strings);l10n.dirty=true;}else{for(const l of Object.keys(locale))
l10n.merge(l,locale[l]);}},get dirty(){return l10n._dirty;},set dirty(val){if(l10n._dirty||l10n._dirty===val)return;l10n._dirty=true;setTimeout(()=>{l10n._dirty=false;this._subscribers.forEach((x)=>x==null?void 0:x());},0);},subscribe(callback){l10n._subscribers.push(callback);return l10n._subscribers.length-1;},unsubscribe(id){if(id<0||id>=l10n._subscribers.length)return;l10n._subscribers[id]=void 0;},update(root){let elements=root.querySelectorAll("[data-l10n-tooltip]");for(const element of elements){const key=element.getAttribute("data-l10n-tooltip");if(key){const localized=localize(key);if(localized)element.setAttribute("data-tooltip",localized);}}
elements=root.querySelectorAll("[data-l10n-arial-label]");for(const element of elements){const key=element.getAttribute("data-l10n-arial-label");if(key){const localized=localize(key);if(localized)element.setAttribute("aria-label",localized);}}}};function localize(key,...params){if(key===void 0)return void 0;let result="";const locale=l10n.locale;if(l10n.strings[locale])result=l10n.strings[locale][key];const language=locale.slice(0,2);if(!result&&l10n.strings[language])result=l10n.strings[language][key];if(!result)result=l10n.strings.en[key];if(!result)return void 0;const regex=/(%@|%([0-9]+)\$@)/g;let match=regex.exec(result);let index=0;while(match){const parameter=params[index++];if(parameter){const parameterIndex=match[2]?parseInt(match[2],10)-1:index-1;let repl=params[parameterIndex];if(typeof repl==="number")repl=l10n.numberFormatter.format(repl);result=result.replace(match[1],repl);}
match=regex.exec(result);}
result=result.replace(/%%/g,"%");return result;}
var MATHEMATICA_COLORS={m0:"#3F3D99",m1:"#993D71",m2:"#998B3D",m3:"#3D9956",m4:"#3D5A99",m5:"#993D90",m6:"#996D3D",m7:"#43993D",m8:"#3D7999",m9:"#843D99"};var MATLAB_COLORS={blue:"#0072BD",orange:"#D95319",yellow:"#EDB120",purple:"#7E2F8E",green:"#77AC30",cyan:"#4DBEEE",red:"#A2142F"};var BACKGROUND_COLORS={"red":"#fbbbb6","orange":"#ffe0c2","yellow":"#fff1c2","lime":"#d0e8b9","green":"#bceac4","teal":"#b9f1f1","cyan":"#b8e5c9","blue":"#b6d9fb","indigo":"#d1c2f0","purple":"#e3baf8","magenta":"#f9c8e0","black":"#353535","dark-grey":"#8C8C8C","grey":"#D0D0D0","light-grey":"#F0F0F0","white":"#ffffff"};var FOREGROUND_COLORS={"red":"#d7170b","orange":"#fe8a2b","yellow":"#ffc02b","lime":"#63b215","green":"#21ba3a","teal":"#17cfcf","cyan":"#13a7ec","blue":"#0d80f2","indigo":"#63c","purple":"#a219e6","magenta":"#eb4799","black":"#000","dark-grey":"#666","grey":"#A6A6A6","light-grey":"#d4d5d2","white":"#ffffff"};var DVIPS_TO_CHROMATIC={Red:"red",Orange:"orange",Yellow:"yellow",LimeGreen:"lime",Green:"green",TealBlue:"teal",Blue:"blue",Violet:"indigo",Purple:"purple",Magenta:"magenta",Black:"black",Gray:"grey",White:"white"};var DVIPS_COLORS={Apricot:"#FBB982",Aquamarine:"#00B5BE",Bittersweet:"#C04F17",Black:"#221E1F",Blue:"#2D2F92",BlueGreen:"#00B3B8",BlueViolet:"#473992",BrickRed:"#B6321C",Brown:"#792500",BurntOrange:"#F7921D",CadetBlue:"#74729A",CarnationPink:"#F282B4",Cerulean:"#00A2E3",CornflowerBlue:"#41B0E4",Cyan:"#00AEEF",Dandelion:"#FDBC42",DarkOrchid:"#A4538A",Emerald:"#00A99D",ForestGreen:"#009B55",Fuchsia:"#8C368C",Goldenrod:"#FFDF42",Gray:"#949698",Green:"#00A64F",GreenYellow:"#DFE674",JungleGreen:"#00A99A",Lavender:"#F49EC4",Limegreen:"#8DC73E",Magenta:"#EC008C",Mahogany:"#A9341F",Maroon:"#AF3235",Melon:"#F89E7B",MidnightBlue:"#006795",Mulberry:"#A93C93",NavyBlue:"#006EB8",OliveGreen:"#3C8031",Orange:"#F58137",OrangeRed:"#ED135A",Orchid:"#AF72B0",Peach:"#F7965A",Periwinkle:"#7977B8",PineGreen:"#008B72",Plum:"#92268F",ProcessBlue:"#00B0F0",Purple:"#99479B",RawSienna:"#974006",Red:"#ED1B23",RedOrange:"#F26035",RedViolet:"#A1246B",Rhodamine:"#EF559F",RoyalBlue:"#0071BC",RoyalPurple:"#613F99",RubineRed:"#ED017D",Salmon:"#F69289",SeaGreen:"#3FBC9D",Sepia:"#671800",SkyBlue:"#46C5DD",SpringGreen:"#C6DC67",Tan:"#DA9D76",TealBlue:"#00AEB3",Thistle:"#D883B7",Turquoise:"#00B4CE",Violet:"#58429B",VioletRed:"#EF58A0",White:"#FFFFFF",WildStrawberry:"#EE2967",Yellow:"#FFF200",YellowGreen:"#98CC70",YellowOrange:"#FAA21A"};function defaultColorMap(s){var _a3,_b3,_c2,_d2,_e,_f;const colorSpec=s.split("!");let baseRed;let baseGreen;let baseBlue;let red=255;let green=255;let blue=255;let mix=-1;const complementary=colorSpec.length>0&&colorSpec[0].startsWith("-");if(complementary)colorSpec[0]=colorSpec[0].slice(1);for(let i=0;i<colorSpec.length;i++){baseRed=red;baseGreen=green;baseBlue=blue;const colorName=(_a3=colorSpec[i].trim().match(/^([A-Za-z\d-]+)/))==null?void 0:_a3[1];const lcColorName=colorName==null?void 0:colorName.toLowerCase();const color=!colorName?colorSpec[i].trim():(_f=(_e=(_d2=(_c2=(_b3=FOREGROUND_COLORS[lcColorName])!=null?_b3:FOREGROUND_COLORS[DVIPS_TO_CHROMATIC[colorName]])!=null?_c2:MATLAB_COLORS[colorName])!=null?_d2:DVIPS_COLORS[colorName])!=null?_e:MATHEMATICA_COLORS[colorName])!=null?_f:colorSpec[i].trim();let m=color.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);if((m==null?void 0:m[1])&&m[2]&&m[3]){red=Math.max(0,Math.min(255,Number.parseInt(m[1],16)));green=Math.max(0,Math.min(255,Number.parseInt(m[2],16)));blue=Math.max(0,Math.min(255,Number.parseInt(m[3],16)));}else{m=color.match(/^#([\da-f]{3})$/i);if(m==null?void 0:m[1]){const r1=Number.parseInt(m[1][0],16);const g1=Number.parseInt(m[1][1],16);const b1=Number.parseInt(m[1][2],16);red=Math.max(0,Math.min(255,r1*16+r1));green=Math.max(0,Math.min(255,g1*16+g1));blue=Math.max(0,Math.min(255,b1*16+b1));}else{m=color.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);if((m==null?void 0:m[1])&&m[2]&&m[3]){red=Math.max(0,Math.min(255,Number.parseInt(m[1])));green=Math.max(0,Math.min(255,Number.parseInt(m[2])));blue=Math.max(0,Math.min(255,Number.parseInt(m[3])));}else return void 0;}}
if(mix>=0){red=(1-mix)*red+mix*baseRed;green=(1-mix)*green+mix*baseGreen;blue=(1-mix)*blue+mix*baseBlue;mix=-1;}
if(i+1<colorSpec.length)
mix=Math.max(0,Math.min(100,Number.parseInt(colorSpec[++i])))/100;}
if(mix>=0){red=mix*red+(1-mix)*baseRed;green=mix*green+(1-mix)*baseGreen;blue=mix*blue+(1-mix)*baseBlue;}
if(complementary){red=255-red;green=255-green;blue=255-blue;}
return"#"+("00"+Math.round(red).toString(16)).slice(-2)+("00"+Math.round(green).toString(16)).slice(-2)+("00"+Math.round(blue).toString(16)).slice(-2);}
function defaultBackgroundColorMap(s){var _a3,_b3;s=s.trim();return(_b3=(_a3=BACKGROUND_COLORS[s.toLowerCase()])!=null?_a3:BACKGROUND_COLORS[DVIPS_TO_CHROMATIC[s]])!=null?_b3:defaultColorMap(s);}
function parseHex(hex){if(!hex)return void 0;if(hex[0]!=="#")return void 0;hex=hex.slice(1);let result;if(hex.length<=4){result={r:parseInt(hex[0]+hex[0],16),g:parseInt(hex[1]+hex[1],16),b:parseInt(hex[2]+hex[2],16)};if(hex.length===4)result.a=parseInt(hex[3]+hex[3],16)/255;}else{result={r:parseInt(hex[0]+hex[1],16),g:parseInt(hex[2]+hex[3],16),b:parseInt(hex[4]+hex[5],16)};if(hex.length===8)result.a=parseInt(hex[6]+hex[7],16)/255;}
if(result&&result.a===void 0)result.a=1;return result;}
function hueToRgbChannel(t1,t2,hue){if(hue<0)hue+=6;if(hue>=6)hue-=6;if(hue<1)return(t2-t1)*hue+t1;else if(hue<3)return t2;else if(hue<4)return(t2-t1)*(4-hue)+t1;return t1;}
function hslToRgb(hsl){let[hue,sat,light]=[hsl.h,hsl.s,hsl.l];hue=(hue+360)%360/60;light=Math.max(0,Math.min(light,1));sat=Math.max(0,Math.min(sat,1));const t2=light<=0.5?light*(sat+1):light+sat-light*sat;const t1=light*2-t2;return{r:Math.round(255*hueToRgbChannel(t1,t2,hue+2)),g:Math.round(255*hueToRgbChannel(t1,t2,hue)),b:Math.round(255*hueToRgbChannel(t1,t2,hue-2))};}
function clampByte(v){if(v<0)return 0;if(v>255)return 255;return Math.round(v);}
function rgbToHexstring(rgb){const{r,g,b}=rgb;let hexString=((1<<24)+(clampByte(r)<<16)+(clampByte(g)<<8)+clampByte(b)).toString(16).slice(1);if(hexString[0]===hexString[1]&&hexString[2]===hexString[3]&&hexString[4]===hexString[5]&&hexString[6]===hexString[7])
hexString=hexString[0]+hexString[2]+hexString[4];return"#"+hexString;}
function rgbToHsl(rgb){let{r,g,b}=rgb;r=r/255;g=g/255;b=b/255;const min=Math.min(r,g,b);const max=Math.max(r,g,b);const delta=max-min;let h;let s;if(max===min)h=0;else if(r===max)h=(g-b)/delta;else if(g===max)h=2+(b-r)/delta;else if(b===max)h=4+(r-g)/delta;h=Math.min(h*60,360);if(h<0)h+=360;const l=(min+max)/2;if(max===min)s=0;else if(l<=0.5)s=delta/(max+min);else s=delta/(2-max-min);return{h,s,l};}
function highlight(color){let rgb=parseHex(color);if(!rgb)return color;let{h,s,l}=rgbToHsl(rgb);s+=0.1;l-=0.1;return rgbToHexstring(hslToRgb({h,s,l}));}
var UNICODE_TO_LATEX={60:"\\lt",62:"\\gt",111:"o",38:"\\&",123:"\\lbrace",125:"\\rbrace",91:"\\lbrack",93:"\\rbrack",58:"\\colon",160:"~",172:"\\neg",183:"\\cdot",188:"\\frac{1}{4}",189:"\\frac{1}{2}",190:"\\frac{3}{4}",8304:"^{0}",8305:"^{i}",185:"^{1}",178:"^{2}",179:"^{3}",8224:"\\dagger",8225:"\\ddagger",8230:"\\ldots",8308:"^{4}",8309:"^{5}",8310:"^{6}",8311:"^{7}",8312:"^{8}",8313:"^{9}",8314:"^{+}",8315:"^{-}",8316:"^{=}",8319:"^{n}",8320:"_{0}",8321:"_{1}",8322:"_{2}",8323:"_{3}",8324:"_{4}",8325:"_{5}",8326:"_{6}",8327:"_{7}",8328:"_{8}",8329:"_{9}",8330:"_{+}",8331:"_{-}",8332:"_{=}",8336:"_{a}",8337:"_{e}",8338:"_{o}",8339:"_{x}",8242:"\\prime",39:"\\prime",8592:"\\gets",8594:"\\to",9651:"\\triangle",9661:"\\triangledown",8715:"\\owns",8727:"\\ast",8739:"\\vert",8741:"\\Vert",8743:"\\land",8744:"\\lor",8901:"\\cdot",8904:"\\bowtie",8800:"\\ne",8804:"\\le",8805:"\\ge",8869:"\\bot",10178:"\\perp",10231:"\\biconditional",10232:"\\impliedby",10233:"\\implies",10234:"\\iff",8450:"\\mathbb{C}",8469:"\\mathbb{N}",8473:"\\mathbb{P}",8474:"\\mathbb{Q}",8477:"\\mathbb{R}",8484:"\\mathbb{Z}",8461:"\\mathbb{H}",8476:"\\Re",8465:"\\Im",42:"\\ast",11036:"\\square",9633:"\\square",8720:"\\coprod",8716:"\\not\\ni",9671:"\\diamond",8846:"\\uplus",8851:"\\sqcap",8852:"\\sqcup",8768:"\\wr",8750:"\\oint",8226:"\\textbullet",8722:"-",978:"\\Upsilon"};var MATH_LETTER_EXCEPTIONS={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484};var MATH_UNICODE_BLOCKS=[{start:119808,len:26,offset:65,style:"bold"},{start:119834,len:26,offset:97,style:"bold"},{start:120488,len:25,offset:913,style:"bold"},{start:120514,len:25,offset:945,style:"bold"},{start:119860,len:26,offset:65,style:"italic"},{start:119886,len:26,offset:97,style:"italic"},{start:120546,len:25,offset:913,style:"italic"},{start:120572,len:25,offset:945,style:"italic"},{start:119912,len:26,offset:65,style:"bolditalic"},{start:119938,len:26,offset:97,style:"bolditalic"},{start:120604,len:25,offset:913,style:"bolditalic"},{start:120630,len:25,offset:945,style:"bolditalic"},{start:120782,len:10,offset:48,variant:"main",style:"bold"},{start:119964,len:26,offset:65,variant:"script"},{start:119990,len:26,offset:97,variant:"script"},{start:120016,len:26,offset:65,variant:"script",style:"bold"},{start:120042,len:26,offset:97,variant:"script",style:"bold"},{start:120068,len:26,offset:65,variant:"fraktur"},{start:120094,len:26,offset:97,variant:"fraktur"},{start:120172,len:26,offset:65,variant:"fraktur",style:"bold"},{start:120198,len:26,offset:97,variant:"fraktur",style:"bold"},{start:120120,len:26,offset:65,variant:"double-struck"},{start:120146,len:26,offset:97,variant:"double-struck"},{start:120792,len:10,offset:48,variant:"double-struck"},{start:120432,len:26,offset:65,variant:"monospace"},{start:120458,len:26,offset:97,variant:"monospace"},{start:120822,len:10,offset:48,variant:"monospace"},{start:120224,len:26,offset:65,variant:"sans-serif"},{start:120250,len:26,offset:97,variant:"sans-serif"},{start:120276,len:26,offset:65,variant:"sans-serif",style:"bold"},{start:120302,len:26,offset:97,variant:"sans-serif",style:"bold"},{start:120328,len:26,offset:65,variant:"sans-serif",style:"italic"},{start:120354,len:26,offset:97,variant:"sans-serif",style:"italic"},{start:120380,len:26,offset:65,variant:"sans-serif",style:"bolditalic"},{start:120406,len:26,offset:97,variant:"sans-serif",style:"bolditalic"},{start:120662,len:25,offset:913,variant:"sans-serif",style:"bold"},{start:120688,len:25,offset:945,variant:"sans-serif",style:"bold"},{start:120720,len:25,offset:913,variant:"sans-serif",style:"bolditalic"},{start:120746,len:25,offset:945,variant:"sans-serif",style:"bolditalic"},{start:120803,len:10,offset:48,variant:"sans-serif"},{start:120812,len:10,offset:48,variant:"sans-serif",style:"bold"}];function mathVariantToUnicode(char,variant,style){if(!/[A-Za-z\d]/.test(char))return void 0;if(style==="up")style=void 0;if(!variant&&!style)return void 0;const codepoint=char.codePointAt(0);if(codepoint===void 0)return char;for(const block of MATH_UNICODE_BLOCKS){if(!variant||block.variant===variant){if(!style||block.style===style){if(codepoint>=block.offset&&codepoint<block.offset+block.len){const result=block.start+codepoint-block.offset;return String.fromCodePoint(MATH_LETTER_EXCEPTIONS[result]||result);}}}}
return void 0;}
function unicodeToMathVariant(codepoint){var _a3;if((codepoint<119808||codepoint>120831)&&(codepoint<8448||codepoint>8527))
return{char:String.fromCodePoint(codepoint)};for(const c in MATH_LETTER_EXCEPTIONS){if(MATH_LETTER_EXCEPTIONS[c]===codepoint){codepoint=(_a3=c.codePointAt(0))!=null?_a3:0;break;}}
for(const block of MATH_UNICODE_BLOCKS){if(codepoint>=block.start&&codepoint<block.start+block.len){return{char:String.fromCodePoint(codepoint-block.start+block.offset),variant:block.variant,style:block.style};}}
return{char:String.fromCodePoint(codepoint)};}
function codePointToLatex(c){var _a3;if("{}<>[]$&*#^_%:'\u02DC".includes(c))return void 0;if(c.length>1)return void 0;const codepoint=(_a3=c.codePointAt(0))!=null?_a3:0;let latex=UNICODE_TO_LATEX[codepoint];if(latex)return latex;const{char,variant,style}=unicodeToMathVariant(codepoint);if(!variant&&!style)return void 0;latex=char;switch(variant){case"double-struck":latex=`\\mathbb{${latex}}`;break;case"fraktur":latex=`\\mathfrak{${latex}}`;break;case"script":latex=`\\mathscr{${latex}}`;break;case"sans-serif":latex=`\\mathsf{${latex}}`;break;case"monospace":latex=`\\mathtt{${latex}}`;break;case"calligraphic":latex=`\\mathcal{${latex}}`;break;}
switch(style){case"bold":latex=`\\mathbf{${latex}}`;break;case"italic":latex=`\\mathit{${latex}}`;break;case"bolditalic":latex=`\\mathbfit{${latex}}`;break;}
return latex;}
function argAtoms(arg){if(!arg)return[];if(Array.isArray(arg))return arg;if(typeof arg==="object"&&"group"in arg)return arg.group;return[];}
var MATH_SYMBOLS={};var REVERSE_MATH_SYMBOLS=__spreadValues({},UNICODE_TO_LATEX);var LATEX_COMMANDS={};var ENVIRONMENTS={};var TEXVC_MACROS={darr:"\\downarrow",dArr:"\\Downarrow",Darr:"\\Downarrow",lang:"\\langle",rang:"\\rangle",uarr:"\\uparrow",uArr:"\\Uparrow",Uarr:"\\Uparrow",C:"\\mathbb{C}",H:"\\mathbb{H}",N:"\\mathbb{N}",Q:"\\mathbb{Q}",R:"\\mathbb{R}",Z:"\\mathbb{Z}",alef:"\\aleph",alefsym:"\\aleph",Alpha:"\\mathrm{A}",Beta:"\\mathrm{B}",bull:"\\bullet",Chi:"\\mathrm{X}",clubs:"\\clubsuit",cnums:"\\mathbb{C}",Complex:"\\mathbb{C}",Dagger:"\\ddagger",diamonds:"\\diamondsuit",doublecap:"\\Cap",doublecup:"\\Cup",empty:"\\emptyset",Epsilon:"\\mathrm{E}",Eta:"\\mathrm{H}",exist:"\\exists",hAar:"\\Leftrightarrow",harr:"\\leftrightarrow",Harr:"\\Leftrightarrow",hearts:"\\heartsuit",image:"\\Im",infin:"\\infty",Iota:"\\mathrm{I}",isin:"\\in",Kappa:"\\mathrm{K}",larr:"\\leftarrow",Larr:"\\Leftarrow",lArr:"\\Leftarrow",lrarr:"\\leftrightarrow",Lrarr:"\\Leftrightarrow",lrArr:"\\Leftrightarrow",Mu:"\\mathrm{M}",natnums:"\\mathbb{N}",Nu:"\\mathrm{N}",Omicron:"\\mathrm{O}",part:"\\partial",plusmn:"\\pm",rarr:"\\rightarrow",Rarr:"\\Rightarrow",rArr:"\\Rightarrow",real:"\\Re",reals:"\\mathbb{R}",Reals:"\\mathbb{R}",restriction:"\\upharpoonright",Rho:"\\mathrm{P}",sdot:"\\cdot",sect:"\\S",spades:"\\spadesuit",sub:"\\subset",sube:"\\subseteq",supe:"\\supseteq",Tau:"\\mathrm{T}",thetasym:"\\vartheta",varcoppa:"\\coppa",weierp:"\\wp",Zeta:"\\mathrm{Z}"};var AMSMATH_MACROS={varGamma:"\\mathit{\\Gamma}",varDelta:"\\mathit{\\Delta}",varTheta:"\\mathit{\\Theta}",varLambda:"\\mathit{\\Lambda}",varXi:"\\mathit{\\Xi}",varPi:"\\mathit{\\Pi}",varSigma:"\\mathit{\\Sigma}",varUpsilon:"\\mathit{\\Upsilon}",varPhi:"\\mathit{\\Phi}",varPsi:"\\mathit{\\Psi}",varOmega:"\\mathit{\\Omega}",pmod:{def:"\\quad(\\operatorname{mod}\\ #1)",args:1,expand:false,captureSelection:false},mod:{def:"\\quad\\operatorname{mod}\\,\\,#1",args:1,expand:false},bmod:{def:"\\;\\mathbin{\\operatorname{mod }}",expand:false}};var BRAKET_MACROS={bra:{def:"\\mathinner{\\langle{#1}|}",args:1,captureSelection:false},ket:{def:"\\mathinner{|{#1}\\rangle}",args:1,captureSelection:false},braket:{def:"\\mathinner{\\langle{#1}\\rangle}",args:1,captureSelection:false},set:{def:"\\mathinner{\\lbrace #1 \\rbrace}",args:1,captureSelection:false},Bra:{def:"\\left\\langle #1\\right|",args:1,captureSelection:false},Ket:{def:"\\left|#1\\right\\rangle",args:1,captureSelection:false},Braket:{def:"\\left\\langle{#1}\\right\\rangle",args:1,captureSelection:false},Set:{def:"\\left\\lbrace #1 \\right\\rbrace",args:1,captureSelection:false}};var DEFAULT_MACROS={"iff":{primitive:true,captureSelection:true,def:"\\;\\Longleftrightarrow\\;}"},"nicefrac":"^{#1}\\!\\!/\\!_{#2}","phase":{def:"\\enclose{phasorangle}{#1}",args:1,captureSelection:false},"rd":"\\mathrm{d}","rD":"\\mathrm{D}","doubleStruckCapitalN":"\\mathbb{N}","doubleStruckCapitalR":"\\mathbb{R}","doubleStruckCapitalQ":"\\mathbb{Q}","doubleStruckCapitalZ":"\\mathbb{Z}","doubleStruckCapitalP":"\\mathbb{P}","scriptCapitalE":"\\mathscr{E}","scriptCapitalH":"\\mathscr{H}","scriptCapitalL":"\\mathscr{L}","gothicCapitalC":"\\mathfrak{C}","gothicCapitalH":"\\mathfrak{H}","gothicCapitalI":"\\mathfrak{I}","gothicCapitalR":"\\mathfrak{R}","imaginaryI":"\\mathrm{i}","imaginaryJ":"\\mathrm{j}","exponentialE":"\\mathrm{e}","differentialD":"\\mathrm{d}","capitalDifferentialD":"\\mathrm{D}","mathstrut":{def:"\\vphantom{(}",primitive:true},"angl":"\\enclose{actuarial}{#1}","angln":"\\enclose{actuarial}{n}","anglr":"\\enclose{actuarial}{r}","anglk":"\\enclose{actuarial}{k}","mathtools":{primitive:true,package:{ordinarycolon:":",vcentcolon:"\\mathrel{\\mathop\\ordinarycolon}",dblcolon:'{\\mathop{\\char"2237}}',coloneqq:'{\\mathop{\\char"2254}}',Coloneqq:'{\\mathop{\\char"2a74}}',coloneq:'{\\mathop{\\char"2254}}',Coloneq:'{\\mathop{\\char"2A74}}',eqqcolon:'{\\mathop{\\char"2255}}',Eqqcolon:'{\\mathop{\\char"3D\\char"2237}}',eqcolon:'{\\mathop{\\char"2255}}',Eqcolon:'{\\mathop{\\char"3D\\char"2237}}',colonapprox:'{\\mathop{\\char"003A\\char"2248}}',Colonapprox:'{\\mathop{\\char"2237\\char"2248}}',colonsim:'{\\mathop{\\char"3A\\char"223C}}',Colonsim:'{\\mathop{\\char"2237\\char"223C}}',colondash:"\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}",Colondash:"\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}",dashcolon:"\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Dashcolon:"\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}"}},"ratio":"\\vcentcolon","coloncolon":"\\dblcolon","colonequals":"\\coloneq","coloncolonequals":"\\Coloneq","equalscolon":"\\eqcolon","equalscoloncolon":"\\Eqcolon","colonminus":"\\colondash","coloncolonminus":"\\Colondash","minuscolon":"\\dashcolon","minuscoloncolon":"\\Dashcolon","coloncolonapprox":"\\Colonapprox","coloncolonsim":"\\Colonsim","simcolon":"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}","Simcolon":"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}","simcoloncolon":"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}","approxcolon":"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}","Approxcolon":"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}","approxcoloncolon":"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}","notni":"\\mathrel{\\char`\u220C}","limsup":"\\operatorname*{lim\\,sup}","liminf":"\\operatorname*{lim\\,inf}","injlim":"\\operatorname*{inj\\,lim}","projlim":"\\operatorname*{proj\\,lim}","varlimsup":"\\operatorname*{\\overline{lim}}","varliminf":"\\operatorname*{\\underline{lim}}","varinjlim":"\\operatorname*{\\underrightarrow{lim}}","varprojlim":"\\operatorname*{\\underleftarrow{lim}}","argmin":"\\operatorname*{arg\\,min}","argmax":"\\operatorname*{arg\\,max}","plim":"\\mathop{\\operatorname{plim}}\\limits","tripledash":{def:"\\vphantom{-}\\raise{4mu}{\\mkern1.5mu\\rule{2mu}{1.5mu}\\mkern{2.25mu}\\rule{2mu}{1.5mu}\\mkern{2.25mu}\\rule{2mu}{1.5mu}\\mkern{2mu}}",expand:true},"braket.sty":{package:BRAKET_MACROS},"amsmath.sty":{package:AMSMATH_MACROS,primitive:true},"texvc.sty":{package:TEXVC_MACROS,primitive:false}};var TEXT_SYMBOLS={" ":32,"\\!":33,"\\#":35,"\\$":36,"\\%":37,"\\&":38,"\\_":95,"-":45,"\\textunderscore":95,"\\euro":8364,"\\maltese":10016,"\\{":123,"\\}":125,"\\textbraceleft":123,"\\textbraceright":125,"\\lbrace":123,"\\rbrace":125,"\\lbrack":91,"\\rbrack":93,"\\nobreakspace":160,"\\ldots":8230,"\\textellipsis":8230,"\\backslash":92,"`":8216,"'":8217,"``":8220,"''":8221,"\\degree":176,"\\textasciicircum":94,"\\textasciitilde":126,"\\textasteriskcentered":42,"\\textbackslash":92,"\\textbullet":8226,"\\textdollar":36,"\\textsterling":163,"\\textdagger":8224,"\\textdaggerdbl":8225,"\u2013":8211,"\u2014":8212,"\u2018":8216,"\u2019":8217,"\u201C":8220,"\u201D":8221,'"':8221,"\\ss":223,"\\ae":230,"\\oe":339,"\\AE":198,"\\OE":338,"\\O":216,"\\i":305,"\\j":567,"\\aa":229,"\\AA":197};var COMMAND_MODE_CHARACTERS=/[\w!@*()-=+{}\[\]\\';:?/.,~<>`|$%#&^" ]/;var LETTER;var LETTER_AND_DIGITS;if(supportRegexPropertyEscape()){LETTER=new RegExp("\\p{Letter}","u");LETTER_AND_DIGITS=new RegExp("[0-9\\p{Letter}]","u");}else{LETTER=/[a-zA-Z]/;LETTER_AND_DIGITS=/[\da-zA-Z]/;}
function defineSymbol(symbol,codepoint,type="mord",variant){if(codepoint===void 0)return;MATH_SYMBOLS[symbol]={definitionType:"symbol",type,variant,codepoint};if(!REVERSE_MATH_SYMBOLS[codepoint])
REVERSE_MATH_SYMBOLS[codepoint]=symbol;}
function defineSymbols(value,inType,inVariant){if(typeof value==="string"){for(let i=0;i<value.length;i++){const ch=value.charAt(i);defineSymbol(ch,ch.codePointAt(0));}
return;}
for(const[symbol,val,type,variant]of value)
defineSymbol(symbol,val,type!=null?type:inType,variant!=null?variant:inVariant);}
function defineSymbolRange(from,to){for(let i=from;i<=to;i++)defineSymbol(String.fromCodePoint(i),i);}
function getEnvironmentDefinition(name){var _a3;return(_a3=ENVIRONMENTS[name])!=null?_a3:null;}
function suggest(mf,s){var _a3,_b3;if(s.length===0||s==="\\"||!s.startsWith("\\"))return[];const result=[];for(const p in LATEX_COMMANDS){if(p.startsWith(s)&&!LATEX_COMMANDS[p].infix)
result.push({match:p,frequency:(_a3=LATEX_COMMANDS[p].frequency)!=null?_a3:0});}
for(const p in MATH_SYMBOLS){if(p.startsWith(s))
result.push({match:p,frequency:(_b3=MATH_SYMBOLS[p].frequency)!=null?_b3:0});}
const command=s.substring(1);for(const p of Object.keys(mf.options.macros))
if(p.startsWith(command))result.push({match:"\\"+p,frequency:0});result.sort((a,b)=>{var _a4,_b4;if(a.frequency===b.frequency){if(a.match.length===b.match.length)return a.match<b.match?-1:1;return a.match.length-b.match.length;}
return((_a4=b.frequency)!=null?_a4:0)-((_b4=a.frequency)!=null?_b4:0);});return result.map((x)=>x.match);}
function parseParameterTemplateArgument(argTemplate){let type="auto";const r=argTemplate.match(/:([^=]+)/);if(r)type=r[1].trim();return type;}
function parseParameterTemplate(parameterTemplate){if(!parameterTemplate)return[];const result=[];let parameters=parameterTemplate.split("]");if(parameters[0].startsWith("[")){result.push({isOptional:true,type:parseParameterTemplateArgument(parameters[0].slice(1))});for(let i=1;i<=parameters.length;i++)
result.push(...parseParameterTemplate(parameters[i]));}else{parameters=parameterTemplate.split("}");if(parameters[0].startsWith("{")){result.push({isOptional:false,type:parseParameterTemplateArgument(parameters[0].slice(1))});for(let i=1;i<=parameters.length;i++)
result.push(...parseParameterTemplate(parameters[i]));}}
return result;}
function parseArgAsString(atoms){if(!atoms)return"";let result="";let success=true;for(const atom of atoms){if(typeof atom.value==="string")result+=atom.value;else success=false;}
return success?result:"";}
function defineTabularEnvironment(names,parameters,createAtom){if(typeof names==="string")names=[names];const parsedParameters=parseParameterTemplate(parameters);const data={tabular:true,rootOnly:false,params:parsedParameters,createAtom};for(const name of names)ENVIRONMENTS[name]=data;}
function defineRootEnvironment(names,createAtom,options){var _a3;if(typeof names==="string")names=[names];const def={tabular:(_a3=options==null?void 0:options.tabular)!=null?_a3:false,rootOnly:true,params:[],createAtom};for(const name of names)ENVIRONMENTS[name]=def;}
function defineFunction(names,parameters,options){var _a3,_b3;if(!options)options={};const data={definitionType:"function",params:parseParameterTemplate(parameters),ifMode:options.ifMode,isFunction:(_a3=options.isFunction)!=null?_a3:false,applyMode:options.applyMode,infix:(_b3=options.infix)!=null?_b3:false,parse:options.parse,createAtom:options.createAtom,applyStyle:options.applyStyle,serialize:options.serialize,render:options.render};if(typeof names==="string")LATEX_COMMANDS["\\"+names]=data;else for(const name of names)LATEX_COMMANDS["\\"+name]=data;}
var _DEFAULT_MACROS;function getMacros(otherMacros){if(!_DEFAULT_MACROS)
_DEFAULT_MACROS=normalizeMacroDictionary(DEFAULT_MACROS);if(!otherMacros)return _DEFAULT_MACROS;return normalizeMacroDictionary(__spreadValues(__spreadValues({},_DEFAULT_MACROS),otherMacros));}
function normalizeMacroDefinition(def,options){var _a3,_b3,_c2,_d2;if(typeof def==="string"){let argCount=0;const defString=def;if(/(^|[^\\])#1/.test(defString))argCount=1;if(/(^|[^\\])#2/.test(defString))argCount=2;if(/(^|[^\\])#3/.test(defString))argCount=3;if(/(^|[^\\])#4/.test(defString))argCount=4;if(/(^|[^\\])#5/.test(defString))argCount=5;if(/(^|[^\\])#6/.test(defString))argCount=6;if(/(^|[^\\])#7/.test(defString))argCount=7;if(/(^|[^\\])#8/.test(defString))argCount=8;if(/(^|[^\\])#9/.test(defString))argCount=9;return{expand:(_a3=options==null?void 0:options.expand)!=null?_a3:true,captureSelection:(_b3=options==null?void 0:options.captureSelection)!=null?_b3:true,args:argCount,def:defString};}
return __spreadValues({expand:(_c2=options==null?void 0:options.expand)!=null?_c2:true,captureSelection:(_d2=options==null?void 0:options.captureSelection)!=null?_d2:true,args:0},def);}
function normalizeMacroDictionary(macros){if(!macros)return{};const result={};for(const macro of Object.keys(macros)){const macroDef=macros[macro];if(macroDef===void 0||macroDef===null)delete result[macro];else if(typeof macroDef==="object"&&"package"in macroDef){for(const packageMacro of Object.keys(macroDef.package)){result[packageMacro]=normalizeMacroDefinition(macroDef.package[packageMacro],{expand:!macroDef.primitive,captureSelection:macroDef.captureSelection});}}else result[macro]=normalizeMacroDefinition(macroDef);}
return result;}
function getDefinition(token,parseMode="math"){if(!token||token.length===0)return null;let info=null;if(token.startsWith("\\")){info=LATEX_COMMANDS[token];if(info){if(!info.ifMode||info.ifMode===parseMode)return info;return null;}
if(parseMode==="math")info=MATH_SYMBOLS[token];else if(TEXT_SYMBOLS[token]){info={definitionType:"symbol",type:"mord",codepoint:TEXT_SYMBOLS[token]};}}else if(parseMode==="math"){info=MATH_SYMBOLS[token];if(!info&&token.length===1){const command=charToLatex("math",token.codePointAt(0));if(command.startsWith("\\"))
return __spreadProps(__spreadValues({},getDefinition(command,"math")),{command});return null;}}else if(TEXT_SYMBOLS[token]){info={definitionType:"symbol",type:"mord",codepoint:TEXT_SYMBOLS[token]};}else if(parseMode==="text"){info={definitionType:"symbol",type:"mord",codepoint:token.codePointAt(0)};}
return info!=null?info:null;}
function getMacroDefinition(token,macros){if(!token.startsWith("\\"))return null;const command=token.slice(1);return macros[command];}
function charToLatex(parseMode,codepoint){if(codepoint===void 0)return"";if(parseMode==="math"&&REVERSE_MATH_SYMBOLS[codepoint])
return REVERSE_MATH_SYMBOLS[codepoint];if(parseMode==="text"){const textSymbol=Object.keys(TEXT_SYMBOLS).find((x)=>TEXT_SYMBOLS[x]===codepoint);if(textSymbol)return textSymbol;return String.fromCodePoint(codepoint);}
return String.fromCodePoint(codepoint);}
var M1=[0,0.68889,0,0,0.72222];var M2=[0,0.68889,0,0,0.66667];var M3=[0,0.68889,0,0,0.77778];var M4=[0,0.68889,0,0,0.61111];var M5=[0.16667,0.68889,0,0,0.77778];var M6=[0,0.68889,0,0,0.55556];var M7=[0,0,0,0,0.25];var M8=[0,0.825,0,0,2.33334];var M9=[0,0.9,0,0,2.33334];var M10=[0,0.68889,0,0,0.54028];var M11=[-0.03598,0.46402,0,0,0.5];var M12=[-0.13313,0.36687,0,0,1];var M13=[0.01354,0.52239,0,0,1];var M14=[0.01354,0.52239,0,0,1.11111];var M15=[0,0.54986,0,0,1];var M16=[0,0.69224,0,0,0.5];var M17=[0,0.43056,0,0,1];var M18=[0.08198,0.58198,0,0,0.77778];var M19=[0.19444,0.69224,0,0,0.41667];var M20=[0.1808,0.675,0,0,1];var M21=[0.19444,0.69224,0,0,0.83334];var M22=[0.13667,0.63667,0,0,1];var M23=[-0.064,0.437,0,0,1.334];var M24=[0.08167,0.58167,0,0,0.77778];var M25=[0,0.69224,0,0,0.72222];var M26=[0,0.69224,0,0,0.66667];var M27=[-0.13313,0.36687,0,0,0.77778];var M28=[0.06062,0.54986,0,0,0.77778];var M29=[0,0.69224,0,0,0.77778];var M30=[0.25583,0.75583,0,0,0.77778];var M31=[0.25142,0.75726,0,0,0.77778];var M32=[0.20576,0.70576,0,0,0.77778];var M33=[0.30274,0.79383,0,0,0.77778];var M34=[0.22958,0.72958,0,0,0.77778];var M35=[0.1808,0.675,0,0,0.77778];var M36=[0.13667,0.63667,0,0,0.77778];var M37=[0.13597,0.63597,0,0,0.77778];var M38=[0.03517,0.54986,0,0,0.77778];var M39=[0,0.675,0,0,0.77778];var M40=[0.19444,0.69224,0,0,0.61111];var M41=[0,0.54986,0,0,0.76042];var M42=[0,0.54986,0,0,0.66667];var M43=[0.0391,0.5391,0,0,0.77778];var M44=[0.03517,0.54986,0,0,1.33334];var M45=[0.38569,0.88569,0,0,0.77778];var M46=[0.23222,0.74111,0,0,0.77778];var M47=[0.19444,0.69224,0,0,0.77778];var M48=[0,0.37788,0,0,0.5];var M49=[0,0.54986,0,0,0.72222];var M50=[0,0.69224,0,0,0.83334];var M51=[0.11111,0.69224,0,0,0.66667];var M52=[0.26167,0.75726,0,0,0.77778];var M53=[0.48256,0.98256,0,0,0.77778];var M54=[0.28481,0.79383,0,0,0.77778];var M55=[0.08167,0.58167,0,0,0.22222];var M56=[0.08167,0.58167,0,0,0.38889];var M57=[0,0.43056,0.04028,0,0.66667];var M58=[0.41951,0.91951,0,0,0.77778];var M59=[0.24982,0.74947,0,0,0.38865];var M60=[0.08319,0.58283,0,0,0.75623];var M61=[0,0.10803,0,0,0.27764];var M62=[0,0.47534,0,0,0.50181];var M63=[0.18906,0.47534,0,0,0.50181];var M64=[0,0.69141,0,0,0.50181];var M65=[0.24982,0.74947,0,0,0.27764];var M66=[0,0.69141,0,0,0.21471];var M67=[0.25,0.75,0,0,0.44722];var M68=[0,0.64444,0,0,0.575];var M69=[0.08556,0.58556,0,0,0.89444];var M70=[0,0.69444,0,0,0.89444];var M71=[0,0.68611,0,0,0.9];var M72=[0,0.68611,0,0,0.86944];var M73=[0.25,0.75,0,0,0.575];var M74=[0.25,0.75,0,0,0.31944];var M75=[0,0.69444,0,0,0.63889];var M76=[0,0.69444,0,0,0.31944];var M77=[0,0.44444,0,0,0.63889];var M78=[0,0.44444,0,0,0.51111];var M79=[0,0.69444,0,0,0.575];var M80=[0.13333,0.63333,0,0,0.89444];var M81=[0,0.44444,0,0,0.31944];var M82=[0,0.69444,0,0,0.86944];var M83=[0,0.68611,0,0,0.69166];var M84=[0,0.68611,0,0,0.83055];var M85=[0,0.68611,0,0,0.89444];var M86=[0,0.69444,0,0,0.60278];var M87=[0.19444,0.69444,0,0,0.51111];var M88=[0,0.69444,0,0,0.83055];var M89=[-0.10889,0.39111,0,0,1.14999];var M90=[0.19444,0.69444,0,0,0.575];var M91=[0.19444,0.69444,0,0,1.14999];var M92=[0.19444,0.69444,0,0,0.70277];var M93=[0.05556,0.75,0,0,0.575];var M94=[0,0.68611,0,0,0.95833];var M95=[0.08556,0.58556,0,0,0.76666];var M96=[-0.02639,0.47361,0,0,0.575];var M97=[0,0.44444,0,0,0.89444];var M98=[0,0.55556,0,0,0.76666];var M99=[-0.10889,0.39111,0,0,0.89444];var M100=[222e-5,0.50222,0,0,0.89444];var M101=[0.19667,0.69667,0,0,0.89444];var M102=[0.08556,0.58556,0,0,1.14999];var M103=[0,0.69444,0,0,0.70277];var M104=[-0.02778,0.47222,0,0,0.575];var M105=[0.25,0.75,0,0,0.51111];var M106=[-0.13889,0.36111,0,0,1.14999];var M107=[0.19444,0.69444,0,0,1.02222];var M108=[0.12963,0.69444,0,0,0.89444];var M109=[0.19444,0.69444,0,0,0.44722];var M110=[0,0.64444,0.13167,0,0.59111];var M111=[0.19444,0.64444,0.13167,0,0.59111];var M112=[0,0.68611,0.17208,0,0.8961];var M113=[0.19444,0.44444,0.105,0,0.53222];var M114=[0,0.44444,0.085,0,0.82666];var M115=[0,0.69444,0.06709,0,0.59111];var M116=[0,0.69444,0.12945,0,0.35555];var M117=[0,0.69444,0,0,0.94888];var M118=[0,0.69444,0.11472,0,0.59111];var M119=[0,0.68611,0.10778,0,0.88555];var M120=[0,0.69444,0.07939,0,0.62055];var M121=[0,0.69444,0.12417,0,0.30667];var M122=[0,0.64444,0.13556,0,0.51111];var M123=[0.19444,0.64444,0.13556,0,0.51111];var M124=[0,0.68333,0.16389,0,0.74333];var M125=[0.19444,0.43056,0.08847,0,0.46];var M126=[0,0.43056,0.07514,0,0.71555];var M127=[0,0.69444,0.06646,0,0.51111];var M128=[0,0.69444,0,0,0.83129];var M129=[0,0.69444,0.1225,0,0.51111];var M130=[0,0.68333,0.09403,0,0.76666];var M131=[0,0.68333,0.11111,0,0.76666];var M132=[0,0.69444,0.06961,0,0.51444];var M133=[0,0.69444,0,0,0.27778];var M134=[0.25,0.75,0,0,0.38889];var M135=[0,0.64444,0,0,0.5];var M136=[0,0.69444,0,0,0.77778];var M137=[0,0.68333,0,0,0.75];var M138=[0,0.68333,0,0,0.77778];var M139=[0,0.68333,0,0,0.68056];var M140=[0,0.68333,0,0,0.72222];var M141=[0.25,0.75,0,0,0.5];var M142=[0.25,0.75,0,0,0.27778];var M143=[0,0.69444,0,0,0.5];var M144=[0,0.69444,0,0,0.55556];var M145=[0,0.43056,0,0,0.44445];var M146=[0,0.43056,0,0,0.5];var M147=[0.19444,0.43056,0,0,0.55556];var M148=[0,0.43056,0,0,0.55556];var M149=[0.08333,0.58333,0,0,0.77778];var M150=[0,0.43056,0,0,0.27778];var M151=[0,0.66786,0,0,0.27778];var M152=[0,0.69444,0,0,0.75];var M153=[0,0.66786,0,0,0.5];var M154=[0,0.68333,0,0,0.625];var M155=[0.19444,0.69444,0,0,0.44445];var M156=[0,0.69444,0,0,0.72222];var M157=[0.19444,0.69444,0,0,0.5];var M158=[0.19444,0.69444,0,0,1];var M159=[0.011,0.511,0,0,1.126];var M160=[0.19444,0.69444,0,0,0.61111];var M161=[0.05556,0.75,0,0,0.5];var M162=[0,0.68333,0,0,0.83334];var M163=[0.0391,0.5391,0,0,0.66667];var M164=[-0.05555,0.44445,0,0,0.5];var M165=[0,0.43056,0,0,0.77778];var M166=[0,0.55556,0,0,0.66667];var M167=[-0.03625,0.46375,0,0,0.77778];var M168=[-0.01688,0.48312,0,0,0.77778];var M169=[0.0391,0.5391,0,0,1];var M170=[0,0.69444,0,0,0.61111];var M171=[-0.03472,0.46528,0,0,0.5];var M172=[0.25,0.75,0,0,0.44445];var M173=[-0.14236,0.35764,0,0,1];var M174=[0.244,0.744,0,0,0.412];var M175=[0.19444,0.69444,0,0,0.88889];var M176=[0.12963,0.69444,0,0,0.77778];var M177=[0.19444,0.69444,0,0,0.38889];var M178=[0.011,0.511,0,0,1.638];var M179=[0.19444,0.69444,0,0,0];var M180=[0,0.44444,0,0,0.575];var M181=[0.19444,0.44444,0,0,0.575];var M182=[0,0.68611,0,0,0.75555];var M183=[0,0.69444,0,0,0.66759];var M184=[0,0.68611,0,0,0.80555];var M185=[0,0.68611,0.08229,0,0.98229];var M186=[0,0.68611,0,0,0.76666];var M187=[0,0.44444,0,0,0.58472];var M188=[0.19444,0.44444,0,0,0.6118];var M189=[0.19444,0.43056,0,0,0.5];var M190=[0,0.68333,0.02778,0.08334,0.76278];var M191=[0,0.68333,0.08125,0.05556,0.83125];var M192=[0,0.43056,0,0.05556,0.48472];var M193=[0.19444,0.43056,0,0.08334,0.51702];var M194=[0.25,0.75,0,0,0.42778];var M195=[0,0.69444,0,0,0.55];var M196=[0,0.69444,0,0,0.73334];var M197=[0,0.69444,0,0,0.79445];var M198=[0,0.69444,0,0,0.51945];var M199=[0,0.69444,0,0,0.70278];var M200=[0,0.69444,0,0,0.76389];var M201=[0.25,0.75,0,0,0.34306];var M202=[0,0.69444,0,0,0.56111];var M203=[0,0.69444,0,0,0.25556];var M204=[0.19444,0.45833,0,0,0.56111];var M205=[0,0.45833,0,0,0.56111];var M206=[0,0.69444,0,0,0.30556];var M207=[0,0.69444,0,0,0.58056];var M208=[0,0.69444,0,0,0.67223];var M209=[0,0.69444,0,0,0.85556];var M210=[0,0.69444,0,0,0.55834];var M211=[0,0.65556,0.11156,0,0.5];var M212=[0,0.69444,0.08094,0,0.70834];var M213=[0.17014,0,0,0,0.44445];var M214=[0,0.69444,0.0799,0,0.5];var M215=[0,0.69444,0,0,0.73752];var M216=[0,0.69444,0.09205,0,0.5];var M217=[0,0.69444,0.09031,0,0.77778];var M218=[0,0.69444,0.07816,0,0.27778];var M219=[0,0.69444,316e-5,0,0.5];var M220=[0.19444,0.69444,0,0,0.83334];var M221=[0.05556,0.75,0,0,0.83334];var M222=[0,0.75,0,0,0.5];var M223=[0.125,0.08333,0,0,0.27778];var M224=[0,0.08333,0,0,0.27778];var M225=[0,0.65556,0,0,0.5];var M226=[0,0.69444,0,0,0.47222];var M227=[0,0.69444,0,0,0.66667];var M228=[0,0.69444,0,0,0.59722];var M229=[0,0.69444,0,0,0.54167];var M230=[0,0.69444,0,0,0.70834];var M231=[0.25,0.75,0,0,0.28889];var M232=[0,0.69444,0,0,0.51667];var M233=[0,0.44444,0,0,0.44445];var M234=[0.19444,0.44444,0,0,0.51667];var M235=[0,0.44444,0,0,0.38333];var M236=[0,0.44444,0,0,0.51667];var M237=[0,0.69444,0,0,0.83334];var M238=[0.35001,0.85,0,0,0.45834];var M239=[0.35001,0.85,0,0,0.57778];var M240=[0.35001,0.85,0,0,0.41667];var M241=[0.35001,0.85,0,0,0.58334];var M242=[0,0.72222,0,0,0.55556];var M243=[1e-5,0.6,0,0,0.66667];var M244=[1e-5,0.6,0,0,0.77778];var M245=[0.25001,0.75,0,0,0.94445];var M246=[0.306,0.805,0.19445,0,0.47222];var M247=[0.30612,0.805,0.19445,0,0.47222];var M248=[0.25001,0.75,0,0,0.83334];var M249=[0.35001,0.85,0,0,0.47222];var M250=[0.25001,0.75,0,0,1.11111];var M251=[0.65002,1.15,0,0,0.59722];var M252=[0.65002,1.15,0,0,0.81111];var M253=[0.65002,1.15,0,0,0.47222];var M254=[0.65002,1.15,0,0,0.66667];var M255=[0,0.75,0,0,1];var M256=[0.55001,1.05,0,0,1.27778];var M257=[0.862,1.36,0.44445,0,0.55556];var M258=[0.86225,1.36,0.44445,0,0.55556];var M259=[0.55001,1.05,0,0,1.11111];var M260=[0.65002,1.15,0,0,0.52778];var M261=[0.65002,1.15,0,0,0.61111];var M262=[0.55001,1.05,0,0,1.51112];var M263=[0.95003,1.45,0,0,0.73611];var M264=[0.95003,1.45,0,0,1.04445];var M265=[0.95003,1.45,0,0,0.52778];var M266=[0.95003,1.45,0,0,0.75];var M267=[0,0.75,0,0,1.44445];var M268=[0.95003,1.45,0,0,0.58334];var M269=[1.25003,1.75,0,0,0.79167];var M270=[1.25003,1.75,0,0,1.27778];var M271=[1.25003,1.75,0,0,0.58334];var M272=[1.25003,1.75,0,0,0.80556];var M273=[0,0.825,0,0,1.8889];var M274=[1.25003,1.75,0,0,0.63889];var M275=[0.64502,1.155,0,0,0.875];var M276=[1e-5,0.6,0,0,0.875];var M277=[-99e-5,0.601,0,0,0.66667];var M278=[0.64502,1.155,0,0,0.66667];var M279=[1e-5,0.9,0,0,0.88889];var M280=[0.65002,1.15,0,0,0.88889];var M281=[0.90001,0,0,0,0.88889];var M282=[-499e-5,0.605,0,0,1.05556];var M283=[0,0.12,0,0,0.45];var M284=[0,0.61111,0,0,0.525];var M285=[0.08333,0.69444,0,0,0.525];var M286=[-0.08056,0.53055,0,0,0.525];var M287=[-0.05556,0.55556,0,0,0.525];var M288=[0,0.43056,0,0,0.525];var M289=[0.22222,0.43056,0,0,0.525];var M290=[0,0,0,0,0.525];var font_metrics_data_default={"AMS-Regular":{32:M7,65:M1,66:M2,67:M1,68:M1,69:M2,70:M4,71:M3,72:M3,73:[0,0.68889,0,0,0.38889],74:[0.16667,0.68889,0,0,0.5],75:M3,76:M2,77:[0,0.68889,0,0,0.94445],78:M1,79:M5,80:M4,81:M5,82:M1,83:M6,84:M2,85:M1,86:M1,87:[0,0.68889,0,0,1],88:M1,89:M1,90:M2,107:M6,160:M7,165:[0,0.675,0.025,0,0.75],174:[0.15559,0.69224,0,0,0.94666],240:M6,295:M10,710:M8,732:M9,770:M8,771:M9,989:M24,1008:M57,8245:[0,0.54986,0,0,0.275],8463:M10,8487:M1,8498:M6,8502:M2,8503:[0,0.68889,0,0,0.44445],8504:M2,8513:[0,0.68889,0,0,0.63889],8592:M11,8594:M11,8602:M12,8603:M12,8606:M13,8608:M13,8610:M14,8611:M14,8619:M15,8620:M15,8621:[-0.13313,0.37788,0,0,1.38889],8622:M12,8624:M16,8625:M16,8630:M17,8631:M17,8634:M18,8635:M18,8638:M19,8639:M19,8642:M19,8643:M19,8644:M20,8646:M20,8647:M20,8648:M21,8649:M20,8650:M21,8651:M13,8652:M13,8653:M12,8654:M12,8655:M12,8666:M22,8667:M22,8669:[-0.13313,0.37788,0,0,1],8672:M23,8674:M23,8705:[0,0.825,0,0,0.5],8708:M6,8709:M24,8717:[0,0.43056,0,0,0.42917],8722:M11,8724:[0.08198,0.69224,0,0,0.77778],8726:M24,8733:M29,8736:M25,8737:M25,8738:[0.03517,0.52239,0,0,0.72222],8739:M55,8740:[0.25142,0.74111,0,0,0.27778],8741:M56,8742:[0.25142,0.74111,0,0,0.5],8756:M26,8757:M26,8764:M27,8765:[-0.13313,0.37788,0,0,0.77778],8769:M27,8770:M167,8774:M33,8776:M168,8778:M24,8782:M28,8783:M28,8785:M18,8786:M18,8787:M18,8790:M29,8791:M34,8796:[0.08198,0.91667,0,0,0.77778],8806:M30,8807:M30,8808:M31,8809:M31,8812:[0.25583,0.75583,0,0,0.5],8814:M32,8815:M32,8816:M33,8817:M33,8818:M34,8819:M34,8822:M35,8823:M35,8828:M36,8829:M36,8830:M34,8831:M34,8832:M32,8833:M32,8840:M33,8841:M33,8842:M37,8843:M37,8847:M38,8848:M38,8858:M18,8859:M18,8861:M18,8862:M39,8863:M39,8864:M39,8865:M39,8872:[0,0.69224,0,0,0.61111],8873:M25,8874:[0,0.69224,0,0,0.88889],8876:M4,8877:M4,8878:M1,8879:M1,8882:M38,8883:M38,8884:M36,8885:M36,8888:[0,0.54986,0,0,1.11111],8890:M147,8891:M40,8892:M40,8901:[0,0.54986,0,0,0.27778],8903:M24,8905:M24,8906:M24,8907:M29,8908:M29,8909:[-0.03598,0.46402,0,0,0.77778],8910:M41,8911:M41,8912:M38,8913:M38,8914:M42,8915:M42,8916:M26,8918:M43,8919:M43,8920:M44,8921:M44,8922:M45,8923:M45,8926:M36,8927:M36,8928:M33,8929:M33,8934:M46,8935:M46,8936:M46,8937:M46,8938:M32,8939:M32,8940:M33,8941:M33,8994:M47,8995:M47,9416:[0.15559,0.69224,0,0,0.90222],9484:M16,9488:M16,9492:M48,9496:M48,9585:[0.19444,0.68889,0,0,0.88889],9586:[0.19444,0.74111,0,0,0.88889],9632:M39,9633:M39,9650:M49,9651:M49,9654:M38,9660:M49,9661:M49,9664:M38,9674:M51,9733:[0.19444,0.69224,0,0,0.94445],10003:M50,10016:M50,10731:M51,10846:[0.19444,0.75583,0,0,0.61111],10877:M36,10878:M36,10885:M30,10886:M30,10887:M37,10888:M37,10889:M52,10890:M52,10891:M53,10892:M53,10901:M36,10902:M36,10933:M31,10934:M31,10935:M52,10936:M52,10937:M52,10938:M52,10949:M30,10950:M30,10955:M54,10956:M54,57350:M55,57351:M56,57352:M24,57353:M57,57356:M31,57357:M31,57358:M58,57359:M33,57360:M33,57361:M58,57366:M31,57367:M31,57368:M31,57369:M31,57370:M37,57371:M37},"Caligraphic-Regular":{32:M7,65:[0,0.68333,0,0.19445,0.79847],66:[0,0.68333,0.03041,0.13889,0.65681],67:[0,0.68333,0.05834,0.13889,0.52653],68:[0,0.68333,0.02778,0.08334,0.77139],69:[0,0.68333,0.08944,0.11111,0.52778],70:[0,0.68333,0.09931,0.11111,0.71875],71:[0.09722,0.68333,0.0593,0.11111,0.59487],72:[0,0.68333,965e-5,0.11111,0.84452],73:[0,0.68333,0.07382,0,0.54452],74:[0.09722,0.68333,0.18472,0.16667,0.67778],75:[0,0.68333,0.01445,0.05556,0.76195],76:[0,0.68333,0,0.13889,0.68972],77:[0,0.68333,0,0.13889,1.2009],78:[0,0.68333,0.14736,0.08334,0.82049],79:[0,0.68333,0.02778,0.11111,0.79611],80:[0,0.68333,0.08222,0.08334,0.69556],81:[0.09722,0.68333,0,0.11111,0.81667],82:[0,0.68333,0,0.08334,0.8475],83:[0,0.68333,0.075,0.13889,0.60556],84:[0,0.68333,0.25417,0,0.54464],85:[0,0.68333,0.09931,0.08334,0.62583],86:[0,0.68333,0.08222,0,0.61278],87:[0,0.68333,0.08222,0.08334,0.98778],88:[0,0.68333,0.14643,0.13889,0.7133],89:[0.09722,0.68333,0.08222,0.08334,0.66834],90:[0,0.68333,0.07944,0.13889,0.72473],160:M7},"Fraktur-Regular":{32:M7,33:[0,0.69141,0,0,0.29574],34:M66,38:[0,0.69141,0,0,0.73786],39:[0,0.69141,0,0,0.21201],40:M59,41:M59,42:[0,0.62119,0,0,0.27764],43:M60,44:M61,45:M60,46:M61,47:[0.24982,0.74947,0,0,0.50181],48:M62,49:M62,50:M62,51:M63,52:M63,53:M63,54:M64,55:M63,56:M64,57:M63,58:[0,0.47534,0,0,0.21606],59:[0.12604,0.47534,0,0,0.21606],61:[-0.13099,0.36866,0,0,0.75623],63:[0,0.69141,0,0,0.36245],65:[0,0.69141,0,0,0.7176],66:[0,0.69141,0,0,0.88397],67:[0,0.69141,0,0,0.61254],68:[0,0.69141,0,0,0.83158],69:[0,0.69141,0,0,0.66278],70:[0.12604,0.69141,0,0,0.61119],71:[0,0.69141,0,0,0.78539],72:[0.06302,0.69141,0,0,0.7203],73:[0,0.69141,0,0,0.55448],74:[0.12604,0.69141,0,0,0.55231],75:[0,0.69141,0,0,0.66845],76:[0,0.69141,0,0,0.66602],77:[0,0.69141,0,0,1.04953],78:[0,0.69141,0,0,0.83212],79:[0,0.69141,0,0,0.82699],80:[0.18906,0.69141,0,0,0.82753],81:[0.03781,0.69141,0,0,0.82699],82:[0,0.69141,0,0,0.82807],83:[0,0.69141,0,0,0.82861],84:[0,0.69141,0,0,0.66899],85:[0,0.69141,0,0,0.64576],86:[0,0.69141,0,0,0.83131],87:[0,0.69141,0,0,1.04602],88:[0,0.69141,0,0,0.71922],89:[0.18906,0.69141,0,0,0.83293],90:[0.12604,0.69141,0,0,0.60201],91:M65,93:M65,94:[0,0.69141,0,0,0.49965],97:[0,0.47534,0,0,0.50046],98:[0,0.69141,0,0,0.51315],99:[0,0.47534,0,0,0.38946],100:[0,0.62119,0,0,0.49857],101:[0,0.47534,0,0,0.40053],102:[0.18906,0.69141,0,0,0.32626],103:[0.18906,0.47534,0,0,0.5037],104:[0.18906,0.69141,0,0,0.52126],105:[0,0.69141,0,0,0.27899],106:[0,0.69141,0,0,0.28088],107:[0,0.69141,0,0,0.38946],108:[0,0.69141,0,0,0.27953],109:[0,0.47534,0,0,0.76676],110:[0,0.47534,0,0,0.52666],111:[0,0.47534,0,0,0.48885],112:[0.18906,0.52396,0,0,0.50046],113:[0.18906,0.47534,0,0,0.48912],114:[0,0.47534,0,0,0.38919],115:[0,0.47534,0,0,0.44266],116:[0,0.62119,0,0,0.33301],117:[0,0.47534,0,0,0.5172],118:[0,0.52396,0,0,0.5118],119:[0,0.52396,0,0,0.77351],120:[0.18906,0.47534,0,0,0.38865],121:[0.18906,0.47534,0,0,0.49884],122:[0.18906,0.47534,0,0,0.39054],160:M7,8216:M66,8217:M66,58112:[0,0.62119,0,0,0.49749],58113:[0,0.62119,0,0,0.4983],58114:[0.18906,0.69141,0,0,0.33328],58115:[0.18906,0.69141,0,0,0.32923],58116:[0.18906,0.47534,0,0,0.50343],58117:[0,0.69141,0,0,0.33301],58118:[0,0.62119,0,0,0.33409],58119:[0,0.47534,0,0,0.50073]},"Main-Bold":{32:M7,33:[0,0.69444,0,0,0.35],34:M86,35:[0.19444,0.69444,0,0,0.95833],36:M93,37:[0.05556,0.75,0,0,0.95833],38:M70,39:M76,40:M67,41:M67,42:[0,0.75,0,0,0.575],43:M80,44:[0.19444,0.15556,0,0,0.31944],45:M235,46:[0,0.15556,0,0,0.31944],47:M73,48:M68,49:M68,50:M68,51:M68,52:M68,53:M68,54:M68,55:M68,56:M68,57:M68,58:M81,59:[0.19444,0.44444,0,0,0.31944],60:M69,61:M99,62:M69,63:[0,0.69444,0,0,0.54305],64:M70,65:M72,66:[0,0.68611,0,0,0.81805],67:M84,68:[0,0.68611,0,0,0.88194],69:M182,70:[0,0.68611,0,0,0.72361],71:[0,0.68611,0,0,0.90416],72:M71,73:[0,0.68611,0,0,0.43611],74:[0,0.68611,0,0,0.59444],75:[0,0.68611,0,0,0.90138],76:M83,77:[0,0.68611,0,0,1.09166],78:M71,79:[0,0.68611,0,0,0.86388],80:[0,0.68611,0,0,0.78611],81:[0.19444,0.68611,0,0,0.86388],82:[0,0.68611,0,0,0.8625],83:[0,0.68611,0,0,0.63889],84:[0,0.68611,0,0,0.8],85:[0,0.68611,0,0,0.88472],86:[0,0.68611,0.01597,0,0.86944],87:[0,0.68611,0.01597,0,1.18888],88:M72,89:[0,0.68611,0.02875,0,0.86944],90:[0,0.68611,0,0,0.70277],91:M74,92:M73,93:M74,94:M79,95:[0.31,0.13444,0.03194,0,0.575],97:[0,0.44444,0,0,0.55902],98:M75,99:M78,100:M75,101:[0,0.44444,0,0,0.52708],102:[0,0.69444,0.10903,0,0.35139],103:[0.19444,0.44444,0.01597,0,0.575],104:M75,105:M76,106:[0.19444,0.69444,0,0,0.35139],107:[0,0.69444,0,0,0.60694],108:M76,109:[0,0.44444,0,0,0.95833],110:M77,111:M180,112:[0.19444,0.44444,0,0,0.63889],113:[0.19444,0.44444,0,0,0.60694],114:[0,0.44444,0,0,0.47361],115:[0,0.44444,0,0,0.45361],116:[0,0.63492,0,0,0.44722],117:M77,118:[0,0.44444,0.01597,0,0.60694],119:[0,0.44444,0.01597,0,0.83055],120:[0,0.44444,0,0,0.60694],121:[0.19444,0.44444,0.01597,0,0.60694],122:M78,123:M73,124:M74,125:M73,126:[0.35,0.34444,0,0,0.575],160:M7,163:[0,0.69444,0,0,0.86853],168:M79,172:[0,0.44444,0,0,0.76666],176:M82,177:M80,184:[0.17014,0,0,0,0.51111],198:[0,0.68611,0,0,1.04166],215:M80,216:[0.04861,0.73472,0,0,0.89444],223:M228,230:[0,0.44444,0,0,0.83055],247:M80,248:[0.09722,0.54167,0,0,0.575],305:M81,338:[0,0.68611,0,0,1.16944],339:M97,567:[0.19444,0.44444,0,0,0.35139],710:M79,711:[0,0.63194,0,0,0.575],713:[0,0.59611,0,0,0.575],714:M79,715:M79,728:M79,729:M76,730:M82,732:M79,733:M79,915:M83,916:M94,920:M85,923:M184,926:M186,928:M71,931:M84,933:M85,934:M84,936:M85,937:M84,8211:[0,0.44444,0.03194,0,0.575],8212:[0,0.44444,0.03194,0,1.14999],8216:M76,8217:M76,8220:M86,8221:M86,8224:M87,8225:M87,8242:[0,0.55556,0,0,0.34444],8407:[0,0.72444,0.15486,0,0.575],8463:M183,8465:M88,8467:[0,0.69444,0,0,0.47361],8472:[0.19444,0.44444,0,0,0.74027],8476:M88,8501:M103,8592:M89,8593:M90,8594:M89,8595:M90,8596:M89,8597:M73,8598:M91,8599:M91,8600:M91,8601:M91,8636:M89,8637:M89,8640:M89,8641:M89,8656:M89,8657:M92,8658:M89,8659:M92,8660:M89,8661:[0.25,0.75,0,0,0.70277],8704:M75,8706:[0,0.69444,0.06389,0,0.62847],8707:M75,8709:M93,8711:M94,8712:M95,8715:M95,8722:M80,8723:M80,8725:M73,8726:M73,8727:M104,8728:M96,8729:M96,8730:[0.18,0.82,0,0,0.95833],8733:M97,8734:[0,0.44444,0,0,1.14999],8736:M25,8739:M74,8741:M73,8743:M98,8744:M98,8745:M98,8746:M98,8747:[0.19444,0.69444,0.12778,0,0.56875],8764:M99,8768:[0.19444,0.69444,0,0,0.31944],8771:M100,8776:[0.02444,0.52444,0,0,0.89444],8781:M100,8801:M100,8804:M101,8805:M101,8810:M102,8811:M102,8826:M69,8827:M69,8834:M69,8835:M69,8838:M101,8839:M101,8846:M98,8849:M101,8850:M101,8851:M98,8852:M98,8853:M80,8854:M80,8855:M80,8856:M80,8857:M80,8866:M103,8867:M103,8868:M70,8869:M70,8900:M96,8901:[-0.02639,0.47361,0,0,0.31944],8902:M104,8968:M105,8969:M105,8970:M105,8971:M105,8994:M106,8995:M106,9651:M107,9657:M104,9661:M107,9667:M104,9711:M91,9824:M108,9825:M108,9826:M108,9827:M108,9837:[0,0.75,0,0,0.44722],9838:M109,9839:M109,10216:M67,10217:M67,10815:M71,10927:M101,10928:M101,57376:M179},"Main-BoldItalic":{32:M7,33:[0,0.69444,0.11417,0,0.38611],34:M120,35:[0.19444,0.69444,0.06833,0,0.94444],37:[0.05556,0.75,0.12861,0,0.94444],38:[0,0.69444,0.08528,0,0.88555],39:M116,40:[0.25,0.75,0.15806,0,0.47333],41:[0.25,0.75,0.03306,0,0.47333],42:[0,0.75,0.14333,0,0.59111],43:[0.10333,0.60333,0.03306,0,0.88555],44:[0.19444,0.14722,0,0,0.35555],45:[0,0.44444,0.02611,0,0.41444],46:[0,0.14722,0,0,0.35555],47:[0.25,0.75,0.15806,0,0.59111],48:M110,49:M110,50:M110,51:M110,52:M111,53:M110,54:M110,55:M111,56:M110,57:M110,58:[0,0.44444,0.06695,0,0.35555],59:[0.19444,0.44444,0.06695,0,0.35555],61:[-0.10889,0.39111,0.06833,0,0.88555],63:M118,64:[0,0.69444,0.09208,0,0.88555],65:[0,0.68611,0,0,0.86555],66:[0,0.68611,0.0992,0,0.81666],67:[0,0.68611,0.14208,0,0.82666],68:[0,0.68611,0.09062,0,0.87555],69:[0,0.68611,0.11431,0,0.75666],70:[0,0.68611,0.12903,0,0.72722],71:[0,0.68611,0.07347,0,0.89527],72:M112,73:[0,0.68611,0.15681,0,0.47166],74:[0,0.68611,0.145,0,0.61055],75:[0,0.68611,0.14208,0,0.89499],76:[0,0.68611,0,0,0.69777],77:[0,0.68611,0.17208,0,1.07277],78:M112,79:[0,0.68611,0.09062,0,0.85499],80:[0,0.68611,0.0992,0,0.78721],81:[0.19444,0.68611,0.09062,0,0.85499],82:[0,0.68611,0.02559,0,0.85944],83:[0,0.68611,0.11264,0,0.64999],84:[0,0.68611,0.12903,0,0.7961],85:[0,0.68611,0.17208,0,0.88083],86:[0,0.68611,0.18625,0,0.86555],87:[0,0.68611,0.18625,0,1.15999],88:[0,0.68611,0.15681,0,0.86555],89:[0,0.68611,0.19803,0,0.86555],90:[0,0.68611,0.14208,0,0.70888],91:[0.25,0.75,0.1875,0,0.35611],93:[0.25,0.75,0.09972,0,0.35611],94:M115,95:[0.31,0.13444,0.09811,0,0.59111],97:[0,0.44444,0.09426,0,0.59111],98:[0,0.69444,0.07861,0,0.53222],99:[0,0.44444,0.05222,0,0.53222],100:[0,0.69444,0.10861,0,0.59111],101:[0,0.44444,0.085,0,0.53222],102:[0.19444,0.69444,0.21778,0,0.4],103:M113,104:[0,0.69444,0.09426,0,0.59111],105:[0,0.69326,0.11387,0,0.35555],106:[0.19444,0.69326,0.1672,0,0.35555],107:[0,0.69444,0.11111,0,0.53222],108:[0,0.69444,0.10861,0,0.29666],109:[0,0.44444,0.09426,0,0.94444],110:[0,0.44444,0.09426,0,0.64999],111:[0,0.44444,0.07861,0,0.59111],112:[0.19444,0.44444,0.07861,0,0.59111],113:M113,114:[0,0.44444,0.11111,0,0.50167],115:[0,0.44444,0.08167,0,0.48694],116:[0,0.63492,0.09639,0,0.385],117:[0,0.44444,0.09426,0,0.62055],118:[0,0.44444,0.11111,0,0.53222],119:[0,0.44444,0.11111,0,0.76777],120:[0,0.44444,0.12583,0,0.56055],121:[0.19444,0.44444,0.105,0,0.56166],122:[0,0.44444,0.13889,0,0.49055],126:[0.35,0.34444,0.11472,0,0.59111],160:M7,168:[0,0.69444,0.11473,0,0.59111],176:M117,184:[0.17014,0,0,0,0.53222],198:[0,0.68611,0.11431,0,1.02277],216:[0.04861,0.73472,0.09062,0,0.88555],223:[0.19444,0.69444,0.09736,0,0.665],230:M114,248:[0.09722,0.54167,0.09458,0,0.59111],305:[0,0.44444,0.09426,0,0.35555],338:[0,0.68611,0.11431,0,1.14054],339:M114,567:[0.19444,0.44444,0.04611,0,0.385],710:M115,711:[0,0.63194,0.08271,0,0.59111],713:[0,0.59444,0.10444,0,0.59111],714:[0,0.69444,0.08528,0,0.59111],715:[0,0.69444,0,0,0.59111],728:[0,0.69444,0.10333,0,0.59111],729:M116,730:M117,732:M118,733:M118,915:[0,0.68611,0.12903,0,0.69777],916:[0,0.68611,0,0,0.94444],920:[0,0.68611,0.09062,0,0.88555],923:[0,0.68611,0,0,0.80666],926:[0,0.68611,0.15092,0,0.76777],928:M112,931:[0,0.68611,0.11431,0,0.82666],933:M119,934:[0,0.68611,0.05632,0,0.82666],936:M119,937:[0,0.68611,0.0992,0,0.82666],8211:[0,0.44444,0.09811,0,0.59111],8212:[0,0.44444,0.09811,0,1.18221],8216:M116,8217:M116,8220:[0,0.69444,0.16772,0,0.62055],8221:M120},"Main-Italic":{32:M7,33:M121,34:M132,35:[0.19444,0.69444,0.06616,0,0.81777],37:[0.05556,0.75,0.13639,0,0.81777],38:[0,0.69444,0.09694,0,0.76666],39:M121,40:[0.25,0.75,0.16194,0,0.40889],41:[0.25,0.75,0.03694,0,0.40889],42:[0,0.75,0.14917,0,0.51111],43:[0.05667,0.56167,0.03694,0,0.76666],44:[0.19444,0.10556,0,0,0.30667],45:[0,0.43056,0.02826,0,0.35778],46:[0,0.10556,0,0,0.30667],47:[0.25,0.75,0.16194,0,0.51111],48:M122,49:M122,50:M122,51:M122,52:M123,53:M122,54:M122,55:M123,56:M122,57:M122,58:[0,0.43056,0.0582,0,0.30667],59:[0.19444,0.43056,0.0582,0,0.30667],61:[-0.13313,0.36687,0.06616,0,0.76666],63:M129,64:[0,0.69444,0.09597,0,0.76666],65:[0,0.68333,0,0,0.74333],66:[0,0.68333,0.10257,0,0.70389],67:[0,0.68333,0.14528,0,0.71555],68:[0,0.68333,0.09403,0,0.755],69:[0,0.68333,0.12028,0,0.67833],70:[0,0.68333,0.13305,0,0.65277],71:[0,0.68333,0.08722,0,0.77361],72:M124,73:[0,0.68333,0.15806,0,0.38555],74:[0,0.68333,0.14028,0,0.525],75:[0,0.68333,0.14528,0,0.76888],76:[0,0.68333,0,0,0.62722],77:[0,0.68333,0.16389,0,0.89666],78:M124,79:M130,80:[0,0.68333,0.10257,0,0.67833],81:[0.19444,0.68333,0.09403,0,0.76666],82:[0,0.68333,0.03868,0,0.72944],83:[0,0.68333,0.11972,0,0.56222],84:[0,0.68333,0.13305,0,0.71555],85:M124,86:[0,0.68333,0.18361,0,0.74333],87:[0,0.68333,0.18361,0,0.99888],88:[0,0.68333,0.15806,0,0.74333],89:[0,0.68333,0.19383,0,0.74333],90:[0,0.68333,0.14528,0,0.61333],91:[0.25,0.75,0.1875,0,0.30667],93:[0.25,0.75,0.10528,0,0.30667],94:M127,95:[0.31,0.12056,0.09208,0,0.51111],97:[0,0.43056,0.07671,0,0.51111],98:[0,0.69444,0.06312,0,0.46],99:[0,0.43056,0.05653,0,0.46],100:[0,0.69444,0.10333,0,0.51111],101:[0,0.43056,0.07514,0,0.46],102:[0.19444,0.69444,0.21194,0,0.30667],103:M125,104:[0,0.69444,0.07671,0,0.51111],105:[0,0.65536,0.1019,0,0.30667],106:[0.19444,0.65536,0.14467,0,0.30667],107:[0,0.69444,0.10764,0,0.46],108:[0,0.69444,0.10333,0,0.25555],109:[0,0.43056,0.07671,0,0.81777],110:[0,0.43056,0.07671,0,0.56222],111:[0,0.43056,0.06312,0,0.51111],112:[0.19444,0.43056,0.06312,0,0.51111],113:M125,114:[0,0.43056,0.10764,0,0.42166],115:[0,0.43056,0.08208,0,0.40889],116:[0,0.61508,0.09486,0,0.33222],117:[0,0.43056,0.07671,0,0.53666],118:[0,0.43056,0.10764,0,0.46],119:[0,0.43056,0.10764,0,0.66444],120:[0,0.43056,0.12042,0,0.46389],121:[0.19444,0.43056,0.08847,0,0.48555],122:[0,0.43056,0.12292,0,0.40889],126:[0.35,0.31786,0.11585,0,0.51111],160:M7,168:[0,0.66786,0.10474,0,0.51111],176:M128,184:[0.17014,0,0,0,0.46],198:[0,0.68333,0.12028,0,0.88277],216:[0.04861,0.73194,0.09403,0,0.76666],223:[0.19444,0.69444,0.10514,0,0.53666],230:M126,248:[0.09722,0.52778,0.09194,0,0.51111],338:[0,0.68333,0.12028,0,0.98499],339:M126,710:M127,711:[0,0.62847,0.08295,0,0.51111],713:[0,0.56167,0.10333,0,0.51111],714:[0,0.69444,0.09694,0,0.51111],715:[0,0.69444,0,0,0.51111],728:[0,0.69444,0.10806,0,0.51111],729:[0,0.66786,0.11752,0,0.30667],730:M128,732:[0,0.66786,0.11585,0,0.51111],733:M129,915:[0,0.68333,0.13305,0,0.62722],916:[0,0.68333,0,0,0.81777],920:M130,923:[0,0.68333,0,0,0.69222],926:[0,0.68333,0.15294,0,0.66444],928:M124,931:[0,0.68333,0.12028,0,0.71555],933:M131,934:[0,0.68333,0.05986,0,0.71555],936:M131,937:[0,0.68333,0.10257,0,0.71555],8211:[0,0.43056,0.09208,0,0.51111],8212:[0,0.43056,0.09208,0,1.02222],8216:M121,8217:M121,8220:[0,0.69444,0.1685,0,0.51444],8221:M132,8463:M10},"Main-Regular":{32:M7,33:M133,34:M143,35:M220,36:M161,37:M221,38:M136,39:M133,40:M134,41:M134,42:M222,43:M149,44:[0.19444,0.10556,0,0,0.27778],45:[0,0.43056,0,0,0.33333],46:[0,0.10556,0,0,0.27778],47:M141,48:M135,49:M135,50:M135,51:M135,52:M135,53:M135,54:M135,55:M135,56:M135,57:M135,58:M150,59:[0.19444,0.43056,0,0,0.27778],60:M43,61:M27,62:M43,63:M226,64:M136,65:M137,66:[0,0.68333,0,0,0.70834],67:M140,68:[0,0.68333,0,0,0.76389],69:M139,70:[0,0.68333,0,0,0.65278],71:[0,0.68333,0,0,0.78472],72:M137,73:[0,0.68333,0,0,0.36111],74:[0,0.68333,0,0,0.51389],75:M138,76:M154,77:[0,0.68333,0,0,0.91667],78:M137,79:M138,80:M139,81:[0.19444,0.68333,0,0,0.77778],82:[0,0.68333,0,0,0.73611],83:[0,0.68333,0,0,0.55556],84:M140,85:M137,86:[0,0.68333,0.01389,0,0.75],87:[0,0.68333,0.01389,0,1.02778],88:M137,89:[0,0.68333,0.025,0,0.75],90:[0,0.68333,0,0,0.61111],91:M142,92:M141,93:M142,94:M143,95:[0.31,0.12056,0.02778,0,0.5],97:M146,98:M144,99:M145,100:M144,101:M145,102:[0,0.69444,0.07778,0,0.30556],103:[0.19444,0.43056,0.01389,0,0.5],104:M144,105:M151,106:[0.19444,0.66786,0,0,0.30556],107:[0,0.69444,0,0,0.52778],108:M133,109:[0,0.43056,0,0,0.83334],110:M148,111:M146,112:M147,113:[0.19444,0.43056,0,0,0.52778],114:[0,0.43056,0,0,0.39167],115:[0,0.43056,0,0,0.39445],116:[0,0.61508,0,0,0.38889],117:M148,118:[0,0.43056,0.01389,0,0.52778],119:[0,0.43056,0.01389,0,0.72222],120:[0,0.43056,0,0,0.52778],121:[0.19444,0.43056,0.01389,0,0.52778],122:M145,123:M141,124:M142,125:M141,126:[0.35,0.31786,0,0,0.5],160:M7,163:[0,0.69444,0,0,0.76909],167:M155,168:M153,172:[0,0.43056,0,0,0.66667],176:M152,177:M149,182:M160,184:M213,198:[0,0.68333,0,0,0.90278],215:M149,216:[0.04861,0.73194,0,0,0.77778],223:M143,230:[0,0.43056,0,0,0.72222],247:M149,248:[0.09722,0.52778,0,0,0.5],305:M150,338:[0,0.68333,0,0,1.01389],339:M165,567:[0.19444,0.43056,0,0,0.30556],710:M143,711:[0,0.62847,0,0,0.5],713:[0,0.56778,0,0,0.5],714:M143,715:M143,728:M143,729:M151,730:M152,732:M153,733:M143,915:M154,916:M162,920:M138,923:[0,0.68333,0,0,0.69445],926:[0,0.68333,0,0,0.66667],928:M137,931:M140,933:M138,934:M140,936:M138,937:M140,8211:[0,0.43056,0.02778,0,0.5],8212:[0,0.43056,0.02778,0,1],8216:M133,8217:M133,8220:M143,8221:M143,8224:M155,8225:M155,8230:[0,0.12,0,0,1.172],8242:[0,0.55556,0,0,0.275],8407:[0,0.71444,0.15382,0,0.5],8463:M10,8465:M156,8467:[0,0.69444,0,0.11111,0.41667],8472:[0.19444,0.43056,0,0.11111,0.63646],8476:M156,8501:M170,8592:M12,8593:M157,8594:M12,8595:M157,8596:M12,8597:M141,8598:M158,8599:M158,8600:M158,8601:M158,8614:[0.011,0.511,0,0,1],8617:M159,8618:M159,8636:M12,8637:M12,8640:M12,8641:M12,8652:[0.011,0.671,0,0,1],8656:M12,8657:M160,8658:M12,8659:M160,8660:M12,8661:[0.25,0.75,0,0,0.61111],8704:M144,8706:[0,0.69444,0.05556,0.08334,0.5309],8707:M144,8709:M161,8711:M162,8712:M163,8715:M163,8722:M149,8723:M149,8725:M141,8726:M141,8727:M171,8728:M164,8729:M164,8730:[0.2,0.8,0,0,0.83334],8733:M165,8734:M17,8736:M25,8739:M142,8741:M141,8743:M166,8744:M166,8745:M166,8746:M166,8747:[0.19444,0.69444,0.11111,0,0.41667],8764:M27,8768:[0.19444,0.69444,0,0,0.27778],8771:M167,8773:[-0.022,0.589,0,0,1],8776:M168,8781:M167,8784:[-0.133,0.67,0,0,0.778],8801:M167,8804:M37,8805:M37,8810:M169,8811:M169,8826:M43,8827:M43,8834:M43,8835:M43,8838:M37,8839:M37,8846:M166,8849:M37,8850:M37,8851:M166,8852:M166,8853:M149,8854:M149,8855:M149,8856:M149,8857:M149,8866:M170,8867:M170,8868:M136,8869:M136,8872:[0.249,0.75,0,0,0.867],8900:M164,8901:[-0.05555,0.44445,0,0,0.27778],8902:M171,8904:[5e-3,0.505,0,0,0.9],8942:[0.03,0.9,0,0,0.278],8943:[-0.19,0.31,0,0,1.172],8945:[-0.1,0.82,0,0,1.282],8968:M172,8969:M172,8970:M172,8971:M172,8994:M173,8995:M173,9136:M174,9137:M174,9651:M175,9657:M171,9661:M175,9667:M171,9711:M158,9824:M176,9825:M176,9826:M176,9827:M176,9837:[0,0.75,0,0,0.38889],9838:M177,9839:M177,10216:M134,10217:M134,10222:M174,10223:M174,10229:[0.011,0.511,0,0,1.609],10230:M178,10231:[0.011,0.511,0,0,1.859],10232:[0.024,0.525,0,0,1.609],10233:[0.024,0.525,0,0,1.638],10234:[0.024,0.525,0,0,1.858],10236:M178,10815:M137,10927:M37,10928:M37,57376:M179},"Math-BoldItalic":{32:M7,48:M180,49:M180,50:M180,51:M181,52:M181,53:M181,54:M68,55:M181,56:M68,57:M181,65:M72,66:[0,0.68611,0.04835,0,0.8664],67:[0,0.68611,0.06979,0,0.81694],68:[0,0.68611,0.03194,0,0.93812],69:[0,0.68611,0.05451,0,0.81007],70:[0,0.68611,0.15972,0,0.68889],71:[0,0.68611,0,0,0.88673],72:M185,73:[0,0.68611,0.07778,0,0.51111],74:[0,0.68611,0.10069,0,0.63125],75:[0,0.68611,0.06979,0,0.97118],76:M182,77:[0,0.68611,0.11424,0,1.14201],78:[0,0.68611,0.11424,0,0.95034],79:[0,0.68611,0.03194,0,0.83666],80:[0,0.68611,0.15972,0,0.72309],81:[0.19444,0.68611,0,0,0.86861],82:[0,0.68611,421e-5,0,0.87235],83:[0,0.68611,0.05382,0,0.69271],84:[0,0.68611,0.15972,0,0.63663],85:[0,0.68611,0.11424,0,0.80027],86:[0,0.68611,0.25555,0,0.67778],87:[0,0.68611,0.15972,0,1.09305],88:[0,0.68611,0.07778,0,0.94722],89:[0,0.68611,0.25555,0,0.67458],90:[0,0.68611,0.06979,0,0.77257],97:[0,0.44444,0,0,0.63287],98:[0,0.69444,0,0,0.52083],99:[0,0.44444,0,0,0.51342],100:[0,0.69444,0,0,0.60972],101:[0,0.44444,0,0,0.55361],102:[0.19444,0.69444,0.11042,0,0.56806],103:[0.19444,0.44444,0.03704,0,0.5449],104:M183,105:[0,0.69326,0,0,0.4048],106:[0.19444,0.69326,0.0622,0,0.47083],107:[0,0.69444,0.01852,0,0.6037],108:[0,0.69444,88e-4,0,0.34815],109:[0,0.44444,0,0,1.0324],110:[0,0.44444,0,0,0.71296],111:M187,112:[0.19444,0.44444,0,0,0.60092],113:[0.19444,0.44444,0.03704,0,0.54213],114:[0,0.44444,0.03194,0,0.5287],115:[0,0.44444,0,0,0.53125],116:[0,0.63492,0,0,0.41528],117:[0,0.44444,0,0,0.68102],118:[0,0.44444,0.03704,0,0.56666],119:[0,0.44444,0.02778,0,0.83148],120:[0,0.44444,0,0,0.65903],121:[0.19444,0.44444,0.03704,0,0.59028],122:[0,0.44444,0.04213,0,0.55509],160:M7,915:[0,0.68611,0.15972,0,0.65694],916:M94,920:[0,0.68611,0.03194,0,0.86722],923:M184,926:[0,0.68611,0.07458,0,0.84125],928:M185,931:[0,0.68611,0.05451,0,0.88507],933:[0,0.68611,0.15972,0,0.67083],934:M186,936:[0,0.68611,0.11653,0,0.71402],937:[0,0.68611,0.04835,0,0.8789],945:[0,0.44444,0,0,0.76064],946:[0.19444,0.69444,0.03403,0,0.65972],947:[0.19444,0.44444,0.06389,0,0.59003],948:[0,0.69444,0.03819,0,0.52222],949:[0,0.44444,0,0,0.52882],950:[0.19444,0.69444,0.06215,0,0.50833],951:[0.19444,0.44444,0.03704,0,0.6],952:[0,0.69444,0.03194,0,0.5618],953:[0,0.44444,0,0,0.41204],954:[0,0.44444,0,0,0.66759],955:[0,0.69444,0,0,0.67083],956:[0.19444,0.44444,0,0,0.70787],957:[0,0.44444,0.06898,0,0.57685],958:[0.19444,0.69444,0.03021,0,0.50833],959:M187,960:[0,0.44444,0.03704,0,0.68241],961:M188,962:[0.09722,0.44444,0.07917,0,0.42361],963:[0,0.44444,0.03704,0,0.68588],964:[0,0.44444,0.13472,0,0.52083],965:[0,0.44444,0.03704,0,0.63055],966:[0.19444,0.44444,0,0,0.74722],967:[0.19444,0.44444,0,0,0.71805],968:[0.19444,0.69444,0.03704,0,0.75833],969:[0,0.44444,0.03704,0,0.71782],977:[0,0.69444,0,0,0.69155],981:[0.19444,0.69444,0,0,0.7125],982:[0,0.44444,0.03194,0,0.975],1009:M188,1013:[0,0.44444,0,0,0.48333],57649:[0,0.44444,0,0,0.39352],57911:[0.19444,0.44444,0,0,0.43889]},"Math-Italic":{32:M7,48:M146,49:M146,50:M146,51:M189,52:M189,53:M189,54:M135,55:M189,56:M135,57:M189,65:[0,0.68333,0,0.13889,0.75],66:[0,0.68333,0.05017,0.08334,0.75851],67:[0,0.68333,0.07153,0.08334,0.71472],68:[0,0.68333,0.02778,0.05556,0.82792],69:[0,0.68333,0.05764,0.08334,0.7382],70:[0,0.68333,0.13889,0.08334,0.64306],71:[0,0.68333,0,0.08334,0.78625],72:M191,73:[0,0.68333,0.07847,0.11111,0.43958],74:[0,0.68333,0.09618,0.16667,0.55451],75:[0,0.68333,0.07153,0.05556,0.84931],76:[0,0.68333,0,0.02778,0.68056],77:[0,0.68333,0.10903,0.08334,0.97014],78:[0,0.68333,0.10903,0.08334,0.80347],79:M190,80:[0,0.68333,0.13889,0.08334,0.64201],81:[0.19444,0.68333,0,0.08334,0.79056],82:[0,0.68333,773e-5,0.08334,0.75929],83:[0,0.68333,0.05764,0.08334,0.6132],84:[0,0.68333,0.13889,0.08334,0.58438],85:[0,0.68333,0.10903,0.02778,0.68278],86:[0,0.68333,0.22222,0,0.58333],87:[0,0.68333,0.13889,0,0.94445],88:[0,0.68333,0.07847,0.08334,0.82847],89:[0,0.68333,0.22222,0,0.58056],90:[0,0.68333,0.07153,0.08334,0.68264],97:[0,0.43056,0,0,0.52859],98:[0,0.69444,0,0,0.42917],99:[0,0.43056,0,0.05556,0.43276],100:[0,0.69444,0,0.16667,0.52049],101:[0,0.43056,0,0.05556,0.46563],102:[0.19444,0.69444,0.10764,0.16667,0.48959],103:[0.19444,0.43056,0.03588,0.02778,0.47697],104:[0,0.69444,0,0,0.57616],105:[0,0.65952,0,0,0.34451],106:[0.19444,0.65952,0.05724,0,0.41181],107:[0,0.69444,0.03148,0,0.5206],108:[0,0.69444,0.01968,0.08334,0.29838],109:[0,0.43056,0,0,0.87801],110:[0,0.43056,0,0,0.60023],111:M192,112:[0.19444,0.43056,0,0.08334,0.50313],113:[0.19444,0.43056,0.03588,0.08334,0.44641],114:[0,0.43056,0.02778,0.05556,0.45116],115:[0,0.43056,0,0.05556,0.46875],116:[0,0.61508,0,0.08334,0.36111],117:[0,0.43056,0,0.02778,0.57246],118:[0,0.43056,0.03588,0.02778,0.48472],119:[0,0.43056,0.02691,0.08334,0.71592],120:[0,0.43056,0,0.02778,0.57153],121:[0.19444,0.43056,0.03588,0.05556,0.49028],122:[0,0.43056,0.04398,0.05556,0.46505],160:M7,915:[0,0.68333,0.13889,0.08334,0.61528],916:[0,0.68333,0,0.16667,0.83334],920:M190,923:[0,0.68333,0,0.16667,0.69445],926:[0,0.68333,0.07569,0.08334,0.74236],928:M191,931:[0,0.68333,0.05764,0.08334,0.77986],933:[0,0.68333,0.13889,0.05556,0.58333],934:[0,0.68333,0,0.08334,0.66667],936:[0,0.68333,0.11,0.05556,0.61222],937:[0,0.68333,0.05017,0.08334,0.7724],945:[0,0.43056,37e-4,0.02778,0.6397],946:[0.19444,0.69444,0.05278,0.08334,0.56563],947:[0.19444,0.43056,0.05556,0,0.51773],948:[0,0.69444,0.03785,0.05556,0.44444],949:[0,0.43056,0,0.08334,0.46632],950:[0.19444,0.69444,0.07378,0.08334,0.4375],951:[0.19444,0.43056,0.03588,0.05556,0.49653],952:[0,0.69444,0.02778,0.08334,0.46944],953:[0,0.43056,0,0.05556,0.35394],954:[0,0.43056,0,0,0.57616],955:[0,0.69444,0,0,0.58334],956:[0.19444,0.43056,0,0.02778,0.60255],957:[0,0.43056,0.06366,0.02778,0.49398],958:[0.19444,0.69444,0.04601,0.11111,0.4375],959:M192,960:[0,0.43056,0.03588,0,0.57003],961:M193,962:[0.09722,0.43056,0.07986,0.08334,0.36285],963:[0,0.43056,0.03588,0,0.57141],964:[0,0.43056,0.1132,0.02778,0.43715],965:[0,0.43056,0.03588,0.02778,0.54028],966:[0.19444,0.43056,0,0.08334,0.65417],967:[0.19444,0.43056,0,0.05556,0.62569],968:[0.19444,0.69444,0.03588,0.11111,0.65139],969:[0,0.43056,0.03588,0,0.62245],977:[0,0.69444,0,0.08334,0.59144],981:[0.19444,0.69444,0,0.08334,0.59583],982:[0,0.43056,0.02778,0,0.82813],1009:M193,1013:[0,0.43056,0,0.05556,0.4059],57649:[0,0.43056,0,0.02778,0.32246],57911:[0.19444,0.43056,0,0.08334,0.38403]},"SansSerif-Bold":{32:M7,33:[0,0.69444,0,0,0.36667],34:M210,35:[0.19444,0.69444,0,0,0.91667],36:[0.05556,0.75,0,0,0.55],37:[0.05556,0.75,0,0,1.02912],38:[0,0.69444,0,0,0.83056],39:M206,40:M194,41:M194,42:[0,0.75,0,0,0.55],43:[0.11667,0.61667,0,0,0.85556],44:[0.10556,0.13056,0,0,0.30556],45:[0,0.45833,0,0,0.36667],46:[0,0.13056,0,0,0.30556],47:[0.25,0.75,0,0,0.55],48:M195,49:M195,50:M195,51:M195,52:M195,53:M195,54:M195,55:M195,56:M195,57:M195,58:[0,0.45833,0,0,0.30556],59:[0.10556,0.45833,0,0,0.30556],61:[-0.09375,0.40625,0,0,0.85556],63:M198,64:M196,65:M196,66:M196,67:M199,68:M197,69:[0,0.69444,0,0,0.64167],70:M170,71:M196,72:M197,73:[0,0.69444,0,0,0.33056],74:M198,75:M200,76:M207,77:[0,0.69444,0,0,0.97778],78:M197,79:M197,80:M199,81:[0.10556,0.69444,0,0,0.79445],82:M199,83:M170,84:M196,85:M200,86:[0,0.69444,0.01528,0,0.73334],87:[0,0.69444,0.01528,0,1.03889],88:M196,89:[0,0.69444,0.0275,0,0.73334],90:M208,91:M201,93:M201,94:M195,95:[0.35,0.10833,0.03056,0,0.55],97:[0,0.45833,0,0,0.525],98:M202,99:[0,0.45833,0,0,0.48889],100:M202,101:[0,0.45833,0,0,0.51111],102:[0,0.69444,0.07639,0,0.33611],103:[0.19444,0.45833,0.01528,0,0.55],104:M202,105:M203,106:[0.19444,0.69444,0,0,0.28611],107:[0,0.69444,0,0,0.53056],108:M203,109:[0,0.45833,0,0,0.86667],110:M205,111:[0,0.45833,0,0,0.55],112:M204,113:M204,114:[0,0.45833,0.01528,0,0.37222],115:[0,0.45833,0,0,0.42167],116:[0,0.58929,0,0,0.40417],117:M205,118:[0,0.45833,0.01528,0,0.5],119:[0,0.45833,0.01528,0,0.74445],120:[0,0.45833,0,0,0.5],121:[0.19444,0.45833,0.01528,0,0.5],122:[0,0.45833,0,0,0.47639],126:[0.35,0.34444,0,0,0.55],160:M7,168:M195,176:M196,180:M195,184:[0.17014,0,0,0,0.48889],305:[0,0.45833,0,0,0.25556],567:[0.19444,0.45833,0,0,0.28611],710:M195,711:[0,0.63542,0,0,0.55],713:[0,0.63778,0,0,0.55],728:M195,729:M206,730:M196,732:M195,733:M195,915:M207,916:[0,0.69444,0,0,0.91667],920:M209,923:M208,926:M196,928:M197,931:M197,933:M209,934:M197,936:M209,937:M197,8211:[0,0.45833,0.03056,0,0.55],8212:[0,0.45833,0.03056,0,1.10001],8216:M206,8217:M206,8220:M210,8221:M210},"SansSerif-Italic":{32:M7,33:[0,0.69444,0.05733,0,0.31945],34:M219,35:[0.19444,0.69444,0.05087,0,0.83334],36:[0.05556,0.75,0.11156,0,0.5],37:[0.05556,0.75,0.03126,0,0.83334],38:[0,0.69444,0.03058,0,0.75834],39:M218,40:[0.25,0.75,0.13164,0,0.38889],41:[0.25,0.75,0.02536,0,0.38889],42:[0,0.75,0.11775,0,0.5],43:[0.08333,0.58333,0.02536,0,0.77778],44:M223,45:[0,0.44444,0.01946,0,0.33333],46:M224,47:[0.25,0.75,0.13164,0,0.5],48:M211,49:M211,50:M211,51:M211,52:M211,53:M211,54:M211,55:M211,56:M211,57:M211,58:[0,0.44444,0.02502,0,0.27778],59:[0.125,0.44444,0.02502,0,0.27778],61:[-0.13,0.37,0.05087,0,0.77778],63:[0,0.69444,0.11809,0,0.47222],64:[0,0.69444,0.07555,0,0.66667],65:M227,66:[0,0.69444,0.08293,0,0.66667],67:[0,0.69444,0.11983,0,0.63889],68:[0,0.69444,0.07555,0,0.72223],69:[0,0.69444,0.11983,0,0.59722],70:[0,0.69444,0.13372,0,0.56945],71:[0,0.69444,0.11983,0,0.66667],72:M212,73:[0,0.69444,0.13372,0,0.27778],74:[0,0.69444,0.08094,0,0.47222],75:[0,0.69444,0.11983,0,0.69445],76:M229,77:[0,0.69444,0.08094,0,0.875],78:M212,79:[0,0.69444,0.07555,0,0.73611],80:[0,0.69444,0.08293,0,0.63889],81:[0.125,0.69444,0.07555,0,0.73611],82:[0,0.69444,0.08293,0,0.64584],83:[0,0.69444,0.09205,0,0.55556],84:[0,0.69444,0.13372,0,0.68056],85:[0,0.69444,0.08094,0,0.6875],86:[0,0.69444,0.1615,0,0.66667],87:[0,0.69444,0.1615,0,0.94445],88:[0,0.69444,0.13372,0,0.66667],89:[0,0.69444,0.17261,0,0.66667],90:[0,0.69444,0.11983,0,0.61111],91:[0.25,0.75,0.15942,0,0.28889],93:[0.25,0.75,0.08719,0,0.28889],94:M214,95:[0.35,0.09444,0.08616,0,0.5],97:[0,0.44444,981e-5,0,0.48056],98:[0,0.69444,0.03057,0,0.51667],99:[0,0.44444,0.08336,0,0.44445],100:[0,0.69444,0.09483,0,0.51667],101:[0,0.44444,0.06778,0,0.44445],102:[0,0.69444,0.21705,0,0.30556],103:[0.19444,0.44444,0.10836,0,0.5],104:[0,0.69444,0.01778,0,0.51667],105:[0,0.67937,0.09718,0,0.23889],106:[0.19444,0.67937,0.09162,0,0.26667],107:[0,0.69444,0.08336,0,0.48889],108:[0,0.69444,0.09483,0,0.23889],109:[0,0.44444,0.01778,0,0.79445],110:[0,0.44444,0.01778,0,0.51667],111:[0,0.44444,0.06613,0,0.5],112:[0.19444,0.44444,0.0389,0,0.51667],113:[0.19444,0.44444,0.04169,0,0.51667],114:[0,0.44444,0.10836,0,0.34167],115:[0,0.44444,0.0778,0,0.38333],116:[0,0.57143,0.07225,0,0.36111],117:[0,0.44444,0.04169,0,0.51667],118:[0,0.44444,0.10836,0,0.46111],119:[0,0.44444,0.10836,0,0.68334],120:[0,0.44444,0.09169,0,0.46111],121:[0.19444,0.44444,0.10836,0,0.46111],122:[0,0.44444,0.08752,0,0.43472],126:[0.35,0.32659,0.08826,0,0.5],160:M7,168:[0,0.67937,0.06385,0,0.5],176:M215,184:M213,305:[0,0.44444,0.04169,0,0.23889],567:[0.19444,0.44444,0.04169,0,0.26667],710:M214,711:[0,0.63194,0.08432,0,0.5],713:[0,0.60889,0.08776,0,0.5],714:M216,715:M143,728:[0,0.69444,0.09483,0,0.5],729:[0,0.67937,0.07774,0,0.27778],730:M215,732:[0,0.67659,0.08826,0,0.5],733:M216,915:[0,0.69444,0.13372,0,0.54167],916:M237,920:[0,0.69444,0.07555,0,0.77778],923:M170,926:[0,0.69444,0.12816,0,0.66667],928:M212,931:[0,0.69444,0.11983,0,0.72222],933:M217,934:[0,0.69444,0.04603,0,0.72222],936:M217,937:[0,0.69444,0.08293,0,0.72222],8211:[0,0.44444,0.08616,0,0.5],8212:[0,0.44444,0.08616,0,1],8216:M218,8217:M218,8220:[0,0.69444,0.14205,0,0.5],8221:M219},"SansSerif-Regular":{32:M7,33:[0,0.69444,0,0,0.31945],34:M143,35:M220,36:M161,37:M221,38:[0,0.69444,0,0,0.75834],39:M133,40:M134,41:M134,42:M222,43:M149,44:M223,45:[0,0.44444,0,0,0.33333],46:M224,47:M141,48:M225,49:M225,50:M225,51:M225,52:M225,53:M225,54:M225,55:M225,56:M225,57:M225,58:[0,0.44444,0,0,0.27778],59:[0.125,0.44444,0,0,0.27778],61:[-0.13,0.37,0,0,0.77778],63:M226,64:M227,65:M227,66:M227,67:M75,68:[0,0.69444,0,0,0.72223],69:M228,70:[0,0.69444,0,0,0.56945],71:M227,72:M230,73:M133,74:M226,75:[0,0.69444,0,0,0.69445],76:M229,77:[0,0.69444,0,0,0.875],78:M230,79:[0,0.69444,0,0,0.73611],80:M75,81:[0.125,0.69444,0,0,0.73611],82:[0,0.69444,0,0,0.64584],83:M144,84:[0,0.69444,0,0,0.68056],85:[0,0.69444,0,0,0.6875],86:[0,0.69444,0.01389,0,0.66667],87:[0,0.69444,0.01389,0,0.94445],88:M227,89:[0,0.69444,0.025,0,0.66667],90:M170,91:M231,93:M231,94:M143,95:[0.35,0.09444,0.02778,0,0.5],97:[0,0.44444,0,0,0.48056],98:M232,99:M233,100:M232,101:M233,102:[0,0.69444,0.06944,0,0.30556],103:[0.19444,0.44444,0.01389,0,0.5],104:M232,105:[0,0.67937,0,0,0.23889],106:[0.19444,0.67937,0,0,0.26667],107:[0,0.69444,0,0,0.48889],108:[0,0.69444,0,0,0.23889],109:[0,0.44444,0,0,0.79445],110:M236,111:[0,0.44444,0,0,0.5],112:M234,113:M234,114:[0,0.44444,0.01389,0,0.34167],115:M235,116:[0,0.57143,0,0,0.36111],117:M236,118:[0,0.44444,0.01389,0,0.46111],119:[0,0.44444,0.01389,0,0.68334],120:[0,0.44444,0,0,0.46111],121:[0.19444,0.44444,0.01389,0,0.46111],122:[0,0.44444,0,0,0.43472],126:[0.35,0.32659,0,0,0.5],160:M7,168:[0,0.67937,0,0,0.5],176:M227,184:M213,305:[0,0.44444,0,0,0.23889],567:[0.19444,0.44444,0,0,0.26667],710:M143,711:[0,0.63194,0,0,0.5],713:[0,0.60889,0,0,0.5],714:M143,715:M143,728:M143,729:[0,0.67937,0,0,0.27778],730:M227,732:[0,0.67659,0,0,0.5],733:M143,915:M229,916:M237,920:M136,923:M170,926:M227,928:M230,931:M156,933:M136,934:M156,936:M136,937:M156,8211:[0,0.44444,0.02778,0,0.5],8212:[0,0.44444,0.02778,0,1],8216:M133,8217:M133,8220:M143,8221:M143},"Script-Regular":{32:M7,65:[0,0.7,0.22925,0,0.80253],66:[0,0.7,0.04087,0,0.90757],67:[0,0.7,0.1689,0,0.66619],68:[0,0.7,0.09371,0,0.77443],69:[0,0.7,0.18583,0,0.56162],70:[0,0.7,0.13634,0,0.89544],71:[0,0.7,0.17322,0,0.60961],72:[0,0.7,0.29694,0,0.96919],73:[0,0.7,0.19189,0,0.80907],74:[0.27778,0.7,0.19189,0,1.05159],75:[0,0.7,0.31259,0,0.91364],76:[0,0.7,0.19189,0,0.87373],77:[0,0.7,0.15981,0,1.08031],78:[0,0.7,0.3525,0,0.9015],79:[0,0.7,0.08078,0,0.73787],80:[0,0.7,0.08078,0,1.01262],81:[0,0.7,0.03305,0,0.88282],82:[0,0.7,0.06259,0,0.85],83:[0,0.7,0.19189,0,0.86767],84:[0,0.7,0.29087,0,0.74697],85:[0,0.7,0.25815,0,0.79996],86:[0,0.7,0.27523,0,0.62204],87:[0,0.7,0.27523,0,0.80532],88:[0,0.7,0.26006,0,0.94445],89:[0,0.7,0.2939,0,0.70961],90:[0,0.7,0.24037,0,0.8212],160:M7},"Size1-Regular":{32:M7,40:M238,41:M238,47:M239,91:M240,92:M239,93:M240,123:M241,125:M241,160:M7,710:M242,732:M242,770:M242,771:M242,8214:[-99e-5,0.601,0,0,0.77778],8593:M243,8595:M243,8657:M244,8659:M244,8719:M245,8720:M245,8721:[0.25001,0.75,0,0,1.05556],8730:[0.35001,0.85,0,0,1],8739:[-599e-5,0.606,0,0,0.33333],8741:[-599e-5,0.606,0,0,0.55556],8747:M247,8748:M246,8749:M246,8750:M247,8896:M248,8897:M248,8898:M248,8899:M248,8968:M249,8969:M249,8970:M249,8971:M249,9168:M277,10216:M249,10217:M249,10752:M250,10753:M250,10754:M250,10756:M248,10758:M248},"Size2-Regular":{32:M7,40:M251,41:M251,47:M252,91:M253,92:M252,93:M253,123:M254,125:M254,160:M7,710:M255,732:M255,770:M255,771:M255,8719:M256,8720:M256,8721:[0.55001,1.05,0,0,1.44445],8730:[0.65002,1.15,0,0,1],8747:M258,8748:M257,8749:M257,8750:M258,8896:M259,8897:M259,8898:M259,8899:M259,8968:M260,8969:M260,8970:M260,8971:M260,10216:M261,10217:M261,10752:M262,10753:M262,10754:M262,10756:M259,10758:M259},"Size3-Regular":{32:M7,40:M263,41:M263,47:M264,91:M265,92:M264,93:M265,123:M266,125:M266,160:M7,710:M267,732:M267,770:M267,771:M267,8730:[0.95003,1.45,0,0,1],8968:M268,8969:M268,8970:M268,8971:M268,10216:M266,10217:M266},"Size4-Regular":{32:M7,40:M269,41:M269,47:M270,91:M271,92:M270,93:M271,123:M272,125:M272,160:M7,710:M273,732:M273,770:M273,771:M273,8730:[1.25003,1.75,0,0,1],8968:M274,8969:M274,8970:M274,8971:M274,9115:M275,9116:M276,9117:M275,9118:M275,9119:M276,9120:M275,9121:M278,9122:M277,9123:M278,9124:M278,9125:M277,9126:M278,9127:M279,9128:M280,9129:M281,9130:[0,0.3,0,0,0.88889],9131:M279,9132:M280,9133:M281,9143:[0.88502,0.915,0,0,1.05556],10216:M272,10217:M272,57344:M282,57345:M282,57680:M283,57681:M283,57682:M283,57683:M283},"Typewriter-Regular":{32:M290,33:M284,34:M284,35:M284,36:M285,37:M285,38:M284,39:M284,40:M285,41:M285,42:[0,0.52083,0,0,0.525],43:M286,44:[0.13889,0.125,0,0,0.525],45:M286,46:[0,0.125,0,0,0.525],47:M285,48:M284,49:M284,50:M284,51:M284,52:M284,53:M284,54:M284,55:M284,56:M284,57:M284,58:M288,59:[0.13889,0.43056,0,0,0.525],60:M287,61:[-0.19549,0.41562,0,0,0.525],62:M287,63:M284,64:M284,65:M284,66:M284,67:M284,68:M284,69:M284,70:M284,71:M284,72:M284,73:M284,74:M284,75:M284,76:M284,77:M284,78:M284,79:M284,80:M284,81:[0.13889,0.61111,0,0,0.525],82:M284,83:M284,84:M284,85:M284,86:M284,87:M284,88:M284,89:M284,90:M284,91:M285,92:M285,93:M285,94:M284,95:[0.09514,0,0,0,0.525],96:M284,97:M288,98:M284,99:M288,100:M284,101:M288,102:M284,103:M289,104:M284,105:M284,106:[0.22222,0.61111,0,0,0.525],107:M284,108:M284,109:M288,110:M288,111:M288,112:M289,113:M289,114:M288,115:M288,116:[0,0.55358,0,0,0.525],117:M288,118:M288,119:M288,120:M288,121:M289,122:M288,123:M285,124:M285,125:M285,126:M284,127:M284,160:M290,176:M284,184:[0.19445,0,0,0,0.525],305:M288,567:M289,711:[0,0.56597,0,0,0.525],713:[0,0.56555,0,0,0.525],714:M284,715:M284,728:M284,730:M284,770:M284,771:M284,776:M284,915:M284,916:M284,920:M284,923:M284,926:M284,928:M284,931:M284,933:M284,934:M284,936:M284,937:M284,8216:M284,8217:M284,8242:M284,9251:[0.11111,0.21944,0,0,0.525]}};var CJK_REGEX=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/;var PT_PER_EM=10;var AXIS_HEIGHT=0.25;var BASELINE_SKIP=1.2;var X_HEIGHT=0.431;var FONT_METRICS={slant:[0.25,0.25,0.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[X_HEIGHT,X_HEIGHT,X_HEIGHT],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[0.5,0.732,0.925],num2:[0.394,0.384,0.5],num3:[0.444,0.471,0.504],denom1:[0.686,0.752,1.025],denom2:[0.345,0.344,0.532],sup1:[0.413,0.503,0.504],sup2:[0.363,0.431,0.404],sup3:[0.289,0.286,0.294],sub1:[0.15,0.143,0.2],sub2:[0.247,0.286,0.4],supDrop:[0.386,0.353,0.494],subDrop:[0.05,0.071,0.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[AXIS_HEIGHT,AXIS_HEIGHT,AXIS_HEIGHT],defaultRuleThickness:[0.04,0.049,0.049],bigOpSpacing1:[0.111,0.111,0.111],bigOpSpacing2:[0.166,0.166,0.166],bigOpSpacing3:[0.2,0.2,0.2],bigOpSpacing4:[0.6,0.611,0.611],bigOpSpacing5:[0.1,0.143,0.143],sqrtRuleThickness:[0.04,0.04,0.04]};var FONT_SCALE=[0,0.5,0.7,0.8,0.9,1,1.2,1.44,1.728,2.074,2.488];var DEFAULT_FONT_SIZE=5;var EXTRA_CHARACTER_MAP={"\xA0":" ","\u200B":" ","\xC5":"A","\xC7":"C","\xD0":"D","\xDE":"o","\xE5":"a","\xE7":"c","\xF0":"d","\xFE":"o","\u0410":"A","\u0411":"B","\u0412":"B","\u0413":"F","\u0414":"A","\u0415":"E","\u0416":"K","\u0417":"3","\u0418":"N","\u0419":"N","\u041A":"K","\u041B":"N","\u041C":"M","\u041D":"H","\u041E":"O","\u041F":"N","\u0420":"P","\u0421":"C","\u0422":"T","\u0423":"y","\u0424":"O","\u0425":"X","\u0426":"U","\u0427":"h","\u0428":"W","\u0429":"W","\u042A":"B","\u042B":"X","\u042C":"B","\u042D":"3","\u042E":"X","\u042F":"R","\u0430":"a","\u0431":"b","\u0432":"a","\u0433":"r","\u0434":"y","\u0435":"e","\u0436":"m","\u0437":"e","\u0438":"n","\u0439":"n","\u043A":"n","\u043B":"n","\u043C":"m","\u043D":"n","\u043E":"o","\u043F":"n","\u0440":"p","\u0441":"c","\u0442":"o","\u0443":"y","\u0444":"b","\u0445":"x","\u0446":"n","\u0447":"n","\u0448":"w","\u0449":"w","\u044A":"a","\u044B":"m","\u044C":"a","\u044D":"e","\u044E":"m","\u044F":"r"};function getCharacterMetrics(codepoint,fontName){if(codepoint===void 0)codepoint=77;const metrics=font_metrics_data_default[fontName][codepoint];if(metrics){return{defaultMetrics:false,depth:metrics[0],height:metrics[1],italic:metrics[2],skew:metrics[3],width:metrics[4]};}
if(codepoint===11034){return{defaultMetrics:true,depth:0.2,height:0.8,italic:0,skew:0,width:0.8};}
const char=String.fromCodePoint(codepoint);if(char in EXTRA_CHARACTER_MAP)
codepoint=EXTRA_CHARACTER_MAP[char].codePointAt(0);else if(CJK_REGEX.test(char)){codepoint=77;return{defaultMetrics:true,depth:0.2,height:0.9,italic:0,skew:0,width:1};}
return{defaultMetrics:true,depth:0.2,height:0.7,italic:0,skew:0,width:0.8};}
var SVG_BODY={overrightarrow:[["rightarrow"],0.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],0.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],0.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],0.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],longrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],longleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],0.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],0.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],0.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],0.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],0.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],0.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],0.888,522,"xMaxYMin"],xlongequal:[["longequal"],0.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],0.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],0.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],0.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],0.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],longleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],longrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],longleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],0.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],0.888,522],overgroup:[["leftgroup","rightgroup"],0.888,342],undergroup:[["leftgroupunder","rightgroupunder"],0.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xleftrightarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],longleftrightarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xRightleftharpoons:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],longRightleftharpoons:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xLeftrightharpoons:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716],longLeftrightharpoons:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]};var SVG_ACCENTS={widehat1:[1062,239,0.24],widehat2:[2364,300,0.3],widehat3:[2364,360,0.36],widehat4:[2364,420,0.42],widecheck1:[1062,239,0.24],widecheck2:[2364,300,0.3],widecheck3:[2364,360,0.36],widecheck4:[2364,420,0.42],widetilde1:[600,260,0.26],widetilde2:[1033,286,0.286],widetilde3:[2339,306,0.306],widetilde4:[2340,312,0.34],overarc:[1061,159,0.3],underarc:[1061,159,0.3]};var PATHS={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,overarc:`M529 0c179 0 524 115 524 115 5 1 9 5 9 10 0 1-1 2-1 3l-4 22c-1 5-5 9-11 9h-2s-338-93-512-92c-174 0-513 92-513 92h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13 0 0 342-115 520-115z`,underarc:`m 529 160
  c -179 0 -524 -115 -524 -115
  c -5 -1 -9 -5 -9 -10
  c 0 -1 1 -2 1 -3
  l 4 -22
  c 1 -5 5 -9 11 -9
  h 2
  s 338 93 512 92
  c 174 0 513 -92 513 -92
  h 2
  c 5 0 9 4 11 9
  l 5 22
  c 1 6 -2 12 -8 13
  c 0 0 -342 115 -520 115
  z
  `,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,widetilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,widetilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,widetilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,widetilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`};function svgBodyToMarkup(svgBodyName){if(SVG_ACCENTS[svgBodyName]){const[vbWidth,vbHeight,height2]=SVG_ACCENTS[svgBodyName];const result=`<span class="ML__stretchy" style="height:${height2}em"><svg width="100%" height="${height2}em" viewBox="0 0 ${vbWidth} ${vbHeight}" preserveAspectRatio="none" ><path fill="currentcolor" d="${PATHS[svgBodyName]}"></path></svg></span>`;return`<span style="display:inline-block;height:${Math.floor(100 * height2 / 2) / 100}em;min-width:0">${result}</span>`;}
const[paths,minWidth,viewBoxHeight,align3]=SVG_BODY[svgBodyName];let widthClasses;let aligns;const height=viewBoxHeight/1e3;if(paths.length===3){widthClasses=["slice-1-of-3","slice-2-of-3","slice-3-of-3"];aligns=["xMinYMin","xMidYMin","xMaxYMin"];}else if(paths.length===2){widthClasses=["slice-1-of-2","slice-2-of-2"];aligns=["xMinYMin","xMaxYMin"];}else{widthClasses=["slice-1-of-1"];aligns=[align3];}
const body=paths.map((path,i)=>`<span class="${widthClasses[i]}" style=height:${height}em><svg width=400em height=${height}em viewBox="0 0 400000 ${viewBoxHeight}" preserveAspectRatio="${aligns[i]} slice"><path fill="currentcolor" d="${PATHS[path]}"></path></svg></span>`).join("");return`<span style="display:inline-block;height:${height}em;min-width:${minWidth}em;">${body}</span>`;}
function svgBodyHeight(svgBodyName){if(SVG_BODY[svgBodyName])return SVG_BODY[svgBodyName][2]/1e3;return SVG_ACCENTS[svgBodyName][2];}
function stringToCodepoints(string){const result=[];for(let i=0;i<string.length;i++){let code=string.charCodeAt(i);if(code===13&&string.charCodeAt(i+1)===10){code=10;i++;}
if(code===13||code===12)code=10;if(code===0)code=65533;if(code>=55296&&code<=56319){const nextCode=string.charCodeAt(i+1);if(nextCode>=56320&&nextCode<=57343){const lead=code-55296;const trail=nextCode-56320;code=2**16+lead*2**10+trail;i++;}}
result.push(code);}
return result;}
var ZWJ=8205;var EMOJI_COMBINATOR=[[ZWJ,1],[65038,2],[127995,5],[129456,4],[917536,96]];var emojiCombinator;var REGIONAL_INDICATOR=[127462,127487];function isEmojiCombinator(code){var _a3;if(emojiCombinator===void 0){emojiCombinator={};for(const x of EMOJI_COMBINATOR)
for(let i=x[0];i<=x[0]+x[1]-1;i++)emojiCombinator[i]=true;}
return(_a3=emojiCombinator[code])!=null?_a3:false;}
function isRegionalIndicator(code){return code>=REGIONAL_INDICATOR[0]&&code<=REGIONAL_INDICATOR[1];}
function splitGraphemes(string){if(/^[\u0020-\u00FF]*$/.test(string))return string;const result=[];const codePoints=stringToCodepoints(string);let index=0;while(index<codePoints.length){const code=codePoints[index++];const next=codePoints[index];if(next===ZWJ){const baseIndex=index-1;index+=2;while(codePoints[index]===ZWJ)index+=2;result.push(String.fromCodePoint(...codePoints.slice(baseIndex,index-baseIndex+1)));}else if(isEmojiCombinator(next)){const baseIndex=index-1;while(isEmojiCombinator(codePoints[index]))
index+=codePoints[index]===ZWJ?2:1;result.push(String.fromCodePoint(...codePoints.slice(baseIndex,2*index-baseIndex-1)));}else if(isRegionalIndicator(code)){index+=1;result.push(String.fromCodePoint(...codePoints.slice(index-2,2)));}else result.push(String.fromCodePoint(code));}
return result;}
var Tokenizer=class{constructor(s){this.obeyspaces=false;this.pos=0;this.s=splitGraphemes(s);}
end(){return this.pos>=this.s.length;}
get(){return this.pos<this.s.length?this.s[this.pos++]:"";}
peek(){return this.s[this.pos];}
match(regEx){const execResult=typeof this.s==="string"?regEx.exec(this.s.slice(this.pos)):regEx.exec(this.s.slice(this.pos).join(""));if(execResult==null?void 0:execResult[0]){this.pos+=execResult[0].length;return execResult[0];}
return"";}
next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]+/)){return"<space>";}
if(this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]/)){return"<space>";}
const next=this.get();if(next==="\\"){if(!this.end()){let command=this.match(/^[a-zA-Z\*]+/);if(command){this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]*/);}else{command=this.get();}
return"\\"+command;}}else if(next==="{"){return"<{>";}else if(next==="}"){return"<}>";}else if(next==="^"){if(this.peek()==="^"){this.get();const hex=this.match(/^(\^(\^(\^(\^[\da-f])?[\da-f])?[\da-f])?[\da-f])?[\da-f]{2}/);if(hex){return String.fromCodePoint(Number.parseInt(hex.slice(hex.lastIndexOf("^")+1),16));}}
return next;}else if(next==="#"){if(!this.end()){let isParameter=false;if(/[\d?@]/.test(this.peek())){isParameter=true;if(this.pos+1<this.s.length){const after=this.s[this.pos+1];isParameter=/[^\dA-Za-z]/.test(after);}}
if(isParameter)return"#"+this.get();return"#";}}else if(next==="$"){if(this.peek()==="$"){this.get();return"<$$>";}
return"<$>";}
return next;}};function expand(lex,args){var _a3,_b3,_c2,_d2;const result=[];let token=lex.next();if(token){if(token==="\\relax"){}else if(token==="\\noexpand"){token=lex.next();if(token)result.push(token);}else if(token==="\\obeyspaces")lex.obeyspaces=true;else if(token==="\\bgroup"){result.push("<{>");}else if(token==="\\egroup"){result.push("<}>");}else if(token==="\\string"){token=lex.next();if(token){if(token.startsWith("\\"))
for(const x of token)result.push(x==="\\"?"\\backslash":x);else if(token==="<{>")result.push("\\{");else if(token==="<space>")result.push("~");else if(token==="<}>")result.push("\\}");}}else if(token==="\\csname"){while(lex.peek()==="<space>")lex.next();let command="";let done=false;let tokens=[];do{if(tokens.length===0){if(/^#[\d?@]$/.test(lex.peek())){const parameter=lex.get().slice(1);tokens=tokenize((_b3=(_a3=args==null?void 0:args(parameter))!=null?_a3:args==null?void 0:args("?"))!=null?_b3:"\\placeholder{}",args);token=tokens[0];}else{token=lex.next();tokens=token?[token]:[];}}
done=tokens.length===0;if(!done&&token==="\\endcsname"){done=true;tokens.shift();}
if(!done){done=token==="<$>"||token==="<$$>"||token==="<{>"||token==="<}>"||typeof token==="string"&&token.length>1&&token.startsWith("\\");}
if(!done)command+=tokens.shift();}while(!done);if(command)result.push("\\"+command);result.push(...tokens);}else if(token==="\\endcsname"){}else if(token.length>1&&token.startsWith("#")){const parameter=token.slice(1);result.push(...tokenize((_d2=(_c2=args==null?void 0:args(parameter))!=null?_c2:args==null?void 0:args("?"))!=null?_d2:"\\placeholder{}",args));}else result.push(token);}
return result;}
function tokenize(s,args=null){if(!s)return[];const lines=[];let sep="";for(const line of s.toString().split(/\r?\n/)){if(sep)lines.push(sep);sep=" ";const m=line.match(/((?:\\%)|[^%])*/);if(m!==null)lines.push(m[0]);}
const tokenizer=new Tokenizer(lines.join(""));const result=[];do
result.push(...expand(tokenizer,args));while(!tokenizer.end());return result;}
function joinLatex(segments){let sep="";const result=[];for(const segment of segments){if(segment){if(sep&&/^[a-zA-Z\*]/.test(segment))result.push(sep);result.push(segment);if(/^\\[a-zA-Z]+\*?[\"\'][^\ ]+$/.test(segment))result.push(" ");sep=/\\[a-zA-Z]+\*?$/.test(segment)?" ":"";}}
return result.join("");}
function latexCommand(command,...args){console.assert(command.startsWith("\\"));if(args.length===0)return command;return joinLatex([command,...args.map((x)=>`{${x}}`)]);}
function tokensToString(tokens){return joinLatex(tokens.map((token)=>{var _a3;return(_a3={"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"}[token])!=null?_a3:token;}));}
var _Mode=class _Mode{constructor(name){_Mode._registry[name]=this;}
static createAtom(mode,command,style){return _Mode._registry[mode].createAtom(command,getDefinition(command,mode),style);}
static serialize(atoms,options){var _a3;if(!atoms||atoms.length===0)return"";if((_a3=options.skipStyles)!=null?_a3:false){const body=[];for(const run of getModeRuns(atoms)){const mode=_Mode._registry[run[0].mode];body.push(...mode.serialize(run,options));}
return joinLatex(body);}
return joinLatex(emitFontSizeRun(atoms,options));}
static getFont(mode,box,style){return _Mode._registry[mode].getFont(box,style);}};_Mode._registry={};var Mode=_Mode;function getModeRuns(atoms){const result=[];let run=[];let currentMode="NONE";for(const atom of atoms){if(atom.type!=="first"){if(atom.mode!==currentMode){if(run.length>0)result.push(run);run=[atom];currentMode=atom.mode;}else run.push(atom);}}
if(run.length>0)result.push(run);return result;}
function weightString(atom){if(!atom||atom.mode!=="math")return"";const{style}=atom;if(!style)return"";if(!style.variantStyle)return"";if(style.variantStyle==="bold"||style.variantStyle==="bolditalic")
return"bold";return"";}
function variantString(atom){if(!atom)return"";const{style}=atom;if(!style)return"";let result=style.variant;if(result===void 0)return"normal";if(!["calligraphic","fraktur","double-struck","script","monospace","sans-serif"].includes(result)&&style.variantStyle&&style.variantStyle!=="up")
result+="-"+style.variantStyle;return result;}
function getPropertyRuns(atoms,property){const result=[];let run=[];let currentValue=void 0;for(const atom of atoms){if(atom.type==="first")continue;let value;if(property==="variant")value=variantString(atom);else if(property==="bold")value=weightString(atom);else value=atom.style[property];if(value===currentValue){run.push(atom);}else{if(run.length>0)result.push(run);run=[atom];currentValue=value;}}
if(run.length>0)result.push(run);return result;}
function emitColorRun(run,options){var _a3;const{parent}=run[0];const parentColor=parent==null?void 0:parent.style.color;const result=[];for(const modeRun of getModeRuns(run)){const mode=options.defaultMode;for(const colorRun of getPropertyRuns(modeRun,"color")){const style=colorRun[0].style;const body=Mode._registry[colorRun[0].mode].serialize(colorRun,__spreadProps(__spreadValues({},options),{defaultMode:mode==="text"?"text":"math"}));if(!options.skipStyles&&style.color&&style.color!=="none"&&(!parent||parentColor!==style.color)){result.push(latexCommand("\\textcolor",(_a3=style.verbatimColor)!=null?_a3:style.color,joinLatex(body)));}else result.push(joinLatex(body));}}
return result;}
function emitBackgroundColorRun(run,options){const{parent}=run[0];const parentColor=parent==null?void 0:parent.style.backgroundColor;return getPropertyRuns(run,"backgroundColor").map((x)=>{var _a3;if(x.length>0||x[0].type!=="box"){const style=x[0].style;if(style.backgroundColor&&style.backgroundColor!=="none"&&(!parent||parentColor!==style.backgroundColor)){return latexCommand("\\colorbox",(_a3=style.verbatimBackgroundColor)!=null?_a3:style.backgroundColor,joinLatex(emitColorRun(x,__spreadProps(__spreadValues({},options),{defaultMode:"text"}))));}}
return joinLatex(emitColorRun(x,options));});}
function emitFontSizeRun(run,options){if(run.length===0)return[];const{parent}=run[0];const contextFontsize=parent==null?void 0:parent.style.fontSize;const result=[];for(const sizeRun of getPropertyRuns(run,"fontSize")){const fontsize=sizeRun[0].style.fontSize;const body=emitBackgroundColorRun(sizeRun,options);if(body){if(fontsize&&fontsize!=="auto"&&(!parent||contextFontsize!==fontsize)){result.push(["","\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"][fontsize],...body);}else result.push(...body);}}
return result;}
function boxType(type){if(!type)return void 0;const result={mord:"ord",mbin:"bin",mop:"op",mrel:"rel",mopen:"open",mclose:"close",mpunct:"punct",minner:"inner",spacing:"ignore",latex:"latex",composition:"inner",error:"inner",placeholder:"ord",supsub:"ignore"}[type];return result;}
function atomsBoxType(atoms){if(atoms.length===0)return"ord";const first=boxType(atoms[0].type);const last=boxType(atoms[atoms.length-1].type);if(first&&first===last)return first;return"ord";}
function toString(arg1,arg2){if(typeof arg1==="string")return arg1;if(typeof arg1==="number"){console.assert(Number.isFinite(arg1));const numValue=Math.ceil(100*arg1)/100;if(numValue===0)return"0";return numValue.toString()+(arg2!=null?arg2:"");}
return"";}
var Box=class _Box{constructor(content,options){var _a3,_b3,_c2,_d2,_e;if(typeof content==="number")this.value=String.fromCodePoint(content);else if(typeof content==="string")this.value=content;else if(isArray(content))
this.children=content.filter((x)=>x!==null);else if(content&&content instanceof _Box)this.children=[content];if(this.children)for(const child of this.children)child.parent=this;this.type=(_a3=options==null?void 0:options.type)!=null?_a3:"ignore";this.isSelected=(options==null?void 0:options.isSelected)===true;if(options==null?void 0:options.caret)this.caret=options.caret;this.classes=(_b3=options==null?void 0:options.classes)!=null?_b3:"";this.isTight=(_c2=options==null?void 0:options.isTight)!=null?_c2:false;if(options==null?void 0:options.attributes)this.attributes=options.attributes;let fontName=options==null?void 0:options.fontFamily;if((options==null?void 0:options.style)&&this.value){fontName=(_e=Mode.getFont((_d2=options.mode)!=null?_d2:"math",this,__spreadProps(__spreadValues({variant:"normal"},options.style),{letterShapeStyle:options.letterShapeStyle})))!=null?_e:void 0;}
fontName||(fontName="Main-Regular");this._height=0;this._depth=0;this._width=0;this.hasExplicitWidth=false;this.skew=0;this.italic=0;this.maxFontSize=0;this.scale=1;if((options==null?void 0:options.maxFontSize)!==void 0)
this.maxFontSize=options.maxFontSize;horizontalLayout(this,fontName);}
set atomID(id){if(id===void 0||id.length===0)return;this.id=id;}
selected(isSelected){if(this.isSelected===isSelected)return;this.isSelected=isSelected;if(this.children)
for(const child of this.children)child.selected(isSelected);}
setStyle(prop,value,unit){if(value===void 0)return;const v=toString(value,unit);if(v.length>0){if(!this.cssProperties)this.cssProperties={};this.cssProperties[prop]=v;}}
setTop(top){if(Number.isFinite(top)&&Math.abs(top)>0.01){if(!this.cssProperties)this.cssProperties={};this.cssProperties.top=toString(top,"em");this.height-=top;this.depth+=top;}}
get left(){var _a3;if((_a3=this.cssProperties)==null?void 0:_a3["margin-left"])
return Number.parseFloat(this.cssProperties["margin-left"]);return 0;}
set left(value){if(!Number.isFinite(value))return;if(value===0){if(this.cssProperties)delete this.cssProperties["margin-left"];}else{if(!this.cssProperties)this.cssProperties={};this.cssProperties["margin-left"]=toString(value,"em");}}
set right(value){if(!Number.isFinite(value))return;if(value===0){if(this.cssProperties)delete this.cssProperties["margin-right"];}else{if(!this.cssProperties)this.cssProperties={};this.cssProperties["margin-right"]=toString(value,"em");}}
set bottom(value){if(!Number.isFinite(value))return;if(value===0){if(this.cssProperties)delete this.cssProperties["margin-bottom"];}else{if(!this.cssProperties)this.cssProperties={};this.cssProperties["margin-bottom"]=toString(value,"em");}}
get width(){return this._width*this.scale;}
set width(value){this._width=value;this.hasExplicitWidth=true;}
set softWidth(_value){}
get height(){return this._height*this.scale;}
set height(value){this._height=value;}
get depth(){return this._depth*this.scale;}
set depth(value){this._depth=value;}
wrap(context){const parent=context.parent;if(!parent)return this;if(context.isPhantom)this.setStyle("opacity",0);const color=context.color;if(color&&color!==parent.color)this.setStyle("color",color);let backgroundColor=context.backgroundColor;if(this.isSelected)backgroundColor=highlight(backgroundColor);if(backgroundColor&&backgroundColor!==parent.backgroundColor){this.setStyle("background-color",backgroundColor);this.setStyle("display","inline-block");}
const scale=context.scalingFactor;this.scale=scale;this.skew*=scale;this.italic*=scale;return this;}
toMarkup(){var _a3,_b3,_c2,_d2;let body=(_a3=this.value)!=null?_a3:"";if(this.children)for(const box of this.children)body+=box.toMarkup();let svgMarkup="";if(this.svgBody)svgMarkup=svgBodyToMarkup(this.svgBody);else if(this.svgOverlay){svgMarkup='<span style="';svgMarkup+="display: inline-block;";svgMarkup+=`height:${Math.floor(100 * (this.height + this.depth)) / 100}em;`;svgMarkup+=`vertical-align:${Math.floor(100 * this.depth) / 100}em;`;svgMarkup+='">';svgMarkup+=body;svgMarkup+="</span>";svgMarkup+='<svg style="position:absolute;overflow:visible;';svgMarkup+=`height:${Math.floor(100 * (this.height + this.depth)) / 100}em;`;const padding2=(_b3=this.cssProperties)==null?void 0:_b3.padding;if(padding2){svgMarkup+=`top:${padding2};`;svgMarkup+=`left:${padding2};`;svgMarkup+=`width:calc(100% - 2 * ${padding2} );`;}else svgMarkup+="top:0;left:0;width:100%;";svgMarkup+="z-index:2;";svgMarkup+='"';if(this.svgStyle)svgMarkup+=this.svgStyle;svgMarkup+=` viewBox="0 0 ${Math.floor(100 * this.width) / 100} ${Math.floor(100 * (this.height + this.depth)) / 100}"`;svgMarkup+=`>${this.svgOverlay}</svg>`;}
let props=[];const classes=this.classes.split(" ");classes.push((_c2={latex:"ML__raw-latex",placeholder:"ML__placeholder",error:"ML__error"}[this.type])!=null?_c2:"");if(this.caret==="latex")classes.push("ML__latex-caret");if(this.isSelected)classes.push("ML__selected");const classList=classes.length===1?classes[0]:classes.filter((x,e,a)=>x.length>0&&a.indexOf(x)===e).join(" ");if(classList.length>0)
props.push(`class=${sanitizeAttributeValue(`"${classList}"`)}`);if(this.id)props.push(` data-atom-id=${sanitizeAttributeValue(this.id)}`);if(this.cssId)
props.push(` id=${sanitizeAttributeValue(`"${this.cssId.replace(/ /g, "-")}"`)}`);if(this.attributes){props.concat(Object.keys(this.attributes).map((x)=>`${sanitizeAttributeName(x)}=${sanitizeAttributeValue(this.attributes[x])}`));}
if(this.htmlData){const entries=this.htmlData.split(",");for(const entry of entries){const matched=entry.match(/([^=]+)=(.+$)/);if(matched){const key=sanitizeAttributeName(matched[1]);if(key){if(key==="href"){const url=new URL(matched[2]);if(url.protocol!=="http:"&&url.protocol!=="https:")
throw new Error(`Invalid URL: ${matched[2]}`);props.push(`href="${matched[2].replace(/"/g, "&quot;")}"`);}else
props.push(`data-${key}=${sanitizeAttributeValue(matched[2])}`);}}else{const key=sanitizeAttributeName(entry);if(key)props.push(`data-${key} `);}}}
const cssProps=(_d2=this.cssProperties)!=null?_d2:{};if(this.hasExplicitWidth){if(cssProps.width===void 0)
cssProps.width=`${Math.ceil(this._width * 100) / 100}em`;}
const styles=Object.keys(cssProps).map((x)=>`${x}:${cssProps[x]}`);if(this.scale!==void 0&&this.scale!==1&&(body.length>0||svgMarkup.length>0))
styles.push(`font-size: ${Math.ceil(this.scale * 1e4) / 100}%`);if(this.htmlStyle){for(const entry of this.htmlStyle.split(";")){const matched=entry.match(/([^:]+):(.+$)/);if(matched){const key=matched[1].trim().replace(/ /g,"-");if(key)styles.push(`${key}:${matched[2]}`);}}}
if(styles.length>0)
props.push(`style=${sanitizeAttributeValue(styles.join(";"))}`);let result="";if(props.length>0||svgMarkup.length>0)
result=`<span ${props.join(" ")}>${body}${svgMarkup}</span>`;else result=body;if(this.caret==="text")result+='<span class="ML__text-caret"></span>';else if(this.caret==="math")result+='<span class="ML__caret"></span>';return result;}
tryCoalesceWith(box){if(this.svgBody||!this.value)return false;if(box.svgBody||!box.value)return false;const hasChildren=this.children&&this.children.length>0;const boxHasChildren=box.children&&box.children.length>0;if(hasChildren||boxHasChildren)return false;if(box.cssProperties||this.cssProperties){for(const prop of["border","border-left","border-right","border-right-width","left","margin","margin-left","margin-right","padding","position","width"]){if(box.cssProperties&&prop in box.cssProperties)return false;if(this.cssProperties&&prop in this.cssProperties)return false;}}
const thisStyleCount=this.cssProperties?Object.keys(this.cssProperties).length:0;const boxStyleCount=box.cssProperties?Object.keys(box.cssProperties).length:0;if(thisStyleCount!==boxStyleCount)return false;if(thisStyleCount>0){for(const prop of Object.keys(this.cssProperties)){if(this.cssProperties[prop]!==box.cssProperties[prop])
return false;}}
const classes=this.classes.trim().replace(/\s+/g," ").split(" ");const boxClasses=box.classes.trim().replace(/\s+/g," ").split(" ");if(classes.length!==boxClasses.length)return false;classes.sort();boxClasses.sort();for(const[i,class_]of classes.entries()){if(class_==="ML__vertical-separator")return false;if(class_!==boxClasses[i])return false;}
this.value+=box.value;this.height=Math.max(this.height,box.height);this.depth=Math.max(this.depth,box.depth);this._width=this._width+box._width;this.maxFontSize=Math.max(this.maxFontSize,box.maxFontSize);this.italic=box.italic;return true;}};function coalesceRecursive(boxes){if(!boxes||boxes.length===0)return[];boxes[0].children=coalesceRecursive(boxes[0].children);const result=[boxes[0]];for(let i=1;i<boxes.length;i++){if(!result[result.length-1].tryCoalesceWith(boxes[i])){boxes[i].children=coalesceRecursive(boxes[i].children);result.push(boxes[i]);}}
return result;}
function coalesce(box){if(box.children)box.children=coalesceRecursive(box.children);return box;}
function makeStruts(content,options){if(!content)return new Box(null,options);const topStrut=new Box(null,{classes:"ML__strut",type:"ignore"});topStrut.setStyle("height",Math.max(0,content.height),"em");const struts=[topStrut];if(content.depth!==0){const bottomStrut=new Box(null,{classes:"ML__strut--bottom",type:"ignore"});bottomStrut.setStyle("height",content.height+content.depth,"em");bottomStrut.setStyle("vertical-align",-content.depth,"em");struts.push(bottomStrut);}
struts.push(content);return new Box(struts,__spreadProps(__spreadValues({},options),{type:"lift"}));}
function makeSVGBox(svgBodyName){const height=svgBodyHeight(svgBodyName)/2;const box=new Box(null,{maxFontSize:0});box.height=height+0.166;box.depth=height-0.166;box.svgBody=svgBodyName;return box;}
function horizontalLayout(box,fontName){var _a3;if(box.type==="latex"){box.height=0.9;box.depth=0.2;box._width=1;return;}
if(box.value){box.height=-Infinity;box.depth=-Infinity;box._width=0;box.skew=-Infinity;box.italic=-Infinity;for(let i=0;i<box.value.length;i++){const metrics=getCharacterMetrics(box.value.codePointAt(i),fontName);box.height=Math.max(box.height,metrics.height);box.depth=Math.max(box.depth,metrics.depth);box._width+=metrics.width;box.skew=metrics.skew;box.italic=metrics.italic;}
return;}
if(box.children&&box.children.length>0){let height=-Infinity;let depth=-Infinity;let maxFontSize=0;for(const child of box.children){if(child.height>height)height=child.height;if(child.depth>depth)depth=child.depth;maxFontSize=Math.max(maxFontSize,(_a3=child.maxFontSize)!=null?_a3:0);}
box.height=height;box.depth=depth;box._width=box.children.reduce((acc,x)=>acc+x.width,0);box.maxFontSize=maxFontSize;}}
function sanitizeAttributeName(attribute){attribute=attribute.trim().replace(/ /g,"-");if(attribute.length===0)throw new Error(`Invalid empty attribute name`);const invalidAttributeName=/[\x20\x09\x0a\x0c\x0d"'>/=\x00-\x1f]/;if(invalidAttributeName.test(attribute))
throw new Error(`Invalid attribute name "${attribute}"`);return attribute;}
function sanitizeAttributeValue(value){value=value.trim();if(value.startsWith('"')&&value.endsWith('"')){if(/"/.test(value.slice(1,-1)))
throw new Error(`Invalid attribute value: ${value}`);return value;}
if(value.startsWith("'")&&value.endsWith("'")){if(/'/.test(value.slice(1,-1)))
throw new Error(`Invalid attribute value: ${value}`);return value;}
if(value.length===0)throw new Error(`Invalid empty attribute value`);return`"${value.replace(/"/g, "&quot;")}"`;}
function getVListChildrenAndDepth(params){if("individualShift"in params){const oldChildren=params.individualShift;let prevChild=oldChildren[0];if(prevChild==null)return[null,0];const children=[prevChild];const depth=-prevChild.shift-prevChild.box.depth;let currPos=depth;for(let i=1;i<oldChildren.length;i++){const child=oldChildren[i];const diff=-child.shift-currPos-child.box.depth;const size=diff-(prevChild.box.height+prevChild.box.depth);currPos=currPos+diff;children.push(size);children.push(child);prevChild=child;}
return[children,depth];}
if("top"in params){let bottom=params.top;for(const child of params.children){bottom-=typeof child==="number"?child:child.box.height+child.box.depth;}
return[params.children,bottom];}else if("bottom"in params)return[params.children,-params.bottom];else if("firstBaseline"in params){const firstChild=params.firstBaseline[0];if(typeof firstChild==="number")
throw new Error("First child must be an element.");return[params.firstBaseline,-firstChild.box.depth];}else if("shift"in params){const firstChild=params.children[0];if(typeof firstChild==="number")
throw new Error("First child must be an element.");return[params.children,-firstChild.box.depth-params.shift];}
return[null,0];}
function makeRows(params){var _a3;const[children,depth]=getVListChildrenAndDepth(params);if(!children)return[[],0,0];const pstrut=new Box(null,{classes:"ML__pstrut"});let pstrutSize=0;for(const child of children){if(typeof child!=="number"){const box=child.box;pstrutSize=Math.max(pstrutSize,box.maxFontSize,box.height);}}
pstrutSize+=2;pstrut.height=pstrutSize;pstrut.setStyle("height",pstrutSize,"em");const realChildren=[];let minPos=depth;let maxPos=depth;let currPos=depth;let width=0;for(const child of children){if(typeof child==="number")currPos+=child;else{const box=child.box;const classes=(_a3=child.classes)!=null?_a3:[];const childWrap=new Box([pstrut,box],{classes:classes.join(" "),style:child.style});box.setStyle("height",box.height+box.depth,"em");box.setStyle("display","inline-block");childWrap.setStyle("top",-pstrutSize-currPos-box.depth,"em");if(child.marginLeft)
childWrap.setStyle("margin-left",child.marginLeft,"em");if(child.marginRight)
childWrap.setStyle("margin-right",child.marginRight,"em");realChildren.push(childWrap);currPos+=box.height+box.depth;width=Math.max(width,childWrap.width);}
minPos=Math.min(minPos,currPos);maxPos=Math.max(maxPos,currPos);}
realChildren.forEach((child)=>{child.softWidth=width;});const vlist=new Box(realChildren,{classes:"ML__vlist"});vlist.softWidth=width;vlist.height=maxPos;vlist.setStyle("height",maxPos,"em");if(minPos>=0)
return[[new Box(vlist,{classes:"ML__vlist-r"})],maxPos,-minPos];const depthStrut=new Box(new Box(null),{classes:"ML__vlist"});depthStrut.height=-minPos;depthStrut.setStyle("height",-minPos,"em");const topStrut=new Box(8203,{classes:"ML__vlist-s",maxFontSize:0});topStrut.softWidth=0;topStrut.height=0;topStrut.depth=0;return[[new Box([vlist,topStrut],{classes:"ML__vlist-r"}),new Box(depthStrut,{classes:"ML__vlist-r"})],maxPos,-minPos];}
var VBox=class extends Box{constructor(content,options){var _a3;const[rows,height,depth]=makeRows(content);super(rows.length===1?rows[0]:rows,{type:options==null?void 0:options.type,classes:((_a3=options==null?void 0:options.classes)!=null?_a3:"")+" ML__vlist-t"+(rows.length===2?" ML__vlist-t2":"")});this.height=height;this.depth=depth;this.softWidth=rows.reduce((acc,row)=>Math.max(acc,row.width),0);}};function makeLimitsStack(context,options){var _a3,_b3,_c2,_d2,_e;const metrics=context.metrics;const base=new Box(options.base);const baseShift=(_a3=options.baseShift)!=null?_a3:0;const slant=(_b3=options.slant)!=null?_b3:0;let aboveShift=0;let belowShift=0;if(options.above){aboveShift=(_c2=options.aboveShift)!=null?_c2:Math.max(metrics.bigOpSpacing1,metrics.bigOpSpacing3-options.above.depth);}
if(options.below){belowShift=(_d2=options.belowShift)!=null?_d2:Math.max(metrics.bigOpSpacing2,metrics.bigOpSpacing4-options.below.height);}
let result=null;if(options.below&&options.above){const bottom=metrics.bigOpSpacing5+options.below.height+options.below.depth+belowShift+base.depth+baseShift;result=new VBox({bottom,children:[metrics.bigOpSpacing5,{box:options.below,marginLeft:-slant,classes:["ML__center"]},belowShift,{box:base,classes:["ML__center"]},aboveShift,{box:options.above,marginLeft:slant,classes:["ML__center"]},metrics.bigOpSpacing5]}).wrap(context);}else if(options.below&&!options.above){result=new VBox({top:base.height-baseShift,children:[metrics.bigOpSpacing5,{box:options.below,marginLeft:-slant,classes:["ML__center"]},belowShift,{box:base,classes:["ML__center"]}]}).wrap(context);}else if(!options.below&&options.above){const bottom=base.depth+baseShift;result=new VBox({bottom,children:[{box:base,classes:["ML__center"]},aboveShift,{box:options.above,marginLeft:slant,classes:["ML__center"]},metrics.bigOpSpacing5]}).wrap(context);}else{const bottom=base.depth+baseShift;result=new VBox({bottom,children:[{box:base},metrics.bigOpSpacing5]}).wrap(context);}
return new Box(result,{type:(_e=options.type)!=null?_e:"op"});}
var D=7;var Dc=6;var T=5;var Tc=4;var S=3;var Sc=2;var SS=1;var SSc=0;var Mathstyle=class{constructor(id,sizeDelta,cramped){this.id=id;this.sizeDelta=sizeDelta;this.cramped=cramped;const metricsIndex={"-4":2,"-3":1,0:0}[sizeDelta];this.metrics=Object.keys(FONT_METRICS).reduce((acc,x)=>{return __spreadProps(__spreadValues({},acc),{[x]:FONT_METRICS[x][metricsIndex]});},{});}
getFontSize(size){return Math.max(1,size+this.sizeDelta);}
get sup(){return MATHSTYLES[[SSc,SS,SSc,SS,Sc,S,Sc,S][this.id]];}
get sub(){return MATHSTYLES[[SSc,SSc,SSc,SSc,Sc,Sc,Sc,Sc][this.id]];}
get fracNum(){return MATHSTYLES[[SSc,SS,SSc,SS,Sc,S,Tc,T][this.id]];}
get fracDen(){return MATHSTYLES[[SSc,SSc,SSc,SSc,Sc,Sc,Tc,Tc][this.id]];}
get cramp(){return MATHSTYLES[[SSc,SSc,Sc,Sc,Tc,Tc,Dc,Dc][this.id]];}
get isTight(){return this.sizeDelta<0;}};var NUMERIC_MATHSTYLES={7:new Mathstyle(D,0,false),6:new Mathstyle(Dc,0,true),5:new Mathstyle(T,0,false),4:new Mathstyle(Tc,0,true),3:new Mathstyle(S,-3,false),2:new Mathstyle(Sc,-3,true),1:new Mathstyle(SS,-4,false),0:new Mathstyle(SSc,-4,true)};var MATHSTYLES=__spreadProps(__spreadValues({},NUMERIC_MATHSTYLES),{displaystyle:NUMERIC_MATHSTYLES[D],textstyle:NUMERIC_MATHSTYLES[T],scriptstyle:NUMERIC_MATHSTYLES[S],scriptscriptstyle:NUMERIC_MATHSTYLES[SS]});function convertDimensionToPt(value,precision){var _a3;if(!value)return 0;const f={pt:1,mm:7227/2540,cm:7227/254,ex:35271/8192,px:3/4,em:PT_PER_EM,bp:803/800,dd:1238/1157,pc:12,in:72.27,mu:10/18}[(_a3=value.unit)!=null?_a3:"pt"];if(Number.isFinite(precision)){const factor=10**precision;return Math.round(value.dimension/PT_PER_EM*f*factor)/factor;}
return value.dimension*f;}
function convertDimensionToEm(value,precision){if(value===null)return 0;const result=convertDimensionToPt(value)/PT_PER_EM;if(Number.isFinite(precision)){const factor=10**precision;return Math.round(result*factor)/factor;}
return result;}
function serializeDimension(value){var _a3;return`${value.dimension}${(_a3 = value.unit) != null ? _a3 : "pt"}`;}
function serializeGlue(value){let result=serializeDimension(value.glue);if(value.grow&&value.grow.dimension!==0)
result+=` plus ${serializeDimension(value.grow)}`;if(value.shrink&&value.shrink.dimension!==0)
result+=` minus ${serializeDimension(value.shrink)}`;return result;}
function serializeLatexValue(value){var _a3,_b3;if(value===null||value===void 0)return null;let result="";if("dimension"in value)result=`${value.dimension}${(_a3 = value.unit) != null ? _a3 : "pt"}`;if("glue"in value)result=serializeGlue(value);if("number"in value){if(!("base"in value)||value.base==="decimal")
result=Number(value.number).toString();else if(value.base==="alpha")
result=`\`${String.fromCodePoint(value.number)}`;else{const i=Math.round(value.number)>>>0;if(value.base==="hexadecimal"){result=Number(i).toString(16).toUpperCase();if(i<=255)result=result.padStart(2,"0");else if(i<=65535)result=result.padStart(4,"0");else if(i<=16777215)result=result.padStart(6,"0");else result=result.padStart(8,"0");result=`"${result}`;}else if(value.base==="octal"){result=Number(i).toString(8);if(i<=63)result=result.padStart(2,"0");else if(i<=30583)result=result.padStart(4,"0");else result=result.padStart(8,"0");result=`'${result}`;}}}
if("register"in value){if("factor"in value){if(value.factor===-1)result="-";else if(value.factor!==1)result=Number(value.factor).toString();}
if("global"in value&&value.global)result+="\\global";result+=`\\${value.register}`;}
if("string"in value)result=value.string;if((_b3=value.relax)!=null?_b3:false)result+="\\relax";return result;}
function multiplyLatexValue(value,factor){if(value===null||value===void 0)return null;if("number"in value)return __spreadProps(__spreadValues({},value),{number:value.number*factor});if("register"in value){if("factor"in value&&value.factor)
return __spreadProps(__spreadValues({},value),{factor:value.factor*factor});return __spreadProps(__spreadValues({},value),{factor});}
if("dimension"in value)
return __spreadProps(__spreadValues({},value),{dimension:value.dimension*factor});if("glue"in value){if(value.shrink&&value.grow){return{glue:multiplyLatexValue(value.glue,factor),shrink:multiplyLatexValue(value.shrink,factor),grow:multiplyLatexValue(value.grow,factor)};}
if(value.shrink){return{glue:multiplyLatexValue(value.glue,factor),shrink:multiplyLatexValue(value.shrink,factor)};}
if(value.grow){return{glue:multiplyLatexValue(value.glue,factor),grow:multiplyLatexValue(value.grow,factor)};}
return{glue:multiplyLatexValue(value.glue,factor)};}
return null;}
var DEFAULT_REGISTERS={"p@":{dimension:1},"z@":{dimension:0},"maxdimen":{dimension:16383.99999},"hfuzz":{dimension:0.1},"vfuzz":{dimension:0.1},"overfullrule":{dimension:5},"hsize":{dimension:6.5,unit:"in"},"vsize":{dimension:8.9,unit:"in"},"parindent":{dimension:20},"maxdepth":{dimension:4},"splitmaxdepth":{register:"maxdimen"},"boxmaxdepth":{register:"maxdimen"},"delimitershortfall":{dimension:5},"nulldelimiterspace":{dimension:1.2,unit:"pt"},"scriptspace":{dimension:0.5},"topskip":{dimension:10},"splittopskip":{dimension:10},"normalbaselineskip":{dimension:12},"normallineskip":{dimension:1},"normallineskiplimit":{dimension:0},"jot":{dimension:3},"doublerulesep":{dimension:2},"arrayrulewidth":{dimension:0.4},"arraycolsep":{dimension:5},"fboxsep":{dimension:3},"fboxrule":{dimension:0.4},"z@skip":{glue:{dimension:0},shrink:{dimension:0},grow:{dimension:0}},"hideskip":{glue:{dimension:-1e3},grow:{dimension:1,unit:"fill"}},"@flushglue":{glue:{dimension:0},grow:{dimension:1,unit:"fill"}},"parskip":{glue:{dimension:0},grow:{dimension:1}},"abovedisplayskip":{glue:{dimension:12},grow:{dimension:3},shrink:{dimension:9}},"abovedisplayshortskip":{glue:{dimension:0},grow:{dimension:3}},"belowdisplayskip":{glue:{dimension:12},grow:{dimension:3},shrink:{dimension:9}},"belowdisplayshortskip":{glue:{dimension:7},grow:{dimension:3},shrink:{dimension:4}},"parfillskip":{glue:{dimension:0},grow:{dimension:1,unit:"fil"}},"thinmuskip":{glue:{dimension:3,unit:"mu"}},"medmuskip":{glue:{dimension:4,unit:"mu"},grow:{dimension:2,unit:"mu"},shrink:{dimension:4,unit:"mu"}},"thickmuskip":{glue:{dimension:5,unit:"mu"},grow:{dimension:5,unit:"mu"}},"smallskipamount":{glue:{dimension:3},grow:{dimension:1},shrink:{dimension:1}},"medskipamount":{glue:{dimension:6},grow:{dimension:2},shrink:{dimension:3}},"bigskipamount":{glue:{dimension:12},grow:{dimension:2},shrink:{dimension:4}},"pretolerance":100,"tolerance":200,"hbadness":1e3,"vbadness":1e3,"linepenalty":10,"hyphenpenalty":50,"exhyphenpenalty":50,"binoppenalty":700,"relpenalty":500,"clubpenalty":150,"widowpenalty":150,"displaywidowpenalty":50,"brokenpenalty":100,"predisplaypenalty":1e4,"doublehyphendemerits":1e4,"finalhyphendemerits":5e3,"adjdemerits":1e4,"tracinglostchars":1,"uchyph":1,"delimiterfactor":901,"defaulthyphenchar":"\\-","defaultskewchar":-1,"newlinechar":-1,"showboxbreadth":5,"showboxdepth":3,"errorcontextlines":5,"interdisplaylinepenalty":100,"interfootnotelinepenalty":100,"baselineSkip":1.2,"arraystretch":1,"month":(new Date()).getMonth()+1,"day":(new Date()).getDate(),"year":(new Date()).getFullYear()};function getDefaultRegisters(){return __spreadValues({},DEFAULT_REGISTERS);}
function getDefaultContext(){return{registers:getDefaultRegisters(),smartFence:false,renderPlaceholder:void 0,placeholderSymbol:"\u25A2",letterShapeStyle:l10n.locale.startsWith("fr")?"french":"tex",minFontScale:0,maxMatrixCols:10,colorMap:defaultColorMap,backgroundColorMap:defaultBackgroundColorMap,getMacro:(token)=>getMacroDefinition(token,getMacros())};}
var Context=class _Context{constructor(options,style){var _a3,_b3,_c2,_d2,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o;let template;if(options==null?void 0:options.parent){this.parent=options.parent;template=options.parent;this.registers={};}else{template=__spreadValues(__spreadValues({},getDefaultContext()),(_a3=options==null?void 0:options.from)!=null?_a3:{});this.registers=template.registers;}
if(template.atomIdsSettings)
this.atomIdsSettings=__spreadValues({},template.atomIdsSettings);this.renderPlaceholder=template.renderPlaceholder;this.isPhantom=(_d2=(_c2=options==null?void 0:options.isPhantom)!=null?_c2:(_b3=this.parent)==null?void 0:_b3.isPhantom)!=null?_d2:false;this.letterShapeStyle=template.letterShapeStyle;this.minFontScale=template.minFontScale;this.maxMatrixCols=template.maxMatrixCols;if((style==null?void 0:style.color)&&style.color!=="none")this.color=style.color;else this.color=(_f=(_e=this.parent)==null?void 0:_e.color)!=null?_f:"";if((style==null?void 0:style.backgroundColor)&&style.backgroundColor!=="none")
this.backgroundColor=style.backgroundColor;else this.backgroundColor=(_h=(_g=this.parent)==null?void 0:_g.backgroundColor)!=null?_h:"";if((style==null?void 0:style.fontSize)&&style.fontSize!=="auto"&&style.fontSize!==((_i=this.parent)==null?void 0:_i.size))
this.size=style.fontSize;else this.size=(_k=(_j=this.parent)==null?void 0:_j.size)!=null?_k:DEFAULT_FONT_SIZE;let mathstyle=(_m=(_l=this.parent)==null?void 0:_l.mathstyle)!=null?_m:MATHSTYLES.displaystyle;if(typeof(options==null?void 0:options.mathstyle)==="string"){if(template instanceof _Context){switch(options.mathstyle){case"cramp":mathstyle=mathstyle.cramp;break;case"superscript":mathstyle=mathstyle.sup;break;case"subscript":mathstyle=mathstyle.sub;break;case"numerator":mathstyle=mathstyle.fracNum;break;case"denominator":mathstyle=mathstyle.fracDen;break;}}
switch(options.mathstyle){case"textstyle":mathstyle=MATHSTYLES.textstyle;break;case"displaystyle":mathstyle=MATHSTYLES.displaystyle;break;case"scriptstyle":mathstyle=MATHSTYLES.scriptstyle;break;case"scriptscriptstyle":mathstyle=MATHSTYLES.scriptscriptstyle;break;case"":case"auto":break;}}
this.mathstyle=mathstyle;this.smartFence=template.smartFence;this.placeholderSymbol=template.placeholderSymbol;this.colorMap=(_n=template.colorMap)!=null?_n:(x)=>x;this.backgroundColorMap=(_o=template.backgroundColorMap)!=null?_o:(x)=>x;this.getMacro=template.getMacro;console.assert(this.parent!==void 0||this.registers!==void 0);}
makeID(){if(!this.atomIdsSettings)return void 0;if(this.atomIdsSettings.overrideID)return this.atomIdsSettings.overrideID;if(typeof this.atomIdsSettings.seed!=="number"){return`${Date.now().toString(36).slice(-2)}${Math.floor(
          Math.random() * 1e5
        ).toString(36)}`;}
const result=this.atomIdsSettings.seed.toString(36);this.atomIdsSettings.seed+=1;return result;}
scale(value){return value*this.effectiveFontSize;}
get scalingFactor(){if(!this.parent)return 1;return this.effectiveFontSize/this.parent.effectiveFontSize;}
get isDisplayStyle(){return this.mathstyle.id===D||this.mathstyle.id===Dc;}
get isCramped(){return this.mathstyle.cramped;}
get isTight(){return this.mathstyle.isTight;}
get metrics(){return this.mathstyle.metrics;}
get effectiveFontSize(){return Math.max(FONT_SCALE[Math.max(1,this.size+this.mathstyle.sizeDelta)],this.minFontScale);}
getRegister(name){var _a3;if((_a3=this.registers)==null?void 0:_a3[name])return this.registers[name];if(this.parent)return this.parent.getRegister(name);return void 0;}
getRegisterAsNumber(name){const val=this.getRegister(name);if(typeof val==="number")return val;if(typeof val==="string")return Number(val);return void 0;}
getRegisterAsGlue(name){var _a3;if((_a3=this.registers)==null?void 0:_a3[name]){const value=this.registers[name];if(typeof value==="object"&&"glue"in value)return value;else if(typeof value==="object"&&"dimension"in value)
return{glue:{dimension:value.dimension}};else if(typeof value==="number")return{glue:{dimension:value}};return void 0;}
if(this.parent)return this.parent.getRegisterAsGlue(name);return void 0;}
getRegisterAsEm(name,precision){return convertDimensionToEm(this.getRegisterAsDimension(name),precision);}
getRegisterAsDimension(name){var _a3;if((_a3=this.registers)==null?void 0:_a3[name]){const value=this.registers[name];if(typeof value==="object"&&"glue"in value)return value.glue;else if(typeof value==="object"&&"dimension"in value)return value;else if(typeof value==="number")return{dimension:value};return void 0;}
if(this.parent)return this.parent.getRegisterAsDimension(name);return void 0;}
setRegister(name,value){if(value===void 0){delete this.registers[name];return;}
this.registers[name]=value;}
evaluate(value){if(!value||!("register"in value))return value;let context=this;if("global"in value&&value.global)
while(context.parent)context=context.parent;let factor=1;if("factor"in value&&value.factor!==1&&value.factor!==void 0)
factor=value.factor;const val=context.getRegister(value.register);if(val===void 0)return void 0;if(typeof val==="string")
return{string:Number(val).toString()+val};if(typeof val==="number")return{number:factor*val};const result=context.evaluate(val);if(result===void 0)return void 0;if("string"in result)
return{string:Number(val).toString()+result.string};if("number"in result)return{number:factor*result.number};if("dimension"in result)
return __spreadProps(__spreadValues({},result),{dimension:factor*result.dimension});if("glue"in result){return __spreadProps(__spreadValues({},result),{glue:__spreadProps(__spreadValues({},result.glue),{dimension:factor*result.glue.dimension}),shrink:result.shrink?__spreadProps(__spreadValues({},result.shrink),{dimension:factor*result.shrink.dimension}):void 0,grow:result.grow?__spreadProps(__spreadValues({},result.grow),{dimension:factor*result.grow.dimension}):void 0});}
return value;}
toDimension(value){const val=this.evaluate(value);if(val===void 0)return null;if("dimension"in val)return val;if("glue"in val)return val.glue;if("number"in val)return{dimension:val.number};return null;}
toEm(value,precision){if(value===null)return 0;const dimen=this.toDimension(value);if(dimen===null)return 0;return convertDimensionToPt(dimen,precision)/PT_PER_EM;}
toNumber(value){if(value===null)return null;const val=this.evaluate(value);if(val===void 0)return null;if("number"in val)return val.number;if("dimension"in val)return val.dimension;if("glue"in val)return val.glue.dimension;if("string"in val)return Number(val.string);return null;}
toColor(value){var _a3,_b3;if(value===null)return null;const val=this.evaluate(value);if(val===void 0)return null;if("string"in val)return(_b3=(_a3=this.colorMap)==null?void 0:_a3.call(this,val.string))!=null?_b3:val.string;return null;}
toBackgroundColor(value){var _a3,_b3;if(value===null)return null;const val=this.evaluate(value);if(val===void 0)return null;if("string"in val)
return(_b3=(_a3=this.backgroundColorMap)==null?void 0:_a3.call(this,val.string))!=null?_b3:val.string;return null;}};var NAMED_BRANCHES=["body","above","below","superscript","subscript"];function isNamedBranch(branch){return typeof branch==="string"&&NAMED_BRANCHES.includes(branch);}
function isCellBranch(branch){return branch!==void 0&&Array.isArray(branch)&&branch.length===2;}
var Atom=class _Atom{constructor(options){this.isRoot=false;var _a3,_b3,_c2,_d2,_e,_f,_g;this.type=options.type;if(typeof options.value==="string")this.value=options.value;this.command=(_b3=(_a3=options.command)!=null?_a3:this.value)!=null?_b3:"";this.mode=(_c2=options.mode)!=null?_c2:"math";if(options.isFunction)this.isFunction=true;if(options.isRoot||this.type==="root")this.isRoot=true;if(options.limits)this.subsupPlacement=options.limits;this.style=__spreadValues({},(_d2=options.style)!=null?_d2:{});this.displayContainsHighlight=(_e=options.displayContainsHighlight)!=null?_e:false;this.captureSelection=(_f=options.captureSelection)!=null?_f:false;this.skipBoundary=(_g=options.skipBoundary)!=null?_g:false;if(options.verbatimLatex!==void 0&&options.verbatimLatex!==null)
this.verbatimLatex=options.verbatimLatex;if(options.args)this.args=options.args;if(options.body)this.body=options.body;this._changeCounter=0;}
static createBox(context,atoms,options){var _a3;if(!atoms)return null;const runs=getStyleRuns(atoms);const boxes=[];for(const run of runs){const style=run[0].style;const box=renderStyleRun(context,run,{style:{color:style.color,backgroundColor:style.backgroundColor,fontSize:style.fontSize}});if(box)boxes.push(box);}
if(boxes.length===0)return null;const classes=((_a3=options==null?void 0:options.classes)!=null?_a3:"").trim();if(boxes.length===1&&!classes&&!(options==null?void 0:options.type))
return boxes[0].wrap(context);return new Box(boxes,{classes,type:options==null?void 0:options.type}).wrap(context);}
static serialize(value,options){return Mode.serialize(value,options);}
static commonAncestor(a,b){if(a===b)return a.parent;if(a.parent===b.parent)return a.parent;const parents=new WeakSet();let{parent}=a;while(parent){parents.add(parent);parent=parent.parent;}
parent=b.parent;while(parent){if(parents.has(parent))return parent;parent=parent.parent;}
console.assert(Boolean(parent));return void 0;}
static fromJson(json){if(typeof json==="string")
return new _Atom({type:"mord",value:json,mode:"math"});return new _Atom(json);}
toJson(){if(this._json)return this._json;const result={};if(this.type)result.type=this.type;if(this.mode!=="math")result.mode=this.mode;if(this.command&&this.command!==this.value)
result.command=this.command;if(this.value!==void 0)result.value=this.value;if(this.style&&Object.keys(this.style).length>0)
result.style=__spreadValues({},this.style);if(this.verbatimLatex!==void 0)
result.verbatimLatex=this.verbatimLatex;if(this.subsupPlacement)result.subsupPlacement=this.subsupPlacement;if(this.explicitSubsupPlacement)result.explicitSubsupPlacement=true;if(this.isFunction)result.isFunction=true;if(this.displayContainsHighlight)result.displayContainsHighlight=true;if(this.skipBoundary)result.skipBoundary=true;if(this.captureSelection)result.captureSelection=true;if(this.args)result.args=argumentsToJson(this.args);if(this._branches){for(const branch of Object.keys(this._branches)){if(this._branches[branch]){result[branch]=this._branches[branch].filter((x)=>x.type!=="first").map((x)=>x.toJson());}}}
if(result.type==="mord"){if(Object.keys(result).length===2&&"value"in result)
return result.value;}
this._json=result;return result;}
get changeCounter(){if(this.parent)return this.parent.changeCounter;return this._changeCounter;}
set isDirty(dirty){if(!dirty)return;this._json=void 0;if(!this.parent)this._changeCounter++;if("verbatimLatex"in this)this.verbatimLatex=void 0;this._children=void 0;if(this.parent)this.parent.isDirty=true;}
_serialize(options){if(!(options.expandMacro||options.skipStyles||options.skipPlaceholders)&&typeof this.verbatimLatex==="string")
return this.verbatimLatex;const def=getDefinition(this.command,this.mode);if(def==null?void 0:def.serialize)return def.serialize(this,options);if(this.body&&this.command){return joinLatex([latexCommand(this.command,this.bodyToLatex(options)),this.supsubToLatex(options)]);}
if(this.body){return joinLatex([this.bodyToLatex(options),this.supsubToLatex(options)]);}
if(!this.value||this.value==="\u200B")return"";return this.command;}
bodyToLatex(options){var _a3;const defaultMode=(_a3=options.defaultMode)!=null?_a3:this.mode==="math"?"math":"text";return Mode.serialize(this.body,__spreadProps(__spreadValues({},options),{defaultMode}));}
aboveToLatex(options){return Mode.serialize(this.above,options);}
belowToLatex(options){return Mode.serialize(this.below,options);}
supsubToLatex(options){let result="";options=__spreadProps(__spreadValues({},options),{defaultMode:"math"});if(this.branch("subscript")!==void 0){const sub=Mode.serialize(this.subscript,options);if(sub.length===0)result+="_{}";else if(sub.length===1){if(/^[0-9]$/.test(sub))result+=`_${sub}`;else result+=`_{${sub}}`;}else result+=`_{${sub}}`;}
if(this.branch("superscript")!==void 0){const sup=Mode.serialize(this.superscript,options);if(sup.length===0)result+="^{}";else if(sup.length===1){if(sup==="\u2032")result+="^\\prime ";else if(sup==="\u2033")result+="^\\doubleprime ";else if(/^[0-9]$/.test(sup))result+=`^${sup}`;else result+=`^{${sup}}`;}else result+=`^{${sup}}`;}
return result;}
get treeDepth(){let result=1;let atom=this.parent;while(atom){atom=atom.parent;result+=1;}
return result;}
get inCaptureSelection(){let atom=this;while(atom){if(atom.captureSelection)return true;atom=atom.parent;}
return false;}
get parentPrompt(){let atom=this.parent;while(atom){if(atom.type==="prompt"&&!atom.captureSelection)return atom;atom=atom.parent;}
return null;}
branch(name){if(!isNamedBranch(name))return void 0;if(!this._branches)return void 0;return this._branches[name];}
get branches(){if(!this._branches)return[];const result=[];for(const branch of NAMED_BRANCHES)
if(this._branches[branch])result.push(branch);return result;}
createBranch(name){console.assert(isNamedBranch(name));if(!isNamedBranch(name))return[];if(!this._branches){this._branches={[name]:[this.makeFirstAtom(name)]};}else if(!this._branches[name])
this._branches[name]=[this.makeFirstAtom(name)];this.isDirty=true;return this._branches[name];}
get row(){if(!isCellBranch(this.parentBranch))return-1;return this.parentBranch[0];}
get col(){if(!isCellBranch(this.parentBranch))return-1;return this.parentBranch[1];}
get body(){var _a3;return(_a3=this._branches)==null?void 0:_a3.body;}
set body(atoms){this.setChildren(atoms,"body");}
get superscript(){var _a3;return(_a3=this._branches)==null?void 0:_a3.superscript;}
set superscript(atoms){this.setChildren(atoms,"superscript");}
get subscript(){var _a3;return(_a3=this._branches)==null?void 0:_a3.subscript;}
set subscript(atoms){this.setChildren(atoms,"subscript");}
get above(){var _a3;return(_a3=this._branches)==null?void 0:_a3.above;}
set above(atoms){this.setChildren(atoms,"above");}
get below(){var _a3;return(_a3=this._branches)==null?void 0:_a3.below;}
set below(atoms){this.setChildren(atoms,"below");}
applyStyle(style,options){this.isDirty=true;if(options==null?void 0:options.unstyledOnly){if(style.color&&!this.style.color)this.style.color=style.color;if(style.backgroundColor&&!this.style.backgroundColor)
this.style.backgroundColor=style.backgroundColor;if(style.fontFamily&&!this.style.fontFamily)
this.style.fontFamily=style.fontFamily;if(style.fontShape&&!this.style.fontShape)
this.style.fontShape=style.fontShape;if(style.fontSeries&&!this.style.fontSeries)
this.style.fontSeries=style.fontSeries;if(style.fontSize&&!this.style.fontSize)
this.style.fontSize=style.fontSize;if(style.variant&&!this.style.variant)
this.style.variant=style.variant;if(style.variantStyle&&!this.style.variantStyle)
this.style.variantStyle=style.variantStyle;}else this.style=__spreadValues(__spreadValues({},this.style),style);if(this.style.fontFamily==="none")delete this.style.fontFamily;if(this.style.fontShape==="auto")delete this.style.fontShape;if(this.style.fontSeries==="auto")delete this.style.fontSeries;if(this.style.color==="none"){delete this.style.color;delete this.style.verbatimColor;}
if(this.style.backgroundColor==="none"){delete this.style.backgroundColor;delete this.style.verbatimBackgroundColor;}
if(this.style.fontSize==="auto")delete this.style.fontSize;for(const child of this.children)child.applyStyle(style,options);}
getInitialBaseElement(){var _a3,_b3,_c2;if(this.hasEmptyBranch("body"))return this;console.assert(((_a3=this.body)==null?void 0:_a3[0].type)==="first");return(_c2=(_b3=this.body[1])==null?void 0:_b3.getInitialBaseElement())!=null?_c2:this;}
getFinalBaseElement(){if(this.hasEmptyBranch("body"))return this;return this.body[this.body.length-1].getFinalBaseElement();}
isCharacterBox(){if(this.type==="leftright"||this.type==="genfrac"||this.type==="subsup"||this.type==="delim"||this.type==="array"||this.type==="surd")
return false;return this.getFinalBaseElement().type==="mord";}
hasEmptyBranch(branch){const atoms=this.branch(branch);if(!atoms)return true;console.assert(atoms.length>0);console.assert(atoms[0].type==="first");return atoms.length===1;}
setChildren(children,branch){var _a3;if(!children)return;console.assert(isNamedBranch(branch));if(!isNamedBranch(branch))return;const newBranch=((_a3=children[0])==null?void 0:_a3.type)==="first"?[...children]:[this.makeFirstAtom(branch),...children];if(this._branches)this._branches[branch]=newBranch;else this._branches={[branch]:newBranch};for(const child of children){child.parent=this;child.parentBranch=branch;}
this.isDirty=true;}
makeFirstAtom(branch){const result=new _Atom({type:"first",mode:this.mode});result.parent=this;result.parentBranch=branch;return result;}
addChild(child,branch){console.assert(child.type!=="first");this.createBranch(branch).push(child);this.isDirty=true;child.parent=this;child.parentBranch=branch;}
addChildBefore(child,before){console.assert(before.parentBranch!==void 0);const branch=this.createBranch(before.parentBranch);branch.splice(branch.indexOf(before),0,child);this.isDirty=true;child.parent=this;child.parentBranch=before.parentBranch;}
addChildAfter(child,after){console.assert(after.parentBranch!==void 0);const branch=this.createBranch(after.parentBranch);branch.splice(branch.indexOf(after)+1,0,child);this.isDirty=true;child.parent=this;child.parentBranch=after.parentBranch;}
addChildren(children,branchName){const branch=this.createBranch(branchName);for(const child of children){child.parent=this;child.parentBranch=branchName;branch.push(child);}
this.isDirty=true;}
addChildrenAfter(children,after){console.assert(children.length===0||children[0].type!=="first");console.assert(after.parentBranch!==void 0);const branch=this.createBranch(after.parentBranch);branch.splice(branch.indexOf(after)+1,0,...children);this.isDirty=true;for(const child of children){child.parent=this;child.parentBranch=after.parentBranch;}
return children[children.length-1];}
removeBranch(name){const children=this.branch(name);if(isNamedBranch(name))this._branches[name]=void 0;if(!children)return[];for(const child of children){child.parent=void 0;child.parentBranch=void 0;}
console.assert(children[0].type==="first");const[_first,...rest]=children;this.isDirty=true;return rest;}
removeChild(child){console.assert(child.parent===this);if(child.type==="first")return;const branch=this.branch(child.parentBranch);const index=branch.indexOf(child);console.assert(index>=0);branch.splice(index,1);this.isDirty=true;child.parent=void 0;child.parentBranch=void 0;}
get siblings(){if(!this.parent)return[];return this.parent.branch(this.parentBranch);}
get firstSibling(){return this.siblings[0];}
get lastSibling(){const{siblings}=this;return siblings[siblings.length-1];}
get isFirstSibling(){return this===this.firstSibling;}
get isLastSibling(){return this===this.lastSibling;}
get hasNoSiblings(){return this.siblings.length===1;}
get leftSibling(){console.assert(this.parent!==void 0);const siblings=this.parent.branch(this.parentBranch);return siblings[siblings.indexOf(this)-1];}
get rightSibling(){console.assert(this.parent!==void 0);const siblings=this.parent.branch(this.parentBranch);return siblings[siblings.indexOf(this)+1];}
get hasChildren(){return Boolean(this._branches&&this.children.length>0);}
get firstChild(){console.assert(this.hasChildren);return this.children[0];}
get lastChild(){console.assert(this.hasChildren);const{children}=this;return children[children.length-1];}
get children(){if(this._children)return this._children;if(!this._branches)return[];const result=[];for(const branchName of NAMED_BRANCHES){if(this._branches[branchName]){for(const x of this._branches[branchName]){result.push(...x.children);result.push(x);}}}
this._children=result;return result;}
render(parentContext){if(this.type==="first"&&!parentContext.atomIdsSettings)return null;const def=getDefinition(this.command,this.mode);if(def==null?void 0:def.render)return def.render(this,parentContext);const context=new Context({parent:parentContext},this.style);let result=this.createBox(context,{classes:!this.parent?"ML__base":""});if(!result)return null;if(!this.subsupPlacement&&(this.superscript||this.subscript)){result=this.attachSupsub(context,{base:result});}
return result.wrap(context);}
attachSupsub(parentContext,options){var _a3;const base=options.base;const superscript=this.superscript;const subscript=this.subscript;if(!superscript&&!subscript)return base;let supBox=null;let subBox=null;const isCharacterBox=(_a3=options.isCharacterBox)!=null?_a3:this.isCharacterBox();let supShift=0;if(superscript){const context=new Context({parent:parentContext,mathstyle:"superscript"});supBox=_Atom.createBox(context,superscript);if(!isCharacterBox){supShift=base.height-parentContext.metrics.supDrop*context.scalingFactor;}}
let subShift=0;if(subscript){const context=new Context({parent:parentContext,mathstyle:"subscript"});subBox=_Atom.createBox(context,subscript);if(!isCharacterBox){subShift=base.depth+parentContext.metrics.subDrop*context.scalingFactor;}}
let minSupShift;if(parentContext.isDisplayStyle)
minSupShift=parentContext.metrics.sup1;else if(parentContext.isCramped)
minSupShift=parentContext.metrics.sup3;else minSupShift=parentContext.metrics.sup2;const scriptspace=0.5/PT_PER_EM/parentContext.scalingFactor;let supsub=null;if(subBox&&supBox){supShift=Math.max(supShift,minSupShift,supBox.depth+0.25*parentContext.metrics.xHeight);subShift=Math.max(subShift,parentContext.metrics.sub2);const ruleWidth=parentContext.metrics.defaultRuleThickness;if(supShift-supBox.depth-(subBox.height-subShift)<4*ruleWidth){subShift=4*ruleWidth-(supShift-supBox.depth)+subBox.height;const psi=0.8*parentContext.metrics.xHeight-(supShift-supBox.depth);if(psi>0){supShift+=psi;subShift-=psi;}}
const slant=this.type==="extensible-symbol"&&base.italic?-base.italic:0;supsub=new VBox({individualShift:[{box:subBox,shift:subShift,marginLeft:slant},{box:supBox,shift:-supShift}]}).wrap(parentContext);}else if(subBox&&!supBox){subShift=Math.max(subShift,parentContext.metrics.sub1,subBox.height-0.8*X_HEIGHT);supsub=new VBox({shift:subShift,children:[{box:subBox,marginRight:scriptspace,marginLeft:this.isCharacterBox()?-base.italic:0}]});}else if(!subBox&&supBox){supShift=Math.max(supShift,minSupShift,supBox.depth+0.25*X_HEIGHT);supsub=new VBox({shift:-supShift,children:[{box:supBox,marginRight:scriptspace}]});}
return new Box([base,new Box(supsub,{caret:this.caret,isSelected:this.isSelected,classes:"ML__msubsup"})],{type:options.type});}
attachLimits(ctx,options){const above=this.superscript?_Atom.createBox(new Context({parent:ctx,mathstyle:"superscript"},this.style),this.superscript):null;const below=this.subscript?_Atom.createBox(new Context({parent:ctx,mathstyle:"subscript"},this.style),this.subscript):null;if(!above&&!below)return options.base.wrap(ctx);return makeLimitsStack(ctx,__spreadProps(__spreadValues({},options),{above,below}));}
bind(context,box){if(!box||context.isPhantom||this.value==="\u200B")return box;let parent=this.parent;while(parent&&!parent.captureSelection)parent=parent.parent;if(parent==null?void 0:parent.captureSelection)return box;if(!this.id)this.id=context.makeID();box.atomID=this.id;return box;}
createBox(context,options){var _a3,_b3,_c2,_d2;const value=(_a3=this.value)!=null?_a3:this.body;const type=(_b3=options==null?void 0:options.boxType)!=null?_b3:boxType(this.type);let classes=(_c2=options==null?void 0:options.classes)!=null?_c2:"";if(this.mode==="text")classes+=" ML__text";const result=typeof value==="string"||value===void 0?new Box(value!=null?value:null,{type,isSelected:this.isSelected,mode:this.mode,maxFontSize:context.scalingFactor,style:__spreadProps(__spreadValues({variant:"normal"},this.style),{fontSize:Math.max(1,context.size+context.mathstyle.sizeDelta)}),letterShapeStyle:context.letterShapeStyle,classes}):(_d2=_Atom.createBox(context,value,{type,classes}))!=null?_d2:new Box(null);if(context.isTight)result.isTight=true;if(this.mode!=="math"||this.style.variant==="main")
result.italic=0;result.right=result.italic;this.bind(context,result);if(this.caret){if(!this.superscript&&!this.subscript)result.caret=this.caret;}
return result;}
isDigit(){var _a3;if(this.type==="mord"&&this.value)return/^[\d,\.]$/.test(this.value);if(this.type==="group"&&((_a3=this.body)==null?void 0:_a3.length)===2)
return this.body[0].type==="first"&&this.body[1].value===",";return false;}
asDigit(){var _a3;if(this.type==="mord"&&this.value&&/^[\d,\.]$/.test(this.value))
return this.value;if(this.type==="group"&&((_a3=this.body)==null?void 0:_a3.length)===2){if(this.body[0].type==="first"&&this.body[1].value===",")
return".";}
return"";}};function getStyleRuns(atoms){let style=void 0;const runs=[];let run=[];for(const atom of atoms){if(atom.type==="first")run.push(atom);if(!style&&!atom.style)run.push(atom);else{const atomStyle=atom.style;if(style&&atomStyle.color===style.color&&atomStyle.backgroundColor===style.backgroundColor&&atomStyle.fontSize===style.fontSize){run.push(atom);}else{if(run.length>0)runs.push(run);run=[atom];style=atomStyle;}}}
if(run.length>0)runs.push(run);return runs;}
function renderStyleRun(parentContext,atoms,options){var _a3,_b3,_c2,_d2,_e;if(!atoms||atoms.length===0)return null;const context=new Context({parent:parentContext},options.style);const displaySelection=!((_a3=context.atomIdsSettings)==null?void 0:_a3.groupNumbers);let boxes=[];if(atoms.length===1){const atom=atoms[0];const box=atom.render(context);if(box){if(displaySelection&&atom.isSelected)box.selected(true);boxes=[box];}}else{let digitOrTextStringID="";let lastWasDigit=true;for(const atom of atoms){if(((_b3=context.atomIdsSettings)==null?void 0:_b3.groupNumbers)&&digitOrTextStringID&&(lastWasDigit&&atom.isDigit()||!lastWasDigit&&isText(atom)))
context.atomIdsSettings.overrideID=digitOrTextStringID;const box=atom.render(context);if(context.atomIdsSettings)
context.atomIdsSettings.overrideID=void 0;if(box){if((_c2=context.atomIdsSettings)==null?void 0:_c2.groupNumbers){if(atom.isDigit()||isText(atom)){if(!digitOrTextStringID||lastWasDigit!==atom.isDigit()){lastWasDigit=atom.isDigit();digitOrTextStringID=(_d2=atom.id)!=null?_d2:"";}}
if(digitOrTextStringID&&(!(atom.isDigit()||isText(atom))||!atom.hasEmptyBranch("superscript")||!atom.hasEmptyBranch("subscript"))){digitOrTextStringID="";}}
if(displaySelection&&atom.isSelected)box.selected(true);boxes.push(box);}}}
if(boxes.length===0)return null;const result=new Box(boxes,__spreadProps(__spreadValues({isTight:context.isTight},options),{type:(_e=options.type)!=null?_e:"lift"}));result.isSelected=boxes.every((x)=>x.isSelected);return result.wrap(context);}
function isText(atom){return atom.mode==="text";}
function argumentsToJson(args){return args.map((arg)=>{if(arg===null)return"<null>";if(Array.isArray(arg)&&arg[0]instanceof Atom)
return{atoms:arg.map((x)=>x.toJson())};if(typeof arg==="object"&&"group"in arg)
return{group:arg.group.map((x)=>x.toJson())};return arg;});}
var TextAtom=class _TextAtom extends Atom{constructor(command,value,style){super({type:"text",command,mode:"text",displayContainsHighlight:true});this.value=value;this.verbatimLatex=value;this.applyStyle(style);}
static fromJson(json){return new _TextAtom(json.command,json.value,json.style);}
render(context){const result=this.createBox(context);if(this.caret)result.caret=this.caret;return result;}
_serialize(_options){var _a3;return(_a3=this.verbatimLatex)!=null?_a3:charToLatex("text",this.value.codePointAt(0));}};function compareSelection(a,b){if(a.direction===b.direction){const l=a.ranges.length;if(b.ranges.length===l){let i=0;while(i<l&&compareRange(a.ranges[i],b.ranges[i])==="equal")i++;return i===l?"equal":"different";}}
return"different";}
function compareRange(a,b){if(a[0]===b[0]&&a[1]===b[1])return"equal";return"different";}
function range(selection){let first=Infinity;let last=-Infinity;for(const range2 of selection.ranges){first=Math.min(first,range2[0],range2[1]);last=Math.max(last,range2[0],range2[1]);}
return[first,last];}
function isOffset(value){return typeof value==="number"&&!Number.isNaN(value);}
function isRange(value){return Array.isArray(value)&&value.length===2;}
function isSelection(value){return value!==void 0&&value!==null&&typeof value==="object"&&"ranges"in value&&Array.isArray(value.ranges);}
function getMode(model,offset){const atom=model.at(offset);let result;if(atom){result=atom.mode;let ancestor=atom.parent;while(!result&&ancestor){if(ancestor)result=ancestor.mode;ancestor=ancestor.parent;}}
return result;}
function validateShortcut(siblings,shortcut){if(!shortcut)return"";if(typeof shortcut==="string")return shortcut;if(!siblings||shortcut.after===void 0)return shortcut.value;let nothing=false;let letter=false;let digit=false;let isFunction=false;let frac=false;let surd=false;let binop=false;let relop=false;let operator=false;let punct=false;let array=false;let openfence=false;let closefence=false;let text=false;let space=false;let sibling=siblings[0];let index=0;while((sibling==null?void 0:sibling.type)&&/^(subsup|placeholder)$/.test(sibling.type)){index+=1;sibling=siblings[index];}
nothing=!sibling||sibling.type==="first";if(sibling){text=sibling.mode==="text";letter=!text&&sibling.type==="mord"&&LETTER.test(sibling.value);digit=!text&&sibling.type==="mord"&&/\d+$/.test(sibling.value);isFunction=!text&&sibling.isFunction;frac=sibling.type==="genfrac";surd=sibling.type==="surd";binop=sibling.type==="mbin";relop=sibling.type==="mrel";operator=sibling.type==="mop"||sibling.type==="operator"||sibling.type==="extensible-symbol";punct=sibling.type==="mpunct"||sibling.type==="minner";array=sibling.type==="array";openfence=sibling.type==="mopen";closefence=sibling.type==="mclose"||sibling.type==="leftright";space=sibling.type==="space";}
if(shortcut.after.includes("nothing")&&nothing||shortcut.after.includes("letter")&&letter||shortcut.after.includes("digit")&&digit||shortcut.after.includes("function")&&isFunction||shortcut.after.includes("frac")&&frac||shortcut.after.includes("surd")&&surd||shortcut.after.includes("binop")&&binop||shortcut.after.includes("relop")&&relop||shortcut.after.includes("operator")&&operator||shortcut.after.includes("punct")&&punct||shortcut.after.includes("array")&&array||shortcut.after.includes("openfence")&&openfence||shortcut.after.includes("closefence")&&closefence||shortcut.after.includes("text")&&text||shortcut.after.includes("space")&&space)
return shortcut.value;return"";}
function getInlineShortcut(context,s,shortcuts){if(!shortcuts)return"";return validateShortcut(context,shortcuts[s]);}
var INLINE_SHORTCUTS={"&":"\\&","%":"\\%","$":"\\$","''":"^{\\doubleprime}","'''":"^{\\prime\\prime\\prime}","''''":"^{\\prime\\prime\\prime\\prime}","alpha":"\\alpha","delta":"\\delta","Delta":"\\Delta","pi":"\\pi","Pi":"\\Pi","theta":"\\theta","Theta":"\\Theta","ii":{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryI"},"jj":{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryJ"},"ee":{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\exponentialE"},"nabla":"\\nabla","grad":"\\nabla","del":"\\partial","deg":{after:"digit+space",value:"\\degree"},"infty":"\\infty","\u221E":"\\infty","oo":{after:"nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\infty"},"\u2211":"\\sum","sum":"\\sum_{#?}^{#?}","int":"\\int_{#?}^{#?}","prod":"\\prod_{#?}^{#?}","sqrt":"\\sqrt{#?}","\u2206":"\\differentialD","\u2202":"\\differentialD","sin":"\\sin","cos":"\\cos","tan":"\\tan","arccos":"\\arccos","arcsin":"\\arcsin","arctan":"\\arctan","arctg":"\\operatorname{arctg}","arcsec":"\\operatorname{arcsec}","arccsc":"\\operatorname{arccsc}","arsinh":"\\operatorname{arsinh}","arccosh":"\\operatorname{arccosh}","arcosh":"\\operatorname{arcosh}","artanh":"\\operatorname{artanh}","arctanh":"\\operatorname{arctanh}","arcsech":"\\operatorname{arcsech}","arccsch":"\\operatorname{arccsch}","ch":"\\operatorname{ch}","cosec":"\\operatorname{cosec}","cosh":"\\cosh","cot":"\\cot","cotg":"\\operatorname{cotg}","coth":"\\coth","csc":"\\csc","ctg":"\\operatorname{ctg}","cth":"\\operatorname{cth}","sec":"\\sec","sech":"\\operatorname{sech}","sinh":"\\sinh","sh":"\\operatorname{sh}","tanh":"\\tanh","tg":"\\operatorname{tg}","th":"\\operatorname{th}","arg":"\\arg","lg":"\\lg","lb":"\\operatorname{lb}","log":"\\log_{#?}","ln":"\\ln","exp":"\\exp","lim":"\\lim_{#?\\to#?}","dx":{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD x"},"dy":{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD y"},"dt":{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD t"},"AA":"\\forall","EE":"\\exists","!EE":"\\nexists","&&":"\\land","xin":{after:"nothing+text+relop+punct+openfence+space",value:"x \\in"},"sint":{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\sin t"},"in":{after:"nothing+letter+closefence",value:"\\in"},"!in":"\\notin","NN":"\\mathbb{N}","ZZ":"\\mathbb{Z}","QQ":"\\mathbb{Q}","RR":"\\mathbb{R}","CC":"\\mathbb{C}","xx":"\\times","+-":"\\pm","\u2260":"\\ne","!=":"\\ne","\u2265":"\\ge",">=":"\\ge","\u2264":"\\le","<=":"\\le","<<":"\\ll",">>":"\\gg","~~":"\\approx","\u2248":"\\approx","?=":"\\questeq","\xF7":"\\div","\xAC":"\\neg",":=":"\\coloneq","::":"\\Colon","(:":"\\langle",":)":"\\rangle","beta":"\\beta","chi":"\\chi","epsilon":"\\epsilon","varepsilon":"\\varepsilon","eta":{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta"},"gamma":"\\gamma","Gamma":"\\Gamma","iota":"\\iota","kappa":"\\kappa","lambda":"\\lambda","Lambda":"\\Lambda","mu":{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu"},"nu":{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu"},"\xB5":"\\mu","phi":{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\phi"},"Phi":{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Phi"},"varphi":"\\varphi","psi":{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\psi"},"Psi":{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Psi"},"rho":{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\rho"},"sigma":"\\sigma","Sigma":"\\Sigma","tau":{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\tau"},"vartheta":"\\vartheta","upsilon":"\\upsilon","xi":{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\xi"},"Xi":{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Xi"},"zeta":"\\zeta","omega":"\\omega","Omega":"\\Omega","\u03A9":"\\omega","forall":"\\forall","exists":"\\exists","!exists":"\\nexists",":.":"\\therefore","liminf":"\\liminf_{#?}","limsup":"\\limsup_{#?}","argmin":"\\operatorname*{arg~min}_{#?}","argmax":"\\operatorname*{arg~max}_{#?}","det":"\\det","mod":"\\bmod{#?}","(mod":"\\pmod{#?}","max":"\\max","min":"\\min","erf":"\\operatorname{erf}","erfc":"\\operatorname{erfc}","bessel":"\\operatorname{bessel}","mean":"\\operatorname{mean}","median":"\\operatorname{median}","fft":"\\operatorname{fft}","lcm":"\\operatorname{lcm}","gcd":"\\gcd","randomReal":"\\operatorname{randomReal}","randomInteger":"\\operatorname{randomInteger}","Re":"\\operatorname{Re}","Im":"\\operatorname{Im}","mm":{after:"nothing+digit+operator",value:"\\operatorname{mm}"},"cm":{after:"nothing+digit+operator",value:"\\operatorname{cm}"},"km":{after:"nothing+digit+operator",value:"\\operatorname{km}"},"kg":{after:"nothing+digit+operator",value:"\\operatorname{kg}"},"ft":{after:"nothing+digit+operator",value:"\\operatorname{ft}"},"inch":{after:"nothing+digit+operator",value:"\\operatorname{inch}"},"mi":{after:"nothing+digit+operator",value:"\\operatorname{mi}"},"...":"\\ldots","+...":"+\\cdots","-...":"-\\cdots","->...":"\\to\\cdots","-->...":"\\longrightarrow\\cdots","->":"\\to","|->":"\\mapsto","-->":"\\longrightarrow","<--":"\\longleftarrow","=>":"\\Rightarrow","==>":"\\Longrightarrow","<=>":"\\iff","<->":"\\leftrightarrow","(.)":"\\odot","(+)":"\\oplus","(/)":"\\oslash","(*)":"\\otimes","(-)":"\\ominus","||":"\\Vert","*":"\\cdot","**":"\\star","***":"\\ast","//":"\\slash","\\\\":"\\backslash","setminus":"\\backslash","|><":"\\ltimes","><|":"\\rtimes","|><|":"\\bowtie","-:":"\\div","divide":"\\div","@":"\\circ","^^":"\\wedge","^^^":"\\bigwedge","vv":"\\vee","vvv":"\\bigvee","nn":"\\cap","nnn":"\\bigcap","uu":"\\cup","uuu":"\\bigcup","-=":"\\equiv","~=":"\\cong","lt":"<","lt=":"\\leq","gt":">","gt=":"\\geq","-<":"\\prec","-lt":"\\prec","-<=":"\\preceq",">-=":"\\succeq","prop":"\\propto","diamond":"\\diamond","square":"\\square","iff":"\\iff","sub":"\\subset","sup":"\\supset","sube":"\\subseteq","supe":"\\supseteq","uarr":"\\uparrow","darr":"\\downarrow","rarr":"\\rightarrow","rArr":"\\Rightarrow","larr":"\\leftarrow","lArr":"\\Leftarrow","harr":"\\leftrightarrow","hArr":"\\Leftrightarrow","aleph":"\\aleph","and":"\\land","or":"\\lor","not":"\\neg","_|_":"\\bot","TT":"\\top","|--":"\\vdash","|==":"\\models","|__":"\\lfloor","__|":"\\rfloor","|~":"\\lceil","~|":"\\rceil",">->":"\\rightarrowtail","->>":"\\twoheadrightarrow",">->>":"\\twoheadrightarrowtail","times":"\\times","of":"\\circ","infinity":"\\infty","defint":"\\int_{#?}^{#?}","approaches":"\\to","ceil":"\\left\\lceil#?\\right\\rceil","floor":"\\left\\lfloor#?\\right\\rfloor","union":"\\cup","asterisk":"\\ast","frac":"\\frac{#?}{#?}","cbrt":"\\sqrt[3]{#?}","nthroot":"\\sqrt[#?]{#?}"};function parseMathString(s,options){var _a3;let format=(_a3=options==null?void 0:options.format)!=null?_a3:"auto";if(format==="auto")[format,s]=inferFormat(s);if(format==="ascii-math"){s=s.replace(/\u2061/gu,"");s=s.replace(/\u3016/gu,"{");s=s.replace(/\u3017/gu,"}");s=s.replace(/([^\\])sinx/g,"$1\\sin x");s=s.replace(/([^\\])cosx/g,"$1\\cos x ");s=s.replace(/\u2013/g,"-");return["ascii-math",parseMathExpression(s,{inlineShortcuts:options==null?void 0:options.inlineShortcuts})];}
return["latex",s];}
function parseMathExpression(s,options){var _a3;s=s.trim();if(!s)return"";const inlineShortcuts=(_a3=options.inlineShortcuts)!=null?_a3:INLINE_SHORTCUTS;if(s.startsWith("^")||s.startsWith("_")){const{match:match2,rest:rest2}=parseMathArgument(s.slice(1),{inlineShortcuts,noWrap:true});return`${s[0]}{${match2}}${parseMathExpression(rest2, options)}`;}
let m=s.match(/^(sqrt|\u221A)(.*)/);if(m){const{match:match2,rest:rest2}=parseMathArgument(m[2],{inlineShortcuts,noWrap:true});return`\\sqrt{${match2 != null ? match2 : "\\placeholder{}"}}${parseMathExpression(
        rest2,
        options
      )}`;}
m=s.match(/^(\\cbrt|\u221B)(.*)/);if(m){const{match:match2,rest:rest2}=parseMathArgument(m[2],{inlineShortcuts,noWrap:true});return`\\sqrt[3]{${match2 != null ? match2 : "\\placeholder{}"}}${parseMathExpression(
        rest2,
        options
      )}`;}
m=s.match(/^abs(.*)/);if(m){const{match:match2,rest:rest2}=parseMathArgument(m[1],{inlineShortcuts,noWrap:true});return`\\left|${match2 != null ? match2 : "\\placeholder{}"}\\right|${parseMathExpression(
        rest2,
        options
      )}`;}
m=s.match(/^["](.*?)["](.*)/);if(m){return`\\text{${m[1]}}${parseMathExpression(m[2], options)}`;}
m=s.match(/^([^a-zA-Z0-9\(\{\[\_\^\\\s"]+)(.*)/);if(m){return`${paddedShortcut(m[1], inlineShortcuts)}${parseMathExpression(
        m[2],
        options
      )}`;}
if(/^([fgh])[^a-zA-Z]/.test(s)){const{rest:rest2,match:match2}=parseMathArgument(s.slice(1),{inlineShortcuts,noWrap:true});let result="";if(s[1]==="(")result=`${s[0]}\\left(${match2}\\right)`;else result=s[0]+match2;return result+parseMathExpression(rest2,options);}
m=s.match(/^([a-zA-Z]+)(.*)/);if(m){return paddedShortcut(m[1],inlineShortcuts)+parseMathExpression(m[2],options);}
const{match,rest}=parseMathArgument(s,{inlineShortcuts,noWrap:true});if(match&&rest[0]==="/"){const m2=parseMathArgument(rest.slice(1),{inlineShortcuts,noWrap:true});if(m2.match){return`\\frac{${match}}{${m2.match}}${parseMathExpression(
          m2.rest,
          options
        )}`;}}else{return s.startsWith("(")?"\\left("+match+"\\right)"+parseMathExpression(rest,options):match+parseMathExpression(rest,options);}
m=s.match(/^(\s+)(.*)$/);if(m)return" "+parseMathExpression(m[2],options);return s;}
var FENCES={"[":"\\lbrack","]":"\\rbrack","{":"\\lbrace","}":"\\rbrace"};function parseMathArgument(s,options){var _a3,_b3;let match="";s=s.trim();let rest=s;const lFence=s.charAt(0);const rFence={"(":")","{":"}","[":"]"}[lFence];if(rFence){let level=1;let i=1;while(i<s.length&&level>0){if(s[i]===lFence)level++;if(s[i]===rFence)level--;i++;}
if(level===0){const body=parseMathExpression(s.substring(1,i-1),options);if(options.noWrap&&lFence==="(")match=body;else
match=`\\left${(_a3 = FENCES[lFence]) != null ? _a3 : lFence}${body}\\right${(_b3 = FENCES[rFence]) != null ? _b3 : rFence}`;rest=s.slice(Math.max(0,i));}else{match=s.substring(1,i);rest="";}}else{let m=s.match(/^([a-zA-Z]+)/);if(m){let shortcut=getInlineShortcut(null,s,options.inlineShortcuts);if(shortcut){shortcut=shortcut.replace("_{#?}","");shortcut=shortcut.replace("^{#?}","");return{match:shortcut,rest:s.slice(shortcut.length)};}}
m=s.match(/^([a-zA-Z])/);if(m){return{match:m[1],rest:s.slice(1)};}
m=s.match(/^(-)?\d+(\.\d*)?/);if(m){return{match:m[0],rest:s.slice(m[0].length)};}
if(!/^\\(left|right)/.test(s)){m=s.match(/^(\\[a-zA-Z]+)/);if(m){rest=s.slice(m[1].length);match=m[1];}}}
return{match,rest};}
function paddedShortcut(s,shortcuts){let result=getInlineShortcut(null,s,shortcuts);if(result){result=result.replace("_{#?}","");result=result.replace("^{#?}","");result+=" ";}else result=s;return result;}
var MODE_SHIFT_COMMANDS=[["\\[","\\]"],["\\(","\\)"],["$$","$$"],["$","$"],["\\begin{math}","\\end{math}"],["\\begin{displaymath}","\\end{displaymath}"],["\\begin{equation}","\\end{equation}"],["\\begin{equation*}","\\end{equation*}"]];function trimModeShiftCommand(s){const trimmedString=s.trim();for(const mode of MODE_SHIFT_COMMANDS){if(trimmedString.startsWith(mode[0])&&trimmedString.endsWith(mode[1])){return[true,trimmedString.substring(mode[0].length,trimmedString.length-mode[1].length)];}}
return[false,s];}
function inferFormat(s){s=s.trim();if(s.length<=1)return["latex",s];let hasLatexModeShiftCommand;[hasLatexModeShiftCommand,s]=trimModeShiftCommand(s);if(hasLatexModeShiftCommand)return["latex",s];if(s.startsWith("`")&&s.endsWith("`")){s=s.substring(1,s.length-1);return["ascii-math",s];}
if(s.includes("\\")){return["latex",s];}
if(/\$.+\$/.test(s)){return["latex",`\\text{${s}}`];}
return[void 0,s];}
var CLIPBOARD_LATEX_BEGIN="$$";var CLIPBOARD_LATEX_END="$$";var defaultExportHook=(_from,latex,_range)=>{if(!MODE_SHIFT_COMMANDS.some((x)=>latex.startsWith(x[0])&&latex.endsWith(x[1])))
latex=`${CLIPBOARD_LATEX_BEGIN} ${latex} ${CLIPBOARD_LATEX_END}`;return latex;};var _ModeEditor=class _ModeEditor{constructor(name){_ModeEditor._modes[name]=this;}
static onPaste(mode,mathfield,data){var _a3;if(!mathfield.contentEditable&&mathfield.userSelect==="none"){mathfield.model.announce("plonk");return false;}
if(typeof data==="string"){const dataTransfer=new DataTransfer();dataTransfer.setData("text/plain",data);data=dataTransfer;}
const redispatchedEvent=new ClipboardEvent("paste",{clipboardData:data,cancelable:true});if(!((_a3=mathfield.host)==null?void 0:_a3.dispatchEvent(redispatchedEvent)))return false;return _ModeEditor._modes[mode].onPaste(mathfield,data);}
static copyToClipboard(mathfield,format){if(!mathfield.contentEditable&&mathfield.userSelect==="none"){mathfield.model.announce("plonk");return;}
const model=mathfield.model;const exportRange=model.selectionIsCollapsed?[0,model.lastOffset]:range(model.selection);const latex=model.getValue(exportRange,format);navigator.clipboard.writeText(latex).then(()=>{},()=>mathfield.model.announce("plonk"));}
static onCopy(mathfield,ev){var _a3;if(!ev.clipboardData)return;if(!mathfield.contentEditable&&mathfield.userSelect==="none"){mathfield.model.announce("plonk");return;}
const model=mathfield.model;const exportRange=model.selectionIsCollapsed?[0,model.lastOffset]:range(model.selection);let atoms=model.getAtoms(exportRange);if(atoms.every((x)=>x.mode==="text"||!x.mode)){ev.clipboardData.setData("text/plain",atoms.filter((x)=>x instanceof TextAtom).map((x)=>x.value).join(""));}else if(atoms.every((x)=>x.mode==="latex")){ev.clipboardData.setData("text/plain",model.getAtoms(exportRange,{includeChildren:true}).map((x)=>{var _a4;return(_a4=x.value)!=null?_a4:"";}).join(""));}else{let latex;if(atoms.length===1&&atoms[0].verbatimLatex!==void 0)
latex=atoms[0].verbatimLatex;else latex=model.getValue(exportRange,"latex-expanded");ev.clipboardData.setData("application/x-latex",latex);try{ev.clipboardData.setData("text/plain",mathfield.options.onExport(mathfield,latex,exportRange));}catch(e){}
if(atoms.length===1){const atom=atoms[0];if(atom.type==="root"||atom.type==="group")
atoms=atom.body.filter((x)=>x.type!=="first");}
try{ev.clipboardData.setData("application/json+mathlive",JSON.stringify(atoms.map((x)=>x.toJson())));}catch(e){}
if((_a3=window[Symbol.for("io.cortexjs.compute-engine")])==null?void 0:_a3.ComputeEngine){const ce=globalThis.MathfieldElement.computeEngine;if(ce){try{const options=ce.jsonSerializationOptions;ce.jsonSerializationOptions={metadata:["latex"]};const expr=ce.parse(model.getValue(exportRange,"latex-unstyled"));ce.jsonSerializationOptions=options;const mathJson=JSON.stringify(expr.json);if(mathJson)
ev.clipboardData.setData("application/json",mathJson);}catch(e){}}}}
ev.preventDefault();}
static insert(model,text,options={}){var _a3;const mode=options.mode==="auto"?model.mode:(_a3=options.mode)!=null?_a3:model.mode;return _ModeEditor._modes[mode].insert(model,text,options);}
onPaste(_mathfield,_data){return false;}
insert(_model,_text,_options){return false;}};_ModeEditor._modes={};var ModeEditor=_ModeEditor;var DEFAULT_KEYBINDINGS=[{key:"left",command:"moveToPreviousChar"},{key:"right",command:"moveToNextChar"},{key:"up",command:"moveUp"},{key:"down",command:"moveDown"},{key:"shift+[ArrowLeft]",command:"extendSelectionBackward"},{key:"shift+[ArrowRight]",command:"extendSelectionForward"},{key:"shift+[ArrowUp]",command:"extendSelectionUpward"},{key:"shift+[ArrowDown]",command:"extendSelectionDownward"},{key:"[Backspace]",command:"deleteBackward"},{key:"alt+[Delete]",command:"deleteBackward"},{key:"[Delete]",command:"deleteForward"},{key:"alt+[Backspace]",command:"deleteForward"},{key:"alt+[ArrowLeft]",command:"moveToPreviousWord"},{key:"alt+[ArrowRight]",command:"moveToNextWord"},{key:"shift+alt+[ArrowLeft]",command:"extendToPreviousWord"},{key:"shift+alt+[ArrowRight]",command:"extendToNextWord"},{key:"ctrl+[ArrowLeft]",command:"moveToGroupStart"},{key:"ctrl+[ArrowRight]",command:"moveToGroupEnd"},{key:"shift+ctrl+[ArrowLeft]",command:"extendToGroupStart"},{key:"shift+ctrl+[ArrowRight]",command:"extendToGroupEnd"},{key:"[Home]",command:"moveToMathfieldStart"},{key:"cmd+[ArrowLeft]",command:"moveToMathfieldStart"},{key:"shift+[Home]",command:"extendToMathFieldStart"},{key:"shift+cmd+[ArrowLeft]",command:"extendToMathFieldStart"},{key:"[End]",command:"moveToMathfieldEnd"},{key:"cmd+[ArrowRight]",command:"moveToMathfieldEnd"},{key:"shift+[End]",command:"extendToMathFieldEnd"},{key:"shift+cmd+[ArrowRight]",command:"extendToMathFieldEnd"},{key:"[Pageup]",command:"moveToGroupStart"},{key:"[Pagedown]",command:"moveToGroupEnd"},{key:"[Tab]",command:"moveToNextGroup"},{key:"shift+[Tab]",command:"moveToPreviousGroup"},{key:"[Escape]",ifMode:"math",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"text",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"latex",command:["complete","complete",{selectItem:"true"}]},{key:"\\",ifMode:"math",command:["switchMode","latex","","\\"]},{key:"[IntlBackslash]",ifMode:"math",command:["switchMode","latex","","\\"]},{key:"[Tab]",ifMode:"latex",command:["complete","accept-suggestion"]},{key:"[Return]",ifMode:"latex",command:"complete"},{key:"[Enter]",ifMode:"latex",command:"complete"},{key:"shift+[Escape]",ifMode:"latex",command:["complete","reject"]},{key:"[ArrowDown]",ifMode:"latex",command:"nextSuggestion"},{key:"[ArrowUp]",ifMode:"latex",command:"previousSuggestion"},{key:"ctrl+a",ifPlatform:"!macos",command:"selectAll"},{key:"cmd+a",command:"selectAll"},{key:"[Cut]",command:"cutToClipboard"},{key:"[Copy]",command:"copyToClipboard"},{key:"[Paste]",command:"pasteFromClipboard"},{key:"[Clear]",command:"deleteBackward"},{key:"[Undo]",command:"undo"},{key:"[Redo]",command:"redo"},{key:"[EraseEof]",command:"deleteToGroupEnd"},{key:"ctrl+x",ifPlatform:"ios",command:"cutToClipboard"},{key:"cmd+x",ifPlatform:"ios",command:"cutToClipboard"},{key:"ctrl+c",ifPlatform:"ios",command:"copyToClipboard"},{key:"cmd+c",ifPlatform:"ios",command:"copyToClipboard"},{key:"ctrl+v",ifPlatform:"ios",command:"pasteFromClipboard"},{key:"cmd+v",ifPlatform:"ios",command:"pasteFromClipboard"},{key:"ctrl+z",ifPlatform:"!macos",command:"undo"},{key:"cmd+z",command:"undo"},{key:"ctrl+y",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+y",command:"redo"},{key:"shift+ctrl+z",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+z",command:"redo"},{key:"ctrl+b",ifPlatform:"macos",command:"moveToPreviousChar"},{key:"ctrl+f",ifPlatform:"macos",command:"moveToNextChar"},{key:"ctrl+p",ifPlatform:"macos",command:"moveUp"},{key:"ctrl+n",ifPlatform:"macos",command:"moveDown"},{key:"ctrl+a",ifPlatform:"macos",command:"moveToMathfieldStart"},{key:"ctrl+e",ifPlatform:"macos",command:"moveToMathfieldEnd"},{key:"shift+ctrl+b",ifPlatform:"macos",command:"extendSelectionBackward"},{key:"shift+ctrl+f",ifPlatform:"macos",command:"extendSelectionForward"},{key:"shift+ctrl+p",ifPlatform:"macos",command:"extendSelectionUpward"},{key:"shift+ctrl+n",ifPlatform:"macos",command:"extendSelectionDownward"},{key:"shift+ctrl+a",ifPlatform:"macos",command:"extendToMathFieldStart"},{key:"shift+ctrl+e",ifPlatform:"macos",command:"extendToMathFieldEnd"},{key:"alt+ctrl+b",ifPlatform:"macos",command:"moveToPreviousWord"},{key:"alt+ctrl+f",ifPlatform:"macos",command:"moveToNextWord"},{key:"shift+alt+ctrl+b",ifPlatform:"macos",command:"extendToPreviousWord"},{key:"shift+alt+ctrl+f",ifPlatform:"macos",command:"extendToNextWord"},{key:"ctrl+h",ifPlatform:"macos",command:"deleteBackward"},{key:"ctrl+d",ifPlatform:"macos",command:"deleteForward"},{key:"ctrl+l",ifPlatform:"macos",command:"scrollIntoView"},{key:"ctrl+[Digit2]",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"ctrl+[Digit5]",ifMode:"math",command:"moveToOpposite"},{key:"ctrl+[Digit6]",ifMode:"math",command:"moveToSuperscript"},{key:"ctrl+[Return]",ifMode:"math",command:"addRowAfter"},{key:"ctrl+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Return]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"alt+p",ifMode:"math",command:["insert","\\pi"]},{key:"alt+v",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"alt+o",ifMode:"math",command:["insert","\\emptyset"]},{key:"alt+d",ifMode:"math",command:["insert","\\differentialD"]},{key:"shift+alt+o",ifMode:"math",command:["insert","\\varnothing"]},{key:"shift+alt+d",ifMode:"math",command:["insert","\\partial"]},{key:"alt+[Backslash]",ifMode:"math",command:["insert","\\backslash"]},{key:"[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#?}{#@}"]},{key:"shift+alt+k",command:"toggleKeystrokeCaption"},{key:"alt+[Space]",command:"toggleContextMenu"},{key:"alt+shift+[Space]",command:"toggleVirtualKeyboard"},{key:"alt+ctrl+[ArrowUp]",command:["speak","all",{withHighlighting:false}]},{key:"alt+ctrl+[ArrowDown]",command:["speak","selection",{withHighlighting:false}]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["switchMode","text","",""]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"text",command:["switchMode","math","",""]},{key:"shift+alt+[KeyT]",ifMode:"math",command:["switchMode","text"]},{key:"shift+alt+[KeyT]",ifMode:"text",command:["switchMode","math"]},{key:"/",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","/"]},{key:"alt+shift+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","/"]},{key:"alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrack #0 \\right\\rbrack"]},{key:"ctrl+[Minus]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"moveToSubscript"},{key:"shift+alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrace #0 \\right\\rbrace"]},{key:"ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"shift+ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"shift+cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"ctrl+[Backspace]",ifMode:"math",command:"removeRow"},{key:"cmd+[Backspace]",ifMode:"math",command:"removeRow"},{key:"alt+[Tab]",ifMode:"math",command:"addColumnAfter"},{key:"shift+alt+[Tab]",ifMode:"math",command:"addColumnBefore"},{key:"alt+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"shift+alt+[Enter]",ifMode:"math",command:"addRowBefore"},{key:"alt+[Return]",ifMode:"math",command:"addRowAfter"},{key:"shift+alt+[Return]",ifMode:"math",command:"addRowBefore"},{key:"shift+[Backspace]",ifMode:"math",command:"removeColumn"},{key:"alt+[Digit5]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","$\\infty"]},{key:"alt+[Digit9]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","("]},{key:"alt+[Digit0]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert",")"]},{key:"alt+|",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","|"]},{key:"shift+[Backquote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\~"]},{key:"[Backquote]",ifLayout:["windows.french","linux.french"],ifMode:"math",command:["insert","^2"]},{key:"[Backquote]",ifLayout:["windows.german","linux.german"],ifMode:"math",command:["insert","^"]},{key:"[IntlBackslash]",ifLayout:["apple.german"],ifMode:"math",command:["insert","^"]}];var REVERSE_KEYBINDINGS={"\\sqrt":["alt+v","ctrl+[Digit2]"],"\\pi":"alt+p","\\infty":"alt+[Digit5]","\\differentialD":"alt+d","\\partial":"shift+alt+d","\\frac":"Slash","\\emptyset":"alt+o","\\varnothing":"shift+alt+o","\\~":"~"};function isValidMathfield(mf){var _a3;return((_a3=mf.element)==null?void 0:_a3.mathfield)===mf;}
function findElementWithCaret(element){var _a3,_b3;return(_b3=(_a3=element.querySelector(".ML__caret"))!=null?_a3:element.querySelector(".ML__text-caret"))!=null?_b3:element.querySelector(".ML__latex-caret");}
function getCaretPoint(element){const caret=findElementWithCaret(element);if(!caret)return null;const bounds=caret.getBoundingClientRect();return{x:bounds.right,y:bounds.bottom,height:bounds.height};}
function branchId(atom){var _a3;if(!atom.parent)return"root";let result=(_a3=atom.parent.id)!=null?_a3:"";result+=typeof atom.parentBranch==="string"?"-"+atom.parentBranch:`-${atom.parentBranch[0]}/${atom.parentBranch[0]}`;return result;}
function adjustForScrolling(mathfield,rect,scaleFactor){if(!rect)return null;const fieldRect=mathfield.field.getBoundingClientRect();const w=rect.right-rect.left;const h=rect.bottom-rect.top;const left=Math.ceil(rect.left-fieldRect.left+mathfield.field.scrollLeft*scaleFactor);const top=Math.ceil(rect.top-fieldRect.top);return{left,right:left+w,top,bottom:top+h};}
function getNodeBounds(node){const bounds=node.getBoundingClientRect();const marginRight=parseInt(getComputedStyle(node).marginRight);const result={top:bounds.top-1,bottom:bounds.bottom,left:bounds.left,right:bounds.right-1+marginRight};if(node.children.length===0||node.tagName.toUpperCase()==="SVG")
return result;for(const child of node.children){if(child.nodeType===1&&"atomId"in child.dataset&&!child.classList.contains("ML__pstrut")){const r=getNodeBounds(child);result.left=Math.min(result.left,r.left);result.right=Math.max(result.right,r.right);result.top=Math.min(result.top,r.top);result.bottom=Math.max(result.bottom,r.bottom);}}
return result;}
function getAtomBounds(mathfield,atom){var _a3,_b3;if(!atom.id)return null;let result=(_b3=(_a3=mathfield.atomBoundsCache)==null?void 0:_a3.get(atom.id))!=null?_b3:null;if(result!==null)return result;const node=mathfield.field.querySelector(`[data-atom-id="${atom.id}"]`);result=node?getNodeBounds(node):null;if(mathfield.atomBoundsCache){if(result)mathfield.atomBoundsCache.set(atom.id,result);else mathfield.atomBoundsCache.delete(atom.id);}
return result!=null?result:null;}
function getRangeBoundingRect(mf,range2){const[start,end]=range2;let result=null;for(let i=start;i<=end;i++){const bounds=getAtomBounds(mf,mf.model.at(i));if(bounds){if(!result){result=bounds;}else{result.top=Math.min(result.top,bounds.top);result.bottom=Math.max(result.bottom,bounds.bottom);result.left=Math.min(result.left,bounds.left);result.right=Math.max(result.right,bounds.right);}}}
return result!=null?result:{top:0,bottom:0,left:0,right:0};}
function getRangeBounds(mathfield,range2,options){const rects=new Map();const field=mathfield.field;const offsetWidth=field.offsetWidth;const actualWidth=Math.floor(field.getBoundingClientRect().width);let scaleFactor=actualWidth/offsetWidth;scaleFactor=isNaN(scaleFactor)?1:scaleFactor;for(const atom of mathfield.model.getAtoms(range2,{includeChildren:true})){if((options==null?void 0:options.excludeAtomsWithBackground)&&atom.style.backgroundColor)
continue;const bounds=adjustForScrolling(mathfield,getAtomBounds(mathfield,atom),scaleFactor);if(bounds){const id=branchId(atom);if(rects.has(id)){const r=rects.get(id);rects.set(id,{left:Math.min(r.left,bounds.left),right:Math.max(r.right,bounds.right),top:Math.min(r.top,bounds.top),bottom:Math.max(r.bottom,bounds.bottom)});}else rects.set(id,bounds);}}
return[...rects.values()];}
function getSelectionBounds(mathfield,options){return mathfield.model.selection.ranges.reduce((acc,x)=>acc.concat(...getRangeBounds(mathfield,x,options)),[]);}
function validateOrigin(origin,originValidator){if(origin==="*"||originValidator==="none")return true;if(originValidator==="same-origin")
return!window.origin||origin===window.origin;if(typeof originValidator==="function")return originValidator(origin);return false;}
function getLocalDOMRect(el){let offsetTop=0;let offsetLeft=0;const width=el.offsetWidth;const height=el.offsetHeight;while(el instanceof HTMLElement){offsetTop+=el.offsetTop;offsetLeft+=el.offsetLeft;el=el.offsetParent;}
return new DOMRect(offsetLeft,offsetTop,width,height);}
function getElementInfo(mf,offset){if(!mf)return void 0;const atom=mf.model.at(offset);if(!atom)return void 0;const result={};const bounds=getAtomBounds(mf,atom);if(bounds){result.bounds=new DOMRect(bounds.left,bounds.top,bounds.right-bounds.left,bounds.bottom-bounds.top);}
result.depth=atom.treeDepth-2;result.style=atom.style;let a=atom;while(a){if(a.command==="\\htmlData"&&a.args&&typeof a.args[0]==="string"){const entries=a.args[0].split(",");for(const entry of entries){const matched=entry.match(/([^=]+)=(.+$)/);if(matched){const key=matched[1].trim().replace(/ /g,"-");if(key){if(!result.data)result.data={};result.data[key]=matched[2];}}else{const key=entry.trim().replace(/ /g,"-");if(key){if(!result.data)result.data={};result.data[key]=void 0;}}}}
if(a.command==="\\htmlId"||a.command==="\\cssId"){if(!result.id&&a.args&&typeof a.args[0]==="string")
result.id=a.args[0];}
a=a.parent;}
if(atom.mode==="math"||atom.mode==="text")
result.latex=Atom.serialize([atom],{defaultMode:"math"});return result;}
function getHref(mf,offset){let a=mf.model.at(offset);while(a){if(a.command==="\\href"){const url=a.args[0];if(typeof url==="string")return url;}
a=a.parent;}
return"";}
var mathfield_default=`@keyframes ML__caret-blink {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}
.ML__container {
  display: inline-flex;
  flex-flow: row;
  justify-content: space-between;
  align-items: flex-end;
  min-height: 39px;
  /* Need some room for the virtual keyboard toggle */
  width: 100%;
  padding: 4px;
  box-sizing: border-box;
  /* This attribute is necessary to work around a Firefox issue where 
  where clicking multiple times on the border leads to a focused mathfield that cannot be edited until focus is lost and regained (also fixes the multiple cursor issue on firefox that can occur with the same sequence of events).
  */
  pointer-events: auto;
  /* Prevent the browser from trying to interpret touch gestures in the field */
  /* "Disabling double-tap to zoom removes the need for browsers to
        delay the generation of click events when the user taps the screen." */
  touch-action: none;
  --_caret-color: var(--caret-color, hsl(var(--_hue), 40%, 49%));
  --_selection-color: var(--selection-color, #000);
  --_selection-background-color: var(--selection-background-color, hsl(var(--_hue), 70%, 85%));
  --_text-highlight-background-color: var(--highlight-text, hsla(var(--_hue), 40%, 50%, 0.1));
  --_contains-highlight-background-color: var(--contains-highlight-background-color, hsl(var(--_hue), 40%, 95%));
  --_smart-fence-color: var(--smart-fence-color, currentColor);
  --_smart-fence-opacity: var(--smart-fence-opacity, 0.5);
  --_latex-color: var(--latex-color, hsl(var(--_hue), 80%, 40%));
  --_correct-color: var(--correct-color, #10a000);
  --_incorrect-color: var(--incorrect-color, #a01b00);
  --_composition-background-color: var(--composition-background-color, #fff1c2);
  --_composition-text-color: var(--composition-text-color, black);
  --_composition-underline-color: var(--composition-underline-color, transparent);
  --_tooltip-border: var(--tooltip-border, 1px solid transparent);
  --_tooltip-border-radius: var(--tooltip-border-radius, 8px);
  --_tooltip-background-color: var(--tooltip-background-color, #616161);
  --_tooltip-color: var(--tooltip-color, #fff);
  --_tooltip-box-shadow: var(--tooltip-box-shadow, 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2));
}
@media (hover: none) and (pointer: coarse) {
  :host(:not(:focus)) .ML__container {
    pointer-events: none;
  }
}
/* This is the actual field content (formula) */
.ML__content {
  display: flex;
  align-items: center;
  align-self: center;
  position: relative;
  overflow: hidden;
  padding: 2px 3px 2px 1px;
  width: 100%;
  /* Encourage the browser to use the GPU to render the field.
     Weirdly, this is required for prompts to be rendered correctly. 
   */
  isolation: isolate;
}
.ML__virtual-keyboard-toggle,
.ML__menu-toggle {
  box-sizing: border-box;
  display: flex;
  align-self: center;
  align-items: center;
  flex-shrink: 0;
  flex-direction: column;
  justify-content: center;
  width: 34px;
  height: 34px;
  padding: 0;
  margin-right: 4px;
  cursor: pointer;
  /* Avoid some weird blinking with :hover */
  border-radius: 8px;
  border: 1px solid transparent;
  transition: background 0.2s cubic-bezier(0.64, 0.09, 0.08, 1);
  color: hsl(var(--_hue), 40%, 50%);
  fill: currentColor;
  background: transparent;
}
.ML__virtual-keyboard-toggle:hover,
.ML__menu-toggle:hover {
  background: hsla(0, 0%, 70%, 0.3);
  color: #333;
  fill: currentColor;
}
.ML__virtual-keyboard-toggle > span,
.ML__menu-toggle > span {
  display: flex;
  align-self: center;
  align-items: center;
}
@media (pointer: coarse) {
  .ML__virtual-keyboard-toggle,
  .ML__menu-toggle {
    min-width: 60px;
    min-height: 60px;
  }
}
/* The invisible element used to capture keyboard events. We're just trying
 really hard to make sure it doesn't show. */
.ML__keyboard-sink {
  display: inline-block;
  resize: none;
  outline: none;
  border: none;
  /* Need these for Microsoft Edge */
  position: fixed;
  clip: rect(0 0 0 0);
  /* Need this to prevent iOS Safari from auto-zooming */
  font-size: 1em;
  font-family: KaTeX_Main;
  line-height: 0.5;
  /* On Chromium, if this is 0, no keyboard events are received */
  /* Preferred over clip */
  clip-path: inset(50%);
}
[part='placeholder'] {
  color: var(--neutral-400);
}
.ML__composition {
  background: var(--_composition-background-color);
  color: var(--_composition-text-color);
  text-decoration: underline var(--_composition-underline-color);
}
.ML__caret {
  display: inline-block;
}
.ML__caret::after {
  content: '';
  visibility: hidden;
  width: 0;
  display: inline-block;
  height: 0.76em;
  --_caret-width: clamp(2px, 0.08em, 10px);
  border: none;
  border-radius: calc(var(--_caret-width) / 2);
  border-right: var(--_caret-width) solid var(--_caret-color);
  margin-right: calc(-1 * var(--_caret-width));
  position: relative;
  left: -0.045em;
  bottom: -0.05em;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__text-caret::after {
  content: '';
  visibility: hidden;
  width: 0;
  display: inline-block;
  height: 0.76em;
  --_caret-width: clamp(2px, 0.08em, 10px);
  border: none;
  border-radius: calc(var(--_caret-width) / 2);
  border-right: var(--_caret-width) solid var(--_caret-color);
  margin-right: calc(-1 * var(--_caret-width));
  position: relative;
  left: -0.045em;
  bottom: -0.05em;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__latex-caret::after {
  content: '';
  visibility: hidden;
  --_caret-width: clamp(2px, 0.08em, 10px);
  border: none;
  border-radius: calc(var(--_caret-width) / 2);
  border-right: var(--_caret-width) solid var(--_latex-color);
  margin-right: calc(-1 * var(--_caret-width));
  position: relative;
  left: -0.019em;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__focused .ML__latex-caret::after,
.ML__focused .ML__text-caret::after,
.ML__focused .ML__caret::after {
  visibility: visible;
}
.ML__focused .ML__text {
  background: var(--_text-highlight-background-color);
}
/* When using smartFence, the anticipated closing fence is displayed
with this style */
.ML__smart-fence__close {
  opacity: var(--_smart-fence-opacity);
  color: var(--_smart-fence-color);
}
.ML__selected,
.ML__focused .ML__selected .ML__contains-caret,
.ML__focused .ML__selected .ML__smart-fence__close,
.ML__focused .ML__selected .ML__placeholder {
  color: var(--_selection-color);
  opacity: 1;
}
.ML__selection {
  box-sizing: border-box;
  background: transparent;
}
:host(:focus) .ML__selection {
  background: var(--_selection-background-color) !important;
}
.ML__contains-caret.ML__close,
.ML__contains-caret.ML__open,
.ML__contains-caret > .ML__close,
.ML__contains-caret > .ML__open,
.ML__contains-caret .ML__sqrt-sign,
.ML__contains-caret .ML__sqrt-line {
  color: var(--_caret-color);
}
.ML__contains-highlight {
  box-sizing: border-box;
  background: transparent;
}
.ML__focused .ML__contains-highlight {
  background: var(--_contains-highlight-background-color);
}
.ML__raw-latex {
  font-family: 'Berkeley Mono', 'IBM Plex Mono', 'Source Code Pro', Consolas, 'Roboto Mono', Menlo, 'Bitstream Vera Sans Mono', 'DejaVu Sans Mono', Monaco, Courier, monospace;
  font-weight: 400;
  font-size: 0.8em;
  letter-spacing: -0.05em;
  color: var(--_latex-color);
}
.ML__suggestion {
  color: var(--neutral-500);
}
.ML__virtual-keyboard-toggle.is-visible.is-pressed:hover {
  background: hsl(var(--_hue), 25%, 35%);
  color: #fafafa;
  fill: currentColor;
}
.ML__virtual-keyboard-toggle.is-pressed,
.ML__virtual-keyboard-toggle.is-active:hover,
.ML__virtual-keyboard-toggle.is-active {
  background: hsl(var(--_hue), 25%, 35%);
  color: #fafafa;
  fill: currentColor;
}
/* Add an attribute 'data-tooltip' to automatically show a
   tooltip over a element on hover.
*/
[data-tooltip] {
  position: relative;
}
[data-tooltip]::after {
  content: attr(data-tooltip);
  position: absolute;
  display: block;
  z-index: 2;
  pointer-events: none;
  right: auto;
  top: calc(-100% - 4px);
  width: max-content;
  max-width: 200px;
  padding: 8px 8px;
  border-radius: 4px;
  background: #616161;
  color: #fff;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  text-align: center;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-style: normal;
  font-weight: 400;
  font-size: 13px;
  /* Phone */
  opacity: 0;
  transform: scale(0.5);
}
@media only screen and (max-width: 767px) {
  [data-tooltip]::after {
    padding: 8px 16px;
    font-size: 16px;
  }
}
menu [data-tooltip]::after {
  left: 100%;
  top: 0%;
}
menu .ML__base {
  cursor: default;
}
/** Don't display if we're tracking, i.e. have the pointer down */
.tracking [data-tooltip]:hover::after {
  /* Use visibility, not display. Display will remove the after from the DOM, and the override below will not work */
  visibility: hidden;
}
/** But do display if tracking and inside a menu */
.tracking menu li[data-tooltip]:hover::after,
[data-tooltip]:hover::after {
  visibility: visible;
  opacity: 1;
  transform: scale(1);
  transition-property: opacity, scale;
  transition-duration: 0.15s;
  transition-delay: 1s;
  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);
}
.ML__prompt {
  border-radius: 2px;
}
.ML__editablePromptBox {
  outline: 1px solid #acacac;
  border-radius: 2px;
  z-index: -1;
}
.ML__focused .ML__focusedPromptBox {
  outline: highlight auto 1px;
}
.ML__lockedPromptBox {
  background-color: rgba(142, 142, 141, 0.4);
  z-index: -1;
}
.ML__correctPromptBox {
  outline: 1px solid var(--_correct-color);
  box-shadow: 0 0 5px var(--_correct-color);
}
.ML__incorrectPromptBox {
  outline: 1px solid var(--_incorrect-color);
  box-shadow: 0 0 5px var(--_incorrect-color);
}
.variant-submenu {
  display: flex;
  flex-direction: column;
  padding: 8px;
}
.variant-submenu [part='menu-item'].ML__xl {
  font-size: 2rem;
  text-align: center;
  margin: 0;
}
.ML__center-menu .label {
  text-align: center;
}
.insert-matrix-submenu {
  /* Grid doesn't work on Safari */
  --_menu-item-size: 25px;
  width: calc(5 * var(--_menu-item-size));
  display: flex;
  flex-wrap: wrap;
  padding: 8px;
  align-content: center;
  justify-content: center;
}
.insert-matrix-submenu [part='menu-item'] {
  width: var(--_menu-item-size);
  height: var(--_menu-item-size);
  font-size: 21px;
  border: none;
  border-radius: 0;
  line-height: 21px;
  text-align: center;
  padding: 0;
  margin: 0;
}
.border-submenu [part='menu-item'] {
  font-size: 2rem;
  line-height: 1.2;
  text-align: center;
}
.swatches-submenu {
  --_swatch-size: 2rem;
  --_columns: 4;
  display: flex;
  flex-flow: wrap;
  padding: 8px;
  max-width: calc(var(--_columns) * (var(--_swatch-size) + 18px) + 16px);
  box-sizing: border-box;
}
.menu-swatch {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: fit-content;
  height: fit-content;
  margin: 2px;
  padding: 0;
  background: var(--neutral-200);
}
.menu-swatch > .label {
  padding: 0;
  margin: 0;
  line-height: 0;
}
.menu-swatch > .label > span {
  display: inline-block;
  margin: 6px;
  min-width: var(--_swatch-size);
  min-height: var(--_swatch-size);
  border-radius: 50%;
}
.menu-swatch.active {
  background: var(--neutral-100);
  scale: 1.4;
}
.menu-swatch.active > .label > span {
  border-radius: 2px;
}
.menu-swatch .ui-checkmark,
.menu-swatch .ui-mixedmark {
  position: absolute;
  margin: 0;
  padding: 0;
  color: white;
}
.menu-swatch.dark-contrast .ui-checkmark,
.menu-swatch.dark-contrast .ui-mixedmark {
  color: #000;
}
.ML__insert-template {
  font-size: 1em;
}
.ML__insert-label {
  opacity: 0.5;
  margin-left: 2ex;
}
`;var core_default=".ML__container {\n  min-height: auto !important;\n  --_hue: var(--hue, 212);\n  --_placeholder-color: var(--placeholder-color, hsl(var(--_hue), 40%, 49%));\n  --_placeholder-opacity: var(--placeholder-opacity, 0.4);\n  --_text-font-family: var(--text-font-family, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif);\n}\n.ML__sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  margin: -1px;\n  padding: 0;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  clip-path: inset(50%);\n  white-space: nowrap;\n  border: 0;\n}\n.ML__is-inline {\n  display: inline-block;\n}\n.ML__base {\n  visibility: inherit;\n  display: inline-block;\n  position: relative;\n  cursor: text;\n  padding: 0;\n  margin: 0;\n  box-sizing: content-box;\n  border: 0;\n  outline: 0;\n  vertical-align: baseline;\n  font-weight: inherit;\n  font-family: inherit;\n  font-style: inherit;\n  text-decoration: none;\n  width: min-content;\n}\n.ML__strut,\n.ML__strut--bottom {\n  display: inline-block;\n  min-height: 0.5em;\n}\n.ML__small-delim {\n  font-family: KaTeX_Main;\n}\n/* Text mode */\n.ML__text {\n  font-family: var(--_text-font-family);\n  white-space: pre;\n}\n/* Use cmr for 'math upright' */\n.ML__cmr {\n  font-family: KaTeX_Main;\n  font-style: normal;\n}\n.ML__mathit {\n  font-family: KaTeX_Math;\n  /* The KaTeX_Math font is italic by default, so the font-style below is only \n     useful when a fallback font is used\n  */\n  font-style: italic;\n}\n.ML__mathbf {\n  font-family: KaTeX_Main;\n  font-weight: bold;\n}\n/* Lowercase greek symbols should stick to math font when \\mathbf is applied \n   to match TeX idiosyncratic behavior */\n.lcGreek.ML__mathbf {\n  font-family: KaTeX_Math;\n}\n.ML__mathbfit {\n  font-family: KaTeX_Math;\n  font-weight: bold;\n  font-style: italic;\n}\n.ML__ams {\n  font-family: KaTeX_AMS;\n}\n/* Blackboard */\n.ML__bb {\n  font-family: KaTeX_AMS;\n}\n.ML__cal {\n  font-family: KaTeX_Caligraphic;\n}\n.ML__frak {\n  font-family: KaTeX_Fraktur;\n}\n.ML__tt {\n  font-family: KaTeX_Typewriter;\n}\n.ML__script {\n  font-family: KaTeX_Script;\n}\n.ML__sans {\n  font-family: KaTeX_SansSerif;\n}\n.ML__series_ul {\n  font-weight: 100;\n}\n.ML__series_el {\n  font-weight: 100;\n}\n.ML__series_l {\n  font-weight: 200;\n}\n.ML__series_sl {\n  font-weight: 300;\n}\n.ML__series_sb {\n  font-weight: 500;\n}\n.ML__bold {\n  font-weight: 700;\n}\n.ML__series_eb {\n  font-weight: 800;\n}\n.ML__series_ub {\n  font-weight: 900;\n}\n.ML__series_uc {\n  font-stretch: ultra-condensed;\n}\n.ML__series_ec {\n  font-stretch: extra-condensed;\n}\n.ML__series_c {\n  font-stretch: condensed;\n}\n.ML__series_sc {\n  font-stretch: semi-condensed;\n}\n.ML__series_sx {\n  font-stretch: semi-expanded;\n}\n.ML__series_x {\n  font-stretch: expanded;\n}\n.ML__series_ex {\n  font-stretch: extra-expanded;\n}\n.ML__series_ux {\n  font-stretch: ultra-expanded;\n}\n.ML__it {\n  font-style: italic;\n}\n.ML__shape_ol {\n  -webkit-text-stroke: 1px black;\n  text-stroke: 1px black;\n  color: transparent;\n}\n.ML__shape_sc {\n  font-variant: small-caps;\n}\n.ML__shape_sl {\n  font-style: oblique;\n}\n/* First level emphasis */\n.ML__emph {\n  color: #bc2612;\n}\n/* Second level emphasis */\n.ML__emph .ML__emph {\n  color: #0c7f99;\n}\n.ML__highlight {\n  color: #007cb2;\n  background: #edd1b0;\n}\n.ML__center {\n  text-align: center;\n}\n.ML__left {\n  text-align: left;\n}\n.ML__right {\n  text-align: right;\n}\n.ML__label_padding {\n  padding: 0 0.5em;\n}\n.ML__frac-line {\n  width: 100%;\n  min-height: 1px;\n}\n.ML__frac-line:after {\n  content: '';\n  display: block;\n  margin-top: max(-1px, -0.04em);\n  min-height: max(1px, 0.04em);\n  /* Ensure the line is visible when printing even if \"turn off background images\" is on*/\n  -webkit-print-color-adjust: exact;\n  print-color-adjust: exact;\n  /* There's a bug since Chrome 62 where \n      sub-pixel border lines don't draw at some zoom \n      levels (110%, 90%). \n      Setting the min-height used to work around it, but that workaround\n      broke in Chrome 84 or so.\n      Setting the background (and the min-height) seems to work for now.\n      */\n  background: currentColor;\n  box-sizing: content-box;\n  /* Vuetify sets the box-sizing to inherit \n            causes the fraction line to not draw at all sizes (see #26) */\n  /* On some versions of Firefox on Windows, the line fails to \n            draw at some zoom levels, but setting the transform triggers\n            the hardware accelerated path, which works */\n  transform: translate(0, 0);\n}\n.ML__sqrt {\n  display: inline-block;\n}\n.ML__sqrt-sign {\n  display: inline-block;\n  position: relative;\n}\n.ML__sqrt-line {\n  display: inline-block;\n  height: max(1px, 0.04em);\n  width: 100%;\n}\n.ML__sqrt-line:before {\n  content: '';\n  display: block;\n  margin-top: min(-1px, -0.04em);\n  min-height: max(1px, 0.04em);\n  /* Ensure the line is visible when printing even if \"turn off background images\" is on*/\n  -webkit-print-color-adjust: exact;\n  print-color-adjust: exact;\n  background: currentColor;\n  /* On some versions of Firefox on Windows, the line fails to \n            draw at some zoom levels, but setting the transform triggers\n            the hardware accelerated path, which works */\n  transform: translate(0, 0);\n}\n.ML__sqrt-line:after {\n  border-bottom-width: 1px;\n  content: ' ';\n  display: block;\n  margin-top: -0.1em;\n}\n.ML__sqrt-index {\n  margin-left: 0.27777778em;\n  margin-right: -0.55555556em;\n}\n.ML__delim-size1 {\n  font-family: KaTeX_Size1;\n}\n.ML__delim-size2 {\n  font-family: KaTeX_Size2;\n}\n.ML__delim-size3 {\n  font-family: KaTeX_Size3;\n}\n.ML__delim-size4 {\n  font-family: KaTeX_Size4;\n}\n.ML__delim-mult .delim-size1 > span {\n  font-family: KaTeX_Size1;\n}\n.ML__delim-mult .delim-size4 > span {\n  font-family: KaTeX_Size4;\n}\n.ML__accent-body {\n  font-family: KaTeX_Main;\n}\n.ML__accent-combining-char {\n  position: relative;\n  left: 0.24em;\n}\n/** The markup for a LaTeX formula, either in an editable mathfield or \n    in a static display.\n*/\n.ML__latex {\n  display: inline-block;\n  direction: ltr;\n  text-align: left;\n  text-indent: 0;\n  text-rendering: auto;\n  font-family: inherit;\n  font-style: normal;\n  font-size-adjust: none;\n  font-stretch: normal;\n  font-variant-caps: normal;\n  letter-spacing: normal;\n  line-height: 1.2;\n  word-wrap: normal;\n  word-spacing: normal;\n  white-space: nowrap;\n  text-shadow: none;\n  -webkit-user-select: none;\n  user-select: none;\n  width: min-content;\n}\n.ML__latex .style-wrap {\n  position: relative;\n}\n.ML__latex .ML__mfrac {\n  display: inline-block;\n}\n.ML__latex .ML__left-right {\n  display: inline-block;\n}\n.ML__latex .ML__vlist-t {\n  display: inline-table;\n  table-layout: fixed;\n  border-collapse: collapse;\n}\n.ML__latex .ML__vlist-r {\n  display: table-row;\n}\n.ML__latex .ML__vlist {\n  display: table-cell;\n  vertical-align: bottom;\n  position: relative;\n}\n.ML__latex .ML__vlist > span {\n  display: block;\n  height: 0;\n  position: relative;\n}\n.ML__latex .ML__vlist > span > span {\n  display: inline-block;\n}\n.ML__latex .ML__vlist > span > .ML__pstrut {\n  overflow: hidden;\n  width: 0;\n}\n.ML__latex .ML__vlist-t2 {\n  margin-right: -2px;\n}\n.ML__latex .ML__vlist-s {\n  display: table-cell;\n  vertical-align: bottom;\n  font-size: 1px;\n  width: 2px;\n  min-width: 2px;\n}\n.ML__latex .ML__msubsup {\n  text-align: left;\n}\n.ML__latex .ML__negativethinspace {\n  display: inline-block;\n  margin-left: -0.16667em;\n  height: 0.71em;\n}\n.ML__latex .ML__thinspace {\n  display: inline-block;\n  width: 0.16667em;\n  height: 0.71em;\n}\n.ML__latex .ML__mediumspace {\n  display: inline-block;\n  width: 0.22222em;\n  height: 0.71em;\n}\n.ML__latex .ML__thickspace {\n  display: inline-block;\n  width: 0.27778em;\n  height: 0.71em;\n}\n.ML__latex .ML__enspace {\n  display: inline-block;\n  width: 0.5em;\n  height: 0.71em;\n}\n.ML__latex .ML__quad {\n  display: inline-block;\n  width: 1em;\n  height: 0.71em;\n}\n.ML__latex .ML__qquad {\n  display: inline-block;\n  width: 2em;\n  height: 0.71em;\n}\n.ML__latex .ML__llap,\n.ML__latex .ML__rlap {\n  width: 0;\n  position: relative;\n  display: inline-block;\n}\n.ML__latex .ML__llap > .ML__inner,\n.ML__latex .ML__rlap > .ML__inner {\n  position: absolute;\n}\n.ML__latex .ML__llap > .ML__fix,\n.ML__latex .ML__rlap > .ML__fix {\n  display: inline-block;\n}\n.ML__latex .ML__llap > .ML__inner {\n  right: 0;\n}\n.ML__latex .ML__rlap > .ML__inner {\n  left: 0;\n}\n.ML__latex .ML__rule {\n  display: inline-block;\n  border: solid 0;\n  position: relative;\n  box-sizing: border-box;\n}\n.ML__latex .overline .overline-line,\n.ML__latex .underline .underline-line {\n  width: 100%;\n}\n.ML__latex .overline .overline-line:before,\n.ML__latex .underline .underline-line:before {\n  content: '';\n  border-bottom-style: solid;\n  border-bottom-width: max(1px, 0.04em);\n  -webkit-print-color-adjust: exact;\n  print-color-adjust: exact;\n  display: block;\n}\n.ML__latex .overline .overline-line:after,\n.ML__latex .underline .underline-line:after {\n  border-bottom-style: solid;\n  border-bottom-width: max(1px, 0.04em);\n  -webkit-print-color-adjust: exact;\n  print-color-adjust: exact;\n  content: '';\n  display: block;\n  margin-top: -1px;\n}\n.ML__latex .ML__stretchy {\n  display: block;\n  position: absolute;\n  width: 100%;\n  left: 0;\n  overflow: hidden;\n}\n.ML__latex .ML__stretchy:before,\n.ML__latex .ML__stretchy:after {\n  content: '';\n}\n.ML__latex .ML__stretchy svg {\n  display: block;\n  position: absolute;\n  width: 100%;\n  height: inherit;\n  fill: currentColor;\n  stroke: currentColor;\n  fill-rule: nonzero;\n  fill-opacity: 1;\n  stroke-width: 1;\n  stroke-linecap: butt;\n  stroke-linejoin: miter;\n  stroke-miterlimit: 4;\n  stroke-dasharray: none;\n  stroke-dashoffset: 0;\n  stroke-opacity: 1;\n}\n.ML__latex .slice-1-of-2 {\n  display: inline-flex;\n  position: absolute;\n  left: 0;\n  width: 50.2%;\n  overflow: hidden;\n}\n.ML__latex .slice-2-of-2 {\n  display: inline-flex;\n  position: absolute;\n  right: 0;\n  width: 50.2%;\n  overflow: hidden;\n}\n.ML__latex .slice-1-of-3 {\n  display: inline-flex;\n  position: absolute;\n  left: 0;\n  width: 25.1%;\n  overflow: hidden;\n}\n.ML__latex .slice-2-of-3 {\n  display: inline-flex;\n  position: absolute;\n  left: 25%;\n  width: 50%;\n  overflow: hidden;\n}\n.ML__latex .slice-3-of-3 {\n  display: inline-flex;\n  position: absolute;\n  right: 0;\n  width: 25.1%;\n  overflow: hidden;\n}\n.ML__latex .slice-1-of-1 {\n  display: inline-flex;\n  position: absolute;\n  width: 100%;\n  left: 0;\n  overflow: hidden;\n}\n.ML__latex .ML__nulldelimiter {\n  display: inline-block;\n}\n.ML__latex .ML__op-group {\n  display: inline-block;\n}\n.ML__latex .ML__op-symbol {\n  position: relative;\n}\n.ML__latex .ML__op-symbol.ML__small-op {\n  font-family: KaTeX_Size1;\n}\n.ML__latex .ML__op-symbol.ML__large-op {\n  font-family: KaTeX_Size2;\n}\n.ML__latex:has(.ML__center_environment),\n.ML__latex:has(.ML__multiline_environment),\n.ML__latex:has(.ML__align_environment),\n.ML__latex:has(.ML__eqnarray_environment),\n.ML__latex:has(.ML__gather_environment) {\n  width: 100%;\n}\n.ML__latex .ML__multiline_environment {\n  display: inline-flex;\n  width: 100%;\n}\n.ML__latex .ML__center_environment {\n  display: inline-flex;\n  width: 100%;\n  justify-content: center;\n}\n.ML__latex .ML__align_environment,\n.ML__latex .ML__eqnarray_environment,\n.ML__latex .ML__gather_environment {\n  display: inline-block;\n}\n.ML__latex .ML__mtable .ML__vertical-separator {\n  display: inline-block;\n  min-width: 1px;\n  box-sizing: border-box;\n}\n.ML__latex .ML__mtable .ML__arraycolsep {\n  display: inline-block;\n}\n.ML__latex .ML__mtable .col-align-m > .ML__vlist-t {\n  text-align: center;\n}\n.ML__latex .ML__mtable .col-align-c > .ML__vlist-t {\n  text-align: center;\n}\n.ML__latex .ML__mtable .col-align-l > .ML__vlist-t {\n  text-align: left;\n}\n.ML__latex .ML__mtable .col-align-r > .ML__vlist-t {\n  text-align: right;\n}\n[data-href] {\n  cursor: pointer;\n}\n.ML__error {\n  display: inline-block;\n  background-image: radial-gradient(ellipse at center, hsl(341, 100%, 40%), rgba(0, 0, 0, 0) 70%);\n  background-color: hsla(341, 100%, 40%, 0.1);\n  background-repeat: repeat-x;\n  background-size: 3px 3px;\n  padding-bottom: 3px;\n  background-position: 0 100%;\n}\n.ML__error > .ML__error {\n  background: transparent;\n  padding: 0;\n}\n.ML__placeholder {\n  color: var(--_placeholder-color);\n  opacity: var(--_placeholder-opacity);\n  padding-left: 0.4ex;\n  padding-right: 0.4ex;\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n}\n.ML__notation {\n  position: absolute;\n  box-sizing: border-box;\n  line-height: 0;\n}\n/* This class is used to implement the `\\mathtip` and `\\texttip` commands\n   For UI elements, see `[data-ML__tooltip]`\n*/\n.ML__tooltip-container {\n  position: relative;\n  transform: scale(0);\n}\n.ML__tooltip-container .ML__tooltip-content {\n  position: fixed;\n  display: inline-table;\n  visibility: hidden;\n  z-index: 2;\n  width: max-content;\n  max-width: 400px;\n  padding: 12px 12px;\n  border: var(--tooltip-border);\n  border-radius: var(--tooltip-border-radius);\n  background: var(--tooltip-background-color);\n  --_selection-color: var(--tooltip-color);\n  color: var(--tooltip-color);\n  box-shadow: var(--tooltip-box-shadow);\n  opacity: 0;\n  transition: opacity 0.15s cubic-bezier(0.4, 0, 1, 1);\n}\n.ML__tooltip-container .ML__tooltip-content .ML__text {\n  white-space: normal;\n}\n.ML__tooltip-container .ML__tooltip-content .ML__base {\n  display: contents;\n}\n.ML__tooltip-container:hover .ML__tooltip-content {\n  visibility: visible;\n  opacity: 1;\n  font-size: 0.75em;\n  transform: scale(1) translate(0, 3em);\n}\n";var environment_popover_default="#mathlive-environment-popover.is-visible {\n  visibility: visible;\n}\n#mathlive-environment-popover {\n  --_environment-panel-height: var(--environment-panel-height, 70px);\n  --_accent-color: var(--accent-color, #aaa);\n  --_background: var(--environment-panel-background, #fff);\n  --_button-background: var(--environment-panel-button-background, white);\n  --_button-background-hover: var(--environment-panel-button-background-hover, #f5f5f7);\n  --_button-background-active: var(--environment-panel-button-background-active, #f5f5f7);\n  --_button-text: var(--environment-panel-button-text, #e3e4e8);\n  position: absolute;\n  width: calc(var(--_environment-panel-height) * 2);\n  height: var(--_environment-panel-height);\n  border-radius: 4px;\n  border: 1.5px solid var(--_accent-color);\n  background-color: var(--_background);\n  box-shadow: 0 0 30px 0 var(--environment-shadow, rgba(0, 0, 0, 0.4));\n  pointer-events: all;\n  visibility: hidden;\n}\n#mathlive-environment-popover .MLEP__array-buttons {\n  height: calc(var(--_environment-panel-height) * 5/4);\n  width: calc(var(--_environment-panel-height) * 5/4);\n  margin-left: calc(0px - var(--_environment-panel-height) * 0.16);\n  margin-top: calc(0px - var(--_environment-panel-height) * 0.19);\n}\n#mathlive-environment-popover .MLEP__array-buttons .font {\n  fill: white;\n}\n#mathlive-environment-popover .MLEP__array-buttons circle {\n  fill: #7f7f7f;\n  transition: fill 300ms;\n}\n#mathlive-environment-popover .MLEP__array-buttons .MLEP__array-insert-background {\n  fill-opacity: 1;\n  fill: var(--_background);\n  stroke: var(--_accent-color);\n  stroke-width: 3px;\n}\n#mathlive-environment-popover .MLEP__array-buttons line {\n  stroke: var(--_accent-color);\n  stroke-opacity: 0;\n  stroke-width: 40;\n  pointer-events: none;\n  transition: stroke-opacity 300ms;\n  stroke-linecap: round;\n}\n#mathlive-environment-popover .MLEP__array-buttons g[data-command]:hover circle {\n  fill: var(--_accent-color);\n}\n#mathlive-environment-popover .MLEP__array-buttons g[data-command]:hover line {\n  stroke-opacity: 1;\n}\n#mathlive-environment-popover .MLEP__environment-delimiter-controls {\n  height: 100%;\n  width: 50%;\n}\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options {\n  width: var(--_environment-panel-height);\n  height: var(--_environment-panel-height);\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: row;\n  justify-content: space-around;\n}\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg {\n  pointer-events: all;\n  margin-top: 2px;\n  width: calc(var(--_environment-panel-height) / 3 * 28 / 24);\n  height: calc(var(--_environment-panel-height) / 3 - 2px);\n  border-radius: calc(var(--_environment-panel-height) / 25);\n  background-color: var(--_button-background);\n}\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg:hover {\n  background-color: var(--_button-background-hover);\n}\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg path,\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg line {\n  stroke: var(--_button-text);\n  stroke-width: 2;\n  stroke-linecap: round;\n}\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg rect,\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg path {\n  fill-opacity: 0;\n}\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active {\n  pointer-events: none;\n  background-color: var(--_button-background-active);\n}\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active path,\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active line {\n  stroke: var(--_accent-color);\n}\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active circle {\n  fill: var(--_accent-color);\n}\n";var suggestion_popover_default=`/* The element that display info while in latex mode */
#mathlive-suggestion-popover {
  background-color: rgba(97, 97, 97);
  color: #fff;
  text-align: center;
  border-radius: 8px;
  position: fixed;
  z-index: 1;
  display: none;
  flex-direction: column;
  justify-content: center;
  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
}
#mathlive-suggestion-popover.top-tip::after {
  content: '';
  position: absolute;
  top: -15px;
  left: calc(50% - 15px);
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-bottom: 15px solid rgba(97, 97, 97);
  font-size: 1rem;
}
#mathlive-suggestion-popover.bottom-tip::after {
  content: '';
  position: absolute;
  bottom: -15px;
  left: calc(50% - 15px);
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-top: 15px solid rgba(97, 97, 97);
  font-size: 1rem;
}
#mathlive-suggestion-popover.is-animated {
  transition: all 0.2s cubic-bezier(0.64, 0.09, 0.08, 1);
  animation: ML__fade-in cubic-bezier(0, 0, 0.2, 1) 0.15s;
}
#mathlive-suggestion-popover.is-visible {
  display: flex;
}
@keyframes ML__fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
/* The wrapper class for the entire content of the popover panel */
#mathlive-suggestion-popover ul {
  display: flex;
  flex-flow: column;
  list-style: none;
  margin: 0;
  padding: 0;
  align-items: flex-start;
  max-height: 400px;
  overflow-y: auto;
}
#mathlive-suggestion-popover li {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  margin: 8px;
  padding: 8px;
  width: calc(100% - 16px - 16px);
  column-gap: 1em;
  border-radius: 8px;
  cursor: pointer;
  /* Since the content can be clicked on, provide feedback on hover */
}
#mathlive-suggestion-popover li a {
  color: #5ea6fd;
  padding-top: 0.3em;
  margin-top: 0.4em;
  display: block;
}
#mathlive-suggestion-popover li a:hover {
  color: #5ea6fd;
  text-decoration: underline;
}
#mathlive-suggestion-popover li:hover,
#mathlive-suggestion-popover li.is-pressed,
#mathlive-suggestion-popover li.is-active {
  background: rgba(255, 255, 255, 0.1);
}
/* The command inside a popover (inside a #mathlive-suggestion-popover) */
.ML__popover__command {
  font-size: 1.6rem;
  font-family: KaTeX_Main;
}
.ML__popover__current {
  background: #5ea6fd;
  color: #fff;
}
.ML__popover__latex {
  font-family: 'IBM Plex Mono', 'Source Code Pro', Consolas, 'Roboto Mono', Menlo, 'Bitstream Vera Sans Mono', 'DejaVu Sans Mono', Monaco, Courier, monospace;
  align-self: center;
}
/* The keyboard shortcuts for a symbol as displayed in the popover */
.ML__popover__keybinding {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 0.8em;
  opacity: 0.7;
}
/* Style for the character that joins the modifiers of a keyboard shortcut 
(usually a "+" sign)*/
.ML__shortcut-join {
  opacity: 0.5;
}
`;var keystroke_caption_default="/* The element that displays the keys as the user type them */\n#mathlive-keystroke-caption-panel {\n  visibility: hidden;\n  /*min-width: 160px;*/\n  /*background-color: rgba(97, 97, 200, .95);*/\n  background: var(--secondary, hsl(var(--_hue), 19%, 26%));\n  border-color: var(--secondary-border, hsl(0, 0%, 91%));\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n  text-align: center;\n  border-radius: 6px;\n  padding: 16px;\n  position: absolute;\n  z-index: 1;\n  display: flex;\n  flex-direction: row-reverse;\n  justify-content: center;\n  --keystroke: white;\n  --on-keystroke: #555;\n  --keystroke-border: #f7f7f7;\n}\n@media (prefers-color-scheme: dark) {\n  body:not([theme='light']) #mathlive-keystroke-caption-panel {\n    --keystroke: hsl(var(--_hue), 50%, 30%);\n    --on-keystroke: hsl(0, 0%, 98%);\n    --keystroke-border: hsl(var(--_hue), 50%, 25%);\n  }\n}\nbody[theme='dark'] #mathlive-keystroke-caption-panel {\n  --keystroke: hsl(var(--_hue), 50%, 30%);\n  --on-keystroke: hsl(0, 0%, 98%);\n  --keystroke-border: hsl(var(--_hue), 50%, 25%);\n}\n#mathlive-keystroke-caption-panel > span {\n  min-width: 14px;\n  /*height: 8px;*/\n  margin: 0 8px 0 0;\n  padding: 4px;\n  background-color: var(--keystroke);\n  color: var(--on-keystroke);\n  fill: currentColor;\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n  font-size: 1em;\n  border-radius: 6px;\n  border: 2px solid var(--keystroke-border);\n  /*box-shadow: 0 7px 14px rgba(0,0,0,0.25), 0 5px 5px rgba(0,0,0,0.22);*/\n}\n";var virtual_keyboard_default=`.ML__keyboard {
  --_keyboard-height: 0;
  --_keyboard-zindex: var(--keyboard-zindex, 105);
  --_accent-color: var(--keyboard-accent-color, #0c75d8);
  --_background: var(--keyboard-background, #cacfd7);
  --_border: var(--keyboard-border, #ddd);
  --_padding-horizontal: var(--keyboard-padding-horizontal, 0px);
  --_padding-top: var(--keyboard-padding-top, 5px);
  --_padding-bottom: var(--keyboard-padding-bottom, 0px);
  --_row-padding-left: var(--keyboard-row-padding-left, 0px);
  --_row-padding-right: var(--keyboard-row-padding-right, 0px);
  --_toolbar-text: var(--keyboard-toolbar-text, #2c2e2f);
  --_toolbar-text-active: var(--keyboard-toolbar-text-active, var(--_accent-color));
  --_toolbar-background: var(--keyboard-toolbar-background, transparent);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #eee);
  --_toolbar-background-selected: var(--keyboard-toolbar-background-selected, transparent);
  --_toolbar-font-size: var(--keyboard-toolbar-font-size, '135%');
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #fff);
  --_keycap-background: var(--keycap-background, #f0f0f0);
  --_keycap-background-hover: var(--keycap-background-hover, #f5f5f7);
  --_keycap-background-active: var(--keycap-background-active, var(--_accent-color));
  --_keycap-background-pressed: var(--keycap-background-pressed, var(--_accent-color));
  --_keycap-border: var(--keycap-border, #e5e6e9);
  --_keycap-border-bottom: var(--keycap-border-bottom, #8d8f92);
  --_keycap-text: var(--keycap-text, #000);
  --_keycap-text-active: var(--keycap-text-active, #fff);
  --_keycap-text-hover: var(--keycap-text-hover, var(--_keycap-text));
  --_keycap-text-pressed: var(--keycap-text-pressed, #fff);
  --_keycap-shift-text: var(--keycap-shift-text, var(--_accent-color));
  --_keycap-primary-background: var(--keycap-primary-background, var(--_accent-color));
  --_keycap-primary-text: var(--keycap-primary-text, #ddd);
  --_keycap-primary-background-hover: var(--keycap-primary-background-hover, #0d80f2);
  --_keycap-secondary-background: var(--keycap-secondary-background, #a0a9b8);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #7d8795);
  --_keycap-secondary-text: var(--keycap-secondary-text, #060707);
  --_keycap-secondary-border: var(--keycap-secondary-border, #c5c9d0);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, #989da6);
  --_keycap-height: var(--keycap-height, 60px);
  /* Keycap width (incl. margin) */
  --_keycap-max-width: var(--keycap-max-width, 100px);
  --_keycap-gap: var(--keycap-gap, 8px);
  --_keycap-font-size: var(--keycap-font-size, clamp(16px, 4cqw, 24px));
  --_keycap-small-font-size: var(--keycap-small-font-size, calc(var(--keycap-font-size) * 0.8));
  --_keycap-extra-small-font-size: var(--keycap-extra-small-font-size, calc(var(--keycap-font-size) / 1.42));
  --_variant-panel-background: var(--variant-panel-background, #f0f0f0);
  --_variant-keycap-text: var(--variant-keycap-text, var(--_keycap-text));
  --_variant-keycap-text-active: var(--variant-keycap-text-active, var(--_keycap-text-active));
  --_variant-keycap-background-active: var(--variant-keycap-background-active, var(--_accent-color));
  --_variant-keycap-length: var(--variant-keycap-length, 70px);
  --_variant-keycap-font-size: var(--variant-keycap-font-size, 30px);
  --_variant-keycap-aside-font-size: var(--variant-keycap-aside-font-size, 12px);
  --_keycap-shift-font-size: var(--keycap-shift-font-size, 16px);
  --_keycap-shift-color: var(--keycap-shift-color, var(--_accent-color));
  --_box-placeholder-color: var(--box-placeholder-color, var(--_accent-color));
  --_box-placeholder-pressed-color: var(--box-placeholder-pressed-color, var(--keycap-text-pressed));
  --_keycap-glyph-size: var(--keycap-glyph-size, 20px);
  --_keycap-glyph-size-lg: var(--keycap-glyph-size-lg, 24px);
  --_keycap-glyph-size-xl: var(--keycap-glyph-size-xl, 50px);
}
.is-math-mode .MLK__rows .if-text-mode,
.is-text-mode .MLK__rows .if-math-mode {
  display: none;
}
.if-can-undo,
.if-can-redo,
.if-can-copy,
.if-can-cut,
.if-can-paste {
  opacity: 0.4;
  pointer-events: none;
}
.can-undo .if-can-undo,
.can-redo .if-can-redo,
.can-copy .if-can-copy,
.can-cut .if-can-cut,
.can-paste .if-can-paste {
  opacity: 1;
  pointer-events: all;
}
body > .ML__keyboard {
  position: fixed;
  --_padding-bottom: calc(var(--keyboard-padding-bottom, 0px) + env(safe-area-inset-bottom, 0));
}
body > .ML__keyboard.is-visible > .MLK__backdrop {
  box-shadow: 0 -5px 6px rgba(0, 0, 0, 0.08);
  border-top: 1px solid var(--_border);
}
body > .ML__keyboard.backdrop-is-transparent.is-visible > .MLK__backdrop {
  box-shadow: none;
  border: none;
}
body > .ML__keyboard.is-visible.animate > .MLK__backdrop {
  transition: 0.28s cubic-bezier(0, 0, 0.2, 1);
  transition-property: transform, opacity;
  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);
}
.ML__keyboard {
  position: relative;
  overflow: hidden;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  z-index: var(--_keyboard-zindex);
  box-sizing: border-box;
  outline: none;
  border: none;
  margin: 0;
  padding: 0;
  line-height: 1;
  overflow-wrap: unset;
  text-align: left;
  vertical-align: baseline;
  cursor: auto;
  white-space: pre;
  box-shadow: none;
  opacity: 1;
  transform: none;
  pointer-events: none;
}
.ML__keyboard :where(div) {
  box-sizing: border-box;
  outline: none;
  border: none;
  margin: 0;
  padding: 0;
  line-height: 1;
  overflow-wrap: unset;
  text-align: left;
  vertical-align: baseline;
  cursor: auto;
  white-space: pre;
  box-shadow: none;
  transform: none;
}
.MLK__backdrop {
  position: absolute;
  bottom: calc(-1 * var(--_keyboard-height));
  width: 100%;
  height: var(--_keyboard-height);
  box-sizing: border-box;
  padding-top: var(--_padding-top);
  padding-bottom: var(--_padding-bottom);
  padding-left: var(--_padding-horizontal);
  padding-right: var(--_padding-horizontal);
  opacity: 0;
  visibility: hidden;
  transform: translate(0, 0);
  background: var(--_background);
}
.backdrop-is-transparent .MLK__backdrop {
  background: transparent;
}
/* If a custom layout has a custom container/backdrop
  (backdrop-is-transparent), make sure to let pointer event go through. */
.backdrop-is-transparent .MLK__plate {
  background: transparent;
  pointer-events: none;
}
/* If a custom layout has a custom container/backdrop, make sure to 
   allow pointer events on it. */
.backdrop-is-transparent .MLK__layer > div > div {
  pointer-events: all;
}
.ML__keyboard.is-visible > .MLK__backdrop {
  transform: translate(0, calc(-1 * var(--_keyboard-height)));
  opacity: 1;
  visibility: visible;
}
.caps-lock-indicator {
  display: none;
  width: 8px;
  height: 8px;
  background: #0cbc0c;
  box-shadow: inset 0 0 4px 0 #13ca13, 0 0 4px 0 #a9ef48;
  border-radius: 8px;
  right: 8px;
  top: 8px;
  position: absolute;
}
.ML__keyboard.is-caps-lock .caps-lock-indicator {
  display: block;
}
.ML__keyboard.is-caps-lock .shift {
  background: var(--_keycap-background-active);
  color: var(--_keycap-text-active);
}
.MLK__plate {
  position: absolute;
  top: var(--_padding-top);
  left: var(--_padding-horizontal);
  width: calc(100% - 2 * var(--_padding-horizontal));
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  container-type: inline-size;
  touch-action: none;
  -webkit-user-select: none;
  user-select: none;
  pointer-events: all;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 16px;
  /* Size of toolbar labels */
  font-weight: 400;
  text-shadow: none;
}
.ML__box-placeholder {
  color: var(--_box-placeholder-color);
}
.MLK__tex {
  font-family: KaTeX_Main, KaTeX_Math, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__tex-math {
  font-family: KaTeX_Math, KaTeX_Main, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
  font-style: italic;
}
.MLK__layer {
  display: none;
  outline: none;
}
.MLK__layer.is-visible {
  display: flex;
  flex-flow: column;
}
/* Keyboard layouts are made or rows of keys... */
.MLK__rows {
  --_keycap-width: var(--keycap-width, min(var(--_keycap-max-width), 10cqw));
  display: flex;
  flex-flow: column;
  align-items: center;
  border-collapse: separate;
  clear: both;
  border: 0;
  margin: 0;
  margin-bottom: var(--_keycap-gap);
  gap: var(--_keycap-gap);
  /* If the styling include, e.g., some shadows, they will be
  cut off by the overflow. In that case, set the padding to 
  compensate. */
  padding-left: var(--_row-padding-left);
  padding-right: var(--_row-padding-right);
  overflow: visible;
  touch-action: none;
}
.MLK__rows > .MLK__row {
  display: flex;
  flex-flow: row;
  justify-content: center;
  width: 100%;
  gap: var(--_keycap-gap);
  margin: 0;
  padding: 0;
  /* For the alignment of the text on some modifiers (e.g. shift) */
  /* Extra spacing between two adjacent keys */
}
.MLK__rows > .MLK__row .tex {
  font-family: KaTeX_Math, KaTeX_Main, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__rows > .MLK__row .tex-math {
  font-family: KaTeX_Math, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__rows > .MLK__row .big-op {
  font-size: calc(1.25 * var(--_keycap-font-size));
}
.MLK__rows > .MLK__row .small {
  font-size: var(--_keycap-small-font-size);
}
.MLK__rows > .MLK__row .bottom {
  justify-content: flex-end;
}
.MLK__rows > .MLK__row .left {
  align-items: flex-start;
  padding-left: 12px;
}
.MLK__rows > .MLK__row .right {
  align-items: flex-end;
  padding-right: 12px;
}
.MLK__rows > .MLK__row .w0 {
  width: 0;
}
.MLK__rows > .MLK__row .w5 {
  width: calc(0.5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w15 {
  width: calc(1.5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w20 {
  width: calc(2 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w40 {
  width: calc(4 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w50 {
  width: calc(5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .MLK__keycap.w50 {
  font-size: 80%;
  padding-top: 10px;
  font-weight: 100;
}
.MLK__rows > .MLK__row .separator {
  background: transparent;
  border: none;
  pointer-events: none;
}
.MLK__rows > .MLK__row .horizontal-rule {
  height: 6px;
  margin-top: 3px;
  margin-bottom: 0;
  width: 100%;
  border-radius: 0;
  border-top: var(--_horizontal-rule);
}
.MLK__rows > .MLK__row .ghost {
  background: var(--_toolbar-background);
  border: none;
  color: var(--_toolbar-text);
}
.MLK__rows > .MLK__row .ghost:hover {
  background: var(--_toolbar-background-hover);
}
.MLK__rows > .MLK__row .bigfnbutton {
  font-size: var(--_keycap-extra-small-font-size);
}
.MLK__rows > .MLK__row .shift,
.MLK__rows > .MLK__row .action {
  color: var(--_keycap-secondary-text);
  background: var(--_keycap-secondary-background);
  border-color: var(--_keycap-secondary-border);
  border-bottom-color: var(--_keycap-secondary-border-bottom);
  line-height: 0.8;
  font-size: min(1rem, var(--_keycap-small-font-size));
  font-weight: 600;
  padding: 8px 12px 8px 12px;
}
.MLK__rows > .MLK__row .shift:hover,
.MLK__rows > .MLK__row .action:hover {
  background: var(--_keycap-secondary-background-hover);
}
.MLK__rows > .MLK__row .action.primary {
  background: var(--_keycap-primary-background);
  color: var(--_keycap-primary-text);
}
.MLK__rows > .MLK__row .action.primary:hover {
  background: var(--_keycap-primary-background-hover);
  color: var(--_keycap-primary-text);
}
.MLK__rows > .MLK__row .shift.selected,
.MLK__rows > .MLK__row .action.selected {
  color: var(--_toolbar-text-active);
}
.MLK__rows > .MLK__row .shift.selected.is-pressed,
.MLK__rows > .MLK__row .action.selected.is-pressed,
.MLK__rows > .MLK__row .shift.selected.is-active,
.MLK__rows > .MLK__row .action.selected.is-active {
  color: white;
}
.MLK__rows > .MLK__row .warning {
  background: #cd0030;
  color: white;
}
.MLK__rows > .MLK__row .warning svg.svg-glyph {
  width: var(--_keycap-glyph-size-lg);
  height: var(--_keycap-glyph-size-lg);
  min-height: var(--_keycap-glyph-size-lg);
}
/** A regular keycap
 * Use the :where() pseudo-class to give it a very low specifity, 
 * so that it can be overriden by custom style.
 */
:where(.MLK__rows > .MLK__row div) {
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: space-evenly;
  width: calc(var(--_keycap-width) - var(--_keycap-gap));
  height: var(--_keycap-height);
  box-sizing: border-box;
  padding: 0;
  vertical-align: top;
  text-align: center;
  float: left;
  color: var(--_keycap-text);
  fill: currentColor;
  font-size: var(--_keycap-font-size);
  background: var(--_keycap-background);
  border: 1px solid var(--_keycap-border);
  border-bottom-color: var(--_keycap-border-bottom);
  border-radius: 6px;
  cursor: pointer;
  touch-action: none;
  /* Keys with a variants panel */
  position: relative;
  overflow: hidden;
  -webkit-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}
:where(.MLK__rows > .MLK__row div):hover {
  overflow: visible;
  background: var(--_keycap-background-hover);
}
:where(.MLK__rows > .MLK__row div) .ML__latex {
  pointer-events: none;
  touch-action: none;
}
:where(.MLK__rows > .MLK__row div) svg.svg-glyph {
  margin: 8px 0;
  width: var(--_keycap-glyph-size);
  height: var(--_keycap-glyph-size);
  min-height: var(--_keycap-glyph-size);
}
:where(.MLK__rows > .MLK__row div) svg.svg-glyph-lg {
  margin: 8px 0;
  width: var(--_keycap-glyph-size-lg);
  height: var(--_keycap-glyph-size-lg);
  min-height: var(--_keycap-glyph-size-lg);
}
:where(.MLK__rows > .MLK__row div).MLK__tex-math {
  font-size: 25px;
}
:where(.MLK__rows > .MLK__row div).is-pressed {
  background: var(--_keycap-background-pressed);
  color: var(--_keycap-text-pressed);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active,
:where(.MLK__rows > .MLK__row div).action.is-active,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed,
:where(.MLK__rows > .MLK__row div).action.is-pressed {
  z-index: calc(var(--_keyboard-zindex) - 5);
}
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active aside,
:where(.MLK__rows > .MLK__row div).action.is-active aside,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed aside,
:where(.MLK__rows > .MLK__row div).action.is-pressed aside {
  display: none;
}
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active .MLK__shift,
:where(.MLK__rows > .MLK__row div).action.is-active .MLK__shift,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed .MLK__shift,
:where(.MLK__rows > .MLK__row div).action.is-pressed .MLK__shift {
  display: none;
}
:where(.MLK__rows > .MLK__row div).shift.is-pressed,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed,
:where(.MLK__rows > .MLK__row div).action.is-pressed {
  background: var(--_keycap-background-pressed);
  color: var(--_keycap-text-pressed);
}
:where(.MLK__rows > .MLK__row div).shift.is-active,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active,
:where(.MLK__rows > .MLK__row div).action.is-active {
  background: var(--_keycap-background-active);
  color: var(--_keycap-text-active);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
:where(.MLK__rows > .MLK__row div) small {
  color: var(--_keycap-secondary-text);
}
:where(.MLK__rows > .MLK__row div) aside {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 10px;
  line-height: 10px;
  color: var(--_keycap-secondary-text);
}
/* Add an attribute 'data-tooltip' to display a tooltip on hover.
Note there are a different set of tooltip rules for the keyboard toggle
(it's in a different CSS tree) */
.ML__keyboard [data-tooltip] {
  position: relative;
}
.ML__keyboard [data-tooltip]::after {
  position: absolute;
  display: inline-table;
  content: attr(data-tooltip);
  top: inherit;
  bottom: 100%;
  width: max-content;
  max-width: 200px;
  padding: 8px 8px;
  background: #616161;
  color: #fff;
  text-align: center;
  z-index: 2;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  border-radius: 2px;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-weight: 400;
  font-size: 12px;
  transition: all 0.15s cubic-bezier(0.4, 0, 1, 1) 1s;
  opacity: 0;
  transform: scale(0.5);
}
.ML__keyboard [data-tooltip]:hover {
  position: relative;
}
.ML__keyboard [data-tooltip]:hover::after {
  opacity: 1;
  transform: scale(1);
}
.MLK__toolbar {
  align-self: center;
  display: flex;
  flex-flow: row;
  justify-content: space-between;
  width: 100%;
  max-width: 996px;
  min-height: 32px;
  /* Icons for undo/redo, etc. */
}
.MLK__toolbar svg {
  height: 20px;
  width: 20px;
}
.MLK__toolbar > .left {
  position: relative;
  display: flex;
  justify-content: flex-start;
  flex-flow: row;
}
.MLK__toolbar > .right {
  display: flex;
  justify-content: flex-end;
  flex-flow: row;
}
.MLK__toolbar > div > div {
  /* "button" in the toolbar */
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--_toolbar-text);
  fill: currentColor;
  background: var(--_toolbar-background);
  font-size: var(--_toolbar-font-size);
  padding: 4px 15px;
  cursor: pointer;
  width: max-content;
  min-width: 42px;
  min-height: 34px;
  border: none;
  padding-left: 10px;
  padding-right: 10px;
  padding-bottom: 8px;
  padding-top: 8px;
  margin-top: 0;
  margin-bottom: 4px;
  margin-left: 4px;
  margin-right: 4px;
  border-radius: 8px;
  box-shadow: none;
  border-bottom: 2px solid transparent;
}
.MLK__toolbar > div > div:not(.disabled):not(.selected):hover {
  background: var(--_toolbar-background-hover);
}
.MLK__toolbar > div > div.disabled svg,
.MLK__toolbar > div > div.disabled:hover svg,
.MLK__toolbar > div > div.disabled.is-pressed svg {
  color: var(--_toolbar-text);
  opacity: 0.2;
}
.MLK__toolbar > div > div:hover,
.MLK__toolbar > div > div:active,
.MLK__toolbar > div > div.is-pressed,
.MLK__toolbar > div > div.is-active {
  color: var(--_toolbar-text-active);
}
.MLK__toolbar > div > div.selected {
  color: var(--_toolbar-text-active);
  background: var(--_toolbar-background-selected);
  border-radius: 0;
  border-bottom-color: var(--_toolbar-text-active);
  padding-bottom: 4px;
  margin-bottom: 8px;
}
/* This is the element that displays variants on press+hold */
.MLK__variant-panel {
  visibility: hidden;
  position: fixed;
  display: flex;
  flex-flow: row wrap-reverse;
  justify-content: center;
  align-content: center;
  margin: 0;
  padding: 0;
  bottom: auto;
  top: 0;
  box-sizing: content-box;
  transform: none;
  z-index: calc(var(--_keyboard-zindex) + 1);
  touch-action: none;
  max-width: 350px;
  background: var(--_variant-panel-background);
  text-align: center;
  border-radius: 6px;
  padding: 6px;
  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
  transition: none;
}
.MLK__variant-panel.is-visible {
  visibility: visible;
}
.MLK__variant-panel.compact {
  --_variant-keycap-length: var(--variant-keycap-length, 50px);
  --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
  --_variant-keycap-aside-font-size: var(--variant-keycap-aside-font-size, 10px);
}
.MLK__variant-panel .item {
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: center;
  font-size: var(--_variant-keycap-font-size);
  height: var(--_variant-keycap-length);
  width: var(--_variant-keycap-length);
  margin: 0;
  box-sizing: border-box;
  border-radius: 5px;
  border: 1px solid transparent;
  background: transparent;
  pointer-events: all;
  cursor: pointer;
  color: var(--_variant-keycap-text);
  fill: currentColor;
}
@media (max-height: 412px) {
  .MLK__variant-panel .item {
    --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
    --_variant-keycap-length: var(--variant-keycap-length, 50px);
  }
}
.MLK__variant-panel .item .ML__latex {
  pointer-events: none;
}
.MLK__variant-panel .item.is-active {
  background: var(--_variant-keycap-background-active);
  color: var(--_variant-keycap-text-active);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
.MLK__variant-panel .item.is-pressed {
  background: var(--_variant-keycap-background-pressed);
  color: var(--_variant-keycap-text-pressed);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
.MLK__variant-panel .item.small {
  font-size: var(--_keycap-small-font-size);
}
.MLK__variant-panel .item.swatch-button {
  box-sizing: border-box;
  background: #fbfbfb;
}
.MLK__variant-panel .item.swatch-button > span {
  display: inline-block;
  margin: 6px;
  width: calc(100% - 12px);
  height: calc(100% - 12px);
  border-radius: 50%;
}
.MLK__variant-panel .item.swatch-button:hover {
  background: #f0f0f0;
}
.MLK__variant-panel .item.swatch-button:hover > span {
  border-radius: 2px;
}
.MLK__variant-panel .item.box > div,
.MLK__variant-panel .item.box > span {
  border: 1px dashed rgba(0, 0, 0, 0.24);
}
.MLK__variant-panel .item .warning {
  min-height: 60px;
  min-width: 60px;
  background: #cd0030;
  color: white;
  padding: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 5px;
}
.MLK__variant-panel .item .warning.is-pressed,
.MLK__variant-panel .item .warning.is-active {
  background: red;
}
.MLK__variant-panel .item .warning svg.svg-glyph {
  width: var(--_keycap-glyph-size-xl);
  height: var(--_keycap-glyph-size-xl);
}
.MLK__variant-panel .item aside {
  font-size: var(--_variant-keycap-aside-font-size);
  line-height: 12px;
  opacity: 0.78;
  padding-top: 2px;
  width: 100%;
  text-align: center;
  text-wrap: wrap;
}
.MLK__keycap {
  position: relative;
}
.MLK__shift {
  display: block;
  position: absolute;
  right: 4px;
  top: 4px;
  font-size: var(--_keycap-shift-font-size);
  color: var(--_keycap-shift-color);
}
.hide-shift .MLK__shift {
  display: none;
}
@media (max-width: 414px) {
  .MLK__variant-panel {
    max-width: 350px;
    --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
    --_variant-keycap-length: var(--variant-keycap-length, 50px);
  }
}
/* @xs breakpoint: iPhone 5 */
@container (max-width: 414px) {
  .MLK__rows {
    --_keycap-gap: max(var(--_keycap-gap, 2px), 2px);
    --_keycap-height: max(var(--_keycap-height), 42px);
    --_keycap-width: var(--keycap-width, min(min(var(--_keycap-max-width)), 10cqw), 62px));
  }
  .MLK__toolbar > div > div {
    font-size: 100%;
    margin-left: 2px;
    margin-right: 2px;
  }
  .MLK__rows .shift,
  .MLK__rows .action {
    font-size: 65%;
  }
  .MLK__rows .warning svg.svg-glyph {
    width: 14px;
    height: 14px;
    min-height: 14px;
  }
}
@container (max-width: 744px) {
  .MLK__rows {
    --_keycap-gap: max(var(--keycap-gap, 2px), 2px);
    --_keycap-height: max(var(--keycap-height, 52px), 52px);
    --_keycap-width: var(--keycap-width, min(min(var(--_keycap-max-width), 10cqw), 62px));
  }
  .MLK__toolbar > div > div {
    padding-left: 0;
    padding-right: 0;
  }
  .MLK__tooltip::after {
    padding: 8px 16px;
    font-size: 16px;
  }
  .MLK__rows > .MLK__row > div.fnbutton {
    font-size: 16px;
  }
  .MLK__rows > .MLK__row > div.bigfnbutton {
    font-size: calc(var(--_keycap-extra-small-font-size) / 1.55);
  }
  .MLK__rows > .MLK__row > div.small {
    font-size: 13px;
  }
  .MLK__rows > .MLK__row > div > aside {
    display: none;
  }
  .MLK__shift {
    display: none;
  }
}
/* Medium breakpoint: larger phones */
@container (max-width: 768px) {
  .MLK__rows {
    --_keycap-height: max(var(--keycap-height, 42px), 42px);
  }
  .MLK__rows > .MLK__row > div > small {
    font-size: 14px;
  }
}
@media (max-height: 768px) {
  .MLK__rows {
    --_keycap-height: max(var(--keycap-height, 42px), 42px);
  }
  .MLK__rows > .MLK__row > div > small {
    font-size: 14px;
  }
}
@container (max-width: 1444px) {
  .MLK__rows .if-wide {
    display: none;
  }
}
@media (prefers-color-scheme: dark) {
  .ML__keyboard {
    --_accent-color: var(--keyboard-accent-color, #0b5c9c);
    --_background: var(--keyboard-background, #151515);
    --_border: var(--keyboard-border, transparent);
    --_toolbar-text: var(--keyboard-toolbar-text, #e3e4e8);
    --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #303030);
    --keyboard-toolbar-background-hover: #303030;
    --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #303030);
    --_keycap-background: var(--keycap-background, #1f2022);
    --_keycap-background-hover: var(--keycap-background-hover, #2f3032);
    --_keycap-border: var(--_keycap-border, transparent);
    --_keycap-border-bottom: var(--_keycap-border-bottom, transparent);
    --_keycap-text: var(--keycap-text, #e3e4e8);
    --_keycap-secondary-background: var(--keycap-secondary-background, #3d4144);
    --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #4d5154);
    --_keycap-secondary-text: var(--keycap-secondary-text, #e7ebee);
    --keycap-secondary-border: transparent;
    --keycap-secondary-border-bottom: transparent;
    --_keycap-secondary-border: var(--keycap-secondary-border, transparent);
    --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, transparent);
    --_variant-panel-background: var(--variant-panel-background, #303030);
    --_variant-keycap-text-active: var(--variant-keycap-text-active, #fff);
  }
}
/* Same as the media query, but with a class */
[theme='dark'] .ML__keyboard {
  --_accent-color: var(--keyboard-accent-color, #0b5c9c);
  --_background: var(--keyboard-background, #151515);
  --_border: var(--keyboard-border, transparent);
  --_toolbar-text: var(--keyboard-toolbar-text, #e3e4e8);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #303030);
  --keyboard-toolbar-background-hover: #303030;
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #303030);
  --_keycap-background: var(--keycap-background, #1f2022);
  --_keycap-background-hover: var(--keycap-background-hover, #2f3032);
  --_keycap-border: var(--_keycap-border, transparent);
  --_keycap-border-bottom: var(--_keycap-border-bottom, transparent);
  --_keycap-text: var(--keycap-text, #e3e4e8);
  --_keycap-secondary-background: var(--keycap-secondary-background, #3d4144);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #4d5154);
  --_keycap-secondary-text: var(--keycap-secondary-text, #e7ebee);
  --keycap-secondary-border: transparent;
  --keycap-secondary-border-bottom: transparent;
  --_keycap-secondary-border: var(--keycap-secondary-border, transparent);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, transparent);
  --_variant-panel-background: var(--variant-panel-background, #303030);
  --_variant-keycap-text-active: var(--variant-keycap-text-active, #fff);
}
[theme='light'] .ML__keyboard {
  --_accent-color: var(--keyboard-accent-color, #0c75d8);
  --_background: var(--keyboard-background, #cacfd7);
  --_border: var(--keyboard-border, #ddd);
  --_toolbar-text: var(--keyboard-toolbar-text, #2c2e2f);
  --_toolbar-background: var(--keyboard-toolbar-background, transparent);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #eee);
  --_toolbar-background-selected: var(--keyboard-toolbar-background-selected, transparent);
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #fff);
  --_keycap-background: var(--keycap-background, white);
  --_keycap-background-hover: var(--keycap-background-hover, #f5f5f7);
  --_keycap-background-active: var(--keycap-background-active, var(--_accent-color));
  --_keycap-background-pressed: var(--keycap-background-pressed, var(--_accent-color));
  --_keycap-border: var(--_keycap-border, #e5e6e9);
  --_keycap-border-bottom: var(--_keycap-border-bottom, #8d8f92);
  --_keycap-text: var(--keycap-text, #000);
  --_keycap-text-active: var(--keycap-text-active, #fff);
  --_keycap-text-hover: var(--keycap-text-hover, var(--_keycap-text));
  --_keycap-text-pressed: var(--keycap-text-pressed, #fff);
  --_keycap-shift-text: var(--keycap-shift-text, var(--_accent-color));
  --_keycap-secondary-background: var(--keycap-secondary-background, #a0a9b8);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #7d8795);
  --_keycap-secondary-text: var(--keycap-secondary-text, #060707);
  --_keycap-secondary-border: var(--keycap-secondary-border, #c5c9d0);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, #989da6);
  --_variant-panel-background: var(--variant-panel-background, #f0f0f0);
  --_variant-keycap-text: var(--variant-keycap-textvar, var(--_keycap-text));
  --_variant-keycap-text-active: var(--variant-keycap-text-active, var(--_keycap-text-active));
  --_variant-keycap-background-active: var(--variant-keycap-background-active, var(--_accent-color));
}
`;var style_default=":host {\n  --primary-color: #5898ff;\n  --primary-color-dimmed: #c0c0f0;\n  --primary-color-dark: var(--blue-500);\n  --primary-color-light: var(--blue-100);\n  --primary-color-reverse: #ffffff;\n  --secondary-color: #ff8a65;\n  --secondary-color-dimmed: #f0d5c5;\n  --secondary-color-dark: var(--orange-500);\n  --secondary-color-light: var(--orange-100);\n  --secondary-color-reverse: #ffffff;\n  --link-color: #5898ff;\n  --link-color-dimmed: #c5c5c5;\n  --link-color-dark: #121212;\n  --link-color-light: #e2e2e2;\n  --link-color-reverse: #ffffff;\n  --semantic-blue: var(--blue-700);\n  --semantic-red: var(--red-400);\n  --semantic-orange: var(--orange-400);\n  --semantic-green: var(--green-700);\n  --neutral-100: #f5f5f5;\n  --neutral-200: #eeeeee;\n  --neutral-300: #e0e0e0;\n  --neutral-400: #bdbdbd;\n  --neutral-500: #9e9e9e;\n  --neutral-600: #757575;\n  --neutral-700: #616161;\n  --neutral-800: #424242;\n  --neutral-900: #212121;\n  --red-25: #fff8f7;\n  --red-50: #fff1ef;\n  --red-100: #ffeae6;\n  --red-200: #ffcac1;\n  --red-300: #ffa495;\n  --red-400: #ff7865;\n  --red-500: #f21c0d;\n  --red-600: #e50018;\n  --red-700: #d30024;\n  --red-800: #bd002c;\n  --red-900: #a1002f;\n  --orange-25: #fffbf8;\n  --orange-50: #fff7f1;\n  --orange-100: #fff3ea;\n  --orange-200: #ffe1c9;\n  --orange-300: #ffcca2;\n  --orange-400: #ffb677;\n  --orange-500: #fe9310;\n  --orange-600: #f58700;\n  --orange-700: #ea7c00;\n  --orange-800: #dc6d00;\n  --orange-900: #ca5b00;\n  --brown-25: #fff8ef;\n  --brown-50: #fff1df;\n  --brown-100: #ffe9ce;\n  --brown-200: #ebcca6;\n  --brown-300: #cdaf8a;\n  --brown-400: #af936f;\n  --brown-500: #856a47;\n  --brown-600: #7f5e34;\n  --brown-700: #78511f;\n  --brown-800: #6e4200;\n  --brown-900: #593200;\n  --yellow-25: #fffdf9;\n  --yellow-50: #fffcf2;\n  --yellow-100: #fffaec;\n  --yellow-200: #fff2ce;\n  --yellow-300: #ffe8ab;\n  --yellow-400: #ffdf85;\n  --yellow-500: #ffcf33;\n  --yellow-600: #f1c000;\n  --yellow-700: #dfb200;\n  --yellow-800: #c9a000;\n  --yellow-900: #ad8a00;\n  --lime-25: #f4ffee;\n  --lime-50: #e9ffdd;\n  --lime-100: #ddffca;\n  --lime-200: #a8fb6f;\n  --lime-300: #94e659;\n  --lime-400: #80d142;\n  --lime-500: #63b215;\n  --lime-600: #45a000;\n  --lime-700: #268e00;\n  --lime-800: #007417;\n  --lime-900: #005321;\n  --green-25: #f5fff5;\n  --green-50: #ebffea;\n  --green-100: #e0ffdf;\n  --green-200: #a7ffa7;\n  --green-300: #5afa65;\n  --green-400: #45e953;\n  --green-500: #17cf36;\n  --green-600: #00b944;\n  --green-700: #00a34a;\n  --green-800: #008749;\n  --green-900: #00653e;\n  --teal-25: #f3ffff;\n  --teal-50: #e6fffe;\n  --teal-100: #d9fffe;\n  --teal-200: #8dfffe;\n  --teal-300: #57f4f4;\n  --teal-400: #43e5e5;\n  --teal-500: #17cfcf;\n  --teal-600: #00c2c0;\n  --teal-700: #00b5b1;\n  --teal-800: #00a49e;\n  --teal-900: #009087;\n  --cyan-25: #f7fcff;\n  --cyan-50: #eff8ff;\n  --cyan-100: #e7f5ff;\n  --cyan-200: #c2e6ff;\n  --cyan-300: #95d5ff;\n  --cyan-400: #61c4ff;\n  --cyan-500: #13a7ec;\n  --cyan-600: #069eda;\n  --cyan-700: #0095c9;\n  --cyan-800: #0088b2;\n  --cyan-900: #0a7897;\n  --blue-25: #f7faff;\n  --blue-50: #eef5ff;\n  --blue-100: #e5f1ff;\n  --blue-200: #bfdbff;\n  --blue-300: #92c2ff;\n  --blue-400: #63a8ff;\n  --blue-500: #0d80f2;\n  --blue-600: #0077db;\n  --blue-700: #006dc4;\n  --blue-800: #0060a7;\n  --blue-900: #005086;\n  --indigo-25: #f8f7ff;\n  --indigo-50: #f1efff;\n  --indigo-100: #eae7ff;\n  --indigo-200: #ccc3ff;\n  --indigo-300: #ac99ff;\n  --indigo-400: #916aff;\n  --indigo-500: #63c;\n  --indigo-600: #5a21b2;\n  --indigo-700: #4e0b99;\n  --indigo-800: #3b0071;\n  --indigo-900: #220040;\n  --purple-25: #fbf7ff;\n  --purple-50: #f8f0ff;\n  --purple-100: #f4e8ff;\n  --purple-200: #e4c4ff;\n  --purple-300: #d49aff;\n  --purple-400: #c36aff;\n  --purple-500: #a219e6;\n  --purple-600: #9000c4;\n  --purple-700: #7c009f;\n  --purple-800: #600073;\n  --purple-900: #3d0043;\n  --magenta-25: #fff8fb;\n  --magenta-50: #fff2f6;\n  --magenta-100: #ffebf2;\n  --magenta-200: #ffcddf;\n  --magenta-300: #ffa8cb;\n  --magenta-400: #ff7fb7;\n  --magenta-500: #eb4799;\n  --magenta-600: #da3689;\n  --magenta-700: #c82179;\n  --magenta-800: #b00065;\n  --magenta-900: #8a004c;\n}\n@media (prefers-color-scheme: dark) {\n  :host {\n    --semantic-blue: var(--blue-700);\n    --semantic-red: var(--red-400);\n    --semantic-orange: var(--orange-400);\n    --semantic-green: var(--green-700);\n    --semantic-bg-blue: var(--blue-25);\n    --semantic-bg-red: var(--red-25);\n    --semantic-bg-orange: var(--orange-25);\n    --semantic-bg-green: var(--green-25);\n    --neutral-100: #121212;\n    --neutral-200: #424242;\n    --neutral-300: #616161;\n    --neutral-400: #757575;\n    --neutral-500: #9e9e9e;\n    --neutral-600: #bdbdbd;\n    --neutral-700: #e0e0e0;\n    --neutral-800: #eeeeee;\n    --neutral-900: #f5f5f5;\n  }\n}\n:host([theme='dark']) {\n  --semantic-blue: var(--blue-700);\n  --semantic-red: var(--red-400);\n  --semantic-orange: var(--orange-400);\n  --semantic-green: var(--green-700);\n  --semantic-bg-blue: var(--blue-25);\n  --semantic-bg-red: var(--red-25);\n  --semantic-bg-orange: var(--orange-25);\n  --semantic-bg-green: var(--green-25);\n  --neutral-100: #121212;\n  --neutral-200: #424242;\n  --neutral-300: #616161;\n  --neutral-400: #757575;\n  --neutral-500: #9e9e9e;\n  --neutral-600: #bdbdbd;\n  --neutral-700: #e0e0e0;\n  --neutral-800: #eeeeee;\n  --neutral-900: #f5f5f5;\n}\n/* @media (prefers-color-scheme: dark) {\n  :host {\n      --label-color: #fff;\n      --active-label-color: #000;\n      --menu-bg: #525252;\n      --active-bg: #5898ff;\n      --active-bg-dimmed: #5c5c5c;\n  }\n} */\n:host {\n  --ui-font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n  --ui-font-size: 14px;\n  --ui-line-height: 1.5;\n  --ui-letter-spacing: 0.007em;\n  --mono-font-family: 'Berkeley Mono', 'JetBrains Mono', 'IBM Plex Mono', 'Source Code Pro', Menlo, Monaco, 'Courier New', monospace;\n  --ui-layer-1: var(--neutral-100);\n  --ui-layer-2: var(--neutral-200);\n  --ui-layer-3: var(--neutral-300);\n  --ui-layer-4: var(--neutral-400);\n  --ui-layer-5: var(--neutral-500);\n  --ui-layer-6: var(--neutral-600);\n  --ui-border-color: var(--primary-color);\n  --ui-border-radius: 4px;\n  --ui-text: var(--neutral-900);\n  --ui-text-secondary: var(--neutral-700);\n  --ui-text-placeholder: var(--neutral-500);\n  --ui-text-muted: var(--neutral-300);\n  /** A field is a UI element in which a user can type data, for\n  * example an input or textarea element.\n  */\n  --ui-field-bg: var(--neutral-100);\n  --ui-field-bg-hover: var(--neutral-100);\n  --ui-field-bg-disabled: var(--neutral-300);\n  --ui-field-bg-invalid: var(--red-100);\n  --ui-field-bg-focus: var(--neutral-100);\n  --ui-field-border: 0.5px solid var(--border-color);\n  --ui-field-border-hover: 0.5px solid var(--border-color);\n  --ui-field-border-disabled: 0.5px solid var(--border-color);\n  --ui-field-border-invalid: 0.5px solid var(--border-color);\n  --ui-field-border-focus: 0.5px solid var(--border-color);\n  --ui-menu-bg: var(--neutral-100);\n  --ui-menu-text: var(--neutral-900);\n  --ui-menu-bg-hover: var(--neutral-200);\n  --ui-menu-text-hover: var(--neutral-900);\n  /** The `active` state is used for the state of menu items\n  * when they are selected.\n  */\n  --ui-menu-bg-active: var(--primary-color);\n  --ui-menu-text-active: var(--primary-color-reverse);\n  /** The `active-muted` set is used for the state of\n  * submenus when they are open.\n  */\n  --ui-menu-bg-active-muted: var(--neutral-300);\n  --ui-menu-text-active-muted: var(--neutral-900);\n  /* --ui-menu-shadow: 0 1px 2px 0 rgba(60, 64, 67, 0.302),\n0 2px 6px 2px rgba(60, 64, 67, 0.149); */\n  --ui-menu-shadow: 0 0 2px rgba(0, 0, 0, 0.5), 0 0 20px rgba(0, 0, 0, 0.2);\n  --ui-menu-divider: 0.5px solid #c7c7c7;\n  /* var(--neutral-300); */\n  --ui-menu-z-index: 10000;\n  --page-bg: var(--neutral-100);\n  --content-bg: var(--neutral-200);\n}\n@media (prefers-color-scheme: dark) {\n  :host {\n    --ui-menu-bg: var(--neutral-200);\n  }\n}\n:host([theme='dark']) {\n  --ui-menu-bg: var(--neutral-200);\n}\n/* PingFang SC is a macOS font. Microsoft Yahei is a Windows font. \n  Noto  is a Linux/Android font.\n*/\n:lang(zh-cn),\n:lang(zh-sg),\n:lang(zh-my),\n:lang(zh) {\n  --ui-font-family: -apple-system, system-ui, 'PingFang SC', 'Hiragino Sans GB', 'Noto Sans CJK SC', 'Noto Sans SC', 'Noto Sans', 'Microsoft Yahei UI', 'Microsoft YaHei New', 'Microsoft Yahei', '\u5FAE\u8F6F\u96C5\u9ED1', SimSun, '\u5B8B\u4F53', STXihei, '\u534E\u6587\u7EC6\u9ED1', sans-serif;\n}\n:lang(zh-tw),\n:lang(zh-hk),\n:lang(zh-mo) {\n  --ui-font-family: -apple-system, system-ui, 'Noto Sans', 'Microsoft JhengHei UI', 'Microsoft JhengHei', '\u5FAE\u8EDF\u6B63\u9ED1\u9AD4', '\u65B0\u7D30\u660E\u9AD4', 'PMingLiU', '\u7D30\u660E\u9AD4', 'MingLiU', sans-serif;\n}\n:lang(ja),\n:lang(ja-jp),\n:lang(ja-jp-mac) {\n  --ui-font-family: -apple-system, system-ui, 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Noto Sans CJK JP', 'Noto Sans JP', 'Noto Sans', '\u6E38\u30B4\u30B7\u30C3\u30AF', '\u6E38\u30B4\u30B7\u30C3\u30AF\u4F53', YuGothic, 'Yu Gothic', '\u30E1\u30A4\u30EA\u30AA', Meiryo, '\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF', 'MS PGothic', sans-serif;\n}\n:lang(ko),\n:lang(ko-kr),\n:lang(ko-kr-std) {\n  --ui-font-family: -apple-system, system-ui, 'Noto Sans CJK KR', 'Noto Sans KR', 'Noto Sans', 'Malgun Gothic', '\uB9D1\uC740 \uACE0\uB515', 'Apple SD Gothic Neo', '\uC560\uD50C SD \uC0B0\uB3CC\uACE0\uB515 Neo', 'Apple SD \uC0B0\uB3CC\uACE0\uB515 Neo', '\uB3CB\uC6C0', Dotum, sans-serif;\n}\n:lang(ko-kr-apple) {\n  --ui-font-family: -apple-system, system-ui, 'Noto Sans CJK KR', 'Noto Sans KR', 'Noto Sans', 'Apple SD Gothic Neo', '\uC560\uD50C SD \uC0B0\uB3CC\uACE0\uB515 Neo', 'Apple SD \uC0B0\uB3CC\uACE0\uB515 Neo', '\uB3CB\uC6C0', Dotum, sans-serif;\n}\n:lang(zh-cn),\n:lang(zh-sg),\n:lang(zh-my),\n:lang(zh),\n:lang(zh-tw),\n:lang(zh-hk),\n:lang(zh-mo),\n:lang(ja),\n:lang(ja-jp),\n:lang(ja-jp-mac),\n:lang(ko),\n:lang(ko-kr),\n:lang(ko-kr-std),\n:lang(ko-kr-apple) {\n  --ui-font-size: 1rem;\n  --ui-line-height: 1.7;\n  --ui-letter-spacing: 0;\n}\n:dir(rtl) {\n  --ui-line-height: auto;\n  --ui-letter-spacing: 0;\n}\n";var style_default2=".ui-menu *,\n.ui-menu ::before,\n.ui-menu ::after {\n  box-sizing: border-box;\n}\n.ui-menu {\n  display: none;\n  color-scheme: light dark;\n  -webkit-user-select: none;\n  /* Important: Safari iOS doesn't respect user-select */\n  user-select: none;\n  cursor: default;\n  -webkit-touch-callout: none;\n  -webkit-tap-highlight-color: rgba(0 0 0 0);\n  --active-label-color: #fff;\n  /* ui-menu-text-active */\n  --label-color: #121212;\n  /* ui-menu-text */\n  --menu-bg: #e2e2e2;\n  /* ui-menu-background */\n  --active-bg: #5898ff;\n  /* ui-menu-background-active */\n  --active-bg-dimmed: #c5c5c5;\n  /* ui-menu-background-active-muted */\n}\n/** Use the :where pseudo selector to make the specificity of the\n * selector 0, so that it can be overridden by the user.\n */\n:where(.ui-menu-container) {\n  position: absolute;\n  overflow: visible;\n  width: auto;\n  height: auto;\n  z-index: 10000;\n  border-radius: 8px;\n  background: var(--ui-menu-bg);\n  box-shadow: var(--ui-menu-shadow);\n  list-style: none;\n  padding: 6px 0 6px 0;\n  margin: 0;\n  user-select: none;\n  cursor: default;\n  color: var(--ui-menu-text);\n  font-weight: normal;\n  font-style: normal;\n  text-shadow: none;\n  text-transform: none;\n  letter-spacing: 0;\n  outline: none;\n  opacity: 1;\n  /* The [popover] elements have a 1px solid black border. Ugh. */\n  border: none;\n  width: fit-content;\n  height: fit-content;\n}\n:where(.ui-menu-container > li) {\n  display: flex;\n  flex-flow: row;\n  align-items: center;\n  padding: 1px 7px 1px 7px;\n  margin-top: 0;\n  margin-left: 6px;\n  margin-right: 6px;\n  border-radius: 4px;\n  white-space: nowrap;\n  position: relative;\n  outline: none;\n  fill: currentColor;\n  user-select: none;\n  cursor: default;\n  text-align: left;\n  color: inherit;\n  font-family: var(--ui-font-family);\n  font-size: var(--ui-font-size);\n  line-height: var(--ui-line-height);\n  letter-spacing: var(--ui-letter-spacing);\n}\n:where(.ui-menu-container > li > .label) {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  appearance: none;\n  background: none;\n  outline: none;\n  width: 100%;\n  margin: 0;\n  padding: 1px 2px 1px 1px;\n  overflow: visible;\n  border: 1px solid transparent;\n  white-space: nowrap;\n  text-align: start;\n  align-content: center;\n}\n:where(.ui-menu-container > li:has(.heading)) {\n  margin-top: 0.5em;\n}\n:where(.ui-menu-container > li > .label.heading) {\n  font-weight: bold;\n  opacity: 0.4;\n}\n:where(.ui-menu-container > li.indent > .label) {\n  margin-inline-start: 12px;\n}\n:where(.ui-menu-container > li > .label.indent) {\n  margin-inline-start: 12px;\n}\n:where(.ui-menu-container > li[role='divider']) {\n  border-bottom: 1px solid var(--ui-menu-divider);\n  border-radius: 0;\n  padding: 0;\n  margin-left: 15px;\n  margin-right: 15px;\n  padding-top: 5px;\n  margin-bottom: 5px;\n  width: calc(100% - 30px);\n  /** 100% - (margin-left + margin-right) */\n}\n:where(.ui-menu-container > li[aria-disabled='true']) {\n  opacity: 0.5;\n}\n:where(.ui-menu-container > li.active) {\n  background: var(--ui-menu-bg-active);\n  background: -apple-system-control-accent;\n  color: var(--ui-menu-text-active);\n}\n:where(.ui-menu-container > li.active.is-submenu-open) {\n  background: var(--ui-menu-bg-active-muted);\n  color: inherit;\n}\n:where(.ui-menu-container > li[aria-haspopup='true'] > .label) {\n  padding-inline-end: 0;\n}\n:where(.ui-menu-container > li[aria-haspopup='true'].active::after) {\n  color: var(--ui-menu-text-active);\n}\n/** Keyboard shortcut */\n:where(.ui-menu-container > li > kbd) {\n  font-family: var(--ui-font-family);\n  margin-inline-start: 12px;\n  opacity: 0.4;\n}\n:where(.ui-menu-container > li.active > kbd) {\n  opacity: 0.85;\n}\n.ui-trailing-chevron {\n  display: flex;\n  margin-inline-start: 24px;\n  width: 10px;\n  height: 10px;\n  margin-bottom: 4px;\n}\n.ui-trailing-chevron:dir(rtl) {\n  transform: scaleX(-1);\n}\n.ui-checkmark {\n  display: flex;\n  margin-inline-end: -11px;\n  margin-inline-start: -4px;\n  margin-top: 2px;\n  width: 16px;\n  height: 16px;\n}\n.ui-mixedmark {\n  display: flex;\n  margin-inline-end: -11px;\n  margin-inline-start: -4px;\n  margin-top: 2px;\n  width: 16px;\n  height: 16px;\n}\n";var gStylesheets;function getStylesheetContent(id){let content="";switch(id){case"mathfield-element":content=`
    :host { display: inline-block; background-color: field; color: fieldtext; border-width: 1px; border-style: solid; border-color: #acacac; border-radius: 2px;}
    :host([hidden]) { display: none; }
    :host([disabled]), :host([disabled]:focus), :host([disabled]:focus-within) { outline: none; opacity:  .5; }
    :host(:focus), :host(:focus-within) {
      outline: Highlight auto 1px;    /* For Firefox */
      outline: -webkit-focus-ring-color auto 1px;
    }
    :host([readonly]:focus), :host([readonly]:focus-within),
    :host([read-only]:focus), :host([read-only]:focus-within) {
      outline: none;
    }`;break;case"core":content=core_default;break;case"mathfield":content=mathfield_default;break;case"environment-popover":content=environment_popover_default;break;case"suggestion-popover":content=suggestion_popover_default;break;case"keystroke-caption":content=keystroke_caption_default;break;case"virtual-keyboard":content=virtual_keyboard_default;break;case"ui":content=style_default;break;case"menu":content=style_default2;break;default:debugger;}
return content;}
function getStylesheet(id){if(!gStylesheets)gStylesheets={};if(gStylesheets[id])return gStylesheets[id];gStylesheets[id]=new CSSStyleSheet();gStylesheets[id].replaceSync(getStylesheetContent(id));return gStylesheets[id];}
var gInjectedStylesheets;function injectStylesheet(id){var _a3;try{if(!("adoptedStyleSheets"in document)){if(window.document.getElementById(`mathlive-style-${id}`))return;const styleNode=window.document.createElement("style");styleNode.id=`mathlive-style-${id}`;styleNode.append(window.document.createTextNode(getStylesheetContent(id)));window.document.head.appendChild(styleNode);return;}
if(!gInjectedStylesheets)gInjectedStylesheets={};if(((_a3=gInjectedStylesheets[id])!=null?_a3:0)!==0)gInjectedStylesheets[id]+=1;else{const stylesheet=getStylesheet(id);document.adoptedStyleSheets=[...document.adoptedStyleSheets,stylesheet];gInjectedStylesheets[id]=1;}}catch(error){console.error("Error injecting stylesheet",id,error);}}
function releaseStylesheet(id){if(!("adoptedStyleSheets"in document))return;if(!(gInjectedStylesheets==null?void 0:gInjectedStylesheets[id]))return;gInjectedStylesheets[id]-=1;if(gInjectedStylesheets[id]<=0){const stylesheet=gStylesheets[id];document.adoptedStyleSheets=document.adoptedStyleSheets.filter((x)=>x!==stylesheet);}}
var AccentAtom=class _AccentAtom extends Atom{constructor(options){var _a3;super(__spreadProps(__spreadValues({},options),{type:"accent",body:(_a3=options.body)!=null?_a3:void 0}));if(options.accentChar)this.accent=options.accentChar;else this.svgAccent=options==null?void 0:options.svgAccent;this.skipBoundary=true;this.captureSelection=true;}
static fromJson(json){return new _AccentAtom(json);}
toJson(){return __spreadProps(__spreadValues({},super.toJson()),{accentChar:this.accent,svgAccent:this.svgAccent});}
render(parentContext){var _a3;const context=new Context({parent:parentContext,mathstyle:"cramp"},this.style);const base=(_a3=Atom.createBox(context,this.body))!=null?_a3:new Box("\u25A2",{style:this.style});let skew=0;if(!this.hasEmptyBranch("body")&&this.body.length===2&&this.body[1].isCharacterBox())
skew=base.skew;let clearance=Math.min(base.height,X_HEIGHT);let accentBox;if(this.svgAccent){accentBox=makeSVGBox(this.svgAccent);clearance=context.metrics.bigOpSpacing1-clearance;}else if(this.accent){const accent=new Box(this.accent,{fontFamily:"Main-Regular"});accent.italic=0;const correctionClass=(this.accent===8407||this.accent===8411||this.accent===8412?" ML__accent-combining-char":"");accentBox=new Box(accent,{classes:"ML__accent-body"+correctionClass});}
accentBox=new VBox({shift:0,children:[{box:new Box(base)},-clearance,{box:accentBox,marginLeft:base.left+2*skew,classes:["ML__center"]}]});const result=new Box(accentBox,{type:"lift"});if(this.caret)result.caret=this.caret;this.bind(context,result.wrap(context));return this.attachSupsub(context,{base:result});}};var RIGHT_DELIM={"(":")","{":"}","[":"]","|":"|","\\lbrace":"\\rbrace","\\lparen":"\\rparen","\\{":"\\}","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"};var LEFT_DELIM=Object.fromEntries(Object.entries(RIGHT_DELIM).map(([leftDelim,rightDelim])=>[rightDelim,leftDelim]));function getSymbolValue(symbol){var _a3;return(_a3={"[":91,"]":93,"(":40,")":41,"\\mid":8739,"|":8739,"\u2223":8739,"\u2225":8741,"\\|":8739,"\\{":123,"\\}":125,"\\lbrace":123,"\\rbrace":125,"\\lparen":40,"\\rparen":41,"\\lbrack":91,"\\rbrack":93,"\\vert":8739,"\\lvert":8739,"\\mvert":8739,"\\rvert":8739,"\\Vert":8741,"\\lVert":8741,"\\mVert":8741,"\\rVert":8741,"\\parallel":8741,"\\shortparallel":8741,"\\langle":10216,"\\rangle":10217,"\\lfloor":8970,"\\rfloor":8971,"\\lceil":8968,"\\rceil":8969,"\\ulcorner":9484,"\\urcorner":9488,"\\llcorner":9492,"\\lrcorner":9496,"\\lgroup":10222,"\\rgroup":10223,"\\lmoustache":9136,"\\rmoustache":9137,"\\surd":8730}[symbol])!=null?_a3:symbol.codePointAt(0);}
function makeSmallDelim(delim,context,center,options){var _a3;const text=new Box(getSymbolValue(delim),{fontFamily:"Main-Regular",isSelected:options.isSelected,classes:"ML__small-delim "+((_a3=options.classes)!=null?_a3:"")});const box=text.wrap(context);if(center)box.setTop((1-context.scalingFactor)*AXIS_HEIGHT);return box;}
function makeLargeDelim(delim,size,center,parentContext,options){var _a3,_b3;const context=new Context({parent:parentContext,mathstyle:"textstyle"},options==null?void 0:options.style);const result=new Box(getSymbolValue(delim),{fontFamily:`Size${size}-Regular`,isSelected:options.isSelected,classes:((_a3=options.classes)!=null?_a3:"")+` ML__delim-size${size}`,type:(_b3=options.type)!=null?_b3:"ignore"}).wrap(context);if(center)result.setTop((1-context.scalingFactor)*AXIS_HEIGHT);return result;}
function makeStackedDelim(delim,heightTotal,center,context,options){var _a3;let top;let middle;let repeat;let bottom;top=repeat=bottom=getSymbolValue(delim);middle=null;let fontFamily="Size1-Regular";if(delim==="\\vert"||delim==="\\lvert"||delim==="\\rvert"||delim==="\\mvert"||delim==="\\mid")
repeat=top=bottom=8739;else if(delim==="\\Vert"||delim==="\\lVert"||delim==="\\rVert"||delim==="\\mVert"||delim==="\\|")
repeat=top=bottom=8741;else if(delim==="\\uparrow")repeat=bottom=9168;else if(delim==="\\Uparrow")repeat=bottom=8214;else if(delim==="\\downarrow")top=repeat=9168;else if(delim==="\\Downarrow")top=repeat=8214;else if(delim==="\\updownarrow"){top=8593;repeat=9168;bottom=8595;}else if(delim==="\\Updownarrow"){top=8657;repeat=8214;bottom=8659;}else if(delim==="["||delim==="\\lbrack"){top=9121;repeat=9122;bottom=9123;fontFamily="Size4-Regular";}else if(delim==="]"||delim==="\\rbrack"){top=9124;repeat=9125;bottom=9126;fontFamily="Size4-Regular";}else if(delim==="\\lfloor"||delim==="\u230A"){repeat=top=9122;bottom=9123;fontFamily="Size4-Regular";}else if(delim==="\\lceil"||delim==="\u2308"){top=9121;repeat=bottom=9122;fontFamily="Size4-Regular";}else if(delim==="\\rfloor"||delim==="\u230B"){repeat=top=9125;bottom=9126;fontFamily="Size4-Regular";}else if(delim==="\\rceil"||delim==="\u2309"){top=9124;repeat=bottom=9125;fontFamily="Size4-Regular";}else if(delim==="("||delim==="\\lparen"){top=9115;repeat=9116;bottom=9117;fontFamily="Size4-Regular";}else if(delim===")"||delim==="\\rparen"){top=9118;repeat=9119;bottom=9120;fontFamily="Size4-Regular";}else if(delim==="\\{"||delim==="\\lbrace"){top=9127;middle=9128;bottom=9129;repeat=9130;fontFamily="Size4-Regular";}else if(delim==="\\}"||delim==="\\rbrace"){top=9131;middle=9132;bottom=9133;repeat=9130;fontFamily="Size4-Regular";}else if(delim==="\\lgroup"||delim==="\u27EE"){top=9127;bottom=9129;repeat=9130;fontFamily="Size4-Regular";}else if(delim==="\\rgroup"||delim==="\u27EF"){top=9131;bottom=9133;repeat=9130;fontFamily="Size4-Regular";}else if(delim==="\\lmoustache"||delim==="\u23B0"){top=9127;bottom=9133;repeat=9130;fontFamily="Size4-Regular";}else if(delim==="\\rmoustache"||delim==="\u23B1"){top=9131;bottom=9129;repeat=9130;fontFamily="Size4-Regular";}else if(delim==="\\surd"){top=57345;bottom=9143;repeat=57344;fontFamily="Size4-Regular";}else if(delim==="\\ulcorner"){top=9484;repeat=bottom=32;}else if(delim==="\\urcorner"){top=9488;repeat=bottom=32;}else if(delim==="\\llcorner"){bottom=9492;repeat=top=32;}else if(delim==="\\lrcorner"){top=9496;repeat=top=32;}
const topMetrics=getCharacterMetrics(top,fontFamily);const topHeightTotal=topMetrics.height+topMetrics.depth;const repeatMetrics=getCharacterMetrics(repeat,fontFamily);const repeatHeightTotal=repeatMetrics.height+repeatMetrics.depth;const bottomMetrics=getCharacterMetrics(bottom,fontFamily);const bottomHeightTotal=bottomMetrics.height+bottomMetrics.depth;let middleHeightTotal=0;let middleFactor=1;if(middle!==null){const middleMetrics=getCharacterMetrics(middle,fontFamily);middleHeightTotal=middleMetrics.height+middleMetrics.depth;middleFactor=2;}
const minHeight=topHeightTotal+bottomHeightTotal+middleHeightTotal;const repeatCount=Math.max(0,Math.ceil((heightTotal-minHeight)/(middleFactor*repeatHeightTotal)));const realHeightTotal=minHeight+repeatCount*middleFactor*repeatHeightTotal;let axisHeight=AXIS_HEIGHT;if(center)axisHeight=axisHeight*context.scalingFactor;const depth=realHeightTotal/2-axisHeight;const OVERLAP=8e-3;const stack=[];stack.push({box:new Box(bottom,{fontFamily})});stack.push(-OVERLAP);const repeatBox=new Box(repeat,{fontFamily});if(middle===null){for(let i=0;i<repeatCount;i++)stack.push({box:repeatBox});}else{for(let i=0;i<repeatCount;i++)stack.push({box:repeatBox});stack.push(-OVERLAP);stack.push({box:new Box(middle,{fontFamily})});stack.push(-OVERLAP);for(let i=0;i<repeatCount;i++)stack.push({box:repeatBox});}
stack.push(-OVERLAP);stack.push({box:new Box(top,{fontFamily})});let sizeClass="";if(fontFamily==="Size1-Regular")sizeClass=" delim-size1";else if(fontFamily==="Size4-Regular")sizeClass=" delim-size4";const inner=new VBox({bottom:depth,children:stack},{classes:sizeClass});const result=new Box(inner,__spreadProps(__spreadValues({},options!=null?options:{}),{classes:((_a3=options==null?void 0:options.classes)!=null?_a3:"")+" ML__delim-mult"}));return result;}
var stackLargeDelimiters=new Set(["(",")","\\lparen","\\rparen","[","]","\\lbrack","\\rbrack","\\{","\\}","\\lbrace","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd","\u230A","\u230B","\u2308","\u2309"]);var stackAlwaysDelimiters=new Set(["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\mvert","\\mid","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache","\u27EE","\u27EF","\u23B0","\u23B1"]);var stackNeverDelimiters=new Set(["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"]);var sizeToMaxHeight=[0,1.2,1.8,2.4,3];function makeSizedDelim(delim,size,context,options){if(delim===void 0||delim===".")
return makeNullDelimiter(context,options.classes);if(delim==="<"||delim==="\\lt"||delim==="\u27E8")
delim="\\langle";else if(delim===">"||delim==="\\gt"||delim==="\u27E9")
delim="\\rangle";if(stackLargeDelimiters.has(delim)||stackNeverDelimiters.has(delim))
return makeLargeDelim(delim,size,false,context,options);if(stackAlwaysDelimiters.has(delim)){return makeStackedDelim(delim,sizeToMaxHeight[size],false,context,options);}
console.assert(false,"Unknown delimiter '"+delim+"'");return null;}
var stackNeverDelimiterSequence=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}];var stackAlwaysDelimiterSequence=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"stack"}];var stackLargeDelimiterSequence=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}];function delimTypeToFont(info){if(info.type==="small")return"Main-Regular";if(info.type==="large")
return"Size"+info.size+"-Regular";console.assert(info.type==="stack");return"Size4-Regular";}
function traverseSequence(delim,height,sequence,context){const start={"-4":0,"-3":1,"0":2}[context.mathstyle.sizeDelta];for(let i=start;i<sequence.length;i++){if(sequence[i].type==="stack"){break;}
const metrics=getCharacterMetrics(delim,delimTypeToFont(sequence[i]));if(metrics.defaultMetrics){return{type:"small",mathstyle:"scriptstyle"};}
let heightDepth=metrics.height+metrics.depth;if(sequence[i].type==="small"){if(sequence[i].mathstyle==="scriptscriptstyle"){heightDepth*=Math.max(FONT_SCALE[Math.max(1,context.size-2)],context.minFontScale);}else if(sequence[i].mathstyle==="scriptstyle"){heightDepth*=Math.max(FONT_SCALE[Math.max(1,context.size-1)],context.minFontScale);}}
if(heightDepth>height)return sequence[i];}
return sequence[sequence.length-1];}
function makeCustomSizedDelim(type,delim,height,center,context,options){if(!delim||delim.length===0||delim===".")
return makeNullDelimiter(context);if(delim==="<"||delim==="\\lt")delim="\\langle";else if(delim===">"||delim==="\\gt")delim="\\rangle";let sequence;if(stackNeverDelimiters.has(delim))sequence=stackNeverDelimiterSequence;else if(stackLargeDelimiters.has(delim))
sequence=stackLargeDelimiterSequence;else sequence=stackAlwaysDelimiterSequence;const delimType=traverseSequence(getSymbolValue(delim),height,sequence,context);const ctx=new Context({parent:context,mathstyle:delimType.mathstyle},options==null?void 0:options.style);if(delimType.type==="small")
return makeSmallDelim(delim,ctx,center,__spreadProps(__spreadValues({},options),{type}));if(delimType.type==="large"){return makeLargeDelim(delim,delimType.size,center,ctx,__spreadProps(__spreadValues({},options),{type}));}
console.assert(delimType.type==="stack");return makeStackedDelim(delim,height,center,ctx,__spreadProps(__spreadValues({},options),{type}));}
function makeLeftRightDelim(type,delim,height,depth,context,options){if(delim===".")return makeNullDelimiter(context,options==null?void 0:options.classes);const axisHeight=AXIS_HEIGHT*context.scalingFactor;const delimiterFactor=901;const delimiterExtend=5/PT_PER_EM;const maxDistFromAxis=Math.max(height-axisHeight,depth+axisHeight);const totalHeight=Math.max(maxDistFromAxis/500*delimiterFactor,2*maxDistFromAxis-delimiterExtend);return makeCustomSizedDelim(type,delim,totalHeight,true,context,options);}
function makeNullDelimiter(parent,classes){const box=new Box(null,{classes:" ML__nulldelimiter "+(classes!=null?classes:""),type:"ignore"});box.width=parent.getRegisterAsEm("nulldelimiterspace");return box.wrap(new Context({parent,mathstyle:"textstyle"}));}
var PlaceholderAtom=class _PlaceholderAtom extends Atom{constructor(options){var _a3;super({type:"placeholder",command:"\\placeholder",mode:(_a3=options==null?void 0:options.mode)!=null?_a3:"math",style:options==null?void 0:options.style});this.captureSelection=true;}
static fromJson(json){return new _PlaceholderAtom(json);}
toJson(){return super.toJson();}
render(context){let result;this.value=context.placeholderSymbol;if(typeof context.renderPlaceholder==="function")
result=context.renderPlaceholder(context);else result=this.createBox(context);if(this.caret)result.classes+=" ML__placeholder-selected";return result;}
_serialize(options){if(options.skipPlaceholders)return"";return"\\placeholder{}";}};var matrices=["matrix","matrix*","pmatrix","pmatrix*","bmatrix","bmatrix*","Bmatrix","Bmatrix*","vmatrix","vmatrix*","Vmatrix","Vmatrix*"];var cases=["cases","dcases","rcases"];var align=["align","align*","aligned","gather","gather*","gathered","split"];var otherTabular=["array","subequations","eqnarray"];function isTabularEnvironment(environment){return align.includes(environment)||cases.includes(environment)||cases.includes(environment)||matrices.includes(environment)||otherTabular.includes(environment);}
function isMatrixEnvironment(environment){return matrices.includes(environment);}
function isCasesEnvironment(environment){return cases.includes(environment);}
function isAlignEnvironment(environment){return align.includes(environment);}
function normalizeCells(atom,cells,options){let maxColCount=0;for(const colSpec of options.columns)
if("align"in colSpec)maxColCount+=1;maxColCount=Math.max(maxColCount,options.minColumns);let colCount=0;const rows=[];for(const row of cells){colCount=Math.max(colCount,Math.min(row.length,maxColCount));let colIndex2=0;while(colIndex2<row.length){const newRow=[];const lastCol=Math.min(row.length,colIndex2+maxColCount);while(colIndex2<lastCol){newRow.push(normalizeCell(row[colIndex2],atom.mode));colIndex2+=1;}
if(newRow.length<options.minColumns){while(newRow.length<options.minColumns)
newRow.push([new Atom({type:"first",mode:atom.mode})]);}
rows.push(newRow);}}
if(!atom.isMultiline&&rows.length>0&&rows[rows.length-1].length===1&&isEmptyCell(rows[rows.length-1][0]))
rows.pop();const result=[];for(const row of rows){if(row.length!==colCount){for(let i=row.length;i<colCount;i++){if(atom.isMultiline){row.push([new Atom({type:"first",mode:atom.mode})]);}else{row.push([new Atom({type:"first",mode:atom.mode}),new PlaceholderAtom()]);}}}
result.push(row);}
let rowIndex=0;let colIndex=0;for(const row of result){colIndex=0;for(const cell of row){for(const element of cell){element.parent=atom;element.parentBranch=[rowIndex,colIndex];}
colIndex+=1;}
rowIndex+=1;}
atom.isDirty=true;return result;}
function normalizeCell(cell,mode){if(cell.length===0)return[new Atom({type:"first",mode})];if(cell[0].type!=="first")
return[new Atom({type:"first",mode}),...cell];console.assert(!cell.slice(1).some((x)=>x.type==="first"));return cell;}
function isEmptyCell(cell){return cell.length===1&&cell[0].type==="first";}
var ArrayAtom=class _ArrayAtom extends Atom{get isMultiline(){const env=this.environmentName;return["lines","multline","multline*","align","split","gather","gathered"].includes(env);}
constructor(envName,array,rowGaps,options={}){var _a3,_b3,_c2,_d2;super({type:"array",isRoot:options.isRoot});this.environmentName=envName;if(options.columns){if(options.columns.length===0)this.colFormat=[{align:"l"}];else this.colFormat=[...options.columns];}else{if(options.minColumns){const columns=[];for(let i=0;i<options.minColumns;i++)
columns.push({align:"l"});this.colFormat=columns;}else{this.colFormat=[{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"}];}}
this.minColumns=(_a3=options.minColumns)!=null?_a3:1;this.minRows=(_b3=options.minRows)!=null?_b3:1;this.maxRows=(_c2=options.maxRows)!=null?_c2:Infinity;this._rows=normalizeCells(this,array,{columns:this.colFormat,minColumns:this.minColumns,minRows:this.minRows,maxRows:this.maxRows});this.rowGaps=rowGaps;if(options.arraycolsep!==void 0)
this.arraycolsep=options.arraycolsep;this.colSeparationType=options.colSeparationType;if(options.arraystretch!==void 0)
this.arraystretch=options.arraystretch;if(options.mathstyleName)this.mathstyleName=options.mathstyleName;if(options.leftDelim)this.leftDelim=options.leftDelim;if(options.rightDelim)this.rightDelim=options.rightDelim;this.classes=(_d2=options.classes)!=null?_d2:[];}
static fromJson(json){return new _ArrayAtom(json.environmentName,json.array,json.rowGaps,json);}
toJson(){const result=__spreadProps(__spreadValues({},super.toJson()),{environmentName:this.environmentName,array:this._rows.map((row)=>row.map((col)=>col.map((x)=>x.toJson()))),rowGaps:this.rowGaps,columns:this.colFormat,colSeparationType:this.colSeparationType,minColumns:this.minColumns,minRows:this.minRows,maxRows:this.maxRows});if(this.arraystretch!==void 0)
result.arraystretch=this.arraystretch;if(this.arraycolsep!==void 0)result.arraycolsep=this.arraycolsep;if(this.leftDelim)result.leftDelim=this.leftDelim;if(this.rightDelim)result.rightDelim=this.rightDelim;if(this.isRoot)result.isRoot=true;result.minColumns=this.minColumns;result.minRows=this.minRows;result.maxRows=this.maxRows;if(this.mathstyleName)result.mathstyleName=this.mathstyleName;if(this.classes.length>0)result.classes=this.classes;return result;}
branch(cell){var _a3;if(!isCellBranch(cell))return void 0;return(_a3=this._rows[cell[0]][cell[1]])!=null?_a3:void 0;}
createBranch(cell){var _a3;if(!isCellBranch(cell))return[];this.isDirty=true;return(_a3=this.branch(cell))!=null?_a3:[];}
get rowCount(){return this._rows.length;}
get colCount(){return this._rows[0].length;}
get maxColumns(){return this.colFormat.filter((col)=>Boolean(col["align"])).length;}
removeBranch(name){if(isNamedBranch(name))return super.removeBranch(name);const[_first,...children]=this.branch(name);console.assert(_first.type==="first");this._rows[name[0]][name[1]]=void 0;children.forEach((x)=>{x.parent=void 0;x.parentBranch=void 0;});this.isDirty=true;return children;}
get hasChildren(){return this.children.length>0;}
get children(){const result=[];for(const row of this._rows){for(const cell of row){if(cell){for(const atom of cell){result.push(...atom.children);result.push(atom);}}}}
return[...result,...super.children];}
render(context){var _a3,_b3,_c2,_d2,_e,_f;const innerContext=new Context({parent:context,mathstyle:this.mathstyleName},this.style);const arrayRuleWidth=innerContext.getRegisterAsEm("arrayrulewidth");const arrayColSep=innerContext.getRegisterAsEm("arraycolsep");const doubleRuleSep=innerContext.getRegisterAsEm("doublerulesep");const arraystretch=(_b3=(_a3=this.arraystretch)!=null?_a3:innerContext.getRegisterAsNumber("arraystretch"))!=null?_b3:1;let arraycolsep=typeof this.arraycolsep==="number"?this.arraycolsep:arrayColSep;if(this.colSeparationType==="small"){const localMultiplier=new Context({parent:context,mathstyle:"scriptstyle"}).scalingFactor;arraycolsep=0.2778*(localMultiplier/context.scalingFactor);}
const arrayskip=arraystretch*BASELINE_SKIP;const arstrutHeight=0.7*arrayskip;const arstrutDepth=0.3*arrayskip;let totalHeight=0;const body=[];let nc=0;const nr=this._rows.length;for(let r=0;r<nr;++r){const inrow=this._rows[r];nc=Math.max(nc,inrow.length);const cellContext=new Context({parent:innerContext,mathstyle:this.mathstyleName},this.style);let height=arstrutHeight/cellContext.scalingFactor;let depth=arstrutDepth/cellContext.scalingFactor;const outrow={cells:[],height:0,depth:0,pos:0};for(const element of inrow){const elt=(_c2=Atom.createBox(cellContext,element,{type:"ignore"}))!=null?_c2:new Box(null,{type:"ignore"});depth=Math.max(depth,elt.depth);height=Math.max(height,elt.height);outrow.cells.push(elt);}
let gap=(_d2=convertDimensionToEm(this.rowGaps[r]))!=null?_d2:0;if(gap>0){gap+=arstrutDepth;depth=Math.max(depth,gap);gap=0;}
if(r<nr-1&&!isMatrixEnvironment(this.environmentName)&&this.environmentName!=="cases"&&this.environmentName!=="array")
depth+=innerContext.getRegisterAsEm("jot");outrow.height=height;outrow.depth=depth;totalHeight+=height;outrow.pos=totalHeight;totalHeight+=depth+gap;body.push(outrow);}
const offset=totalHeight/2+AXIS_HEIGHT;const contentCols=[];for(let colIndex=0;colIndex<nc;colIndex++){const stack=[];for(const row of body){const element=row.cells[colIndex];if(element){element.depth=row.depth;element.height=row.height;stack.push({box:element,shift:row.pos-offset});}}
if(stack.length>0)
contentCols.push(new VBox({individualShift:stack}));}
const cols=[];let previousColContent=false;let previousColRule=false;let currentContentCol=0;let firstColumn=!this.leftDelim;const{colFormat}=this;for(const colDesc of colFormat){if("align"in colDesc&&currentContentCol>=contentCols.length){break;}
if("align"in colDesc){if(previousColContent){cols.push(makeColGap(2*arraycolsep));}else if(previousColRule||firstColumn){cols.push(makeColGap(arraycolsep));}
cols.push(new Box(contentCols[currentContentCol],{classes:"col-align-"+colDesc.align}));currentContentCol++;previousColContent=true;previousColRule=false;firstColumn=false;}else if("gap"in colDesc){if(typeof colDesc.gap==="number"){cols.push(makeColGap(colDesc.gap));}else{const col=makeColOfRepeatingElements(context,body,offset,colDesc.gap);if(col)cols.push(col);}
previousColContent=false;previousColRule=false;firstColumn=false;}else if("separator"in colDesc){const separator=new Box(null,{classes:"ML__vertical-separator"});separator.height=totalHeight;separator.setStyle("height",totalHeight,"em");separator.setStyle("border-right",`${arrayRuleWidth}em ${colDesc.separator} currentColor`);separator.setStyle("vertical-align",-(totalHeight-offset),"em");let gap=0;if(previousColRule)gap=doubleRuleSep-arrayRuleWidth;else if(previousColContent)gap=arraycolsep-arrayRuleWidth;separator.left=gap;cols.push(separator);previousColContent=false;previousColRule=true;firstColumn=false;}}
if(previousColContent&&!this.rightDelim){cols.push(makeColGap(arraycolsep));}
const inner=new Box(cols,{classes:["ML__mtable",...this.classes].join(" ")});if((!this.leftDelim||this.leftDelim===".")&&(!this.rightDelim||this.rightDelim===".")){if(this.caret)inner.caret=this.caret;return this.bind(context,inner);}
const innerHeight=inner.height;const innerDepth=inner.depth;const base=this.bind(context,new Box([this.bind(context,makeLeftRightDelim("open",(_e=this.leftDelim)!=null?_e:".",innerHeight,innerDepth,innerContext,{isSelected:this.isSelected})),inner,this.bind(context,makeLeftRightDelim("close",(_f=this.rightDelim)!=null?_f:".",innerHeight,innerDepth,innerContext,{isSelected:this.isSelected}))],{type:"ord"}));if(!base)return null;base.setStyle("display","inline-block");if(this.caret)base.caret=this.caret;return this.bind(context,this.attachSupsub(context,{base}));}
_serialize(options){var _a3;const result=[];if(this.environmentName==="lines")result.push(`\\displaylines{`);else result.push(`\\begin{${this.environmentName}}`);if(this.environmentName==="array"){result.push("{");if(this.colFormat!==void 0){for(const format of this.colFormat){if("align"in format&&typeof format.align==="string")
result.push(format.align);else if("separator"in format&&format.separator==="solid")
result.push("|");else if("separator"in format&&format.separator==="dashed")
result.push(":");}}
result.push("}");}
for(let row=0;row<this._rows.length;row++){for(let col=0;col<this._rows[row].length;col++){if(col>0)result.push(" & ");result.push(Atom.serialize(this._rows[row][col],options));}
if(row<this._rows.length-1){const gap=this.rowGaps[row];if(gap==null?void 0:gap.dimension)
result.push(`\\\\[${gap.dimension} ${(_a3 = gap.unit) != null ? _a3 : "pt"}] `);else result.push("\\\\ ");}}
if(this.environmentName==="lines")result.push(`}`);else result.push(`\\end{${this.environmentName}}`);return joinLatex(result);}
forEachCell(callback){for(let i=0;i<this.rowCount;i++)
for(let j=0;j<this.colCount;j++)callback(this._rows[i][j],i,j);}
getCell(row,col){var _a3;return(_a3=this._rows[row])==null?void 0:_a3[col];}
setCell(row,column,value){console.assert(this.type==="array"&&Array.isArray(this._rows)&&this._rows[row][column]!==void 0);for(const atom of this._rows[row][column]){atom.parent=void 0;atom.parentBranch=void 0;}
const atoms=[new Atom({type:"first",mode:this.mode}),...value.filter((x)=>x.type!=="first")];this._rows[row][column]=atoms;adjustBranches(this);this.isDirty=true;}
addRowBefore(row){console.assert(this.type==="array"&&Array.isArray(this._rows));this._rows.splice(row,0,new Array(this.colCount).fill(makeEmptyCell(this,!this.isMultiline)));adjustBranches(this);this.isDirty=true;}
addRowAfter(row){console.assert(this.type==="array"&&Array.isArray(this._rows));this._rows.splice(row+1,0,new Array(this.colCount).fill(makeEmptyCell(this,!this.isMultiline)));adjustBranches(this);this.isDirty=true;}
removeRow(row){console.assert(this.type==="array"&&Array.isArray(this._rows)&&this.rowCount>row);const deleted=this._rows.splice(row,1);for(const column of deleted){for(const cell of column){if(cell){for(const child of cell){child.parent=void 0;child.parentBranch=void 0;}}}}
adjustBranches(this);this.isDirty=true;}
addColumnBefore(col){console.assert(this.type==="array"&&Array.isArray(this._rows));for(const row of this._rows)row.splice(col,0,makeEmptyCell(this));adjustBranches(this);this.isDirty=true;}
addColumnAfter(col){console.assert(this.type==="array"&&Array.isArray(this._rows));for(const row of this._rows)row.splice(col+1,0,makeEmptyCell(this));adjustBranches(this);this.isDirty=true;}
addColumn(){this.addColumnAfter(this.colCount-1);}
removeColumn(col){console.assert(this.type==="array"&&Array.isArray(this._rows)&&this.colCount>col);for(const row of this._rows){const deleted=row.splice(col,1);for(const cell of deleted){if(cell){for(const child of cell){child.parent=void 0;child.parentBranch=void 0;}}}}
adjustBranches(this);this.isDirty=true;}
get cells(){const result=[];for(const row of this._rows){for(const cell of row)
if(cell)result.push(cell.filter((x)=>x.type!=="first"));}
return result;}
get rows(){return this._rows;}};function makeEmptyCell(parent,withPlaceholder=false){const first=new Atom({type:"first",mode:parent.mode});first.parent=parent;let result=[first];if(withPlaceholder){const placeholder=new PlaceholderAtom();placeholder.parent=parent;result.push(placeholder);}
return result;}
function adjustBranches(array){for(let i=0;i<array.rowCount;i++){for(let j=0;j<array.colCount;j++){const atoms=array.getCell(i,j);if(atoms)
for(const atom of atoms){if(atom){atom.parent=array;atom.parentBranch=[i,j];}}}}}
function makeColGap(width){const result=new Box(null,{classes:"ML__arraycolsep"});result.width=width;return result;}
function makeColOfRepeatingElements(context,rows,offset,element){if(!element)return null;const col=[];for(const row of rows){const cell=Atom.createBox(context,element,{type:"ignore"});if(cell){cell.depth=row.depth;cell.height=row.height;col.push({box:cell,shift:row.pos-offset});}}
return new VBox({individualShift:col}).wrap(context);}
var BoxAtom=class _BoxAtom extends Atom{constructor(options){super({mode:options.mode,command:options.command,style:options.style,body:options.body,type:"box"});this.framecolor=options.framecolor;this.backgroundcolor=options.backgroundcolor;this.padding=options.padding;this.offset=options.offset;this.border=options.border;}
static fromJson(json){return new _BoxAtom(json);}
toJson(){return __spreadProps(__spreadValues({},super.toJson()),{framecolor:this.framecolor,backgroundcolor:this.backgroundcolor,padding:this.padding,offset:this.offset,border:this.border});}
render(parentContext){var _a3,_b3,_c2,_d2;const base=Atom.createBox(parentContext,this.body,{type:"lift"});if(!base)return null;const offset=parentContext.toEm((_a3=this.offset)!=null?_a3:{dimension:0});base.depth+=offset;base.setStyle("display","inline-block");base.setStyle("position","relative");base.setStyle("height",Math.floor(100*base.height+base.depth)/100,"em");base.setStyle("vertical-align",-Math.floor(100*base.height)/100,"em");const context=new Context({parent:parentContext},this.style);const padding2=context.toEm((_b3=this.padding)!=null?_b3:{register:"fboxsep"});const box=new Box(null,{classes:"ML__box"});box.height=base.height+padding2;box.depth=base.depth+padding2;box.setStyle("box-sizing","border-box");box.setStyle("position","absolute");box.setStyle("top",-padding2+0.3,"em");box.setStyle("left",0);box.setStyle("height",box.height+box.depth,"em");box.setStyle("width","100%");if(this.backgroundcolor){box.setStyle("background-color",(_c2=context.toColor(this.backgroundcolor))!=null?_c2:"transparent");}
if(this.framecolor){box.setStyle("border",`${context.getRegisterAsEm("fboxrule", 2)}em solid ${(_d2 = context.toColor(this.framecolor)) != null ? _d2 : "black"}`);}
if(this.border)box.setStyle("border",this.border);const result=new Box([box,base],{type:"lift"});result.setStyle("display","inline-block");result.setStyle("position","relative");result.setStyle("line-height",0);result.height=base.height+padding2+(offset>0?offset:0);result.depth=base.depth+padding2+(offset<0?-offset:0);result.setStyle("padding-left",padding2,"em");result.setStyle("padding-right",padding2,"em");result.setStyle("height",Math.floor(100*(base.height+base.depth+2*padding2+Math.abs(offset)))/100,"em");result.setStyle("margin-top",-padding2,"em");result.setStyle("top",Math.floor(100*(base.depth-base.height+2*padding2-offset))/100,"em");result.setStyle("vertical-align",Math.floor(100*(base.depth+2*padding2))/100,"em");if(this.caret)result.caret=this.caret;return this.attachSupsub(parentContext,{base:result});}
_serialize(options){if(!options.skipStyles)return super._serialize(options);return joinLatex([this.bodyToLatex(options),this.supsubToLatex(options)]);}};var CompositionAtom=class _CompositionAtom extends Atom{constructor(value,options){var _a3;super({type:"composition",mode:(_a3=options==null?void 0:options.mode)!=null?_a3:"math",value});}
static fromJson(json){return new _CompositionAtom(json.value,json);}
toJson(){return super.toJson();}
render(context){const result=new Box(this.value,{classes:"ML__composition",type:"composition"});this.bind(context,result);if(this.caret)result.caret=this.caret;return result;}
_serialize(_options){return"";}};var ErrorAtom=class _ErrorAtom extends Atom{constructor(value){super({type:"error",value,command:value,mode:"math"});this.verbatimLatex=value;}
static fromJson(json){return new _ErrorAtom(json.command);}
toJson(){return super.toJson();}
render(context){const result=this.createBox(context,{classes:"ML__error"});if(this.caret)result.caret=this.caret;return result;}};var GroupAtom=class _GroupAtom extends Atom{constructor(arg,mode){super({type:"group",mode});this.body=arg;this.boxType=arg.length>1?"ord":"ignore";this.skipBoundary=true;this.displayContainsHighlight=false;if(arg&&arg.length===1&&arg[0].command===",")
this.captureSelection=true;}
static fromJson(json){return new _GroupAtom(json.body,json.mode);}
render(context){const box=Atom.createBox(context,this.body,{type:this.boxType});if(!box)return null;if(this.caret)box.caret=this.caret;return this.bind(context,box);}
_serialize(options){if(!(options.expandMacro||options.skipStyles||options.skipPlaceholders)&&typeof this.verbatimLatex==="string")
return this.verbatimLatex;const def=getDefinition(this.command,this.mode);if(def==null?void 0:def.serialize)return def.serialize(this,options);return`{${this.bodyToLatex(options)}}`;}};var LeftRightAtom=class _LeftRightAtom extends Atom{constructor(variant,body,options){super({type:"leftright",style:options.style,displayContainsHighlight:true});this.variant=variant;this.body=body;this.leftDelim=options.leftDelim;this.rightDelim=options.rightDelim;}
static fromJson(json){var _a3;return new _LeftRightAtom((_a3=json.variant)!=null?_a3:"",json.body,json);}
toJson(){const result=super.toJson();if(this.variant)result.variant=this.variant;if(this.leftDelim)result.leftDelim=this.leftDelim;if(this.rightDelim)result.rightDelim=this.rightDelim;return result;}
_serialize(options){var _a3,_b3;const rightDelim=this.matchingRightDelim();if(this.variant==="left...right"){return joinLatex(["\\left",(_a3=this.leftDelim)!=null?_a3:".",this.bodyToLatex(options),"\\right",rightDelim]);}
if(this.variant==="mleft...mright"){return joinLatex(["\\mleft",(_b3=this.leftDelim)!=null?_b3:".",this.bodyToLatex(options),"\\mright",rightDelim]);}
return joinLatex([!this.leftDelim||this.leftDelim==="."?"":this.leftDelim,this.bodyToLatex(options),rightDelim]);}
matchingRightDelim(){var _a3,_b3;if(this.rightDelim&&this.rightDelim!=="?")return this.rightDelim;const leftDelim=(_a3=this.leftDelim)!=null?_a3:".";return(_b3=RIGHT_DELIM[leftDelim])!=null?_b3:leftDelim;}
render(parentContext){var _a3,_b3;const context=new Context({parent:parentContext},this.style);console.assert(this.body!==void 0);const delimContext=new Context({parent:parentContext,mathstyle:"textstyle"},this.style);const inner=(_a3=Atom.createBox(context,this.body,{type:"inner"}))!=null?_a3:new Box(null,{type:"inner"});const innerHeight=inner.height/delimContext.scalingFactor;const innerDepth=inner.depth/delimContext.scalingFactor;const boxes=[];if(this.leftDelim){boxes.push(this.bind(delimContext,makeLeftRightDelim("open",this.leftDelim,innerHeight,innerDepth,delimContext,{isSelected:this.isSelected,classes:"ML__open"+(this.containsCaret?" ML__contains-caret":""),mode:this.mode,style:this.style})));}
if(inner){upgradeMiddle(inner.children,this,context,innerHeight,innerDepth);boxes.push(inner);}
if(this.rightDelim){let classes=this.containsCaret?" ML__contains-caret":"";let delim=this.rightDelim;if(delim==="?"){if(context.smartFence){delim=this.matchingRightDelim();classes+=" ML__smart-fence__close";}else delim=".";}
boxes.push(this.bind(delimContext,makeLeftRightDelim("close",delim,innerHeight,innerDepth,delimContext,{isSelected:this.isSelected,classes:classes+" ML__close",mode:this.mode,style:this.style})));}
let tightSpacing=this.variant==="mleft...mright";const sibling=this.leftSibling;if(sibling){if(!tightSpacing&&sibling.isFunction)tightSpacing=true;if(!tightSpacing&&sibling.type==="subsup"&&((_b3=sibling.leftSibling)==null?void 0:_b3.isFunction))
tightSpacing=true;}
const result=new Box(boxes,{type:tightSpacing?"close":"inner",classes:"ML__left-right"});result.setStyle("margin-top",`${-inner.depth}em`);result.setStyle("height",`${inner.height + inner.depth}em`);if(this.caret)result.caret=this.caret;return this.bind(context,result.wrap(context));}};function upgradeMiddle(boxes,atom,context,height,depth){if(!boxes)return;for(let i=0;i<boxes.length;i++){const child=boxes[i];if(child.type==="middle"){boxes[i]=atom.bind(context,makeLeftRightDelim("inner",child.value,height,depth,context,{isSelected:atom.isSelected}));boxes[i].caret=child.caret;boxes[i].isSelected=child.isSelected;boxes[i].cssId=child.cssId;boxes[i].htmlData=child.htmlData;boxes[i].htmlStyle=child.htmlStyle;boxes[i].attributes=child.attributes;boxes[i].cssProperties=child.cssProperties;}else if(child.children)
upgradeMiddle(child.children,atom,context,height,depth);}}
var MacroAtom=class _MacroAtom extends Atom{constructor(macro,options){var _a3;super({type:"macro",command:macro,style:options.style});this.body=options.body;if(options.captureSelection===void 0){if(options.args)this.captureSelection=false;else this.captureSelection=true;}else this.captureSelection=options.captureSelection;this.macroArgs=options.args;this.expand=(_a3=options.expand)!=null?_a3:false;}
static fromJson(json){return new _MacroAtom(json.command,json);}
toJson(){const options=super.toJson();if(this.expand)options.expand=true;if(this.captureSelection!==void 0)
options.captureSelection=this.captureSelection;if(this.macroArgs)options.args=this.macroArgs;return options;}
_serialize(options){var _a3;return options.expandMacro&&this.expand?this.bodyToLatex(options):this.command+((_a3=this.macroArgs)!=null?_a3:"");}
applyStyle(style,options){const allowedStyle={};if(style.color)allowedStyle.color=style.color;if(style.backgroundColor)
allowedStyle.backgroundColor=style.backgroundColor;super.applyStyle(allowedStyle,options);}
render(context){const result=Atom.createBox(context,this.body,{type:"lift"});if(!result)return null;if(this.caret)result.caret=this.caret;return this.bind(context,result);}};var MacroArgumentAtom=class _MacroArgumentAtom extends Atom{constructor(){super({type:"macro-argument"});}
static fromJson(_json){return new _MacroArgumentAtom();}
toJson(){const options=super.toJson();return options;}
_serialize(_options){return"";}
render(_context){return null;}};var PromptAtom=class _PromptAtom extends Atom{constructor(placeholderId,correctness,locked=false,body,options){var _a3;super({type:"prompt",mode:(_a3=options==null?void 0:options.mode)!=null?_a3:"math",style:options==null?void 0:options.style,command:"\\placeholder"});this.body=body;this.correctness=correctness;this.placeholderId=placeholderId;this.locked=locked;this.captureSelection=this.locked;}
static fromJson(json){return new _PromptAtom(json.placeholderId,json.correctness,json.locked,json.body,json);}
toJson(){const result=super.toJson();if(this.placeholderId)result.placeholderId=this.placeholderId;if(!this.body)delete result.body;if(this.body){result.body=this.body.filter((x)=>x.type!=="first").map((x)=>x.toJson());}
if(this.correctness)result.correctness=this.correctness;result.locked=this.locked;return result;}
render(parentContext){const context=new Context({parent:parentContext});const fboxsep=context.getRegisterAsEm("fboxsep");const hPadding=fboxsep;const vPadding=fboxsep;const content=Atom.createBox(parentContext,this.body);if(!content)return null;if(!content.height)content.height=context.metrics.xHeight;content.setStyle("vertical-align",-content.height,"em");if(this.correctness==="correct"){content.setStyle("color","var(--correct-color, var(--ML__correct-color))");}else if(this.correctness==="incorrect"){content.setStyle("color","var(--incorrect-color, var(--ML__incorrect-color))");}
const base=new Box(content,{type:"ord"});base.setStyle("display","inline-block");base.setStyle("height",content.height+content.depth,"em");base.setStyle("vertical-align",-vPadding,"em");let boxClasses="ML__prompt ";if(this.locked){boxClasses+=" ML__lockedPromptBox ";}else boxClasses+=" ML__editablePromptBox ";if(this.correctness==="correct")boxClasses+=" ML__correctPromptBox ";else if(this.correctness==="incorrect")
boxClasses+=" ML__incorrectPromptBox ";if(this.containsCaret)boxClasses+=" ML__focusedPromptBox ";const box=new Box(null,{classes:boxClasses,attributes:{part:"prompt"}});box.height=base.height+vPadding;box.depth=base.depth+vPadding;box.width=base.width+2*hPadding;box.setStyle("position","absolute");box.setStyle("height",`calc(${base.height + base.depth + 2 * vPadding}em - 2px)`);if(hPadding===0)box.setStyle("width","100%");if(hPadding!==0){box.setStyle("width",`calc(100% + ${2 * hPadding}em)`);box.setStyle("top",fboxsep,"em");box.setStyle("left",-hPadding,"em");}
if(!this.body||this.body.length===1){box.width=3*hPadding;box.setStyle("width",`calc(100% + ${3 * hPadding}em)`);box.setStyle("left",-1.5*hPadding,"em");}
let svg="";if(this.correctness==="incorrect"){svg+='<line x1="3%"  y1="97%" x2="97%" y2="3%" stroke-width="0.5" stroke="var(--incorrect-color, var(--ML__incorrect-color))" stroke-linecap="round" />';}
if(svg)box.svgOverlay=svg;const result=new Box([box,base],{classes:"ML__prompt-atom"});base.setStyle("line-height",1);result.setStyle("position","relative");result.setStyle("display","inline-block");result.setStyle("line-height",0);result.height=base.height+vPadding+0.2;result.depth=base.depth+vPadding;result.left=hPadding;result.right=hPadding;result.setStyle("height",base.height+vPadding,"em");result.setStyle("top",base.depth-base.height,"em");result.setStyle("vertical-align",base.depth+vPadding,"em");result.setStyle("margin-left",0.5,"em");result.setStyle("margin-right",0.5,"em");if(this.caret)result.caret=this.caret;return this.bind(context,this.attachSupsub(parentContext,{base:result}));}
_serialize(options){var _a3;const value=(_a3=this.bodyToLatex(options))!=null?_a3:"";if(options.skipPlaceholders)return value;let command="\\placeholder";if(this.placeholderId)command+=`[${this.placeholderId}]`;if(this.correctness==="correct")command+="[correct]";else if(this.correctness==="incorrect")command+="[incorrect]";if(this.locked)command+="[locked]";return latexCommand(command,value);}};var SubsupAtom=class _SubsupAtom extends Atom{constructor(options){super({type:"subsup",style:options==null?void 0:options.style});this.subsupPlacement="auto";}
get children(){if(!this._children){const result=[];const sub=this.branch("subscript");if(sub)
for(const x of sub){result.push(...x.children);result.push(x);}
const sup=this.branch("superscript");if(sup)
for(const x of sup){result.push(...x.children);result.push(x);}
this._children=result;}
return this._children;}
static fromJson(json){const result=new _SubsupAtom(json);for(const branch of NAMED_BRANCHES)
if(json[branch])result.setChildren(json[branch],branch);return result;}
render(context){var _a3;const phantomCtx=new Context({parent:context,isPhantom:true});const leftSibling=this.leftSibling;const base=(_a3=leftSibling.render(phantomCtx))!=null?_a3:new Box(null);const phantom=new Box(null);phantom.height=base.height;phantom.depth=base.depth;return this.attachSupsub(context,{base:phantom,isCharacterBox:leftSibling.isCharacterBox(),type:"ignore"});}
_serialize(options){return this.supsubToLatex(options);}};function isLiteral(token){if(!token)return false;return!/^(<$$>|<$>|<space>|<{>|<}>|#[0-9\?]|\\.+)$/.test(token);}
var Parser=class{constructor(tokens,context,options){this.errors=[];this.index=0;this.endCount=0;var _a3,_b3,_c2,_d2;options!=null?options:options={};this.tokens=tokens;this.context=context instanceof Context&&!(options==null?void 0:options.parseMode)&&!options.mathstyle?context:new Context({from:context,mathstyle:options.mathstyle},options.style);this.args=(_a3=options.args)!=null?_a3:void 0;this.smartFence=this.context.smartFence;this.parsingContext={parent:void 0,mathlist:[],style:(_b3=options.style)!=null?_b3:{},parseMode:(_c2=options.parseMode)!=null?_c2:"math",mathstyle:(_d2=options.mathstyle)!=null?_d2:"displaystyle",tabular:false};}
beginContext(options){var _a3,_b3,_c2,_d2,_e,_f;if(options==null?void 0:options.root){this.parsingContext={parent:this.parsingContext.parent,mathlist:[],style:{},parseMode:(_a3=options==null?void 0:options.mode)!=null?_a3:"math",mathstyle:(_b3=options==null?void 0:options.mathstyle)!=null?_b3:"displaystyle",tabular:(_c2=options==null?void 0:options.tabular)!=null?_c2:false};return;}
const current=this.parsingContext;const newContext={parent:current,mathlist:[],style:__spreadValues({},current.style),parseMode:(_d2=options==null?void 0:options.mode)!=null?_d2:current.parseMode,mathstyle:(_e=options==null?void 0:options.mathstyle)!=null?_e:current.mathstyle,tabular:(_f=options==null?void 0:options.tabular)!=null?_f:false};this.parsingContext=newContext;}
endContext(){this.parsingContext=this.parsingContext.parent;}
onError(err){this.errors.push(__spreadValues({before:tokensToString(this.tokens.slice(this.index,this.index+10)),after:tokensToString(this.tokens.slice(Math.max(0,this.index-10),this.index))},err));}
get mathlist(){return this.parsingContext.mathlist;}
set mathlist(value){this.parsingContext.mathlist=value;}
get parseMode(){return this.parsingContext.parseMode;}
set parseMode(value){this.parsingContext.parseMode=value;}
get tabularMode(){return this.parsingContext.tabular;}
get style(){let context=this.parsingContext;while(context){if(context.style)return __spreadValues({},context.style);context=context.parent;}
return{};}
set style(value){this.parsingContext.style=value;}
end(){this.endCount++;return this.index>=this.tokens.length||this.endCount>1e3;}
next(){this.index+=1;}
get(){this.endCount=0;return this.index<this.tokens.length?this.tokens[this.index++]:"";}
peek(){return this.tokens[this.index];}
expandUnicode(){if(!this.peek())return;if(this.parseMode!=="math")return;const latex=codePointToLatex(this.peek());if(latex)this.tokens.splice(this.index,1,...tokenize(latex));}
match(input){if(this.tokens[this.index]===input){this.index++;return true;}
return false;}
lastSubsupAtom(){let atom;if(this.mathlist.length>0){atom=this.mathlist[this.mathlist.length-1];if(atom.type==="subsup")return atom;if(atom.subsupPlacement!==void 0)return atom;}
atom=new SubsupAtom({style:this.style});this.mathlist.push(atom);return atom;}
hasPattern(pattern){return pattern.test(this.tokens[this.index]);}
hasInfixCommand(){var _a3;const{index}=this;if(index<this.tokens.length&&this.tokens[index].startsWith("\\")){const info=getDefinition(this.tokens[index],this.parseMode);if(!info||info.definitionType==="symbol")return false;if(info.ifMode&&!info.ifMode.includes(this.parseMode))return false;return(_a3=info.infix)!=null?_a3:false;}
return false;}
matchColumnSeparator(){if(!this.tabularMode)return false;const peek=this.peek();if(peek!=="&")return false;this.index++;return true;}
matchRowSeparator(){if(!this.tabularMode)return false;const peek=this.peek();if(peek!=="\\\\"&&peek!=="\\cr"&&peek!=="\\tabularnewline")
return false;this.index++;return true;}
placeholder(){var _a3;const placeHolderArg=(_a3=this.args)==null?void 0:_a3.call(this,"?");if(!placeHolderArg)
return[new PlaceholderAtom({mode:this.parseMode,style:this.style})];return parseLatex(placeHolderArg,{parseMode:this.parseMode,mathstyle:"textstyle"});}
skipWhitespace(){while(this.match("<space>")){}}
skipUntilToken(input){let token=this.tokens[this.index];while(token&&token!==input)token=this.tokens[++this.index];if(token===input)this.index++;}
skipFiller(){while(this.match("\\relax")||this.match("<space>")){}}
matchKeyword(keyword){const savedIndex=this.index;let done=this.end();let value="";while(!done){const token=this.get();if(isLiteral(token)){value+=token;done=this.end()||value.length>=keyword.length;}else done=true;}
const hasKeyword=keyword.toUpperCase()===value.toUpperCase();if(!hasKeyword)this.index=savedIndex;return hasKeyword;}
scanString(){let result="";while(!this.end()){const token=this.peek();if(token==="]")return result;if(token==="<space>")result+=" ";else if(token.startsWith("\\")){this.onError({code:"unexpected-command-in-string"});result+=token.substring(1);}else if(isLiteral(token))result+=token;else{return result;}
this.next();}
return result;}
scanBalancedString(){let result="";let done=this.end();let level=1;while(!done){const token=this.get();if(token==="<space>")result+=" ";else if(token==="<{>"){result+="{";level+=1;}else if(token==="<}>"){level-=1;if(level>0)result+="}";else this.index-=1;}else if(token==="<$>")result+="$";else if(token==="<$$>")result+="$$";else result+=token;done=level===0||this.end();}
return result;}
scanLiteralGroup(){var _a3;if(!this.match("<{>"))return"";let result="";let level=1;while(level>0&&!this.end()){const token=this.get();if(token==="<}>"){level-=1;if(level>0)result+="}";}else if(token==="<{>"){level+=1;result+="{";}else{if(/\\[a-zA-Z]+$/.test(result)&&/^[a-zA-Z]/.test(token))
result+=" ";result+=(_a3={"<space>":" ","<$$>":"$$","<$>":"$"}[token])!=null?_a3:token;}}
return result;}
scanNumber(isInteger=true){var _a3,_b3;let negative=false;let token=this.peek();while(token==="<space>"||token==="+"||token==="-"){this.get();if(token==="-")negative=!negative;token=this.peek();}
isInteger=Boolean(isInteger);let radix=10;let digits=/\d/;if(this.match("'")){radix=8;digits=/[0-7]/;isInteger=true;}else if(this.match('"')){radix=16;digits=/[\dA-F]/;isInteger=true;}else if(this.match("x")){radix=16;digits=/[\dA-Fa-f]/;isInteger=true;}else if(this.match("`")){token=this.get();if(token){if(token.length===2&&token.startsWith("\\")){return{number:(negative?-1:1)*((_a3=token.codePointAt(1))!=null?_a3:0),base:"alpha"};}
return{number:(negative?-1:1)*((_b3=token.codePointAt(0))!=null?_b3:0),base:"alpha"};}
return null;}
let value="";while(this.hasPattern(digits))value+=this.get();if(!isInteger&&(this.match(".")||this.match(","))){value+=".";while(this.hasPattern(digits))value+=this.get();}
const result=isInteger?Number.parseInt(value,radix):Number.parseFloat(value);if(Number.isNaN(result))return null;return{number:negative?-result:result,base:radix===16?"hexadecimal":radix===8?"octal":"decimal"};}
scanRegister(){var _a3;const index=this.index;const number=this.scanNumber(false);this.skipWhitespace();if(this.match("\\relax"))return number;let negative=false;if(number===null){while(true){const s=this.peek();if(s==="-")negative=!negative;else if(s!=="+")break;this.next();this.skipWhitespace();}}
if(this.match("\\global")){this.skipWhitespace();const register4=this.get();if(register4.startsWith("\\")){if(number){return{register:register4,global:true,factor:(negative?-1:1)*number.number};}
if(negative)return{register:register4,global:true,factor:-1};return{register:register4,global:true};}
this.index=index;return null;}
let register3=this.get();if(!(register3==null?void 0:register3.startsWith("\\"))){this.index=index;return null;}
register3=register3.substring(1);if(!this.context.registers[register3]){this.index=index;return null;}
if(!negative||number!==null){return{register:register3,factor:(negative?-1:1)*((_a3=number==null?void 0:number.number)!=null?_a3:1)};}
return{register:register3};}
scanValue(){const register3=this.scanRegister();if(register3)return register3;const index=this.index;const glue=this.scanGlueOrDimen();if(glue&&("unit"in glue||"glue"in glue&&"unit"in glue.glue))
return glue;this.index=index;const number=this.scanNumber();if(number)return number;if(this.end()||!isLiteral(this.peek()))return null;const s=this.scanString();if(s.length>0)return{string:s};return null;}
scanDimen(){const value=this.scanNumber(false);if(value===null)return null;const dimension=value.number;this.skipWhitespace();this.matchKeyword("true");this.skipWhitespace();let unit;if(this.matchKeyword("pt"))unit="pt";else if(this.matchKeyword("mm"))unit="mm";else if(this.matchKeyword("cm"))unit="cm";else if(this.matchKeyword("ex"))unit="ex";else if(this.matchKeyword("px"))unit="px";else if(this.matchKeyword("em"))unit="em";else if(this.matchKeyword("bp"))unit="bp";else if(this.matchKeyword("dd"))unit="dd";else if(this.matchKeyword("pc"))unit="pc";else if(this.matchKeyword("in"))unit="in";else if(this.matchKeyword("mu"))unit="mu";return unit?{dimension,unit}:{dimension};}
scanGlueOrDimen(){const dimen=this.scanDimen();if(dimen===null)return null;this.skipWhitespace();if(this.match("\\relax"))return dimen;const result={glue:dimen};if(this.matchKeyword("plus")){const grow=this.scanDimen();if(grow)result.grow=grow;else return result;}
this.skipWhitespace();if(this.match("\\relax"))return result;this.skipWhitespace();if(this.matchKeyword("minus")){const shrink=this.scanDimen();if(shrink)result.shrink=shrink;else return result;}
if(!result.grow&&!result.shrink)return dimen;return result;}
scanColspec(){this.skipWhitespace();const result=[];while(!this.end()&&!(this.peek()==="<}>"||this.peek()==="]")){const literal=this.get();if(literal==="c"||literal==="r"||literal==="l")
result.push({align:literal});else if(literal==="|")result.push({separator:"solid"});else if(literal===":")result.push({separator:"dashed"});else if(literal==="@"){if(this.match("<{>")){this.beginContext({mode:"math"});result.push({gap:this.scan((token)=>token==="<}>")});this.endContext();}
if(!this.match("<}>"))this.onError({code:"unbalanced-braces"});}}
return result;}
scanModeSet(){let mathstyle=void 0;if(this.match("\\("))mathstyle="textstyle";if(!mathstyle&&this.match("\\["))mathstyle="displaystyle";if(!mathstyle)return null;this.beginContext({mode:"math",mathstyle});const result=this.scan((token)=>token===(mathstyle==="displaystyle"?"\\]":"\\)"));if(!this.match(mathstyle==="displaystyle"?"\\]":"\\)"))
this.onError({code:"unbalanced-mode-shift"});this.endContext();return result;}
scanModeShift(){let final="";if(this.match("<$>"))final="<$>";if(!final&&this.match("<$$>"))final="<$$>";if(!final)return null;this.beginContext({mode:"math",mathstyle:final==="<$>"?"textstyle":"displaystyle"});const result=this.scan((token)=>token===final);if(!this.match(final))this.onError({code:"unbalanced-mode-shift"});this.endContext();return result;}
scanEnvironment(){if(!this.match("\\begin"))return null;const envName=this.scanArgument("string");if(!envName)return null;const def=getEnvironmentDefinition(envName);if(!def){this.onError({code:"unknown-environment",arg:envName});return null;}
const args=[];if(def.params){for(const parameter of def.params){if(parameter.isOptional){args.push(this.scanOptionalArgument(parameter.type));}else{const arg=this.scanArgument(parameter.type);if(!arg)this.onError({code:"missing-argument",arg:envName});args.push(arg);}}}
this.beginContext({tabular:def.tabular,root:def.rootOnly});const array=[];const rowGaps=[];let row=[];let done=false;do{if(this.end()){this.onError({code:"unbalanced-environment",arg:envName});done=true;}
if(!done&&this.match("\\end")){if(this.scanArgument("string")!==envName){this.onError({code:"unbalanced-environment",arg:envName});}
done=true;}
if(!done){if(this.matchColumnSeparator()){row.push(this.mathlist);this.mathlist=[];}else if(this.matchRowSeparator()){row.push(this.mathlist);this.mathlist=[];let gap=null;this.skipWhitespace();if(this.match("[")){gap=this.scanDimen();this.skipWhitespace();this.match("]");}
rowGaps.push(gap!=null?gap:{dimension:0});array.push(row);row=[];}else{this.mathlist.push(...this.scan((token)=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline"].includes(token)));}}}while(!done);row.push(this.mathlist);if(row.length>0)array.push(row);this.endContext();if(def.rootOnly)this.index=this.tokens.length;return def.createAtom(envName,array,rowGaps,args,this.context.maxMatrixCols);}
scanExpression(){const savedList=this.mathlist;this.mathlist=[];if(this.parseExpression()){const result=this.mathlist;this.mathlist=savedList;return result;}
this.mathlist=savedList;return null;}
scan(done){this.beginContext();if(!done)done=(token)=>token==="<}>";let infix="";let infixInfo=null;let infixArgs=[];let prefix=null;while(!this.end()&&!done(this.peek())){if(this.hasInfixCommand()&&!infix){infix=this.get();infixInfo=getDefinition(infix,"math");if(infixInfo)infixArgs=this.scanArguments(infixInfo)[1];prefix=this.mathlist;this.mathlist=[];}else this.parseExpression();}
let result;if(infix){console.assert(Boolean(infixInfo));infixArgs.unshift(this.mathlist);if(prefix)infixArgs.unshift(prefix);result=[infixInfo.createAtom({command:infix,args:infixArgs,style:this.style,mode:this.parseMode})];}else result=this.mathlist;this.endContext();return result;}
scanGroup(){const initialIndex=this.index;if(!this.match("<{>"))return null;const body=this.scan((token)=>token==="<}>");if(!this.match("<}>"))this.onError({code:"unbalanced-braces"});if(body.length===1&&body[0].type==="placeholder")return body[0];const result=new GroupAtom(body,this.parseMode);result.verbatimLatex=tokensToString(this.tokens.slice(initialIndex,this.index));return result;}
scanSmartFence(){this.skipWhitespace();if(!this.match("("))return null;this.beginContext();let nestLevel=1;while(!this.end()&&nestLevel!==0){if(this.match("("))nestLevel+=1;if(this.match(")"))nestLevel-=1;if(nestLevel!==0)this.parseExpression();}
const result=new LeftRightAtom("",this.mathlist,{leftDelim:"(",rightDelim:nestLevel===0?")":"?"});this.endContext();return result;}
scanDelim(){this.skipWhitespace();const token=this.peek();if(!token){this.onError({code:"unexpected-end-of-string"});return null;}
if(!isLiteral(token)&&!token.startsWith("\\"))return null;this.next();const info=getDefinition(token,"math");if(!info){this.onError({code:"unknown-command",arg:token});return null;}
if(info.definitionType==="function"&&info.ifMode&&!info.ifMode.includes(this.parseMode)){this.onError({code:"unexpected-delimiter",arg:token});return null;}
if(info.definitionType==="symbol"&&(info.type==="mopen"||info.type==="mclose"))
return token;if(/^(\.|\?|\||<|>|\\vert|\\Vert|\\\||\\surd|\\uparrow|\\downarrow|\\Uparrow|\\Downarrow|\\updownarrow|\\Updownarrow|\\mid|\\mvert|\\mVert)$/.test(token))
return token;this.onError({code:"unexpected-delimiter",arg:token});return null;}
scanLeftRight(){var _a3;if(this.match("\\right")){this.onError({code:"unbalanced-braces"});return new ErrorAtom("\\right");}
if(this.match("\\mright")){this.onError({code:"unbalanced-braces"});return new ErrorAtom("\\mright");}
let close="\\right";if(!this.match("\\left")){if(!this.match("\\mleft"))return null;close="\\mright";}
const leftDelim=this.scanDelim();if(!leftDelim){this.onError({code:"unexpected-delimiter"});return new ErrorAtom(close==="\\right"?"\\left":"\\mleft");}
this.beginContext();while(!this.end()&&!this.match(close))this.parseExpression();const body=this.mathlist;this.endContext();const rightDelim=(_a3=this.scanDelim())!=null?_a3:".";return new LeftRightAtom(close==="\\right"?"left...right":"mleft...mright",body,{leftDelim,rightDelim,style:this.style});}
parseSupSub(){if(this.parseMode!=="math")return false;let token=this.peek();if(token!=="^"&&token!=="_"&&token!=="'")return false;const target=this.lastSubsupAtom();while(token==="^"||token==="_"||token==="'"){if(this.match("'")){if(this.match("'")){target.addChild(new Atom({type:"mord",command:"\\doubleprime",mode:"math",value:"\u2032\u2032"}),"superscript");}else{target.addChild(new Atom({type:"mord",command:"\\prime",mode:"math",value:"\u2032"}),"superscript");}}else if(this.match("^")||this.match("_")){target.addChildren(argAtoms(this.scanArgument("expression")),token==="_"?"subscript":"superscript");}
token=this.peek();}
return true;}
parseLimits(){if(this.parseMode!=="math")return false;const isLimits=this.match("\\limits");const isNoLimits=!isLimits&&this.match("\\nolimits");const isDisplayLimits=!isNoLimits&&!isLimits&&this.match("\\displaylimits");if(!isLimits&&!isNoLimits&&!isDisplayLimits)return false;const opAtom=this.mathlist.length>0?this.mathlist[this.mathlist.length-1]:null;if(opAtom===null)return false;opAtom.explicitSubsupPlacement=true;if(isLimits)opAtom.subsupPlacement="over-under";if(isNoLimits)opAtom.subsupPlacement="adjacent";if(isDisplayLimits)opAtom.subsupPlacement="auto";return true;}
scanArguments(info){if(!(info==null?void 0:info.params))return[void 0,[]];let deferredArg=void 0;const args=[];let i=info.infix?2:0;while(i<info.params.length){const parameter=info.params[i];if(parameter.type==="rest"){args.push(this.scan((token)=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline","\\right"].includes(token)));}else if(parameter.isOptional)
args.push(this.scanOptionalArgument(parameter.type));else if(parameter.type.endsWith("*")){deferredArg=parameter.type.slice(0,-1);}else args.push(this.scanArgument(parameter.type));i+=1;}
return[deferredArg,args];}
scanSymbolOrLiteral(){const token=this.peek();if(!token)return null;this.next();let result;if(isLiteral(token)){const result2=Mode.createAtom(this.parseMode,token,__spreadValues({},this.style));return result2?[result2]:null;}
result=this.scanMacro(token);if(result)return[result];if(token.startsWith("\\")){const def=getDefinition(token,this.parseMode);if(!def){this.onError({code:"unknown-command",arg:token});return[new ErrorAtom(token)];}
if(def.definitionType==="symbol"){const style=__spreadValues({},this.style);if(def.variant)style.variant=def.variant;result=new Atom({type:def.type,command:token,style,value:String.fromCodePoint(def.codepoint),mode:this.parseMode,verbatimLatex:token});}else if(def.applyMode||def.applyStyle||def.infix){this.onError({code:"invalid-command",arg:token});return[new ErrorAtom(token)];}else if(def.createAtom){result=def.createAtom({command:token,args:[],style:this.style,mode:this.parseMode});}}
return result?[result]:null;}
scanArgument(type){var _a3;this.skipFiller();const mode=this.parseMode;if(type==="auto")type=mode;if(!this.match("<{>")){if(type==="string")return this.scanString();if(type==="value")return this.scanValue();if(type==="delim")return(_a3=this.scanDelim())!=null?_a3:".";if(type==="expression")return this.scanExpression();if(type==="math"){if(type!==mode)this.beginContext({mode:"math"});const result2=this.scanSymbolOrLiteral();if(type!==mode)this.endContext();return result2;}
if(type==="text"){if(type!==mode)this.beginContext({mode:"text"});const result2=this.scanSymbolOrLiteral();if(type!==mode)this.endContext();return result2;}
if(type==="balanced-string")return null;if(type==="rest"){return this.scan((token)=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline","\\right"].includes(token));}
console.assert(false);return null;}
if(type==="text"){this.beginContext({mode:"text"});do
this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());const atoms=this.mathlist;this.endContext();return{group:atoms};}
if(type==="math"){this.beginContext({mode:"math"});do
this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());const atoms=this.mathlist;this.endContext();return{group:atoms};}
let result=null;if(type==="expression"){this.beginContext({mode:"math"});do
this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());const atoms=this.mathlist;this.endContext();return{group:atoms};}
if(type==="string")result=this.scanString();else if(type==="balanced-string")result=this.scanBalancedString();else if(type==="colspec")result=this.scanColspec();else if(type==="value")result=this.scanValue();this.skipUntilToken("<}>");return result;}
scanOptionalArgument(argType){argType=argType==="auto"?this.parseMode:argType;this.skipFiller();if(!this.match("["))return null;let result=null;while(!this.end()&&!this.match("]")){if(argType==="string")result=this.scanString();else if(argType==="value")result=this.scanValue();else if(argType==="colspec")result=this.scanColspec();else if(argType==="bbox"){const bboxParameter={};const list=this.scanString().toLowerCase().trim().split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(const element of list){const m=element.match(/^\s*([\d.]+)\s*([a-z]{2})/);if(m){bboxParameter.padding={dimension:parseInt(m[1]),unit:m[2]};}else{const m2=element.match(/^\s*border\s*:\s*(.*)/);if(m2)bboxParameter.border=m2[1];else bboxParameter.backgroundcolor={string:element};}}
result=bboxParameter;}else if(argType==="math"){this.beginContext({mode:"math"});result=this.mathlist.concat(this.scan((token)=>token==="]"));this.endContext();}}
return result;}
scanSymbolOrCommand(command){var _a3,_b3,_c2;if(command==="\\placeholder"){const id=this.scanOptionalArgument("string");const defaultValue=this.scanOptionalArgument("math");const defaultAsString=Atom.serialize(defaultValue,{defaultMode:"math"});let defaultAtoms=[];let correctness;if(!correctness&&defaultAsString==="correct")
correctness="correct";else if(!correctness&&defaultAsString==="incorrect")
correctness="incorrect";else if(defaultAsString!=="")defaultAtoms=defaultValue;const locked=this.scanOptionalArgument("string")==="locked";const value=this.scanArgument("auto");let body;if(value&&Array.isArray(value)&&value.length>0)body=value;else if(value&&typeof value==="object"&&"group"in value)
body=value.group;else body=defaultAtoms;if(id){return[new PromptAtom(id,correctness,locked,body!=null?body:defaultAtoms,{mode:this.parseMode,style:this.style})];}
return[new PlaceholderAtom({mode:this.parseMode,style:this.style})];}
if(command==="\\renewcommand"||command==="\\newcommand"||command==="\\providecommand"||command==="\\def"){const index=this.index;const cmd=this.scanLiteralGroup()||this.next();if(!cmd)return null;if(this.context.registers[cmd.substring(1)]){const value=this.scanArgument("string");if(value!==null)this.context.registers[cmd.substring(1)]=value;const verbatimLatex=joinLatex([command,tokensToString(this.tokens.slice(index,this.index))]);return[new Atom({type:"text",value:"",verbatimLatex})];}}
let result=this.scanMacro(command);if(result)return[result];const info=getDefinition(command,this.parseMode);if(!info){if(this.parseMode==="text"){if(/[a-zA-Z]/.test((_a3=this.peek())!=null?_a3:"")){command+=" ";}
return[...command].map((c)=>new Atom({type:"text",value:c,mode:"text",style:this.style}));}
this.onError({code:"unknown-command",arg:command});return[new ErrorAtom(command)];}
const initialIndex=this.index;if(info.definitionType==="symbol"){const style=__spreadValues({},this.style);if(info.variant)style.variant=info.variant;result=new Atom({type:info.type,command,style,value:String.fromCodePoint(info.codepoint),mode:this.parseMode});}else{if(info.ifMode&&!info.ifMode.includes(this.parseMode)){return[];}
const savedMode=this.parseMode;if(info.applyMode)this.parseMode=info.applyMode;let deferredArg=void 0;let args=[];if(info.parse)args=info.parse(this);else[deferredArg,args]=this.scanArguments(info);this.parseMode=savedMode;if(info.applyMode&&!info.applyStyle&&!info.createAtom)
return argAtoms(args[0]);if(info.infix){this.onError({code:"too-many-infix-commands",arg:command});return null;}
if(typeof info.createAtom==="function"){result=info.createAtom({command,args,style:this.style,mode:this.parseMode});if(deferredArg)
result.body=argAtoms(this.scanArgument(deferredArg));}else if(typeof info.applyStyle==="function"){const style=info.applyStyle(this.style,command,args,this.context);const savedMode2=this.parseMode;if(info.applyMode)this.parseMode=info.applyMode;if(deferredArg){const saveStyle=this.style;this.style=style;const atoms=this.scanArgument(deferredArg);this.style=saveStyle;this.parseMode=savedMode2;return argAtoms(atoms);}
this.style=style;}else{result=new Atom({type:"mord",command:(_b3=info.command)!=null?_b3:command,style:__spreadValues({},this.style),value:command,mode:(_c2=info.applyMode)!=null?_c2:this.parseMode});}}
if(!result)return null;if(result instanceof Atom&&result.verbatimLatex===void 0&&!/^\\(llap|rlap|class|cssId|htmlData)$/.test(command)){const verbatim=joinLatex([command,tokensToString(this.tokens.slice(initialIndex,this.index))]);if(verbatim)result.verbatimLatex=verbatim;}
if(result.verbatimLatex===null)result.verbatimLatex=void 0;if(result.isFunction&&this.smartFence){const smartFence=this.scanSmartFence();if(smartFence)return[result,smartFence];}
return[result];}
scanSymbolCommandOrLiteral(){this.expandUnicode();const token=this.get();if(!token)return null;if(isLiteral(token)){const result=Mode.createAtom(this.parseMode,token,__spreadValues({},this.style));if(!result)return null;if(result.isFunction&&this.smartFence){const smartFence=this.scanSmartFence();if(smartFence)return[result,smartFence];}
return[result];}
if(token.startsWith("\\"))return this.scanSymbolOrCommand(token);if(token==="<space>"){if(this.parseMode==="text")
return[new TextAtom(" "," ",this.style)];return null;}
if(token==="<}>")this.onError({latex:"",code:"unbalanced-braces"});else{this.onError({latex:"",code:"unexpected-token",arg:token});}
return null;}
scanMacro(macro){var _a3;const def=this.context.getMacro(macro);if(!def)return null;const initialIndex=this.index;const argCount=def.args;const args={"?":(_a3=this.args)==null?void 0:_a3.call(this,"?")};for(let i=1;i<=argCount;i++){let arg=this.scanLiteralGroup();if(!arg){const index=this.index;this.scanExpression();arg=tokensToString(this.tokens.slice(index,this.index));}
args[i]=arg;}
return new MacroAtom(macro,{expand:def.expand,captureSelection:def.captureSelection,args:initialIndex===this.index?null:tokensToString(this.tokens.slice(initialIndex,this.index)),style:this.parsingContext.style,body:parseLatex(def.def,{context:this.context,parseMode:this.parseMode,args:(arg)=>args[arg],mathstyle:this.parsingContext.mathstyle,style:this.parsingContext.style})});}
parseExpression(){var _a3,_b3,_c2,_d2;let result=(_d2=(_c2=(_b3=(_a3=this.scanEnvironment())!=null?_a3:this.scanModeShift())!=null?_b3:this.scanModeSet())!=null?_c2:this.scanGroup())!=null?_d2:this.scanLeftRight();if(result===null){if(this.parseSupSub())return true;if(this.parseLimits())return true;result=this.scanSymbolCommandOrLiteral();}
if(!result)return false;if(isArray(result))this.mathlist.push(...result);else this.mathlist.push(result);return true;}};function parseLatex(s,options){var _a3,_b3,_c2,_d2;const args=(_a3=options==null?void 0:options.args)!=null?_a3:void 0;const parser=new Parser(tokenize(s,args),options==null?void 0:options.context,{args,mathstyle:(_b3=options==null?void 0:options.mathstyle)!=null?_b3:"displaystyle",parseMode:(_c2=options==null?void 0:options.parseMode)!=null?_c2:"math",style:(_d2=options==null?void 0:options.style)!=null?_d2:{}});const atoms=[];while(!parser.end())atoms.push(...parser.scan(()=>false));return atoms;}
function validateLatex(s,options){var _a3;const parser=new Parser(tokenize(s,null),options==null?void 0:options.context,{mathstyle:"displaystyle",parseMode:(_a3=options==null?void 0:options.parseMode)!=null?_a3:"math"});while(!parser.end())parser.scan();return parser.errors;}
var ChemAtom=class _ChemAtom extends Atom{constructor(command,arg){super({type:"chem"},{command,mode:"math"});const tex=texify.go(mhchemParser.go(arg,command==="\\pu"?"pu":"ce"),false);this.body=parseLatex(tex);this._verbatimLatex=command+"{"+arg+"}";this.arg=arg;this.captureSelection=true;}
static fromJson(json){return new _ChemAtom(json.command,json.arg);}
set verbatimLatex(_latex){}
get verbatimLatex(){return this._verbatimLatex;}
toJson(){return __spreadProps(__spreadValues({},super.toJson()),{arg:this.arg});}
render(context){const box=Atom.createBox(context,this.body,{type:"inner"});if(this.caret)box.caret=this.caret;return this.bind(context,box);}
_serialize(_options){console.assert(this.verbatimLatex!==void 0);return this.verbatimLatex;}};defineFunction(["ce","pu"],"{chemformula:balanced-string}",{createAtom:(options)=>{var _a3;return new ChemAtom(options.command,(_a3=options.args[0])!=null?_a3:"");}});var mhchemParser={go:function(input,stateMachine){if(!input){return[];}
if(stateMachine===void 0){stateMachine="ce";}
var state="0";var buffer={};buffer["parenthesisLevel"]=0;input=input.replace(/\n/g," ");input=input.replace(/[\u2212\u2013\u2014\u2010]/g,"-");input=input.replace(/[\u2026]/g,"...");var lastInput;var watchdog=10;var output=[];while(true){if(lastInput!==input){watchdog=10;lastInput=input;}else{watchdog--;}
var machine=mhchemParser.stateMachines[stateMachine];var t=machine.transitions[state]||machine.transitions["*"];iterateTransitions:for(var i=0;i<t.length;i++){var matches=mhchemParser.patterns.match_(t[i].pattern,input);if(matches){var task=t[i].task;for(var iA=0;iA<task.action_.length;iA++){var o;if(machine.actions[task.action_[iA].type_]){o=machine.actions[task.action_[iA].type_](buffer,matches.match_,task.action_[iA].option);}else if(mhchemParser.actions[task.action_[iA].type_]){o=mhchemParser.actions[task.action_[iA].type_](buffer,matches.match_,task.action_[iA].option);}else{throw["MhchemBugA","mhchem bug A. Please report. ("+task.action_[iA].type_+")"];}
mhchemParser.concatArray(output,o);}
state=task.nextState||state;if(input.length>0){if(!task.revisit){input=matches.remainder;}
if(!task.toContinue){break iterateTransitions;}}else{return output;}}}
if(watchdog<=0){throw["MhchemBugU","mhchem bug U. Please report."];}}},concatArray:function(a,b){if(b){if(Object.prototype.toString.call(b)==="[object Array]"){for(var iB=0;iB<b.length;iB++){a.push(b[iB]);}}else{a.push(b);}}},patterns:{patterns:{"empty":/^$/,"else":/^./,"else2":/^./,"space":/^\s/,"space A":/^\s(?=[A-Z\\$])/,"space$":/^\s$/,"a-z":/^[a-z]/,"x":/^x/,"x$":/^x$/,"i$":/^i$/,"letters":/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,"digits":/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(input){var m=input.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:(?:([eE])|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);if(m&&m[0]){return{match_:m.slice(1),remainder:input.substr(m[0].length)};}
return null;},"(-)(9)^(-9)":function(input){var m=input.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);if(m&&m[0]){return{match_:m.slice(1),remainder:input.substr(m[0].length)};}
return null;},"state of aggregation $":function(input){var a=mhchemParser.patterns.findObserveGroups(input,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(a&&a.remainder.match(/^($|[\s,;\)\]\}])/)){return a;}
var m=input.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);if(m){return{match_:m[0],remainder:input.substr(m[0].length)};}
return null;},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(input){return mhchemParser.patterns.findObserveGroups(input,"^{","","","}");},"^($...$)":function(input){return mhchemParser.patterns.findObserveGroups(input,"^","$","$","");},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(input){return mhchemParser.patterns.findObserveGroups(input,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",true);},"^\\x{}":function(input){return mhchemParser.patterns.findObserveGroups(input,"^",/^\\[a-zA-Z]+\{/,"}","");},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(input){return mhchemParser.patterns.findObserveGroups(input,"_{","","","}");},"_($...$)":function(input){return mhchemParser.patterns.findObserveGroups(input,"_","$","$","");},"_9":/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(input){return mhchemParser.patterns.findObserveGroups(input,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",true);},"_\\x{}":function(input){return mhchemParser.patterns.findObserveGroups(input,"_",/^\\[a-zA-Z]+\{/,"}","");},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(input){return mhchemParser.patterns.findObserveGroups(input,"","{","}","");},"{(...)}":function(input){return mhchemParser.patterns.findObserveGroups(input,"{","","","}");},"$...$":function(input){return mhchemParser.patterns.findObserveGroups(input,"","$","$","");},"${(...)}$":function(input){return mhchemParser.patterns.findObserveGroups(input,"${","","","}$");},"$(...)$":function(input){return mhchemParser.patterns.findObserveGroups(input,"$","","","$");},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,"operator":/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,"arrowUpDown":/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(input){return mhchemParser.patterns.findObserveGroups(input,"\\bond{","","","}");},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,"CMT":/^[CMT](?=\[)/,"[(...)]":function(input){return mhchemParser.patterns.findObserveGroups(input,"[","","","]");},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(input){return mhchemParser.patterns.findObserveGroups(input,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",true);},"\\x{}":function(input){return mhchemParser.patterns.findObserveGroups(input,"",/^\\[a-zA-Z]+\{/,"}","");},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,"orbital":/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,"others":/^[\/~|]/,"\\frac{(...)}":function(input){return mhchemParser.patterns.findObserveGroups(input,"\\frac{","","","}","{","","","}");},"\\overset{(...)}":function(input){return mhchemParser.patterns.findObserveGroups(input,"\\overset{","","","}","{","","","}");},"\\underset{(...)}":function(input){return mhchemParser.patterns.findObserveGroups(input,"\\underset{","","","}","{","","","}");},"\\underbrace{(...)}":function(input){return mhchemParser.patterns.findObserveGroups(input,"\\underbrace{","","","}_","{","","","}");},"\\color{(...)}0":function(input){return mhchemParser.patterns.findObserveGroups(input,"\\color{","","","}");},"\\color{(...)}{(...)}1":function(input){return mhchemParser.patterns.findObserveGroups(input,"\\color{","","","}","{","","","}");},"\\color(...){(...)}2":function(input){return mhchemParser.patterns.findObserveGroups(input,"\\color","\\","",/^(?=\{)/,"{","","","}");},"\\ce{(...)}":function(input){return mhchemParser.patterns.findObserveGroups(input,"\\ce{","","","}");},"oxidation$":/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,"amount":function(input){var match;match=input.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/);if(match){return{match_:match[0],remainder:input.substr(match[0].length)};}
var a=mhchemParser.patterns.findObserveGroups(input,"","$","$","");if(a){match=a.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/);if(match){return{match_:match[0],remainder:input.substr(match[0].length)};}}
return null;},"amount2":function(input){return this["amount"](input);},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,"formula$":function(input){if(input.match(/^\([a-z]+\)$/)){return null;}
var match=input.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);if(match){return{match_:match[0],remainder:input.substr(match[0].length)};}
return null;},"uprightEntities":/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(input,begExcl,begIncl,endIncl,endExcl,beg2Excl,beg2Incl,end2Incl,end2Excl,combine){var _match=function(input2,pattern){if(typeof pattern==="string"){if(input2.indexOf(pattern)!==0){return null;}
return pattern;}else{var match2=input2.match(pattern);if(!match2){return null;}
return match2[0];}};var _findObserveGroups=function(input2,i,endChars){var braces=0;while(i<input2.length){var a=input2.charAt(i);var match2=_match(input2.substr(i),endChars);if(match2!==null&&braces===0){return{endMatchBegin:i,endMatchEnd:i+match2.length};}else if(a==="{"){braces++;}else if(a==="}"){if(braces===0){throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];}else{braces--;}}
i++;}
if(braces>0){return null;}
return null;};var match=_match(input,begExcl);if(match===null){return null;}
input=input.substr(match.length);match=_match(input,begIncl);if(match===null){return null;}
var e=_findObserveGroups(input,match.length,endIncl||endExcl);if(e===null){return null;}
var match1=input.substring(0,endIncl?e.endMatchEnd:e.endMatchBegin);if(!(beg2Excl||beg2Incl)){return{match_:match1,remainder:input.substr(e.endMatchEnd)};}else{var group2=this.findObserveGroups(input.substr(e.endMatchEnd),beg2Excl,beg2Incl,end2Incl,end2Excl);if(group2===null){return null;}
var matchRet=[match1,group2.match_];return{match_:combine?matchRet.join(""):matchRet,remainder:group2.remainder};}},match_:function(m,input){var pattern=mhchemParser.patterns.patterns[m];if(pattern===void 0){throw["MhchemBugP","mhchem bug P. Please report. ("+m+")"];}else if(typeof pattern==="function"){return mhchemParser.patterns.patterns[m](input);}else{var match=input.match(pattern);if(match){var mm;if(match[2]){mm=[match[1],match[2]];}else if(match[1]){mm=match[1];}else{mm=match[0];}
return{match_:mm,remainder:input.substr(match[0].length)};}
return null;}}},actions:{"a=":function(buffer,m){buffer.a=(buffer.a||"")+m;},"b=":function(buffer,m){buffer.b=(buffer.b||"")+m;},"p=":function(buffer,m){buffer.p=(buffer.p||"")+m;},"o=":function(buffer,m){buffer.o=(buffer.o||"")+m;},"q=":function(buffer,m){buffer.q=(buffer.q||"")+m;},"d=":function(buffer,m){buffer.d=(buffer.d||"")+m;},"rm=":function(buffer,m){buffer.rm=(buffer.rm||"")+m;},"text=":function(buffer,m){buffer.text_=(buffer.text_||"")+m;},"insert":function(buffer,m,a){return{type_:a};},"insert+p1":function(buffer,m,a){return{type_:a,p1:m};},"insert+p1+p2":function(buffer,m,a){return{type_:a,p1:m[0],p2:m[1]};},"copy":function(buffer,m){return m;},"rm":function(buffer,m){return{type_:"rm",p1:m||""};},"text":function(buffer,m){return mhchemParser.go(m,"text");},"{text}":function(buffer,m){var ret=["{"];mhchemParser.concatArray(ret,mhchemParser.go(m,"text"));ret.push("}");return ret;},"tex-math":function(buffer,m){return mhchemParser.go(m,"tex-math");},"tex-math tight":function(buffer,m){return mhchemParser.go(m,"tex-math tight");},"bond":function(buffer,m,k){return{type_:"bond",kind_:k||m};},"color0-output":function(buffer,m){return{type_:"color0",color:m[0]};},"ce":function(buffer,m){return mhchemParser.go(m);},"1/2":function(buffer,m){var ret=[];if(m.match(/^[+\-]/)){ret.push(m.substr(0,1));m=m.substr(1);}
var n=m.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);n[1]=n[1].replace(/\$/g,"");ret.push({type_:"frac",p1:n[1],p2:n[2]});if(n[3]){n[3]=n[3].replace(/\$/g,"");ret.push({type_:"tex-math",p1:n[3]});}
return ret;},"9,9":function(buffer,m){return mhchemParser.go(m,"9,9");}},createTransitions:function(o){var pattern,state;var stateArray;var i;var transitions={};for(pattern in o){for(state in o[pattern]){stateArray=state.split("|");o[pattern][state].stateArray=stateArray;for(i=0;i<stateArray.length;i++){transitions[stateArray[i]]=[];}}}
for(pattern in o){for(state in o[pattern]){stateArray=o[pattern][state].stateArray||[];for(i=0;i<stateArray.length;i++){var p=o[pattern][state];if(p.action_){p.action_=[].concat(p.action_);for(var k=0;k<p.action_.length;k++){if(typeof p.action_[k]==="string"){p.action_[k]={type_:p.action_[k]};}}}else{p.action_=[];}
var patternArray=pattern.split("|");for(var j=0;j<patternArray.length;j++){if(stateArray[i]==="*"){for(var t in transitions){transitions[t].push({pattern:patternArray[j],task:p});}}else{transitions[stateArray[i]].push({pattern:patternArray[j],task:p});}}}}}
return transitions;},stateMachines:{}};mhchemParser.stateMachines={"ce":{transitions:mhchemParser.createTransitions({"empty":{"*":{action_:"output"}},"else":{"0|1|2":{action_:"beginsWithBond=false",revisit:true,toContinue:true}},"oxidation$":{"0":{action_:"oxidation-output"}},"CMT":{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},"arrowUpDown":{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},"uprightEntities":{"0|1|2":{action_:["o=","output"],nextState:"1"}},"orbital":{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{"o":{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},"q":{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},"dq":{action_:["output","d="],nextState:"d"},"3":{action_:["sb=false","output","operator"],nextState:"0"}},"amount":{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},"operator":{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},"d":{action_:"d=",nextState:"d"},"D":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},"q":{action_:"d=",nextState:"qd"},"qd":{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},"3":{action_:{type_:"bond",option:"-"}},"a":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},"as":{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},"b":{action_:"b="},"o":{action_:{type_:"- after o/d",option:false},nextState:"2"},"q":{action_:{type_:"- after o/d",option:false},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:true},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"amount2":{"1|3":{action_:"a=",nextState:"a"}},"letters":{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},"digits":{"o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q":{action_:["output","o="],nextState:"o"},"a":{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},"space":{"a":{nextState:"as"},"0":{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},"p":{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},"q":{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},"p":{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},"q":{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},"dq":{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},"b":{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{"a":{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},"others":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},"else2":{"a":{action_:"a to o",nextState:"o",revisit:true},"as":{action_:["output","sb=true"],nextState:"1",revisit:true},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:true},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(buffer,m){var ret;if((buffer.d||"").match(/^[0-9]+$/)){var tmp=buffer.d;buffer.d=void 0;ret=this["output"](buffer);buffer.b=tmp;}else{ret=this["output"](buffer);}
mhchemParser.actions["o="](buffer,m);return ret;},"d= kv":function(buffer,m){buffer.d=m;buffer.dType="kv";},"charge or bond":function(buffer,m){if(buffer["beginsWithBond"]){var ret=[];mhchemParser.concatArray(ret,this["output"](buffer));mhchemParser.concatArray(ret,mhchemParser.actions["bond"](buffer,m,"-"));return ret;}else{buffer.d=m;}},"- after o/d":function(buffer,m,isAfterD){var c1=mhchemParser.patterns.match_("orbital",buffer.o||"");var c2=mhchemParser.patterns.match_("one lowercase greek letter $",buffer.o||"");var c3=mhchemParser.patterns.match_("one lowercase latin letter $",buffer.o||"");var c4=mhchemParser.patterns.match_("$one lowercase latin letter$ $",buffer.o||"");var hyphenFollows=m==="-"&&(c1&&c1.remainder===""||c2||c3||c4);if(hyphenFollows&&!buffer.a&&!buffer.b&&!buffer.p&&!buffer.d&&!buffer.q&&!c1&&c3){buffer.o="$"+buffer.o+"$";}
var ret=[];if(hyphenFollows){mhchemParser.concatArray(ret,this["output"](buffer));ret.push({type_:"hyphen"});}else{c1=mhchemParser.patterns.match_("digits",buffer.d||"");if(isAfterD&&c1&&c1.remainder===""){mhchemParser.concatArray(ret,mhchemParser.actions["d="](buffer,m));mhchemParser.concatArray(ret,this["output"](buffer));}else{mhchemParser.concatArray(ret,this["output"](buffer));mhchemParser.concatArray(ret,mhchemParser.actions["bond"](buffer,m,"-"));}}
return ret;},"a to o":function(buffer){buffer.o=buffer.a;buffer.a=void 0;},"sb=true":function(buffer){buffer.sb=true;},"sb=false":function(buffer){buffer.sb=false;},"beginsWithBond=true":function(buffer){buffer["beginsWithBond"]=true;},"beginsWithBond=false":function(buffer){buffer["beginsWithBond"]=false;},"parenthesisLevel++":function(buffer){buffer["parenthesisLevel"]++;},"parenthesisLevel--":function(buffer){buffer["parenthesisLevel"]--;},"state of aggregation":function(buffer,m){return{type_:"state of aggregation",p1:mhchemParser.go(m,"o")};},"comma":function(buffer,m){var a=m.replace(/\s*$/,"");var withSpace=a!==m;if(withSpace&&buffer["parenthesisLevel"]===0){return{type_:"comma enumeration L",p1:a};}else{return{type_:"comma enumeration M",p1:a};}},"output":function(buffer,m,entityFollows){var ret;if(!buffer.r){ret=[];if(!buffer.a&&!buffer.b&&!buffer.p&&!buffer.o&&!buffer.q&&!buffer.d&&!entityFollows){}else{if(buffer.sb){ret.push({type_:"entitySkip"});}
if(!buffer.o&&!buffer.q&&!buffer.d&&!buffer.b&&!buffer.p&&entityFollows!==2){buffer.o=buffer.a;buffer.a=void 0;}else if(!buffer.o&&!buffer.q&&!buffer.d&&(buffer.b||buffer.p)){buffer.o=buffer.a;buffer.d=buffer.b;buffer.q=buffer.p;buffer.a=buffer.b=buffer.p=void 0;}else{if(buffer.o&&buffer.dType==="kv"&&mhchemParser.patterns.match_("d-oxidation$",buffer.d||"")){buffer.dType="oxidation";}else if(buffer.o&&buffer.dType==="kv"&&!buffer.q){buffer.dType=void 0;}}
ret.push({type_:"chemfive",a:mhchemParser.go(buffer.a,"a"),b:mhchemParser.go(buffer.b,"bd"),p:mhchemParser.go(buffer.p,"pq"),o:mhchemParser.go(buffer.o,"o"),q:mhchemParser.go(buffer.q,"pq"),d:mhchemParser.go(buffer.d,buffer.dType==="oxidation"?"oxidation":"bd"),dType:buffer.dType});}}else{var rd;if(buffer.rdt==="M"){rd=mhchemParser.go(buffer.rd,"tex-math");}else if(buffer.rdt==="T"){rd=[{type_:"text",p1:buffer.rd||""}];}else{rd=mhchemParser.go(buffer.rd);}
var rq;if(buffer.rqt==="M"){rq=mhchemParser.go(buffer.rq,"tex-math");}else if(buffer.rqt==="T"){rq=[{type_:"text",p1:buffer.rq||""}];}else{rq=mhchemParser.go(buffer.rq);}
ret={type_:"arrow",r:buffer.r,rd,rq};}
for(var p in buffer){if(p!=="parenthesisLevel"&&p!=="beginsWithBond"){delete buffer[p];}}
return ret;},"oxidation-output":function(buffer,m){var ret=["{"];mhchemParser.concatArray(ret,mhchemParser.go(m,"oxidation"));ret.push("}");return ret;},"frac-output":function(buffer,m){return{type_:"frac-ce",p1:mhchemParser.go(m[0]),p2:mhchemParser.go(m[1])};},"overset-output":function(buffer,m){return{type_:"overset",p1:mhchemParser.go(m[0]),p2:mhchemParser.go(m[1])};},"underset-output":function(buffer,m){return{type_:"underset",p1:mhchemParser.go(m[0]),p2:mhchemParser.go(m[1])};},"underbrace-output":function(buffer,m){return{type_:"underbrace",p1:mhchemParser.go(m[0]),p2:mhchemParser.go(m[1])};},"color-output":function(buffer,m){return{type_:"color",color1:m[0],color2:mhchemParser.go(m[1])};},"r=":function(buffer,m){buffer.r=m;},"rdt=":function(buffer,m){buffer.rdt=m;},"rd=":function(buffer,m){buffer.rd=m;},"rqt=":function(buffer,m){buffer.rqt=m;},"rq=":function(buffer,m){buffer.rq=m;},"operator":function(buffer,m,p1){return{type_:"operator",kind_:p1||m};}}},"a":{transitions:mhchemParser.createTransitions({"empty":{"*":{}},"1/2$":{"0":{action_:"1/2"}},"else":{"0":{nextState:"1",revisit:true}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},"else2":{"*":{action_:"copy"}}}),actions:{}},"o":{transitions:mhchemParser.createTransitions({"empty":{"*":{}},"1/2$":{"0":{action_:"1/2"}},"else":{"0":{nextState:"1",revisit:true}},"letters":{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},"else2":{"*":{action_:"copy"}}}),actions:{}},"text":{transitions:mhchemParser.createTransitions({"empty":{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},"else":{"*":{action_:"text="}}}),actions:{output:function(buffer){if(buffer.text_){var ret={type_:"text",p1:buffer.text_};for(var p in buffer){delete buffer[p];}
return ret;}}}},"pq":{transitions:mhchemParser.createTransitions({"empty":{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},"i$":{"0":{nextState:"!f",revisit:true}},"(KV letters),":{"0":{action_:"rm",nextState:"0"}},"formula$":{"0":{nextState:"f",revisit:true}},"1/2$":{"0":{action_:"1/2"}},"else":{"0":{nextState:"!f",revisit:true}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},"letters":{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"else2":{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(buffer,m){return{type_:"state of aggregation subscript",p1:mhchemParser.go(m,"o")};},"color-output":function(buffer,m){return{type_:"color",color1:m[0],color2:mhchemParser.go(m[1],"pq")};}}},"bd":{transitions:mhchemParser.createTransitions({"empty":{"*":{}},"x$":{"0":{nextState:"!f",revisit:true}},"formula$":{"0":{nextState:"f",revisit:true}},"else":{"0":{nextState:"!f",revisit:true}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},"x":{"*":{action_:{type_:"insert",option:"KV x"}}},"letters":{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"else2":{"*":{action_:"copy"}}}),actions:{"color-output":function(buffer,m){return{type_:"color",color1:m[0],color2:mhchemParser.go(m[1],"bd")};}}},"oxidation":{transitions:mhchemParser.createTransitions({"empty":{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"else":{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(buffer,m){return{type_:"roman numeral",p1:m||""};}}},"tex-math":{transitions:mhchemParser.createTransitions({"empty":{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"else":{"*":{action_:"o="}}}),actions:{output:function(buffer){if(buffer.o){var ret={type_:"tex-math",p1:buffer.o};for(var p in buffer){delete buffer[p];}
return ret;}}}},"tex-math tight":{transitions:mhchemParser.createTransitions({"empty":{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},"else":{"*":{action_:"o="}}}),actions:{"tight operator":function(buffer,m){buffer.o=(buffer.o||"")+"{"+m+"}";},"output":function(buffer){if(buffer.o){var ret={type_:"tex-math",p1:buffer.o};for(var p in buffer){delete buffer[p];}
return ret;}}}},"9,9":{transitions:mhchemParser.createTransitions({"empty":{"*":{}},",":{"*":{action_:"comma"}},"else":{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"};}}},"pu":{transitions:mhchemParser.createTransitions({"empty":{"*":{action_:"output"}},"space$":{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{"0":{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{"0":{action_:"enumber",nextState:"a"}},"space":{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},"operator":{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},"a":{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{"enumber":function(buffer,m){var ret=[];if(m[0]==="+-"||m[0]==="+/-"){ret.push("\\pm ");}else if(m[0]){ret.push(m[0]);}
if(m[1]){mhchemParser.concatArray(ret,mhchemParser.go(m[1],"pu-9,9"));if(m[2]){if(m[2].match(/[,.]/)){mhchemParser.concatArray(ret,mhchemParser.go(m[2],"pu-9,9"));}else{ret.push(m[2]);}}
if(m[3]||m[4]){if(m[3]==="e"||m[4]==="*"){ret.push({type_:"cdot"});}else{ret.push({type_:"times"});}}}
if(m[5]){ret.push("10^{"+m[5]+"}");}
return ret;},"number^":function(buffer,m){var ret=[];if(m[0]==="+-"||m[0]==="+/-"){ret.push("\\pm ");}else if(m[0]){ret.push(m[0]);}
mhchemParser.concatArray(ret,mhchemParser.go(m[1],"pu-9,9"));ret.push("^{"+m[2]+"}");return ret;},"operator":function(buffer,m,p1){return{type_:"operator",kind_:p1||m};},"space":function(){return{type_:"pu-space-1"};},"output":function(buffer){var ret;var md=mhchemParser.patterns.match_("{(...)}",buffer.d||"");if(md&&md.remainder===""){buffer.d=md.match_;}
var mq=mhchemParser.patterns.match_("{(...)}",buffer.q||"");if(mq&&mq.remainder===""){buffer.q=mq.match_;}
if(buffer.d){buffer.d=buffer.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C");buffer.d=buffer.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");}
if(buffer.q){buffer.q=buffer.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C");buffer.q=buffer.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var b5={d:mhchemParser.go(buffer.d,"pu"),q:mhchemParser.go(buffer.q,"pu")};if(buffer.o==="//"){ret={type_:"pu-frac",p1:b5.d,p2:b5.q};}else{ret=b5.d;if(b5.d.length>1||b5.q.length>1){ret.push({type_:" / "});}else{ret.push({type_:"/"});}
mhchemParser.concatArray(ret,b5.q);}}else{ret=mhchemParser.go(buffer.d,"pu-2");}
for(var p in buffer){delete buffer[p];}
return ret;}}},"pu-2":{transitions:mhchemParser.createTransitions({"empty":{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},"space":{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{"1":{action_:"^(-1)"}},"-9.,9":{"0":{action_:"rm=",nextState:"0"},"1":{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{"cdot":function(){return{type_:"tight cdot"};},"^(-1)":function(buffer,m){buffer.rm+="^{"+m+"}";},"space":function(){return{type_:"pu-space-2"};},"output":function(buffer){var ret=[];if(buffer.rm){var mrm=mhchemParser.patterns.match_("{(...)}",buffer.rm||"");if(mrm&&mrm.remainder===""){ret=mhchemParser.go(mrm.match_,"pu");}else{ret={type_:"rm",p1:buffer.rm};}}
for(var p in buffer){delete buffer[p];}
return ret;}}},"pu-9,9":{transitions:mhchemParser.createTransitions({"empty":{"0":{action_:"output-0"},"o":{action_:"output-o"}},",":{"0":{action_:["output-0","comma"],nextState:"o"}},".":{"0":{action_:["output-0","copy"],nextState:"o"}},"else":{"*":{action_:"text="}}}),actions:{"comma":function(){return{type_:"commaDecimal"};},"output-0":function(buffer){var ret=[];buffer.text_=buffer.text_||"";if(buffer.text_.length>4){var a=buffer.text_.length%3;if(a===0){a=3;}
for(var i=buffer.text_.length-3;i>0;i-=3){ret.push(buffer.text_.substr(i,3));ret.push({type_:"1000 separator"});}
ret.push(buffer.text_.substr(0,a));ret.reverse();}else{ret.push(buffer.text_);}
for(var p in buffer){delete buffer[p];}
return ret;},"output-o":function(buffer){var ret=[];buffer.text_=buffer.text_||"";if(buffer.text_.length>4){var a=buffer.text_.length-3;for(var i=0;i<a;i+=3){ret.push(buffer.text_.substr(i,3));ret.push({type_:"1000 separator"});}
ret.push(buffer.text_.substr(i));}else{ret.push(buffer.text_);}
for(var p in buffer){delete buffer[p];}
return ret;}}}};var texify={go:function(input,isInner){if(!input){return"";}
var res="";var cee=false;for(var i=0;i<input.length;i++){var inputi=input[i];if(typeof inputi==="string"){res+=inputi;}else{res+=texify._go2(inputi);if(inputi.type_==="1st-level escape"){cee=true;}}}
if(!isInner&&!cee&&res){res="{"+res+"}";}
return res;},_goInner:function(input){if(!input){return input;}
return texify.go(input,true);},_go2:function(buf){var res;switch(buf.type_){case"chemfive":res="";var b5={a:texify._goInner(buf.a),b:texify._goInner(buf.b),p:texify._goInner(buf.p),o:texify._goInner(buf.o),q:texify._goInner(buf.q),d:texify._goInner(buf.d)};if(b5.a){if(b5.a.match(/^[+\-]/)){b5.a="{"+b5.a+"}";}
res+=b5.a+"\\,";}
if(b5.b||b5.p){res+="{\\vphantom{X}}";res+="^{\\hphantom{"+(b5.b||"")+"}}_{\\hphantom{"+(b5.p||"")+"}}";res+="{\\vphantom{X}}";res+="^{\\smash[t]{\\vphantom{2}}\\llap{"+(b5.b||"")+"}}";res+="_{\\vphantom{2}\\llap{\\smash[t]{"+(b5.p||"")+"}}}";}
if(b5.o){if(b5.o.match(/^[+\-]/)){b5.o="{"+b5.o+"}";}
res+=b5.o;}
if(buf.dType==="kv"){if(b5.d||b5.q){res+="{\\vphantom{X}}";}
if(b5.d){res+="^{"+b5.d+"}";}
if(b5.q){res+="_{\\smash[t]{"+b5.q+"}}";}}else if(buf.dType==="oxidation"){if(b5.d){res+="{\\vphantom{X}}";res+="^{"+b5.d+"}";}
if(b5.q){res+="{\\vphantom{X}}";res+="_{\\smash[t]{"+b5.q+"}}";}}else{if(b5.q){res+="{\\vphantom{X}}";res+="_{\\smash[t]{"+b5.q+"}}";}
if(b5.d){res+="{\\vphantom{X}}";res+="^{"+b5.d+"}";}}
break;case"rm":res="\\mathrm{"+buf.p1+"}";break;case"text":if(buf.p1.match(/[\^_]/)){buf.p1=buf.p1.replace(" ","~").replace("-","\\text{-}");res="\\mathrm{"+buf.p1+"}";}else{res="\\text{"+buf.p1+"}";}
break;case"roman numeral":res="\\mathrm{"+buf.p1+"}";break;case"state of aggregation":res="\\mskip2mu "+texify._goInner(buf.p1);break;case"state of aggregation subscript":res="\\mskip1mu "+texify._goInner(buf.p1);break;case"bond":res=texify._getBond(buf.kind_);if(!res){throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+buf.kind_+")"];}
break;case"frac":var c="\\frac{"+buf.p1+"}{"+buf.p2+"}";res="\\mathchoice{\\textstyle"+c+"}{"+c+"}{"+c+"}{"+c+"}";break;case"pu-frac":var d="\\frac{"+texify._goInner(buf.p1)+"}{"+texify._goInner(buf.p2)+"}";res="\\mathchoice{\\textstyle"+d+"}{"+d+"}{"+d+"}{"+d+"}";break;case"tex-math":res=buf.p1+" ";break;case"frac-ce":res="\\frac{"+texify._goInner(buf.p1)+"}{"+texify._goInner(buf.p2)+"}";break;case"overset":res="\\overset{"+texify._goInner(buf.p1)+"}{"+texify._goInner(buf.p2)+"}";break;case"underset":res="\\underset{"+texify._goInner(buf.p1)+"}{"+texify._goInner(buf.p2)+"}";break;case"underbrace":res="\\underbrace{"+texify._goInner(buf.p1)+"}_{"+texify._goInner(buf.p2)+"}";break;case"color":res="{\\color{"+buf.color1+"}{"+texify._goInner(buf.color2)+"}}";break;case"color0":res="\\color{"+buf.color+"}";break;case"arrow":var b6={rd:texify._goInner(buf.rd),rq:texify._goInner(buf.rq)};var arrow=texify._getArrow(buf.r);if(b6.rd||b6.rq){if(buf.r==="<=>"||buf.r==="<=>>"||buf.r==="<<=>"||buf.r==="<-->"){arrow="\\long"+arrow;if(b6.rd){arrow="\\overset{"+b6.rd+"}{"+arrow+"}";}
if(b6.rq){if(buf.r==="<-->"){arrow="\\underset{\\lower2mu{"+b6.rq+"}}{"+arrow+"}";}else{arrow="\\underset{\\lower6mu{"+b6.rq+"}}{"+arrow+"}";}}
arrow=" {}\\mathrel{"+arrow+"}{} ";}else{if(b6.rq){arrow+="[{"+b6.rq+"}]";}
arrow+="{"+b6.rd+"}";arrow=" {}\\mathrel{\\x"+arrow+"}{} ";}}else{arrow=" {}\\mathrel{\\long"+arrow+"}{} ";}
res=arrow;break;case"operator":res=texify._getOperator(buf.kind_);break;case"1st-level escape":res=buf.p1+" ";break;case"space":res=" ";break;case"entitySkip":res="~";break;case"pu-space-1":res="~";break;case"pu-space-2":res="\\mkern3mu ";break;case"1000 separator":res="\\mkern2mu ";break;case"commaDecimal":res="{,}";break;case"comma enumeration L":res="{"+buf.p1+"}\\mkern6mu ";break;case"comma enumeration M":res="{"+buf.p1+"}\\mkern3mu ";break;case"comma enumeration S":res="{"+buf.p1+"}\\mkern1mu ";break;case"hyphen":res="\\text{-}";break;case"addition compound":res="\\,{\\cdot}\\,";break;case"electron dot":res="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":res="{\\times}";break;case"prime":res="\\prime ";break;case"cdot":res="\\cdot ";break;case"tight cdot":res="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":res="\\times ";break;case"circa":res="{\\sim}";break;case"^":res="uparrow";break;case"v":res="downarrow";break;case"ellipsis":res="\\ldots ";break;case"/":res="/";break;case" / ":res="\\,/\\,";break;default:assertNever(buf);throw["MhchemBugT","mhchem bug T. Please report."];}
assertString(res);return res;},_getArrow:function(a){switch(a){case"->":return"rightarrow";case"\u2192":return"rightarrow";case"\u27F6":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<-->":return"leftrightarrows";case"<=>":return"rightleftharpoons";case"\u21CC":return"rightleftharpoons";case"<=>>":return"Rightleftharpoons";case"<<=>":return"Leftrightharpoons";default:assertNever(a);throw["MhchemBugT","mhchem bug T. Please report."];}},_getBond:function(a){switch(a){case"-":return"{-}";case"1":return"{-}";case"=":return"{=}";case"2":return"{=}";case"#":return"{\\equiv}";case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\rlap{\\lower.1em{-}}\\raise.1em{\\tripledash}}";case"~=":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"~--":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"-~-":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{-}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:assertNever(a);throw["MhchemBugT","mhchem bug T. Please report."];}},_getOperator:function(a){switch(a){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":return" {}\\approx{} ";case"$\\approx$":return" {}\\approx{} ";case"v":return" \\downarrow{} ";case"(v)":return" \\downarrow{} ";case"^":return" \\uparrow{} ";case"(^)":return" \\uparrow{} ";default:assertNever(a);throw["MhchemBugT","mhchem bug T. Please report."];}}};function assertNever(a){}
function assertString(a){}
var MiddleDelimAtom=class _MiddleDelimAtom extends Atom{constructor(options){super(__spreadProps(__spreadValues({},options),{type:"delim"}));this.value=options.delim;this.size=options.size;}
static fromJson(json){return new _MiddleDelimAtom(json);}
toJson(){return __spreadProps(__spreadValues({},super.toJson()),{delim:this.value,size:this.size});}
render(_context){return new Box(this.value,{type:"middle"});}
_serialize(options){if(!(options.expandMacro||options.skipStyles||options.skipPlaceholders)&&typeof this.verbatimLatex==="string")
return this.verbatimLatex;const def=getDefinition(this.command,this.mode);if(def==null?void 0:def.serialize)return def.serialize(this,options);return latexCommand(this.command,this.value);}};var SizedDelimAtom=class _SizedDelimAtom extends Atom{constructor(options){super(__spreadProps(__spreadValues({},options),{type:"sizeddelim",value:options.delim}));this.delimType=options.delimType;this.size=options.size;}
static fromJson(json){return new _SizedDelimAtom(json);}
toJson(){return __spreadProps(__spreadValues({},super.toJson()),{delim:this.value,size:this.size,delimType:this.delimType});}
render(context){let result=makeSizedDelim(this.value,this.size,context,{classes:{open:"ML__open",close:"ML__close"}[this.delimType],type:this.delimType,isSelected:this.isSelected});if(!result)return null;result=this.bind(context,result);if(this.caret)result.caret=this.caret;return result;}
_serialize(options){if(!(options.expandMacro||options.skipStyles||options.skipPlaceholders)&&typeof this.verbatimLatex==="string")
return this.verbatimLatex;const def=getDefinition(this.command,this.mode);if(def==null?void 0:def.serialize)return def.serialize(this,options);return latexCommand(this.command,this.value);}};var EncloseAtom=class _EncloseAtom extends Atom{constructor(command,body,notation,options){var _a3,_b3;super({type:"enclose",command,style:options.style});this.body=body;this.backgroundcolor=options.backgroundcolor;if(notation.updiagonalarrow)notation.updiagonalstrike=false;if(notation.box){notation.left=false;notation.right=false;notation.bottom=false;notation.top=false;}
this.notation=notation;this.shadow=(_a3=options.shadow)!=null?_a3:"none";this.strokeWidth=(_b3=options.strokeWidth)!=null?_b3:"0.06em";if(!this.strokeWidth)this.strokeWidth="0.06em";this.strokeStyle=options.strokeStyle;this.svgStrokeStyle=options.svgStrokeStyle;this.strokeColor=options.strokeColor;this.borderStyle=options.borderStyle;this.padding=options.padding;this.captureSelection=false;}
static fromJson(json){return new _EncloseAtom(json.command,json.body,json.notation,json);}
toJson(){return __spreadProps(__spreadValues({},super.toJson()),{notation:this.notation,shadow:this.shadow,strokeWidth:this.strokeWidth,strokeStyle:this.strokeStyle,svgStrokeStyle:this.svgStrokeStyle,strokeColor:this.strokeColor,borderStyle:this.borderStyle,padding:this.padding});}
_serialize(options){var _a3;if(!(options.expandMacro||options.skipStyles||options.skipPlaceholders)&&typeof this.verbatimLatex==="string")
return this.verbatimLatex;const def=getDefinition(this.command,this.mode);if(def==null?void 0:def.serialize)return def.serialize(this,options);let command=(_a3=this.command)!=null?_a3:"";if(this.command==="\\enclose"){command+="{"+Object.keys(this.notation).join(" ")+"}";let style="";let sep="";if(this.backgroundcolor&&this.backgroundcolor!=="transparent"){style+=sep+'mathbackground="'+this.backgroundcolor+'"';sep=",";}
if(this.shadow&&this.shadow!=="auto"){style+=sep+'shadow="'+this.shadow+'"';sep=",";}
if(this.strokeWidth||this.strokeStyle!=="solid"){style+=sep+this.borderStyle;sep=",";}else if(this.strokeColor&&this.strokeColor!=="currentColor"){style+=sep+'mathcolor="'+this.strokeColor+'"';sep=",";}
if(style)command+=`[${style}]`;}
return latexCommand(command,this.bodyToLatex(options));}
render(parentContext){const context=new Context({parent:parentContext},this.style);const base=Atom.createBox(context,this.body);if(!base)return null;const borderWidth=borderDim(this.borderStyle);const padding2=context.toEm(!this.padding||this.padding==="auto"?{register:"fboxsep"}:{string:this.padding});base.setStyle("position","relative");base.setStyle("display","inline-block");base.setStyle("top",padding2,"em");base.setStyle("height",base.height+base.depth,"em");base.setStyle("width",base.width,"em");const notation=new Box(null,{classes:"ML__notation"});let h=base.height+base.depth+2*padding2;const w=base.width+2*padding2;let svg="";if(this.notation.horizontalstrike)svg+=this.line(3,50,97,50);if(this.notation.verticalstrike)svg+=this.line(50,3,50,97);if(this.notation.updiagonalstrike)svg+=this.line(3,97,97,3);if(this.notation.downdiagonalstrike)svg+=this.line(3,3,97,97);if(this.notation.updiagonalarrow){svg+=this.line(padding2.toString(),(padding2+base.depth+base.height).toString(),(padding2+base.width).toString(),padding2.toString());const t=1;const length=Math.sqrt(w*w+h*h);const f=0.03*length*t;const wf=base.width*f;const hf=(base.depth+base.height)*f;const x=padding2+base.width;let y=padding2;if(y+hf-0.4*wf<0)y=0.4*wf-hf;svg+='<polygon points="';svg+=`${x},${y} ${x - wf - 0.4 * hf},${y + hf - 0.4 * wf} `;svg+=`${x - 0.7 * wf},${y + 0.7 * hf} ${x - wf + 0.4 * hf},${y + hf + 0.4 * wf} `;svg+=`${x},${y}`;svg+=`" stroke='none' fill="${this.strokeColor}"`;svg+="/>";}
let wDelta=0;if(this.notation.phasorangle){const clearance=getClearance(context);const bot=(base.height+base.depth+2*clearance+padding2).toString();const angleWidth=(base.height+base.depth)/2;svg+=this.line(padding2.toString(),bot,(padding2+angleWidth+base.width).toString(),bot);svg+=this.line(padding2.toString(),bot,(padding2+angleWidth).toString(),(padding2-clearance).toString());h+=clearance;wDelta=angleWidth;base.left+=h/2-padding2;}
if(this.notation.longdiv){const clearance=getClearance(context);h+=clearance;svg+=this.line(padding2.toString(),padding2.toString(),(padding2+base.width).toString(),padding2.toString());const surdWidth=0.3;wDelta=surdWidth+clearance;base.left+=surdWidth+clearance;base.setTop(padding2+clearance);svg+='<path d="';svg+=`M ${padding2} ${padding2}  a${surdWidth} ${(base.depth + base.height + 2 * clearance) / 2}, 0, 1, 1, 0 ${base.depth + base.height + 2 * clearance} "`;svg+=` stroke-width="${getRuleThickness(context)}" stroke="${this.strokeColor}" fill="none"`;svg+="/>";}
notation.width=base.width+2*padding2+wDelta;notation.height=base.height+padding2;notation.depth=base.depth+padding2;notation.setStyle("box-sizing","border-box");notation.setStyle("left",`calc(-${borderWidth} / 2 )`);notation.setStyle("height",`${Math.floor(100 * h) / 100}em`);notation.setStyle("top",`calc(${borderWidth} / 2 )`);if(this.backgroundcolor)
notation.setStyle("background-color",this.backgroundcolor);if(this.notation.box)notation.setStyle("border","1px solid red");if(this.notation.actuarial){notation.setStyle("border-top",this.borderStyle);notation.setStyle("border-right",this.borderStyle);}
if(this.notation.madruwb){notation.setStyle("border-bottom",this.borderStyle);notation.setStyle("border-right",this.borderStyle);}
if(this.notation.roundedbox){notation.setStyle("border-radius","8px");notation.setStyle("border",this.borderStyle);}
if(this.notation.circle){notation.setStyle("border-radius","50%");notation.setStyle("border",this.borderStyle);}
if(this.notation.top)notation.setStyle("border-top",this.borderStyle);if(this.notation.left)notation.setStyle("border-left",this.borderStyle);if(this.notation.right)
notation.setStyle("border-right",this.borderStyle);if(this.notation.bottom)
notation.setStyle("border-bottom",this.borderStyle);if(svg){let svgStyle="";if(this.shadow==="auto"){svgStyle+="filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)";}
if(this.shadow!=="none")
svgStyle+=`filter: drop-shadow(${this.shadow})`;svgStyle+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`;svgStyle+=' stroke-linecap="round"';if(this.svgStrokeStyle)
svgStyle+=` stroke-dasharray="${this.svgStrokeStyle}"`;notation.svgStyle=svgStyle;notation.svgOverlay=svg;}
const result=new Box([notation,base]);result.setStyle("position","relative");result.setStyle("vertical-align",padding2,"em");result.setStyle("height",`${Math.floor(100 * (base.height + base.depth + 2 * padding2)) / 100}em`);result.setStyle("display","inline-block");result.height=notation.height;result.depth=notation.depth;result.width=notation.width-2*padding2;result.left=padding2;result.right=padding2;if(this.caret)result.caret=this.caret;return result.wrap(context);}
line(x1,y1,x2,y2){return`<line x1="${coord(x1)}"  y1="${coord(y1)}" x2="${coord(
        x2
      )}" y2="${coord(y2)}" vector-effect="non-scaling-stroke"></line>`;}};function coord(c){if(typeof c==="number")return`${Math.floor(100 * c) / 100}%`;return c;}
function borderDim(s){if(!s)return"1px";const m=s.match(/([0-9][a-zA-Z\%]+)/);if(m===null)return"1px";return m[1];}
function getRuleThickness(ctx){return(Math.floor(100*ctx.metrics.sqrtRuleThickness/ctx.scalingFactor)/100/10).toString()+"em";}
function getClearance(ctx){const phi=ctx.isDisplayStyle?X_HEIGHT:ctx.metrics.defaultRuleThickness;return ctx.metrics.defaultRuleThickness+ctx.scalingFactor*phi/4;}
var _MathEnvironment={fractionNavigationOrder:"numerator-denominator"};var GenfracAtom=class _GenfracAtom extends Atom{constructor(above,below,options){var _a3,_b3,_c2;super(__spreadProps(__spreadValues({},options),{type:"genfrac",displayContainsHighlight:true}));this.above=above;this.below=below;this.hasBarLine=(_a3=options==null?void 0:options.hasBarLine)!=null?_a3:true;this.continuousFraction=(_b3=options==null?void 0:options.continuousFraction)!=null?_b3:false;this.align=(_c2=options==null?void 0:options.align)!=null?_c2:"center";this.numerPrefix=options==null?void 0:options.numerPrefix;this.denomPrefix=options==null?void 0:options.denomPrefix;this.mathstyleName=options==null?void 0:options.mathstyleName;this.leftDelim=options==null?void 0:options.leftDelim;this.rightDelim=options==null?void 0:options.rightDelim;}
static fromJson(json){return new _GenfracAtom(json.above,json.below,json);}
toJson(){const options={};if(this.continuousFraction)options.continuousFraction=true;if(this.align!=="center")options.align=this.align;if(this.numerPrefix)options.numerPrefix=this.numerPrefix;if(this.denomPrefix)options.denomPrefix=this.denomPrefix;if(this.leftDelim)options.leftDelim=this.leftDelim;if(this.rightDelim)options.rightDelim=this.rightDelim;if(!this.hasBarLine)options.hasBarLine=false;if(this.mathstyleName)options.mathstyleName=this.mathstyleName;return __spreadValues(__spreadValues({},super.toJson()),options);}
get children(){if(this._children)return this._children;const result=[];if(_MathEnvironment.fractionNavigationOrder==="denominator-numerator"){for(const x of this.below){result.push(...x.children);result.push(x);}
for(const x of this.above){result.push(...x.children);result.push(x);}}else{for(const x of this.above){result.push(...x.children);result.push(x);}
for(const x of this.below){result.push(...x.children);result.push(x);}}
this._children=result;return result;}
render(context){var _a3,_b3;const fracContext=new Context({parent:context,mathstyle:this.mathstyleName},this.style);const metrics=fracContext.metrics;const numContext=new Context({parent:fracContext,mathstyle:this.continuousFraction?"":"numerator"},this.style);const numerBox=this.numerPrefix?new Box([new Box(this.numerPrefix),Atom.createBox(numContext,this.above)],{isTight:numContext.isTight,type:"ignore"}):(_a3=Atom.createBox(numContext,this.above,{type:"ignore"}))!=null?_a3:new Box(null,{type:"ignore"});const denomContext=new Context({parent:fracContext,mathstyle:this.continuousFraction?"":"denominator"},this.style);const denomBox=this.denomPrefix?new Box([new Box(this.denomPrefix),Atom.createBox(denomContext,this.below,{type:"ignore"})]):(_b3=Atom.createBox(denomContext,this.below,{type:"ignore"}))!=null?_b3:new Box(null,{type:"ignore"});const ruleThickness=this.hasBarLine?metrics.defaultRuleThickness:0;let numerShift;let clearance=0;let denomShift;if(fracContext.isDisplayStyle){numerShift=numContext.metrics.num1;clearance=ruleThickness>0?3*ruleThickness:7*ruleThickness;denomShift=denomContext.metrics.denom1;}else{if(ruleThickness>0){numerShift=numContext.metrics.num2;clearance=ruleThickness;}else{numerShift=numContext.metrics.num3;clearance=3*metrics.defaultRuleThickness;}
denomShift=denomContext.metrics.denom2;}
const classes=[];if(this.isSelected)classes.push("ML__selected");const numerDepth=numerBox.depth;const denomHeight=denomBox.height;let frac;if(ruleThickness<=0){const candidateClearance=numerShift-numerDepth-(denomHeight-denomShift);if(candidateClearance<clearance){numerShift+=(clearance-candidateClearance)/2;denomShift+=(clearance-candidateClearance)/2;}
frac=new VBox({individualShift:[{box:numerBox,shift:-numerShift,classes:[...classes,align2(this.align)]},{box:denomBox,shift:denomShift,classes:[...classes,align2(this.align)]}]}).wrap(fracContext);}else{const fracLine=new Box(null,{classes:"ML__frac-line",mode:this.mode,style:this.style});fracLine.softWidth=Math.max(numerBox.width,denomBox.width);fracLine.height=ruleThickness/2;fracLine.depth=ruleThickness/2;const numerLine=AXIS_HEIGHT+ruleThickness/2;if(numerShift<clearance+numerDepth+numerLine)
numerShift=clearance+numerDepth+numerLine;const denomLine=AXIS_HEIGHT-ruleThickness/2;if(denomShift<clearance+denomHeight-denomLine)
denomShift=clearance+denomHeight-denomLine;frac=new VBox({individualShift:[{box:denomBox,shift:denomShift,classes:[...classes,align2(this.align)]},{box:fracLine,shift:-denomLine,classes},{box:numerBox,shift:-numerShift,classes:[...classes,align2(this.align)]}]}).wrap(fracContext);}
const delimSize=fracContext.isDisplayStyle?metrics.delim1:metrics.delim2;const leftDelim=this.leftDelim?this.bind(context,makeCustomSizedDelim("open",this.leftDelim,delimSize,true,context,{style:this.style,mode:this.mode,isSelected:this.isSelected})):makeNullDelimiter(fracContext,"ML__open");let rightDelim=null;if(this.continuousFraction){rightDelim=new Box(null,{type:"close"});}else if(!this.rightDelim)
rightDelim=makeNullDelimiter(fracContext,"ML__close");else{rightDelim=this.bind(context,makeCustomSizedDelim("close",this.rightDelim,delimSize,true,context,{style:this.style,mode:this.mode,isSelected:this.isSelected}));}
const mfrac=new Box([leftDelim,frac,rightDelim],{isTight:fracContext.isTight,type:"inner",classes:"ML__mfrac"});const result=this.bind(context,mfrac);if(this.caret)result.caret=this.caret;return this.attachSupsub(context,{base:result});}};function align2(v){var _a3;return(_a3={left:"ML__left",right:"ML__right",center:"ML__center"}[v])!=null?_a3:"ML__center";}
var LatexAtom=class _LatexAtom extends Atom{constructor(value,options){var _a3;super({type:"latex",value,mode:"latex"});this.isSuggestion=(_a3=options==null?void 0:options.isSuggestion)!=null?_a3:false;this.isError=false;}
static fromJson(json){const result=new _LatexAtom(json.value);if(json.isSuggestion)result.isSuggestion=true;if(json.isError)result.isError=true;return result;}
toJson(){const options={};if(this.isSuggestion)options.isSuggestion=true;if(this.isError)options.isError=true;return __spreadValues({type:"latex",value:this.value},options);}
render(context){const result=new Box(this.value,{classes:this.isSuggestion?"ML__suggestion":this.isError?"ML__error":"",type:"latex",maxFontSize:1});if(!result)return null;if(this.caret)result.caret=this.caret;return this.bind(context,result);}};var LatexGroupAtom=class _LatexGroupAtom extends Atom{constructor(latex=""){super({type:"latexgroup",mode:"latex"});this.body=[...latex].map((c)=>new LatexAtom(c));this.skipBoundary=true;}
static fromJson(_json){return new _LatexGroupAtom();}
toJson(){return super.toJson();}
render(context){const box=Atom.createBox(context,this.body);if(!box)return null;if(this.caret)box.caret=this.caret;return this.bind(context,box);}
_serialize(_options){var _a3,_b3;return(_b3=(_a3=this.body)==null?void 0:_a3.map((x)=>x.value).join(""))!=null?_b3:"";}};var ExtensibleSymbolAtom=class _ExtensibleSymbolAtom extends Atom{constructor(symbol,options){super(__spreadProps(__spreadValues({},options),{type:"extensible-symbol",isFunction:options==null?void 0:options.isFunction}));this.value=symbol;this.variant=options==null?void 0:options.variant;this.subsupPlacement=options==null?void 0:options.limits;}
static fromJson(json){return new _ExtensibleSymbolAtom(json.symbol,json);}
toJson(){const result=super.toJson();if(this.variant)result.variant=this.variant;if(this.subsupPlacement)result.limits=this.subsupPlacement;if(this.value)result.symbol=this.value;return result;}
render(context){var _a3;const large=context.isDisplayStyle&&this.value!=="\\smallint";const base=new Box(this.value,{fontFamily:large?"Size2-Regular":"Size1-Regular",classes:"ML__op-symbol "+(large?"ML__large-op":"ML__small-op"),type:"op",maxFontSize:context.scalingFactor,isSelected:this.isSelected});if(!base)return null;base.right=base.italic;const baseShift=(base.height-base.depth)/2-AXIS_HEIGHT*context.scalingFactor;const slant=base.italic;base.setTop(baseShift);let result=base;if(this.superscript||this.subscript){let limits=(_a3=this.subsupPlacement)!=null?_a3:"auto";if(limits==="auto"&&context.isDisplayStyle)limits="over-under";result=limits==="over-under"?this.attachLimits(context,{base,baseShift,slant}):this.attachSupsub(context,{base});}
return new Box(this.bind(context,result),{type:"op",caret:this.caret,isSelected:this.isSelected,classes:"ML__op-group"}).wrap(context);}
_serialize(options){if(!(options.expandMacro||options.skipStyles||options.skipPlaceholders)&&typeof this.verbatimLatex==="string")
return this.verbatimLatex;const def=getDefinition(this.command,this.mode);if(def==null?void 0:def.serialize)return def.serialize(this,options);const result=[];result.push(this.command);if(this.explicitSubsupPlacement){if(this.subsupPlacement==="over-under")result.push("\\limits");if(this.subsupPlacement==="adjacent")result.push("\\nolimits");if(this.subsupPlacement==="auto")result.push("\\displaylimits");}
result.push(this.supsubToLatex(options));return joinLatex(result);}};var OverlapAtom=class _OverlapAtom extends Atom{constructor(options){const body=options.body;super(__spreadProps(__spreadValues({},options),{type:"overlap",body:typeof body==="string"?[new Atom({value:body})]:body,style:options==null?void 0:options.style}));this.skipBoundary=true;this.align=options==null?void 0:options.align;this.boxType=options==null?void 0:options.boxType;}
static fromJson(json){return new _OverlapAtom(json);}
toJson(){const options={};if(this.align)options.align=this.align;if(this.boxType)options.boxType=this.boxType;return __spreadValues(__spreadValues({},super.toJson()),options);}
render(context){const inner=Atom.createBox(context,this.body,{classes:"ML__inner"});if(!inner)return null;if(this.caret)inner.caret=this.caret;return this.bind(context,new Box([inner,new Box(null,{classes:"ML__fix"})],{classes:this.align==="right"?"ML__rlap":"ML__llap",type:this.boxType}));}};var OverunderAtom=class _OverunderAtom extends Atom{constructor(options){var _a3,_b3,_c2,_d2;super({type:"overunder",command:options.command,style:options.style,mode:options.mode,body:options.body,skipBoundary:(_a3=options.skipBoundary)!=null?_a3:true});this.subsupPlacement=options.supsubPlacement;this.svgAbove=options.svgAbove;this.svgBelow=options.svgBelow;this.svgBody=options.svgBody;this.above=options.above;this.below=options.below;this.boxType=(_b3=options.boxType)!=null?_b3:"ord";this.paddedBody=(_c2=options.paddedBody)!=null?_c2:false;this.paddedLabels=(_d2=options.paddedLabels)!=null?_d2:false;}
static fromJson(json){return new _OverunderAtom(json);}
toJson(){const json=super.toJson();if(!this.skipBoundary)json.skipBoundary=false;if(this.subsupPlacement)json.subsupPlacement=this.subsupPlacement;if(this.svgAbove)json.svgAbove=this.svgAbove;if(this.svgBelow)json.svgBelow=this.svgBelow;if(this.svgBody)json.svgBody=this.svgBody;if(this.boxType!=="ord")json.boxType=this.boxType;if(this.paddedBody)json.paddedBody=true;if(this.paddedLabels)json.paddedLabels=true;return json;}
render(parentContext){let body=this.svgBody?makeSVGBox(this.svgBody):Atom.createBox(parentContext,this.body,{type:"ignore"});const annotationContext=new Context({parent:parentContext,mathstyle:"scriptstyle"},this.style);let above=null;if(this.svgAbove)above=makeSVGBox(this.svgAbove);else if(this.above)
above=Atom.createBox(annotationContext,this.above,{type:"ignore"});let below=null;if(this.svgBelow)below=makeSVGBox(this.svgBelow);else if(this.below)
below=Atom.createBox(annotationContext,this.below,{type:"ignore"});if(this.paddedBody){body=new Box([makeNullDelimiter(parentContext,"ML__open"),body,makeNullDelimiter(parentContext,"ML__close")],{type:"ignore"});}
let base=makeOverunderStack(parentContext,{base:body,above,below,type:this.boxType==="bin"||this.boxType==="rel"?this.boxType:"ord",paddedAboveBelow:this.paddedLabels});if(!base)return null;if(this.subsupPlacement==="over-under")
base=this.attachLimits(parentContext,{base,type:base.type});else base=this.attachSupsub(parentContext,{base});if(this.caret)base.caret=this.caret;return this.bind(parentContext,base);}};function makeOverunderStack(context,options){if(!options.base)return null;if(!options.above&&!options.below){const box=new Box(options.base,{type:options.type});box.setStyle("position","relative");return box;}
let aboveShift=0;if(options.above)aboveShift=context.metrics.bigOpSpacing5;let result=null;const base=options.base;const baseShift=0;const classes=["ML__center"];if(options.paddedAboveBelow)classes.push("ML__label_padding");if(options.below&&options.above){const bottom=context.metrics.bigOpSpacing5+options.below.height+options.below.depth+base.depth+baseShift;result=new VBox({bottom,children:[context.metrics.bigOpSpacing5,{box:options.below,classes},{box:base,classes:["ML__center"]},aboveShift,{box:options.above,classes},context.metrics.bigOpSpacing5]});}else if(options.below){result=new VBox({top:base.height-baseShift,children:[context.metrics.bigOpSpacing5,{box:options.below,classes},{box:base,classes:["ML__center"]}]});}else if(options.above){result=new VBox({bottom:base.depth+baseShift,children:[{box:base,classes:["ML__center"]},aboveShift,{box:options.above,classes},context.metrics.bigOpSpacing5]});}
return new Box(result,{type:options.type});}
var PhantomAtom=class _PhantomAtom extends Atom{constructor(options){var _a3,_b3,_c2,_d2;super(__spreadProps(__spreadValues({},options),{type:"phantom"}));this.captureSelection=true;this.isInvisible=(_a3=options.isInvisible)!=null?_a3:false;this.smashDepth=(_b3=options.smashDepth)!=null?_b3:false;this.smashHeight=(_c2=options.smashHeight)!=null?_c2:false;this.smashWidth=(_d2=options.smashWidth)!=null?_d2:false;}
static fromJson(json){return new _PhantomAtom(json);}
toJson(){const options={};if(this.isInvisible)options.isInvisible=true;if(this.smashDepth)options.smashDepth=true;if(this.smashHeight)options.smashHeight=true;if(this.smashWidth)options.smashWidth=true;return __spreadValues(__spreadValues({},super.toJson()),options);}
render(context){const phantom=new Context({parent:context,isPhantom:true});if(!this.smashDepth&&!this.smashHeight&&!this.smashWidth){console.assert(this.isInvisible);return Atom.createBox(phantom,this.body,{classes:"ML__inner"});}
const content=Atom.createBox(this.isInvisible?phantom:context,this.body);if(!content)return null;if(this.smashWidth){const fix=new Box(null,{classes:"ML__fix"});return new Box([content,fix],{classes:"ML__rlap"}).wrap(context);}
if(!this.smashHeight&&!this.smashDepth)return content;if(this.smashHeight)content.height=0;if(this.smashDepth)content.depth=0;if(content.children){for(const box of content.children){if(this.smashHeight)box.height=0;if(this.smashDepth)box.depth=0;}}
return new VBox({firstBaseline:[{box:content}]},{type:content.type}).wrap(context);}};var SpacingAtom=class _SpacingAtom extends Atom{constructor(options){var _a3;super(__spreadValues({type:"spacing"},options));this.width=options==null?void 0:options.width;this._braced=(_a3=options==null?void 0:options.braced)!=null?_a3:false;}
static fromJson(json){return new _SpacingAtom(json);}
toJson(){const json=super.toJson();if(this.width!==void 0)json.width=this.width;if(this._braced)json.braced=true;return json;}
render(context){var _a3;if(this.command==="space")
return new Box(this.mode==="math"?null:" ");let result;if(this.width!==void 0){result=new Box(null,{classes:"ML__mspace"});result.left=context.toEm(this.width);}else{const spacingCls=(_a3={"\\qquad":"ML__qquad","\\quad":"ML__quad","\\enspace":"ML__enspace","\\;":"ML__thickspace","\\:":"ML__mediumspace","\\>":"ML__mediumspace","\\,":"ML__thinspace","\\!":"ML__negativethinspace"}[this.command])!=null?_a3:"ML__mediumspace";result=new Box(null,{classes:spacingCls});}
result=this.bind(context,result);if(this.caret)result.caret=this.caret;return result;}
_serialize(options){var _a3;if(!options.expandMacro&&typeof this.verbatimLatex==="string")
return this.verbatimLatex;const def=getDefinition(this.command,this.mode);if(def==null?void 0:def.serialize)return def.serialize(this,options);const command=(_a3=this.command)!=null?_a3:"";if(this.width===void 0)return command;if(this._braced&&!("register"in this.width))
return`${command}{${serializeLatexValue(this.width)}}`;return`${command}${serializeLatexValue(this.width)}`;}};var SurdAtom=class _SurdAtom extends Atom{constructor(options){var _a3;super(__spreadProps(__spreadValues({},options),{type:"surd",mode:(_a3=options.mode)!=null?_a3:"math",style:options.style,displayContainsHighlight:true,body:options.body}));this.above=options.index;}
static fromJson(json){return new _SurdAtom(__spreadProps(__spreadValues({},json),{index:json.above}));}
_serialize(options){if(!(options.expandMacro||options.skipStyles||options.skipPlaceholders)&&typeof this.verbatimLatex==="string")
return this.verbatimLatex;const def=getDefinition(this.command,this.mode);if(def==null?void 0:def.serialize)return def.serialize(this,options);const command=this.command;const body=this.bodyToLatex(options);if(this.above&&!this.hasEmptyBranch("above"))
return latexCommand(`${command}[${this.aboveToLatex(options)}]`,body);if(/^[0-9]$/.test(body))return`${command}${body}`;return latexCommand(command,body);}
get children(){if(this._children)return this._children;const result=[];if(this.above){for(const x of this.above){result.push(...x.children);result.push(x);}}
if(this.body){for(const x of this.body){result.push(...x.children);result.push(x);}}
this._children=result;return result;}
render(context){var _a3;const innerContext=new Context({parent:context,mathstyle:"cramp"},this.style);const innerBox=(_a3=Atom.createBox(innerContext,this.body,{type:"inner"}))!=null?_a3:new Box(null);const factor=innerContext.scalingFactor;const ruleWidth=innerContext.metrics.defaultRuleThickness/factor;const phi=context.isDisplayStyle?X_HEIGHT:ruleWidth;const line=new Box(null,{classes:"ML__sqrt-line",style:this.style});line.height=ruleWidth;line.softWidth=innerBox.width;let lineClearance=factor*(ruleWidth+phi/4);const innerTotalHeight=Math.max(factor*2*phi,innerBox.height+innerBox.depth);const minDelimiterHeight=innerTotalHeight+lineClearance+ruleWidth;const delimContext=new Context({parent:context},this.style);const delimBox=this.bind(delimContext,new Box(makeCustomSizedDelim("inner","\\surd",minDelimiterHeight,false,delimContext,{isSelected:this.isSelected}),{isSelected:this.isSelected,classes:"ML__sqrt-sign",style:this.style}));if(!delimBox)return null;const delimDepth=delimBox.height+delimBox.depth-ruleWidth;if(delimDepth>innerBox.height+innerBox.depth+lineClearance){lineClearance=(lineClearance+delimDepth-(innerBox.height+innerBox.depth))/2;}
delimBox.setTop(delimBox.height-innerBox.height-lineClearance);const bodyBox=this.bind(context,new VBox({firstBaseline:[{box:new Box(innerBox)},lineClearance-2*ruleWidth,{box:line},ruleWidth]}));const indexBox=Atom.createBox(new Context({parent:context,mathstyle:"scriptscriptstyle"}),this.above,{type:"ignore"});if(!indexBox){const result2=new Box([delimBox,bodyBox],{classes:this.containsCaret?"ML__contains-caret":"",type:"inner"});result2.setStyle("display","inline-block");result2.setStyle("height",result2.height+result2.depth,"em");if(this.caret)result2.caret=this.caret;return this.bind(context,result2);}
const indexStack=new VBox({shift:-0.6*(Math.max(delimBox.height,bodyBox.height)-Math.max(delimBox.depth,bodyBox.depth)),children:[{box:indexBox}]});const result=new Box([new Box(indexStack,{classes:"ML__sqrt-index",type:"ignore"}),delimBox,bodyBox],{type:"inner",classes:this.containsCaret?"ML__contains-caret":""});result.height=delimBox.height;result.depth=delimBox.depth;if(this.caret)result.caret=this.caret;return this.bind(context,result);}};var SkipBox=class extends Box{constructor(width){super(null,{type:"skip"});this._width=width;}
toMarkup(){return`<span style="display:inline-block;width:${Math.ceil(this.width * 100) / 100}em"></span>`;}};function addSkipBefore(box,width){if(!box.parent)return;const siblings=box.parent.children;const i=siblings.indexOf(box);let j=i-1;while(j>=0){if(siblings[j].type==="ignore")j-=1;else break;}
if(j<0&&box.parent.parent&&box.parent.type==="lift"){addSkipBefore(box.parent,width);return;}
if(i>0&&siblings[i-1].type==="skip")siblings[i-1].width+=width;else siblings.splice(i,0,new SkipBox(width));}
var INTER_BOX_SPACING={ord:{op:3,bin:4,rel:5,inner:3},op:{ord:3,op:3,rel:5,inner:3},bin:{ord:4,op:4,open:4,inner:4},rel:{ord:5,op:5,open:5,inner:5},close:{op:3,bin:4,rel:5,inner:3},punct:{ord:3,op:3,rel:3,open:3,punct:3,inner:3},inner:{ord:3,op:3,bin:4,rel:5,open:3,punct:3,inner:3}};var INTER_BOX_TIGHT_SPACING={ord:{op:3},op:{ord:3,op:3},close:{op:3},inner:{op:3}};function adjustType(boxes){traverseBoxes(boxes,(prev,cur)=>{if(cur.type==="bin"&&(!prev||/^(middle|bin|op|rel|open|punct)$/.test(prev.type)))
cur.type="ord";if((prev==null?void 0:prev.type)==="bin"&&/^(rel|close|punct)$/.test(cur.type))
prev.type="ord";if(cur.type!=="ignore")prev=cur;});}
function applyInterBoxSpacing(root,context){if(!root.children)return root;const boxes=root.children;adjustType(boxes);const thin=context.getRegisterAsEm("thinmuskip");const med=context.getRegisterAsEm("medmuskip");const thick=context.getRegisterAsEm("thickmuskip");traverseBoxes(boxes,(prev,cur)=>{var _a3,_b3,_c2;if(!prev)return;const prevType=prev.type;const table=cur.isTight?(_a3=INTER_BOX_TIGHT_SPACING[prevType])!=null?_a3:null:(_b3=INTER_BOX_SPACING[prevType])!=null?_b3:null;const hskip=(_c2=table==null?void 0:table[cur.type])!=null?_c2:null;if(hskip===3)addSkipBefore(cur,thin);if(hskip===4)addSkipBefore(cur,med);if(hskip===5)addSkipBefore(cur,thick);});return root;}
function traverseBoxes(boxes,f,prev=void 0){if(!boxes)return prev;boxes=[...boxes];for(const cur of boxes){if(cur.type==="lift")prev=traverseBoxes(cur.children,f,prev);else if(cur.type==="ignore")traverseBoxes(cur.children,f);else{f(prev,cur);traverseBoxes(cur.children,f);prev=cur;}}
return prev;}
var TooltipAtom=class _TooltipAtom extends Atom{constructor(options){super({type:"tooltip",command:options.command,mode:options.mode,style:options.style,body:options.body,displayContainsHighlight:true});this.tooltip=new Atom({type:"root",mode:options.content,body:options.tooltip,style:{}});this.skipBoundary=true;this.captureSelection=false;}
static fromJson(json){return new _TooltipAtom(__spreadProps(__spreadValues({},json),{tooltip:fromJson(json.tooltip)}));}
toJson(){var _a3;const tooltip=(_a3=this.tooltip.body)==null?void 0:_a3.filter((x)=>x.type!=="first").map((x)=>x.toJson());return __spreadProps(__spreadValues({},super.toJson()),{tooltip});}
render(context){const body=Atom.createBox(new Context(),this.body);if(!body)return null;const tooltipContext=new Context({parent:context,mathstyle:"displaystyle"},{fontSize:DEFAULT_FONT_SIZE});const tooltip=coalesce(applyInterBoxSpacing(new Box(this.tooltip.render(tooltipContext),{classes:"ML__tooltip-content"}),tooltipContext));const box=new Box([tooltip,body],{classes:"ML__tooltip-container"});if(this.caret)box.caret=this.caret;return this.bind(context,box);}};var OperatorAtom=class _OperatorAtom extends Atom{constructor(symbol,options){super(__spreadProps(__spreadValues({},options),{type:"operator",isFunction:options==null?void 0:options.isFunction}));this.value=symbol;this.variant=options==null?void 0:options.variant;this.variantStyle=options==null?void 0:options.variantStyle;this.subsupPlacement=options==null?void 0:options.limits;}
static fromJson(json){return new _OperatorAtom(json.symbol,json);}
toJson(){const result=super.toJson();if(this.variant)result.variant=this.variant;if(this.variantStyle)result.variantStyle=this.variantStyle;if(this.subsupPlacement)result.limits=this.subsupPlacement;if(this.value)result.symbol=this.value;return result;}
render(context){var _a3;const base=new Box(this.value,{type:"op",mode:"math",maxFontSize:context.scalingFactor,style:{variant:this.variant,variantStyle:this.variantStyle},isSelected:this.isSelected,letterShapeStyle:context.letterShapeStyle});let result=base;if(this.superscript||this.subscript){const limits=(_a3=this.subsupPlacement)!=null?_a3:"auto";result=limits==="over-under"||limits==="auto"&&context.isDisplayStyle?this.attachLimits(context,{base}):this.attachSupsub(context,{base});}
return new Box(this.bind(context,result),{type:"op",caret:this.caret,isSelected:this.isSelected,classes:"ML__op-group"}).wrap(context);}
_serialize(options){if(!(options.expandMacro||options.skipStyles||options.skipPlaceholders)&&typeof this.verbatimLatex==="string")
return this.verbatimLatex;const def=getDefinition(this.command,this.mode);if(def==null?void 0:def.serialize)return def.serialize(this,options);const result=[this.command];if(this.explicitSubsupPlacement){if(this.subsupPlacement==="over-under")result.push("\\limits");if(this.subsupPlacement==="adjacent")result.push("\\nolimits");if(this.subsupPlacement==="auto")result.push("\\displaylimits");}
result.push(this.supsubToLatex(options));return joinLatex(result);}};function fromJson(json){if(isArray(json))return json.map((x)=>fromJson(x));if(typeof json==="string")return Atom.fromJson(json);json=__spreadValues({},json);for(const branch of NAMED_BRANCHES)
if(json[branch])json[branch]=fromJson(json[branch]);if(json.args)json.args=argumentsFromJson(json.args);if(json.array)json.array=fromJson(json.array);const type=json.type;let result=void 0;if(type==="accent")result=AccentAtom.fromJson(json);if(type==="array")result=ArrayAtom.fromJson(json);if(type==="box")result=BoxAtom.fromJson(json);if(type==="chem")result=ChemAtom.fromJson(json);if(type==="composition")result=CompositionAtom.fromJson(json);if(type==="delim")result=MiddleDelimAtom.fromJson(json);if(type==="enclose")result=EncloseAtom.fromJson(json);if(type==="error")result=ErrorAtom.fromJson(json);if(type==="extensible-symbol")
result=ExtensibleSymbolAtom.fromJson(json);if(type==="genfrac")result=GenfracAtom.fromJson(json);if(type==="group")result=GroupAtom.fromJson(json);if(type==="latex")result=LatexAtom.fromJson(json);if(type==="latexgroup")result=LatexGroupAtom.fromJson(json);if(type==="leftright")result=LeftRightAtom.fromJson(json);if(type==="macro")result=MacroAtom.fromJson(json);if(type==="macro-argument")result=MacroArgumentAtom.fromJson(json);if(type==="operator")result=OperatorAtom.fromJson(json);if(type==="overlap")result=OverlapAtom.fromJson(json);if(type==="overunder")result=OverunderAtom.fromJson(json);if(type==="placeholder")result=PlaceholderAtom.fromJson(json);if(type==="prompt")result=PromptAtom.fromJson(json);if(type==="phantom")result=PhantomAtom.fromJson(json);if(type==="sizeddelim")result=SizedDelimAtom.fromJson(json);if(type==="spacing")result=SpacingAtom.fromJson(json);if(type==="subsup")result=SubsupAtom.fromJson(json);if(type==="surd")result=SurdAtom.fromJson(json);if(type==="text")result=TextAtom.fromJson(json);if(type==="tooltip")result=TooltipAtom.fromJson(json);if(!result){console.assert(!type||["first","mbin","mrel","mclose","minner","mop","mopen","mord","mpunct","root","space"].includes(type),`MathLive 0.105.0: an unexpected atom type "${type}" was encountered. Add new atom constructors to \`fromJson()\` in "atom.ts"`);result=Atom.fromJson(json);}
for(const branch of NAMED_BRANCHES)
if(json[branch])result.setChildren(json[branch],branch);if(json.verbatimLatex!==void 0)
result.verbatimLatex=json.verbatimLatex;if(json.subsupPlacement)result.subsupPlacement=json.subsupPlacement;if(json.explicitSubsupPlacement)result.explicitSubsupPlacement=true;if(json.isFunction)result.isFunction=true;if(json.skipBoundary)result.skipBoundary=true;if(json.captureSelection)result.captureSelection=true;return result;}
function argumentsFromJson(json){if(!json)return void 0;if(typeof json==="string")return json;if(!Array.isArray(json))return void 0;return json.map((arg)=>{if(arg==="<null>")return null;if(typeof arg==="object"&&"group"in arg)
return{group:arg.group.map((x)=>fromJson(x))};if(typeof arg==="object"&&"atoms"in arg)
return arg.atoms.map((x)=>fromJson(x));return arg;});}
function applyStyleToUnstyledAtoms(atom,style){if(!atom||!style)return;if(isArray(atom)){atom.forEach((x)=>applyStyleToUnstyledAtoms(x,style));}else if(typeof atom==="object")
atom.applyStyle(style,{unstyledOnly:true});}
function applyStyle(model,range2,style,options){function everyStyle(property,value){for(const atom of atoms)if(atom.style[property]!==value)return false;return true;}
range2=model.normalizeRange(range2);if(range2[0]===range2[1])return false;const atoms=model.getAtoms(range2,{includeChildren:true});if(options.operation==="toggle"){if(style.color&&everyStyle("color",style.color)){style.color="none";delete style.verbatimColor;}
if(style.backgroundColor&&everyStyle("backgroundColor",style.backgroundColor)){style.backgroundColor="none";delete style.verbatimBackgroundColor;}
if(style.fontFamily&&everyStyle("fontFamily",style.fontFamily)){style.fontFamily="none";}
if(style.fontSeries&&everyStyle("fontSeries",style.fontSeries)){style.fontSeries="auto";}
if(style.fontShape&&everyStyle("fontShape",style.fontShape)){style.fontShape="auto";}
if(style.fontSize&&everyStyle("fontSize",style.fontSize)){style.fontSize=DEFAULT_FONT_SIZE;}
if(style.variant&&everyStyle("variant",style.variant)){style.variant="normal";}
if(style.variantStyle&&everyStyle("variantStyle",style.variantStyle)){style.variantStyle="";}}
for(const atom of atoms)atom.applyStyle(style);return true;}
function addItalic(v){return{"up":"italic","bold":"bolditalic","italic":"italic","bolditalic":"bolditalic","":"italic"}[v!=null?v:""];}
function removeItalic(v){return{"up":"up","bold":"bold","italic":void 0,"bolditalic":"bold","":void 0}[v!=null?v:""];}
var VARIANTS={"main":["Main-Regular","ML__cmr"],"main-italic":["Main-Italic","ML__cmr ML__it"],"main-bold":["Main-Bold","ML__cmr ML__bold"],"main-bolditalic":["Main-BoldItalic","ML__cmr ML__bold ML__it"],"normal":["Main-Regular","ML__cmr"],"normal-bold":["Main-Bold","ML__mathbf"],"normal-italic":["Math-Italic","ML__mathit"],"normal-bolditalic":["Math-BoldItalic","ML__mathbfit"],"ams":["AMS-Regular","ML__ams"],"ams-bold":["AMS-Regular","ML__ams ML__bold"],"ams-italic":["AMS-Regular","ML__ams ML__it"],"ams-bolditalic":["AMS-Regular","ML__ams ML__bold ML__it"],"sans-serif":["SansSerif-Regular","ML__sans"],"sans-serif-bold":["SansSerif-Regular","ML__sans ML__bold"],"sans-serif-italic":["SansSerif-Regular","ML__sans ML__it"],"sans-serif-bolditalic":["SansSerif-Regular","ML__sans ML__bold ML__it"],"calligraphic":["Caligraphic-Regular","ML__cal"],"calligraphic-bold":["Caligraphic-Regular","ML__cal ML__bold"],"calligraphic-italic":["Caligraphic-Regular","ML__cal ML__it"],"calligraphic-bolditalic":["Caligraphic-Regular","ML__cal ML__bold ML__it"],"script":["Script-Regular","ML__script"],"script-bold":["Script-Regular","ML__script ML__bold"],"script-italic":["Script-Regular","ML__script ML__it"],"script-bolditalic":["Script-Regular","ML__script ML__bold ML__it"],"fraktur":["Fraktur-Regular","ML__frak"],"fraktur-bold":["Fraktur-Regular","ML__frak ML__bold"],"fraktur-italic":["Fraktur-Regular","ML__frak ML__it"],"fraktur-bolditalic":["Fraktur-Regular","ML__frak ML__bold ML__it"],"monospace":["Typewriter-Regular","ML__tt"],"monospace-bold":["Typewriter-Regular","ML__tt ML__bold"],"monospace-italic":["Typewriter-Regular","ML__tt ML__it"],"monospace-bolditalic":["Typewriter-Regular","ML__tt ML__bold ML__it"],"double-struck":["AMS-Regular","ML__bb"],"double-struck-bold":["AMS-Regular","ML__bb ML__bold"],"double-struck-italic":["AMS-Regular","ML__bb ML_italic"],"double-struck-bolditalic":["AMS-Regular","ML__bb ML_bolditalic"]};var VARIANT_REPERTOIRE={"double-struck":/^[A-Z ]$/,"script":/^[A-Z ]$/,"calligraphic":/^[\dA-Z ]$/,"fraktur":/^[\dA-Za-z ]$|^[!"#$%&'()*+,\-./:;=?[]^]$/,"monospace":/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/,"sans-serif":/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/};var GREEK_LOWERCASE=/^[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5]$/;var GREEK_UPPERCASE=/^[\u0393|\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A6\u03A8\u03A9]$/;var LETTER_SHAPE_RANGES=[/^[a-z]$/,/^[A-Z]$/,GREEK_LOWERCASE,GREEK_UPPERCASE];var LETTER_SHAPE_MODIFIER={iso:["it","it","it","it"],tex:["it","it","it","up"],french:["it","up","up","up"],upright:["up","up","up","up"]};var MathMode=class extends Mode{constructor(){super("math");}
createAtom(command,info,style){var _a3,_b3,_c2,_d2,_e,_f;if(info===null){return new Atom({type:"mord",mode:"math",command,value:command,style});}
let isFunction;try{isFunction=(_c2=(_b3=globalThis.MathfieldElement)==null?void 0:_b3.isFunction((_a3=info.command)!=null?_a3:command))!=null?_c2:false;}catch(e){isFunction=false;}
if(info.definitionType==="symbol"){const result2=new Atom({type:(_d2=info.type)!=null?_d2:"mord",mode:"math",command:(_e=info.command)!=null?_e:command,value:String.fromCodePoint(info.codepoint),isFunction,style});if(command.startsWith("\\"))result2.verbatimLatex=command;return result2;}
const result=new Atom({type:"mord",mode:"math",command:(_f=info.command)!=null?_f:command,value:command,isFunction,style});if(command.startsWith("\\"))result.verbatimLatex=command;return result;}
serialize(run,options){const result=emitBoldRun(run,__spreadProps(__spreadValues({},options),{defaultMode:"math"}));if(result.length===0||options.defaultMode!=="text")return result;return["$ ",...result," $"];}
getFont(box,style){var _a3,_b3;console.assert(style.variant!==void 0);if(style.fontFamily){const[fontName2,classes2]=VARIANTS[style.fontFamily];if(classes2)box.classes+=" "+classes2;return fontName2;}
let{variant}=style;let{variantStyle}=style;if(variant==="normal"&&!variantStyle&&/[\u00A3\u0131\u0237]/.test(box.value)){variant="main";variantStyle="italic";}
if(variant==="normal"&&!variantStyle&&box.value.length===1){let italicize=false;LETTER_SHAPE_RANGES.forEach((x,i)=>{var _a4;if(x.test(box.value)&&LETTER_SHAPE_MODIFIER[(_a4=style.letterShapeStyle)!=null?_a4:"tex"][i]==="it")
italicize=true;});if(italicize)variantStyle=addItalic(variantStyle);}
if(variantStyle==="up")variantStyle=void 0;const styledVariant=variantStyle?variant+"-"+variantStyle:variant;console.assert(VARIANTS[styledVariant]!==void 0);const[fontName,classes]=VARIANTS[styledVariant];if(VARIANT_REPERTOIRE[variant]&&!VARIANT_REPERTOIRE[variant].test(box.value)){let v=mathVariantToUnicode(box.value,variant,variantStyle);if(!v){v=(_a3=mathVariantToUnicode(box.value,variant))!=null?_a3:box.value;box.classes+=(_b3={"bold":" ML__bold","italic":" ML__it","bold-italic":" ML__bold ML__it"}[variantStyle!=null?variantStyle:""])!=null?_b3:"";}
box.value=v;return null;}
if(GREEK_LOWERCASE.test(box.value))box.classes+=" lcGreek";if(classes)box.classes+=" "+classes;return fontName;}};function emitBoldRun(run,options){return getPropertyRuns(run,"bold").map((x)=>{const weight=weightString(x[0]);if(weight!=="bold")return joinLatex(emitVariantRun(x,options));if(weightString(x[0].parent)==="bold")
return joinLatex(emitVariantRun(x,options));const value=joinLatex(x.map((x2)=>{var _a3;return(_a3=x2.value)!=null?_a3:"";}));if(/^[a-zA-Z0-9]+$/.test(value))
return latexCommand("\\mathbf",joinLatex(emitVariantRun(x,options)));return latexCommand("\\bm",joinLatex(emitVariantRun(x,options)));});}
function emitVariantRun(run,options){const{parent}=run[0];const contextVariant=variantString(parent);return getPropertyRuns(run,"variant").map((x)=>{const variant=variantString(x[0]);let command="";if(variant&&variant!==contextVariant){command={"calligraphic":"\\mathcal","calligraphic-uo":"\\mathcal","fraktur":"\\mathfrak","fraktur-uo":"\\mathfrak","double-struck":"\\mathbb","double-struck-uo":"\\mathbb","script":"\\mathscr","script-uo":"\\mathscr","monospace":"\\mathtt","monospace-uo":"\\mathtt","sans-serif":"\\mathsf","sans-serif-uo":"\\mathsf","normal":"","normal-up":"\\mathrm","normal-italic":"\\mathnormal","normal-bold":"","normal-bolditalic":"\\mathbfit","ams":"","ams-up":"\\mathrm","ams-italic":"\\mathit","ams-bold":"","ams-bolditalic":"\\mathbfit","main":"","main-up":"\\mathrm","main-italic":"\\mathit","main-bold":"","main-bolditalic":"\\mathbfit"}[variant];console.assert(command!==void 0);}
const arg=joinLatex(x.map((x2)=>x2._serialize(options)));if(!command)return arg;return latexCommand(command,arg);});}
new MathMode();function emitStringTextRun(run,options){return run.map((x)=>x._serialize(options));}
function emitFontShapeTextRun(run,options){return getPropertyRuns(run,"fontShape").map((x)=>{const s=emitStringTextRun(x,options);const{fontShape}=x[0].style;let command="";if(fontShape==="it")command="\\textit";if(fontShape==="sl")command="\\textsl";if(fontShape==="sc")command="\\textsc";if(fontShape==="n")command="\\textup";if(!command&&fontShape)
return`{${latexCommand("\\fontshape", fontShape)}${joinLatex(s)}}`;return command?latexCommand(command,joinLatex(s)):joinLatex(s);});}
function emitFontSeriesTextRun(run,options){return getPropertyRuns(run,"fontSeries").map((x)=>{const s=emitFontShapeTextRun(x,options);const{fontSeries}=x[0].style;let command="";if(fontSeries==="b")command="\\textbf";if(fontSeries==="l")command="\\textlf";if(fontSeries==="m")command="\\textmd";if(fontSeries&&!command)
return`{${latexCommand("\\fontseries", fontSeries)}${joinLatex(s)}}`;return command?latexCommand(command,joinLatex(s)):joinLatex(s);});}
function emitSizeTextRun(run,options){return getPropertyRuns(run,"fontSize").map((x)=>{var _a3,_b3;const s=emitFontSeriesTextRun(x,options);const command=(_b3=["","\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"][(_a3=x[0].style.fontSize)!=null?_a3:""])!=null?_b3:"";return command?`${command} ${joinLatex(s)}`:joinLatex(s);});}
function emitFontFamilyTextRun(run,options,needsWrap){return getPropertyRuns(run,"fontFamily").map((x)=>{var _a3;needsWrap=needsWrap&&!x.every((x2)=>x2.style.fontFamily||x2.style.fontShape||x2.style.fontSeries||x2.style.fontSize);const s=emitSizeTextRun(x,options);const{fontFamily}=x[0].style;const command=(_a3={"roman":"textrm","monospace":"texttt","sans-serif":"textsf"}[fontFamily!=null?fontFamily:""])!=null?_a3:"";if(command)return`\\${command}{${joinLatex(s)}}`;if(fontFamily)
return`{\\fontfamily{${x[0].style.fontFamily}} ${joinLatex(s)}}`;if(needsWrap)return`\\text{${joinLatex(s)}}`;return joinLatex(s);});}
var TEXT_FONT_CLASS={"roman":"","sans-serif":"ML__sans","monospace":"ML__tt"};var TextMode=class extends Mode{constructor(){super("text");}
createAtom(command,info,style){if(!info)return null;if(info.definitionType==="symbol"){return new TextAtom(command,String.fromCodePoint(info.codepoint),style!=null?style:{});}
return null;}
serialize(run,options){return emitFontFamilyTextRun(run,__spreadProps(__spreadValues({},options),{defaultMode:"text"}),options.defaultMode!=="text");}
getFont(box,style){var _a3,_b3,_c2,_d2,_e;const{fontFamily}=style;if(TEXT_FONT_CLASS[fontFamily])
box.classes+=" "+TEXT_FONT_CLASS[fontFamily];else if(fontFamily){box.setStyle("font-family",fontFamily);}
if(style.fontShape){box.classes+=" ";box.classes+=(_a3={it:"ML__it",sl:"ML__shape_sl",sc:"ML__shape_sc",ol:"ML__shape_ol"}[style.fontShape])!=null?_a3:"";}
if(style.fontSeries){const m=style.fontSeries.match(/(.?[lbm])?(.?[cx])?/);if(m){box.classes+=" ";box.classes+=(_c2={ul:"ML__series_ul",el:"ML__series_el",l:"ML__series_l",sl:"ML__series_sl",m:"",sb:"ML__series_sb",b:"ML__bold",eb:"ML__series_eb",ub:"ML__series_ub"}[(_b3=m[1])!=null?_b3:""])!=null?_c2:"";box.classes+=" ";box.classes+=(_e={uc:"ML__series_uc",ec:"ML__series_ec",c:"ML__series_c",sc:"ML__series_sc",n:"",sx:"ML__series_sx",x:"ML__series_x",ex:"ML__series_ex",ux:"ML__series_ux"}[(_d2=m[2])!=null?_d2:""])!=null?_e:"";}}
return"Main-Regular";}};new TextMode();var LatexMode=class extends Mode{constructor(){super("latex");}
createAtom(command){return new LatexAtom(command);}
serialize(run,_options){return run.filter((x)=>x instanceof LatexAtom&&!x.isSuggestion).map((x)=>x.value);}
getFont(){return null;}};new LatexMode();var DVORAK={id:"dvorak",locale:"en",displayName:"Dvorak",virtualLayout:"dvorak",platform:"",score:0,mapping:{KeyA:["a","A","\xE5","\xC5"],KeyB:["x","X","\u2248","\u02DB"],KeyC:["j","J","\u2206","\xD4"],KeyD:["e","E","\xB4","\xB4"],KeyE:[".",">","\u2265","\u02D8"],KeyF:["u","U","\xA8","\xA8"],KeyG:["i","I","\u02C6","\u02C6"],KeyH:["d","D","\u2202","\xCE"],KeyI:["c","C","\xE7","\xC7"],KeyJ:["h","H","\u02D9","\xD3"],KeyK:["t","T","\u2020","\u02C7"],KeyL:["n","N","\u02DC","\u02DC"],KeyM:["m","M","\xB5","\xC2"],KeyN:["b","B","\u222B","\u0131"],KeyO:["r","R","\xAE","\u2030"],KeyP:["l","L","\xAC","\xD2"],KeyQ:["'",'"',"\xE6","\xC6"],KeyR:["p","P","\u03C0","\u220F"],KeyS:["o","O","\xF8","\xD8"],KeyT:["y","Y","\xA5","\xC1"],KeyU:["g","G","\xA9","\u02DD"],KeyV:["k","K","\u02DA","\uF8FF"],KeyW:[",","<","\u2264","\xAF"],KeyX:["q","Q","\u0153","\u0152"],KeyY:["f","F","\u0192","\xCF"],KeyZ:[";",":","\u2026","\xDA"],Digit1:["1","!","\xA1","\u2044"],Digit2:["2","@","\u2122","\u20AC"],Digit3:["3","#","\xA3","\u2039"],Digit4:["4","$","\xA2","\u203A"],Digit5:["5","%","\u221E","\uFB01"],Digit6:["6","^","\xA7","\uFB02"],Digit7:["7","&","\xB6","\u2021"],Digit8:["8","*","\u2022","\xB0"],Digit9:["9","(","\xAA","\xB7"],Digit0:["0",")","\xBA","\u201A"],Space:[" "," "," "," "],Minus:["[","{","\u201C","\u201D"],Equal:["]","}","\u2018","\u2019"],BracketLeft:["/","?","\xF7","\xBF"],BracketRight:["=","+","\u2260","\xB1"],Backslash:["\\","|","\xAB","\xBB"],Semicolon:["s","S","\xDF","\xCD"],Quote:["-","_","\u2013","\u2014"],Backquote:["`","~","`","`"],Comma:["w","W","\u2211","\u201E"],Period:["v","V","\u221A","\u25CA"],Slash:["z","Z","\u03A9","\xB8"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["\xA7","\xB1","\xA7","\xB1"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}};var APPLE_ENGLISH={id:"apple.en-intl",displayName:"English (international)",virtualLayout:"qwerty",platform:"apple",locale:"en",score:0,mapping:{KeyA:["a","A","\xE5","\xC5"],KeyB:["b","B","\u222B","\u0131"],KeyC:["c","C","\xE7","\xC7"],KeyD:["d","D","\u2202","\xCE"],KeyE:["e","E","\xB4","\xB4"],KeyF:["f","F","\u0192","\xCF"],KeyG:["g","G","\xA9","\u02DD"],KeyH:["h","H","\u02D9","\xD3"],KeyI:["i","I","\u02C6","\u02C6"],KeyJ:["j","J","\u2206","\xD4"],KeyK:["k","K","\u02DA","\uF8FF"],KeyL:["l","L","\xAC","\xD2"],KeyM:["m","M","\xB5","\xC2"],KeyN:["n","N","\u02DC","\u02DC"],KeyO:["o","O","\xF8","\xD8"],KeyP:["p","P","\u03C0","\u220F"],KeyQ:["q","Q","\u0153","\u0152"],KeyR:["r","R","\xAE","\u2030"],KeyS:["s","S","\xDF","\xCD"],KeyT:["t","T","\u2020","\u02C7"],KeyU:["u","U","\xA8","\xA8"],KeyV:["v","V","\u221A","\u25CA"],KeyW:["w","W","\u2211","\u201E"],KeyX:["x","X","\u2248","\u02DB"],KeyY:["y","Y","\xA5","\xC1"],KeyZ:["z","Z","\u03A9","\xB8"],Digit1:["1","!","\xA1","\u2044"],Digit2:["2","@","\u2122","\u20AC"],Digit3:["3","#","\xA3","\u2039"],Digit4:["4","$","\xA2","\u203A"],Digit5:["5","%","\u221E","\uFB01"],Digit6:["6","^","\xA7","\uFB02"],Digit7:["7","&","\xB6","\u2021"],Digit8:["8","*","\u2022","\xB0"],Digit9:["9","(","\xAA","\xB7"],Digit0:["0",")","\xBA","\u201A"],Space:[" "," "," "," "],Minus:["-","_","\u2013","\u2014"],Equal:["=","+","\u2260","\xB1"],BracketLeft:["[","{","\u201C","\u201D"],BracketRight:["]","}","\u2018","\u2019"],Backslash:["\\","|","\xAB","\xBB"],Semicolon:[";",":","\u2026","\xDA"],Quote:["'",'"',"\xE6","\xC6"],Backquote:["`","\u02DC","`","`"],Comma:[",","<","\u2264","\xAF"],Period:[".",">","\u2265","\u02D8"],Slash:["/","?","\xF7","\xBF"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["\xA7","\xB1","\xA7","\xB1"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}};var WINDOWS_ENGLISH={id:"windows.en-intl",displayName:"English (international)",platform:"windows",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","\xE1","\xC1"],KeyB:["b","B","",""],KeyC:["c","C","\xA9","\xA2"],KeyD:["d","D","\xF0","\xD0"],KeyE:["e","E","\xE9","\xC9"],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","\xED","\xCD"],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","\xF8","\xD8"],KeyM:["m","M","\xB5",""],KeyN:["n","N","\xF1","\xD1"],KeyO:["o","O","\xF3","\xD3"],KeyP:["p","P","\xF6","\xD6"],KeyQ:["q","Q","\xE4","\xC4"],KeyR:["r","R","\xAE",""],KeyS:["s","S","\xDF","\xA7"],KeyT:["t","T","\xFE","\xDE"],KeyU:["u","U","\xFA","\xDA"],KeyV:["v","V","",""],KeyW:["w","W","\xE5","\xC5"],KeyX:["x","X","",""],KeyY:["y","Y","\xFC","\xDC"],KeyZ:["z","Z","\xE6","\xC6"],Digit1:["1","!","\xA1","\xB9"],Digit2:["2","@","\xB2",""],Digit3:["3","#","\xB3",""],Digit4:["4","$","\xA4","\xA3"],Digit5:["5","%","\u20AC",""],Digit6:["6","^","\xBC",""],Digit7:["7","&","\xBD",""],Digit8:["8","*","\xBE",""],Digit9:["9","(","\u2018",""],Digit0:["0",")","\u2019",""],Space:[" "," ","",""],Minus:["-","_","\xA5",""],Equal:["=","+","\xD7","\xF7"],BracketLeft:["[","{","\xAB",""],BracketRight:["]","}","\xBB",""],Backslash:["\\","|","\xAC","\xA6"],Semicolon:[";",":","\xB6","\xB0"],Quote:["'",'"',"\xB4","\xA8"],Backquote:["`","~","",""],Comma:[",","<","\xE7","\xC7"],Period:[".",">","",""],Slash:["/","?","\xBF",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["\\","|","",""]}};var LINUX_ENGLISH={id:"linux.en",displayName:"English",platform:"linux",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","a","A"],KeyB:["b","B","b","B"],KeyC:["c","C","c","C"],KeyD:["d","D","d","D"],KeyE:["e","E","e","E"],KeyF:["f","F","f","F"],KeyG:["g","G","g","G"],KeyH:["h","H","h","H"],KeyI:["i","I","i","I"],KeyJ:["j","J","j","J"],KeyK:["k","K","k","K"],KeyL:["l","L","l","L"],KeyM:["m","M","m","M"],KeyN:["n","N","n","N"],KeyO:["o","O","o","O"],KeyP:["p","P","p","P"],KeyQ:["q","Q","q","Q"],KeyR:["r","R","r","R"],KeyS:["s","S","s","S"],KeyT:["t","T","t","T"],KeyU:["u","U","u","U"],KeyV:["v","V","v","V"],KeyW:["w","W","w","W"],KeyX:["x","X","x","X"],KeyY:["y","Y","y","Y"],KeyZ:["z","Z","z","Z"],Digit1:["1","!","1","!"],Digit2:["2","@","2","@"],Digit3:["3","#","3","#"],Digit4:["4","$","4","$"],Digit5:["5","%","5","%"],Digit6:["6","^","6","^"],Digit7:["7","&","7","&"],Digit8:["8","*","8","*"],Digit9:["9","(","9","("],Digit0:["0",")","0",")"],Space:[" "," "," "," "],Minus:["-","_","-","_"],Equal:["=","+","=","+"],BracketLeft:["[","{","[","{"],BracketRight:["]","}","]","}"],Backslash:["\\","|","\\","|"],Semicolon:[";",":",";",":"],Quote:["'",'"',"'",'"'],Backquote:["`","~","`","~"],Comma:[",","<",",","<"],Period:[".",">",".",">"],Slash:["/","?","/","?"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xA6"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}};var APPLE_FRENCH={id:"apple.french",locale:"fr",displayName:"French",platform:"apple",virtualLayout:"azerty",score:0,mapping:{KeyA:["q","Q","\u2021","\u03A9"],KeyB:["b","B","\xDF","\u222B"],KeyC:["c","C","\xA9","\xA2"],KeyD:["d","D","\u2202","\u2206"],KeyE:["e","E","\xEA","\xCA"],KeyF:["f","F","\u0192","\xB7"],KeyG:["g","G","\uFB01","\uFB02"],KeyH:["h","H","\xCC","\xCE"],KeyI:["i","I","\xEE","\xEF"],KeyJ:["j","J","\xCF","\xCD"],KeyK:["k","K","\xC8","\xCB"],KeyL:["l","L","\xAC","|"],KeyM:[",","?","\u221E","\xBF"],KeyN:["n","N","~","\u0131"],KeyO:["o","O","\u0153","\u0152"],KeyP:["p","P","\u03C0","\u220F"],KeyQ:["a","A","\xE6","\xC6"],KeyR:["r","R","\xAE","\u201A"],KeyS:["s","S","\xD2","\u2211"],KeyT:["t","T","\u2020","\u2122"],KeyU:["u","U","\xBA","\xAA"],KeyV:["v","V","\u25CA","\u221A"],KeyW:["z","Z","\xC2","\xC5"],KeyX:["x","X","\u2248","\u2044"],KeyY:["y","Y","\xDA","\u0178"],KeyZ:["w","W","\u2039","\u203A"],Digit1:["&","1","\uF8FF","\xB4"],Digit2:["\xE9","2","\xEB","\u201E"],Digit3:['"',"3","\u201C","\u201D"],Digit4:["'","4","\u2018","\u2019"],Digit5:["(","5","{","["],Digit6:["\xA7","6","\xB6","\xE5"],Digit7:["\xE8","7","\xAB","\xBB"],Digit8:["!","8","\xA1","\xDB"],Digit9:["\xE7","9","\xC7","\xC1"],Digit0:["\xE0","0","\xF8","\xD8"],Space:[" "," "," "," "],Minus:[")","\xB0","}","]"],Equal:["-","_","\u2014","\u2013"],BracketLeft:["^","\xA8","\xF4","\xD4"],BracketRight:["$","*","\u20AC","\xA5"],Backslash:["`","\xA3","@","#"],Semicolon:["m","M","\xB5","\xD3"],Quote:["\xF9","%","\xD9","\u2030"],Backquote:["<",">","\u2264","\u2265"],Comma:[";",".","\u2026","\u2022"],Period:[":","/","\xF7","\\"],Slash:["=","+","\u2260","\xB1"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",".",",","."],IntlBackslash:["@","#","\u2022","\u0178"],NumpadEqual:["=","=","=","="]}};var WINDOWS_FRENCH={id:"windows.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"windows",score:0,mapping:{KeyA:["q","Q","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","\u20AC",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:[",","?","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["\xE9","2","~",""],Digit3:['"',"3","#",""],Digit4:["'","4","{",""],Digit5:["(","5","[",""],Digit6:["-","6","|",""],Digit7:["\xE8","7","`",""],Digit8:["_","8","\\",""],Digit9:["\xE7","9","^",""],Digit0:["\xE0","0","@",""],Space:[" "," ","",""],Minus:[")","\xB0","]",""],Equal:["=","+","}",""],BracketLeft:["^","\xA8","",""],BracketRight:["$","\xA3","\xA4",""],Backslash:["*","\xB5","",""],Semicolon:["m","M","",""],Quote:["\xF9","%","",""],Backquote:["\xB2","","",""],Comma:[";",".","",""],Period:[":","/","",""],Slash:["!","\xA7","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}};var LINUX_FRENCH={id:"linux.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"linux",score:0,mapping:{KeyA:["q","Q","@","\u03A9"],KeyB:["b","B","\u201D","\u2019"],KeyC:["c","C","\xA2","\xA9"],KeyD:["d","D","\xF0","\xD0"],KeyE:["e","E","\u20AC","\xA2"],KeyF:["f","F","\u0111","\xAA"],KeyG:["g","G","\u014B","\u014A"],KeyH:["h","H","\u0127","\u0126"],KeyI:["i","I","\u2192","\u0131"],KeyJ:["j","J","\u0309","\u031B"],KeyK:["k","K","\u0138","&"],KeyL:["l","L","\u0142","\u0141"],KeyM:[",","?","\u0301","\u030B"],KeyN:["n","N","n","N"],KeyO:["o","O","\xF8","\xD8"],KeyP:["p","P","\xFE","\xDE"],KeyQ:["a","A","\xE6","\xC6"],KeyR:["r","R","\xB6","\xAE"],KeyS:["s","S","\xDF","\xA7"],KeyT:["t","T","\u0167","\u0166"],KeyU:["u","U","\u2193","\u2191"],KeyV:["v","V","\u201C","\u2018"],KeyW:["z","Z","\xAB","<"],KeyX:["x","X","\xBB",">"],KeyY:["y","Y","\u2190","\xA5"],KeyZ:["w","W","\u0142","\u0141"],Digit1:["&","1","\xB9","\xA1"],Digit2:["\xE9","2","~","\u215B"],Digit3:['"',"3","#","\xA3"],Digit4:["'","4","{","$"],Digit5:["(","5","[","\u215C"],Digit6:["-","6","|","\u215D"],Digit7:["\xE8","7","`","\u215E"],Digit8:["_","8","\\","\u2122"],Digit9:["\xE7","9","^","\xB1"],Digit0:["\xE0","0","@","\xB0"],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:[")","\xB0","]","\xBF"],Equal:["=","+","}","\u0328"],BracketLeft:["\u0302","\u0308","\u0308","\u030A"],BracketRight:["$","\xA3","\xA4","\u0304"],Backslash:["*","\xB5","\u0300","\u0306"],Semicolon:["m","M","\xB5","\xBA"],Quote:["\xF9","%","\u0302","\u030C"],Backquote:["\xB2","~","\xAC","\xAC"],Comma:[";",".","\u2500","\xD7"],Period:[":","/","\xB7","\xF7"],Slash:["!","\xA7","\u0323","\u0307"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xA6"]}};var APPLE_GERMAN={id:"apple.german",locale:"de",displayName:"German",virtualLayout:"qwertz",platform:"apple",score:0,mapping:{KeyA:["a","A","\xE5","\xC5"],KeyB:["b","B","\u222B","\u2039"],KeyC:["c","C","\xE7","\xC7"],KeyD:["d","D","\u2202","\u2122"],KeyE:["e","E","\u20AC","\u2030"],KeyF:["f","F","\u0192","\xCF"],KeyG:["g","G","\xA9","\xCC"],KeyH:["h","H","\xAA","\xD3"],KeyI:["i","I","\u2044","\xDB"],KeyJ:["j","J","\xBA","\u0131"],KeyK:["k","K","\u2206","\u02C6"],KeyL:["l","L","@","\uFB02"],KeyM:["m","M","\xB5","\u02D8"],KeyN:["n","N","~","\u203A"],KeyO:["o","O","\xF8","\xD8"],KeyP:["p","P","\u03C0","\u220F"],KeyQ:["q","Q","\xAB","\xBB"],KeyR:["r","R","\xAE","\xB8"],KeyS:["s","S","\u201A","\xCD"],KeyT:["t","T","\u2020","\u02DD"],KeyU:["u","U","\xA8","\xC1"],KeyV:["v","V","\u221A","\u25CA"],KeyW:["w","W","\u2211","\u201E"],KeyX:["x","X","\u2248","\xD9"],KeyY:["z","Z","\u03A9","\u02C7"],KeyZ:["y","Y","\xA5","\u2021"],Digit1:["1","!","\xA1","\xAC"],Digit2:["2",'"',"\u201C","\u201D"],Digit3:["3","\xA7","\xB6","#"],Digit4:["4","$","\xA2","\xA3"],Digit5:["5","%","[","\uFB01"],Digit6:["6","&","]","^"],Digit7:["7","/","|","\\"],Digit8:["8","(","{","\u02DC"],Digit9:["9",")","}","\xB7"],Digit0:["0","=","\u2260","\xAF"],Space:[" "," "," "," "],Minus:["\xDF","?","\xBF","\u02D9"],Equal:["\xB4","`","'","\u02DA"],BracketLeft:["\xFC","\xDC","\u2022","\xB0"],BracketRight:["+","*","\xB1","\uF8FF"],Backslash:["#","'","\u2018","\u2019"],Semicolon:["\xF6","\xD6","\u0153","\u0152"],Quote:["\xE4","\xC4","\xE6","\xC6"],Backquote:["<",">","\u2264","\u2265"],Comma:[",",";","\u221E","\u02DB"],Period:[".",":","\u2026","\xF7"],Slash:["-","_","\u2013","\u2014"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",",",".","."],IntlBackslash:["^","\xB0","\u201E","\u201C"],NumpadEqual:["=","=","=","="]}};var WINDOWS_GERMAN={id:"windows.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","\u20AC",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","\xB5",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"\xB2",""],Digit3:["3","\xA7","\xB3",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Space:[" "," ","",""],Minus:["\xDF","?","\\","\u1E9E"],Equal:["\xB4","`","",""],BracketLeft:["\xFC","\xDC","",""],BracketRight:["+","*","~",""],Backslash:["#","'","",""],Semicolon:["\xF6","\xD6","",""],Quote:["\xE4","\xC4","",""],Backquote:["^","\xB0","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","|",""]}};var LINUX_GERMAN={id:"linux.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","\xE6","\xC6"],KeyB:["b","B","\u201C","\u2018"],KeyC:["c","C","\xA2","\xA9"],KeyD:["d","D","\xF0","\xD0"],KeyE:["e","E","\u20AC","\u20AC"],KeyF:["f","F","\u0111","\xAA"],KeyG:["g","G","\u014B","\u014A"],KeyH:["h","H","\u0127","\u0126"],KeyI:["i","I","\u2192","\u0131"],KeyJ:["j","J","\u0323","\u0307"],KeyK:["k","K","\u0138","&"],KeyL:["l","L","\u0142","\u0141"],KeyM:["m","M","\xB5","\xBA"],KeyN:["n","N","\u201D","\u2019"],KeyO:["o","O","\xF8","\xD8"],KeyP:["p","P","\xFE","\xDE"],KeyQ:["q","Q","@","\u03A9"],KeyR:["r","R","\xB6","\xAE"],KeyS:["s","S","\u017F","\u1E9E"],KeyT:["t","T","\u0167","\u0166"],KeyU:["u","U","\u2193","\u2191"],KeyV:["v","V","\u201E","\u201A"],KeyW:["w","W","\u0142","\u0141"],KeyX:["x","X","\xAB","\u2039"],KeyY:["z","Z","\u2190","\xA5"],KeyZ:["y","Y","\xBB","\u203A"],Digit1:["1","!","\xB9","\xA1"],Digit2:["2",'"',"\xB2","\u215B"],Digit3:["3","\xA7","\xB3","\xA3"],Digit4:["4","$","\xBC","\xA4"],Digit5:["5","%","\xBD","\u215C"],Digit6:["6","&","\xAC","\u215D"],Digit7:["7","/","{","\u215E"],Digit8:["8","(","[","\u2122"],Digit9:["9",")","]","\xB1"],Digit0:["0","=","}","\xB0"],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:["\xDF","?","\\","\xBF"],Equal:["\u0301","\u0300","\u0327","\u0328"],BracketLeft:["\xFC","\xDC","\u0308","\u030A"],BracketRight:["+","*","~","\xAF"],Backslash:["#","'","\u2019","\u0306"],Semicolon:["\xF6","\xD6","\u030B","\u0323"],Quote:["\xE4","\xC4","\u0302","\u030C"],Backquote:["\u0302","\xB0","\u2032","\u2033"],Comma:[",",";","\xB7","\xD7"],Period:[".",":","\u2026","\xF7"],Slash:["-","_","\u2013","\u2014"],PrintScreen:["","","",""],PageUp:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",",","",","],IntlBackslash:["<",">","|","\u0331"],AltRight:["\r","\r","\r","\r"],MetaRight:[".",".",".","."]}};var APPLE_SPANISH={id:"apple.spanish",locale:"es",displayName:"Spanish ISO",platform:"apple",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","\xE5","\xC5"],KeyB:["b","B","\xDF",""],KeyC:["c","C","\xA9"," "],KeyD:["d","D","\u2202","\u2206"],KeyE:["e","E","\u20AC","\u20AC"],KeyF:["f","F","\u0192","\uFB01"],KeyG:["g","G","\uF8FF","\uFB02"],KeyH:["h","H","\u2122"," "],KeyI:["i","I"," "," "],KeyJ:["j","J","\xB6","\xAF"],KeyK:["k","K","\xA7","\u02C7"],KeyL:["l","L"," ","\u02D8"],KeyM:["m","M","\xB5","\u02DA"],KeyN:["n","N"," ","\u02D9"],KeyO:["o","O","\xF8","\xD8"],KeyP:["p","P","\u03C0","\u220F"],KeyQ:["q","Q","\u0153","\u0152"],KeyR:["r","R","\xAE"," "],KeyS:["s","S","\u222B"," "],KeyT:["t","T","\u2020","\u2021"],KeyU:["u","U"," "," "],KeyV:["v","V","\u221A","\u25CA"],KeyW:["w","W","\xE6","\xC6"],KeyX:["x","X","\u2211","\u203A"],KeyY:["y","Y","\xA5"," "],KeyZ:["z","Z","\u03A9","\u2039"],Digit1:["1","!","|","\u0131"],Digit2:["2",'"',"@","\u02DD"],Digit3:["3","\xB7","#","\u2022"],Digit4:["4","$","\xA2","\xA3"],Digit5:["5","%","\u221E","\u2030"],Digit6:["6","&","\xAC"," "],Digit7:["7","/","\xF7","\u2044"],Digit8:["8","(","\u201C","\u2018"],Digit9:["9",")","\u201D","\u2019"],Digit0:["0","=","\u2260","\u2248"],Space:[" "," "," "," "],Minus:["'","?","\xB4","\xB8"],Equal:["\xA1","\xBF","\u201A","\u02DB"],BracketLeft:["`","^","[","\u02C6"],BracketRight:["+","*","]","\xB1"],Backslash:["\xE7","\xC7","}","\xBB"],Semicolon:["\xF1","\xD1","~","\u02DC"],Quote:["\xB4","\xA8","{","\xAB"],Backquote:["<",">","\u2264","\u2265"],Comma:[",",";","\u201E",""],Period:[".",":","\u2026","\u2026"],Slash:["-","_","\u2013","\u2014"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[",",",",",",","],IntlBackslash:["\xBA","\xAA","\\","\xB0"]}};var WINDOWS_SPANISH={id:"windows.spanish",locale:"es",displayName:"Spanish",platform:"windows",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","\u20AC",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","\xB7","#",""],Digit4:["4","$","~",""],Digit5:["5","%","\u20AC",""],Digit6:["6","&","\xAC",""],Digit7:["7","/","",""],Digit8:["8","(","",""],Digit9:["9",")","",""],Digit0:["0","=","",""],Space:[" "," ","",""],Minus:["'","?","",""],Equal:["\xA1","\xBF","",""],BracketLeft:["`","^","[",""],BracketRight:["+","*","]",""],Backslash:["\xE7","\xC7","}",""],Semicolon:["\xF1","\xD1","",""],Quote:["\xB4","\xA8","{",""],Backquote:["\xBA","\xAA","\\",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}};var LINUX_SPANISH={id:"linux.spanish",locale:"es",displayName:"Spanish",platform:"linux",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","\xE6","\xC6"],KeyB:["b","B","\u201D","\u2019"],KeyC:["c","C","\xA2","\xA9"],KeyD:["d","D","\xF0","\xD0"],KeyE:["e","E","\u20AC","\xA2"],KeyF:["f","F","\u0111","\xAA"],KeyG:["g","G","\u014B","\u014A"],KeyH:["h","H","\u0127","\u0126"],KeyI:["i","I","\u2192","\u0131"],KeyJ:["j","J","\u0309","\u031B"],KeyK:["k","K","\u0138","&"],KeyL:["l","L","\u0142","\u0141"],KeyM:["m","M","\xB5","\xBA"],KeyN:["n","N","n","N"],KeyO:["o","O","\xF8","\xD8"],KeyP:["p","P","\xFE","\xDE"],KeyQ:["q","Q","@","\u03A9"],KeyR:["r","R","\xB6","\xAE"],KeyS:["s","S","\xDF","\xA7"],KeyT:["t","T","\u0167","\u0166"],KeyU:["u","U","\u2193","\u2191"],KeyV:["v","V","\u201C","\u2018"],KeyW:["w","W","\u0142","\u0141"],KeyX:["x","X","\xBB",">"],KeyY:["y","Y","\u2190","\xA5"],KeyZ:["z","Z","\xAB","<"],Digit1:["1","!","|","\xA1"],Digit2:["2",'"',"@","\u215B"],Digit3:["3","\xB7","#","\xA3"],Digit4:["4","$","~","$"],Digit5:["5","%","\xBD","\u215C"],Digit6:["6","&","\xAC","\u215D"],Digit7:["7","/","{","\u215E"],Digit8:["8","(","[","\u2122"],Digit9:["9",")","]","\xB1"],Digit0:["0","=","}","\xB0"],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:["'","?","\\","\xBF"],Equal:["\xA1","\xBF","\u0303","~"],BracketLeft:["\u0300","\u0302","[","\u030A"],BracketRight:["+","*","]","\u0304"],Backslash:["\xE7","\xC7","}","\u0306"],Semicolon:["\xF1","\xD1","~","\u030B"],Quote:["\u0301","\u0308","{","{"],Backquote:["\xBA","\xAA","\\","\\"],Comma:[",",";","\u2500","\xD7"],Period:[".",":","\xB7","\xF7"],Slash:["-","_","\u0323","\u0307"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadEnter:["\r","\r","\r","\r"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xA6"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}};function keystrokeModifiersFromString(key){const segments=key.split("+");const result={shift:false,alt:false,cmd:false,win:false,meta:false,ctrl:false,key:segments.pop()};if(segments.includes("shift"))result.shift=true;if(segments.includes("alt"))result.alt=true;if(segments.includes("ctrl"))result.ctrl=true;if(segments.includes("cmd"))result.cmd=true;if(segments.includes("win"))result.win=true;if(segments.includes("meta"))result.meta=true;return result;}
function keystrokeModifiersToString(key){let result="";if(key.shift)result+="shift+";if(key.alt)result+="alt+";if(key.ctrl)result+="ctrl+";if(key.cmd)result+="cmd+";if(key.win)result+="win+";if(key.meta)result+="meta+";return result+key.key;}
var BASE_LAYOUT_MAPPING={enter:"[Enter]",escape:"[Escape]",backspace:"[Backspace]",tab:"[Tab]",space:"[Space]",pausebreak:"[Pause]",insert:"[Insert]",home:"[Home]",pageup:"[PageUp]",delete:"[Delete]",end:"[End]",pagedown:"[PageDown]",right:"[ArrowRight]",left:"[ArrowLeft]",down:"[ArrowDown]",up:"[ArrowUp]",numpad0:"[Numpad0]",numpad1:"[Numpad1]",numpad2:"[Numpad2]",numpad3:"[Numpad3]",numpad4:"[Numpad4]",numpad5:"[Numpad5]",numpad6:"[Numpad6]",numpad7:"[Numpad7]",numpad8:"[Numpad8]",numpad9:"[Numpad9]","numpad_divide":"[NumpadDivide]","numpad_multiply":"[NumpadMultiply]","numpad_subtract":"[NumpadSubtract]","numpad_add":"[NumpadAdd]","numpad_decimal":"[NumpadDecimal]","numpad_separator":"[NumpadComma]",capslock:"[Capslock]",f1:"[F1]",f2:"[F2]",f3:"[F3]",f4:"[F4]",f5:"[F5]",f6:"[F6]",f7:"[F7]",f8:"[F8]",f9:"[F9]",f10:"[F10]",f11:"[F11]",f12:"[F12]",f13:"[F13]",f14:"[F14]",f15:"[F15]",f16:"[F16]",f17:"[F17]",f18:"[F18]",f19:"[F19]"};var gKeyboardLayouts=[];var gKeyboardLayout;function platform(){switch(osPlatform()){case"macos":case"ios":return"apple";case"windows":return"windows";}
return"linux";}
function register(layout){if(!layout.platform||layout.platform===platform())
gKeyboardLayouts.push(layout);}
function getCodeForKey(k,layout){var _a3;const result={shift:false,alt:false,cmd:false,win:false,meta:false,ctrl:false,key:""};if(!k)return result;for(const[key,value]of Object.entries(layout.mapping)){if(value[0]===k){result.key=`[${key}]`;return result;}
if(value[1]===k){result.shift=true;result.key=`[${key}]`;return result;}
if(value[2]===k){result.alt=true;result.key=`[${key}]`;return result;}
if(value[3]===k){result.shift=true;result.alt=true;result.key=`[${key}]`;return result;}}
result.key=(_a3=BASE_LAYOUT_MAPPING[k])!=null?_a3:"";return result;}
function normalizeKeyboardEvent(evt){if(evt.code)return evt;const mapping=Object.entries(getActiveKeyboardLayout().mapping);let altKey=false;let shiftKey=false;let code="";for(let index=0;index<4;index++){for(const[key,value]of mapping){if(value[index]===evt.key){code=key;if(index===3){altKey=true;shiftKey=true;}else if(index===2)altKey=true;else if(index===1)shiftKey=true;break;}}
if(code)break;}
return new KeyboardEvent(evt.type,__spreadProps(__spreadValues({},evt),{altKey,shiftKey,code}));}
function validateKeyboardLayout(evt){var _a3,_b3;if(!evt)return;if(evt.key==="Unidentified")return;if(evt.key==="Dead")return;const index=evt.shiftKey&&evt.altKey?3:evt.altKey?2:evt.shiftKey?1:0;for(const layout of gKeyboardLayouts){if(((_a3=layout.mapping[evt.code])==null?void 0:_a3[index])===evt.key){layout.score+=1;}else if((_b3=layout.mapping[evt.code])==null?void 0:_b3[index]){layout.score=0;}}
gKeyboardLayouts.sort((a,b)=>b.score-a.score);}
function setKeyboardLayoutLocale(locale){gKeyboardLayout=gKeyboardLayouts.find((x)=>locale.startsWith(x.locale));}
function getActiveKeyboardLayout(){return gKeyboardLayout!=null?gKeyboardLayout:gKeyboardLayouts[0];}
function getDefaultKeyboardLayout(){switch(platform()){case"apple":return APPLE_ENGLISH;case"windows":return WINDOWS_ENGLISH;case"linux":return LINUX_ENGLISH;}
return APPLE_ENGLISH;}
switch(platform()){case"apple":register(APPLE_ENGLISH);register(APPLE_FRENCH);register(APPLE_SPANISH);register(APPLE_GERMAN);break;case"windows":register(WINDOWS_ENGLISH);register(WINDOWS_FRENCH);register(WINDOWS_SPANISH);register(WINDOWS_GERMAN);break;case"linux":register(LINUX_ENGLISH);register(LINUX_FRENCH);register(LINUX_SPANISH);register(LINUX_GERMAN);break;}
register(DVORAK);function getKeybindingMarkup(keybinding){var _a3;const useGlyph=/macos|ios/.test(osPlatform());const segments=keybinding.split("+");let result="";for(const segment of segments){if(result){result+=useGlyph?"\u2009":'<span class="ML__shortcut-join">+</span>';}
if(segment.startsWith("[Key"))result+=segment.slice(4,5);else if(segment.startsWith("Key"))result+=segment.slice(3,4);else if(segment.startsWith("[Digit"))result+=segment.slice(6,7);else if(segment.startsWith("Digit"))result+=segment.slice(5,6);else{result+=(_a3={"cmd":"\u2318","meta":useGlyph?"\u2318":"Ctrl","shift":useGlyph?"\u21E7":"Shift","alt":useGlyph?"\u2325":"Alt","ctrl":useGlyph?"\u2303":"Ctrl","\n":useGlyph?"\u23CE":"Return","[return]":useGlyph?"\u23CE":"Return","[enter]":useGlyph?"\u2324":"Enter","[tab]":useGlyph?"\u21E5":"Tab","[escape]":"Esc","[backspace]":useGlyph?"\u232B":"Backspace","[delete]":useGlyph?"\u2326":"Del","[pageup]":useGlyph?"\u21DE":"Page Up","[pagedown]":useGlyph?"\u21DF":"Page Down","[home]":useGlyph?"\u2912":"Home","[end]":useGlyph?"\u2913":"End","[space]":"Space","[equal]":"=","[minus]":"-","[comma]":",","[slash]":"/","[backslash]":"\\","[bracketleft]":"[","[bracketright]":"]","semicolon":";","period":".","comma":",","minus":"-","equal":"=","quote":"'","backslash":"\\","intlbackslash":"\\","backquote":"`","slash":"/","numpadmultiply":"* &#128290;","numpaddivide":"/ &#128290;","numpadsubtract":"- &#128290;","numpadadd":"+ &#128290;","numpaddecimal":". &#128290;","numpadcomma":", &#128290;","help":"help","left":"\u21E0","up":"\u21E1","right":"\u21E2","down":"\u21E3","[arrowleft]":"\u21E0","[arrowup]":"\u21E1","[arrowright]":"\u21E2","[arrowdown]":"\u21E3"}[segment.toLowerCase()])!=null?_a3:segment.toUpperCase();}}
return result;}
function eventLocation(evt){if(evt instanceof MouseEvent||evt instanceof PointerEvent)
return{x:evt.clientX,y:evt.clientY};if(typeof TouchEvent!=="undefined"&&evt instanceof TouchEvent){const result=[...evt.touches].reduce((acc,x)=>({x:acc.x+x.clientX,y:acc.y+x.clientY}),{x:0,y:0});const l=evt.touches.length;return{x:result.x/l,y:result.y/l};}
return void 0;}
function keyboardModifiersFromEvent(ev){const result={alt:false,control:false,shift:false,meta:false};if(ev instanceof MouseEvent||ev instanceof PointerEvent||typeof TouchEvent!=="undefined"&&ev instanceof TouchEvent||ev instanceof KeyboardEvent){if(ev.altKey)result.alt=true;if(ev.ctrlKey)result.control=true;if(ev.metaKey)result.meta=true;if(ev.shiftKey)result.shift=true;}
return result;}
function equalKeyboardModifiers(a,b){if(!a&&b||a&&!b)return false;if(!a||!b)return true;return a.alt===b.alt&&a.control===b.control&&a.shift===b.shift&&a.meta===b.meta;}
var PRINTABLE_KEYCODE=new Set(["Backquote","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Minus","Equal","IntlYen","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","IntlRo","Space","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadAdd","NumpadComma","NumpadDecimal","NumpadDivide","NumpadEqual","NumpadHash","NumpadMultiply","NumpadParenLeft","NumpadParenRight","NumpadStar","NumpadSubstract"]);function mightProducePrintableCharacter(evt){if(evt.ctrlKey||evt.metaKey)return false;if(["Dead","Process"].includes(evt.key))return false;if(evt.code==="")return true;return PRINTABLE_KEYCODE.has(evt.code);}
function deepActiveElement(){var _a3;let a=document.activeElement;while((_a3=a==null?void 0:a.shadowRoot)==null?void 0:_a3.activeElement)a=a.shadowRoot.activeElement;return a;}
var Scrim=class _Scrim{static get scrim(){if(!_Scrim._scrim)_Scrim._scrim=new _Scrim();return _Scrim._scrim;}
static open(options){_Scrim.scrim.open(options);}
static close(){_Scrim.scrim.close();}
static get state(){return _Scrim.scrim.state;}
static get element(){return _Scrim.scrim.element;}
constructor(options){var _a3,_b3;this.lightDismiss=(_a3=options==null?void 0:options.lightDismiss)!=null?_a3:true;this.translucent=(_b3=options==null?void 0:options.translucent)!=null?_b3:false;this.state="closed";}
get element(){if(this._element)return this._element;const element=document.createElement("div");element.setAttribute("role","presentation");element.style.position="fixed";element.style.contain="content";element.style.top="0";element.style.left="0";element.style.right="0";element.style.bottom="0";element.style.zIndex="var(--scrim-zindex, 10099)";element.style.outline="none";if(this.translucent){element.style.background="rgba(255, 255, 255, .2)";element.style["backdropFilter"]="contrast(40%)";}else element.style.background="transparent";this._element=element;return element;}
open(options){var _a3;if(this.state!=="closed")return;this.state="opening";this.onDismiss=options==null?void 0:options.onDismiss;this.savedActiveElement=deepActiveElement();const{element}=this;((_a3=options==null?void 0:options.root)!=null?_a3:document.body).appendChild(element);element.addEventListener("click",this);document.addEventListener("touchmove",this,false);document.addEventListener("scroll",this,false);const scrollbarWidth=window.innerWidth-document.documentElement.clientWidth;this.savedMarginRight=document.body.style.marginRight;this.savedOverflow=document.body.style.overflow;document.body.style.overflow="hidden";const marginRight=Number.parseFloat(getComputedStyle(document.body).marginRight);document.body.style.marginRight=`${marginRight + scrollbarWidth}px`;const mlkPlate=document.querySelector(".MLK__plate");if(mlkPlate instanceof HTMLElement){this.savedMlkPaddingRight=mlkPlate.style.paddingRight;const mlkPaddingRight=Number.parseFloat(getComputedStyle(mlkPlate).paddingRight);mlkPlate.style.paddingRight=`${mlkPaddingRight + scrollbarWidth}px`;}
if(options==null?void 0:options.child)element.append(options.child);this.state="open";}
close(){var _a3,_b3,_c2,_d2,_e;if(this.state!=="open"){console.assert(this.element.parentElement!==null);return;}
this.state="closing";if(typeof this.onDismiss==="function")this.onDismiss();this.onDismiss=void 0;const{element}=this;element.removeEventListener("click",this);document.removeEventListener("touchmove",this,false);document.removeEventListener("scroll",this,false);element.remove();document.body.style.overflow=(_a3=this.savedOverflow)!=null?_a3:"";document.body.style.marginRight=(_b3=this.savedMarginRight)!=null?_b3:"";const mlkPlate=document.querySelector(".MLK__plate");if(mlkPlate instanceof HTMLElement)
mlkPlate.style.paddingRight=(_c2=this.savedMlkPaddingRight)!=null?_c2:"";if(deepActiveElement()!==this.savedActiveElement)
(_e=(_d2=this.savedActiveElement)==null?void 0:_d2.focus)==null?void 0:_e.call(_d2);element.innerHTML="";this.state="closed";}
handleEvent(ev){if(this.lightDismiss){if(ev.target===this._element&&ev.type==="click"){this.close();ev.preventDefault();ev.stopPropagation();}else if(ev.target===document&&(ev.type==="touchmove"||ev.type==="scroll")){this.close();ev.preventDefault();ev.stopPropagation();}}}};function delegateKeyboardEvents(keyboardSink,element,delegate){let keydownEvent=null;let keypressEvent=null;let compositionInProgress=false;let focusInProgress=false;let blurInProgress=false;const controller=new AbortController();const signal=controller.signal;keyboardSink.addEventListener("keydown",(event)=>{if(compositionInProgress||event.key==="Process"||event.code==="CapsLock"||/(Control|Meta|Alt|Shift)(Left|Right)/.test(event.code)){keydownEvent=null;return;}
keydownEvent=event;keypressEvent=null;if(!delegate.onKeystroke(event))keydownEvent=null;else keyboardSink.textContent="";},{capture:true,signal});keyboardSink.addEventListener("keypress",(event)=>{if(compositionInProgress)return;if(keydownEvent&&keypressEvent)delegate.onKeystroke(keydownEvent);keypressEvent=event;},{capture:true,signal});keyboardSink.addEventListener("compositionstart",(event)=>{keyboardSink.textContent="";compositionInProgress=true;delegate.onCompositionStart(event.data);},{capture:true,signal});keyboardSink.addEventListener("compositionupdate",(ev)=>{if(!compositionInProgress)return;delegate.onCompositionUpdate(ev.data);},{capture:true,signal});keyboardSink.addEventListener("compositionend",(ev)=>{keyboardSink.textContent="";if(!compositionInProgress)return;compositionInProgress=false;delegate.onCompositionEnd(ev.data);},{capture:true,signal});keyboardSink.addEventListener("beforeinput",(ev)=>ev.stopImmediatePropagation(),{signal});keyboardSink.addEventListener("input",(ev)=>{var _a3;if(compositionInProgress)return;keyboardSink.textContent="";if(ev.inputType==="insertCompositionText")return;if(ev.inputType==="insertFromPaste"){ev.preventDefault();ev.stopPropagation();return;}
delegate.onInput((_a3=ev.data)!=null?_a3:"");ev.preventDefault();ev.stopPropagation();},{signal});keyboardSink.addEventListener("paste",(event)=>{keyboardSink.focus({preventScroll:true});keyboardSink.textContent="";if(!delegate.onPaste(event))event.preventDefault();event.stopImmediatePropagation();},{signal});keyboardSink.addEventListener("cut",(ev)=>delegate.onCut(ev),{capture:true,signal});keyboardSink.addEventListener("copy",(ev)=>delegate.onCopy(ev),{capture:true,signal});keyboardSink.addEventListener("blur",(event)=>{var _a3,_b3;if(((_b3=(_a3=event["relatedTarget"])==null?void 0:_a3["_mathfield"])==null?void 0:_b3["element"])===element){keyboardSink.focus({preventScroll:true});event.preventDefault();event.stopPropagation();return;}
let isInsideKeyboard=false;let target=event.relatedTarget;while(target){if(target.classList.contains("ML__keyboard")){isInsideKeyboard=true;break;}
target=target.parentElement;}
if(isInsideKeyboard){keyboardSink.focus({preventScroll:true});event.preventDefault();event.stopPropagation();return;}
const scrimState=Scrim.state;if(scrimState==="open"||scrimState==="opening"){event.preventDefault();event.stopPropagation();return;}
if(event.relatedTarget===event.target.getRootNode().host){event.preventDefault();event.stopPropagation();return;}
if(blurInProgress||focusInProgress)return;blurInProgress=true;keydownEvent=null;keypressEvent=null;delegate.onBlur();blurInProgress=false;},{capture:true,signal});keyboardSink.addEventListener("focus",(_evt)=>{if(blurInProgress||focusInProgress)return;focusInProgress=true;delegate.onFocus();focusInProgress=false;},{capture:true,signal});return{dispose:()=>controller.abort(),cancelComposition:()=>{if(!compositionInProgress)return;if(typeof keyboardSink.blur==="function")keyboardSink.blur();requestAnimationFrame(()=>keyboardSink.focus({preventScroll:true}));},blur:()=>{if(typeof keyboardSink.blur==="function"){blurInProgress=true;keyboardSink.blur();blurInProgress=false;}},focus:()=>{if(!focusInProgress&&typeof keyboardSink.focus==="function"){focusInProgress=true;keyboardSink.focus({preventScroll:true});focusInProgress=false;}},hasFocus:()=>{return deepActiveElement()===keyboardSink;},setAriaLabel:(value)=>keyboardSink.setAttribute("aria-label",value),setValue:(value)=>{var _a3;if(keyboardSink.textContent===value)return;keyboardSink.textContent=value;keyboardSink.style.left=`-1000px`;(_a3=window.getSelection())==null?void 0:_a3.selectAllChildren(keyboardSink);},moveTo:(x,y)=>{keyboardSink.style.top=`${y}px`;keyboardSink.style.left=`${x}px`;}};}
function keyboardEventToChar(evt){var _a3;if(!evt||!mightProducePrintableCharacter(evt))return"";let result;if(evt.key==="Unidentified"){if(evt.target)result=evt.target.value;}
result=(_a3=result!=null?result:evt.key)!=null?_a3:evt.code;if(/^(Dead|Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(result))
result="";return result;}
function keyboardEventToString(evt){evt=normalizeKeyboardEvent(evt);const modifiers=[];if(evt.ctrlKey)modifiers.push("ctrl");if(evt.metaKey)modifiers.push("meta");if(evt.altKey)modifiers.push("alt");if(evt.shiftKey)modifiers.push("shift");if(modifiers.length===0)return`[${evt.code}]`;modifiers.push(`[${evt.code}]`);return modifiers.join("+");}
function matchPlatform(p){if(isBrowser()){const plat=osPlatform();const isNeg=p.startsWith("!");const isMatch=p.endsWith(plat);if(isNeg&&!isMatch)return true;if(!isNeg&&isMatch)return true;}
if(p==="!other")return false;return p==="other";}
function getCommandForKeybinding(keybindings,mode,evt){if(keybindings.length===0)return"";const keystroke=keystrokeModifiersToString(keystrokeModifiersFromString(keyboardEventToString(evt)));const altKeystroke=keystrokeModifiersToString({key:evt.key,shift:evt.shiftKey,alt:evt.altKey,ctrl:evt.ctrlKey,meta:evt.metaKey||evt.ctrlKey&&/macos|ios/.test(osPlatform()),cmd:false,win:false});for(let i=keybindings.length-1;i>=0;i--){if(keybindings[i].key===keystroke||keybindings[i].key===altKeystroke){if(!keybindings[i].ifMode||keybindings[i].ifMode===mode)
return keybindings[i].command;}}
return"";}
function commandToString(command){let result=command;if(isArray(result)){result=result.length>0?result[0]+"("+result.slice(1).join("")+")":"";}
return result;}
function getKeybindingsForCommand(keybindings,command){let result=[];if(typeof command==="string"){const candidate=REVERSE_KEYBINDINGS[command];if(isArray(candidate))result=candidate.slice();else if(candidate)result.push(candidate);}
const normalizedCommand=commandToString(command);const regex=new RegExp("^"+normalizedCommand.replace("\\","\\\\").replace("|","\\|").replace("*","\\*").replace("$","\\$").replace("^","\\^")+"([^*a-zA-Z]|$)");for(const keybinding of keybindings){if(regex.test(commandToString(keybinding.command)))
result.push(keybinding.key);}
return result.map(getKeybindingMarkup);}
function normalizeKeybinding(keybinding,layout){if(keybinding.ifPlatform&&!/^!?(macos|windows|android|ios|chromeos|other)$/.test(keybinding.ifPlatform)){throw new Error(`Unexpected platform "${keybinding.ifPlatform}" for keybinding ${keybinding.key}`);}
if(keybinding.ifLayout!==void 0&&(layout.score===0||!keybinding.ifLayout.includes(layout.id)))
return void 0;const modifiers=keystrokeModifiersFromString(keybinding.key);let platform2=keybinding.ifPlatform;if(modifiers.cmd){if(platform2&&platform2!=="macos"&&platform2!=="ios"){throw new Error('Unexpected "cmd" modifier with platform "'+platform2+'"\n"cmd" modifier can only be used with macOS or iOS platform.');}
if(!platform2)platform2=osPlatform()==="ios"?"ios":"macos";modifiers.win=false;modifiers.cmd=false;modifiers.meta=true;}
if(modifiers.win){if(platform2&&platform2!=="windows"){throw new Error('Unexpected "win" modifier with platform "'+platform2+'"\n"win" modifier can only be used with Windows platform.');}
platform2="windows";modifiers.win=false;modifiers.cmd=false;modifiers.meta=true;}
if(platform2&&!matchPlatform(platform2))return void 0;if(/^\[.+\]$/.test(modifiers.key))
return __spreadProps(__spreadValues({},keybinding),{key:keystrokeModifiersToString(modifiers)});const code=getCodeForKey(modifiers.key,layout);if(!code)
return __spreadProps(__spreadValues({},keybinding),{key:keystrokeModifiersToString(modifiers)});if(code.shift&&modifiers.shift||code.alt&&modifiers.alt){throw new Error(`The keybinding ${keybinding.key} (${selectorToString(
          keybinding.command
        )}) is conflicting with the key combination ${keystrokeModifiersToString(
          code
        )} using the ${layout.displayName} keyboard layout`);}
code.shift=code.shift||modifiers.shift;code.alt=code.alt||modifiers.alt;code.meta=modifiers.meta;code.ctrl=modifiers.ctrl;return __spreadProps(__spreadValues({},keybinding),{key:keystrokeModifiersToString(code)});}
function selectorToString(selector){if(Array.isArray(selector)){const sel=[...selector];return sel.shift()+"("+sel.map((x)=>typeof x==="string"?`"${x}"`:x.toString()).join(", ")+")";}
return selector;}
function normalizeKeybindings(keybindings,layout){const errors=[];const result=[];for(const x of keybindings){try{const binding=normalizeKeybinding(x,layout);if(!binding)continue;const conflict=result.find((x2)=>x2.key===binding.key&&x2.ifMode===binding.ifMode);if(conflict){throw new Error(`Ambiguous key binding ${x.key} (${selectorToString(
              x.command
            )}) matches ${conflict.key} (${selectorToString(
              conflict.command
            )}) with the ${layout.displayName} keyboard layout`);}
result.push(binding);}catch(error){if(error instanceof Error)errors.push(error.message);}}
return[result,errors];}
var LatexModeEditor=class extends ModeEditor{constructor(){super("latex");}
createAtom(command){return new LatexAtom(command);}
onPaste(mathfield,data){if(!data)return false;const text=typeof data==="string"?data:data.getData("application/x-latex")||data.getData("text/plain");if(text&&mathfield.model.contentWillChange({inputType:"insertFromPaste",data:text})){mathfield.stopCoalescingUndo();mathfield.stopRecording();if(this.insert(mathfield.model,text)){mathfield.startRecording();mathfield.snapshot("paste");mathfield.model.contentDidChange({inputType:"insertFromPaste"});requestUpdate(mathfield);}
mathfield.startRecording();return true;}
return false;}
insert(model,text,options){if(!model.contentWillChange({data:text,inputType:"insertText"}))
return false;if(!options)options={};if(!options.insertionMode)options.insertionMode="replaceSelection";if(!options.selectionMode)options.selectionMode="placeholder";const{silenceNotifications}=model;if(options.silenceNotifications)model.silenceNotifications=true;const saveSilenceNotifications=model.silenceNotifications;model.silenceNotifications=true;if(options.insertionMode==="replaceSelection"&&!model.selectionIsCollapsed)
model.deleteAtoms(range(model.selection));else if(options.insertionMode==="replaceAll"){model.root.setChildren([],"body");model.position=0;}else if(options.insertionMode==="insertBefore")
model.collapseSelection("backward");else if(options.insertionMode==="insertAfter")
model.collapseSelection("forward");const newAtoms=[];for(const c of text)
if(COMMAND_MODE_CHARACTERS.test(c))newAtoms.push(new LatexAtom(c));let cursor=model.at(model.position);if(cursor instanceof LatexGroupAtom)cursor=cursor.lastChild;if(!(cursor.parent instanceof LatexGroupAtom)){const group=new LatexGroupAtom();cursor.parent.addChildAfter(group,cursor);cursor=group.firstChild;}
const lastNewAtom=cursor.parent.addChildrenAfter(newAtoms,cursor);model.silenceNotifications=saveSilenceNotifications;if(options.selectionMode==="before"){}else if(options.selectionMode==="item")
model.setSelection(model.anchor,model.offsetOf(lastNewAtom));else if(lastNewAtom)model.position=model.offsetOf(lastNewAtom);model.contentDidChange({data:text,inputType:"insertText"});model.silenceNotifications=silenceNotifications;return true;}};function getLatexGroup(model){return model.atoms.find((x)=>x.type==="latexgroup");}
function getLatexGroupBody(model){var _a3,_b3;const atom=getLatexGroup(model);return(_b3=(_a3=atom==null?void 0:atom.body)==null?void 0:_a3.filter((x)=>x.type==="latex"))!=null?_b3:[];}
function getCommandSuggestionRange(model,options){var _a3;let start=0;let found=false;const last=Number.isFinite(options==null?void 0:options.before)?(_a3=options==null?void 0:options.before)!=null?_a3:0:model.lastOffset;while(start<=last&&!found){const atom=model.at(start);found=atom instanceof LatexAtom&&atom.isSuggestion;if(!found)start++;}
if(!found)return[void 0,void 0];let end=start;let done=false;while(end<=last&&!done){const atom=model.at(end);done=!(atom instanceof LatexAtom&&atom.isSuggestion);if(!done)end++;}
return[start-1,end-1];}
new LatexModeEditor();function applyStyle2(mathfield,inStyle){mathfield.flushInlineShortcutBuffer();mathfield.stopCoalescingUndo();const style=validateStyle(mathfield,inStyle);const{model}=mathfield;if(model.selectionIsCollapsed){if(mathfield.defaultStyle.fontSeries&&style.fontSeries===mathfield.defaultStyle.fontSeries)
style.fontSeries="auto";if(style.fontShape&&style.fontShape===mathfield.defaultStyle.fontShape)
style.fontShape="auto";if(style.color&&style.color===mathfield.defaultStyle.color)
style.color="none";if(style.backgroundColor&&style.backgroundColor===mathfield.defaultStyle.backgroundColor)
style.backgroundColor="none";if(style.fontSize&&style.fontSize===mathfield.defaultStyle.fontSize)
style.fontSize="auto";mathfield.defaultStyle=__spreadValues(__spreadValues({},mathfield.defaultStyle),style);}else{mathfield.model.deferNotifications({content:true,type:"insertText"},()=>{model.selection.ranges.forEach((range2)=>applyStyle(model,range2,style,{operation:"toggle"}));mathfield.snapshot("style-change");});}
return true;}
register2({applyStyle:applyStyle2},{target:"mathfield",canUndo:true,changeContent:true});function validateStyle(mathfield,style){var _a3,_b3,_c2,_d2,_e,_f,_g,_h,_i,_j;const result={};if(typeof style.color==="string"){const newColor=(_b3=mathfield.colorMap((_a3=style.color)!=null?_a3:style.verbatimColor))!=null?_b3:"none";if(newColor!==style.color)
result.verbatimColor=(_c2=style.verbatimColor)!=null?_c2:style.color;result.color=newColor;}
if(typeof style.backgroundColor==="string"){const newColor=(_e=mathfield.backgroundColorMap((_d2=style.backgroundColor)!=null?_d2:style.verbatimBackgroundColor))!=null?_e:"none";if(newColor!==style.backgroundColor){result.verbatimBackgroundColor=(_f=style.verbatimBackgroundColor)!=null?_f:style.backgroundColor;}
result.backgroundColor=newColor;}
if(typeof style.fontFamily==="string")
result.fontFamily=style.fontFamily;if(typeof style.series==="string")
result.fontSeries=style.series;if(typeof style.fontSeries==="string")
result.fontSeries=style.fontSeries.toLowerCase();if(result.fontSeries){result.fontSeries=(_g={bold:"b",medium:"m",normal:"m"}[result.fontSeries])!=null?_g:result.fontSeries;}
if(typeof style.shape==="string")
result.fontShape=style.shape;if(typeof style.fontShape==="string")
result.fontShape=style.fontShape.toLowerCase();if(result.fontShape){result.fontShape=(_h={italic:"it",up:"n",upright:"n",normal:"n"}[result.fontShape])!=null?_h:result.fontShape;}
if(style.variant)result.variant=style.variant.toLowerCase();if(style.variantStyle)
result.variantStyle=style.variantStyle.toLowerCase();const size=(_i=style.size)!=null?_i:style.fontSize;if(typeof size==="number")
result.fontSize=Math.max(1,Math.min(10,size));else if(typeof size==="string"){result.fontSize=(_j={size1:1,size2:2,size3:3,size4:4,size5:5,size6:6,size7:7,size8:8,size9:9,size10:10}[size.toLowerCase()])!=null?_j:{tiny:1,scriptsize:2,footnotesize:3,small:4,normal:5,normalsize:5,large:6,Large:7,LARGE:8,huge:9,Huge:10}[size];}
return result;}
function defaultInsertStyleHook(mathfield,offset,info){var _a3,_b3;const model=mathfield.model;if(model.mode==="latex")return{};const bias=mathfield.styleBias;if(bias==="none")return mathfield.defaultStyle;if(model.mode==="text"){return(_b3=(_a3=model.at(bias==="right"?info.after:info.before))==null?void 0:_a3.style)!=null?_b3:mathfield.defaultStyle;}
if(model.mode==="math"){const atom=model.at(bias==="right"?info.after:info.before);if(!atom)return mathfield.defaultStyle;return __spreadProps(__spreadValues({},atom.style),{variant:"normal"});}
return{};}
function computeInsertStyle(mathfield){let hook=mathfield.options.onInsertStyle;if(hook===null)return{};if(hook===void 0)hook=defaultInsertStyleHook;const model=mathfield.model;const bias=mathfield.styleBias;const atom=model.at(model.position);const before=ungroup(model,atom,bias);const after=ungroup(model,atom.rightSibling,bias);return hook(mathfield,model.position,{before,after});}
function ungroup(model,atom,bias){var _a3;if(!atom)return-1;if(atom.type==="first"&&bias!=="right")return-1;if(atom.type!=="group")return model.offsetOf(atom);if(!atom.body||atom.body.length<2)return-1;if(((_a3=atom.body)==null?void 0:_a3.length)===1)return model.offsetOf(atom.body[0]);if(bias!=="right")return model.offsetOf(atom.body[0]);return model.offsetOf(atom.body[atom.body.length-1]);}
function removeSuggestion(mathfield){const group=getLatexGroupBody(mathfield.model).filter((x)=>x.isSuggestion);if(group.length===0)return;mathfield.model.position=mathfield.model.offsetOf(group[0].leftSibling);for(const atom of group)atom.parent.removeChild(atom);}
function updateAutocomplete(mathfield,options){var _a3;const{model}=mathfield;removeSuggestion(mathfield);for(const atom2 of getLatexGroupBody(model))atom2.isError=false;if(!model.selectionIsCollapsed||mathfield.options.popoverPolicy==="off"){hideSuggestionPopover(mathfield);return;}
const commandAtoms=[];let atom=model.at(model.position);while(atom&&atom instanceof LatexAtom&&/^[a-zA-Z\*]$/.test(atom.value))
atom=atom.leftSibling;if(atom&&atom instanceof LatexAtom&&atom.value==="\\"){commandAtoms.push(atom);atom=atom.rightSibling;while(atom&&atom instanceof LatexAtom&&/^[a-zA-Z\*]$/.test(atom.value)){commandAtoms.push(atom);atom=atom.rightSibling;}}
const command=commandAtoms.map((x)=>x.value).join("");const suggestions=suggest(mathfield,command);if(suggestions.length===0){if(/^\\[a-zA-Z\*]+$/.test(command))
for(const atom2 of commandAtoms)atom2.isError=true;hideSuggestionPopover(mathfield);return;}
const index=(_a3=options==null?void 0:options.atIndex)!=null?_a3:0;mathfield.suggestionIndex=index<0?suggestions.length-1:index%suggestions.length;const suggestion=suggestions[mathfield.suggestionIndex];if(suggestion!==command){const lastAtom=commandAtoms[commandAtoms.length-1];lastAtom.parent.addChildrenAfter([...suggestion.slice(command.length-suggestion.length)].map((x)=>new LatexAtom(x,{isSuggestion:true})),lastAtom);render(mathfield,{interactive:true});}
showSuggestionPopover(mathfield,suggestions);}
function acceptCommandSuggestion(model){const[from,to]=getCommandSuggestionRange(model,{before:model.position});if(from===void 0||to===void 0)return false;let result=false;model.getAtoms([from,to]).forEach((x)=>{if(x.isSuggestion){x.isSuggestion=false;result=true;}});return result;}
function complete(mathfield,completion="accept",options){var _a3,_b3;hideSuggestionPopover(mathfield);const latexGroup=getLatexGroup(mathfield.model);if(!latexGroup)return false;if(completion==="accept-suggestion"||completion==="accept-all"){const suggestions=getLatexGroupBody(mathfield.model).filter((x)=>x.isSuggestion);if(suggestions.length!==0){for(const suggestion of suggestions)suggestion.isSuggestion=false;mathfield.model.position=mathfield.model.offsetOf(suggestions[suggestions.length-1]);}
if(completion==="accept-suggestion")return suggestions.length!==0;}
const body=getLatexGroupBody(mathfield.model).filter((x)=>!x.isSuggestion);const latex=body.map((x)=>x.value).join("");const newPos=latexGroup.leftSibling;latexGroup.parent.removeChild(latexGroup);mathfield.model.position=mathfield.model.offsetOf(newPos);mathfield.switchMode((_a3=options==null?void 0:options.mode)!=null?_a3:"math");if(completion==="reject")return true;const style=__spreadValues({},computeInsertStyle(mathfield));if(!/^[a-zA-Z0-9]$/.test(latex)&&mathfield.styleBias!=="none"){style.variant="normal";style.variantStyle=void 0;}
ModeEditor.insert(mathfield.model,latex,{selectionMode:((_b3=options==null?void 0:options.selectItem)!=null?_b3:false)?"item":"placeholder",format:"latex",mode:"math",style});mathfield.snapshot();mathfield.model.announce("replacement");mathfield.switchMode("math");return true;}
function getSharedElement(id){var _a3;let result=document.getElementById(id);if(result){result.dataset.refcount=Number(Number.parseInt((_a3=result.dataset.refcount)!=null?_a3:"0")+1).toString();}else{result=document.createElement("div");result.setAttribute("aria-hidden","true");result.dataset.refcount="1";result.id=id;document.body.append(result);}
return result;}
function releaseSharedElement(id){var _a3;const element=document.getElementById(id);if(!element)return;const refcount=Number.parseInt((_a3=element.getAttribute("data-refcount"))!=null?_a3:"0");if(refcount<=1)element.remove();else element.dataset.refcount=Number(refcount-1).toString();}
function latexToMarkup(mf,latex){const context=new Context({from:mf.context});const root=new Atom({mode:"math",type:"root",body:parseLatex(latex,{context})});const box=coalesce(applyInterBoxSpacing(new Box(root.render(context),{classes:"ML__base"}),context));return makeStruts(box,{classes:"ML__latex"}).toMarkup();}
function showSuggestionPopover(mf,suggestions){var _a3;if(suggestions.length===0){hideSuggestionPopover(mf);return;}
let template="";for(const[i,suggestion]of suggestions.entries()){const command=suggestion;const commandMarkup=latexToMarkup(mf,suggestion);const keybinding=getKeybindingsForCommand(mf.keybindings,command).join("<br>");template+=`<li role="button" data-command="${command}" ${i === mf.suggestionIndex ? "class=ML__popover__current" : ""}><span class="ML__popover__latex">${command}</span><span class="ML__popover__command">${commandMarkup}</span>`;if(keybinding)
template+=`<span class="ML__popover__keybinding">${keybinding}</span>`;template+="</li>";}
const panel=createSuggestionPopover(mf,`<ul>${template}</ul>`);if(isSuggestionPopoverVisible()){(_a3=panel.querySelector(".ML__popover__current"))==null?void 0:_a3.scrollIntoView({block:"nearest",inline:"nearest"});}
setTimeout(()=>{var _a4;if(panel&&!isSuggestionPopoverVisible()){panel.classList.add("is-visible");updateSuggestionPopoverPosition(mf);(_a4=panel.querySelector(".ML__popover__current"))==null?void 0:_a4.scrollIntoView({block:"nearest",inline:"nearest"});}},32);}
function isSuggestionPopoverVisible(){const panel=document.getElementById("mathlive-suggestion-popover");if(!panel)return false;return panel.classList.contains("is-visible");}
function updateSuggestionPopoverPosition(mf,options){var _a3,_b3,_c2;if(!mf.element||mf.element.mathfield!==mf)return;if(!isSuggestionPopoverVisible())return;if(((_a3=mf.model.at(mf.model.position))==null?void 0:_a3.type)!=="latex"){hideSuggestionPopover(mf);return;}
if(options==null?void 0:options.deferred){setTimeout(()=>updateSuggestionPopoverPosition(mf),32);return;}
const position=getCaretPoint(mf.field);if(!position)return;const viewportHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;const viewportWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;const scrollbarWidth=window.innerWidth-document.documentElement.clientWidth;const scrollbarHeight=window.innerHeight-document.documentElement.clientHeight;const virtualkeyboardHeight=(_c2=(_b3=window.mathVirtualKeyboard)==null?void 0:_b3.boundingRect.height)!=null?_c2:0;const panel=document.getElementById("mathlive-suggestion-popover");if(position.x+panel.offsetWidth/2>viewportWidth-scrollbarWidth){panel.style.left=`${viewportWidth - panel.offsetWidth - scrollbarWidth}px`;}else if(position.x-panel.offsetWidth/2<0)panel.style.left="0";else panel.style.left=`${position.x - panel.offsetWidth / 2}px`;const spaceAbove=position.y-position.height;const spaceBelow=viewportHeight-scrollbarHeight-virtualkeyboardHeight-position.y;if(spaceBelow<spaceAbove){panel.classList.add("ML__popover--reverse-direction");panel.classList.remove("top-tip");panel.classList.add("bottom-tip");panel.style.top=`${position.y - position.height - panel.offsetHeight - 15}px`;}else{panel.classList.remove("ML__popover--reverse-direction");panel.classList.add("top-tip");panel.classList.remove("bottom-tip");panel.style.top=`${position.y + 15}px`;}}
function hideSuggestionPopover(mf){mf.suggestionIndex=0;const panel=document.getElementById("mathlive-suggestion-popover");if(panel){panel.classList.remove("is-visible");panel.innerHTML="";}}
function createSuggestionPopover(mf,html){let panel=document.getElementById("mathlive-suggestion-popover");if(!panel){panel=getSharedElement("mathlive-suggestion-popover");injectStylesheet("suggestion-popover");injectStylesheet("core");panel.addEventListener("pointerdown",(ev)=>ev.preventDefault());panel.addEventListener("click",(ev)=>{let el=ev.target;while(el&&!el.dataset.command)el=el.parentElement;if(!el)return;complete(mf,"reject");ModeEditor.insert(mf.model,el.dataset.command,{selectionMode:"placeholder",format:"latex",mode:"math"});mf.dirty=true;mf.focus();});}
panel.innerHTML=globalThis.MathfieldElement.createHTML(html);return panel;}
function disposeSuggestionPopover(){if(!document.getElementById("mathlive-suggestion-popover"))return;releaseSharedElement("mathlive-suggestion-popover");releaseStylesheet("suggestion-popover");releaseStylesheet("core");}
function getFileUrl(){const stackTraceFrames=String(new Error().stack).replace(/^Error.*\n/,"").split("\n");if(stackTraceFrames.length===0){console.error(`Can't use relative paths to specify assets location because the sourcefile location could not be determined (unexpected stack trace format "${new Error().stack}").`);return"";}
let callerFrame=stackTraceFrames[1];let m=callerFrame.match(/http.*\.ts[\?:]/);if(m){callerFrame=stackTraceFrames[2];}
m=callerFrame.match(/(https?:.*):[0-9]+:[0-9]+/);if(!m){m=callerFrame.match(/at (.*(\.ts))[\?:]/);if(!m)m=callerFrame.match(/at (.*(\.mjs|\.js))[\?:]/);}
if(!m){console.error(stackTraceFrames);console.error(`Can't use relative paths to specify assets location because the source file location could not be determined (unexpected location "${callerFrame}").`);return"";}
return m[1];}
var gResolvedScriptUrl=null;var _a,_b;var gScriptUrl=((_b=(_a=globalThis==null?void 0:globalThis.document)==null?void 0:_a.currentScript)==null?void 0:_b.src)||getFileUrl();async function resolveUrl(url){if(/^(?:[a-z+]+:)?\/\//i.test(url)){try{return new URL(url).href;}catch(e){}
if(url.startsWith("//")){try{return new URL(`${window.location.protocol}${url}`).href;}catch(e){}}
return url;}
if(gResolvedScriptUrl===null){try{const response=await fetch(gScriptUrl,{method:"HEAD"});if(response.status===200){gResolvedScriptUrl=response.url;gResolvedScriptUrl=gResolvedScriptUrl.replace(/\/\+esm$/,"/");if(gResolvedScriptUrl.includes("/jsdelivr.net/")){gResolvedScriptUrl+="/";}}}catch(e){console.error(`Invalid URL "${url}" (relative to "${gScriptUrl}")`);}}
return new URL(url,gResolvedScriptUrl!=null?gResolvedScriptUrl:gScriptUrl).href;}
function makeFontFace(name,source,descriptors={}){return new FontFace(name,`url(${source}.woff2) format('woff2')`,descriptors);}
var gFontsState="not-loaded";async function reloadFonts(){gFontsState="not-loaded";return loadFonts();}
async function loadFonts(){var _a3;if(gFontsState!=="not-loaded")return;gFontsState="loading";const useStaticFonts=(_a3=getComputedStyle(document.documentElement).getPropertyValue("--ML__static-fonts"))!=null?_a3:false;if(useStaticFonts){gFontsState="ready";return;}
document.body.classList.remove("ML__fonts-did-not-load");if("fonts"in document){const fontFamilies=["KaTeX_Main","KaTeX_Math","KaTeX_AMS","KaTeX_Caligraphic","KaTeX_Fraktur","KaTeX_SansSerif","KaTeX_Script","KaTeX_Typewriter","KaTeX_Size1","KaTeX_Size2","KaTeX_Size3","KaTeX_Size4"];const fontsInDocument=Array.from(document.fonts).map((f)=>f.family);if(fontFamilies.every((x)=>fontsInDocument.includes(x))){gFontsState="ready";return;}
if(!globalThis.MathfieldElement.fontsDirectory){gFontsState="not-loaded";return;}
const fontsFolder=await resolveUrl(globalThis.MathfieldElement.fontsDirectory);if(!fontsFolder){document.body.classList.add("ML__fonts-did-not-load");gFontsState="error";return;}
const fonts=[["KaTeX_Main-Regular"],["KaTeX_Main-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_Main-Bold",{weight:"bold"}],["KaTeX_Main-Italic",{style:"italic"}],["KaTeX_Math-Italic",{style:"italic"}],["KaTeX_Math-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_AMS-Regular"],["KaTeX_Caligraphic-Regular"],["KaTeX_Caligraphic-Bold",{weight:"bold"}],["KaTeX_Fraktur-Regular"],["KaTeX_Fraktur-Bold",{weight:"bold"}],["KaTeX_SansSerif-Regular"],["KaTeX_SansSerif-Bold",{weight:"bold"}],["KaTeX_SansSerif-Italic",{style:"italic"}],["KaTeX_Script-Regular"],["KaTeX_Typewriter-Regular"],["KaTeX_Size1-Regular"],["KaTeX_Size2-Regular"],["KaTeX_Size3-Regular"],["KaTeX_Size4-Regular"]].map((x)=>makeFontFace(x[0].replace(/-[a-zA-Z]+$/,""),`${fontsFolder}/${x[0]}`,x[1]));try{const loadedFonts=await Promise.all(fonts.map((x)=>{try{return x.load();}catch(e){}
return void 0;}));loadedFonts.forEach((font)=>document.fonts.add(font));gFontsState="ready";return;}catch(error){console.error(`MathLive 0.105.0: The math fonts could not be loaded from "${fontsFolder}"`,{cause:error});document.body.classList.add("ML__fonts-did-not-load");}
gFontsState="error";}}
function hashCode(str,seed=0){let h1=3735928559^seed;let h2=1103547991^seed;for(let i=0;i<str.length;i++){const ch=str.charCodeAt(i);h1=Math.imul(h1^ch,2654435761);h2=Math.imul(h2^ch,1597334677);}
h1=Math.imul(h1^h1>>>16,2246822507);h1^=Math.imul(h2^h2>>>13,3266489909);h2=Math.imul(h2^h2>>>16,2246822507);h2^=Math.imul(h1^h1>>>13,3266489909);return 4294967296*(2097151&h2)+(h1>>>0);}
function requestUpdate(mathfield,options){if(!mathfield||mathfield.dirty)return;mathfield.resizeObserver.unobserve(mathfield.field);mathfield.dirty=true;requestAnimationFrame(()=>{if(isValidMathfield(mathfield)&&mathfield.dirty){mathfield.atomBoundsCache=new Map();render(mathfield,options);mathfield.atomBoundsCache=void 0;mathfield.resizeObserver.observe(mathfield.field);mathfield.resizeObserverStarted=true;}});}
function makeBox(mathfield,renderOptions){var _a3;renderOptions=renderOptions!=null?renderOptions:{};const context=new Context({from:__spreadProps(__spreadValues({},mathfield.context),{atomIdsSettings:{seed:renderOptions.forHighlighting?hashCode(Atom.serialize([mathfield.model.root],{expandMacro:false,defaultMode:mathfield.options.defaultMode})):"random",groupNumbers:(_a3=renderOptions.forHighlighting)!=null?_a3:false},letterShapeStyle:mathfield.options.letterShapeStyle}),mathstyle:mathfield.options.defaultMode==="inline-math"?"textstyle":"displaystyle"});const base=mathfield.model.root.render(context);const wrapper=makeStruts(applyInterBoxSpacing(base,context),{classes:mathfield.hasEditablePrompts?"ML__latex ML__prompting":"ML__latex",attributes:{"translate":"no","aria-hidden":"true"}});return wrapper;}
function contentMarkup(mathfield,renderOptions){try{const{model}=mathfield;model.root.caret=void 0;model.root.isSelected=false;model.root.containsCaret=true;for(const atom of model.atoms){atom.caret=void 0;atom.isSelected=false;atom.containsCaret=false;}
if(model.selectionIsCollapsed){const atom=model.at(model.position);atom.caret=mathfield.model.mode;let ancestor=atom.parent;while(ancestor){ancestor.containsCaret=true;ancestor=ancestor.parent;}}else{const atoms=model.getAtoms(model.selection,{includeChildren:true});for(const atom of atoms)atom.isSelected=true;}
const box=makeBox(mathfield,renderOptions);return box.toMarkup();}catch(e){console.error(e);return'<span class="ML__latex" translate="no" aria-hidden="true">\u{1F6AB}</span>';}}
function render(mathfield,renderOptions){if(!isValidMathfield(mathfield))return;renderOptions!=null?renderOptions:renderOptions={};const keyboardToggle=mathfield.element.querySelector("[part=virtual-keyboard-toggle]");if(keyboardToggle)
keyboardToggle.style.display=mathfield.hasEditableContent?"":"none";const field=mathfield.field;if(!field)return;const hasFocus=mathfield.isSelectionEditable&&mathfield.hasFocus();const isFocused=field.classList.contains("ML__focused");if(isFocused&&!hasFocus)field.classList.remove("ML__focused");else if(!isFocused&&hasFocus)field.classList.add("ML__focused");let content=contentMarkup(mathfield,renderOptions);const menuToggle=mathfield.element.querySelector("[part=menu-toggle]");if(menuToggle){let hideMenu=false;if(mathfield.disabled||mathfield.readOnly&&!mathfield.hasEditableContent||mathfield.userSelect==="none")
hideMenu=true;if(!hideMenu&&field.offsetWidth<50)hideMenu=true;menuToggle.style.display=hideMenu?"none":"";}
if(mathfield.model.atoms.length<=1){const placeholder=mathfield.options.contentPlaceholder;if(placeholder){content+=`<span part=placeholder class="ML__content-placeholder">${convertLatexToMarkup(
          placeholder
        )}</span>`;}}
field.innerHTML=globalThis.MathfieldElement.createHTML(content);renderSelection(mathfield,renderOptions.interactive);mathfield.dirty=false;}
function renderSelection(mathfield,interactive){const field=mathfield.field;if(!field)return;for(const element of field.querySelectorAll(".ML__selection, .ML__contains-highlight"))
element.remove();if(!(interactive!=null?interactive:false)&&gFontsState!=="error"&&gFontsState!=="ready"){setTimeout(()=>{if(gFontsState==="ready")renderSelection(mathfield);else setTimeout(()=>renderSelection(mathfield),128);},32);return;}
const model=mathfield.model;let _scaleFactor;const scaleFactor=()=>{if(_scaleFactor!==void 0)return _scaleFactor;const offsetWidth=field.offsetWidth;const actualWidth=field.getBoundingClientRect().width;_scaleFactor=Math.floor(actualWidth)/offsetWidth;if(isNaN(_scaleFactor))_scaleFactor=1;return _scaleFactor;};if(model.selectionIsCollapsed){updateSuggestionPopoverPosition(mathfield,{deferred:true});let atom=model.at(model.position);while(atom&&atom.type!=="prompt"&&!(atom.containsCaret&&atom.displayContainsHighlight))
atom=atom.parent;if((atom==null?void 0:atom.containsCaret)&&atom.displayContainsHighlight){const s=scaleFactor();const bounds=adjustForScrolling(mathfield,getAtomBounds(mathfield,atom),s);if(bounds){bounds.left/=s;bounds.right/=s;bounds.top/=s;bounds.bottom/=s;const element=document.createElement("div");element.classList.add("ML__contains-highlight");element.style.position="absolute";element.style.left=`${bounds.left + 1}px`;element.style.top=`${Math.ceil(bounds.top)}px`;element.style.width=`${Math.ceil(bounds.right - bounds.left)}px`;element.style.height=`${Math.ceil(bounds.bottom - bounds.top)}px`;field.insertBefore(element,field.childNodes[0]);}}
return;}
for(const x of unionRects(getSelectionBounds(mathfield,{excludeAtomsWithBackground:true}))){const s=scaleFactor();x.left/=s;x.right/=s;x.top/=s;x.bottom/=s;const selectionElement=document.createElement("div");selectionElement.classList.add("ML__selection");selectionElement.style.position="absolute";selectionElement.style.left=`${x.left}px`;selectionElement.style.top=`${x.top}px`;selectionElement.style.width=`${Math.ceil(x.right - x.left)}px`;selectionElement.style.height=`${Math.ceil(x.bottom - x.top - 1)}px`;field.insertBefore(selectionElement,field.childNodes[0]);}}
function unionRects(rects){let result=[];for(const rect of rects){let found=false;for(const rect2 of result){if(rect.left===rect2.left&&rect.right===rect2.right&&rect.top===rect2.top&&rect.bottom===rect2.bottom){found=true;break;}}
if(!found)result.push(rect);}
rects=result;result=[];for(const rect of rects){let count=0;for(const rect2 of rects){if(rect.left>=rect2.left&&rect.right<=rect2.right&&rect.top>=rect2.top&&rect.bottom<=rect2.bottom){count+=1;if(count>1)break;}}
if(count===1)result.push(rect);}
return result;}
function reparse(mathfield){if(!mathfield)return;const model=mathfield.model;const selection=model.selection;const content=Atom.serialize([model.root],{expandMacro:false,defaultMode:mathfield.options.defaultMode});ModeEditor.insert(model,content,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",silenceNotifications:true,mode:"math"});const wasSilent=model.silenceNotifications;model.silenceNotifications=true;model.selection=selection;model.silenceNotifications=wasSilent;requestUpdate(mathfield);}
function reparseAllMathfields(){for(const mathfield of document.querySelectorAll(".ML__mathfield"))
if("_mathfield"in mathfield)reparse(mathfield._mathfield);}
var HAPTIC_FEEDBACK_DURATION=3;var COMMANDS;function register2(commands,options){options=__spreadValues({target:"mathfield",canUndo:false,audioFeedback:void 0,changeContent:false,changeSelection:false},options!=null?options:{});if(!COMMANDS)COMMANDS={};for(const selector of Object.keys(commands)){console.assert(!COMMANDS[selector],"Selector already defined: ",selector);COMMANDS[selector]=__spreadProps(__spreadValues({},options),{fn:commands[selector]});}}
function getCommandInfo(command){let selector;if(Array.isArray(command)){if(command[0]==="performWithFeedback")return getCommandInfo(command[1]);selector=command[0];}else selector=command;return COMMANDS[selector];}
function getCommandTarget(command){var _a3;return(_a3=getCommandInfo(command))==null?void 0:_a3.target;}
function perform(mathfield,command){var _a3,_b3;command=parseCommand(command);if(!command)return false;let selector;let args=[];let handled=false;let dirty=false;if(isArray(command)){selector=command[0];args=command.slice(1);}else selector=command;const info=COMMANDS[selector];const commandTarget=info==null?void 0:info.target;if(commandTarget==="model"){if(!mathfield.isSelectionEditable&&(info==null?void 0:info.changeContent)){mathfield.model.announce("plonk");return false;}
if(/^(delete|add)/.test(selector)){if(selector!=="deleteBackward")mathfield.flushInlineShortcutBuffer();mathfield.snapshot(selector);}
if(!/^complete/.test(selector))removeSuggestion(mathfield);COMMANDS[selector].fn(mathfield.model,...args);updateAutocomplete(mathfield);dirty=true;handled=true;}else if(commandTarget==="virtual-keyboard"){dirty=(_b3=(_a3=window.mathVirtualKeyboard)==null?void 0:_a3.executeCommand(command))!=null?_b3:false;handled=true;}else if(COMMANDS[selector]){if(!mathfield.isSelectionEditable&&(info==null?void 0:info.changeContent)){mathfield.model.announce("plonk");return false;}
if(/^(undo|redo)/.test(selector))mathfield.flushInlineShortcutBuffer();dirty=COMMANDS[selector].fn(mathfield,...args);handled=true;}else throw new Error(`Unknown command "${selector}"`);if(commandTarget!=="virtual-keyboard"){if(!mathfield.model.selectionIsCollapsed||(info==null?void 0:info.changeSelection)&&selector!=="deleteBackward"){mathfield.flushInlineShortcutBuffer();if(!(info==null?void 0:info.changeContent))mathfield.stopCoalescingUndo();mathfield.defaultStyle={};}}
if(dirty)requestUpdate(mathfield);return handled;}
function performWithFeedback(mathfield,selector){var _a3;if(!mathfield)return false;mathfield.focus();if(mathfield_element_default.keypressVibration&&canVibrate())
navigator.vibrate(HAPTIC_FEEDBACK_DURATION);const info=getCommandInfo(selector);globalThis.MathfieldElement.playSound((_a3=info==null?void 0:info.audioFeedback)!=null?_a3:"keypress");const result=mathfield.executeCommand(selector);mathfield.scrollIntoView();return result;}
register2({performWithFeedback:(mathfield,command)=>performWithFeedback(mathfield,command)});function nextSuggestion(mathfield){updateAutocomplete(mathfield,{atIndex:mathfield.suggestionIndex+1});return false;}
function previousSuggestion(mathfield){updateAutocomplete(mathfield,{atIndex:mathfield.suggestionIndex-1});return false;}
register2({complete},{target:"mathfield",audioFeedback:"return",canUndo:true,changeContent:true,changeSelection:true});register2({dispatchEvent:(mathfield,event,detail)=>{var _a3,_b3;return(_b3=(_a3=mathfield.host)==null?void 0:_a3.dispatchEvent(new CustomEvent(event,{detail})))!=null?_b3:false;}},{target:"mathfield"});register2({nextSuggestion,previousSuggestion},{target:"mathfield",audioFeedback:"keypress",changeSelection:true});function parseCommand(command){if(!command)return void 0;if(isArray(command)&&command.length>0){const selector2=command[0];selector2.replace(/-\w/g,(m)=>m[1].toUpperCase());if(selector2==="performWithFeedback"&&command.length===2)
return[selector2,parseCommand(command[1])];return[selector2,...command.slice(1)];}
if(typeof command!=="string")return void 0;const match=command.trim().match(/^([a-zA-Z0-9-]+)\((.*)\)$/);if(match){const selector2=match[1];selector2.replace(/-\w/g,(m)=>m[1].toUpperCase());const args=match[2].split(",").map((x)=>x.trim());return[selector2,...args.map((arg)=>{if(/"[^"]*"/.test(arg))return arg.slice(1,-1);if(/'[^']*'/.test(arg))return arg.slice(1,-1);if(/^true$/.test(arg))return true;if(/^false$/.test(arg))return false;if(/^[-]?\d+$/.test(arg))return parseInt(arg,10);if(/^\{.*\}$/.test(arg)){try{return JSON.parse(arg);}catch(e){console.error("Invalid argument:",arg);return arg;}}
return parseCommand(arg);})];}
const selector=command;selector.replace(/-\w/g,(m)=>m[1].toUpperCase());return selector;}
var VIRTUAL_KEYBOARD_MESSAGE="mathlive#virtual-keyboard-message";function isVirtualKeyboardMessage(evt){var _a3;if(evt.type!=="message")return false;const msg=evt;return((_a3=msg.data)==null?void 0:_a3.type)===VIRTUAL_KEYBOARD_MESSAGE;}
var VirtualKeyboardProxy=class _VirtualKeyboardProxy{constructor(){this.targetOrigin=window.origin;this.originValidator="none";this._boundingRect=new DOMRect(0,0,0,0);this._isShifted=false;window.addEventListener("message",this);this.sendMessage("proxy-created");this.listeners={};}
static get singleton(){if(!this._singleton)this._singleton=new _VirtualKeyboardProxy();return this._singleton;}
getKeycap(_keycap){return void 0;}
setKeycap(keycap,value){this.sendMessage("update-setting",{setKeycap:{keycap,value}});}
set alphabeticLayout(value){this.sendMessage("update-setting",{alphabeticLayout:value});}
set layouts(value){this.sendMessage("update-setting",{layouts:value});}
get normalizedLayouts(){return[];}
set editToolbar(value){this.sendMessage("update-setting",{editToolbar:value});}
set container(value){throw new Error("Container inside an iframe cannot be changed");}
show(options){const success=this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:true},bubbles:true,cancelable:true,composed:true}));if(success){this.sendMessage("show",options);this.dispatchEvent(new Event("virtual-keyboard-toggle"));}}
hide(options){const success=this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:false},bubbles:true,cancelable:true,composed:true}));if(success){this.sendMessage("hide",options);this.dispatchEvent(new Event("virtual-keyboard-toggle"));}}
get isShifted(){return this._isShifted;}
get visible(){return this._boundingRect.height>0;}
set visible(value){if(value)this.show();else this.hide();}
get boundingRect(){return this._boundingRect;}
executeCommand(command){this.sendMessage("execute-command",{command});return true;}
updateToolbar(mf){this.sendMessage("update-toolbar",mf);}
update(mf){this.sendMessage("update-setting",mf);}
connect(){this.sendMessage("connect");}
disconnect(){this.sendMessage("disconnect");}
addEventListener(type,callback,_options){if(!this.listeners[type])this.listeners[type]=new Set();if(!this.listeners[type].has(callback))this.listeners[type].add(callback);}
dispatchEvent(event){if(!this.listeners[event.type]||this.listeners[event.type].size===0)
return true;this.listeners[event.type].forEach((x)=>{if(typeof x==="function")x(event);else x==null?void 0:x.handleEvent(event);});return!event.defaultPrevented;}
removeEventListener(type,callback,_options){if(this.listeners[type])this.listeners[type].delete(callback);}
handleEvent(evt){if(isVirtualKeyboardMessage(evt)){if(!validateOrigin(evt.origin,this.originValidator)){throw new DOMException(`Message from unknown origin (${evt.origin}) cannot be handled`,"SecurityError");}
this.handleMessage(evt.data);}}
handleMessage(msg){const{action}=msg;if(action==="execute-command"){const{command}=msg;const commandTarget=getCommandTarget(command);if(commandTarget==="virtual-keyboard")this.executeCommand(command);return;}
if(action==="synchronize-proxy"){this._boundingRect=msg.boundingRect;this._isShifted=msg.isShifted;return;}
if(action==="geometry-changed"){this._boundingRect=msg.boundingRect;this.dispatchEvent(new Event("geometrychange"));return;}}
sendMessage(action,payload={}){if(!window.top){throw new DOMException(`A frame does not have access to the top window and can\u2018t communicate with the keyboard. Review virtualKeyboardTargetOrigin and originValidator on mathfields embedded in an iframe`,"SecurityError");}
window.top.postMessage(__spreadValues({type:VIRTUAL_KEYBOARD_MESSAGE,action},payload),this.targetOrigin);}};var LAYOUTS={"numeric":{label:"123",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.numeric",rows:[[{latex:"x",shift:"y",variants:["y","z","t","r","x^2","x^n","x^{#?}","x_n","x_i","x_{#?}",{latex:"f(#?)",class:"small"},{latex:"g(#?)",class:"small"}]},{latex:"n",shift:"a",variants:["i","j","p","k","a","u"]},"[separator-5]","[7]","[8]","[9]","[/]","[separator-5]",{latex:"\\exponentialE",shift:"\\ln",variants:["\\exp","\\times 10^{#?}","\\ln","\\log_{10}","\\log","\\lg","\\operatorname{lb}"]},{latex:"\\imaginaryI",variants:["\\Re","\\Im","\\imaginaryJ","\\Vert #0 \\Vert"]},{latex:"\\pi",shift:"\\sin",variants:["\\prod",{latex:"\\theta",aside:"theta"},{latex:"\\rho",aside:"rho"},{latex:"\\tau",aside:"tau"},"\\sin","\\cos","\\tan"]}],[{label:"<",latex:"<",class:"hide-shift",shift:{latex:"\\le",label:"\u2264"}},{label:">",latex:">",class:"hide-shift",shift:{latex:"\\ge",label:"\u2265"}},"[separator-5]","[4]","[5]","[6]","[*]","[separator-5]",{class:"hide-shift",latex:"#@^2}",shift:"#@^{\\prime}}"},{latex:"#@^{#0}}",class:"hide-shift",shift:"#@_{#?}"},{class:"hide-shift",latex:"\\sqrt{#0}",shift:{latex:"\\sqrt[#0]{#?}}"}}],["[(]","[)]","[separator-5]","[1]","[2]","[3]","[-]","[separator-5]",{latex:"\\int^{\\infty}_{0}\\!#?\\,\\mathrm{d}x",class:"small hide-shift",shift:"\\int",variants:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},"\\mathrm{d}x",{latex:"\\dfrac{\\mathrm{d}}{\\mathrm{d} x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\partial"]},{class:"hide-shift",latex:"\\forall",shift:"\\exists"},{label:"[backspace]",width:1}],[{label:"[shift]",width:2},"[separator-5]","[0]","[.]","[=]","[+]","[separator-5]","[left]","[right]",{label:"[action]",width:1}]]},"greek":{label:"&alpha;&beta;&gamma;",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.greek",rows:[[{label:"<i>&#x03c6;</i>",class:"MLK__tex hide-shift",insert:"\\varphi",aside:"phi var.",shift:"\\Phi"},{label:"<i>&#x03c2;</i>",class:"MLK__tex hide-shift",insert:"\\varsigma",aside:"sigma var.",shift:"\\Sigma"},{label:"<i>&#x03f5;</i>",class:"MLK__tex hide-shift",insert:"\\epsilon",aside:"epsilon",shift:'\\char"0190'},{label:"<i>&rho;</i>",class:"MLK__tex hide-shift",insert:"\\rho",aside:"rho",shift:'\\char"3A1'},{label:"<i>&tau;</i>",class:"MLK__tex hide-shift",insert:"\\tau",aside:"tau",shift:'\\char"3A4'},{label:"<i>&upsilon;</i>",class:"MLK__tex hide-shift",insert:"\\upsilon",aside:"upsilon",shift:"\\Upsilon"},{label:"<i>&theta;</i>",class:"MLK__tex hide-shift",insert:"\\theta",aside:"theta",shift:"\\Theta"},{label:"<i>&iota;</i>",class:"MLK__tex hide-shift",insert:"\\iota",aside:"iota",shift:'\\char"399'},{label:"<i>&omicron;</i>",class:"MLK__tex hide-shift",insert:"\\omicron",aside:"omicron",shift:'\\char"39F'},{label:"<i>&pi;</i>",class:"MLK__tex hide-shift",insert:"\\pi",aside:"pi",shift:"\\Pi"}],["[separator-5]",{label:"<i>&alpha;</i>",class:"MLK__tex hide-shift",insert:"\\alpha",aside:"alpha",shift:'\\char"391'},{label:"<i>&sigma;</i>",class:"MLK__tex hide-shift",insert:"\\sigma",aside:"sigma",shift:"\\Sigma"},{label:"<i>&delta;</i>",class:"MLK__tex hide-shift",insert:"\\delta",aside:"delta",shift:"\\Delta"},{latex:"\\phi",class:"MLK__tex hide-shift",insert:"\\phi",aside:"phi",shift:"\\Phi"},{label:"<i>&gamma;</i>",class:"MLK__tex hide-shift",insert:"\\gamma",aside:"gamma",shift:"\\Gamma"},{label:"<i>&eta;</i>",class:"MLK__tex hide-shift",insert:"\\eta",aside:"eta",shift:'\\char"397'},{label:"<i>&xi;</i>",class:"MLK__tex hide-shift",insert:"\\xi",aside:"xi",shift:"\\Xi"},{label:"<i>&kappa;</i>",class:"MLK__tex hide-shift",insert:"\\kappa",aside:"kappa",shift:"\\Kappa"},{label:"<i>&lambda;</i>",class:"MLK__tex hide-shift",insert:"\\lambda",aside:"lambda",shift:"\\Lambda"},"[separator-5]"],["[shift]",{label:"<i>&zeta;</i>",class:"MLK__tex hide-shift",insert:"\\zeta",aside:"zeta",shift:'\\char"396'},{label:"<i>&chi;</i>",class:"MLK__tex hide-shift",insert:"\\chi",aside:"chi",shift:'\\char"3A7'},{label:"<i>&psi;</i>",class:"MLK__tex hide-shift",insert:"\\psi",aside:"psi",shift:"\\Psi"},{label:"<i>&omega;</i>",class:"MLK__tex hide-shift",insert:"\\omega",aside:"omega",shift:"\\Omega"},{label:"<i>&beta;</i>",class:"MLK__tex hide-shift",insert:"\\beta",aside:"beta",shift:'\\char"392'},{label:"<i>&nu;</i>",class:"MLK__tex hide-shift",insert:"\\nu",aside:"nu",shift:'\\char"39D'},{label:"<i>&mu;</i>",class:"MLK__tex hide-shift",insert:"\\mu",aside:"mu",shift:'\\char"39C'},"[backspace]"],["[separator]",{label:"<i>&#x03b5;</i>",class:"MLK__tex",insert:"\\varepsilon",aside:"epsilon var."},{label:"<i>&#x03d1;</i>",class:"MLK__tex",insert:"\\vartheta",aside:"theta var."},{label:"<i>&#x3f0;</i>",class:"MLK__tex",insert:"\\varkappa",aside:"kappa var."},{label:"<i>&#x03d6;</i>",class:"MLK__tex",insert:"\\varpi",aside:"pi var."},{label:"<i>&#x03f1;</i>",class:"MLK__tex",insert:"\\varrho",aside:"rho var."},"[left]","[right]","[action]"]]},"symbols":{label:"&infin;\u2260\u2208",labelClass:"MLK__tex",tooltip:"keyboard.tooltip.symbols",rows:[[{latex:"\\sin",shift:"\\sin^{-1}",variants:[{class:"small",latex:"\\sinh"},{class:"small",latex:"\\sin^{-1}"},{class:"small",latex:"\\operatorname{arsinh}"}]},"\\ln",{latex:"\\mathrm{abs}",insert:"\\mathrm{abs}\\left(#0\\right)"},{latex:"\\rightarrow",shift:"\\Rightarrow",variants:[{latex:"\\implies",aside:"implies"},{latex:"\\to",aside:"to"},"\\dashv",{latex:"\\roundimplies",aside:"round implies"}]},{latex:"\\exists",variants:["\\nexists"],shift:"\\nexists"},{latex:"\\in",shift:"\\notin",variants:["\\notin","\\owns"]},"\\cup",{latex:"\\overrightarrow{#@}",shift:"\\overleftarrow{#@}",variants:["\\overleftarrow{#@}","\\bar{#@}","\\vec{#@}","\\hat{#@}","\\check{#@}","\\dot{#@}","\\ddot{#@}","\\mathring{#@}","\\breve{#@}","\\acute{#@}","\\tilde{#@}","\\grave{#@}"]},{class:"small hide-shift",latex:"\\lim_{#?}",shift:"\\lim_{x\\to\\infty}",variants:[{class:"small",latex:"\\liminf_{#?}"},{class:"small",latex:"\\limsup_{#?}"}]},"\\exponentialE"],[{latex:"\\cos",shift:"\\cos^{-1}",variants:[{class:"small",latex:"\\cosh"},{class:"small",latex:"\\cos^{-1}"},{class:"small",latex:"\\operatorname{arcosh}"}]},{latex:"\\log",shift:"\\log_{10}",variants:["\\log_{#0}","\\log_{10}"]},"\\left\\vert#0\\right\\vert",{latex:"\\larr",shift:"\\lArr",variants:[{latex:"\\impliedby",aside:"implied by"},{latex:"\\gets",aside:"gets"},"\\lArr","\\vdash",{latex:"\\models",aside:"models"}]},{latex:"\\forall",shift:"\\lnot",variants:[{latex:"\\land",aside:"and"},{latex:"\\lor",aside:"or"},{latex:"\\oplus",aside:"xor"},{latex:"\\lnot",aside:"not"},{latex:"\\downarrow",aside:"nor"},{latex:"\\uparrow",aside:"nand"},{latex:"\\curlywedge",aside:"nor"},{latex:"\\bar\\curlywedge",aside:"nand"}]},{latex:"\\ni",shift:"\\not\\owns"},"\\cap",{latex:"\\overline{#@}",shift:"\\underline{#@}",variants:["\\overbrace{#@}","\\overlinesegment{#@}","\\overleftrightarrow{#@}","\\overrightarrow{#@}","\\overleftarrow{#@}","\\overgroup{#@}","\\underbrace{#@}","\\underlinesegment{#@}","\\underleftrightarrow{#@}","\\underrightarrow{#@}","\\underleftarrow{#@}","\\undergroup{#@}"]},{class:"hide-shift small",latex:"\\int",shift:"\\iint",variants:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\smallint",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},"\\intop","\\iiint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\ointctrclockwise","\\intctrclockwise"]},{latex:"\\pi",shift:"\\tau",variants:["\\tau"]}],[{latex:"\\tan",shift:"\\tan^{-1}",variants:[{class:"small",latex:"\\tanh"},{class:"small",latex:"\\tan^{-1}"},{class:"small",latex:"\\operatorname{artanh}"},{class:"small",latex:"\\arctan"},{class:"small",latex:"\\operatorname{arctg}"},{class:"small",latex:"\\operatorname{tg}"}]},{latex:"\\exp",insert:"\\exp\\left(#0\\right)",variants:["\\exponentialE^{#0}"]},"\\left\\Vert#0\\right\\Vert",{latex:"\\lrArr",shift:"\\leftrightarrow",variants:[{latex:"\\iff",aside:"if and only if"},"\\leftrightarrow","\\leftrightarrows","\\Leftrightarrow",{latex:"^\\biconditional",aside:"biconditional"}]},{latex:"\\vert",shift:"!"},{latex:"#@^{\\complement}",aside:"complement",variants:[{latex:"\\setminus",aside:"set minus"},{latex:"\\smallsetminus",aside:"small set minus"}]},{latex:"\\subset",shift:"\\subseteq",variants:["\\subset","\\subseteq","\\subsetneq","\\varsubsetneq","\\subsetneqq","\\nsubset","\\nsubseteq","\\supset","\\supseteq","\\supsetneq","\\supsetneqq","\\nsupset","\\nsupseteq"]},{latex:"#@^{\\prime}",shift:"#@^{\\doubleprime}",variants:["#@^{\\doubleprime}","#@\\degree"]},{latex:"\\mathrm{d}",shift:"\\partial",variants:["\\mathrm{d}x",{latex:"\\dfrac{\\mathrm{d}}{\\mathrm{d} x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\partial"]},{latex:"\\infty",variants:["\\aleph_0","\\aleph_1","\\omega","\\mathfrak{m}"]}],[{label:"[shift]",width:2},{class:"box",latex:",",shift:";",variants:[";","?"]},{class:"box",latex:"\\colon",shift:"\\Colon",variants:[{latex:"\\Colon",aside:"such that",class:"box"},{latex:":",aside:"ratio",class:"box"},{latex:"\\vdots",aside:"",class:"box"},{latex:"\\ddots",aside:"",class:"box"},{latex:"\\ldotp",aside:"low dot",class:"box"},{latex:"\\cdotp",aside:"center dot",class:"box"},{latex:"\\ldots",aside:"low ellipsis",class:"box"},{latex:"\\cdots",aside:"center ellipsis",class:"box"},{latex:"\\therefore",aside:"therefore",class:"box"},{latex:"\\because",aside:"because",class:"box"}]},{class:"box",latex:"\\cdot",aside:"centered dot",shift:"\\ast",variants:["\\circ","\\bigcirc","\\bullet","\\odot","\\oslash","\\circledcirc","\\ast","\\star","\\times","\\doteq","\\doteqdot"]},"[separator]","[left]","[right]",{label:"[backspace]",width:1,class:"action hide-shift"},{label:"[action]",width:1}]]},"compact":{label:"compact",rows:[["[+]","[-]","[*]","[/]","[=]","[.]","[(]","[)]","\\sqrt{#0}","#@^{#?}"],["[1]","[2]","[3]","[4]","[5]","[6]","[7]","[8]","[9]","[0]"],["[hr]"],["[undo]","[redo]","[separator]","[separator]","[separator]","[left]","[right]",{label:"[backspace]",class:"action hide-shift"},"[hide-keyboard]"]]},"minimalist":{label:"minimalist",layers:[{style:`
          div.minimalist-backdrop {
            display: flex;
            justify-content: center;
          }          
          div.minimalist-container {
            --keycap-height: 40px;
            --keycap-max-width: 53px;
            --keycap-small-font-size: 12px;
            background: var(--keyboard-background);
            padding: 20px 20px 0px 20px;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            border: 1px solid var(--keyboard-border);
            box-shadow: 0 0 32px rgb(0 0 0 / 30%);
          }        
        `,backdrop:"minimalist-backdrop",container:"minimalist-container",rows:[["+","-","\\times",{latex:"\\frac{#@}{#0}",class:"small"},"=","[.]","(",")",{latex:"\\sqrt{#0}",class:"small"},{latex:"#@^{#?}",class:"small"}],["1","2","3","4","5","6","7","8","9","0"],["[hr]"],["[undo]","[redo]","[separator]","[separator]","[separator]","[left]","[right]",{label:"[backspace]",class:"action hide-shift"},"[hide-keyboard]"]]}]},"numeric-only":{label:"123",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.numeric",id:"numeric-only",rows:[["7","8","9","[separator]",{label:"[backspace]",width:2}],["4","5","6","[separator]","[separator]","[separator]"],["1","2","3","[separator]","[separator]","[separator]"],["0",{label:"[.]",variants:[]},"-","[separator]","[left]","[right]"]]}};var VARIANTS2={"0":["\\varnothing","\\infty"],"1":["\\frac{1}{#@}","#@^{-1}","\\times 10^{#?}","\\phi","\\imaginaryI"],"2":["\\frac{1}{2}","#@^2","\\sqrt2","\\exponentialE"],"3":["\\frac{1}{3}","#@^3","\\sqrt3","\\pi"],"4":["\\frac{1}{4}","#@^4"],"5":["\\frac{1}{5}","#@^5","\\sqrt5"],"6":["\\frac{1}{6}","#@^6"],"7":["\\frac{1}{7}","#@^7"],"8":["\\frac{1}{8}","#@^8"],"9":["\\frac{1}{9}","#@^9"],".":[".",",",";","\\colon"],",":["{,}",".",";","\\colon"],"a":[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"},"\xE5","\xE0","\xE1","\xE2","\xE4","\xE6"],"A":[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"},"\xC5","\xC0","\xC1","\xC2","\xC4","\xC6"],"b":[{latex:"\\beth",aside:"beth"}],"c":[{latex:"\\C",aside:"set of complex numbers"},"\xE7"],"d":[{latex:"\\daleth",aside:"daleth"}],"e":[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn\u2019t"},"\xE8","\xE9","\xEA","\xEB"],"E":[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn\u2019t"},"\xC8","\xC9","\xCA","\xCB"],"g":[{latex:"\\gimel",aside:"gimel"}],"h":[{latex:"\\hbar",aside:"h bar"},{latex:"\\hslash",aside:"h slash"}],"i":[{latex:"\\imaginaryI",aside:"imaginary i"},"\xEC","\xED","\xEE","\xEF"],"I":[{latex:"\\imaginaryI",aside:"imaginary i"},"\xCC","\xCD","\xCE","\xCF"],"j":[{latex:"\\imaginaryJ",aside:"imaginary j"}],"l":[{latex:"\\ell",aside:"ell"}],"n":[{latex:"\\mathbb{N}",aside:"set of natural numbers"},"\xF1"],"o":["\xF8","\u0153","\xF2","\xF3","\xF4","\xF6"],"O":["\xF8","\u0152","\xD2","\xD3","\xD4","\xD6"],"p":[{latex:"\\mathbb{P}",aside:"set of primes"}],"q":[{latex:"\\mathbb{Q}",aside:"set of rational numbers"}],"r":[{latex:"\\mathbb{R}",aside:"set of real numbers"}],"u":["\xF9","\xFA","\xFB","\xFC"],"U":["\xD9","\xDA","\xDB","\xDC"],"z":[{latex:"\\mathbb{Z}",aside:"set of integers"}],"y":["\xFD","\xFF"],"Y":["\u0178"],"space":[{latex:'\\char"203A\\!\\char"2039',insert:"\\!",aside:"negative thin space<br>\u207B\xB3\u29F8\u2081\u2088 em"},{latex:'\\char"203A\\,\\char"2039',insert:"\\,",aside:"thin space<br>\xB3\u29F8\u2081\u2088 em"},{latex:'\\char"203A\\:\\char"2039',insert:"\\:",aside:"medium space<br>\u2074\u29F8\u2081\u2088 em"},{latex:'\\char"203A\\;\\char"2039',insert:"\\;",aside:"thick space<br>\u2075\u29F8\u2081\u2088 em"},{latex:'\\char"203A\\ \\char"2039',insert:"\\ ",aside:"\u2153 em"},{latex:'\\char"203A\\enspace\\char"2039',insert:"\\enspace",aside:"\xBD em"},{latex:'\\char"203A\\quad\\char"2039',insert:"\\quad",aside:"1 em"},{latex:'\\char"203A\\qquad\\char"2039',insert:"\\qquad",aside:"2 em"}]};var gVariantPanelController;function showVariantsPanel(element,onClose){var _a3,_b3,_c2,_d2,_e;const keyboard=VirtualKeyboard.singleton;if(!keyboard)return;const keycap=parentKeycap(element);let variantDef="";if(window.mathVirtualKeyboard.isShifted){const shiftedDefinition=(_a3=keyboard.getKeycap(keycap==null?void 0:keycap.id))==null?void 0:_a3.shift;if(typeof shiftedDefinition==="object"&&"variants"in shiftedDefinition)
variantDef=(_b3=shiftedDefinition.variants)!=null?_b3:"";}else variantDef=(_d2=(_c2=keyboard.getKeycap(keycap==null?void 0:keycap.id))==null?void 0:_c2.variants)!=null?_d2:"";if(typeof variantDef==="string"&&!hasVariants(variantDef)||Array.isArray(variantDef)&&variantDef.length===0){onClose==null?void 0:onClose();return;}
const variants={};let markup="";for(const variant of getVariants(variantDef)){const keycap2=normalizeKeycap(variant);const id=Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36);variants[id]=keycap2;const[keycapMarkup,keycapCls]=renderKeycap(keycap2);markup+=`<div id=${id} class="item ${keycapCls}">${keycapMarkup}</div>`;}
const variantPanel=document.createElement("div");variantPanel.setAttribute("aria-hidden","true");variantPanel.className="MLK__variant-panel";variantPanel.style.height="auto";const l=Object.keys(variants).length;let w=5;if(l===1)w=1;else if(l===2||l===4)w=2;else if(l===3||l===5||l===6)w=3;else if(l>=7&&l<14)w=4;variantPanel.style.width=`calc(var(--variant-keycap-length) * ${w} + 12px)`;variantPanel.innerHTML=mathfield_element_default.createHTML(markup);Scrim.open({root:(_e=keyboard==null?void 0:keyboard.container)==null?void 0:_e.querySelector(".ML__keyboard"),child:variantPanel});gVariantPanelController=new AbortController();const{signal}=gVariantPanelController;const position=element==null?void 0:element.getBoundingClientRect();if(position){if(position.top-variantPanel.clientHeight<0){variantPanel.style.width="auto";if(l<=6)
variantPanel.style.height="56px";else if(l<=12)
variantPanel.style.height="108px";else if(l<=18)
variantPanel.style.height="205px";else variantPanel.classList.add("compact");}
const left=Math.max(0,Math.min(window.innerWidth-variantPanel.offsetWidth,(position.left+position.right-variantPanel.offsetWidth)/2));const top=position.top-variantPanel.clientHeight+5;variantPanel.style.left=`${left}px`;variantPanel.style.top=`${top}px`;variantPanel.classList.add("is-visible");requestAnimationFrame(()=>{var _a4;variantPanel.addEventListener("pointerup",(ev)=>{const target=parentKeycap(ev.target);if(!(target==null?void 0:target.id)||!variants[target.id])return;executeKeycapCommand(variants[target.id]);hideVariantsPanel();onClose==null?void 0:onClose();ev.preventDefault();},{capture:true,passive:false,signal});variantPanel.addEventListener("pointerenter",(ev)=>{const target=parentKeycap(ev.target);if(!(target==null?void 0:target.id)||!variants[target.id])return;target.classList.add("is-active");},{capture:true,signal});variantPanel.addEventListener("pointerleave",(ev)=>{const target=parentKeycap(ev.target);if(ev.target&&"tagName"in ev.target&&typeof ev.target.tagName==="string"&&ev.target.tagName.toUpperCase()==="ASIDE")
return;if(!(target==null?void 0:target.id)||!variants[target.id])return;target.classList.remove("is-active");},{capture:true,signal});if((_a4=keyboard.getKeycap(keycap==null?void 0:keycap.id))==null?void 0:_a4.stickyVariantPanel){window.addEventListener("pointerdown",(ev)=>{if(!(ev.target instanceof Node))return;const isInside=variantPanel.contains(ev.target);if(ev.target===variantPanel||isInside)return;hideVariantsPanel();onClose==null?void 0:onClose();},{signal});}else{window.addEventListener("pointercancel",()=>{hideVariantsPanel();onClose==null?void 0:onClose();},{signal});window.addEventListener("pointerup",()=>{hideVariantsPanel();onClose==null?void 0:onClose();},{signal});}});}
return;}
function hideVariantsPanel(){gVariantPanelController==null?void 0:gVariantPanelController.abort();gVariantPanelController=null;if(Scrim.state==="open")Scrim.close();}
function makeVariants(id){if(id==="foreground-color"){const result=[];for(const color of Object.keys(FOREGROUND_COLORS)){result.push({class:"swatch-button",label:'<span style="border: 3px solid '+FOREGROUND_COLORS[color]+'"></span>',command:["applyStyle",{color}]});}
return result;}
if(id==="background-color"){const result=[];for(const color of Object.keys(BACKGROUND_COLORS)){result.push({class:"swatch-button",label:'<span style="background:'+BACKGROUND_COLORS[color]+'"></span>',command:["applyStyle",{backgroundColor:color}]});}
return result;}
return void 0;}
function hasVariants(id){return VARIANTS2[id]!==void 0;}
function getVariants(id){var _a3;if(typeof id!=="string")return id;if(!VARIANTS2[id])VARIANTS2[id]=(_a3=makeVariants(id))!=null?_a3:[];return VARIANTS2[id];}
function jsonToCssProps(json){if(typeof json==="string")return json;return Object.entries(json).map(([k,v])=>`${k}:${v} !important`).join(";");}
function jsonToCss(json){return Object.keys(json).map((k)=>{return`${k} {${jsonToCssProps(json[k])}}`;}).join("");}
function latexToMarkup2(latex){if(!latex)return"";const context=new Context();const root=new Atom({mode:"math",type:"root",body:parseLatex(latex,{context,args:(arg)=>arg==="@"?"{\\class{ML__box-placeholder}{\\blacksquare}}":"\\placeholder{}"})});const box=coalesce(applyInterBoxSpacing(new Box(root.render(context),{classes:"ML__base"}),context));return makeStruts(box,{classes:"ML__latex"}).toMarkup();}
function normalizeLayer(layer){var _a3;if(Array.isArray(layer))return layer.map((x)=>normalizeLayer(x)).flat();const result=typeof layer==="string"?{markup:layer}:layer;if("rows"in result&&Array.isArray(result.rows))
result.rows=result.rows.map((row)=>row.map((x)=>normalizeKeycap(x)));(_a3=result.id)!=null?_a3:result.id="ML__layer_"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36);return[result];}
function alphabeticLayout(){var _a3,_b3;const keyboard=window.mathVirtualKeyboard;let layoutName=keyboard.alphabeticLayout;if(layoutName==="auto"){const activeLayout=getActiveKeyboardLayout();if(activeLayout)layoutName=activeLayout.virtualLayout;if(!layoutName||layoutName==="auto"){layoutName=(_a3={fr:"azerty",be:"azerty",al:"qwertz",ba:"qwertz",cz:"qwertz",de:"qwertz",hu:"qwertz",sk:"qwertz",ch:"qwertz"}[l10n.locale.slice(0,2)])!=null?_a3:"qwerty";}}
const ALPHABETIC_TEMPLATE={qwerty:["qwertyuiop"," asdfghjkl ","^zxcvbnm~"],azerty:["azertyuiop","qsdfghjklm","^ wxcvbn ~"],qwertz:["qwertzuiop"," asdfghjkl ","^yxcvbnm~"],dvorak:["^  pyfgcrl ","aoeuidhtns","qjkxbmwvz~"],colemak:[" qwfpgjluy ","arstdhneio","^zxcvbkm~"]};const template=(_b3=ALPHABETIC_TEMPLATE[layoutName])!=null?_b3:ALPHABETIC_TEMPLATE.qwerty;const rows=layoutName==="azerty"?[[{label:"1",variants:"1"},{label:"2",shift:{latex:"\xE9"},variants:"2"},{label:"3",shift:{latex:"\xF9"},variants:"3"},{label:"4",variants:"4"},{label:"5",shift:{label:"(",latex:"("},variants:"5"},{label:"6",shift:{label:")",latex:")"},variants:"6"},{label:"7",shift:{latex:"\xE8"},variants:"7"},{label:"8",shift:{latex:"\xEA"},variants:"8"},{label:"9",shift:{latex:"\xE7"},variants:"9"},{label:"0",shift:{latex:"\xE0"},variants:"0"}]]:[[{label:"1",variants:"1"},{label:"2",variants:"2"},{label:"3",variants:"3"},{label:"4",variants:"4"},{label:"5",shift:{latex:"\\frac{#@}{#?}"},variants:"5"},{label:"6",shift:{latex:"#@^#?"},variants:"6"},{label:"7",variants:"7"},{label:"8",shift:{latex:"\\times"},variants:"8"},{label:"9",shift:{label:"(",latex:"("},variants:"9"},{label:"0",shift:{label:")",latex:")"},variants:"0"}]];for(const templateRow of template){const row=[];for(const k of templateRow){if(/[a-z]/.test(k)){row.push({label:k,class:"hide-shift",shift:{label:k.toUpperCase(),variants:hasVariants(k.toUpperCase())?k.toUpperCase():void 0},variants:hasVariants(k)?k:void 0});}else if(k==="~"){if(layoutName!=="dvorak")row.push("[backspace]");else row.push({label:"[backspace]",width:1});}else if(k==="^")row.push("[shift]");else if(k===" ")row.push("[separator-5]");}
rows.push(row);}
rows.push(["[-]","[+]","[=]",{label:" ",width:1.5},{label:",",shift:";",variants:".",class:"hide-shift"},"[.]","[left]","[right]",{label:"[action]",width:1.5}]);return{label:"abc",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.alphabetic",layers:normalizeLayer({rows})};}
function normalizeLayout(layout){if(layout==="alphabetic")return alphabeticLayout();if(typeof layout==="string"){console.assert(LAYOUTS[layout]!==void 0,`MathLive 0.105.0: unknown keyboard layout "${layout}"`);return normalizeLayout(LAYOUTS[layout]);}
let result;if("rows"in layout&&Array.isArray(layout.rows)){console.assert(!("layers"in layout||"markup"in layout),`MathLive 0.105.0: when providing a "rows" property, "layers" and "markup" are ignored`);const _a3=layout,{rows}=_a3,partialLayout=__objRest(_a3,["rows"]);result=__spreadProps(__spreadValues({},partialLayout),{layers:normalizeLayer({rows:layout.rows})});}else if("markup"in layout&&typeof layout.markup==="string"){const _b3=layout,{markup}=_b3,partialLayout=__objRest(_b3,["markup"]);result=__spreadProps(__spreadValues({},partialLayout),{layers:normalizeLayer(layout.markup)});}else{result=__spreadValues({},layout);if("layers"in layout)result.layers=normalizeLayer(layout.layers);else{console.error(`MathLive 0.105.0: provide either a "rows", "markup" or "layers" property`);}}
let hasShift=false;let hasEdit=false;for(const layer of result.layers){if(layer.rows){for(const keycap of layer.rows.flat()){if(isShiftKey(keycap))hasShift=true;const command=keycap.command;if(typeof command==="string"&&["undo","redo","cut","copy","paste"].includes(command))
hasEdit=true;}}}
if(!("displayShiftedKeycaps"in layout)||layout.displayShiftedKeycaps===void 0)
result.displayShiftedKeycaps=hasShift;if(!("displayEditToolbar"in layout)||layout.displayEditToolbar===void 0)
result.displayEditToolbar=!hasEdit;return result;}
function makeLayoutsToolbar(keyboard,index){var _a3,_b3;let markup=`<div class="left">`;if(keyboard.normalizedLayouts.length>1){for(const[i,l]of keyboard.normalizedLayouts.entries()){const layout=l;const classes=[i===index?"selected":"layer-switch"];if(layout.tooltip)classes.push("MLK__tooltip");if(layout.labelClass)classes.push(...layout.labelClass.split(" "));markup+=`<div class="${classes.join(" ")}"`;if(layout.tooltip){markup+=" data-tooltip='"+((_a3=localize(layout.tooltip))!=null?_a3:layout.tooltip)+"' ";}
if(i!==index)markup+=`data-layer="${layout.layers[0].id}"`;markup+=`>${(_b3 = layout.label) != null ? _b3 : "untitled"}</div>`;}}
markup+="</div>";return markup;}
function makeEditToolbar(options,mathfield){let result="";const toolbarOptions=options.editToolbar;if(toolbarOptions==="none")return"";const availableActions=[];if(mathfield.selectionIsCollapsed)
availableActions.push("undo","redo","pasteFromClipboard");else{availableActions.push("cutToClipboard","copyToClipboard","pasteFromClipboard");}
const actionsMarkup={undo:`<div class='action ${mathfield.canUndo === false ? "disabled" : ""}'
          data-command='"undo"'
          data-tooltip='${localize("tooltip.undo")}'>
          <svg><use xlink:href='#svg-undo' /></svg>
      </div>`,redo:`<div class='action ${mathfield.canRedo === false ? "disabled" : ""}'
          data-command='"redo"'
          data-tooltip='${localize("tooltip.redo")}'>
          <svg><use xlink:href='#svg-redo' /></svg>
      </div>`,cutToClipboard:`
        <div class='action'
            data-command='"cutToClipboard"'
            data-tooltip='${localize("tooltip.cut to clipboard")}'>
            <svg><use xlink:href='#svg-cut' /></svg>
        </div>
    `,copyToClipboard:`
        <div class='action'
            data-command='"copyToClipboard"'
            data-tooltip='${localize("tooltip.copy to clipboard")}'>
            <svg><use xlink:href='#svg-copy' /></svg>
        </div>
    `,pasteFromClipboard:`
        <div class='action'
            data-command='"pasteFromClipboard"'
            data-tooltip='${localize("tooltip.paste from clipboard")}'>
            <svg><use xlink:href='#svg-paste' /></svg>
        </div>
    `};result+=availableActions.map((action)=>actionsMarkup[action]).join("");return result;}
function makeSyntheticKeycaps(elementList){for(const element of elementList)
makeSyntheticKeycap(element);}
function makeSyntheticKeycap(element){const keyboard=VirtualKeyboard.singleton;if(!keyboard)return;const keycap={};if(!element.id){if(element.hasAttribute("data-label"))
keycap.label=element.dataset.label;if(element.hasAttribute("data-latex"))
keycap.latex=element.dataset.latex;if(element.hasAttribute("data-key"))keycap.key=element.dataset.key;if(element.hasAttribute("data-insert"))
keycap.insert=element.dataset.insert;if(element.hasAttribute("data-variants"))
keycap.variants=element.dataset.variants;if(element.hasAttribute("data-aside"))
keycap.aside=element.dataset.aside;if(element.className)keycap.class=element.className;if(!keycap.label&&!keycap.latex&&!keycap.key&&!keycap.insert){keycap.latex=element.innerText;keycap.label=element.innerHTML;}
if(element.hasAttribute("data-command")){try{keycap.command=JSON.parse(element.dataset.command);}catch(e){}}
element.id=keyboard.registerKeycap(keycap);}
if(!element.innerHTML){const[markup,_]=renderKeycap(keycap);element.innerHTML=globalThis.MathfieldElement.createHTML(markup);}}
function injectStylesheets(){injectStylesheet("virtual-keyboard");injectStylesheet("core");void loadFonts();}
function releaseStylesheets(){releaseStylesheet("core");releaseStylesheet("virtual-keyboard");}
var SVG_ICONS=`<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">

<symbol id="svg-delete-backward" viewBox="0 0 576 512">
  <path d="M432.1 208.1L385.9 256L432.1 303C442.3 312.4 442.3 327.6 432.1 336.1C423.6 346.3 408.4 346.3 399 336.1L352 289.9L304.1 336.1C295.6 346.3 280.4 346.3 271 336.1C261.7 327.6 261.7 312.4 271 303L318.1 256L271 208.1C261.7 199.6 261.7 184.4 271 175C280.4 165.7 295.6 165.7 304.1 175L352 222.1L399 175C408.4 165.7 423.6 165.7 432.1 175C442.3 184.4 442.3 199.6 432.1 208.1V208.1zM512 64C547.3 64 576 92.65 576 128V384C576 419.3 547.3 448 512 448H205.3C188.3 448 172 441.3 160 429.3L9.372 278.6C3.371 272.6 0 264.5 0 256C0 247.5 3.372 239.4 9.372 233.4L160 82.75C172 70.74 188.3 64 205.3 64L512 64zM528 128C528 119.2 520.8 112 512 112H205.3C201 112 196.9 113.7 193.9 116.7L54.63 256L193.9 395.3C196.9 398.3 201 400 205.3 400H512C520.8 400 528 392.8 528 384V128z"/>
</symbol>

<symbol id="svg-shift" viewBox="0 0 384 512">
  <path d="M2.438 252.3C7.391 264.2 19.06 272 32 272h80v160c0 26.51 21.49 48 48 48h64C250.5 480 272 458.5 272 432v-160H352c12.94 0 24.61-7.797 29.56-19.75c4.953-11.97 2.219-25.72-6.938-34.88l-160-176C208.4 35.13 200.2 32 192 32S175.6 35.13 169.4 41.38l-160 176C.2188 226.5-2.516 240.3 2.438 252.3zM192 86.63L313.4 224H224v208H160V224H70.63L192 86.63z"/>
</symbol>

<symbol id="svg-commit" viewBox="0 0 512 512">
  <path d="M135 432.1l-128-128C2.344 300.3 0 294.2 0 288s2.344-12.28 7.031-16.97l128-128c9.375-9.375 24.56-9.375 33.94 0s9.375 24.56 0 33.94L81.94 264H464v-208C464 42.75 474.8 32 488 32S512 42.75 512 56V288c0 13.25-10.75 24-24 24H81.94l87.03 87.03c9.375 9.375 9.375 24.56 0 33.94S144.4 442.3 135 432.1z"/>
</symbol>


<symbol id="circle-plus" viewBox="0 0 512 512"><path d="M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344c0 13.3 10.7 24 24 24s24-10.7 24-24V280h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H280V168c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H168c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"/></symbol>

<symbol id="svg-command" viewBox="0 0 640 512">
  <path d="M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z"/>
</symbol>

<symbol id="svg-undo" viewBox="0 0 512 512">
  <path d="M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z"/>
</symbol>
<symbol id="svg-redo" viewBox="0 0 512 512">
  <path d="M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"/>
</symbol>
<symbol id="svg-arrow-left" viewBox="0 0 320 512">
  <path d="M206.7 464.6l-183.1-191.1C18.22 267.1 16 261.1 16 256s2.219-11.97 6.688-16.59l183.1-191.1c9.152-9.594 24.34-9.906 33.9-.7187c9.625 9.125 9.938 24.37 .7187 33.91L73.24 256l168 175.4c9.219 9.5 8.906 24.78-.7187 33.91C231 474.5 215.8 474.2 206.7 464.6z"/>
</symbol>
<symbol id="svg-arrow-right" viewBox="0 0 320 512">
  <path d="M113.3 47.41l183.1 191.1c4.469 4.625 6.688 10.62 6.688 16.59s-2.219 11.97-6.688 16.59l-183.1 191.1c-9.152 9.594-24.34 9.906-33.9 .7187c-9.625-9.125-9.938-24.38-.7187-33.91l168-175.4L78.71 80.6c-9.219-9.5-8.906-24.78 .7187-33.91C88.99 37.5 104.2 37.82 113.3 47.41z"/>
</symbol>
<symbol id="svg-tab" viewBox="0 0 448 512">
  <path d="M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z"/>
</symbol>
<symbol id="svg-paste" viewBox="0 0 512 512"><path d="M160 32c11.6 0 21.3 8.2 23.5 19.2C185 58.6 191.6 64 199.2 64H208c8.8 0 16 7.2 16 16V96H96V80c0-8.8 7.2-16 16-16h8.8c7.6 0 14.2-5.4 15.7-12.8C138.7 40.2 148.4 32 160 32zM64 64h2.7C65 69 64 74.4 64 80V96c0 17.7 14.3 32 32 32H224c17.7 0 32-14.3 32-32V80c0-5.6-1-11-2.7-16H256c17.7 0 32 14.3 32 32h32c0-35.3-28.7-64-64-64H210.6c-9-18.9-28.3-32-50.6-32s-41.6 13.1-50.6 32H64C28.7 32 0 60.7 0 96V384c0 35.3 28.7 64 64 64H192V416H64c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32zM288 480c-17.7 0-32-14.3-32-32V192c0-17.7 14.3-32 32-32h96v56c0 22.1 17.9 40 40 40h56V448c0 17.7-14.3 32-32 32H288zM416 165.3L474.7 224H424c-4.4 0-8-3.6-8-8V165.3zM448 512c35.3 0 64-28.7 64-64V235.9c0-12.7-5.1-24.9-14.1-33.9l-59.9-59.9c-9-9-21.2-14.1-33.9-14.1H288c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H448z"/></symbol>
<symbol id="svg-cut" viewBox="0 0 512 512"><path d="M485.6 444.2L333.6 314.9C326.9 309.2 326.1 299.1 331.8 292.4C337.5 285.6 347.6 284.8 354.4 290.5L506.4 419.8C513.1 425.5 513.9 435.6 508.2 442.4C502.5 449.1 492.4 449.9 485.6 444.2zM485.7 67.76C492.5 62.07 502.5 62.94 508.2 69.69C513.9 76.45 513.1 86.55 506.3 92.24L208.5 343.1C218.3 359.7 224 379.2 224 400C224 461.9 173.9 512 112 512C50.14 512 0 461.9 0 400C0 338.1 50.14 288 112 288C141.5 288 168.4 299.4 188.4 318.1L262.2 256L188.4 193.9C168.4 212.6 141.5 224 112 224C50.14 224 0 173.9 0 112C0 50.14 50.14 0 112 0C173.9 0 224 50.14 224 112C224 132.8 218.3 152.3 208.5 168.9L287 235.1L485.7 67.76zM32 112C32 156.2 67.82 192 112 192C156.2 192 192 156.2 192 112C192 67.82 156.2 32 112 32C67.82 32 32 67.82 32 112zM112 480C156.2 480 192 444.2 192 400C192 355.8 156.2 320 112 320C67.82 320 32 355.8 32 400C32 444.2 67.82 480 112 480z"/></symbol>
<symbol id="svg-copy" viewBox="0 0 512 512"><path d="M272 416C263.2 416 256 423.2 256 432V448c0 17.67-14.33 32-32 32H64c-17.67 0-32-14.33-32-32V192c0-17.67 14.33-32 32-32h112C184.8 160 192 152.8 192 144C192 135.2 184.8 128 176 128H63.99c-35.35 0-64 28.65-64 64l.0098 256C0 483.3 28.65 512 64 512h160c35.35 0 64-28.65 64-64v-16C288 423.2 280.8 416 272 416zM502.6 86.63l-77.25-77.25C419.4 3.371 411.2 0 402.7 0H288C252.7 0 224 28.65 224 64v256c0 35.35 28.65 64 64 64h160c35.35 0 64-28.65 64-64V109.3C512 100.8 508.6 92.63 502.6 86.63zM416 45.25L466.7 96H416V45.25zM480 320c0 17.67-14.33 32-32 32h-160c-17.67 0-32-14.33-32-32V64c0-17.67 14.33-32 32-32h96l.0026 64c0 17.67 14.33 32 32 32H480V320z"/>
</symbol>
<symbol id="svg-angle-double-right" viewBox="0 0 512 512"><path d="M470.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 256 265.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160zm-352 160l160-160c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L210.7 256 73.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"/>
</symbol>
<symbol id="svg-angle-double-left" viewBox="0 0 512 512"><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"/>
</symbol>
<symbol id="svg-trash" viewBox="0 0 448 512">
  <path d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"/>
</symbol>
<symbol id="svg-keyboard-down" viewBox="0 0 576 512"><path d="M64 48c-8.8 0-16 7.2-16 16V240c0 8.8 7.2 16 16 16H512c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H64zM0 64C0 28.7 28.7 0 64 0H512c35.3 0 64 28.7 64 64V240c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zM159 359c9.4-9.4 24.6-9.4 33.9 0l95 95 95-95c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L305 505c-4.5 4.5-10.6 7-17 7s-12.5-2.5-17-7L159 393c-9.4-9.4-9.4-24.6 0-33.9zm1-167c0-8.8 7.2-16 16-16H400c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V192zM120 88h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H120c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16zm64 16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H200c-8.8 0-16-7.2-16-16V104zm96-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H280c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16zm64 16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H360c-8.8 0-16-7.2-16-16V104zm96-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H440c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16z"/></symbol>
</svg>`;function makeKeyboardElement(keyboard){keyboard.resetKeycapRegistry();injectStylesheets();const result=document.createElement("div");result.className="ML__keyboard";const plate=document.createElement("div");plate.className="MLK__plate";plate.innerHTML=globalThis.MathfieldElement.createHTML(SVG_ICONS+keyboard.normalizedLayouts.map((x,i)=>makeLayout(keyboard,x,i)).join(""));const backdrop=document.createElement("div");backdrop.className="MLK__backdrop";backdrop.appendChild(plate);result.appendChild(backdrop);result.addEventListener("pointerdown",handlePointerDown,{passive:false});const toolbars=result.querySelectorAll(".ML__edit-toolbar");if(toolbars){for(const toolbar of toolbars){toolbar.addEventListener("click",(ev)=>{var _a3,_b3;let target=ev.target;let command="";while(target&&!command){command=(_a3=target==null?void 0:target.getAttribute("data-command"))!=null?_a3:"";target=(_b3=target==null?void 0:target.parentElement)!=null?_b3:null;}
if(command)keyboard.executeCommand(JSON.parse(command));});}}
makeSyntheticKeycaps(result.querySelectorAll(".MLK__keycap, .action, .fnbutton, .bigfnbutton"));const layerElements=result.querySelectorAll(".MLK__layer");console.assert(layerElements.length>0,"No virtual keyboards available");for(const x of layerElements)
x.addEventListener("pointerdown",(evt)=>evt.preventDefault());keyboard.currentLayer=keyboard.latentLayer;return result;}
function makeLayout(keyboard,layout,index){const markup=[];if(!("layers"in layout))return"";for(const layer of layout.layers){markup.push(`<div tabindex="-1" class="MLK__layer" id="${layer.id}">`);if(keyboard.normalizedLayouts.length>1||layout.displayEditToolbar){markup.push(`<div class='MLK__toolbar' role='toolbar'>`);markup.push(makeLayoutsToolbar(keyboard,index));if(layout.displayEditToolbar)
markup.push(`<div class="ML__edit-toolbar right"></div>`);markup.push(`</div>`);}
markup.push(makeLayer(keyboard,layer));markup.push("</div>");}
return markup.join("");}
function makeLayer(keyboard,layer){if(typeof layer==="string")return layer;let layerMarkup="";if(typeof layer.style==="string")
layerMarkup+=`<style>${layer.style}</style>`;else if(typeof layer.style==="object")
layerMarkup+=`<style>${jsonToCss(layer.style)}</style>`;if(layer.backdrop)layerMarkup+=`<div class='${layer.backdrop}'>`;if(layer.container)layerMarkup+=`<div class='${layer.container}'>`;if(layer.rows){layerMarkup+=`<div class=MLK__rows>`;for(const row of layer.rows){layerMarkup+=`<div dir="ltr" class=MLK__row>`;for(const keycap of row){if(keycap){const keycapId=keyboard.registerKeycap(keycap);const[markup,cls]=renderKeycap(keycap);if(/(^|\s)separator/.test(cls))layerMarkup+=`<div class="${cls}"`;else
layerMarkup+=`<div tabindex="-1" id="${keycapId}" class="${cls}"`;if(keycap.tooltip)
layerMarkup+=` data-tooltip="${keycap.tooltip}"`;layerMarkup+=`>${markup}</div>`;}}
layerMarkup+=`</div>`;}
layerMarkup+=`</div>`;}else if(layer.markup)layerMarkup+=layer.markup;if(layer.container)layerMarkup+="</div>";if(layer.backdrop)layerMarkup+="</div>";return layerMarkup;}
function renderKeycap(keycap,options={shifted:false}){var _a3,_b3,_c2,_d2,_e,_f,_g;let markup="";let cls=(_a3=keycap.class)!=null?_a3:"";if(options.shifted&&isShiftKey(keycap))cls+=" is-active";if(options.shifted&&"shift"in keycap){if(typeof keycap.shift==="string")markup=latexToMarkup2(keycap.shift);else if(typeof keycap.shift==="object"){markup=keycap.shift.label?keycap.shift.label:((_b3=latexToMarkup2(keycap.shift.latex||keycap.shift.insert||"")||keycap.shift.key)!=null?_b3:"");}
if(typeof keycap.shift==="object")
cls=(_d2=(_c2=keycap.shift.class)!=null?_c2:keycap.class)!=null?_d2:"";}else{markup=keycap.label?keycap.label:((_e=latexToMarkup2(keycap.latex||keycap.insert||"")||keycap.key)!=null?_e:"");if(keycap.shift){let shiftLabel;if(typeof keycap.shift==="string")
shiftLabel=latexToMarkup2(keycap.shift);else if(keycap.shift.label)shiftLabel=keycap.shift.label;else{shiftLabel=(_f=latexToMarkup2(keycap.shift.latex||keycap.shift.insert||"")||keycap.shift.key)!=null?_f:"";}
markup+=`<span class="MLK__shift">${shiftLabel}</span>`;}
if(keycap.aside)markup+=`<aside>${keycap.aside}</aside>`;}
if(keycap.layer&&!/layer-switch/.test(cls))cls+=" layer-switch";if(!/(^|\s)(separator|action|shift|fnbutton|bigfnbutton)($|\s)/.test(cls))
cls+=" MLK__keycap";if(!/\bw[0-9]+\b/.test(cls)&&keycap.width){cls+=(_g={0:" w0",0.5:" w5",1.5:" w15",2:" w20",5:" w50"}[keycap.width])!=null?_g:"";}
return[markup,cls||"MLK__keycap"];}
var KEYCAP_SHORTCUTS={"[left]":{class:"action hide-shift",label:"<svg class=svg-glyph><use xlink:href=#svg-arrow-left /></svg>",command:"performWithFeedback(moveToPreviousChar)",shift:{label:"<svg class=svg-glyph><use xlink:href=#svg-angle-double-left /></svg>",command:"performWithFeedback(extendSelectionBackward)"}},"[right]":{class:"action hide-shift",label:"<svg class=svg-glyph><use xlink:href=#svg-arrow-right /></svg>",command:"performWithFeedback(moveToNextChar)",shift:{label:"<svg class=svg-glyph><use xlink:href=#svg-angle-double-right /></svg>",command:"performWithFeedback(extendSelectionForward)"}},"[up]":{class:"action hide-shift",label:"\u2191",command:"performWithFeedback(moveUp)",shift:{label:"\u219F",command:"performWithFeedback(extendSelectionUpward)"}},"[down]":{class:"action hide-shift",label:"\u2193",command:"performWithFeedback(moveDown)",shift:{label:"\u21A1",command:"performWithFeedback(extendSelectionDownward)"}},"[return]":{class:"action hide-shift",command:"performWithFeedback(commit)",shift:{command:"performWithFeedback(addRowAfter)"},width:1.5,label:"<svg class=svg-glyph><use xlink:href=#svg-commit /></svg>"},"[action]":{class:"action hide-shift",command:"performWithFeedback(commit)",shift:{label:"<svg class=svg-glyph><use xlink:href=#circle-plus /></svg>",command:"performWithFeedback(addRowAfter)"},width:1.5,label:"<svg class=svg-glyph><use xlink:href=#svg-commit /></svg>"},"[hr]":{class:"separator horizontal-rule"},"[hide-keyboard]":{class:"action",command:["hideVirtualKeyboard"],width:1.5,label:"<svg class=svg-glyph-lg><use xlink:href=#svg-keyboard-down /></svg>"},"[.]":{variants:".",command:"performWithFeedback(insertDecimalSeparator)",shift:",",class:"big-op hide-shift",label:"."},"[,]":{variants:",",command:"performWithFeedback(insertDecimalSeparator)",shift:".",class:"big-op hide-shift",label:","},"[+]":{variants:[{latex:"\\sum_{#0}^{#0}",class:"small"},"\\oplus"],latex:"+",label:"+",class:"big-op hide-shift",shift:{latex:"\\sum",insert:"\\sum",class:"small"}},"[-]":{variants:["\\pm","\\ominus"],latex:"-",label:"&#x2212;",shift:"\\pm",class:"big-op hide-shift"},"[/]":{class:"big-op hide-shift",shift:{class:"",latex:"\\frac{1}{#@}"},variants:["/","\\div","\\%","\\oslash"],latex:"\\frac{#@}{#?}",label:"&divide;"},"[*]":{variants:[{latex:"\\prod_{#0}^{#0}",class:"small"},"\\otimes","\\cdot"],latex:"\\cdot",label:"&times;",shift:{latex:"\\times"},class:"big-op hide-shift"},"[=]":{variants:["\\neq","\\equiv","\\varpropto","\\thickapprox","\\lt","\\gt","\\le","\\ge"],latex:"=",label:"=",shift:{label:"\u2260",latex:"\\ne"},class:"big-op hide-shift"},"[backspace]":{class:"action bottom right hide-shift",width:1.5,command:"performWithFeedback(deleteBackward)",label:"<svg class=svg-glyph><use xlink:href=#svg-delete-backward /></svg>",shift:{class:"action warning",label:"<svg class=svg-glyph><use xlink:href=#svg-trash /></svg>",command:"deleteAll"}},"[undo]":{class:"ghost if-can-undo",command:"undo",label:"<svg class=svg-glyph><use xlink:href=#svg-undo /></svg>",tooltip:"tooltip.undo"},"[redo]":{class:"ghost  if-can-redo",command:"redo",label:"<svg class=svg-glyph><use xlink:href=#svg-redo /></svg>",tooltip:"tooltip.redo"},"[(]":{variants:[{latex:"\\lbrack",key:"["},"\\langle","\\lfloor","\\lceil",{latex:"\\lbrace",key:"{"}],key:"(",label:"(",shift:{label:"[",key:"["},class:"hide-shift"},"[)]":{variants:[{latex:"\\rbrack",key:"]"},"\\rangle","\\rfloor","\\rceil",{latex:"\\rbrace",key:"}"}],key:")",label:")",shift:{label:"]",latex:"\\rbrack"},class:"hide-shift"},"[0]":{variants:"0",latex:"0",label:"0",shift:"\\infty",class:"hide-shift"},"[1]":{variants:"1",latex:"1",label:"1",shift:"#@^{-1}",class:"hide-shift"},"[2]":{variants:"2",latex:"2",label:"2",shift:"#@^2",class:"hide-shift"},"[3]":{variants:"3",latex:"3",label:"3",shift:"#@^3",class:"hide-shift"},"[4]":{variants:"4",latex:"4",label:"4",shift:"#@^4",class:"hide-shift"},"[5]":{variants:"5",latex:"5",label:"5",shift:"#@^5",class:"hide-shift"},"[6]":{variants:"6",latex:"6",label:"6",shift:"#@^6",class:"hide-shift"},"[7]":{variants:"7",latex:"7",label:"7",shift:"#@^7",class:"hide-shift"},"[8]":{variants:"8",latex:"8",label:"8",shift:"#@^8",class:"hide-shift"},"[9]":{variants:"9",latex:"9",label:"9",shift:"#@^9",class:"hide-shift"},"[separator-5]":{class:"separator",width:0.5},"[separator]":{class:"separator"},"[separator-10]":{class:"separator"},"[separator-15]":{class:"separator",width:1.5},"[separator-20]":{class:"separator",width:2},"[separator-50]":{class:"separator",width:5},"[shift]":{class:"shift bottom left",width:1.5,label:"<span class=caps-lock-indicator></span><svg class=svg-glyph><use xlink:href=#svg-shift /></svg>"},"[foreground-color]":{variants:"foreground-color",command:["applyStyle",{color:"red"}],label:"<span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'>"},"[background-color]":{variants:"background-color",command:["applyStyle",{backgroundColor:"yellow"}],label:"<span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span>"}};function normalizeKeycap(keycap){var _a3;if(typeof keycap==="string"){if(keycap==="[.]"&&globalThis.MathfieldElement.decimalSeparator===",")
keycap="[,]";if(!KEYCAP_SHORTCUTS[keycap])return{latex:keycap};keycap={label:keycap};}
let shortcut=void 0;if("label"in keycap&&keycap.label&&KEYCAP_SHORTCUTS[keycap.label]){shortcut=__spreadProps(__spreadValues(__spreadValues({},KEYCAP_SHORTCUTS[keycap.label]),keycap),{label:KEYCAP_SHORTCUTS[keycap.label].label});}
if("key"in keycap&&keycap.key&&KEYCAP_SHORTCUTS[keycap.key]){shortcut=__spreadProps(__spreadValues(__spreadValues({},KEYCAP_SHORTCUTS[keycap.key]),keycap),{key:KEYCAP_SHORTCUTS[keycap.key].key});}
if(!shortcut)return keycap;if(shortcut.command==="insertDecimalSeparator")
shortcut.label=(_a3=globalThis.MathfieldElement.decimalSeparator)!=null?_a3:".";if(shortcut.tooltip===void 0||shortcut.tooltip===null||shortcut.tooltip===false)
delete shortcut.tooltip;if(shortcut.tooltip===void 0||shortcut.tooltip===null||shortcut.tooltip===false)
delete shortcut.tooltip;if(shortcut.aside===void 0||shortcut.aside===null||shortcut.aside===false)
delete shortcut.aside;if(shortcut.variants===void 0||shortcut.variants===null||shortcut.variants===false)
delete shortcut.variants;if(shortcut.shift===void 0||shortcut.shift===null||shortcut.shift===false)
delete shortcut.shift;return shortcut;}
var pressAndHoldTimer;function handlePointerDown(ev){var _a3;if(ev.button!==0)return;const keyboard=VirtualKeyboard.singleton;if(!keyboard)return;let layerButton=ev.target;while(layerButton&&!layerButton.getAttribute("data-layer"))
layerButton=layerButton.parentElement;if(layerButton){keyboard.currentLayer=(_a3=layerButton.getAttribute("data-layer"))!=null?_a3:"";ev.preventDefault();return;}
const target=parentKeycap(ev.target);if(!(target==null?void 0:target.id))return;const keycap=keyboard.getKeycap(target.id);if(!keycap)return;console.assert(ev.type==="pointerdown");const controller=new AbortController();const signal=controller.signal;target.classList.add("is-pressed");target.addEventListener("pointerenter",handleVirtualKeyboardEvent(controller),{capture:true,signal});target.addEventListener("pointerleave",handleVirtualKeyboardEvent(controller),{capture:true,signal});target.addEventListener("pointercancel",handleVirtualKeyboardEvent(controller),{signal});target.addEventListener("pointerup",handleVirtualKeyboardEvent(controller),{signal});if(isShiftKey(keycap)){target.classList.add("is-active");keyboard.shiftPressCount++;}
if(keycap.variants){if(pressAndHoldTimer)clearTimeout(pressAndHoldTimer);pressAndHoldTimer=setTimeout(()=>{if(target.classList.contains("is-pressed")){target.classList.remove("is-pressed");target.classList.add("is-active");if(ev.target&&"releasePointerCapture"in ev.target)
ev.target.releasePointerCapture(ev.pointerId);showVariantsPanel(target,()=>{controller.abort();target==null?void 0:target.classList.remove("is-active");});}},keycap.stickyVariantPanel?0:300);}
ev.preventDefault();}
function handleVirtualKeyboardEvent(controller){return(ev)=>{const target=parentKeycap(ev.target);if(!(target==null?void 0:target.id))return;const keyboard=VirtualKeyboard.singleton;if(!keyboard)return;const keycap=keyboard.getKeycap(target.id);if(!keycap)return;if(ev.type==="pointerenter"&&ev.target===target){const pev=ev;if(pev.isPrimary)target.classList.add("is-pressed");}
if(ev.type==="pointercancel"){target.classList.remove("is-pressed");if(isShiftKey(keycap)){keyboard.shiftPressCount--;target.classList.toggle("is-active",keyboard.isShifted);}
controller.abort();return;}
if(ev.type==="pointerleave"&&ev.target===target){target.classList.remove("is-pressed");if(isShiftKey(keycap)){keyboard.shiftPressCount--;target.classList.toggle("is-active",keyboard.isShifted);}
return;}
if(ev.type==="pointerup"){if(pressAndHoldTimer)clearTimeout(pressAndHoldTimer);if(isShiftKey(keycap)){target.classList.toggle("is-active",keyboard.isShifted);}else if(target.classList.contains("is-pressed")){target.classList.remove("is-pressed");if(keyboard.isShifted&&keycap.shift){if(typeof keycap.shift==="string"){keyboard.executeCommand(["insert",keycap.shift,{focus:true,feedback:true,scrollIntoView:true,mode:"math",format:"latex"}]);}else executeKeycapCommand(keycap.shift);}else executeKeycapCommand(keycap);if(keyboard.shiftPressCount===1&&!ev.shiftKey)
keyboard.shiftPressCount=0;}
controller.abort();ev.preventDefault();return;}};}
function executeKeycapCommand(keycap){var _a3;let command=keycap.command;if(!command&&keycap.insert){command=["insert",keycap.insert,{focus:true,feedback:true,scrollIntoView:true,mode:"math",format:"latex"}];}
if(!command&&keycap.key){command=["typedText",keycap.key,{focus:true,feedback:true,simulateKeystroke:true}];}
if(!command&&keycap.latex){command=["insert",keycap.latex,{focus:true,feedback:true,scrollIntoView:true,mode:"math",format:"latex"}];}
if(!command){command=["typedText",keycap.label,{focus:true,feedback:true,simulateKeystroke:true}];}
(_a3=VirtualKeyboard.singleton)==null?void 0:_a3.executeCommand(command);}
function isKeycapElement(el){if(el.nodeType!==1)return false;const classes=el.classList;return classes.contains("MLK__keycap")||classes.contains("shift")||classes.contains("action")||classes.contains("fnbutton")||classes.contains("bigfnbutton");}
function parentKeycap(el){if(!el)return void 0;let node=el;while(node&&!isKeycapElement(node))node=node.parentElement;return node!=null?node:void 0;}
function isShiftKey(k){return!!k.class&&/(^|\s)shift($|\s)/.test(k.class);}
var VirtualKeyboard=class _VirtualKeyboard{constructor(){this.originalContainerBottomPadding=null;this.keycapRegistry={};this._shiftPressCount=0;var _a3;this.targetOrigin=window.origin;this.originValidator="none";this._alphabeticLayout="auto";this._layouts=Object.freeze(["default"]);this._editToolbar="default";this._container=void 0;this._visible=false;this._rebuilding=false;this.observer=new ResizeObserver((_entries)=>{this.adjustBoundingRect();this.dispatchEvent(new Event("geometrychange"));this.sendMessage("geometry-changed",{boundingRect:this.boundingRect});});this.listeners={};try{(_a3=window.top)==null?void 0:_a3.addEventListener("message",this);}catch(e){window.addEventListener("message",this);}
document.addEventListener("focusin",(event)=>{const target=event.target;if(!(target==null?void 0:target.isConnected))return;setTimeout(()=>{const mf=focusedMathfield();if(mf&&!mf.readOnly&&mf.mathVirtualKeyboardPolicy==="auto"&&isTouchCapable())
this.show({animate:true});},300);});document.addEventListener("focusout",(evt)=>{if(!(evt.target instanceof MathfieldElement))return;if(evt.target.mathVirtualKeyboardPolicy!=="manual"){setTimeout(()=>{if(!focusedMathfield())this.hide();},300);}});}
get currentLayer(){var _a3,_b3,_c2;return(_c2=(_b3=(_a3=this._element)==null?void 0:_a3.querySelector(".MLK__layer.is-visible"))==null?void 0:_b3.id)!=null?_c2:"";}
set currentLayer(id){var _a3;if(!this._element){this.latentLayer=id;return;}
let newActive=id?this._element.querySelector(`#${id}.MLK__layer`):null;if(!newActive)newActive=this._element.querySelector(".MLK__layer");if(newActive){(_a3=this._element.querySelector(".MLK__layer.is-visible"))==null?void 0:_a3.classList.remove("is-visible");newActive.classList.add("is-visible");}
this.render();}
get shiftPressCount(){return this._shiftPressCount;}
set shiftPressCount(count){var _a3;this._shiftPressCount=count>2||count<0?0:count;(_a3=this._element)==null?void 0:_a3.classList.toggle("is-caps-lock",this.shiftPressCount===2);this.render();}
get isShifted(){return this._shiftPressCount>0;}
resetKeycapRegistry(){this.keycapRegistry={};}
registerKeycap(keycap){const id="ML__k"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36);this.keycapRegistry[id]=keycap;return id;}
setKeycap(keycap,value){KEYCAP_SHORTCUTS[keycap]=normalizeKeycap(value);this.rebuild();}
getKeycap(id){var _a3;return id?(_a3=KEYCAP_SHORTCUTS[id])!=null?_a3:this.keycapRegistry[id]:void 0;}
getLayer(id){const layouts=this.normalizedLayouts;for(const layout of layouts)
for(const layer of layout.layers)if(layer.id===id)return layer;return void 0;}
get alphabeticLayout(){return this._alphabeticLayout;}
set alphabeticLayout(value){this._alphabeticLayout=value;this._normalizedLayouts=void 0;this.rebuild();}
get layouts(){return this._layouts;}
set layouts(value){this.updateNormalizedLayouts(value);this.rebuild();}
updateNormalizedLayouts(value){const layouts=Array.isArray(value)?[...value]:[value];const defaultIndex=layouts.findIndex((x)=>x==="default");if(defaultIndex>=0){layouts.splice(defaultIndex,1,"numeric","symbols","alphabetic","greek");}
this._layouts=Object.freeze(layouts);this._normalizedLayouts=layouts.map((x)=>normalizeLayout(x));}
get normalizedLayouts(){if(!this._normalizedLayouts)this.updateNormalizedLayouts(this._layouts);return this._normalizedLayouts;}
get editToolbar(){return this._editToolbar;}
set editToolbar(value){this._editToolbar=value;this.rebuild();}
get container(){if(this._container===void 0)return window.document.body;return this._container;}
set container(value){this._container=value;this.rebuild();}
static get singleton(){if(this._singleton===void 0){try{this._singleton=new _VirtualKeyboard();}catch(e){this._singleton=null;}}
return this._singleton;}
get style(){return this._style;}
addEventListener(type,callback,_options){if(!this.listeners[type])this.listeners[type]=new Set();if(!this.listeners[type].has(callback))this.listeners[type].add(callback);}
dispatchEvent(event){if(!this.listeners[event.type]||this.listeners[event.type].size===0)
return true;this.listeners[event.type].forEach((x)=>{if(typeof x==="function")x(event);else x==null?void 0:x.handleEvent(event);});return!event.defaultPrevented;}
removeEventListener(type,callback,_options){if(this.listeners[type])this.listeners[type].delete(callback);}
get element(){return this._element;}
set element(val){var _a3;if(this._element===val)return;(_a3=this._element)==null?void 0:_a3.remove();this._element=val;}
get visible(){return this._visible;}
set visible(val){if(val)this.show();else this.hide();}
get boundingRect(){var _a3;if(!this._visible)return new DOMRect();const plate=(_a3=this._element)==null?void 0:_a3.getElementsByClassName("MLK__plate")[0];if(plate)return plate.getBoundingClientRect();return new DOMRect();}
adjustBoundingRect(){var _a3,_b3;const h=this.boundingRect.height;if(this.container===document.body){(_a3=this._element)==null?void 0:_a3.style.setProperty("--_keyboard-height",`calc(${h}px + var(--_padding-top) + var(--_padding-bottom) + env(safe-area-inset-bottom, 0))`);const keyboardHeight=h-1;this.container.style.paddingBottom=this.originalContainerBottomPadding?`calc(${this.originalContainerBottomPadding} + ${keyboardHeight}px)`:`${keyboardHeight}px`;}else(_b3=this._element)==null?void 0:_b3.style.setProperty("--_keyboard-height",`${h}px`);}
rebuild(){if(this._rebuilding||!this._element)return;this._rebuilding=true;const currentLayerId=this.currentLayer;requestAnimationFrame(()=>{this._rebuilding=false;if(this._element){this._element.remove();this._element=void 0;}
if(this.visible){this.buildAndAttachElement();this.currentLayer=currentLayerId;this.render();this.adjustBoundingRect();this._element.classList.add("is-visible");}});}
render(){var _a3;if(!this._element)return;const layer=this.getLayer(this.currentLayer);this._element.classList.toggle("backdrop-is-transparent",Boolean(layer&&(layer.backdrop||layer.container)));const keycaps=this._element.querySelectorAll(".MLK__layer.is-visible .MLK__keycap, .MLK__layer.is-visible .action, .fnbutton, .MLK__layer.is-visible .bigfnbutton, .MLK__layer.is-visible .shift");if(!keycaps)return;const shifted=this.isShifted;for(const keycapElement of keycaps){const keycap=this.getKeycap(keycapElement.id);if(keycap){const[markup,cls]=renderKeycap(keycap,{shifted});keycapElement.innerHTML=globalThis.MathfieldElement.createHTML(markup);keycapElement.className=cls;if(shifted&&typeof keycap.shift==="object"&&((_a3=keycap.shift)==null?void 0:_a3.tooltip))
keycapElement.dataset.tooltip=keycap.shift.tooltip;else if(!shifted&&keycap.tooltip)
keycapElement.dataset.tooltip=keycap.tooltip;}}}
show(options){var _a3;if(this._visible)return;const container=this.container;if(!container)return;if(!window.mathVirtualKeyboard)return;if(!this.stateWillChange(true))return;if(!this._element){this.buildAndAttachElement();this.adjustBoundingRect();}
if(!this._visible){const plate=this._element.getElementsByClassName("MLK__plate")[0];if(plate)this.observer.observe(plate);if(container===window.document.body){const padding2=container.style.paddingBottom;this.originalContainerBottomPadding=padding2;const keyboardHeight=plate.offsetHeight-1;container.style.paddingBottom=padding2?`calc(${padding2} + ${keyboardHeight}px)`:`${keyboardHeight}px`;}
window.addEventListener("mouseup",this);window.addEventListener("blur",this);window.addEventListener("keydown",this,{capture:true});window.addEventListener("keyup",this,{capture:true});(_a3=this._element)==null?void 0:_a3.classList.toggle("is-caps-lock",this.shiftPressCount===2);this.currentLayer=this.latentLayer;}
this._visible=true;if(options==null?void 0:options.animate){requestAnimationFrame(()=>{if(this._element){this._element.classList.add("animate");this._element.addEventListener("transitionend",()=>{var _a4;return(_a4=this._element)==null?void 0:_a4.classList.remove("animate");},{once:true});this._element.classList.add("is-visible");this.stateChanged();}});}else{this._element.classList.add("is-visible");this.stateChanged();}}
hide(_options){var _a3;const container=this.container;if(!container)return;if(!this._visible)return;if(!this.stateWillChange(false))return;this._visible=false;if(this._element){this.latentLayer=this.currentLayer;const plate=this._element.getElementsByClassName("MLK__plate")[0];if(plate)this.observer.unobserve(plate);window.removeEventListener("mouseup",this);window.removeEventListener("blur",this);window.removeEventListener("keydown",this,{capture:true});window.removeEventListener("keyup",this,{capture:true});window.removeEventListener("contextmenu",this,{capture:true});hideVariantsPanel();releaseStylesheets();(_a3=this._element)==null?void 0:_a3.remove();this._element=void 0;if(this.originalContainerBottomPadding!==null)
container.style.paddingBottom=this.originalContainerBottomPadding;}
this.stateChanged();}
get height(){var _a3,_b3;return(_b3=(_a3=this.element)==null?void 0:_a3.offsetHeight)!=null?_b3:0;}
buildAndAttachElement(){var _a3;console.assert(!this.element);this.element=makeKeyboardElement(this);window.addEventListener("contextmenu",this,{capture:true});this.element.addEventListener("contextmenu",(ev)=>{if(!ev.shiftKey){if(ev.ctrlKey||ev.button===2)
showVariantsPanel(ev.target);ev.preventDefault();ev.stopPropagation();}},{capture:true});(_a3=this.container)==null?void 0:_a3.appendChild(this.element);}
handleEvent(evt){if(isVirtualKeyboardMessage(evt)){if(!validateOrigin(evt.origin,this.originValidator)){throw new DOMException(`Message from unknown origin (${evt.origin}) cannot be handled`,"SecurityError");}
if(evt.data.action==="disconnect")
this.connectedMathfieldWindow=void 0;else if(evt.data.action!=="update-setting"&&evt.data.action!=="proxy-created"&&evt.data.action!=="execute-command"){console.assert(evt.source!==void 0);this.connectedMathfieldWindow=evt.source;}
this.handleMessage(evt.data,evt.source);}
if(!this._element)return;switch(evt.type){case"mouseup":case"blur":document.body.style.userSelect="";this.shiftPressCount=0;break;case"contextmenu":if(evt.button!==2)evt.preventDefault();break;case"keydown":{if(evt.key==="Shift"&&!evt.repeat)this.shiftPressCount=1;break;}
case"keyup":{if(evt.key==="Shift"||!evt.getModifierState("Shift")&&this.shiftPressCount!==2)
this.shiftPressCount=0;break;}}}
handleMessage(msg,source){const{action}=msg;if(action==="execute-command"){const{command}=msg;const commandTarget=getCommandTarget(command);if(window.top!==void 0&&commandTarget!=="virtual-keyboard")
return;this.executeCommand(command);return;}
if(action==="connect"||action==="show"){this.sendMessage("synchronize-proxy",{boundingRect:this.boundingRect,alphabeticLayout:this._alphabeticLayout,layouts:this._layouts,editToolbar:this._editToolbar},source);}
if(action==="disconnect")return;if(window!==window.top)return;if(action==="show"){if(typeof msg.animate!=="undefined")
this.show({animate:msg.animate});else this.show();return;}
if(action==="hide"){if(typeof msg.animate!=="undefined")
this.hide({animate:msg.animate});else this.hide();return;}
if(action==="update-setting"){if(msg.alphabeticLayout)this.alphabeticLayout=msg.alphabeticLayout;if(msg.layouts)this.layouts=msg.layouts;if(msg.editToolbar)this.editToolbar=msg.editToolbar;if(msg.setKeycap){const{keycap,value}=msg.setKeycap;this.setKeycap(keycap,value);this.render();}
return;}
if(action==="proxy-created"){this.sendMessage("synchronize-proxy",{boundingRect:this.boundingRect,alphabeticLayout:this._alphabeticLayout,layouts:this._layouts,editToolbar:this._editToolbar},source);return;}}
sendMessage(action,payload,target){if(payload.command){this.dispatchEvent(new CustomEvent("math-virtual-keyboard-command",{detail:payload.command}));}
if(!target)target=this.connectedMathfieldWindow;if(this.targetOrigin===null||this.targetOrigin==="null"||target===window){window.dispatchEvent(new MessageEvent("message",{source:window,data:__spreadValues({type:VIRTUAL_KEYBOARD_MESSAGE,action},payload)}));return;}
if(target){target.postMessage(__spreadValues({type:VIRTUAL_KEYBOARD_MESSAGE,action},payload),{targetOrigin:this.targetOrigin});}else{if(action==="execute-command"&&Array.isArray(payload.command)&&payload.command[0]==="insert"){const s=payload.command[1].split("");for(const c of s){this.dispatchEvent(new KeyboardEvent("keydown",{key:c,bubbles:true}));this.dispatchEvent(new KeyboardEvent("keyup",{key:c,bubbles:true}));}}}}
stateWillChange(visible){const success=this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible},bubbles:true,cancelable:true,composed:true}));return success;}
stateChanged(){this.dispatchEvent(new Event("virtual-keyboard-toggle"));if(!this._visible){this.dispatchEvent(new Event("geometrychange"));this.sendMessage("geometry-changed",{boundingRect:this.boundingRect});}}
focus(){this.sendMessage("focus",{});}
blur(){this.sendMessage("blur",{});}
updateToolbar(mf){const el=this._element;if(!el)return;el.classList.toggle("is-math-mode",mf.mode==="math");el.classList.toggle("is-text-mode",mf.mode==="text");el.classList.toggle("can-undo",mf.canUndo);el.classList.toggle("can-redo",mf.canRedo);el.classList.toggle("can-copy",!mf.selectionIsCollapsed);el.classList.toggle("can-copy",!mf.selectionIsCollapsed);el.classList.toggle("can-paste",true);const toolbars=el.querySelectorAll(".ML__edit-toolbar");if(!toolbars)return;for(const toolbar of toolbars)
toolbar.innerHTML=makeEditToolbar(this,mf);}
update(mf){this._style=mf.style;this.updateToolbar(mf);}
connect(){this.connectedMathfieldWindow=window;}
disconnect(){this.connectedMathfieldWindow=void 0;}
executeCommand(command){command=parseCommand(command);if(!command)return false;let selector;let args=[];let target=getCommandTarget(command);if(isArray(command)){selector=command[0];if(selector==="performWithFeedback"){target=getCommandTarget(command.slice(1));}
args=command.slice(1);}else selector=command;if(target==="virtual-keyboard")
return COMMANDS[selector].fn(void 0,...args);this.sendMessage("execute-command",{command});return false;}
dispose(){window.removeEventListener("mouseup",this);window.removeEventListener("blur",this);window.removeEventListener("message",this);}};function focusedMathfield(){let target=deepActiveElement();let mf=null;while(target){if("host"in target&&target.host instanceof MathfieldElement){mf=target.host;break;}
target=target.parentNode;}
return mf;}
if(isBrowser()&&!("mathVirtualKeyboard"in window)){if(window===window["top"]){const kbd=VirtualKeyboard.singleton;Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>kbd});}else{Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>VirtualKeyboardProxy.singleton,configurable:true});}}
function update(updates){const result={};for(const key of Object.keys(updates)){switch(key){case"scriptDepth":const scriptDepth=updates.scriptDepth;if(isArray(scriptDepth))
result.scriptDepth=[scriptDepth[0],scriptDepth[1]];else if(typeof scriptDepth==="number")
result.scriptDepth=[scriptDepth,scriptDepth];else if(typeof scriptDepth==="string"){const[from,to]=scriptDepth.split(",").map((x)=>parseInt(x.trim()));result.scriptDepth=[from,to];}else throw new TypeError("Unexpected value for scriptDepth");break;case"mathVirtualKeyboardPolicy":let keyboardPolicy=updates.mathVirtualKeyboardPolicy.toLowerCase();if(keyboardPolicy==="sandboxed"){if(window!==window["top"]){const kbd=VirtualKeyboard.singleton;Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>kbd});}
keyboardPolicy="manual";}
result.mathVirtualKeyboardPolicy=keyboardPolicy;break;case"letterShapeStyle":if(updates.letterShapeStyle==="auto"){if(l10n.locale.startsWith("fr"))result.letterShapeStyle="french";else result.letterShapeStyle="tex";}else result.letterShapeStyle=updates.letterShapeStyle;break;case"defaultMode":if(!["text","math","inline-math"].includes(updates.defaultMode)){console.error(`MathLive 0.105.0:  valid values for defaultMode are "text", "math" or "inline-math"`);result.defaultMode="math";}else result.defaultMode=updates.defaultMode;break;case"macros":result.macros=normalizeMacroDictionary(updates.macros);break;default:if(isArray(updates[key]))result[key]=[...updates[key]];else if(typeof updates[key]==="object"&&!(updates[key]instanceof Element)&&key!=="computeEngine")
result[key]=__spreadValues({},updates[key]);else result[key]=updates[key];}}
return result;}
function get(config,keys){let resolvedKeys;if(typeof keys==="string")resolvedKeys=[keys];else if(keys===void 0)resolvedKeys=Object.keys(config);else resolvedKeys=keys;const result={};for(const x of resolvedKeys){if(config[x]===null)result[x]=null;else if(isArray(config[x]))result[x]=[...config[x]];else if(typeof config[x]==="object"&&!(config[x]instanceof Element)&&x!=="computeEngine"){result[x]=__spreadValues({},config[x]);}else result[x]=config[x];}
if(typeof keys==="string")return result[keys];return result;}
function getDefault(){return{readOnly:false,defaultMode:"math",macros:{},registers:{},colorMap:defaultColorMap,backgroundColorMap:defaultBackgroundColorMap,letterShapeStyle:l10n.locale.startsWith("fr")?"french":"tex",minFontScale:0,maxMatrixCols:10,smartMode:false,smartFence:true,smartSuperscript:true,scriptDepth:[Infinity,Infinity],removeExtraneousParentheses:true,isImplicitFunction:(x)=>["\\sin","\\cos","\\tan","\\arcsin","\\arccos","\\arctan","\\arcsec","\\arccsc","\\arsinh","\\arcosh","\\artanh","\\arcsech","\\arccsch","\\arg","\\ch","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\sec","\\sinh","\\sh","\\tanh","\\tg","\\th","\\lg","\\lb","\\log","\\ln"].includes(x),mathModeSpace:"",placeholderSymbol:"\u25A2",contentPlaceholder:"",popoverPolicy:"auto",environmentPopoverPolicy:"off",keybindings:DEFAULT_KEYBINDINGS,inlineShortcuts:INLINE_SHORTCUTS,inlineShortcutTimeout:0,mathVirtualKeyboardPolicy:"auto",virtualKeyboardTargetOrigin:window==null?void 0:window.origin,originValidator:"none",onInsertStyle:defaultInsertStyleHook,onInlineShortcut:()=>"",onScrollIntoView:null,onExport:defaultExportHook,value:""};}
function effectiveMode(options){if(options.defaultMode==="inline-math")return"math";return options.defaultMode;}
function updateComposition(model,s){const cursor=model.at(model.position);if(cursor.type==="composition"){cursor.value=s;}else{const{caret}=cursor;cursor.caret=void 0;const atom=new CompositionAtom(s,{mode:cursor.mode});atom.caret=caret;cursor.parent.addChildAfter(atom,cursor);model.position+=1;}}
function removeComposition(model){const cursor=model.at(model.position);if(cursor.type==="composition"){cursor.parent.removeChild(cursor);model.position-=1;}}
defineRootEnvironment(["math","displaymath"],makeEnvironment);defineRootEnvironment("center",makeEnvironment);defineTabularEnvironment(["multline","multline*"],"",makeEnvironment);defineFunction("displaylines","",{parse:(parser)=>{parser.skipWhitespace();if(!parser.match("<{>"))return[];const lines=[];let line=[];if(parser.mathlist.length>0)lines.push([parser.mathlist]);parser.beginContext({tabular:true,root:true});do{if(parser.end()||parser.match("<}>"))break;if(parser.matchColumnSeparator()||parser.matchRowSeparator()){lines.push([line]);line=[];}else{line.push(...parser.scan((token)=>["<}>","&","\\cr","\\\\","\\tabularnewline"].includes(token)));}}while(true);parser.endContext();lines.push([line]);const rhs=parser.scan();if(rhs.length>0)lines.push([rhs]);return lines;},createAtom:(options)=>new ArrayAtom("lines",options.args,[],{leftDelim:".",rightDelim:".",columns:[{align:"l"}],classes:["ML__multiline_environment"],isRoot:true,minColumns:1,maxColumns:1,minRows:1})});defineTabularEnvironment("split","",makeEnvironment);defineTabularEnvironment(["gather","gather*","gathered"],"",makeEnvironment);defineTabularEnvironment(["equation","equation*","subequations"],"",makeEnvironment);defineRootEnvironment(["align","align*","eqnarray"],makeEnvironment,{tabular:true});defineTabularEnvironment(["aligned"],"",makeEnvironment);defineTabularEnvironment("array","{columns:colspec}",(name,array,rowGaps,args)=>{return new ArrayAtom(name,array,rowGaps,{columns:args[0],mathstyleName:"textstyle"});});defineTabularEnvironment(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],"[columns:colspec]",makeEnvironment);defineTabularEnvironment(["smallmatrix","smallmatrix*"],"[columns:colspec]",makeEnvironment);defineTabularEnvironment(["cases","dcases","rcases"],"",makeEnvironment);function makeEnvironment(name,content=[[[]]],rowGaps=[],args=[],maxMatrixCols){switch(name){case"math":return new ArrayAtom(name,content,rowGaps,{mathstyleName:"textstyle",isRoot:true,minColumns:1,maxColumns:1,minRows:1,maxRows:1});case"displaymath":return new ArrayAtom(name,content,rowGaps,{mathstyleName:"textstyle",isRoot:true,minColumns:1,maxColumns:1,minRows:1,maxRows:1});case"center":return new ArrayAtom(name,content,rowGaps,{columns:[{align:"c"}],classes:["ML__center_environment"],isRoot:true,minColumns:1,maxColumns:1,minRows:1,maxRows:1});case"multline":case"multline*":return new ArrayAtom(name,content,rowGaps,{columns:[{align:"m"}],leftDelim:".",rightDelim:".",isRoot:true,minColumns:1,maxColumns:1,minRows:1});case"split":return new ArrayAtom(name,content,rowGaps,{columns:[{align:"r"},{align:"l"}],minColumns:2,minRows:1,isRoot:false});case"gather":case"gather*":return new ArrayAtom(name,content,rowGaps,{columns:[{gap:0.25},{align:"c"},{gap:0}],minColumns:1,maxColumns:1,minRows:1,isRoot:true,classes:["ML__gather_environment"]});case"gathered":return new ArrayAtom(name,content,rowGaps,{columns:[{gap:0.25},{align:"c"},{gap:0}],minColumns:1,maxColumns:1,minRows:1});case"equation":case"equation*":case"subequations":return new ArrayAtom(name,content,rowGaps,{columns:[{align:"c"}],isRoot:true,minColumns:1,maxColumns:1,minRows:1});case"aligned":{let colCount=0;for(const row of content)colCount=Math.max(colCount,row.length);const columns=[{gap:0},{align:"r"},{gap:0.25},{align:"l"}];let i=2;while(i<colCount){columns.push({gap:1},{align:"r"},{gap:0.25},{align:"l"});i+=2;}
columns.push({gap:0});return new ArrayAtom(name,content,rowGaps,{arraycolsep:0,columns,minColumns:2,minRows:1,isRoot:name!=="aligned"});}
case"eqnarray":return new ArrayAtom(name,content,rowGaps,{arraycolsep:0,columns:[{gap:0},{align:"r"},{align:"c"},{align:"l"}],minColumns:3,maxColumns:3,minRows:1,isRoot:true,classes:["ML__eqnarray_environment"]});case"align":case"align*":return new ArrayAtom(name,content,rowGaps,{arraycolsep:0,columns:[{gap:0},{align:"r"},{gap:0.25},{align:"l"}],minColumns:2,maxColumns:2,minRows:1,isRoot:true,classes:["ML__align_environment"]});case"pmatrix":case"pmatrix*":return new ArrayAtom(name,content,rowGaps,{mathstyleName:"textstyle",leftDelim:"(",rightDelim:")",columns:defaultColumns(args[0],maxMatrixCols)});case"bmatrix":case"bmatrix*":return new ArrayAtom(name,content,rowGaps,{mathstyleName:"textstyle",leftDelim:"[",rightDelim:"]",columns:defaultColumns(args[0],maxMatrixCols)});case"Bmatrix":case"Bmatrix*":return new ArrayAtom(name,content,rowGaps,{mathstyleName:"textstyle",leftDelim:"\\lbrace",rightDelim:"\\rbrace",columns:defaultColumns(args[0],maxMatrixCols)});case"vmatrix":case"vmatrix*":return new ArrayAtom(name,content,rowGaps,{mathstyleName:"textstyle",leftDelim:"\\vert",rightDelim:"\\vert",columns:defaultColumns(args[0],maxMatrixCols)});case"Vmatrix":case"Vmatrix*":return new ArrayAtom(name,content,rowGaps,{mathstyleName:"textstyle",leftDelim:"\\Vert",rightDelim:"\\Vert",columns:defaultColumns(args[0],maxMatrixCols)});case"matrix":case"matrix*":return new ArrayAtom(name,content,rowGaps,{mathstyleName:"textstyle",leftDelim:".",rightDelim:".",columns:defaultColumns(args==null?void 0:args[0],maxMatrixCols)});case"smallmatrix":case"smallmatrix*":return new ArrayAtom(name,content,rowGaps,{mathstyleName:"scriptstyle",columns:defaultColumns(args==null?void 0:args[0],maxMatrixCols),colSeparationType:"small",arraystretch:0.5});case"cases":case"dcases":return new ArrayAtom(name,content,rowGaps,{mathstyleName:name==="dcases"?"displaystyle":"textstyle",arraystretch:1.2,leftDelim:"\\lbrace",rightDelim:".",columns:[{align:"l"},{gap:1},{align:"l"}]});case"rcases":return new ArrayAtom(name,content,rowGaps,{arraystretch:1.2,leftDelim:".",rightDelim:"\\rbrace",columns:[{align:"l"},{gap:1},{align:"l"}]});case"lines":return new ArrayAtom(name,content,rowGaps,{leftDelim:".",rightDelim:".",columns:[{align:"l"}],isRoot:true,minColumns:1,maxColumns:1,minRows:1});}
return new ArrayAtom(name,content,rowGaps,{mathstyleName:"textstyle"});}
function defaultColumns(args,maxMatrixCols=10){return args!=null?args:Array(maxMatrixCols).fill({align:"c"});}
function cellSiblings(model){let atom=model.at(model.position);while(atom&&!isCellBranch(atom.parentBranch))atom=atom.parent;return[atom.firstSibling,atom.lastSibling];}
function parentArray(model,where){let atom=model.at(model.position);while(atom&&!(atom.parent instanceof ArrayAtom))atom=atom.parent;if(atom&&atom.type==="array"){const array=atom;if(array.environmentName==="lines"){}}
if(!atom||!(atom.parent instanceof ArrayAtom)){const cursor=model.at(model.position);atom=cursor;if(!atom.parent.parent){let secondCell=model.extractAtoms([model.position,model.lastOffset]);let firstCell=model.extractAtoms([0,model.position]);let array;if(where.endsWith("column")){if(firstCell.length===0)firstCell=placeholderCell();if(secondCell.length===0)secondCell=placeholderCell();array=makeEnvironment("split",[[firstCell,secondCell]]);model.root=array;if(isPlaceholderCell(array,0,0))selectCell(model,array,0,0);else if(isPlaceholderCell(array,0,1))selectCell(model,array,0,1);else model.position=model.offsetOf(cursor);}else{array=makeEnvironment("lines",[[firstCell],[secondCell]]);model.root=array;selectCell(model,array,1,0);}
return[void 0,[0,0]];}
if(atom.parent instanceof LeftRightAtom){const parent=atom.parent;let secondCell=model.extractAtoms([model.position,model.offsetOf(parent.lastChild)]);let firstCell=model.extractAtoms([model.offsetOf(parent.firstChild),model.position]);if(firstCell.length===0)firstCell=placeholderCell();if(secondCell.length===0)secondCell=placeholderCell();let envName="pmatrix";const lDelim=parent.leftDelim;const rDelim=parent.rightDelim;if(lDelim==="("&&(rDelim===")"||rDelim==="?"))
envName="pmatrix";else if((lDelim==="["||lDelim==="\\lbrack")&&(rDelim==="]"||rDelim==="\\rbrack"||rDelim==="?"))
envName="bmatrix";else if(lDelim==="\\vert"&&rDelim==="\\vert")envName="vmatrix";else if(lDelim==="\\Vert"&&rDelim==="\\Vert")envName="Vmatrix";else if((lDelim==="{"||lDelim==="\\lbrace")&&(rDelim==="."||rDelim==="?"))
envName="cases";const array=makeEnvironment(envName,where.endsWith("column")?[[firstCell,secondCell]]:[[firstCell],[secondCell]]);parent.parent.addChildBefore(array,parent);parent.parent.removeChild(parent);if(isPlaceholderCell(array,0,0))selectCell(model,array,0,0);else if(where.endsWith("column")){if(isPlaceholderCell(array,0,1))selectCell(model,array,0,1);else model.position=model.offsetOf(atom);}else{if(isPlaceholderCell(array,1,0))selectCell(model,array,1,0);else model.position=model.offsetOf(atom);}
return[void 0,[0,0]];}}
return atom&&atom.parent instanceof ArrayAtom?[atom.parent,atom.parentBranch]:[void 0,[0,0]];}
function isPlaceholderCell(array,row,column){const cell=array.getCell(row,column);if(!cell||cell.length!==2)return false;return cell[1].type==="placeholder";}
function cellRange(model,array,row,column){const cell=array.getCell(row,column);if(!cell)return-1;return[model.offsetOf(cell[0]),model.offsetOf(cell[cell.length-1])];}
function selectCell(model,array,row,column){const range2=cellRange(model,array,row,column);if(typeof range2!=="number")model.setSelection(range2);}
function setPositionInCell(model,array,row,column,pos){const cell=array.getCell(row,column);if(!cell)return;model.setPositionHandlingPlaceholder(model.offsetOf(cell[pos==="start"?0:cell.length-1]));}
function addCell(model,where){const[arrayAtom,[row,column]]=parentArray(model,where);if(!arrayAtom)return;switch(where){case"after row":arrayAtom.addRowAfter(row);setPositionInCell(model,arrayAtom,row+1,0,"end");break;case"after column":if(arrayAtom.maxColumns<=arrayAtom.colCount){model.announce("plonk");return;}
arrayAtom.addColumnAfter(column);setPositionInCell(model,arrayAtom,row,column+1,"end");break;case"before row":arrayAtom.addRowBefore(row);setPositionInCell(model,arrayAtom,row,0,"start");break;case"before column":if(arrayAtom.maxColumns<=arrayAtom.colCount){model.announce("plonk");return;}
arrayAtom.addColumnBefore(column);setPositionInCell(model,arrayAtom,row,column,"start");break;}}
function addRowAfter(model){var _a3;const cursor=model.at(model.position);if(!isCellBranch(cursor.parentBranch)&&cursor.parent!==model.root&&model.root.type!=="root"){model.announce("plonk");return false;}
if(!model.contentWillChange({inputType:"insertText"}))return false;if((_a3=model.parentEnvironment)==null?void 0:_a3.isMultiline){if(!model.selectionIsCollapsed)model.deleteAtoms(range(model.selection));const[first,last]=cellSiblings(model);let after=model.extractAtoms([model.position,model.offsetOf(last)]);let before=model.extractAtoms([model.offsetOf(first),model.position]);const array=first.parent;const[row,col]=first.parentBranch;array.setCell(row,col,before);addCell(model,"after row");array.setCell(row+1,col,after);model.position=model.offsetOf(array.getCell(row+1,col)[0]);model.contentDidChange({inputType:"insertText"});return true;}
addCell(model,"after row");model.contentDidChange({inputType:"insertText"});return true;}
function addRowBefore(model){if(!model.contentWillChange({inputType:"insertText"}))return false;addCell(model,"before row");model.contentDidChange({inputType:"insertText"});return true;}
function addColumnAfter(model){if(!model.contentWillChange({inputType:"insertText"}))return false;addCell(model,"after column");model.contentDidChange({inputType:"insertText"});return true;}
function addColumnBefore(model){if(!model.contentWillChange({inputType:"insertText"}))return false;addCell(model,"before column");model.contentDidChange({inputType:"insertText"});return true;}
function setEnvironment(model,environment){if(!model.contentWillChange({}))return false;model.mathfield.snapshot();let leftDelim=".";let rightDelim=".";switch(environment){case"pmatrix":case"pmatrix*":leftDelim="(";rightDelim=")";break;case"bmatrix":case"bmatrix*":leftDelim="[";rightDelim="]";break;case"Bmatrix":case"Bmatrix*":leftDelim="\\lbrace";rightDelim="\\rbrace";break;case"vmatrix":case"vmatrix*":leftDelim="\\vert";rightDelim="\\vert";break;case"Vmatrix":case"Vmatrix*":leftDelim="\\Vert";rightDelim="\\Vert";break;case"matrix":case"matrix*":leftDelim=".";rightDelim=".";break;case"cases":case"dcases":leftDelim="\\lbrace";break;case"rcases":rightDelim="\\rbrace";break;}
const atom=model.at(model.position);const arrayAtom=atom.type==="array"?atom:model.parentEnvironment;arrayAtom.environmentName=environment;arrayAtom.leftDelim=leftDelim;arrayAtom.rightDelim=rightDelim;model.contentDidChange({});return true;}
function removeCell(model,where){let atom=model.at(model.position);while(atom&&!(Array.isArray(atom.parentBranch)&&atom.parent instanceof ArrayAtom))
atom=atom.parent;if(Array.isArray(atom==null?void 0:atom.parentBranch)&&(atom==null?void 0:atom.parent)instanceof ArrayAtom){const arrayAtom=atom.parent;const treeBranch=atom.parentBranch;let pos;switch(where){case"row":if(arrayAtom.rowCount>1){arrayAtom.removeRow(treeBranch[0]);const cell=arrayAtom.getCell(Math.max(0,treeBranch[0]-1),treeBranch[1]);pos=model.offsetOf(cell[cell.length-1]);}
break;case"column":if(arrayAtom.colCount>arrayAtom.minColumns){arrayAtom.removeColumn(treeBranch[1]);const cell=arrayAtom.getCell(treeBranch[0],Math.max(0,treeBranch[1]-1));pos=model.offsetOf(cell[cell.length-1]);}
break;}
if(pos!==void 0)model.setPositionHandlingPlaceholder(pos);}}
function removeRow(model){if(!model.contentWillChange({inputType:"deleteContent"}))return false;removeCell(model,"row");model.contentDidChange({inputType:"deleteContent"});return true;}
function removeColumn(model){if(!model.contentWillChange({inputType:"deleteContent"}))return false;removeCell(model,"column");model.contentDidChange({inputType:"deleteContent"});return true;}
register2({addRowAfter,addColumnAfter,addRowBefore,addColumnBefore,removeRow,removeColumn,setEnvironment},{target:"model",canUndo:true,changeContent:true,changeSelection:true});function placeholderCell(){return[new PlaceholderAtom()];}
var _UndoManager=class _UndoManager{constructor(model){this.recording=false;this.model=model;this.reset();}
reset(){this.stack=[];this.index=-1;this.lastOp="";}
startRecording(){this.recording=true;}
stopRecording(){this.recording=false;}
canUndo(){return this.index-1>=0;}
canRedo(){return this.stack.length-1>this.index;}
stopCoalescing(selection){if(selection&&this.index>=0)
this.stack[this.index].selection=selection;this.lastOp="";}
undo(){if(!this.canUndo())return false;this.model.setState(this.stack[this.index-1],{silenceNotifications:false,type:"undo"});this.index-=1;this.lastOp="";return true;}
redo(){if(!this.canRedo())return false;this.index+=1;this.model.setState(this.stack[this.index],{silenceNotifications:false,type:"redo"});this.lastOp="";return true;}
pop(){if(!this.canUndo())return;this.stack.splice(this.index,this.stack.length-this.index);this.index-=1;}
snapshot(op){if(!this.recording)return false;if(op&&op===this.lastOp)this.pop();this.stack.splice(this.index+1,this.stack.length-this.index-1);this.stack.push(this.model.getState());this.index+=1;if(this.stack.length>_UndoManager.maximumDepth){this.stack.shift();this.index-=1;}
this.lastOp=op!=null?op:"";return true;}};_UndoManager.maximumDepth=1e3;var UndoManager=_UndoManager;function wordBoundaryOffset(model,offset,direction){if(model.at(offset).mode!=="text")return offset;const dir=direction==="backward"?-1:1;let result;if(LETTER_AND_DIGITS.test(model.at(offset).value)){let i=offset;let match;do{match=model.at(i).mode==="text"&&LETTER_AND_DIGITS.test(model.at(i).value);i+=dir;}while(model.at(i)&&match);result=model.at(i)?i-2*dir:i-dir;}else if(/\s/.test(model.at(offset).value)){let i=offset;while(model.at(i)&&model.at(i).mode==="text"&&/\s/.test(model.at(i).value))
i+=dir;if(!model.at(i)){result=i-dir;}else{let match=true;do{match=model.at(i).mode==="text"&&!/\s/.test(model.at(i).value);i+=dir;}while(model.at(i)&&match);result=model.at(i)?i-2*dir:i-dir;}}else{let i=offset;while(model.at(i)&&model.at(i).mode==="text"&&!/\s/.test(model.at(i).value))
i+=dir;result=model.at(i)?i:i-dir;let match=true;while(model.at(i)&&match){match=model.at(i).mode==="text"&&/\s/.test(model.at(i).value);if(match)result=i;i+=dir;}
result=model.at(i)?i-2*dir:i-dir;}
return result-(dir>0?0:1);}
function skip(model,direction,options){var _a3,_b3,_c2,_d2,_e,_f,_g;const previousPosition=model.position;if(!((_a3=options==null?void 0:options.extend)!=null?_a3:false))model.collapseSelection(direction);let atom=model.at(model.position);if(direction==="forward"){if(atom.type==="subsup"){atom=atom.rightSibling;if(!atom)atom=model.at(model.position+1);}else atom=model.at(model.position+1);}
if(!atom){model.announce("plonk");return false;}
let offset=model.offsetOf(atom);if(atom instanceof TextAtom){offset=wordBoundaryOffset(model,offset,direction);}else if(atom instanceof LatexAtom){if(atom.isSuggestion){console.assert(direction==="forward");while(atom&&atom instanceof LatexAtom){atom.isSuggestion=false;offset=model.offsetOf(atom);atom=atom.rightSibling;}}else if(direction==="forward"){atom=atom.rightSibling;if(!atom||!(atom instanceof LatexAtom)){model.announce("plonk");return false;}
while(atom&&atom instanceof LatexAtom&&/[a-zA-Z\*]/.test(atom.value)){offset=model.offsetOf(atom);atom=atom.rightSibling;}}else{atom=atom.leftSibling;if(!atom||!(atom instanceof LatexAtom)){model.announce("plonk");return false;}
while(atom&&atom instanceof LatexAtom&&/[a-zA-Z\*]/.test(atom.value)){offset=model.offsetOf(atom);atom=atom.leftSibling;}}}else if(direction==="forward"&&atom.type==="mopen"){let level=0;do{if(atom.type==="mopen")level+=1;else if(atom.type==="mclose")level-=1;atom=atom.rightSibling;}while(!atom.isLastSibling&&level!==0);offset=model.offsetOf(atom.leftSibling);}else if(direction==="backward"&&atom.type==="mclose"){let level=0;do{if(atom.type==="mopen")level+=1;else if(atom.type==="mclose")level-=1;atom=atom.leftSibling;}while(!atom.isFirstSibling&&level!==0);offset=model.offsetOf(atom);}else if(direction==="backward"){if(atom.type==="first"){while(offset>0&&atom.type==="first"){offset-=1;atom=model.at(offset);}}else{const type=atom.type;if(atom.type==="subsup"){offset=model.offsetOf(model.at(offset).leftSibling);}
offset-=1;let nextType=(_b3=model.at(offset))==null?void 0:_b3.type;while(offset>=0&&nextType===type){if(((_c2=model.at(offset))==null?void 0:_c2.type)==="subsup")
offset=model.offsetOf(model.at(offset).leftSibling);else offset-=1;nextType=model.at(offset).type;}}}else{const{type}=atom;let nextType=(_d2=model.at(offset))==null?void 0:_d2.type;const{lastOffset}=model;while(offset<=lastOffset&&(nextType===type||nextType==="subsup")){while(((_e=model.at(offset).rightSibling)==null?void 0:_e.type)==="subsup")
offset=model.offsetOf(model.at(offset).rightSibling);offset+=1;nextType=(_f=model.at(offset))==null?void 0:_f.type;}
offset-=1;}
if((_g=options==null?void 0:options.extend)!=null?_g:false){if(!model.setSelection(model.anchor,offset)){model.announce("plonk");return false;}}else{if(offset===model.position){model.announce("plonk");return false;}
model.position=offset;}
model.announce("move",previousPosition);model.mathfield.stopCoalescingUndo();return true;}
function move(model,direction,options){var _a3,_b3;options=options!=null?options:{extend:false};model.mathfield.styleBias=direction==="backward"?"right":"left";if(direction!=="forward"){const[from,to]=getCommandSuggestionRange(model);if(from!==void 0&&to!==void 0)model.deleteAtoms([from,to]);}
if(direction==="upward")return moveUpward(model,options);if(direction==="downward")return moveDownward(model,options);if(options.extend){let pos2=nextValidPosition(model,model.position,direction);if(pos2<0)pos2=0;if(pos2>model.lastOffset)pos2=model.lastOffset;const result=model.setSelection(model.anchor,pos2);model.mathfield.stopCoalescingUndo();return result;}
if(model.selectionIsPlaceholder){model.collapseSelection(direction);const result=move(model,direction);model.mathfield.stopCoalescingUndo();return result;}
let pos=model.position;const previousPosition=pos;if(model.collapseSelection(direction)){pos=model.position;if(!isValidPosition(model,pos))
pos=nextValidPosition(model,pos,direction);}else pos=nextValidPosition(model,pos,direction);if(pos<0||pos>model.lastOffset){let success=true;if(!model.silenceNotifications){success=(_b3=(_a3=model.mathfield.host)==null?void 0:_a3.dispatchEvent(new CustomEvent("move-out",{detail:{direction},cancelable:true,bubbles:true,composed:true})))!=null?_b3:true;}
if(success)model.announce("plonk");return success;}
model.setPositionHandlingPlaceholder(pos);model.mathfield.stopCoalescingUndo();model.announce("move",previousPosition);return true;}
function nextValidPosition(model,pos,direction){pos=pos+(direction==="forward"?1:-1);if(pos<0||pos>model.lastOffset)return pos;if(!isValidPosition(model,pos))
return nextValidPosition(model,pos,direction);return pos;}
function isValidPosition(model,pos){var _a3;const atom=model.at(pos);let parent=atom.parent;while(parent&&!parent.inCaptureSelection)parent=parent.parent;if(parent==null?void 0:parent.inCaptureSelection)return false;if((_a3=atom.parent)==null?void 0:_a3.skipBoundary){if(!atom.isFirstSibling&&atom.isLastSibling)return false;if(atom.type==="first")return false;}
if(model.mathfield.hasEditablePrompts&&!atom.parentPrompt)return false;return true;}
function getClosestAtomToXPosition(mathfield,search,x){let prevX=Infinity;let i=0;for(;i<search.length;i++){const atom=search[i];const el=mathfield.getHTMLElement(atom);if(!el)continue;const toX=getLocalDOMRect(el).right;const abs=Math.abs(x-toX);if(abs<=prevX){prevX=abs;}else{break;}}
return search[i-1];}
function moveToClosestAtomVertically(model,fromAtom,toAtoms,extend,direction){const hasEditablePrompts=model.mathfield.hasEditablePrompts;const editableAtoms=!hasEditablePrompts?toAtoms:toAtoms.filter((a)=>a.type==="prompt"&&!a.captureSelection);const fromX=getLocalDOMRect(model.mathfield.getHTMLElement(fromAtom)).right;const targetSelection=model.offsetOf(getClosestAtomToXPosition(model.mathfield,editableAtoms,fromX))-(hasEditablePrompts?1:0);if(extend){const[left,right]=model.selection.ranges[0];let newSelection;const cmp=direction==="up"?left:right;if(targetSelection<cmp){newSelection={ranges:[[targetSelection,right]],direction:"backward"};}else{newSelection={ranges:[[left,targetSelection]],direction:"forward"};}
model.setSelection(newSelection);}else{model.setPositionHandlingPlaceholder(targetSelection);}
model.announce(`move ${direction}`);}
function moveUpward(model,options){var _a3,_b3;const extend=(_a3=options==null?void 0:options.extend)!=null?_a3:false;if(!extend)model.collapseSelection("backward");const handleDeadEnd=()=>{var _a4,_b4;let success=true;if(!model.silenceNotifications){success=(_b4=(_a4=model.mathfield.host)==null?void 0:_a4.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"upward"},cancelable:true,bubbles:true,composed:true})))!=null?_b4:true;}
model.announce(success?"line":"plonk");return success;};const baseAtom=model.at(model.position);let atom=baseAtom;while(atom&&atom.parentBranch!=="below"&&!(Array.isArray(atom.parentBranch)&&atom.parent instanceof ArrayAtom))
atom=atom.parent;if(Array.isArray(atom==null?void 0:atom.parentBranch)&&atom.parent instanceof ArrayAtom){const arrayAtom=atom.parent;if(atom.parentBranch[0]<1)return handleDeadEnd();const rowAbove=atom.parentBranch[0]-1;const aboveCell=arrayAtom.getCell(rowAbove,atom.parentBranch[1]);const cellHasPrompt=aboveCell.some((a)=>a.type==="prompt"&&!a.captureSelection);if(!cellHasPrompt&&model.mathfield.hasEditablePrompts)
return handleDeadEnd();moveToClosestAtomVertically(model,baseAtom,aboveCell,extend,"up");}else if(atom){const branch=(_b3=atom.parent.branch("above"))!=null?_b3:atom.parent.createBranch("above");const branchHasPrompt=branch.some((a)=>a.type==="prompt"&&a.placeholderId);if(!branchHasPrompt&&model.mathfield.hasEditablePrompts)
return handleDeadEnd();moveToClosestAtomVertically(model,baseAtom,branch,extend,"up");}else return handleDeadEnd();model.mathfield.stopCoalescingUndo();return true;}
function moveDownward(model,options){var _a3,_b3;const extend=(_a3=options==null?void 0:options.extend)!=null?_a3:false;if(!extend)model.collapseSelection("forward");const handleDeadEnd=()=>{var _a4,_b4;let success=true;if(!model.silenceNotifications){success=(_b4=(_a4=model.mathfield.host)==null?void 0:_a4.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"downward"},cancelable:true,bubbles:true,composed:true})))!=null?_b4:true;}
model.announce(success?"line":"plonk");return success;};const baseAtom=model.at(model.position);let atom=baseAtom;while(atom&&atom.parentBranch!=="above"&&!(isCellBranch(atom.parentBranch)&&atom.parent instanceof ArrayAtom))
atom=atom.parent;if(isCellBranch(atom==null?void 0:atom.parentBranch)&&atom.parent instanceof ArrayAtom){const arrayAtom=atom.parent;if(atom.parentBranch[0]+1>arrayAtom.rows.length-1)
return handleDeadEnd();const rowBelow=atom.parentBranch[0]+1;const belowCell=arrayAtom.getCell(rowBelow,atom.parentBranch[1]);const cellHasPrompt=belowCell.some((a)=>a.type==="prompt"&&!a.captureSelection);if(!cellHasPrompt&&model.mathfield.hasEditablePrompts)
return handleDeadEnd();moveToClosestAtomVertically(model,baseAtom,belowCell,extend,"down");}else if(atom){const branch=(_b3=atom.parent.branch("below"))!=null?_b3:atom.parent.createBranch("below");const branchHasPrompt=branch.some((a)=>a.type==="prompt");if(!branchHasPrompt&&model.mathfield.hasEditablePrompts)
return handleDeadEnd();moveToClosestAtomVertically(model,baseAtom,branch,extend,"down");}else return handleDeadEnd();return true;}
function moveAfterParent(model){const previousPosition=model.position;const parent=model.at(previousPosition).parent;if(!(parent==null?void 0:parent.parent)){model.announce("plonk");return false;}
model.position=model.offsetOf(parent);model.mathfield.stopCoalescingUndo();model.announce("move",previousPosition);return true;}
function superscriptDepth(model){let result=0;let atom=model.at(model.position);let wasSuperscript=false;while(atom){if(!atom.hasEmptyBranch("superscript")||!atom.hasEmptyBranch("subscript"))
result+=1;if(!atom.hasEmptyBranch("superscript"))wasSuperscript=true;else if(!atom.hasEmptyBranch("subscript"))wasSuperscript=false;atom=atom.parent;}
return wasSuperscript?result:0;}
function subscriptDepth(model){let result=0;let atom=model.at(model.position);let wasSubscript=false;while(atom){if(!atom.hasEmptyBranch("superscript")||!atom.hasEmptyBranch("subscript"))
result+=1;if(!atom.hasEmptyBranch("superscript"))wasSubscript=false;else if(!atom.hasEmptyBranch("subscript"))wasSubscript=true;atom=atom.parent;}
return wasSubscript?result:0;}
function moveToSuperscript(model){var _a3;model.collapseSelection();if(superscriptDepth(model)>=model.mathfield.options.scriptDepth[1]){model.announce("plonk");return false;}
let target=model.at(model.position);if(target.subsupPlacement===void 0){if(((_a3=target.rightSibling)==null?void 0:_a3.type)!=="subsup"){target.parent.addChildAfter(new SubsupAtom({style:target.style}),target);}
target=target.rightSibling;}
target.createBranch("superscript");model.setSelection(model.getSiblingsRange(model.offsetOf(target.superscript[0])));return true;}
function moveToSubscript(model){var _a3;model.collapseSelection();if(subscriptDepth(model)>=model.mathfield.options.scriptDepth[0]){model.announce("plonk");return false;}
let target=model.at(model.position);if(target.subsupPlacement===void 0){if(((_a3=model.at(model.position+1))==null?void 0:_a3.type)!=="subsup"){target.parent.addChildAfter(new SubsupAtom({style:model.at(model.position).style}),target);}
target=model.at(model.position+1);}
target.createBranch("subscript");model.setSelection(model.getSiblingsRange(model.offsetOf(target.subscript[0])));return true;}
function getTabbableElements(){function tabbable(element){const regularTabbables=[];const orderedTabbables=[];const candidates=[...element.querySelectorAll(`input, select, textarea, a[href], button,
        [tabindex], audio[controls], video[controls],
        [contenteditable]:not([contenteditable="false"]), details>summary`)].filter(isNodeMatchingSelectorTabbable);candidates.forEach((candidate,i)=>{const candidateTabindex=getTabindex(candidate);if(candidateTabindex===0)regularTabbables.push(candidate);else{orderedTabbables.push({documentOrder:i,tabIndex:candidateTabindex,node:candidate});}});return orderedTabbables.sort((a,b)=>a.tabIndex===b.tabIndex?a.documentOrder-b.documentOrder:a.tabIndex-b.tabIndex).map((a)=>a.node).concat(regularTabbables);}
function isNodeMatchingSelectorTabbable(element){if(!isNodeMatchingSelectorFocusable(element)||isNonTabbableRadio(element)||getTabindex(element)<0)
return false;return true;}
function isNodeMatchingSelectorFocusable(node){if(node.disabled||node.type==="hidden"&&node.tagName.toUpperCase()==="INPUT"||isHidden(node))
return false;return true;}
function getTabindex(node){var _a3;const tabindexAttr=Number.parseInt((_a3=node.getAttribute("tabindex"))!=null?_a3:"NaN",10);if(!Number.isNaN(tabindexAttr))return tabindexAttr;if(node.contentEditable==="true")return 0;if((node.nodeName==="AUDIO"||node.nodeName==="VIDEO")&&node.getAttribute("tabindex")===null)
return 0;return node.tabIndex;}
function isNonTabbableRadio(node){return node.tagName.toUpperCase()==="INPUT"&&node.type==="radio"&&!isTabbableRadio(node);}
function getCheckedRadio(nodes,form){for(const node of nodes)
if(node.checked&&node.form===form)return node;return null;}
function isTabbableRadio(node){var _a3;if(!node.name)return true;const radioScope=(_a3=node.form)!=null?_a3:node.ownerDocument;const radioSet=radioScope.querySelectorAll('input[type="radio"][name="'+node.name+'"]');const checked=getCheckedRadio(radioSet,node.form);return!checked||checked===node;}
function isHidden(element){if(!isBrowser()||element===document.activeElement||element.contains(document.activeElement))
return false;if(getComputedStyle(element).visibility==="hidden")return true;const bounds=element.getBoundingClientRect();if(bounds.width===0||bounds.height===0)return true;while(element){if(getComputedStyle(element).display==="none")return true;element=element.parentElement;}
return false;}
if(!isBrowser())return[];return tabbable(document.body);}
function select(model,target,direction="forward"){const previousPosition=model.position;if(isArray(target)){const first=model.offsetOf(target[0]);const last=model.offsetOf(target[target.length-1]);if(direction==="forward")model.setSelection(first,last);else model.setSelection(last,first);model.announce("move",previousPosition);model.mathfield.stopCoalescingUndo();return true;}
if(direction==="forward")
return select(model,[target.leftSibling,target]);return select(model,[target,target.leftSibling]);}
function leapTo(model,target){const previousPosition=model.position;if(typeof target==="number")target=model.at(target);if(target.type==="prompt"){model.setSelection(model.offsetOf(target.firstChild),model.offsetOf(target.lastChild));}else{const newPosition=model.offsetOf(target);if(target.type==="placeholder")
model.setSelection(newPosition-1,newPosition);else model.position=newPosition;}
model.announce("move",previousPosition);model.mathfield.stopCoalescingUndo();return true;}
function leap(model,dir){var _a3,_b3;const dist=dir==="forward"?1:-1;if(model.at(model.anchor).type==="placeholder")move(model,dir);let origin;const parentPrompt=model.at(model.anchor).parentPrompt;if(parentPrompt){if(dir==="forward")origin=model.offsetOf(parentPrompt)+1;else origin=model.offsetOf(parentPrompt.leftSibling);}else origin=Math.max(model.position+dist,0);const target=leapTarget(model,origin,dir);if(!target||dir==="forward"&&model.offsetOf(target)<origin||dir==="backward"&&model.offsetOf(target)>origin){const success=(_b3=(_a3=model.mathfield.host)==null?void 0:_a3.dispatchEvent(new CustomEvent("move-out",{detail:{direction:dir},cancelable:true,bubbles:true,composed:true})))!=null?_b3:true;if(!success){model.announce("plonk");return false;}
const tabbable=getTabbableElements();if(!document.activeElement||tabbable.length<=1){model.announce("plonk");return false;}
let index=tabbable.indexOf(document.activeElement)+dist;if(index<0)index=tabbable.length-1;if(index>=tabbable.length)index=0;tabbable[index].focus();model.mathfield.stopCoalescingUndo();return true;}
leapTo(model,target);return true;}
function leapTarget(model,origin=0,dir="forward"){return model.findAtom((atom)=>atom.type==="placeholder"||atom.type==="prompt"||!model.mathfield.readOnly&&atom.treeDepth>2&&atom.isFirstSibling&&atom.isLastSibling,origin,dir);}
register2({moveToOpposite:(model)=>{const OPPOSITE_RELATIONS={superscript:"subscript",subscript:"superscript",above:"below",below:"above"};const cursor=model.at(model.position);const{parent}=cursor;if(!parent){model.announce("plonk");return false;}
const relation=cursor.parentBranch;let oppositeRelation;if(typeof relation==="string")
oppositeRelation=OPPOSITE_RELATIONS[relation];if(!oppositeRelation){const result2=cursor.subsupPlacement?moveToSubscript(model):moveToSuperscript(model);model.mathfield.stopCoalescingUndo();return result2;}
if(!parent.branch(oppositeRelation)){parent.createBranch(oppositeRelation);}
const result=model.setSelection(model.getBranchRange(model.offsetOf(parent),oppositeRelation));model.mathfield.stopCoalescingUndo();return result;},moveBeforeParent:(model)=>{const{parent}=model.at(model.position);if(!parent){model.announce("plonk");return false;}
model.position=model.offsetOf(parent);model.mathfield.stopCoalescingUndo();return true;},moveAfterParent:(model)=>moveAfterParent(model),moveToNextChar:(model)=>move(model,"forward"),moveToPreviousChar:(model)=>move(model,"backward"),moveUp:(model)=>move(model,"upward"),moveDown:(model)=>move(model,"downward"),moveToNextWord:(model)=>skip(model,"forward"),moveToPreviousWord:(model)=>skip(model,"backward"),moveToGroupStart:(model)=>{const pos=model.offsetOf(model.at(model.position).firstSibling);if(pos===model.position){model.announce("plonk");return false;}
model.position=pos;model.mathfield.stopCoalescingUndo();return true;},moveToGroupEnd:(model)=>{const pos=model.offsetOf(model.at(model.position).lastSibling);if(pos===model.position){model.announce("plonk");return false;}
model.position=pos;model.mathfield.stopCoalescingUndo();return true;},moveToNextGroup:(model)=>{var _a3,_b3,_c2,_d2;if(model.position===model.lastOffset&&model.anchor===model.lastOffset)
return leap(model,"forward");const atom=model.at(model.position);const mode=atom.mode;if(mode==="text"){if(model.selectionIsCollapsed){let first=atom;while(first&&first.mode==="text")first=first.leftSibling;let last=atom;while(((_a3=last.rightSibling)==null?void 0:_a3.mode)==="text")last=last.rightSibling;if(first&&last)return select(model,[first,last]);}
if(atom.rightSibling.mode==="text"){let next=atom;while(next&&next.mode==="text")next=next.rightSibling;if(next){leapTo(model,(_b3=next.leftSibling)!=null?_b3:next);model.mathfield.switchMode("math");return true;}
return leapTo(model,model.lastOffset);}}
const parentPrompt=model.at(model.anchor).parentPrompt;const origin=parentPrompt?model.offsetOf(parentPrompt)+1:Math.max(model.position+1,0);const target=leapTarget(model,origin,"forward");if(target&&model.offsetOf(target)<origin)
return leap(model,"forward");if(target)return leapTo(model,target);const sibling=findSibling(model,atom,(x)=>x.type==="leftright"||x.type==="text","forward");if(sibling){if(sibling.mode==="text"){let last=sibling;while(last&&last.mode==="text")last=last.rightSibling;return select(model,[(_c2=sibling.leftSibling)!=null?_c2:sibling,(_d2=last.leftSibling)!=null?_d2:last]);}
return select(model,sibling);}
const parent=atom.parent;if(parent){if(parent.type==="leftright"||parent.type==="surd")
return select(model,parent);if(atom.parentBranch==="superscript"&&parent.subscript)
return select(model,parent.subscript);if(atom.parentBranch==="above"&&parent.below)
return select(model,parent.below);if(atom.parentBranch==="superscript"||atom.parentBranch==="subscript")
return leapTo(model,parent);if(atom.parentBranch==="above"||atom.parentBranch==="below")
return select(model,parent);}
return leapTo(model,model.lastOffset);},moveToPreviousGroup:(model)=>{var _a3;if(model.position===0&&model.anchor===0)
return leap(model,"backward");let atom=model.at(model.position);const mode=atom.mode;if(mode==="text"){if(model.selectionIsCollapsed){let first=atom;while(first&&first.mode==="text")first=first.leftSibling;let last=atom;while(((_a3=last.rightSibling)==null?void 0:_a3.mode)==="text")last=last.rightSibling;if(first&&last)return select(model,[first,last]);}
while(atom&&atom.mode==="text")atom=atom.leftSibling;if(atom)return leapTo(model,atom);return leapTo(model,0);}
const parentPrompt=model.at(model.anchor).parentPrompt;const origin=parentPrompt?model.offsetOf(parentPrompt.leftSibling):Math.max(model.position-1,0);const target=leapTarget(model,origin,"backward");if(target&&model.offsetOf(target)>origin)
return leap(model,"backward");if(target)return leapTo(model,target);if(mode==="math"){const sibling=findSibling(model,atom,(x)=>x.type==="leftright"||x.type==="text","backward");if(sibling){if(sibling.mode==="text"){let first=sibling;while(first&&first.mode==="text")first=first.leftSibling;return select(model,[sibling,first]);}
return select(model,sibling);}
const parent=atom.parent;if(parent){if(parent.type==="leftright"||parent.type==="surd")
return select(model,parent);if(atom.parentBranch==="subscript"&&parent.superscript)
return select(model,parent.superscript);if(atom.parentBranch==="below"&&parent.above)
return select(model,parent.above);if(atom.parentBranch==="superscript"||atom.parentBranch==="subscript")
return leapTo(model,parent);if(atom.parentBranch==="above"||atom.parentBranch==="below")
return select(model,parent);}
return leapTo(model,0);}
return false;},moveToMathfieldStart:(model)=>{if(model.selectionIsCollapsed&&model.position===0){model.announce("plonk");return false;}
model.position=0;model.mathfield.stopCoalescingUndo();return true;},moveToMathfieldEnd:(model)=>{if(model.selectionIsCollapsed&&model.position===model.lastOffset){model.announce("plonk");return false;}
model.position=model.lastOffset;model.mathfield.stopCoalescingUndo();return true;},moveToSuperscript,moveToSubscript},{target:"model",changeSelection:true});register2({moveToNextPlaceholder:(model)=>leap(model,"forward"),moveToPreviousPlaceholder:(model)=>leap(model,"backward")},{target:"model",changeSelection:true,audioFeedback:"return"});function findSibling(model,atom,pred,dir){if(dir==="forward"){let result2=atom.rightSibling;while(result2&&!pred(result2))result2=result2.rightSibling;return result2;}
let result=atom.leftSibling;while(result&&!pred(result))result=result.leftSibling;return result;}
function convertLastAtomsToText(model,count,until){if(typeof count==="function"){until=count;count=Infinity;}
if(count===void 0)count=Infinity;let i=model.position;let done=false;let text="";while(!done){const atom=model.at(i);done=count===0||atom===void 0||atom.type==="first"||atom.mode!=="math"||!(atom.type&&/mord|mpunct|operator/.test(atom.type)||atom.type==="mop"&&/[a-zA-Z ]+/.test(atom.value))||!atom.hasEmptyBranch("superscript")||!atom.hasEmptyBranch("subscript")||typeof until==="function"&&!until(atom);if(!done){atom.mode="text";atom.command=atom.value;atom.verbatimLatex=void 0;text+=atom.value;}
i-=1;count-=1;}
model.contentDidChange({data:text,inputType:"insertText"});}
function convertLastAtomsToMath(model,count,until){if(typeof count==="function"){until=count;count=Infinity;}
if(count===void 0)count=Infinity;let i=model.position;let done=false;const data=[];while(!done){const atom=model.at(i);done=count===0||!atom||atom.type==="first"||atom.isFirstSibling||atom.mode!=="text"||atom.value===" "||typeof until==="function"&&!until(atom);if(!done){data.push(Atom.serialize([atom],{defaultMode:"math"}));atom.mode="math";}
i-=1;count-=1;}
removeIsolatedSpace(model);model.contentDidChange({data:joinLatex(data),inputType:"insertText"});}
function removeIsolatedSpace(model){var _a3;let i=model.position-1;while(i>=0&&((_a3=model.at(i))==null?void 0:_a3.mode)==="math")i-=1;if(i<0)return;if(model.at(i).mode==="text"&&model.at(i).value===" "&&model.at(i-1).mode==="math"){model.at(i-1).parent.removeChild(model.at(i-1));const save=model.silenceNotifications;model.silenceNotifications=true;model.position-=1;model.silenceNotifications=save;model.contentDidChange({inputType:"deleteContent"});}}
function getTextBeforePosition(model){let result="";let i=model.position;let done=false;while(!done){const atom=model.at(i);done=!(atom&&(atom.mode==="text"||atom.mode==="math"&&atom.type&&/mord|mpunct/.test(atom.type)));if(!done)result=atom.value+result;i-=1;}
return result;}
function smartMode(mathfield,keystroke,evt){const{model}=mathfield;if(model.mode==="latex")return false;if(!model.at(model.position).isLastSibling)return false;if(!evt||!mightProducePrintableCharacter(evt))return false;const c=keyboardEventToChar(evt);if(!model.selectionIsCollapsed){if(mathfield.model.mode==="text"){if(/[/_^]/.test(c))return true;}
return false;}
const context=getTextBeforePosition(model)+c;if(mathfield.model.mode==="text"){if(keystroke==="Esc"||/[/\\]/.test(c)){return true;}
if(/[\^_]/.test(c)){if(/(^|\s)[a-zA-Z][^_]$/.test(context)){convertLastAtomsToMath(model,1);}
return true;}
const lFence={")":"(","}":"{","]":"["}[c];const{parent}=model.at(model.position);if(lFence&&parent instanceof LeftRightAtom&&parent.leftDelim===lFence)
return true;if(/(^|[^a-zA-Z])(a|I) $/.test(context)){return false;}
if(/[$]/u.test(c)){return true;}
if(/(^|[^a-zA-Z'])[a-zA-Z] $/.test(context)){convertLastAtomsToMath(model,1);return false;}
if(/\D\.[^\d\s]$/.test(context)){convertLastAtomsToMath(model,1);const atom=model.at(model.position);atom.value="\u22C5";atom.style.variant="normal";atom.command="\\cdot";atom.verbatimLatex=void 0;model.contentDidChange({data:"\\cdot",inputType:"insertText"});return true;}
if(/(^|\s)[a-zA-Z][^a-zA-Z]$/.test(context)){convertLastAtomsToMath(model,1);return true;}
if(/\.\d$/.test(context)){convertLastAtomsToMath(model,1);return true;}
if(/\([\d+\-.]$/.test(context)){convertLastAtomsToMath(model,1);return true;}
if(/\([a-z][,;]$/.test(context)){convertLastAtomsToMath(model,2);return true;}
if(/[\d+\-=><*|]$/.test(c)){removeIsolatedSpace(model);return true;}}else{if(keystroke==="[Space]"){convertLastAtomsToText(model,void 0,(a)=>/[a-z][:,;.]$/.test(a.value));return true;}
if(/[a-zA-Z]{3,}$/.test(context)&&!/(dxd|abc|xyz|uvw)$/.test(context)){convertLastAtomsToText(model,void 0,(a)=>/[a-zA-Z]/.test(a.value));return true;}
if(/(^|\W)(if)$/i.test(context)){convertLastAtomsToText(model,1);return true;}
if(/(\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5){3,}$/u.test(context)&&!/()$/.test(context)){convertLastAtomsToText(model,void 0,(a)=>/(:|,|;|.|\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5)/u.test(a.value));return true;}
if(c==="?"){return true;}
if(c==="."&&!/[\d-+]\.$/.test(context)){return true;}}
return false;}
function showKeystroke(mathfield,keystroke){if(!mathfield.isSelectionEditable||!mathfield.keystrokeCaptionVisible)
return;const vb=createKeystrokeCaption();const bounds=mathfield.element.getBoundingClientRect();vb.style.left=`${bounds.left}px`;vb.style.top=`${bounds.top - 64}px`;vb.innerHTML=globalThis.MathfieldElement.createHTML("<span>"+(getKeybindingMarkup(keystroke)||keystroke)+"</span>"+vb.innerHTML);vb.style.visibility="visible";setTimeout(()=>{if(vb.childNodes.length>0)
vb.childNodes[vb.childNodes.length-1].remove();if(vb.childNodes.length===0)vb.style.visibility="hidden";},3e3);}
function toggleKeystrokeCaption(mathfield){mathfield.keystrokeCaptionVisible=!mathfield.keystrokeCaptionVisible;if(!mathfield.keystrokeCaptionVisible){const panel=getSharedElement("mathlive-keystroke-caption-panel");panel.style.visibility="hidden";}else{const panel=createKeystrokeCaption();panel.innerHTML="";}
return false;}
function createKeystrokeCaption(){const panel=document.getElementById("mathlive-keystroke-caption-panel");if(panel)return panel;injectStylesheet("keystroke-caption");injectStylesheet("core");return getSharedElement("mathlive-keystroke-caption-panel");}
function disposeKeystrokeCaption(){if(!document.getElementById("mathlive-keystroke-caption-panel"))return;releaseSharedElement("mathlive-keystroke-caption-panel");releaseStylesheet("core");releaseStylesheet("keystroke-caption");}
function onKeystroke(mathfield,evt){var _a3,_b3,_c2,_d2;const{model}=mathfield;const keystroke=keyboardEventToString(evt);if(evt.isTrusted){validateKeyboardLayout(evt);const activeLayout=getActiveKeyboardLayout();if(mathfield.keyboardLayout!==activeLayout.id){mathfield.keyboardLayout=activeLayout.id;mathfield._keybindings=void 0;}}
clearTimeout(mathfield.inlineShortcutBufferFlushTimer);mathfield.inlineShortcutBufferFlushTimer=0;showKeystroke(mathfield,keystroke);if(evt.isTrusted&&evt.defaultPrevented){mathfield.flushInlineShortcutBuffer();return false;}
let shortcut;let shortcutLength=0;let selector="";let stateIndex=0;const buffer=mathfield.inlineShortcutBuffer;if(mathfield.isSelectionEditable){if(model.mode==="math"){if(keystroke==="[Backspace]"){if(mathfield.undoManager.lastOp==="insert-shortcut")
selector="undo";else buffer.pop();}else if(!mightProducePrintableCharacter(evt)){mathfield.flushInlineShortcutBuffer();}else{const c=keyboardEventToChar(evt);const keystrokes=[...(_b3=(_a3=buffer[buffer.length-1])==null?void 0:_a3.keystrokes)!=null?_b3:[],c];buffer.push({state:model.getState(),keystrokes,leftSiblings:getLeftSiblings(mathfield)});shortcutLength=0;let candidate="";while(!shortcut&&shortcutLength<keystrokes.length){stateIndex=buffer.length-(keystrokes.length-shortcutLength);candidate=keystrokes.slice(shortcutLength).join("");shortcut=getInlineShortcut(buffer[stateIndex].leftSiblings,candidate,mathfield.options.inlineShortcuts);if(!shortcut&&/^[a-zA-Z][a-zA-Z0-9]+?([_\^][a-zA-Z0-9\*\+\-]+?)?$/.test(candidate))
shortcut=mathfield.options.onInlineShortcut(mathfield,candidate);shortcutLength+=1;}
mathfield.flushInlineShortcutBuffer({defer:true});}}
if(mathfield.options.smartMode){if(shortcut){mathfield.switchMode("math");}else if(smartMode(mathfield,keystroke,evt)){mathfield.switchMode({math:"text",text:"math"}[model.mode]);selector="";}}}
if(!shortcut){if(!selector){selector=getCommandForKeybinding(mathfield.keybindings,model.mode,evt);}
if(!selector&&(keystroke==="[Enter]"||keystroke==="[Return]")){let success=true;if(model.contentWillChange({inputType:"insertLineBreak"})){if(mathfield.host){success=mathfield.host.dispatchEvent(new Event("change",{bubbles:true,composed:true}));}
if(!success&&evt.preventDefault){evt.preventDefault();evt.stopPropagation();}else{if((_c2=model.parentEnvironment)==null?void 0:_c2.isMultiline)
mathfield.executeCommand("addRowAfter");model.contentDidChange({inputType:"insertLineBreak"});}}
return success;}
if((!selector||keystroke==="[Space]")&&model.mode==="math"){if(keystroke==="[Space]"){mathfield.styleBias="none";mathfield.flushInlineShortcutBuffer();if(mathfield.options.mathModeSpace){ModeEditor.insert(model,mathfield.options.mathModeSpace,{format:"latex",mode:"math"});mathfield.snapshot("insert-space");selector="";mathfield.dirty=true;mathfield.scrollIntoView();if(evt.preventDefault){evt.preventDefault();evt.stopPropagation();}
return false;}
const nextSibling=model.at(model.position+1);const previousSibling=model.at(model.position-1);if((nextSibling==null?void 0:nextSibling.mode)==="text"||(previousSibling==null?void 0:previousSibling.mode)==="text"){ModeEditor.insert(model," ",{mode:"text"});mathfield.snapshot("insert-space");mathfield.dirty=true;mathfield.scrollIntoView();return false;}}
if(((_d2=model.at(model.position))==null?void 0:_d2.isDigit())&&globalThis.MathfieldElement.decimalSeparator===","&&keyboardEventToChar(evt)===",")
selector="insertDecimalSeparator";}}
if(!shortcut&&!selector){if(!model.mathfield.smartFence){const{parent:parent2}=model.at(model.position);if(parent2 instanceof LeftRightAtom&&parent2.rightDelim==="?"&&model.at(model.position).isLastSibling&&/^[)}\]|]$/.test(keystroke)){mathfield.snapshot();parent2.isDirty=true;parent2.rightDelim=keystroke;model.position+=1;model.selectionDidChange();model.contentDidChange({data:keyboardEventToChar(evt),inputType:"insertText"});mathfield.snapshot("insert-fence");mathfield.dirty=true;mathfield.scrollIntoView();if(evt.preventDefault)evt.preventDefault();return false;}
if(!model.selectionIsCollapsed){const fence=keyboardEventToChar(evt);if(fence==="("||fence==="{"||fence==="["){const lDelim={"(":"(","{":"\\lbrace","[":"\\lbrack"}[fence];const rDelim={"(":")","{":"\\rbrace","[":"\\rbrack"}[fence];const[start,end]=range(model.selection);mathfield.snapshot();model.position=end;ModeEditor.insert(model,rDelim,{format:"latex"});model.position=start;ModeEditor.insert(model,lDelim,{format:"latex"});model.setSelection(start+1,end+1);model.contentDidChange({data:fence,inputType:"insertText"});mathfield.snapshot("insert-fence");mathfield.dirty=true;mathfield.scrollIntoView();if(evt.preventDefault)evt.preventDefault();return false;}}}else if(insertSmartFence(model,keyboardEventToChar(evt),computeInsertStyle(mathfield))){mathfield.dirty=true;mathfield.scrollIntoView();if(evt.preventDefault)evt.preventDefault();return false;}
return true;}
const child=model.at(Math.max(model.position,model.anchor));const{parent}=child;if(selector==="moveAfterParent"&&(parent==null?void 0:parent.type)==="leftright"&&child.isLastSibling&&mathfield.options.smartFence&&insertSmartFence(model,".",mathfield.defaultStyle)){selector="";requestUpdate(mathfield);}
mathfield.keyboardDelegate.cancelComposition();if(selector)mathfield.executeCommand(selector);else if(shortcut){const style=computeInsertStyle(mathfield);model.setState(buffer[stateIndex].state);let keystrokes=buffer[buffer.length-1].keystrokes;keystrokes=keystrokes.slice(shortcutLength-1);for(const c of keystrokes){ModeEditor.insert(model,c,{silenceNotifications:true,style});}
mathfield.snapshot(`insert-shortcut`);model.setState(buffer[stateIndex].state);model.deferNotifications({content:true,selection:true,data:shortcut,type:"insertText"},()=>{ModeEditor.insert(model,shortcut,{format:"latex",style});removeIsolatedSpace(mathfield.model);if(shortcut.endsWith(" ")){mathfield.switchMode("text");ModeEditor.insert(model," ",{style,mode:"text"});}
mathfield.snapshot();if(!model.selectionIsCollapsed)mathfield.flushInlineShortcutBuffer();return true;});mathfield.dirty=true;model.announce("replacement");}
mathfield.scrollIntoView();if(evt.preventDefault)evt.preventDefault();return false;}
function onInput(mathfield,text,options){const{model}=mathfield;if(!mathfield.isSelectionEditable){model.announce("plonk");return;}
options!=null?options:options={};if(options.focus)mathfield.focus();if(options.feedback)globalThis.MathfieldElement.playSound("keypress");if(typeof options.mode==="string"){mathfield.switchMode(options.mode);mathfield.snapshot();}
let graphemes=splitGraphemes(text);const keyboard=window.mathVirtualKeyboard;if(keyboard==null?void 0:keyboard.isShifted){graphemes=typeof graphemes==="string"?graphemes.toUpperCase():graphemes.map((c)=>c.toUpperCase());}
if(options.simulateKeystroke){let handled=true;for(const c of graphemes){if(onKeystroke(mathfield,new KeyboardEvent("keypress",{key:c})))
handled=false;}
if(handled)return;}
if(model.mode==="latex"){model.deferNotifications({content:true,selection:true,data:text,type:"insertText"},()=>{removeSuggestion(mathfield);for(const c of graphemes)
ModeEditor.insert(model,c,{insertionMode:"replaceSelection"});mathfield.snapshot("insert-latex");updateAutocomplete(mathfield);});}else if(model.mode==="text"){const style=__spreadValues(__spreadValues({},getSelectionStyle(model)),mathfield.defaultStyle);for(const c of graphemes)
ModeEditor.insert(model,c,{style,insertionMode:"replaceSelection"});mathfield.snapshot("insert-text");}else if(model.mode==="math")
for(const c of graphemes)insertMathModeChar(mathfield,c);mathfield.dirty=true;mathfield.scrollIntoView();}
function getLeftSiblings(mf){const model=mf.model;const result=[];let atom=model.at(Math.min(model.position,model.anchor));while(atom.type!=="first"){result.push(atom);atom=atom.leftSibling;}
return result;}
function insertMathModeChar(mathfield,c){const model=mathfield.model;const selector={"^":"moveToSuperscript","_":"moveToSubscript"," ":mathfield.options.mathModeSpace?["insert",mathfield.options.mathModeSpace]:"moveAfterParent"}[c];if(selector){mathfield.executeCommand(selector);return;}
const style=__spreadValues({},computeInsertStyle(mathfield));if(!/[a-zA-Z0-9]/.test(c)&&mathfield.styleBias!=="none"){style.variant="normal";style.variantStyle=void 0;}
const atom=model.at(model.position);if(/\d/.test(c)&&mathfield.options.smartSuperscript&&atom.parentBranch==="superscript"&&atom.parent.type!=="mop"&&atom.parent.type!=="operator"&&atom.parent.type!=="extensible-symbol"&&atom.hasNoSiblings){if(!ModeEditor.insert(model,c,{style,insertionMode:"replaceSelection"})){mathfield.undoManager.pop();return;}
mathfield.snapshot("insert-mord");moveAfterParent(model);return;}
let input=c;if(input==="{")input="\\lbrace";else if(input==="}")input="\\rbrace";else if(input==="&")input="\\&";else if(input==="#")input="\\#";else if(input==="$")input="\\$";else if(input==="%")input="\\%";else if(input==="~")input="\\~";else if(input==="\\")input="\\backslash";if(!ModeEditor.insert(model,input,{style,insertionMode:"replaceSelection"}))
return;mathfield.snapshot(`insert-${model.at(model.position).type}`);}
function getSelectionStyle(model){var _a3,_b3,_c2,_d2;if(model.selectionIsCollapsed)return(_b3=(_a3=model.at(model.position))==null?void 0:_a3.style)!=null?_b3:{};const first=range(model.selection)[0];return(_d2=(_c2=model.at(first+1))==null?void 0:_c2.style)!=null?_d2:{};}
function insertSmartFence(model,key,style){var _a3;if(!key)return false;if(model.mode!=="math")return false;const atom=model.at(model.position);const{parent}=atom;const fence={"(":"(",")":")","{":"\\lbrace","}":"\\rbrace","[":"\\lbrack","]":"\\rbrack","|":"|"}[key];if(!fence)return false;const lDelim=LEFT_DELIM[fence];const rDelim=RIGHT_DELIM[fence];if(!model.selectionIsCollapsed){model.mathfield.snapshot();const[start,end]=range(model.selection);const body=model.extractAtoms([start,end]);const atom2=parent.addChildrenAfter([new LeftRightAtom("left...right",body,{leftDelim:fence,rightDelim:rDelim})],model.at(start));model.setSelection(model.offsetOf(atom2.firstChild),model.offsetOf(atom2.lastChild));model.mathfield.snapshot("insert-fence");model.contentDidChange({data:fence,inputType:"insertText"});return true;}
if(fence==="|"){const delims=parent instanceof LeftRightAtom?parent.leftDelim+parent.rightDelim:"";if(delims==="\\lbrace\\rbrace"||delims==="\\{\\}"||delims==="\\lbrace?"){model.mathfield.snapshot();ModeEditor.insert(model,"\\,\\middle\\vert\\,",{format:"latex",style});model.mathfield.snapshot("insert-fence");model.contentDidChange({data:fence,inputType:"insertText"});return true;}}
if(rDelim){if(parent instanceof LeftRightAtom&&parent.firstChild===atom&&(parent.leftDelim==="?"||parent.leftDelim===".")){parent.leftDelim=fence;parent.isDirty=true;model.mathfield.snapshot();model.contentDidChange({data:fence,inputType:"insertText"});model.mathfield.snapshot("insert-fence");return true;}
if(!(parent instanceof LeftRightAtom)){let sibling=atom;while(sibling){if(sibling.type==="mclose"&&sibling.value===rDelim)break;sibling=sibling.rightSibling;}
if(sibling){model.mathfield.snapshot();const body=model.extractAtoms([model.offsetOf(atom),model.offsetOf(sibling)]);body.pop();parent.addChildrenAfter([new LeftRightAtom("left...right",body,{leftDelim:fence,rightDelim:rDelim})],atom);model.position=model.offsetOf(parent.firstChild)+1;model.contentDidChange({data:fence,inputType:"insertText"});model.mathfield.snapshot("insert-fence");return true;}}
const lastSibling=model.offsetOf(atom.lastSibling);let i;for(i=model.position;i<=lastSibling;i++){const atom2=model.at(i);if(atom2 instanceof LeftRightAtom&&(atom2.leftDelim==="?"||atom2.leftDelim===".")&&isValidOpen(fence,atom2.rightDelim))
break;}
const match=model.at(i);if(i<=lastSibling&&match instanceof LeftRightAtom){match.leftDelim=fence;model.mathfield.snapshot();let extractedAtoms=model.extractAtoms([model.position,i-1]);extractedAtoms=extractedAtoms.filter((value)=>value.type!=="first");match.addChildren(extractedAtoms,match.parentBranch);model.position+=1;model.contentDidChange({data:fence,inputType:"insertText"});model.mathfield.snapshot("insert-fence");return true;}
if(parent instanceof LeftRightAtom&&(parent.leftDelim==="?"||parent.leftDelim===".")&&isValidOpen(fence,parent.rightDelim)){parent.isDirty=true;parent.leftDelim=fence;model.mathfield.snapshot();const extractedAtoms=model.extractAtoms([model.offsetOf(atom.firstSibling),model.position]);for(const extractedAtom of extractedAtoms)
parent.parent.addChildBefore(extractedAtom,parent);model.contentDidChange({data:fence,inputType:"insertText"});model.mathfield.snapshot("insert-fence");return true;}
if(!(parent instanceof LeftRightAtom&&parent.leftDelim==="|")){if(fence==="("){let i2=model.position-1;let hasDecimalPoint=false;while(i2>=0){const atom2=model.at(i2);if(atom2.type==="first")break;if(atom2.type==="mord"&&atom2.value&&/^[\d]$/.test(atom2.value)){i2-=1;continue;}
if(atom2.type==="group"&&((_a3=atom2.body)==null?void 0:_a3.length)===2&&atom2.body[0].type==="first"&&atom2.body[1].value===","){hasDecimalPoint=true;break;}
if(atom2.type==="mord"&&(atom2.value===","||atom2.value===".")){hasDecimalPoint=true;break;}
break;}
if(hasDecimalPoint)return false;}
model.mathfield.snapshot();ModeEditor.insert(model,`\\left${fence}\\right?`,{format:"latex",style});if(atom.lastSibling.type!=="first"){const lastSiblingOffset=model.offsetOf(atom.lastSibling);const content=model.extractAtoms([model.position,lastSiblingOffset]);model.at(model.position).body=content;model.position-=1;}
model.mathfield.snapshot("insert-fence");return true;}}
if(lDelim){if(fence===")"){let i2=model.position-1;let hasDigits=false;while(i2>=0){const atom2=model.at(i2);if(atom2.type==="first")break;if(atom2.type==="mord"&&atom2.value&&/^[\d]$/.test(atom2.value)){hasDigits=true;i2-=1;continue;}
break;}
if(hasDigits&&model.at(i2).type==="mopen"&&model.at(i2).value==="(")
return false;}
let sibling=atom;while(sibling){if(sibling.type==="mopen"&&sibling.value===lDelim){model.mathfield.snapshot();const insertAfter=sibling.leftSibling;let body=model.extractAtoms([model.offsetOf(sibling.leftSibling),model.offsetOf(atom)]);[,...body]=body;const result=new LeftRightAtom("left...right",body,{leftDelim:lDelim,rightDelim:fence});parent.addChildrenAfter([result],insertAfter);model.position=model.offsetOf(result);model.contentDidChange({data:fence,inputType:"insertText"});model.mathfield.snapshot("insert-fence");return true;}
sibling=sibling.leftSibling;}
if(parent instanceof LeftRightAtom&&atom.isLastSibling&&isValidClose(parent.leftDelim,fence)){model.mathfield.snapshot();parent.isDirty=true;parent.rightDelim=fence;model.position+=1;model.contentDidChange({data:fence,inputType:"insertText"});model.mathfield.snapshot("insert-fence");return true;}
const firstSibling=model.offsetOf(atom.firstSibling);let i;for(i=model.position;i>=firstSibling;i--){const atom2=model.at(i);if(atom2 instanceof LeftRightAtom&&(atom2.rightDelim==="?"||atom2.rightDelim===".")&&isValidClose(atom2.leftDelim,fence))
break;}
const match=model.at(i);if(i>=firstSibling&&match instanceof LeftRightAtom){model.mathfield.snapshot();match.rightDelim=fence;match.addChildren(model.extractAtoms([i,model.position]),match.parentBranch);model.contentDidChange({data:fence,inputType:"insertText"});model.mathfield.snapshot("insert-fence");return true;}
if(parent instanceof LeftRightAtom&&(parent.rightDelim==="?"||parent.rightDelim===".")&&isValidClose(parent.leftDelim,fence)){model.mathfield.snapshot();parent.isDirty=true;parent.rightDelim=fence;parent.parent.addChildren(model.extractAtoms([model.position,model.offsetOf(atom.lastSibling)]),parent.parentBranch);model.position=model.offsetOf(parent);model.contentDidChange({data:fence,inputType:"insertText"});model.mathfield.snapshot("insert-fence");return true;}
const grandparent=parent.parent;if(grandparent instanceof LeftRightAtom&&(grandparent.rightDelim==="?"||grandparent.rightDelim===".")&&model.at(model.position).isLastSibling){model.position=model.offsetOf(grandparent);return insertSmartFence(model,fence,style);}
return false;}
return false;}
function isValidClose(open,close){if(!open)return true;if(["(","\\lparen","{","\\{","\\lbrace","[","\\lbrack"].includes(open)){return[")","\\rparen","}","\\}","\\rbrace","]","\\rbrack"].includes(close);}
return RIGHT_DELIM[open]===close;}
function isValidOpen(open,close){if(!close)return true;if([")","\\rparen","}","\\}","\\rbrace","]","\\rbrack"].includes(close)){return["(","\\lparen","{","\\{","\\lbrace","[","\\lbrack"].includes(open);}
return LEFT_DELIM[close]===open;}
register2({undo:(mathfield)=>{mathfield.undo();return true;},redo:(mathfield)=>{mathfield.redo();return true;},scrollIntoView:(mathfield)=>{mathfield.scrollIntoView();return true;},scrollToStart:(mathfield)=>{mathfield.field.scroll(0,0);return true;},scrollToEnd:(mathfield)=>{const fieldBounds=mathfield.field.getBoundingClientRect();mathfield.field.scroll(fieldBounds.left-window.scrollX,0);return true;},toggleKeystrokeCaption,toggleContextMenu:(mathfield)=>{const result=mathfield.toggleContextMenu();if(!result)mathfield.model.announce("plonk");return result;},plonk:(mathfield)=>{mathfield.model.announce("plonk");return true;},switchMode:(mathfield,mode,prefix,suffix)=>{mathfield.switchMode(mode,prefix,suffix);return true;},insert:(mathfield,s,options)=>mathfield.insert(s,options),typedText:(mathfield,text,options)=>{onInput(mathfield,text,options);return true;},insertDecimalSeparator:(mathfield)=>{const model=mathfield.model;if(model.mode==="math"&&globalThis.MathfieldElement.decimalSeparator===","){const child=model.at(Math.max(model.position,model.anchor));if(child.isDigit()){mathfield.insert("{,}",{format:"latex"});mathfield.snapshot("insert-mord");return true;}}
mathfield.insert(".");return true;},commit:(mathfield)=>{var _a3,_b3;const model=mathfield.model;if(model.contentWillChange({inputType:"insertLineBreak"})){(_a3=mathfield.host)==null?void 0:_a3.dispatchEvent(new Event("change",{bubbles:true,composed:true}));if((_b3=model.parentEnvironment)==null?void 0:_b3.isMultiline)
mathfield.executeCommand("addRowAfter");model.contentDidChange({inputType:"insertLineBreak"});}
return true;},insertPrompt:(mathfield,id,options)=>{const promptIds=mathfield.getPrompts();let prospectiveId="prompt-"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36);let i=0;while(promptIds.includes(prospectiveId)&&i<100){if(i===99){console.error("could not find a unique ID after 100 tries");return false;}
prospectiveId="prompt-"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36);i++;}
mathfield.insert(`\\placeholder[${id != null ? id : prospectiveId}]{}`,options);return true;}});register2({copyToClipboard:(mathfield)=>{mathfield.focus();if(mathfield.model.selectionIsCollapsed)mathfield.select();if(!("queryCommandSupported"in document&&document.queryCommandSupported("copy")&&document.execCommand("copy"))){mathfield.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("copy",{bubbles:true,composed:true}));}
return false;}},{target:"mathfield"});register2({cutToClipboard:(mathfield)=>{mathfield.focus();if(!("queryCommandSupported"in document&&document.queryCommandSupported("cut")&&document.execCommand("cut"))){mathfield.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("cut",{bubbles:true,composed:true}));}
return true;},pasteFromClipboard:(mathfield)=>{mathfield.focus();if("queryCommandSupported"in document&&document.queryCommandSupported("paste")){document.execCommand("paste");return true;}
navigator.clipboard.readText().then((text)=>{if(text&&mathfield.model.contentWillChange({inputType:"insertFromPaste",data:text})){mathfield.stopCoalescingUndo();mathfield.stopRecording();if(mathfield.insert(text,{mode:mathfield.model.mode})){updateAutocomplete(mathfield);mathfield.startRecording();mathfield.snapshot("paste");mathfield.model.contentDidChange({inputType:"insertFromPaste"});requestUpdate(mathfield);}}else mathfield.model.announce("plonk");mathfield.startRecording();});return true;}},{target:"mathfield",canUndo:true,changeContent:true,changeSelection:true});function selectGroup(model){let[start,end]=range(model.selection);start=boundary(model,start,"backward");end=boundary(model,end,"forward");if(start===end){const atom=model.at(start);if(atom.type==="leftright")
return model.setSelection(model.offsetOf(atom.firstChild)-1,end);if(atom.type==="first"&&(atom.parent.type==="leftright"||atom.parent.type==="surd")){return model.setSelection(start-1,model.offsetOf(atom.parent.lastChild)+1);}
model.setSelection(start-1,end);}else model.setSelection(start,end);return true;}
function boundary(model,pos,direction){var _a3,_b3,_c2;let atom=model.at(pos);if(!atom)return pos;const dir=direction==="forward"?1:-1;if(atom.mode==="text"){while(atom){if(atom.mode!=="text"||!LETTER_AND_DIGITS.test(atom.value))break;pos+=dir;atom=model.at(pos);}
return direction==="backward"?pos-1:pos;}
if(atom.mode==="latex"){if(/[a-zA-Z\*]/.test(atom.value)){if(direction==="backward"){while(atom&&atom.mode==="latex"&&atom.value!=="\\"&&/[a-zA-Z]/.test(atom.value)){pos+=dir;atom=model.at(pos);}}else{while(atom&&atom.mode==="latex"&&/[a-zA-Z\*]/.test(atom.value)){pos+=dir;atom=model.at(pos);}}}else if(atom.value==="{"){if(direction==="forward"){while(atom&&atom.mode==="latex"&&atom.value!=="}"){pos+=dir;atom=model.at(pos);}
return pos;}
return pos-1;}else if(atom.value==="}"){if(direction==="backward"){while(atom&&atom.mode==="latex"&&atom.value!=="{"){pos+=dir;atom=model.at(pos);}
return pos-1;}
return pos;}
return pos-1;}
if(atom.mode==="math"){if(atom.isDigit()){while((_a3=model.at(pos+dir))==null?void 0:_a3.isDigit())pos+=dir;return direction==="backward"?pos-1:pos;}
if(atom.style.variant||atom.style.variantStyle){let x=(_b3=model.at(pos))==null?void 0:_b3.style;while(x&&x.variant===atom.style.variant&&x.variantStyle===atom.style.variantStyle){x=(_c2=model.at(pos+dir))==null?void 0:_c2.style;pos+=dir;}
return direction==="backward"?pos-1:pos;}
return pos;}
return pos;}
register2({selectGroup:(model)=>{const result=selectGroup(model);if(!result)model.announce("plonk");return result;},selectAll:(model)=>model.setSelection(0,model.lastOffset),extendSelectionForward:(model)=>move(model,"forward",{extend:true}),extendSelectionBackward:(model)=>move(model,"backward",{extend:true}),extendToNextWord:(model)=>skip(model,"forward",{extend:true}),extendToPreviousWord:(model)=>skip(model,"backward",{extend:true}),extendSelectionUpward:(model)=>move(model,"upward",{extend:true}),extendSelectionDownward:(model)=>move(model,"downward",{extend:true}),extendToNextBoundary:(model)=>skip(model,"forward",{extend:true}),extendToPreviousBoundary:(model)=>skip(model,"backward",{extend:true}),extendToGroupStart:(model)=>{const result=model.setSelection(model.anchor,model.offsetOf(model.at(model.position).firstSibling));if(!result)model.announce("plonk");return result;},extendToGroupEnd:(model)=>{const result=model.setSelection(model.anchor,model.offsetOf(model.at(model.position).lastSibling));if(!result)model.announce("plonk");return result;},extendToMathFieldStart:(model)=>{const result=model.setSelection(model.anchor,0);if(!result)model.announce("plonk");return result;},extendToMathFieldEnd:(model)=>{const result=model.setSelection(model.anchor,model.lastOffset);if(!result)model.announce("plonk");return result;}},{target:"model",changeSelection:true});var gLastTap=null;var gTapCount=0;var PointerTracker=class _PointerTracker{static start(element,evt,onMove,onCancel){var _a3;_PointerTracker.element=element;(_a3=_PointerTracker.controller)==null?void 0:_a3.abort();_PointerTracker.controller=new AbortController();const options={signal:_PointerTracker.controller.signal};if("PointerEvent"in window){element.addEventListener("pointermove",onMove,options);element.addEventListener("pointerup",onCancel,options);element.addEventListener("pointercancel",onCancel,options);if(isPointerEvent(evt)){_PointerTracker.pointerId=evt.pointerId;element.setPointerCapture(evt.pointerId);}}else{window.addEventListener("mousemove",onMove,options);window.addEventListener("blur",onCancel,options);window.addEventListener("mouseup",onCancel,options);}}
static stop(){var _a3;(_a3=_PointerTracker.controller)==null?void 0:_a3.abort();_PointerTracker.controller=void 0;if(typeof _PointerTracker.pointerId==="number"){_PointerTracker.element.releasePointerCapture(_PointerTracker.pointerId);_PointerTracker.pointerId=void 0;}}};function isPointerEvent(evt){return evt!==null&&globalThis.PointerEvent!==void 0&&evt instanceof PointerEvent;}
function onPointerDown(mathfield,evt){var _a3;if(evt.buttons>1)return;mathfield.atomBoundsCache=new Map();const that=mathfield;let anchor;let trackingPointer=false;let trackingWords=false;let dirty="none";let scrollLeft=false;let scrollRight=false;const anchorX=evt.clientX;const anchorY=evt.clientY;const anchorTime=Date.now();const field=that.field;const scrollInterval=setInterval(()=>{if(scrollLeft)field.scroll({top:0,left:field.scrollLeft-16});else if(scrollRight)field.scroll({top:0,left:field.scrollLeft+16});},32);function endPointerTracking(){PointerTracker.stop();trackingPointer=false;clearInterval(scrollInterval);mathfield.element.classList.remove("tracking");if(evt)evt.preventDefault();}
function onPointerMove(evt2){if(!that.hasFocus()){endPointerTracking();return;}
const x=evt2.clientX;const y=evt2.clientY;const hysteresis=isPointerEvent(evt2)&&evt2.pointerType==="touch"?20:5;if(Date.now()<anchorTime+500&&Math.abs(anchorX-x)<hysteresis&&Math.abs(anchorY-y)<hysteresis){evt2.preventDefault();evt2.stopPropagation();return;}
const fieldBounds=field.getBoundingClientRect();scrollRight=x>fieldBounds.right;scrollLeft=x<fieldBounds.left;let actualAnchor=anchor;if(isPointerEvent(evt2)){if(!evt2.isPrimary){actualAnchor=offsetFromPoint(that,evt2.clientX,evt2.clientY,{bias:0});}}
const focus=offsetFromPoint(that,x,y,{bias:x<=anchorX?x===anchorX?0:-1:1});if(actualAnchor>=0&&focus>=0){that.model.extendSelectionTo(actualAnchor,focus);requestUpdate(mathfield);}
if(trackingWords)selectGroup(that.model);}
if(gLastTap&&Math.abs(gLastTap.x-anchorX)<5&&Math.abs(gLastTap.y-anchorY)<5&&Date.now()<gLastTap.time+500){gTapCount+=1;gLastTap.time=anchorTime;}else{gLastTap={x:anchorX,y:anchorY,time:anchorTime};gTapCount=1;}
const bounds=field.getBoundingClientRect();if(anchorX>=bounds.left&&anchorX<=bounds.right&&anchorY>=bounds.top&&anchorY<=bounds.bottom){mathfield.flushInlineShortcutBuffer();anchor=offsetFromPoint(mathfield,anchorX,anchorY,{bias:0});if(anchor!==mathfield.model.anchor){mathfield.defaultStyle={};mathfield.styleBias="left";}
if(anchor>=0){mathfield.element.classList.add("tracking");if(evt.shiftKey){const wasCollapsed=mathfield.model.selectionIsCollapsed;mathfield.model.extendSelectionTo(mathfield.model.anchor,anchor);if(acceptCommandSuggestion(mathfield.model)||wasCollapsed)
dirty="all";else dirty="selection";}else if(mathfield.model.at(anchor).type==="placeholder"){mathfield.model.setSelection(anchor-1,anchor);dirty="selection";}else if(((_a3=mathfield.model.at(anchor).rightSibling)==null?void 0:_a3.type)==="placeholder"){mathfield.model.setSelection(anchor,anchor+1);dirty="selection";}else{mathfield.model.position=anchor;if(acceptCommandSuggestion(mathfield.model))dirty="all";else dirty="selection";}
if(evt.detail===3||gTapCount>2){endPointerTracking();if(evt.detail===3||gTapCount===3){mathfield.model.selection={ranges:[[0,mathfield.model.lastOffset]]};dirty="all";}}else if(!trackingPointer){trackingPointer=true;PointerTracker.start(field,evt,onPointerMove,endPointerTracking);if(evt.detail===2||gTapCount===2){trackingWords=true;selectGroup(mathfield.model);dirty="all";}}}
if(!mathfield.hasFocus()){dirty="none";mathfield.focus({preventScroll:true});}}else gLastTap=null;mathfield.stopCoalescingUndo();if(dirty!=="none"){if(mathfield.model.selectionIsCollapsed)dirty="all";requestUpdate(mathfield);}
evt.preventDefault();}
function distance(x,y,r){if(x>=r.left&&x<=r.right&&y>=r.top&&y<=r.bottom)return 0;const dx=x-(r.left+r.right)/2;const dy=y-(r.top+r.bottom)/2;return dx*dx+dy*dy;}
function nearestAtomFromPointRecursive(mathfield,cache,atom,x,y){if(!atom.id)return[Infinity,null];if(cache.has(atom.id))return cache.get(atom.id);const bounds=getAtomBounds(mathfield,atom);if(!bounds)return[Infinity,null];let result=[Infinity,null];const model=mathfield.model;if(atom instanceof ArrayAtom){for(const row of atom.rows){for(const cell of row){const cellRange2=[model.offsetOf(cell[0]),model.offsetOf(cell[cell.length-1])];const r=getRangeBoundingRect(mathfield,cellRange2);if(y>=r.top&&y<=r.bottom){for(const atom2 of cell){const r2=nearestAtomFromPointRecursive(mathfield,cache,atom2,x,y);if(r2[0]<=result[0])result=r2;}}}}}else if(atom.hasChildren&&!atom.captureSelection&&x>=bounds.left&&x<=bounds.right){const children=atom.children;for(const child of children){const r=nearestAtomFromPointRecursive(mathfield,cache,child,x,y);if(r[0]<=result[0])result=r;}}
if(!result[1])result=[distance(x,y,bounds),atom];cache.set(atom.id,result);return result;}
function nearestAtomFromPoint(mathfield,x,y){const[,atom]=nearestAtomFromPointRecursive(mathfield,new Map(),mathfield.model.root,x,y);return atom;}
function offsetFromPoint(mathfield,x,y,options){var _a3;const bounds=mathfield.field.querySelector(".ML__latex").getBoundingClientRect();if(!bounds)return 0;if(x>bounds.right||y>bounds.bottom+8)
return mathfield.model.lastOffset;if(x<bounds.left||y<bounds.top-8)return 0;options=options!=null?options:{};options.bias=(_a3=options.bias)!=null?_a3:0;let atom=nearestAtomFromPoint(mathfield,x,y);const parents=[];let parent=atom;while(parent){parents.unshift(parent);parent=parent.parent;}
for(const x2 of parents){if(x2.captureSelection){atom=x2;break;}}
let result=mathfield.model.offsetOf(atom);if(result<0)return-1;if(atom.leftSibling){if(options.bias===0&&atom.type!=="placeholder"){const bounds2=getAtomBounds(mathfield,atom);if(bounds2&&x<(bounds2.left+bounds2.right)/2)
result=mathfield.model.offsetOf(atom.leftSibling);}else if(options.bias<0)
result=mathfield.model.offsetOf(atom.leftSibling);}
return result;}
var MathModeEditor=class extends ModeEditor{constructor(){super("math");}
onPaste(mathfield,data){if(!data)return false;if(!mathfield.model.contentWillChange({data:typeof data==="string"?data:null,dataTransfer:typeof data==="string"?null:data,inputType:"insertFromPaste"}))
return false;let text="";let format="auto";let json=typeof data!=="string"?data.getData("application/json+mathlive"):"";if(json){try{const atomJson=JSON.parse(json);if(atomJson&&Array.isArray(atomJson)){mathfield.snapshot();const atoms=fromJson(atomJson);const{model}=mathfield;if(!model.selectionIsCollapsed)
model.deleteAtoms(range(model.selection));const cursor=model.at(model.position);if(cursor.parent instanceof ArrayAtom){console.assert(cursor.parentBranch!==void 0);const columns=[];let buffer=[];if(atoms[0].type==="first")atoms.shift();if(atoms[atoms.length-1].type==="first")atoms.pop();for(const atom of atoms){if(atom.type==="first"&&buffer.length>0){columns.push(buffer);buffer=[atom];}else buffer.push(atom);}
if(buffer.length>0)columns.push(buffer);let currentRow=Number(cursor.parentBranch[0]);let currentColumn=Number(cursor.parentBranch[1]);const maxColumns=cursor.parent.maxColumns;while(cursor.parent.colCount-currentColumn<columns.length&&cursor.parent.colCount<maxColumns)
cursor.parent.addColumn();cursor.parent.addChildrenAfter(columns[0],cursor);for(let i=1;i<columns.length;i++){currentColumn++;if(currentColumn>=maxColumns){currentColumn=0;cursor.parent.addRowAfter(currentRow);currentRow++;}
cursor.parent.setCell(currentRow,currentColumn,columns[i]);}}else{cursor.parent.addChildrenAfter(atoms.filter((a)=>a.type!=="first"),cursor);}
model.position=model.offsetOf(atoms[atoms.length-1]);model.contentDidChange({inputType:"insertFromPaste"});requestUpdate(mathfield);return true;}}catch(e){}}
json=typeof data!=="string"?data.getData("application/json"):"";if(json&&globalThis.MathfieldElement.computeEngine){try{const expr=JSON.parse(json);if(typeof expr==="object"&&"latex"in expr&&expr.latex)
text=expr.latex;if(!text){const box=globalThis.MathfieldElement.computeEngine.box(expr);if(box&&!box.has("Error"))text=box.latex;}
if(!text)format="latex";}catch(e){}}
if(!text&&typeof data!=="string"){text=data.getData("application/x-latex");if(text)format="latex";}
if(!text)
text=typeof data==="string"?data:data.getData("text/plain");if(text){let wasLatex;[wasLatex,text]=trimModeShiftCommand(text);if(format==="auto"&&wasLatex)format="latex";mathfield.stopCoalescingUndo();mathfield.stopRecording();if(this.insert(mathfield.model,text,{format})){mathfield.startRecording();mathfield.snapshot("paste");requestUpdate(mathfield);}
mathfield.startRecording();return true;}
return false;}
insert(model,input,options){var _a3,_b3;const data=typeof input==="string"?input:(_b3=(_a3=globalThis.MathfieldElement.computeEngine)==null?void 0:_a3.box(input).latex)!=null?_b3:"";if(!options.silenceNotifications&&!model.contentWillChange({data,inputType:"insertText"}))
return false;if(!options.insertionMode)options.insertionMode="replaceSelection";if(!options.selectionMode)options.selectionMode="placeholder";if(!options.format)options.format="auto";const{silenceNotifications}=model;if(options.silenceNotifications)model.silenceNotifications=true;const contentWasChanging=model.silenceNotifications;model.silenceNotifications=true;const args={"?":"\\placeholder{}","@":"\\placeholder{}"};args[0]=options.insertionMode==="replaceAll"?"":model.getValue(model.selection,"latex-unstyled");if(options.insertionMode==="replaceSelection")
model.deleteAtoms(range(model.selection));else if(options.insertionMode==="replaceAll")model.deleteAtoms();else if(options.insertionMode==="insertBefore")
model.collapseSelection("backward");else if(options.insertionMode==="insertAfter")
model.collapseSelection("forward");if(!model.at(model.position).isLastSibling&&model.at(model.position+1).type==="placeholder"){model.deleteAtoms([model.position,model.position+1]);}else if(model.at(model.position).type==="placeholder"){model.deleteAtoms([model.position-1,model.position]);}
let implicitArgumentOffset=-1;if(args[0]){args["@"]=args[0];}else if(typeof input==="string"&&/(^|[^\\])#@/.test(input)){implicitArgumentOffset=getImplicitArgOffset(model);if(implicitArgumentOffset>=0){args["@"]=model.getValue(implicitArgumentOffset,model.position,"latex");}}
if(!args[0])args[0]=args["?"];let usedArg=false;const argFunction=(arg)=>{usedArg=true;return args[arg];};let[format,newAtoms]=convertStringToAtoms(model,input,argFunction,options);if(!newAtoms)return false;const insertingFraction=newAtoms.length===1&&newAtoms[0].type==="genfrac";if(insertingFraction&&implicitArgumentOffset>=0&&typeof model.mathfield.options.isImplicitFunction==="function"&&model.mathfield.options.isImplicitFunction(model.at(model.position).command)){args["@"]=args["?"];usedArg=false;[format,newAtoms]=convertStringToAtoms(model,input,argFunction,options);}else if(implicitArgumentOffset>=0){model.deleteAtoms([implicitArgumentOffset,model.position]);}
if(newAtoms.length===1&&newAtoms[0].isRoot){model.root=newAtoms[0];}else{const{parent}=model.at(model.position);const hadEmptyBody=parent.hasEmptyBranch("body");if(insertingFraction&&format!=="latex"&&model.mathfield.options.removeExtraneousParentheses&&parent instanceof LeftRightAtom&&parent.leftDelim==="("&&hadEmptyBody){const newParent=parent.parent;const branch=parent.parentBranch;newParent.removeChild(parent);newParent.setChildren(newAtoms,branch);}
const cursor=model.at(model.position);cursor.parent.addChildrenAfter(newAtoms,cursor);if(format==="latex"&&typeof input==="string"){if((parent==null?void 0:parent.type)==="root"&&hadEmptyBody&&!usedArg)
parent.verbatimLatex=input;}}
model.silenceNotifications=contentWasChanging;const lastNewAtom=newAtoms[newAtoms.length-1];if(options.selectionMode==="placeholder"){const placeholder=newAtoms.flatMap((x)=>[x,...x.children]).find((x)=>x.type==="placeholder");if(placeholder){const placeholderOffset=model.offsetOf(placeholder);model.setSelection(placeholderOffset-1,placeholderOffset);model.announce("move");}else if(lastNewAtom){model.position=model.offsetOf(lastNewAtom);}}else if(options.selectionMode==="before"){}else if(options.selectionMode==="after"){if(lastNewAtom)model.position=model.offsetOf(lastNewAtom);}else if(options.selectionMode==="item")
model.setSelection(model.anchor,model.offsetOf(lastNewAtom));model.contentDidChange({data,inputType:"insertText"});model.silenceNotifications=silenceNotifications;return true;}};function convertStringToAtoms(model,s,args,options){var _a3;let format=void 0;let result=[];if(typeof s!=="string"||options.format==="math-json"){const ce=globalThis.MathfieldElement.computeEngine;if(!ce)return["math-json",[]];[format,s]=["latex",ce.box(s).latex];result=parseLatex(s,{context:model.mathfield.context});}else if(typeof s==="string"&&options.format==="ascii-math"){[format,s]=parseMathString(s,{format:"ascii-math",inlineShortcuts:model.mathfield.options.inlineShortcuts});result=parseLatex(s,{context:model.mathfield.context});if(format!=="latex"&&model.mathfield.options.removeExtraneousParentheses)
result=result.map((x)=>removeExtraneousParenthesis(x));}else if(options.format==="auto"||((_a3=options.format)==null?void 0:_a3.startsWith("latex"))){if(options.format==="auto"){[format,s]=parseMathString(s,{format:"auto",inlineShortcuts:model.mathfield.options.inlineShortcuts});}
if(options.format==="latex")[,s]=trimModeShiftCommand(s);result=parseLatex(s,{context:model.mathfield.context,args});if(options.format!=="latex"&&model.mathfield.options.removeExtraneousParentheses)
result=result.map((x)=>removeExtraneousParenthesis(x));}
applyStyleToUnstyledAtoms(result,options.style);return[format!=null?format:"latex",result];}
function removeExtraneousParenthesis(atom){var _a3;if(atom instanceof LeftRightAtom&&atom.leftDelim!=="("&&atom.rightDelim===")"){const children=(_a3=atom.body)==null?void 0:_a3.filter((x)=>x.type!=="first");if((children==null?void 0:children.length)===1&&children[0].type==="genfrac")
return children[0];}
for(const branch of atom.branches){if(!atom.hasEmptyBranch(branch)){atom.setChildren(atom.branch(branch).map((x)=>removeExtraneousParenthesis(x)),branch);}}
if(atom instanceof ArrayAtom){atom.forEachCell((cell,row,column)=>{atom.setCell(row,column,cell.map((x)=>removeExtraneousParenthesis(x)));});}
return atom;}
function getImplicitArgOffset(model){let atom=model.at(model.position);if(atom.mode==="text"){while(!atom.isFirstSibling&&atom.mode==="text")
atom=atom.leftSibling;return model.offsetOf(atom);}
const atomAtCursor=atom;let afterDelim=false;if(atom.type==="mclose"){const delim=LEFT_DELIM[atom.value];while(!atom.isFirstSibling&&!(atom.type==="mopen"&&atom.value===delim))
atom=atom.leftSibling;if(!atom.isFirstSibling)atom=atom.leftSibling;afterDelim=true;}else if(atom.type==="leftright"){atom=atom.leftSibling;afterDelim=true;}
if(afterDelim){while(!atom.isFirstSibling&&(atom.isFunction||isImplicitArg(atom)))
atom=atom.leftSibling;}else{const delimiterStack=[];while(!atom.isFirstSibling&&(isImplicitArg(atom)||delimiterStack.length>0)){if(atom.type==="mclose")delimiterStack.unshift(atom.value);if(atom.type==="mopen"&&delimiterStack.length>0&&atom.value===LEFT_DELIM[delimiterStack[0]])
delimiterStack.shift();atom=atom.leftSibling;}}
if(atomAtCursor===atom)return-1;return model.offsetOf(atom);}
function isImplicitArg(atom){if(atom.isDigit())return true;if(atom.type&&/^(mord|surd|subsup|leftright|mop|mclose)$/.test(atom.type)){if(atom.type==="extensible-symbol")return false;return true;}
return false;}
new MathModeEditor();var TextModeEditor=class extends ModeEditor{constructor(){super("text");}
onPaste(mathfield,data){if(!data)return false;const text=typeof data==="string"?data:data.getData("text/plain");if(text&&mathfield.model.contentWillChange({inputType:"insertFromPaste",data:text})){mathfield.stopCoalescingUndo();mathfield.stopRecording();if(this.insert(mathfield.model,text)){mathfield.model.contentDidChange({inputType:"insertFromPaste"});mathfield.startRecording();mathfield.snapshot("paste");requestUpdate(mathfield);}
mathfield.startRecording();return true;}
return false;}
insert(model,text,options={}){if(!model.contentWillChange({data:text,inputType:"insertText"}))
return false;if(!options.insertionMode)options.insertionMode="replaceSelection";if(!options.selectionMode)options.selectionMode="placeholder";if(!options.format)options.format="auto";const{silenceNotifications}=model;if(options.silenceNotifications)model.silenceNotifications=true;const contentWasChanging=model.silenceNotifications;model.silenceNotifications=true;if(options.insertionMode==="replaceSelection"&&!model.selectionIsCollapsed)
model.deleteAtoms(range(model.selection));else if(options.insertionMode==="replaceAll"){model.root.setChildren([],"body");model.position=0;}else if(options.insertionMode==="insertBefore")
model.collapseSelection("backward");else if(options.insertionMode==="insertAfter")
model.collapseSelection("forward");const newAtoms=convertStringToAtoms2(text,model.mathfield.context);applyStyleToUnstyledAtoms(newAtoms,options.style);if(!newAtoms)return false;const cursor=model.at(model.position);const lastNewAtom=cursor.parent.addChildrenAfter(newAtoms,cursor);model.silenceNotifications=contentWasChanging;if(options.selectionMode==="before"){}else if(options.selectionMode==="item")
model.setSelection(model.anchor,model.offsetOf(lastNewAtom));else if(lastNewAtom)model.position=model.offsetOf(lastNewAtom);model.contentDidChange({data:text,inputType:"insertText"});model.silenceNotifications=silenceNotifications;return true;}};function convertStringToAtoms2(s,context){s=s.replace(/\\/g,"\\textbackslash ");s=s.replace(/#/g,"\\#");s=s.replace(/\$/g,"\\$");s=s.replace(/%/g,"\\%");s=s.replace(/&/g,"\\&");s=s.replace(/_/g,"\\_");s=s.replace(/{/g,"\\textbraceleft ");s=s.replace(/}/g,"\\textbraceright ");s=s.replace(/lbrace/g,"\\textbraceleft ");s=s.replace(/rbrace/g,"\\textbraceright ");s=s.replace(/\^/g,"\\textasciicircum ");s=s.replace(/~/g,"\\textasciitilde ");s=s.replace(//g,"\\textsterling ");return parseLatex(s,{context,parseMode:"text"});}
new TextModeEditor();function makeProxy(mf){return{value:mf.model.getValue(),selectionIsCollapsed:mf.model.selectionIsCollapsed,canUndo:mf.canUndo(),canRedo:mf.canRedo(),style:commonStyle(mf.model),mode:mf.model.mode};}
function commonStyle(model){var _a3;if(model.selectionIsCollapsed)return(_a3=model.at(model.position))==null?void 0:_a3.style;const selectedAtoms=model.getAtoms(model.selection);if(selectedAtoms.length===0)return{};const style=__spreadValues({},selectedAtoms[0].style);for(const atom of selectedAtoms){for(const[key,value]of Object.entries(atom.style))
if(style[key]!==value)delete style[key];}
return style;}
var padding=4;var radius=20;var paddedWidth=2*(radius+padding);var newPlus=(x,y)=>`
  <line x1="${x + radius}" y1="${y + radius}" 
    x2="${x > y ? x + radius : 7 * radius + 10 * padding}" 
    y2="${x < y ? y + radius : 7 * radius + 10 * padding}"/>
  <svg id="plus" viewBox="0 0 40 40" x="${x}" y="${y}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <path class="font" d="m33.33,20c0,1.84-1.49,3.34-3.33,3.34h-6.67v6.66c0,1.84-1.49,3.34-3.33,3.34s-3.34-1.5-3.34-3.34v-6.66h-6.66c-1.84,0-3.34-1.5-3.34-3.34s1.5-3.33,3.34-3.33h6.66v-6.67c0-1.84,1.5-3.33,3.34-3.33s3.33,1.49,3.33,3.33v6.67h6.67c1.84,0,3.33,1.49,3.33,3.33Z"/>
  </svg>`;var newMinus=(x,y)=>`
  <line x1="${x + radius}" y1="${y + radius}" 
    x2="${x > y ? x + radius : 7 * radius + 10 * padding}" 
    y2="${x < y ? y + radius : 7 * radius + 10 * padding}"/>
  <svg id="minus" viewBox="0 0 40 40" x="${x}" y="${y}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <path class="font" d="m33.33,20c0,1.84-1.49,3.33-3.33,3.33H10c-1.84,0-3.34-1.49-3.34-3.33s1.5-3.34,3.34-3.34h20c1.84,0,3.33,1.5,3.33,3.34Z"/>
  </svg>`;var newArrow=(x,y,theta)=>`
  <svg id="arrow" viewBox="0 0 40 40" x="${x}" y="${y}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <g transform="rotate(${theta})" transform-origin="20 20">
      <path class="font" d="m17.7,7.23h4.6c.52,0,.94.42.94.94v13.82c0,.52.42.94.94.94h3.39c.83,0,1.25,1.01.66,1.6l-7.56,7.56c-.37.37-.96.37-1.32,0l-7.56-7.56c-.59-.59-.17-1.6.66-1.6h3.39c.52,0,.94-.42.94-.94v-13.82c0-.52.42-.94.94-.94Z"/>
    </g>  
  </svg>`;var controllerSvg=`
<svg class="MLEP__array-buttons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
viewBox=
"-2 -2 ${8 * radius + 10 * padding + 5} ${8 * radius + 10 * padding + 5}">
  <rect 
      class="MLEP__array-insert-background rows"
      x="0" 
      y="${paddedWidth + padding}" 
      height="${3 * paddedWidth}" 
      width="${paddedWidth}" 
      rx="${paddedWidth / 2}"/>
      <rect 
      class="MLEP__array-insert-background columns"
      x="${paddedWidth + padding}" 
      y="0" 
      height="${paddedWidth}" 
      width="${3 * paddedWidth}" 
      rx="${paddedWidth / 2}"/>
  <g data-command='"moveDown"'>
  ${newArrow(2 * (padding + paddedWidth), 2 * padding + 3 * paddedWidth, 0)}
  </g>
  <g data-command='"moveUp"'>
  ${newArrow(2 * (padding + paddedWidth), 2 * padding + paddedWidth, 180)}
  </g>
  <g data-command='"moveToNextWord"'>
  ${newArrow(2 * padding + 3 * paddedWidth, 2 * (padding + paddedWidth), -90)}
  </g>
  <g data-command='"moveToPreviousWord"'>
  ${newArrow(2 * padding + paddedWidth, 2 * (padding + paddedWidth), 90)}
  </g>
  <g>

  <g data-command='"addColumnBefore"'>
  ${newPlus(2 * padding + paddedWidth, padding)}
  </g>
  <g data-command='"removeColumn"'>
  ${newMinus(2 * padding + 2 * paddedWidth, padding)}
  </g>
  <g data-command='"addColumnAfter"'>
  ${newPlus(2 * padding + 3 * paddedWidth, padding)}
  </g>
  <g data-command='"addRowBefore"'>
  ${newPlus(padding, 2 * padding + paddedWidth)}
  </g>
  <g data-command='"removeRow"'>
  ${newMinus(padding, 2 * padding + 2 * paddedWidth)}
  </g>
  <g data-command='"addRowAfter"'>
    ${newPlus(padding, 2 * padding + 3 * paddedWidth)}
  </g>
</svg>`;var matrix=(className)=>`
<svg id="matrix" class="${className}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","matrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/></svg>`;var pmatrix=(className)=>`
<svg id="pmatrix" class="${className}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
data-command='["setEnvironment","pmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4c-3.96,4.6-3.96,11.4,0,16"/>
  <path class="cls-2" d="m22,4c3.96,4.6,3.96,11.4,0,16"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/></svg>`;var Bmatrix=(className)=>`
<svg id="Bmatrix" class="${className}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","Bmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4c-1.1,0-2,.9-2,2v3c0,1.66-.9,3-2,3,1.1,0,2,1.34,2,3v3c0,1.1.9,2,2,2"/>
  <path class="cls-2" d="m22,4c1.1,0,2,.9,2,2v3c0,1.66.9,3,2,3-1.1,0-2,1.34-2,3v3c0,1.1-.9,2-2,2"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
</svg>`;var bmatrix=(className)=>`
<svg id="bmatrix" class="${className}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","bmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4h-3v16h3"/>
  <path class="cls-2" d="m22,4h3v16h-3"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
</svg>`;var vmatrix=(className)=>`
<svg id="vmatrix" class="${className}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","vmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
  <line class="cls-2" x1="4" y1="4" x2="4" y2="20"/>
  <line class="cls-2" x1="24" y1="4" x2="24" y2="20"/>
</svg>`;var Vmatrix=(className)=>`
<svg id="Vmatrix" class="${className}" xmlns="http://www.w3.org/2000/svg" viewBox="-3.5 -3 35 30" 
  data-command='["setEnvironment","Vmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
  <line class="cls-2" x1="6" y1="4" x2="6" y2="20"/>
  <line class="cls-2" x1="22" y1="4" x2="22" y2="20"/>
  <line class="cls-2" x1="2" y1="4" x2="2" y2="20"/>
  <line class="cls-2" x1="26" y1="4" x2="26" y2="20"/>
</svg>`;var cases2=(className)=>`
<svg id="cases" class="${className}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","cases"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m10,4c-1.1,0-2,.9-2,2v3c0,1.66-.9,3-2,3,1.1,0,2,1.34,2,3v3c0,1.1.9,2,2,2"/>
  <circle cx="13" cy="8" r="1"/>
  <circle cx="13" cy="16" r="1"/>
  <circle cx="21" cy="8" r="1"/>
  <circle cx="21" cy="16" r="1"/>
</svg>`;var rcases=(className)=>`
<svg id="rcases" class="${className}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","rcases"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m18,20c1.1,0,2-.9,2-2v-3c0-1.66.9-3,2-3-1.1,0-2-1.34-2-3v-3c0-1.1-.9-2-2-2"/>
  <circle cx="15" cy="8" r="1"/>
  <circle cx="15" cy="16" r="1"/>
  <circle cx="7" cy="8" r="1"/>
  <circle cx="7" cy="16" r="1"/>
</svg>`;var matrixButtons={matrix,pmatrix,bmatrix,Bmatrix,vmatrix,Vmatrix};var casesButtons={cases:cases2,rcases,Bmatrix};function showEnvironmentPopover(mf){var _a3,_d2;const rows=(_a3=mf.model.parentEnvironment)==null?void 0:_a3.rows;if(!rows)return;let columnCount=0;rows.forEach((column)=>{if(!columnCount||column.length>columnCount)
columnCount=column.length;});let panel=document.getElementById("mathlive-environment-popover");if(!panel){panel=getSharedElement("mathlive-environment-popover");injectStylesheet("environment-popover");injectStylesheet("core");panel.setAttribute("aria-hidden","true");}
let flexbox;const possiblyExistentFlexbox=panel.querySelector(".MLEP__environment-controls");if(possiblyExistentFlexbox)flexbox=possiblyExistentFlexbox;else{flexbox=document.createElement("div");panel.innerHTML="";panel.appendChild(flexbox);}
flexbox.className="MLEP__environment-controls";flexbox.style.display="flex";flexbox.style.width="100%";flexbox.style.height="100%";flexbox.style.boxSizing="border-box";flexbox.innerHTML=controllerSvg;let delimiterOptions=[];let activeDelimeter="";const environment=mf.model.parentEnvironment.environmentName;if(isMatrixEnvironment(environment)){const normalizedEnvironment=normalizeMatrixName(environment);activeDelimeter=matrixButtons[normalizedEnvironment]("active");const _b3=matrixButtons,{[normalizedEnvironment]:_}=_b3,filteredDelimeters=__objRest(_b3,[__restKey(normalizedEnvironment)]);delimiterOptions=Object.values(filteredDelimeters).map((f)=>f("inactive"));}else if(isCasesEnvironment(environment)){const normalizedEnvironment=normalizeCasesName(environment);activeDelimeter=casesButtons[normalizedEnvironment]("active");const _c2=casesButtons,{[normalizedEnvironment]:_}=_c2,filteredDelimeters=__objRest(_c2,[__restKey(normalizedEnvironment)]);delimiterOptions=Object.values(filteredDelimeters).map((f)=>f("inactive"));}else if(isAlignEnvironment(environment)){activeDelimeter=matrixButtons["matrix"]("active");delimiterOptions=Object.values(casesButtons).map((f)=>f("inactive"));}
const delimiterControls=document.createElement("div");delimiterControls.className="MLEP__environment-delimiter-controls";delimiterControls.style.display="flex";delimiterControls.style.flexDirection="column";delimiterControls.innerHTML=`
  <div class='MLEP__array-delimiter-options'>
  ${activeDelimeter}
  ${delimiterOptions.join("")}
  </div>`;if(activeDelimeter)flexbox.appendChild(delimiterControls);const arrayControls=flexbox.querySelectorAll("[data-command]");arrayControls.forEach((control)=>{const commandString=control.dataset.command;let command=commandString;try{command=JSON.parse(commandString);}catch(e){}
control.addEventListener("mousedown",(ev)=>ev.preventDefault());if(command)
control.addEventListener("click",()=>mf.executeCommand(command));});const position=(_d2=mf.field)==null?void 0:_d2.getBoundingClientRect();if(position){panel.style.top=`${window.scrollY + (position.top - panel.clientHeight - 15)}px`;panel.style.left=`${position.left + 20}px`;panel.classList.add("is-visible");}}
function hideEnvironmentPopover(){const panel=document.getElementById("mathlive-environment-popover");panel==null?void 0:panel.classList.remove("is-visible");}
function disposeEnvironmentPopover(){if(!document.getElementById("mathlive-environment-popover"))return;releaseSharedElement("mathlive-environment-popover");releaseStylesheet("environment-popover");releaseStylesheet("core");}
function updateEnvironmentPopover(mf){if(!mf.hasFocus())return;let visible=false;if(mf.model.mode==="math"){const env=mf.model.parentEnvironment;if(!!(env==null?void 0:env.rows)&&isTabularEnvironment(env.environmentName)){const policy=mf.options.environmentPopoverPolicy;visible=policy==="auto"||policy==="on";}}
if(visible)showEnvironmentPopover(mf);else hideEnvironmentPopover();}
function normalizeMatrixName(environment){return environment.replace("*","");}
function normalizeCasesName(environment){if(environment==="dcases")
return"cases";return environment;}
function getComputedDir(element){const dir=getComputedStyle(element).direction;return dir==="ltr"||dir==="rtl"?dir:"ltr";}
function getEdge(bounds,position,direction){if(position==="left"||position==="leading"&&direction==="ltr"||position==="trailing"&&direction==="rtl")
return bounds.left;return bounds.right;}
function getEffectivePos(pos,length,placement,dir){if(placement==="middle")return pos-length/2;if(placement==="start"&&dir==="rtl"||placement==="end"&&dir==="ltr"||placement==="top"||placement==="right")
return Math.max(0,pos-length);return pos;}
function getOppositeEffectivePos(pos,length,placement,dir){if(placement==="middle")return pos-length/2;if(placement==="start"&&dir==="ltr"||placement==="end"&&dir==="rtl"||placement==="top"||placement==="right")
return pos;return pos-length;}
function fitInViewport(element,options){var _a3,_b3,_c2;const dir=(_a3=getComputedDir(element))!=null?_a3:"ltr";element.style.position="fixed";element.style.left="";element.style.top="";element.style.right="";element.style.bottom="";element.style.height="";element.style.width="";const elementBounds=element.getBoundingClientRect();const maxHeight=Number.isFinite(options.maxHeight)?Math.min(options.maxHeight,window.innerHeight):window.innerHeight;let height=Math.min(maxHeight,(_b3=options.height)!=null?_b3:elementBounds.height);let top=getEffectivePos(options.location.y,height,options.verticalPos,dir);if(top+height>window.innerHeight-8){if(options.alternateLocation){top=getEffectivePos(options.alternateLocation.y,height,options.verticalPos,dir);if(top+height>window.innerHeight-8)top=void 0;}else top=void 0;}
if(!Number.isFinite(top)){top=Math.max(8,window.innerHeight-8-height);if(8+height>window.innerHeight-8){element.style.bottom="8px";}}
height=Math.min(top+height,window.innerHeight-8)-top;const maxWidth=Number.isFinite(options.maxWidth)?Math.min(options.maxWidth,window.innerWidth):window.innerWidth;let width=Math.min(maxWidth,(_c2=options.width)!=null?_c2:elementBounds.width);let left=getEffectivePos(options.location.x,width,options.horizontalPos,dir);if(left+width>window.innerWidth-8){if(options.alternateLocation){left=getOppositeEffectivePos(options.alternateLocation.x,width,options.verticalPos,dir);if(left+width>window.innerWidth-8)left=void 0;}else left=void 0;}
if(!Number.isFinite(left)){left=Math.max(8,window.innerWidth-8-width);if(8+width>window.innerWidth-8){element.style.right="8px";}}
width=Math.min(left+width,window.innerWidth-8)-left;if(dir==="rtl"){element.style.right=`${Math.ceil(
        window.innerWidth - left - width
      ).toString()}px`;}else element.style.left=`${Math.ceil(left).toString()}px`;element.style.top=`${Math.ceil(top).toString()}px`;if(height!==elementBounds.height)
element.style.height=`${Math.ceil(height).toString()}px`;if(width!==elementBounds.width)
element.style.width=`${Math.ceil(width).toString()}px`;}
function distance2(p1,p2){return Math.hypot(p2.x-p1.x,p2.y-p1.y);}
function isSubmenu(item){return"submenu"in item;}
function isCommand(item){return"type"in item&&item.type==="command"||"onMenuSelect"in item||"id"in item;}
function isDivider(item){return"type"in item&&item.type==="divider";}
function isHeading(item){return"type"in item&&item.type==="heading";}
var ICON_CATALOG={};function icon(name){let icon2=ICON_CATALOG[name];if(!icon2){let markup;switch(name){case"checkmark":markup=`<span aria-hidden="true" class="ui-checkmark"><svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z"></path></svg>
      </span>`;break;case"trailing-chevron":markup=`<span aria-hidden="true" class="ui-trailing-chevron"><svg focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></span>`;break;case"mixedmark":markup='<span aria-hidden="true" class="ui-mixedmark"><svg xmlns="http://www.w3.org/2000/svg" width="16" viewBox="0 0 512 512"><path fill="currentColor" d="M0 256c0-13.3 10.7-24 24-24H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24z"/></svg></span>';}
if(markup){const template=document.createElement("template");template.innerHTML=markup;ICON_CATALOG[name]=template;icon2=template;}}
if(icon2){if("content"in icon2)
return icon2.content.cloneNode(true);const element=document.createElement("svg");element.innerHTML=icon2.innerHTML;return element;}
return void 0;}
var BLINK_SPEED=80;var _MenuItemState=class{constructor(declaration,parentMenu){this._className="";this._element=null;var _a3;this.parentMenu=parentMenu;this._declaration=declaration;Object.freeze(this._declaration);if(isSubmenu(declaration)){this.type="submenu";this.submenu=new _MenuListState(declaration.submenu,{parentMenu,submenuClass:declaration.submenuClass,columnCount:declaration.columnCount});}else this.type=(_a3=declaration.type)!=null?_a3:"command";this.hasCheck=isCommand(declaration)&&declaration.checked!==void 0;}
get rootMenu(){return this.parentMenu.rootMenu;}
get abortController(){if(!this._abortController)this._abortController=new AbortController();return this._abortController;}
dispose(){var _a3,_b3;(_a3=this._abortController)==null?void 0:_a3.abort();this._abortController=void 0;(_b3=this._element)==null?void 0:_b3.remove();this._element=null;if(this.submenu)this.submenu.dispose();this.submenu=void 0;}
get menuItem(){return this._declaration;}
get label(){var _a3;return(_a3=this._label)!=null?_a3:"";}
set label(value){if(value===void 0)value="";if(value===this._label)return;this._label=value;this.dirty=true;}
get visible(){return this._visible;}
set visible(value){if(value===this._visible)return;this._visible=value;this.dirty=true;}
get enabled(){return this._enabled;}
set enabled(value){this._enabled=value;if(this.element){if(value)this.element.removeAttribute("aria-disabled");else this.element.setAttribute("aria-disabled","true");}
this.dirty=true;}
get checked(){return this._checked;}
set checked(value){this._checked=value;this.dirty=true;}
get tooltip(){return this._tooltip;}
set tooltip(value){if(value===this._tooltip)return;this._tooltip=value;this.dirty=true;}
get ariaLabel(){return this._ariaLabel;}
set ariaLabel(value){if(value===this._ariaLabel)return;this._ariaLabel=value;this.dirty=true;}
get active(){var _a3,_b3;return(_b3=(_a3=this.element)==null?void 0:_a3.classList.contains("active"))!=null?_b3:false;}
set active(value){if(!this.element)return;this.element.classList.toggle("active",value);}
updateState(modifiers){var _a3,_b3,_c2;const declaration=this._declaration;if(isDivider(declaration)){this.enabled=false;this.checked=false;return;}
if(isHeading(declaration)){this.enabled=false;this.checked=false;this.visible=true;}
if(isCommand(declaration)){this.checked=(_a3=dynamicValue(declaration.checked,modifiers))!=null?_a3:false;}
if(isCommand(declaration)||isSubmenu(declaration)){this.enabled=(_b3=dynamicValue(declaration.enabled,modifiers))!=null?_b3:true;this.visible=(_c2=dynamicValue(declaration.visible,modifiers))!=null?_c2:true;if(this.visible&&this.enabled&&this.submenu){this.submenu.updateState(modifiers);if(!this.submenu.visible)this.visible=false;}}
if(isCommand(declaration)||isHeading(declaration)||isSubmenu(declaration)){this.label=dynamicValue(declaration.label,modifiers);this._className=dynamicValue(declaration.class,modifiers);this.tooltip=dynamicValue(declaration.tooltip,modifiers);this.ariaLabel=dynamicValue(declaration.ariaLabel,modifiers);}
if(this._element)this.updateElement();}
set dirty(value){console.assert(value===true);if(value&&this.parentMenu)this.parentMenu.dirty=true;}
updateElement(){var _a3;if(!this.visible||!this.element)return;const li=this.element;li.textContent="";li.className="";li.className=(_a3=this._className)!=null?_a3:"";if(!this.enabled)li.setAttribute("aria-disabled","true");else li.removeAttribute("aria-disabled");if(this.checked===true){li.setAttribute("aria-checked","true");li.append(icon("checkmark"));}else if(this.checked==="mixed"){li.setAttribute("aria-checked","mixed");li.append(icon("mixedmark"));}else li.removeAttribute("aria-checked");if(this.ariaLabel)li.setAttribute("aria-label",this.ariaLabel);const span=document.createElement("span");span.className=this.parentMenu.hasCheck?"label indent":"label";if(this.type==="heading")span.classList.add("heading");span.innerHTML=this.label;li.append(span);if(this._tooltip){li.setAttribute("data-tooltip",this._tooltip);}
if(isCommand(this._declaration)&&this._declaration.keyboardShortcut){const kbd=document.createElement("kbd");kbd.innerHTML=getKeybindingMarkup(this._declaration.keyboardShortcut);li.append(kbd);}
if(this.type==="submenu")li.append(icon("trailing-chevron"));}
get element(){if(this._element)return this._element;if(isDivider(this._declaration)){const li2=document.createElement("li");li2.setAttribute("part","menu-divider");li2.setAttribute("role","divider");this._element=li2;return li2;}
const li=document.createElement("li");this._element=li;if(isCommand(this._declaration)||isHeading(this._declaration)||isSubmenu(this._declaration))
li.setAttribute("part","menu-item");li.setAttribute("tabindex","-1");if(this.hasCheck)li.setAttribute("role","menuitemcheckbox");else li.setAttribute("role","menuitem");if(this.type==="submenu"){li.setAttribute("aria-haspopup","true");li.setAttribute("aria-expanded","false");}
const signal=this.abortController.signal;li.addEventListener("pointerenter",this,{signal});li.addEventListener("pointerleave",this,{signal});li.addEventListener("pointerup",this,{signal});li.addEventListener("click",this,{signal});return this._element;}
dispatchSelect(){var _a3;if(!isCommand(this._declaration))return;const ev=new CustomEvent("menu-select",{cancelable:true,bubbles:true,detail:{modifiers:this.rootMenu.modifiers,id:this._declaration.id,data:this._declaration.data}});const success=this.parentMenu.dispatchEvent(ev);if(success&&typeof this._declaration.onMenuSelect==="function"){this._declaration.onMenuSelect({target:(_a3=this.parentMenu.host)!=null?_a3:void 0,modifiers:this.rootMenu.modifiers,id:this._declaration.id,data:this._declaration.data});}}
handleEvent(event){var _a3;if(!this.visible||!this.enabled)return;if(event.type==="click"){if(this.rootMenu.state==="modal")this.select();event.stopPropagation();event.preventDefault();return;}
if(event.type==="pointerenter"){const ev=event;this.rootMenu.cancelDelayedOperation();if(this.parentMenu.isSubmenuOpen&&((_a3=this.parentMenu.activeMenuItem)==null?void 0:_a3.movingTowardSubmenu(ev))){this.rootMenu.scheduleOperation(()=>{this.parentMenu.activeMenuItem=this;this.openSubmenu();});}else{this.parentMenu.activeMenuItem=this;this.openSubmenu({withDelay:true});}
return;}
if(event.type==="pointerleave"){if(this.rootMenu.activeSubmenu===this.parentMenu)
this.parentMenu.activeMenuItem=null;return;}
if(event.type==="pointerup"){if(this.rootMenu.state!=="modal")this.select();event.stopPropagation();event.preventDefault();return;}}
select(){this.rootMenu.cancelDelayedOperation();if(this.type==="submenu"){this.openSubmenu();return;}
this.active=false;setTimeout(()=>{this.active=true;setTimeout(()=>{this.active=false;this.rootMenu.hide();this.dispatchSelect();},BLINK_SPEED);},BLINK_SPEED);}
openSubmenu(options){var _a3;if(this.type!=="submenu"||!this.element)return;if((_a3=options==null?void 0:options.withDelay)!=null?_a3:false){this.rootMenu.scheduleOperation(()=>this.openSubmenu());return;}
const bounds=this.element.getBoundingClientRect();const dir=getComputedDir(this.element);this.submenu.show({container:this.rootMenu.element.parentNode,location:{x:getEdge(bounds,"trailing",dir),y:bounds.top-4},alternateLocation:{x:getEdge(bounds,"leading",dir),y:bounds.top-4}});}
movingTowardSubmenu(ev){if(!this.element)return false;if(this.type!=="submenu")return false;const lastEv=this.rootMenu.lastMoveEvent;if(!lastEv)return false;const deltaT=ev.timeStamp-lastEv.timeStamp;if(deltaT>500)return false;const deltaX=ev.clientX-lastEv.clientX;const s=speed(deltaX,lastEv.clientY-ev.clientY,deltaT);if(s<=0.2)return false;let position="right";if(this.submenu.element){const submenuBounds=this.submenu.element.getBoundingClientRect();const bounds=this.element.getBoundingClientRect();if(submenuBounds.left<bounds.left+bounds.width/2)
position="left";}
return position==="right"?deltaX>0:deltaX<0;}};function speed(dx,dy,dt){return Math.hypot(dx,dy)/dt;}
function dynamicValue(value,modifiers){if(value===void 0||typeof value!=="function")
return value;modifiers!=null?modifiers:modifiers={alt:false,control:false,shift:false,meta:false};return value(modifiers);}
var _MenuListState=class __MenuListState{constructor(items,options){this._element=null;this._activeMenuItem=null;this._dirty=true;var _a3,_b3;this.parentMenu=(_a3=options==null?void 0:options.parentMenu)!=null?_a3:null;this._submenuClass=options==null?void 0:options.submenuClass;this.columnCount=(_b3=options==null?void 0:options.columnCount)!=null?_b3:1;this.isSubmenuOpen=false;this.menuItems=items;}
get children(){return Object.freeze([...this._menuItems]);}
set menuItems(items){const parent=this.parentMenu;this.dispose();this.parentMenu=parent;items=[...items];this._menuItems=items.map((x)=>x["onCreate"]?x["onCreate"](x,this):new _MenuItemState(x,this));this.hasCheck=void 0;this.dirty=true;}
dispose(){var _a3;this.hide();if(this._element)this._element.remove();if(this._abortController)this._abortController.abort();(_a3=this._menuItems)==null?void 0:_a3.forEach((x)=>x.dispose());this._menuItems=[];this._activeMenuItem=null;this.parentMenu=null;}
handleEvent(event){if(event.type==="wheel"&&this._element){const ev=event;this._element.scrollBy(0,ev.deltaY);event.stopPropagation();}}
dispatchEvent(ev){return this.rootMenu.dispatchEvent(ev);}
get host(){return this.rootMenu.host;}
get rootMenu(){return this.parentMenu.rootMenu;}
updateState(modifiers){var _a3,_b3,_c2;this._menuItems.forEach((x)=>x.updateState(modifiers));const previousHasCheck=this.hasCheck;this.hasCheck=this._menuItems.some((x)=>x.visible&&x.hasCheck);if(this.hasCheck!==previousHasCheck){this._menuItems.forEach((x)=>x.updateState(modifiers));}
let heading=void 0;let itemInHeadingCount=0;for(const item of this._menuItems){if(item.type==="heading"){if(heading&&itemInHeadingCount===0)heading.visible=false;heading=item;itemInHeadingCount=0;}else if(item.type==="divider"&&heading){heading.visible=itemInHeadingCount>0;heading=void 0;itemInHeadingCount=0;}else if(heading&&item.visible)itemInHeadingCount+=1;}
if(heading)heading.visible=itemInHeadingCount>0;let wasDivider=true;for(const item of this._menuItems){if(item.type==="divider"){item.visible=!wasDivider;wasDivider=true;}else if(item.visible)wasDivider=false;}
if(!((_a3=this.activeMenuItem)==null?void 0:_a3.visible))this.activeMenuItem=null;if(!((_b3=this.activeMenuItem)==null?void 0:_b3.enabled)&&((_c2=this.activeMenuItem)==null?void 0:_c2.type)==="submenu")
this._activeMenuItem.submenu.hide();this._dirty=false;}
get enabled(){this.updateIfDirty();return this._menuItems.some((x)=>x.type!=="divider"&&x.visible&&x.enabled);}
get visible(){this.updateIfDirty();return this._menuItems.some((x)=>x.type!=="divider"&&x.visible);}
set dirty(value){console.assert(value===true);if(this._dirty===value)return;if(value&&this.parentMenu){this._dirty=true;this.parentMenu.dirty=true;}}
updateIfDirty(){if(this._dirty)this.updateState(this.rootMenu.modifiers);}
updateElement(){var _a3;if(!this._element)return;this._element.textContent="";for(const{element,visible}of this._menuItems)
if(element&&visible)this._element.append(element);(_a3=this._element.querySelector("li:first-of-type"))==null?void 0:_a3.setAttribute("tabindex","0");}
get element(){if(this._element)return this._element;const menu=document.createElement("menu");menu.setAttribute("role","menu");menu.setAttribute("tabindex","-1");menu.setAttribute("aria-orientation","vertical");menu.setAttribute("part","ui-menu-container");if(this._submenuClass)menu.classList.add(this._submenuClass);menu.classList.add("ui-menu-container");if(!this._abortController)this._abortController=new AbortController();const signal=this._abortController.signal;menu.addEventListener("focus",this,{signal});menu.addEventListener("wheel",this,{passive:true,signal});this._element=menu;this.updateElement();return menu;}
get activeMenuItem(){return this._activeMenuItem;}
set activeMenuItem(value){var _a3,_b3,_c2,_d2;this.rootMenu.cancelDelayedOperation();if(value!==this._activeMenuItem){if(this.activeMenuItem){const item=this.activeMenuItem;item.active=false;(_a3=item.submenu)==null?void 0:_a3.hide();}
if(!((_b3=value==null?void 0:value.visible)!=null?_b3:true)){this._activeMenuItem=null;return;}
this._activeMenuItem=value;if(value)value.active=true;}
if(value)(_c2=value.element)==null?void 0:_c2.focus({preventScroll:true});else(_d2=this._element)==null?void 0:_d2.focus({preventScroll:true});}
get firstMenuItem(){this.updateIfDirty();let result=0;let found=false;const menuItems=this._menuItems;while(!found&&result<=menuItems.length-1){const item=menuItems[result];found=item.type!=="divider"&&item.visible&&item.enabled;result+=1;}
return found?menuItems[result-1]:null;}
get lastMenuItem(){this.updateIfDirty();const menuItems=this._menuItems;let result=menuItems.length-1;let found=false;while(!found&&result>=0){const item=menuItems[result];found=item.type!=="divider"&&item.visible&&item.enabled;result-=1;}
return found?menuItems[result+1]:null;}
nextMenuItem(stride){if(stride===0)return this._activeMenuItem;if(!this._activeMenuItem)
return stride>0?this.firstMenuItem:this.lastMenuItem;if(!this.firstMenuItem||!this.lastMenuItem||!this._activeMenuItem)
return null;this.updateIfDirty();const first=this._menuItems.indexOf(this.firstMenuItem);const last=this._menuItems.indexOf(this.lastMenuItem);let index=this._menuItems.indexOf(this._activeMenuItem);let count=1;while(index>=first&&index<=last){index+=stride>0?1:-1;const item=this._menuItems[index];if(!item)break;if(item.visible&&item.enabled){if(count===Math.abs(stride))return this._menuItems[index];count+=1;}}
return stride>0?this.lastMenuItem:this.firstMenuItem;}
getMenuItemColumn(menu){this.updateIfDirty();const visibleItems=this._menuItems.filter((x)=>x.visible&&x.enabled);const index=visibleItems.indexOf(menu);if(index<0)return-1;return index%this.columnCount;}
static get collator(){if(__MenuListState._collator)return __MenuListState._collator;__MenuListState._collator=new Intl.Collator(void 0,{usage:"search",sensitivity:"base"});return __MenuListState._collator;}
findMenuItem(text){var _a3;this.updateIfDirty();const candidates=this._menuItems.filter((x)=>x.type!=="divider"&&x.visible&&x.enabled);if(candidates.length===0)return null;const last=Math.max(...candidates.map((x)=>x.label.length))-text.length;if(last<0)return null;let result=null;let i=0;while(i<last&&!result){result=(_a3=candidates.find((x)=>__MenuListState.collator.compare(text,x.label.substring(i,text.length))===0))!=null?_a3:null;i++;}
return result;}
show(options){if(!this.visible||!options.container)return false;this.updateElement();options.container.appendChild(this.element);if(supportPopover()){this.element.popover="manual";this.element.showPopover();}
if(options.location){fitInViewport(this.element,{location:options.location,alternateLocation:options.alternateLocation,verticalPos:"bottom",horizontalPos:"start"});}
suppressFocusEvents();this.element.focus({preventScroll:true});enableFocusEvents();if(this.parentMenu)this.parentMenu.openSubmenu=this;return true;}
hide(){var _a3,_b3,_c2,_d2,_e,_f;this.openSubmenu=null;this.activeMenuItem=null;if(this.parentMenu)this.parentMenu.openSubmenu=null;if(!((_a3=this._element)==null?void 0:_a3.isConnected)||!this._element.parentElement)return;if(supportPopover()&&((_b3=this._element)==null?void 0:_b3.popover))this._element.hidePopover();suppressFocusEvents();(_d2=(_c2=this.parentMenu)==null?void 0:_c2.element)==null?void 0:_d2.focus();(_f=(_e=this._element)==null?void 0:_e.parentNode)==null?void 0:_f.removeChild(this._element);enableFocusEvents();}
set openSubmenu(submenu){var _a3,_b3,_c2,_d2;const expanded=submenu!==null;if(((_a3=this.activeMenuItem)==null?void 0:_a3.type)==="submenu"){(_b3=this.activeMenuItem.element)==null?void 0:_b3.setAttribute("aria-expanded",expanded.toString());}
(_d2=(_c2=this.activeMenuItem)==null?void 0:_c2.element)==null?void 0:_d2.classList.toggle("is-submenu-open",expanded);this.isSubmenuOpen=expanded;}};function suppressFocusEvents(){document.addEventListener("focusin",handleFocusEvent,true);document.addEventListener("focusout",handleFocusEvent,true);document.addEventListener("focus",handleFocusEvent,true);document.addEventListener("blur",handleFocusEvent,true);}
function handleFocusEvent(event){event.stopImmediatePropagation();event.preventDefault();}
function enableFocusEvents(){document.removeEventListener("focusin",handleFocusEvent,true);document.removeEventListener("focusout",handleFocusEvent,true);document.removeEventListener("focus",handleFocusEvent,true);document.removeEventListener("blur",handleFocusEvent,true);}
var _Menu=class _Menu extends _MenuListState{constructor(menuItems,options){var _a3;super(menuItems);this.state="closed";this.typingBufferResetTimer=0;this.hysteresisTimer=0;this._updating=false;this._host=(_a3=options==null?void 0:options.host)!=null?_a3:null;this.isDynamic=menuItems.some(isDynamic);this._modifiers={shift:false,control:false,alt:false,meta:false};this.typingBuffer="";this.state="closed";}
get modifiers(){return this._modifiers;}
set modifiers(value){if(equalKeyboardModifiers(this._modifiers,value))return;this._modifiers=value;this.dirty=true;}
get activeSubmenu(){let result=this;while(result.isSubmenuOpen)result=result.activeMenuItem.submenu;return result;}
set dirty(value){if(this._updating)return;console.assert(value===true);if(this._dirty===value)return;this._dirty=true;if(value){setTimeout(()=>{this.updateState(this.modifiers);this.updateElement();});}}
updateState(modifiers){this._updating=true;this.modifiers=modifiers!=null?modifiers:this.modifiers;super.updateState(this.modifiers);this._updating=false;}
handleKeyupEvent(ev){if(this.isDynamic)this.modifiers=keyboardModifiersFromEvent(ev);ev.stopImmediatePropagation();}
handleKeydownEvent(ev){var _a3,_b3,_c2;if(ev.key==="Tab"||ev.key==="Escape"){this.hide();return;}
if(this.isDynamic)this.modifiers=keyboardModifiersFromEvent(ev);let handled=true;const menu=this.activeSubmenu;const menuItem=menu.activeMenuItem;switch(ev.key){case" ":case"Space":case"Return":case"Enter":menuItem==null?void 0:menuItem.select(keyboardModifiersFromEvent(ev));break;case"ArrowRight":if((menuItem==null?void 0:menuItem.type)==="submenu"){menuItem.select(keyboardModifiersFromEvent(ev));this.activeSubmenu.activeMenuItem=this.activeSubmenu.firstMenuItem;}else if(!menuItem)menu.activeMenuItem=menu.firstMenuItem;else{const col=(_a3=menu.getMenuItemColumn(menuItem))!=null?_a3:-1;if(col>=0&&col<((_b3=menu.columnCount)!=null?_b3:1)-1){const next=menu.nextMenuItem(1);if(next)menu.activeMenuItem=next;}}
break;case"ArrowLeft":if(menu===this.rootMenu){if(!menuItem)menu.activeMenuItem=menu.firstMenuItem;}else{const col=menuItem?(_c2=menu.getMenuItemColumn(menuItem))!=null?_c2:-1:-1;if(col<=0||!menuItem){menu.hide();const activeMenu=menu.parentMenu.activeMenuItem;if(activeMenu){const{element}=activeMenu;element==null?void 0:element.focus();element==null?void 0:element.classList.remove("is-submenu-open");}}else{const next=menu.nextMenuItem(-1);if(next)menu.activeMenuItem=next;}}
break;case"ArrowDown":menu.activeMenuItem=menu.nextMenuItem(menu.columnCount);break;case"ArrowUp":menu.activeMenuItem=menu.nextMenuItem(-menu.columnCount);break;case"Home":case"PageUp":menu.activeMenuItem=menu.firstMenuItem;break;case"End":case"PageDown":menu.activeMenuItem=menu.lastMenuItem;break;case"Backspace":if(this.typingBuffer){this.typingBuffer=this.typingBuffer.slice(0,-1);if(this.typingBuffer){clearTimeout(this.typingBufferResetTimer);const newItem=menu.findMenuItem(this.typingBuffer);if(newItem)menu.activeMenuItem=newItem;this.typingBufferResetTimer=setTimeout(()=>{this.typingBuffer="";},500);}}
break;default:if(mightProducePrintableCharacter(ev)){if(isFinite(this.typingBufferResetTimer))
clearTimeout(this.typingBufferResetTimer);this.typingBuffer+=ev.key;const newItem=menu.findMenuItem(this.typingBuffer);if(newItem)menu.activeMenuItem=newItem;this.typingBufferResetTimer=setTimeout(()=>{this.typingBuffer="";},500);}else handled=false;}
if(handled){ev.preventDefault();ev.stopPropagation();}}
handleEvent(event){if(event.type==="keydown")
this.handleKeydownEvent(event);else if(event.type==="keyup")
this.handleKeyupEvent(event);else if(event.type==="pointermove")
this.lastMoveEvent=event;else if(event.type==="pointerup"&&event.target===this.scrim){if(Number.isFinite(this.rootMenu._openTimestamp)&&Date.now()-this.rootMenu._openTimestamp<120){this.state="modal";}else if(this.state==="modal"){this.hide();}}else if(event.type==="contextmenu"){event.preventDefault();event.stopPropagation();return;}
super.handleEvent(event);}
dispatchEvent(ev){if(!this._host)return true;return this._host.dispatchEvent(ev);}
get host(){return this._host;}
get scrim(){return Scrim.element;}
connectScrim(target){const scrim=this.scrim;scrim.addEventListener("pointerup",this);scrim.addEventListener("contextmenu",this);scrim.addEventListener("keydown",this);scrim.addEventListener("keyup",this);scrim.addEventListener("pointermove",this);Scrim.open({root:target,onDismiss:()=>this.hide()});}
disconnectScrim(){const scrim=this.scrim;scrim.removeEventListener("pointerup",this);scrim.removeEventListener("contextmenu",this);scrim.removeEventListener("keydown",this);scrim.removeEventListener("keyup",this);scrim.removeEventListener("pointermove",this);if(Scrim.state==="open")Scrim.scrim.close();}
get rootMenu(){return this;}
show(options){this._onDismiss=options==null?void 0:options.onDismiss;if(options==null?void 0:options.modifiers)this.modifiers=options.modifiers;this.updateState();this.connectScrim(options==null?void 0:options.target);if(!super.show(__spreadProps(__spreadValues({},options),{container:this.scrim}))){this.disconnectScrim();return false;}
this._openTimestamp=Date.now();this.state="open";return true;}
hide(){this.cancelDelayedOperation();if(this.state!==void 0){if(this.state!=="closed"){this.activeMenuItem=null;Scrim.element.parentElement.focus();super.hide();this.state="closed";this.disconnectScrim();}
if(this._onDismiss){this._onDismiss();this._onDismiss=void 0;}}}
scheduleOperation(fn){this.cancelDelayedOperation();const delay=_Menu.SUBMENU_DELAY;if(delay<=0){fn();return;}
this.hysteresisTimer=setTimeout(()=>{this.hysteresisTimer=0;fn();},delay);}
cancelDelayedOperation(){if(this.hysteresisTimer){clearTimeout(this.hysteresisTimer);this.hysteresisTimer=0;}}};_Menu.SUBMENU_DELAY=120;var Menu=_Menu;function isDynamic(item){if(isDivider(item))return false;if(typeof item.label==="function"||typeof item.ariaLabel==="function"||typeof item.tooltip==="function")
return true;if((isCommand(item)||isSubmenu(item))&&(typeof item.enabled==="function"||typeof item.visible==="function"))
return true;if(isCommand(item)&&typeof item.checked==="function")return true;if(isSubmenu(item))return item.submenu.some(isDynamic);return false;}
var LongPress=class{};LongPress.DELAY=300;LongPress.MAX_DISTANCE=10;function onLongPress(triggerEvent){return new Promise((resolve,_reject)=>{const startPoint=eventLocation(triggerEvent);if(!startPoint)resolve(false);let lastPoint=startPoint;const timer=setTimeout(()=>{controller.abort();resolve(distance2(lastPoint,startPoint)<LongPress.MAX_DISTANCE);},LongPress.DELAY);const controller=new AbortController();const signal=controller.signal;for(const eventType of["pointermove","pointerup","pointercancel"]){window.addEventListener(eventType,(evt)=>{if(evt.type==="pointerup"||evt.type==="pointercancel"){clearTimeout(timer);controller.abort();resolve(false);}else if(evt.type==="pointermove"){const location=eventLocation(evt);if(location)lastPoint=location;}},{passive:true,signal});}});}
async function onContextMenu(event,target,menu){if(event.defaultPrevented)return false;if(event.type==="contextmenu"){const evt=event;if(menu.show({target,location:eventLocation(evt),modifiers:keyboardModifiersFromEvent(evt)})){event.preventDefault();event.stopPropagation();return true;}}
if(event.type==="keydown"){const evt=event;if(evt.code==="ContextMenu"||evt.code==="F10"&&evt.shiftKey){const bounds=target==null?void 0:target.getBoundingClientRect();if(acceptContextMenu(target)&&bounds&&menu.show({target,location:{x:Math.ceil(bounds.left+bounds.width/2),y:Math.ceil(bounds.top+bounds.height/2)},modifiers:keyboardModifiersFromEvent(evt)})){event.preventDefault();event.stopPropagation();return true;}}}
if(event.type==="pointerdown"&&event.pointerType!=="mouse"&&event.button===0){let eventTarget=event.target;while(eventTarget&&target!==eventTarget)
eventTarget=eventTarget.parentNode;if(!eventTarget)return false;if(!menu.visible)return false;const location=eventLocation(event);if(await onLongPress(event)){if(menu.state!=="closed")return false;if(!acceptContextMenu(target))return false;menu.show({target,location});return true;}}
return false;}
function acceptContextMenu(host){return host.dispatchEvent(new Event("contextmenu",{cancelable:true}));}
var ACCENTS={acute:714,grave:715,dot:729,ddot:168,dddot:8411,ddddot:8412,mathring:730,tilde:126,bar:713,breve:728,check:711,hat:94,vec:8407};defineFunction(Object.keys(ACCENTS),"{body:auto}",{createAtom:(options)=>new AccentAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0]),accentChar:ACCENTS[options.command.slice(1)]}))});defineFunction(["widehat","widecheck","widetilde"],"{body:auto}",{createAtom:(options)=>{const baseString=parseArgAsString(argAtoms(options.args[0]));return new AccentAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0]),svgAccent:options.command.slice(1)+(baseString.length>5?"4":["1","1","2","2","3","3"][baseString.length])}));}});defineFunction(["overarc","overparen","wideparen"],"{body:auto}",{createAtom:(options)=>{return new AccentAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0]),svgAccent:"overarc"}));}});defineFunction(["underarc","underparen"],"{body:auto}",{createAtom:(options)=>{return new OverunderAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0]),svgBelow:"underarc"}));}});defineFunction("utilde","{body:auto}",{createAtom:(options)=>{const body=argAtoms(options.args[0]);const baseString=parseArgAsString(body);const accent="widetilde"+(baseString.length>5?"4":["1","1","2","2","3","3"][baseString.length]);return new OverunderAtom(__spreadProps(__spreadValues({},options),{body,svgBelow:accent,boxType:atomsBoxType(body)}));}});defineFunction("^","{:string}",{createAtom:(options)=>{var _a3;return new Atom(__spreadProps(__spreadValues({},options),{type:"mord",isFunction:false,limits:"adjacent",value:options.args[0]?(_a3={a:"\xE2",e:"\xEA",i:"\xEE",o:"\xF4",u:"\xFB",A:"\xC2",E:"\xCA",I:"\xCE",O:"\xD4",U:"\xDB"}[options.args[0]])!=null?_a3:"^":"^"}));}});defineFunction("`","{:string}",{createAtom:(options)=>{var _a3;return new Atom(__spreadProps(__spreadValues({},options),{type:"mord",isFunction:false,limits:"adjacent",value:options.args[0]?(_a3={a:"\xE0",e:"\xE8",i:"\xEC",o:"\xF2",u:"\xF9",A:"\xC0",E:"\xC8",I:"\xCC",O:"\xD2",U:"\xD9"}[options.args[0]])!=null?_a3:"`":"`"}));}});defineFunction("'","{:string}",{createAtom:(options)=>{var _a3;return new Atom(__spreadProps(__spreadValues({},options),{type:"mord",isFunction:false,limits:"adjacent",value:options.args[0]?(_a3={a:"\xE1",e:"\xE9",i:"\xED",o:"\xF3",u:"\xFA",A:"\xC1",E:"\xC9",I:"\xCD",O:"\xD3",U:"\xDA"}[options.args[0]])!=null?_a3:"'":"'"}));}});defineFunction('"',"{:string}",{createAtom:(options)=>{var _a3,_b3;return new Atom(__spreadProps(__spreadValues({},options),{type:"mord",isFunction:false,limits:"adjacent",value:((_a3=options.args)==null?void 0:_a3[0])?(_b3={a:"\xE4",e:"\xEB",i:"\xEF",o:"\xF6",u:"\xFC",A:"\xC4",E:"\xCB",I:"\xCB",O:"\xD6",U:"\xDC"}[options.args[0]])!=null?_b3:'"'+options.args[0]:'"'}));}});defineFunction(".","{:string}",{createAtom:(options)=>{var _a3,_b3;return new Atom(__spreadProps(__spreadValues({},options),{type:"mord",isFunction:false,limits:"adjacent",value:((_a3=options.args)==null?void 0:_a3[0])?(_b3={a:"\u0227",e:"\u0117",i:"\u0307i",o:"\u022F",u:"\u0307u",A:"\u0226",E:"\u0116",I:"\u0130",O:"\u022E",U:"\u0307U"}[options.args[0]])!=null?_b3:"."+options.args[0]:"."}));}});defineFunction("=","{:string}",{createAtom:(options)=>{var _a3,_b3;return new Atom(__spreadProps(__spreadValues({},options),{type:"mord",isFunction:false,limits:"adjacent",value:((_a3=options.args)==null?void 0:_a3[0])?(_b3={a:"\u0101",e:"\u0113",i:"\u012B",o:"\u014D",u:"\u016B",A:"\u0100",E:"\u0112",I:"\u012A",O:"\u014C",U:"\u016A"}[options.args[0]])!=null?_b3:"="+options.args[0]:"="}));}});defineFunction("~","{:string}",{createAtom:(options)=>{var _a3;return new Atom(__spreadProps(__spreadValues({type:"mord"},options),{isFunction:false,limits:"adjacent",value:options.args[0]?(_a3={n:"\xF1",N:"\xD1",a:"\xE3",o:"\xF5",A:"\xC3",O:"\xD5"}[options.args[0]])!=null?_a3:"\xB4":"\xB4"}));}});defineFunction("c","{:string}",{createAtom:(options)=>{var _a3;return new Atom(__spreadProps(__spreadValues({},options),{type:"mord",isFunction:false,limits:"adjacent",value:options.args[0]?(_a3={c:"\xE7",C:"\xC7"}[options.args[0]])!=null?_a3:"":""}));}});defineFunction("enclose","{notation:string}[style:string]{body:auto}",{createAtom:(atomOptions)=>{var _a3,_b3;const args=atomOptions.args;const options={strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",backgroundcolor:"transparent",padding:"auto",shadow:"none",svgStrokeStyle:void 0,borderStyle:void 0,style:(_a3=atomOptions.style)!=null?_a3:{}};if(args[1]){const styles=args[1].split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(const s of styles){const shorthand=s.match(/\s*(\S+)\s+(\S+)\s+(.*)/);if(shorthand){options.strokeWidth=shorthand[1];options.strokeStyle=shorthand[2];options.strokeColor=shorthand[3];}else{const attribute=s.match(/\s*([a-z]*)\s*=\s*"(.*)"/);if(attribute){if(attribute[1]==="mathbackground")
options.backgroundcolor=attribute[2];else if(attribute[1]==="mathcolor")
options.strokeColor=attribute[2];else if(attribute[1]==="padding")options.padding=attribute[2];else if(attribute[1]==="shadow")options.shadow=attribute[2];}}}
if(options.strokeStyle==="dashed")options.svgStrokeStyle="5,5";else if(options.strokeStyle==="dotted")options.svgStrokeStyle="1,5";}
options.borderStyle=`${options.strokeWidth} ${options.strokeStyle} ${options.strokeColor}`;const notation={};((_b3=args[0])!=null?_b3:"").split(/[, ]/).filter((v)=>v.length>0).forEach((x)=>{notation[x.toLowerCase()]=true;});return new EncloseAtom(atomOptions.command,argAtoms(args[2]),notation,options);}});defineFunction("cancel","{body:auto}",{createAtom:(options)=>{var _a3;return new EncloseAtom(options.command,argAtoms(options.args[0]),{updiagonalstrike:true},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:(_a3=options.style)!=null?_a3:{}});}});defineFunction("bcancel","{body:auto}",{createAtom:(options)=>{var _a3;return new EncloseAtom(options.command,argAtoms(options.args[0]),{downdiagonalstrike:true},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:(_a3=options.style)!=null?_a3:{}});}});defineFunction("xcancel","{body:auto}",{createAtom:(options)=>{var _a3;return new EncloseAtom(options.command,argAtoms(options.args[0]),{updiagonalstrike:true,downdiagonalstrike:true},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:(_a3=options.style)!=null?_a3:{}});}});defineFunction(["overrightarrow","overleftarrow","Overrightarrow","overleftharpoon","overrightharpoon","overleftrightarrow","overlinesegment","overgroup"],"{:auto}",{createAtom:(options)=>{var _a3;return new OverunderAtom(__spreadProps(__spreadValues({},options),{body:argAtoms((_a3=options.args)==null?void 0:_a3[0]),skipBoundary:false,supsubPlacement:"over-under",paddedBody:true,boxType:"rel",svgAbove:options.command.slice(1)}));}});defineFunction("overbrace","{:auto}",{createAtom:(options)=>new OverunderAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0]),skipBoundary:false,supsubPlacement:"over-under",paddedBody:true,boxType:"ord",svgAbove:options.command.slice(1)}))});defineFunction(["underrightarrow","underleftarrow","underleftrightarrow","underlinesegment","undergroup"],"{:auto}",{createAtom:(options)=>new OverunderAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0]),skipBoundary:false,supsubPlacement:"over-under",paddedBody:true,boxType:"rel",svgBelow:options.command.slice(1)}))});defineFunction(["underbrace"],"{:auto}",{createAtom:(options)=>new OverunderAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0]),skipBoundary:false,supsubPlacement:"over-under",paddedBody:true,boxType:"ord",svgBelow:options.command.slice(1)}))});defineFunction(["xrightarrow","longrightarrow","xleftarrow","longleftarrow","xRightarrow","xLeftarrow","xleftharpoonup","xleftharpoondown","xrightharpoonup","xrightharpoondown","xlongequal","xtwoheadleftarrow","xtwoheadrightarrow","xleftrightarrow","longleftrightarrow","xLeftrightarrow","xrightleftharpoons","longrightleftharpoons","xleftrightharpoons","xhookleftarrow","xhookrightarrow","xmapsto","xtofrom","xleftrightarrows","longleftrightarrows","xRightleftharpoons","longRightleftharpoons","xLeftrightharpoons","longLeftrightharpoons"],"[:auto]{:auto}",{createAtom:(options)=>{var _a3,_b3,_c2,_d2,_e;return new OverunderAtom(__spreadProps(__spreadValues({},options),{svgBody:options.command.slice(1),above:((_b3=argAtoms((_a3=options.args)==null?void 0:_a3[1]))==null?void 0:_b3.length)===0?void 0:argAtoms((_c2=options.args)==null?void 0:_c2[1]),below:(_e=argAtoms((_d2=options.args)==null?void 0:_d2[0]))!=null?_e:null,skipBoundary:false,supsubPlacement:"over-under",paddedBody:true,paddedLabels:true,boxType:"rel"}));},serialize:(atom,options)=>atom.command+(!atom.hasEmptyBranch("below")?`[${atom.belowToLatex(options)}]`:"")+`{${atom.aboveToLatex(options)}}${atom.supsubToLatex(options)}`});defineFunction(["arccos","arcsin","arctan","arctg","arcctg","arg","ch","cos","cosh","cot","cotg","coth","ctg","cth","csc","cosec","deg","dim","exp","gcd","hom","inf","ker","lb","lg","ln","log","Pr","sec","sh","sin","sinh","sup","tan","tanh","tg","th","arcsec","arccsc","arsinh","arcosh","artanh","arcsech","arccsch"],"",{isFunction:true,ifMode:"math",createAtom:(options)=>new OperatorAtom(options.command.slice(1),__spreadProps(__spreadValues({},options),{limits:"adjacent",isFunction:true,variant:"main",variantStyle:"up"}))});defineFunction(["liminf","limsup"],"",{ifMode:"math",createAtom:(options)=>new OperatorAtom({"\\liminf":"lim inf","\\limsup":"lim sup"}[options.command],__spreadProps(__spreadValues({},options),{limits:"over-under",variant:"main"}))});defineFunction(["lim","mod"],"",{ifMode:"math",createAtom:(options)=>new OperatorAtom(options.command.slice(1),__spreadProps(__spreadValues({},options),{limits:"over-under",variant:"main"}))});defineFunction(["det","max","min"],"",{ifMode:"math",isFunction:true,createAtom:(options)=>new OperatorAtom(options.command.slice(1),__spreadProps(__spreadValues({},options),{limits:"over-under",isFunction:true,variant:"main"}))});defineFunction("ang","{:math}",{ifMode:"math",createAtom:(options)=>new Atom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0])})),serialize:(atom,options)=>`\\ang{${atom.bodyToLatex(options)}}`,render:(atom,context)=>{const box=atom.createBox(context);const caret=box.caret;box.caret=void 0;const deg=new Box("\xB0",{style:__spreadProps(__spreadValues({},atom.style),{variant:"normal",variantStyle:"up"})});return new Box([box,deg],{type:"inner",isSelected:atom.isSelected,caret});}});defineFunction("sqrt","[index:auto]{radicand:expression}",{ifMode:"math",createAtom:(options)=>new SurdAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[1]),index:options.args[0]?argAtoms(options.args[0]):void 0}))});defineFunction(["frac","dfrac","tfrac","binom","dbinom","tbinom"],"{:expression}{:expression}",{ifMode:"math",createAtom:(options)=>{const genfracOptions=__spreadValues({},options);const command=options.command;const args=options.args;switch(command){case"\\dfrac":case"\\frac":case"\\tfrac":genfracOptions.hasBarLine=true;break;case"\\atopfrac":genfracOptions.hasBarLine=false;break;case"\\dbinom":case"\\binom":case"\\tbinom":genfracOptions.hasBarLine=false;genfracOptions.leftDelim="(";genfracOptions.rightDelim=")";break;case"\\cfrac":genfracOptions.hasBarLine=true;genfracOptions.continuousFraction=true;break;default:}
switch(command){case"\\dfrac":case"\\dbinom":genfracOptions.mathstyleName="displaystyle";break;case"\\tfrac":case"\\tbinom":genfracOptions.mathstyleName="textstyle";break;default:}
return new GenfracAtom(!args[0]?[new PlaceholderAtom()]:argAtoms(args[0]),!args[1]?[new PlaceholderAtom()]:argAtoms(args[1]),genfracOptions);},serialize:(atom,options)=>{const numer=atom.aboveToLatex(options);const denom=atom.belowToLatex(options);if(/^[0-9]$/.test(numer)&&/^[0-9]$/.test(denom))
return`${atom.command}${numer}${denom}`;return latexCommand(atom.command,numer,denom);}});defineFunction(["cfrac"],"[:string]{:expression}{:expression}",{ifMode:"math",createAtom:(options)=>{const genfracOptions=__spreadValues({},options);const args=options.args;genfracOptions.hasBarLine=true;genfracOptions.continuousFraction=true;if(args[0]==="r")genfracOptions.align="right";if(args[0]==="l")genfracOptions.align="left";return new GenfracAtom(!args[1]?[new PlaceholderAtom()]:argAtoms(args[1]),!args[2]?[new PlaceholderAtom()]:argAtoms(args[2]),genfracOptions);},serialize:(atom,options)=>{const numer=atom.aboveToLatex(options);const denom=atom.belowToLatex(options);return latexCommand(atom.command,numer,denom);}});defineFunction(["brace","brack"],"",{infix:true,createAtom:(options)=>new GenfracAtom(argAtoms(options.args[0]),argAtoms(options.args[1]),__spreadProps(__spreadValues({},options),{hasBarLine:false,leftDelim:options.command==="\\brace"?"\\lbrace":"\\lbrack",rightDelim:options.command==="\\brace"?"\\rbrace":"\\rbrack"})),serialize:(atom,options)=>joinLatex([atom.aboveToLatex(options),atom.command,atom.belowToLatex(options)])});defineFunction(["over","atop","choose"],"",{infix:true,createAtom:(options)=>{let leftDelim=void 0;let rightDelim=void 0;const args=options.args;if(options.command==="\\choose"){leftDelim="(";rightDelim=")";}
return new GenfracAtom(argAtoms(args[0]),argAtoms(args[1]),__spreadProps(__spreadValues({},options),{hasBarLine:options.command==="\\over",leftDelim,rightDelim}));},serialize:(atom,options)=>joinLatex([atom.aboveToLatex(options),atom.command,atom.belowToLatex(options)])});defineFunction(["overwithdelims","atopwithdelims"],"{numer:auto}{denom:auto}{left-delim:delim}{right-delim:delim}",{infix:true,createAtom:(options)=>{var _a3,_b3;const args=options.args;return new GenfracAtom(argAtoms(args[0]),argAtoms(args[1]),__spreadProps(__spreadValues({},options),{leftDelim:(_a3=args[2])!=null?_a3:".",rightDelim:(_b3=args[3])!=null?_b3:".",hasBarLine:false}));},serialize:(atom,options)=>`${atom.aboveToLatex(options)} ${atom.command}${atom.leftDelim}${atom.rightDelim}${atom.belowToLatex(options)}`});defineFunction("pdiff","{numerator}{denominator}",{ifMode:"math",createAtom:(options)=>new GenfracAtom(argAtoms(options.args[0]),argAtoms(options.args[1]),__spreadProps(__spreadValues({},options),{hasBarLine:true,numerPrefix:"\u2202",denomPrefix:"\u2202"})),serialize:(atom,options)=>joinLatex([atom.aboveToLatex(options),atom.command,atom.belowToLatex(options)])});defineFunction(["sum","prod","bigcup","bigcap","coprod","bigvee","bigwedge","biguplus","bigotimes","bigoplus","bigodot","bigsqcup","intop"],"",{ifMode:"math",createAtom:(options)=>new ExtensibleSymbolAtom({coprod:"\u2210",bigvee:"\u22C1",bigwedge:"\u22C0",biguplus:"\u2A04",bigcap:"\u22C2",bigcup:"\u22C3",intop:"\u222B",prod:"\u220F",sum:"\u2211",bigotimes:"\u2A02",bigoplus:"\u2A01",bigodot:"\u2A00",bigsqcup:"\u2A06",smallint:"\u222B"}[options.command.slice(1)],__spreadProps(__spreadValues({},options),{limits:"auto",variant:"main"}))});defineFunction("smallint","",{ifMode:"math",createAtom:(options)=>new OperatorAtom("\u222B",__spreadProps(__spreadValues({},options),{limits:"adjacent",variant:"main"}))});var EXTENSIBLE_SYMBOLS={int:"\u222B",iint:"\u222C",iiint:"\u222D",oint:"\u222E",oiint:"\u222F",oiiint:"\u2230",intclockwise:"\u2231",varointclockwise:"\u2232",ointctrclockwise:"\u2233",intctrclockwise:"\u2A11",sqcup:"\u2294",sqcap:"\u2293",uplus:"\u228E",wr:"\u2240",amalg:"\u2A3F",Cap:"\u22D2",Cup:"\u22D3",doublecap:"\u22D2",doublecup:"\u22D3"};defineFunction(Object.keys(EXTENSIBLE_SYMBOLS),"",{ifMode:"math",createAtom:(options)=>{const command=options.command;const symbol=EXTENSIBLE_SYMBOLS[command.slice(1)];return new ExtensibleSymbolAtom(symbol,__spreadProps(__spreadValues({},options),{limits:"adjacent",variant:{"\u22D2":"ams","\u22D3":"ams"}[symbol]}));}});defineFunction(["Re","Im"],"",{ifMode:"math",createAtom:(options)=>new OperatorAtom({"\\Re":"\u211C","\\Im":"\u2111"}[options.command],__spreadProps(__spreadValues({},options),{limits:"adjacent",isFunction:true,variant:"fraktur"}))});defineFunction("middle","{:delim}",{ifMode:"math",createAtom:(options)=>{var _a3;return new MiddleDelimAtom(__spreadProps(__spreadValues({},options),{delim:(_a3=options.args[0])!=null?_a3:"|",size:1}));}});defineFunction("the","{:value}",{createAtom:(options)=>new Atom(__spreadProps(__spreadValues({},options),{captureSelection:true,verbatimLatex:null})),render:(atom,parent)=>{var _a3;const ctx=new Context({parent},atom.style);let classes="";if(atom.isSelected)classes+=" ML__selected";const arg=ctx.evaluate(atom.args[0]);return new Box(((_a3=serializeLatexValue(arg))!=null?_a3:"").split("").map((x)=>new Box(x,{type:"ord",classes,mode:atom.mode,isSelected:atom.isSelected,style:__spreadValues({variant:"main"},atom.style)})),{type:"lift",style:atom.style,caret:atom.caret,isSelected:atom.isSelected,classes}).wrap(ctx);},serialize:(atom)=>{var _a3;return`\\the${(_a3 = serializeLatexValue(atom.args[0])) != null ? _a3 : "\\relax"}`;}});defineFunction("mathtip","{:auto}{:math}",{createAtom:(options)=>new TooltipAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0]),tooltip:argAtoms(options.args[1]),content:"math"})),serialize:(atom,options)=>options.skipStyles?atom.bodyToLatex(options):`\\mathtip{${atom.bodyToLatex(options)}}{${Atom.serialize(
      [atom.tooltip],
      __spreadProps(__spreadValues({}, options), {
        defaultMode: "math"
      })
    )}}`});defineFunction("texttip","{:auto}{:text}",{createAtom:(options)=>new TooltipAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0]),tooltip:argAtoms(options.args[1]),content:"text"})),serialize:(atom,options)=>options.skipStyles?atom.bodyToLatex(options):`\\texttip{${atom.bodyToLatex(options)}}{${Atom.serialize(
      [atom.tooltip],
      __spreadProps(__spreadValues({}, options), {
        defaultMode: "text"
      })
    )}}`});defineFunction("error","{:math}",{createAtom:(options)=>new Atom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0])})),serialize:(atom,options)=>`\\error{${atom.bodyToLatex(options)}}`,render:(atom,context)=>atom.createBox(context,{classes:"ML__error"})});defineFunction("ensuremath","{:math}",{createAtom:(options)=>new Atom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0])})),serialize:(atom,options)=>`${atom.command}{${atom.bodyToLatex(__spreadProps(__spreadValues({}, options), { defaultMode: "math" }))}}`});defineFunction("color","{:value}",{applyStyle:(style,_name,args,context)=>{var _a3,_b3;return __spreadProps(__spreadValues({},style),{verbatimColor:(_a3=serializeLatexValue(args[0]))!=null?_a3:void 0,color:context.toColor((_b3=args[0])!=null?_b3:{string:"red"})});}});defineFunction("textcolor","{:value}{content:auto*}",{applyStyle:(style,_name,args,context)=>{var _a3,_b3;return __spreadProps(__spreadValues({},style),{verbatimColor:(_a3=serializeLatexValue(args[0]))!=null?_a3:void 0,color:context.toColor((_b3=args[0])!=null?_b3:{string:"red"})});}});defineFunction("boxed","{content:math}",{createAtom:(options)=>new BoxAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0]),framecolor:{string:"black"}}))});defineFunction("colorbox","{:value}{:text*}",{applyStyle:(style,_name,args,context)=>{var _a3,_b3;return __spreadProps(__spreadValues({},style),{verbatimBackgroundColor:(_a3=serializeLatexValue(args[0]))!=null?_a3:void 0,backgroundColor:context.toBackgroundColor((_b3=args[0])!=null?_b3:{string:"yellow"})});}});defineFunction("fcolorbox","{frame-color:value}{background-color:value}{content:text}",{applyMode:"text",createAtom:(options)=>{var _a3,_b3;return new BoxAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[2]),framecolor:(_a3=options.args[0])!=null?_a3:{string:"blue"},backgroundcolor:(_b3=options.args[1])!=null?_b3:{string:"yellow"}}));},serialize:(atom,options)=>{var _a3,_b3;return options.skipStyles?atom.bodyToLatex(__spreadProps(__spreadValues({},options),{defaultMode:"text"})):latexCommand(atom.command,(_a3=serializeLatexValue(atom.framecolor))!=null?_a3:"",(_b3=serializeLatexValue(atom.backgroundcolor))!=null?_b3:"",atom.bodyToLatex(__spreadProps(__spreadValues({},options),{defaultMode:"text"})));}});defineFunction("bbox","[:bbox]{body:auto}",{createAtom:(options)=>{var _a3;const arg=options.args[0];const body=argAtoms(options.args[1]);if(!arg)return new BoxAtom(__spreadProps(__spreadValues({},options),{body}));return new BoxAtom(__spreadProps(__spreadValues({},options),{body,padding:arg.padding,border:arg.border,backgroundcolor:(_a3=arg.backgroundcolor)!=null?_a3:void 0}));},serialize:(atom,options)=>{var _a3,_b3;if(options.skipStyles)return atom.bodyToLatex(options);let result=atom.command;if(Number.isFinite(atom.padding)||atom.border!==void 0||atom.backgroundcolor!==void 0){const bboxParameters=[];if(atom.padding)
bboxParameters.push((_a3=serializeLatexValue(atom.padding))!=null?_a3:"");if(atom.border)bboxParameters.push(`border: ${atom.border}`);if(atom.backgroundcolor)
bboxParameters.push((_b3=serializeLatexValue(atom.backgroundcolor))!=null?_b3:"");result+=`[${bboxParameters.join(",")}]`;}
return latexCommand(result,atom.bodyToLatex(options));}});defineFunction(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"],"{:rest}",{createAtom:(options)=>new Atom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0])})),render:(atom,context)=>{const ctx=new Context({parent:context,mathstyle:atom.command.slice(1)},atom.style);const box=Atom.createBox(ctx,atom.body,{type:"lift"});if(atom.caret)box.caret=atom.caret;return atom.bind(context,box);},serialize:(atom,options)=>options.skipStyles?atom.bodyToLatex(options):`{${joinLatex([atom.command, atom.bodyToLatex(options)])}}`});defineFunction(["tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"],"",{applyStyle:(style,name)=>{return __spreadProps(__spreadValues({},style),{fontSize:{"\\tiny":1,"\\scriptsize":2,"\\footnotesize":3,"\\small":4,"\\normalsize":5,"\\large":6,"\\Large":7,"\\LARGE":8,"\\huge":9,"\\Huge":10}[name]});}});defineFunction("fontseries","{:string}",{ifMode:"text",applyStyle:(style,_name,args)=>{var _a3;return __spreadProps(__spreadValues({},style),{fontSeries:(_a3=args[0])!=null?_a3:"auto"});}});defineFunction("fontshape","{:string}",{ifMode:"text",applyStyle:(style,_name,args)=>{var _a3;return __spreadProps(__spreadValues({},style),{fontShape:(_a3=args[0])!=null?_a3:"auto"});}});defineFunction("fontfamily","{:string}",{ifMode:"text",applyStyle:(style,_name,args)=>{var _a3;return __spreadProps(__spreadValues({},style),{fontFamily:(_a3=args[0])!=null?_a3:"roman"});}});defineFunction("selectfont","",{ifMode:"text",applyStyle:(style)=>style});defineFunction("bf","{:rest*}",{applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontSeries:"b",fontShape:"n",fontFamily:"roman"})});defineFunction(["boldsymbol","bm","bold"],"{:math*}",{applyMode:"math",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{variantStyle:"bold"})});defineFunction("bfseries","{:rest*}",{applyMode:"text",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontSeries:"b"})});defineFunction("mdseries","{:rest*}",{applyMode:"text",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontSeries:"m"})});defineFunction("upshape","{:rest*}",{applyMode:"text",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontShape:"n"})});defineFunction("slshape","{:rest*}",{applyMode:"text",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontShape:"sl"})});defineFunction("scshape","{:rest*}",{applyMode:"text",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontShape:"sc"})});defineFunction("textbf","{:text*}",{applyMode:"text",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontSeries:"b"})});defineFunction("textmd","{:text*}",{applyMode:"text",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontSeries:"m"})});defineFunction("textup","{:text*}",{applyMode:"text",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontShape:"n"})});defineFunction("textnormal","{:text*}",{applyMode:"text",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontShape:"n",fontSeries:"m"})});defineFunction("textsl","{:text*}",{applyMode:"text",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontShape:"sl"})});defineFunction("textit","{:text*}",{applyMode:"text",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontShape:"it"})});defineFunction("textsc","{:text*}",{applyMode:"text",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontShape:"sc"})});defineFunction("textrm","{:text*}",{applyMode:"text",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontFamily:"roman"})});defineFunction("textsf","{:text*}",{applyMode:"text",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontFamily:"sans-serif"})});defineFunction("texttt","{:text*}",{applyMode:"text",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontFamily:"monospace"})});defineFunction("mathbf","{:math*}",{applyMode:"math",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{variant:"normal",variantStyle:"bold"})});defineFunction("mathit","{:math*}",{applyMode:"math",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{variant:"main",variantStyle:"italic"})});defineFunction("mathnormal","{:math*}",{applyMode:"math",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{variant:"normal",variantStyle:"italic"})});defineFunction("mathbfit","{:math*}",{applyMode:"math",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{variant:"main",variantStyle:"bolditalic"})});defineFunction("mathrm","{:math*}",{applyMode:"math",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{variant:"normal",variantStyle:"up"})});defineFunction("mathsf","{:math*}",{applyMode:"math",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{variant:"sans-serif",variantStyle:"up"})});defineFunction("mathtt","{:math*}",{applyMode:"math",applyStyle:(style)=>__spreadProps(__spreadValues({},style),{variant:"monospace",variantStyle:"up"})});defineFunction("it","{:rest*}",{applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontSeries:"m",fontShape:"it",fontFamily:"roman",variantStyle:"italic"})});defineFunction("rmfamily","{:rest*}",{applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontFamily:"roman"})});defineFunction("sffamily","{:rest*}",{applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontFamily:"sans-serif"})});defineFunction("ttfamily","{:rest*}",{applyStyle:(style)=>__spreadProps(__spreadValues({},style),{fontFamily:"monospace"})});defineFunction(["Bbb","mathbb"],"{:math*}",{applyStyle:(style)=>__spreadProps(__spreadValues({},style),{variant:"double-struck",variantStyle:removeItalic(style.variantStyle)})});defineFunction(["frak","mathfrak"],"{:math*}",{applyStyle:(style)=>__spreadProps(__spreadValues({},style),{variant:"fraktur",variantStyle:removeItalic(style.variantStyle)})});defineFunction("mathcal","{:math*}",{applyStyle:(style)=>__spreadProps(__spreadValues({},style),{variant:"calligraphic",variantStyle:removeItalic(style.variantStyle)})});defineFunction("mathscr","{:math*}",{applyStyle:(style)=>__spreadProps(__spreadValues({},style),{variant:"script",variantStyle:removeItalic(style.variantStyle)})});defineFunction("mbox","{:text}",{ifMode:"math",createAtom:(options)=>new Atom(__spreadProps(__spreadValues({},options),{type:"mord",body:argAtoms(options.args[0]),mode:"math"})),serialize:(atom,options)=>latexCommand("\\mbox",atom.bodyToLatex(__spreadProps(__spreadValues({},options),{defaultMode:"text"})))});defineFunction("text","{:text}",{ifMode:"math",applyMode:"text"});defineFunction(["class","htmlClass"],"{name:string}{content:auto}",{createAtom:(options)=>new Atom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[1])})),serialize:(atom,options)=>{if(!atom.args[0]||options.skipStyles)return atom.bodyToLatex(options);return`${atom.command}{${atom.args[0]}}{${atom.bodyToLatex(
        options
      )}}`;},render:(atom,context)=>{var _a3;return atom.createBox(context,{classes:(_a3=atom.args[0])!=null?_a3:""});}});defineFunction(["cssId","htmlId"],"{id:string}{content:auto}",{createAtom:(options)=>new Atom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[1])})),serialize:(atom,options)=>{var _a3;if(!((_a3=atom.args)==null?void 0:_a3[0])||options.skipStyles)return atom.bodyToLatex(options);return`${atom.command}{${atom.args[0]}}{${atom.bodyToLatex(
        options
      )}}`;},render:(atom,context)=>{var _a3;const box=atom.createBox(context);box.cssId=(_a3=atom.args[0])!=null?_a3:"";return box;}});defineFunction("htmlData","{data:string}{content:auto}",{createAtom:(options)=>new Atom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[1])})),serialize:(atom,options)=>{var _a3;if(!((_a3=atom.args)==null?void 0:_a3[0])||options.skipStyles)return atom.bodyToLatex(options);return`\\htmlData{${atom.args[0]}}{${atom.bodyToLatex(
        options
      )}}`;},render:(atom,context)=>{var _a3;const box=atom.createBox(context);box.htmlData=(_a3=atom.args[0])!=null?_a3:"";return box;}});defineFunction(["style","htmlStyle"],"{data:string}{content:auto}",{createAtom:(options)=>new Atom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[1])})),serialize:(atom,options)=>{var _a3;if(!((_a3=atom.args)==null?void 0:_a3[0])||options.skipStyles)return atom.bodyToLatex(options);return`${atom.command}{${atom.args[0]}}{${atom.bodyToLatex(
        options
      )}}`;},render:(atom,context)=>{var _a3;const box=atom.createBox(context);box.htmlStyle=(_a3=atom.args[0])!=null?_a3:"";return box;}});defineFunction("href","{url:string}{content:auto}",{createAtom:(options)=>new Atom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[1])})),render:(atom,context)=>{var _a3;const box=atom.createBox(context);const href=(_a3=atom.args[0])!=null?_a3:"";if(href)box.htmlData=`href=${href}`;return box;}});defineFunction("em","{:rest}",{createAtom:(options)=>new Atom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0])})),serialize:(atom,options)=>options.skipStyles?atom.bodyToLatex(options):`{\\em ${atom.bodyToLatex(options)}}`,render:(atom,context)=>atom.createBox(context,{classes:"ML__emph",boxType:"lift"})});defineFunction("emph","{:auto}",{createAtom:(options)=>new Atom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[1])})),serialize:(atom,options)=>options.skipStyles?atom.bodyToLatex(options):`\\emph{${atom.bodyToLatex(options)}}`,render:(atom,context)=>atom.createBox(context,{classes:"ML__emph",boxType:"lift"})});var DELIMITER_SIZES={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}};defineFunction(["bigl","Bigl","biggl","Biggl","bigr","Bigr","biggr","Biggr","bigm","Bigm","biggm","Biggm","big","Big","bigg","Bigg"],"{:delim}",{createAtom:(options)=>{var _a3;return new SizedDelimAtom(__spreadProps(__spreadValues({},options),{delim:(_a3=options.args[0])!=null?_a3:".",size:DELIMITER_SIZES[options.command].size,delimType:DELIMITER_SIZES[options.command].mclass}));}});defineFunction(["hspace","hspace*"],"{width:value}",{createAtom:(options)=>{var _a3;return new SpacingAtom(__spreadProps(__spreadValues({},options),{width:(_a3=options.args[0])!=null?_a3:{dimension:0}}));}});defineFunction(["mkern","kern","mskip","hskip","mspace"],"{width:value}",{createAtom:(options)=>{var _a3;return new SpacingAtom(__spreadProps(__spreadValues({},options),{width:(_a3=options.args[0])!=null?_a3:{dimension:0}}));}});defineFunction("mathchoice","{:math}{:math}{:math}{:math}",{createAtom:(options)=>new Atom(options),render:(atom,context)=>{let i=0;const d=context.mathstyle.id;if(d===T||d===Tc)i=1;if(d===S||d===Sc)i=2;if(d===SS||d===SSc)i=3;const body=argAtoms(atom.args[i]);return Atom.createBox(context,body);},serialize:(atom,options)=>`\\mathchoice{${Atom.serialize(
      atom.args[0],
      options
    )}}{${Atom.serialize(atom.args[1], options)}}{${Atom.serialize(
      atom.args[2],
      options
    )}}{${Atom.serialize(atom.args[3], options)}}`});defineFunction("mathop","{:auto}",{createAtom:(options)=>new Atom(__spreadProps(__spreadValues({},options),{type:"mop",body:argAtoms(options.args[0]),limits:"over-under",isFunction:true,captureSelection:true})),render:(atom,context)=>{var _a3;let base=Atom.createBox(context,atom.body);if(atom.superscript||atom.subscript){const limits=(_a3=atom.subsupPlacement)!=null?_a3:"auto";base=limits==="over-under"||limits==="auto"&&context.isDisplayStyle?atom.attachLimits(context,{base}):atom.attachSupsub(context,{base});}
if(atom.caret)base.caret=atom.caret;return new Box(atom.bind(context,base),{type:"op",isSelected:atom.isSelected,classes:"ML__op-group"});},serialize:(atom,options)=>{const result=[latexCommand(atom.command,atom.bodyToLatex(options))];if(atom.explicitSubsupPlacement){if(atom.subsupPlacement==="over-under")result.push("\\limits");if(atom.subsupPlacement==="adjacent")result.push("\\nolimits");if(atom.subsupPlacement==="auto")result.push("\\displaylimits");}
result.push(atom.supsubToLatex(options));return joinLatex(result);}});defineFunction(["mathbin","mathrel","mathopen","mathclose","mathpunct","mathord","mathinner"],"{:auto}",{createAtom:(options)=>new Atom(__spreadProps(__spreadValues({},options),{type:{"\\mathbin":"mbin","\\mathrel":"mrel","\\mathopen":"mopen","\\mathclose":"mclose","\\mathpunct":"mpunct","\\mathord":"mord","\\mathinner":"minner"}[options.command],body:argAtoms(options.args[0])}))});defineFunction(["operatorname","operatorname*"],"{operator:math}",{createAtom:(options)=>{const body=argAtoms(options.args[0]).map((x)=>{var _a3;if(x.type!=="first"){x.type="mord";x.value=(_a3={"\u2217":"*","\u2212":"-"}[x.value])!=null?_a3:x.value;x.isFunction=false;if(!x.style.variant&&!x.style.variantStyle){x.style.variant="main";x.style.variantStyle="up";}}
return x;});return new Atom(__spreadProps(__spreadValues({},options),{type:"mop",body,isFunction:true,limits:options.command==="\\operatorname"?"adjacent":"over-under"}));},render:(atom,context)=>{var _a3;let base=Atom.createBox(context,atom.body);if(atom.superscript||atom.subscript){const limits=(_a3=atom.subsupPlacement)!=null?_a3:"auto";base=limits==="over-under"||limits==="auto"&&context.isDisplayStyle?atom.attachLimits(context,{base}):atom.attachSupsub(context,{base});}
if(atom.caret)base.caret=atom.caret;return new Box(atom.bind(context,base),{type:"op",isSelected:atom.isSelected,classes:"ML__op-group"});},serialize:(atom,options)=>{const result=[latexCommand(atom.command,atom.bodyToLatex(options))];if(atom.explicitSubsupPlacement){if(atom.subsupPlacement==="over-under")result.push("\\limits");if(atom.subsupPlacement==="adjacent")result.push("\\nolimits");if(atom.subsupPlacement==="auto")result.push("\\displaylimits");}
result.push(atom.supsubToLatex(options));return joinLatex(result);}});defineFunction(["char","unicode"],"{charcode:value}",{createAtom:(options)=>new Atom(__spreadProps(__spreadValues({},options),{type:options.mode==="text"?"text":"mord"})),serialize:(atom)=>{var _a3;return`${atom.command}${serializeLatexValue(
        (_a3 = atom.args[0]) != null ? _a3 : { number: 10067, base: "hexadecimal" }
      )}`;},render:(atom,context)=>{let value=context.evaluate(atom.args[0]);if(!value||!("number"in value))
value={number:10067,base:"hexadecimal"};atom.value=String.fromCodePoint(value.number);return atom.createBox(context);}});defineFunction("rule","[raise:value]{width:value}{thickness:value}",{createAtom:(options)=>new Atom(options),render:(atom,context)=>{var _a3,_b3,_c2;const ctx=new Context({parent:context,mathstyle:"textstyle"},atom.style);const shift=ctx.toEm((_a3=atom.args[0])!=null?_a3:{dimension:0});const width=ctx.toEm((_b3=atom.args[1])!=null?_b3:{dimension:10});const height=ctx.toEm((_c2=atom.args[2])!=null?_c2:{dimension:10});const result=new Box(null,{classes:"ML__rule",type:"ord"});result.width=width;result.height=height+shift;result.depth=-shift;result.setStyle("border-right-width",width,"em");result.setStyle("border-top-width",height,"em");result.setStyle("border-color",atom.style.color);result.setStyle("vertical-align",shift,"em");if(atom.isSelected)result.setStyle("opacity","50%");atom.bind(ctx,result);if(atom.caret)result.caret=atom.caret;return result.wrap(context);},serialize:(atom)=>`\\rule${atom.args[0] ? `[${serializeLatexValue(atom.args[0])}]` : ""}{${serializeLatexValue(atom.args[1])}}{${serializeLatexValue(
      atom.args[2]
    )}}`});defineFunction(["overline","underline"],"{:auto}",{createAtom:(options)=>new Atom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0])})),render:(atom,parentContext)=>{const position=atom.command.substring(1);const context=new Context({parent:parentContext,mathstyle:"cramp"},atom.style);const inner=Atom.createBox(context,atom.body);if(!inner)return null;const ruleThickness=context.metrics.defaultRuleThickness/context.scalingFactor;const line=new Box(null,{classes:position+"-line"});line.height=ruleThickness;line.maxFontSize=ruleThickness*1.125*context.scalingFactor;let stack;if(position==="overline"){stack=new VBox({shift:0,children:[{box:inner},3*ruleThickness,{box:line},ruleThickness]});}else{stack=new VBox({top:inner.height,children:[ruleThickness,{box:line},3*ruleThickness,{box:inner}]});}
if(atom.caret)stack.caret=atom.caret;return new Box(stack,{classes:position,type:"ignore"});}});defineFunction("overset","{:auto}{base:auto}",{createAtom:(options)=>{const body=argAtoms(options.args[1]);return new OverunderAtom(__spreadProps(__spreadValues({},options),{above:argAtoms(options.args[0]),body,skipBoundary:false,boxType:atomsBoxType(body)}));},serialize:(atom,options)=>latexCommand(atom.command,atom.aboveToLatex(options),atom.bodyToLatex(options))});defineFunction("underset","{:auto}{base:auto}",{createAtom:(options)=>{const body=argAtoms(options.args[1]);return new OverunderAtom(__spreadProps(__spreadValues({},options),{below:argAtoms(options.args[0]),body,skipBoundary:false,boxType:atomsBoxType(body)}));},serialize:(atom,options)=>latexCommand(atom.command,atom.belowToLatex(options),atom.bodyToLatex(options))});defineFunction("overunderset","{above:auto}{below:auto}{base:auto}",{createAtom:(options)=>{const body=argAtoms(options.args[2]);return new OverunderAtom(__spreadProps(__spreadValues({},options),{above:argAtoms(options.args[0]),below:argAtoms(options.args[1]),body,skipBoundary:false,boxType:atomsBoxType(body)}));},serialize:(atom,options)=>latexCommand(atom.command,atom.belowToLatex(options),atom.bodyToLatex(options))});defineFunction(["stackrel","stackbin"],"[below:auto]{above:auto}{base:auto}",{createAtom:(options)=>new OverunderAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[2]),above:argAtoms(options.args[1]),below:argAtoms(options.args[0]),skipBoundary:false,boxType:options.command==="\\stackrel"?"rel":"bin"})),serialize:(atom,options)=>latexCommand(atom.command,atom.aboveToLatex(options),atom.bodyToLatex(options))});defineFunction("smash","[:string]{:auto}",{createAtom:(options)=>{var _a3,_b3,_c2,_d2;return new PhantomAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[1]),smashHeight:(_b3=(_a3=options.args[0])==null?void 0:_a3.includes("t"))!=null?_b3:true,smashDepth:(_d2=(_c2=options.args[0])==null?void 0:_c2.includes("b"))!=null?_d2:true}));}});defineFunction(["vphantom"],"{:auto}",{createAtom:(options)=>new PhantomAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0]),isInvisible:true,smashWidth:true}))});defineFunction(["hphantom"],"{:auto}",{createAtom:(options)=>new PhantomAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0]),isInvisible:true,smashHeight:true,smashDepth:true}))});defineFunction(["phantom"],"{:auto}",{createAtom:(options)=>new PhantomAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0]),isInvisible:true}))});defineFunction("not","{:math}",{createAtom:(options)=>{const body=argAtoms(options.args[0]);if(body.length===0)
return new Atom(__spreadProps(__spreadValues({},options),{type:"mrel",value:"\uE020"}));return new Atom(__spreadProps(__spreadValues({},options),{body:[new OverlapAtom(__spreadProps(__spreadValues({},options),{body:"\uE020",align:"right"})),...body],captureSelection:true}));},serialize:(atom,options)=>{const arg=atom.args[0];const isGroup=arg&&typeof arg==="object"&&"group"in arg;if(atom.value!=="\uE020"){return isGroup?`\\not{${Atom.serialize(arg.group, options)}}`:`\\not${Atom.serialize(arg, options)}`;}
return isGroup?`\\not{}`:`\\not`;},render:(atom,context)=>{if(atom.value)return atom.createBox(context);const isGroup=atom.args[0]&&typeof atom.args[0]==="object"&&"group"in atom.args[0];const type=isGroup?"ord":atomsBoxType(argAtoms(atom.args[0]));const box=Atom.createBox(context,atom.body,{type});if(atom.caret)box.caret=atom.caret;return atom.bind(context,box);}});defineFunction(["ne","neq"],"",{createAtom:(options)=>new Atom(__spreadProps(__spreadValues({},options),{type:"mrel",body:[new OverlapAtom(__spreadProps(__spreadValues({},options),{body:"\uE020",align:"right",boxType:"rel"})),new Atom(__spreadProps(__spreadValues({},options),{value:"="}))],captureSelection:true})),serialize:(atom)=>atom.command});defineFunction("rlap","{:auto}",{createAtom:(options)=>new OverlapAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0]),align:"right"}))});defineFunction("llap","{:auto}",{createAtom:(options)=>new OverlapAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0]),align:"left"}))});defineFunction("mathrlap","{:math}",{createAtom:(options)=>new OverlapAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0]),align:"right"}))});defineFunction("mathllap","{:math}",{createAtom:(options)=>new OverlapAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[0]),align:"left"}))});defineFunction("raisebox","{:value}{:text}",{createAtom:(options)=>{var _a3;return new BoxAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[1]),padding:{dimension:0},offset:(_a3=options.args[0])!=null?_a3:{dimension:0}}));},serialize:(atom,options)=>{var _a3;return latexCommand("\\raisebox",(_a3=serializeLatexValue(atom.offset))!=null?_a3:"0pt",atom.bodyToLatex(options));}});defineFunction("raise","{:value}{:auto}",{createAtom:(options)=>{var _a3;return new BoxAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[1]),padding:{dimension:0},offset:(_a3=options.args[0])!=null?_a3:{dimension:0}}));},serialize:(atom,options)=>{var _a3;return latexCommand("\\raise",(_a3=serializeLatexValue(atom.offset))!=null?_a3:"0pt",atom.bodyToLatex(options));}});defineFunction("lower","{:value}{:auto}",{createAtom:(options)=>{var _a3;return new BoxAtom(__spreadProps(__spreadValues({},options),{body:argAtoms(options.args[1]),padding:{dimension:0},offset:(_a3=multiplyLatexValue(options.args[0],-1))!=null?_a3:{dimension:0}}));},serialize:(atom,options)=>{var _a3,_b3;return latexCommand("\\lower",(_b3=serializeLatexValue(multiplyLatexValue((_a3=atom.offset)!=null?_a3:{dimension:0},-1)))!=null?_b3:"0pt",atom.bodyToLatex(options));}});defineSymbols("0123456789/@.?!");defineSymbolRange(65,90);defineSymbolRange(97,122);defineSymbols([["\\forall",8704],["\\exists",8707],["\\nexists",8708,"mord","ams"],["\\mid",8739,"mrel"],["\\top",8868],["\\bot",8869]]);defineSymbols([["\\#",35],["\\&",38],["\\parallelogram",9649],["\\spadesuit",9824],["\\heartsuit",9825],["\\diamondsuit",9826],["\\clubsuit",9827],["\\flat",9837],["\\natural",9838],["\\sharp",9839]]);defineSymbols([["\\backslash",92],["\\nabla",8711],["\\partial",8706],["\\ell",8467],["\\hbar",8463],["\\pounds",163],["\\euro",8364]]);defineSymbols([["\\rightarrow",8594],["\\to",8594],["\\leftarrow",8592],["\\gets",8592],["\\Rightarrow",8658],["\\Leftarrow",8656],["\\longrightarrow",10230],["\\longleftarrow",10229],["\\Longrightarrow",10233],["\\implies",10233],["\\Longleftarrow",10232],["\\impliedby",10232],["\\longleftrightarrow",10231],["\\biconditional",10231],["\\Longleftrightarrow",10234],["\\mapsto",8614],["\\longmapsto",10236],["\\uparrow",8593],["\\downarrow",8595],["\\Uparrow",8657],["\\Downarrow",8659],["\\updownarrow",8597],["\\Updownarrow",8661],["\\hookrightarrow",8618],["\\hookleftarrow",8617],["\\rightharpoonup",8640],["\\leftharpoonup",8636],["\\rightharpoondown",8641],["\\leftharpoondown",8637],["\\searrow",8600],["\\nearrow",8599],["\\swarrow",8601],["\\nwarrow",8598],["\\originalof",8886],["\\laplace",8886],["\\imageof",8887],["\\Laplace",8887]],"mrel");defineSymbols([["\\mapsfrom",8612,"mrel"],["\\Mapsfrom",10502,"mrel"],["\\MapsTo",10503,"mrel"],["\\Yup",8516,"mord"],["\\lightning",8623,"mrel"],["\\leftarrowtriangle",8701,"mrel"],["\\rightarrowtriangle",8702,"mrel"],["\\leftrightarrowtriangle",8703,"mrel"],["\\boxdot",8865,"mbin"],["\\bigtriangleup",9651,"mbin"],["\\bigtriangledown",9661,"mbin"],["\\boxbar",9707,"mbin"],["\\Lbag",10181,"mopen"],["\\Rbag",10182,"mclose"],["\\llbracket",10214,"mopen"],["\\rrbracket",10215,"mclose"],["\\longmapsfrom",10235,"mrel"],["\\Longmapsfrom",10237,"mrel"],["\\Longmapsto",10238,"mrel"],["\\boxslash",10692,"mbin"],["\\boxbslash",10693,"mbin"],["\\boxast",10694,"mbin"],["\\boxcircle",10695,"mbin"],["\\boxbox",10696,"mbin"],["\\fatsemi",10783,"mop"],["\\leftslice",10918,"mrel"],["\\rightslice",10919,"mrel"],["\\interleave",10996,"mbin"],["\\biginterleave",11004,"mop"],["\\sslash",11005,"mbin"],["\\talloblong",11006,"mbin"]]);defineSymbols([["\\lbrace",123,"mopen"],["\\rbrace",125,"mclose"],["\\lparen",40,"mopen"],["\\rparen",41,"mclose"],["\\langle",10216,"mopen"],["\\rangle",10217,"mclose"],["\\lfloor",8970,"mopen"],["\\rfloor",8971,"mclose"],["\\lceil",8968,"mopen"],["\\rceil",8969,"mclose"],["\\vert",8739],["\\lvert",8739,"mopen"],["\\rvert",8739,"mclose"],["\\|",8741],["\\Vert",8741],["\\mVert",8741],["\\lVert",8741,"mopen"],["\\rVert",8741,"mclose"],["\\lbrack",91,"mopen"],["\\rbrack",93,"mclose"],["\\{",123,"mopen"],["\\}",125,"mclose"],["(",40,"mopen"],[")",41,"mclose"],["[",91,"mopen"],["]",93,"mclose"],["\\ulcorner",9484,"mopen","ams"],["\\urcorner",9488,"mclose","ams"],["\\llcorner",9492,"mopen","ams"],["\\lrcorner",9496,"mclose","ams"],["\\lgroup",10222,"mopen"],["\\rgroup",10223,"mclose"],["\\lmoustache",9136,"mopen"],["\\rmoustache",9137,"mclose"]]);defineSymbols([["\\dashrightarrow",8674],["\\dashleftarrow",8672],["\\Rrightarrow",8667],["\\Lleftarrow",8666],["\\leftrightarrows",8646],["\\rightleftarrows",8644],["\\curvearrowright",8631],["\\curvearrowleft",8630],["\\rightrightarrows",8649],["\\leftleftarrows",8647],["\\upuparrows",8648],["\\downdownarrows",8650],["\\vartriangle",9651],["\\triangleq",8796],["\\vartriangleleft",8882],["\\trianglelefteq",8884],["\\ntriangleleft",8938],["\\ntrianglelefteq",8940],["\\vartriangleright",8883],["\\trianglerighteq",8885],["\\ntriangleright",8939],["\\ntrianglerighteq",8941],["\\blacktriangleleft",9664],["\\blacktriangleright",9654],["\\leftarrowtail",8610],["\\rightarrowtail",8611],["\\looparrowright",8620],["\\looparrowleft",8619],["\\twoheadleftarrow",8606],["\\twoheadrightarrow",8608],["\\twoheadrightarrowtail",10518],["\\rightleftharpoons",8652],["\\leftrightharpoons",8651],["\\Rsh",8625],["\\Lsh",8624],["\\circlearrowright",8635],["\\circlearrowleft",8634],["\\restriction",8638],["\\upharpoonright",8638],["\\upharpoonleft",8639],["\\downharpoonright",8642],["\\downharpoonleft",8643],["\\rightsquigarrow",8669],["\\leadsto",8669],["\\leftrightsquigarrow",8621],["\\multimap",8888],["\\nleftarrow",8602],["\\nrightarrow",8603],["\\nRightarrow",8655],["\\nLeftarrow",8653],["\\nleftrightarrow",8622],["\\nLeftrightarrow",8654],["\\nvrightarrow",8696],["\\nvtwoheadrightarrow",10496],["\\nvrightarrowtail",10516],["\\nvtwoheadrightarrowtail",10519],["\\shortparallel",8741],["\\nless",8814],["\\nleqslant",57360],["\\lneq",10887],["\\lneqq",8808],["\\nleqq",57361],["\\lvertneqq",57356],["\\lnsim",8934],["\\lnapprox",10889],["\\nprec",8832],["\\npreceq",8928],["\\precnsim",8936],["\\precnapprox",10937],["\\nsim",8769],["\\nshortmid",57350],["\\nmid",8740],["\\nvdash",8876],["\\nvDash",8877],["\\ngtr",8815],["\\ngeqslant",57359],["\\ngeqq",57358],["\\gneq",10888],["\\gneqq",8809],["\\gvertneqq",57357],["\\gnsim",8935],["\\gnapprox",10890],["\\nsucc",8833],["\\nsucceq",8929],["\\succnsim",8937],["\\succnapprox",10938],["\\ncong",8774],["\\nshortparallel",57351],["\\nparallel",8742],["\\nVDash",8879],["\\nsupseteqq",57368],["\\supsetneq",8843],["\\varsupsetneq",57371],["\\supsetneqq",10956],["\\varsupsetneqq",57369],["\\nVdash",8878],["\\precneqq",10933],["\\succneqq",10934],["\\nsubseteqq",57366],["\\leqslant",10877],["\\geqslant",10878],["\\gtrsim",8819],["\\approxeq",8778],["\\thickapprox",8776],["\\lessapprox",10885],["\\gtrapprox",10886],["\\precapprox",10935],["\\succapprox",10936],["\\thicksim",8764],["\\succsim",8831],["\\precsim",8830],["\\backsim",8765],["\\eqsim",8770],["\\backsimeq",8909],["\\lesssim",8818],["\\nleq",8816],["\\ngeq",8817],["\\smallsmile",8995],["\\smallfrown",8994],["\\leqq",8806],["\\eqslantless",10901],["\\lll",8920],["\\lessgtr",8822],["\\lesseqgtr",8922],["\\lesseqqgtr",10891],["\\risingdotseq",8787],["\\fallingdotseq",8786],["\\subseteqq",10949],["\\Subset",8912],["\\sqsubset",8847],["\\preccurlyeq",8828],["\\curlyeqprec",8926],["\\vDash",8872],["\\Vvdash",8874],["\\bumpeq",8783],["\\Bumpeq",8782],["\\geqq",8807],["\\eqslantgtr",10902],["\\ggg",8921],["\\gtrless",8823],["\\gtreqless",8923],["\\gtreqqless",10892],["\\supseteqq",10950],["\\Supset",8913],["\\sqsupset",8848],["\\succcurlyeq",8829],["\\curlyeqsucc",8927],["\\Vdash",8873],["\\shortmid",8739],["\\between",8812],["\\pitchfork",8916],["\\varpropto",8733],["\\backepsilon",8717],["\\llless",8920],["\\gggtr",8921],["\\doteqdot",8785],["\\Doteq",8785],["\\eqcirc",8790],["\\circeq",8791],["\\therefore",8756],["\\because",8757]],"mrel","ams");defineSymbols([["+",43],["-",8722],["\u2212",8722],["\\pm",177],["\\mp",8723],["*",8727],["\\times",215],["\\div",247],["\\divides",8739],["\\cdot",8901],["\\cap",8745],["\\cup",8746],["\\setminus",8726],["\\land",8743],["\\wedge",8743],["\\lor",8744],["\\vee",8744],["\\circ",8728],["\\bigcirc",9711],["\\bullet",8729],["\\oplus",8853],["\\ominus",8854],["\\otimes",8855],["\\odot",8857],["\\oslash",8856],["\\bigtriangleup",9651],["\\bigtriangledown",9661],["\\triangleleft",9667],["\\triangleright",9657],["\\And",38],["\\dagger",8224],["\\dag",8224],["\\ddag",8225],["\\ddagger",8225],["\\ast",8727],["\\star",8902],["\\bigstar",9733],["\\diamond",8900]],"mbin");defineSymbols([["\\lhd",8882],["\\rhd",8883],["\\lessdot",8918],["\\gtrdot",8919],["\\ltimes",8905],["\\rtimes",8906],["\\leftthreetimes",8907],["\\rightthreetimes",8908],["\\intercal",8890],["\\dotplus",8724],["\\doublebarwedge",10846],["\\divideontimes",8903],["\\centerdot",8901],["\\smallsetminus",8726],["\\barwedge",8892],["\\veebar",8891],["\\nor",8891],["\\curlywedge",8911],["\\curlyvee",8910],["\\boxminus",8863],["\\boxplus",8862],["\\boxtimes",8864],["\\boxdot",8865],["\\circleddash",8861],["\\circledast",8859],["\\circledcirc",8858],["\\unlhd",8884],["\\unrhd",8885]],"mbin","ams");defineSymbols([["\\surd",8730],["\\S",167],["\\infty",8734],["\\prime",8242],["\\doubleprime",8243],["\\angle",8736],["`",8216],["\\$",36],["\\%",37],["\\_",95],["\\alpha",945],["\\beta",946],["\\gamma",947],["\\delta",948],["\\epsilon",1013],["\\varepsilon",949],["\\zeta",950],["\\eta",951],["\\theta",952],["\\vartheta",977],["\\iota",953],["\\kappa",954],["\\varkappa",1008,"mord","ams"],["\\lambda",955],["\\mu",956],["\\nu",957],["\\xi",958],["\\omicron",111],["\\pi",960],["\\varpi",982],["\\rho",961],["\\varrho",1009],["\\sigma",963],["\\varsigma",962],["\\tau",964],["\\phi",981],["\\varphi",966],["\\upsilon",965],["\\chi",967],["\\psi",968],["\\omega",969],["\\Gamma",915],["\\Delta",916],["\\Theta",920],["\\Lambda",923],["\\Xi",926],["\\Pi",928],["\\Sigma",931],["\\Upsilon",933],["\\Phi",934],["\\Psi",936],["\\Omega",937],["\\digamma",989,"mord","ams"],["\\varkappa",1008,"mord","ams"],["\\coppa",985,"mord","ams"],["\\koppa",985,"mord","ams"],["\\Coppa",984,"mord","ams"],["\\Koppa",984,"mord","ams"],["\\sampi",993,"mord","ams"],["\\Sampi",992,"mord","ams"],["\\emptyset",8709]]);defineSymbols([["=",61],["<",60],["\\lt",60],[">",62],["\\gt",62],["\\le",8804],["\\leq",8804],["\\ge",8805],["\\geq",8805],["\\ll",8810],["\\gg",8811],["\\coloneq",8788],["\\coloneqq",8788],["\\colonequals",8788],["\\measeq",8797],["\\eqdef",8798],["\\questeq",8799],[":",58],["\\cong",8773],["\\equiv",8801],["\\prec",8826],["\\preceq",10927],["\\succ",8827],["\\succeq",10928],["\\perp",10178],["\\propto",8733],["\\Colon",8759],["\\smile",8995],["\\frown",8994],["\\sim",8764],["\\doteq",8784],["\\bowtie",8904],["\\Join",8904],["\\asymp",8781],["\\sqsubseteq",8849],["\\sqsupseteq",8850],["\\approx",8776],["\\~",126],["\\leftrightarrow",8596],["\\Leftrightarrow",8660],["\\models",8872],["\\vdash",8866],["\\dashv",8867],["\\roundimplies",10608],["\\in",8712],["\\notin",8713],["\\ni",8715],["\\owns",8715],["\\subset",8834],["\\supset",8835],["\\subseteq",8838],["\\supseteq",8839],["\\differencedelta",8710],["\\mvert",8739],["\\parallel",8741],["\\simeq",8771]],"mrel");defineSymbols([["\\lnot",172],["\\neg",172],["\\triangle",9651],["\\subsetneq",8842],["\\varsubsetneq",57370],["\\subsetneqq",10955],["\\varsubsetneqq",57367],["\\nsubset",8836],["\\nsupset",8837],["\\nsubseteq",8840],["\\nsupseteq",8841]],"mrel","ams");defineSymbols([["\\wp",8472],["\\aleph",8501]]);defineSymbols([["\\blacktriangle",9650],["\\hslash",8463],["\\Finv",8498],["\\Game",8513],["\\eth",240],["\\mho",8487],["\\Bbbk",107],["\\yen",165],["\\square",9633],["\\Box",9633],["\\blacksquare",9632],["\\circledS",9416],["\\circledR",174],["\\triangledown",9661],["\\blacktriangledown",9660],["\\checkmark",10003],["\\diagup",9585],["\\measuredangle",8737],["\\sphericalangle",8738],["\\backprime",8245],["\\backdoubleprime",8246],["\\Diamond",9674],["\\lozenge",9674],["\\blacklozenge",10731],["\\varnothing",8709],["\\complement",8705],["\\maltese",10016],["\\beth",8502],["\\daleth",8504],["\\gimel",8503]],"mord","ams");defineSymbols([["\\ ",160],["~",160]],"space");defineFunction(["!",",",":",";",">","enskip","enspace","quad","qquad"],"",{createAtom:(options)=>new SpacingAtom(options)});defineFunction("space","",{createAtom:(options)=>new SpacingAtom(options)});defineSymbols([["\\colon",58],["\\cdotp",8901],["\\vdots",8942,"mord"],["\\ldotp",46],[",",44],[";",59]],"mpunct");defineSymbols([["\\cdots",8943],["\\ddots",8945],["\\ldots",8230],["\\mathellipsis",8230]],"minner");defineSymbols([["\\/",47],["|",8739,"mord"],["\\imath",305],["\\jmath",567],["\\degree",176],["'",8242],['"',8221]]);var APPLY_FUNCTION="<mo>&#x2061;</mo>";var INVISIBLE_TIMES="<mo>&#8290;</mo>";function xmlEscape(string){return string.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;");}
function makeID(id,options){if(!id||!options.generateID)return"";return` extid="${id}"`;}
function scanIdentifier(stream,final,options){var _a3,_b3,_c2,_d2,_e,_f,_g,_h;let result=false;final=final!=null?final:stream.atoms.length;let mathML="";let body="";let atom=stream.atoms[stream.index];const variant=(_a3=atom.style)==null?void 0:_a3.variant;const variantStyle=(_b3=atom.style)==null?void 0:_b3.variantStyle;let variantProp="";if(atom.value&&(variant||variantStyle)){const unicodeVariant=(_c2=mathVariantToUnicode(atom.value,variant,variantStyle))!=null?_c2:atom.value;if(unicodeVariant!==atom.value){stream.index+=1;mathML=`<mi${makeID(atom.id, options)}>${unicodeVariant}</mi>`;if(!parseSubsup(mathML,stream,options)){stream.mathML+=mathML;stream.lastType="mi";}
return true;}
variantProp=(_d2={"upnormal":"normal","boldnormal":"bold","italicmain":"italic","bolditalicmain":"bold-italic","updouble-struck":"double-struck","double-struck":"double-struck","boldfraktur":"bold-fraktur","calligraphic":"script","upcalligraphic":"script","script":"script","boldscript":"bold-script","boldcalligraphic":"bold-script","fraktur":"fraktur","upsans-serif":"sans-serif","boldsans-serif":"bold-sans-serif","italicsans-serif":"sans-serif-italic","bolditalicsans-serif":"sans-serif-bold-italic","monospace":"monospace"}[(variantStyle!=null?variantStyle:"")+(variant!=null?variant:"")])!=null?_d2:"";if(variantProp)variantProp=` mathvariant="${variantProp}"`;}
const SPECIAL_IDENTIFIERS={"\\exponentialE":"&#x02147;","\\imaginaryI":"&#x2148;","\\differentialD":"&#x2146;","\\capitalDifferentialD":"&#x2145;","\\alpha":"&#x03b1;","\\pi":"&#x03c0;","\\infty":"&#x221e;","\\forall":"&#x2200;","\\nexists":"&#x2204;","\\exists":"&#x2203;","\\hbar":"\u210F","\\cdotp":"\u22C5","\\ldots":"\u2026","\\cdots":"\u22EF","\\ddots":"\u22F1","\\vdots":"\u22EE","\\ldotp":"."};if(atom.command==="!"){stream.index+=1;mathML="<mo>!</mo>";if(!parseSubsup(mathML,stream,options)){stream.mathML+=mathML;stream.lastType="mo";}
return true;}
if(SPECIAL_IDENTIFIERS[atom.command]){stream.index+=1;let mathML2=`<mi${makeID(atom.id, options)}${variantProp}>${SPECIAL_IDENTIFIERS[atom.command]}</mi>`;if(stream.lastType==="mi"||stream.lastType==="mn"||stream.lastType==="mtext"||stream.lastType==="fence")
mathML2=INVISIBLE_TIMES+mathML2;if(!parseSubsup(mathML2,stream,options)){stream.mathML+=mathML2;stream.lastType="mi";}
return true;}
if(atom.command==="\\operatorname"){body=toString2(atom.body);stream.index+=1;}else{if(variant||variantStyle){while(stream.index<final&&(atom.type==="mord"||atom.type==="macro")&&!atom.isDigit()&&variant===((_f=(_e=atom.style)==null?void 0:_e.variant)!=null?_f:"")&&variantStyle===((_h=(_g=atom.style)==null?void 0:_g.variantStyle)!=null?_h:"")){body+=toString2([atom]);stream.index+=1;atom=stream.atoms[stream.index];}}else if((atom.type==="mord"||atom.type==="macro")&&!atom.isDigit()){body+=toString2([atom]);stream.index+=1;}}
if(body.length>0){result=true;mathML=`<mi${variantProp}>${body}</mi>`;const lastType=stream.lastType;if(mathML.endsWith(">f</mi>")||mathML.endsWith(">g</mi>")){mathML+=APPLY_FUNCTION;stream.lastType="applyfunction";}else stream.lastType=/^<mo>(.*)<\/mo>$/.test(mathML)?"mo":"mi";if(!parseSubsup(mathML,stream,options)){if(lastType==="mi"||lastType==="mn"||lastType==="mtext"||lastType==="fence")
mathML=INVISIBLE_TIMES+mathML;stream.mathML+=mathML;}}
return result;}
function isSuperscriptAtom(stream){return stream.index<stream.atoms.length&&stream.atoms[stream.index].superscript&&stream.atoms[stream.index].type==="subsup";}
function indexOfSuperscriptInNumber(stream){let result=-1;let i=stream.index;let done=false;let found=false;while(i<stream.atoms.length&&!done&&!found){const atom=stream.atoms[i];done=!atom.isDigit();found=!done&&atom.superscript!==void 0;i++;}
if(found)result=i-1;return result;}
function parseSubsup(base,stream,options){var _a3;let atom=stream.atoms[stream.index-1];if(!atom)return false;if(!atom.superscript&&!atom.subscript){if(((_a3=stream.atoms[stream.index])==null?void 0:_a3.type)==="subsup"){atom=stream.atoms[stream.index];stream.index+=1;}else return false;}
const lastType=stream.lastType;stream.lastType="";const superscript=toMathML(atom.superscript,options);stream.lastType="";const subscript=toMathML(atom.subscript,options);stream.lastType=lastType;if(!superscript&&!subscript)return false;let mathML="";if(superscript&&subscript)
mathML=`<msubsup>${base}${subscript}${superscript}</msubsup>`;else if(superscript)mathML=`<msup>${base}${superscript}</msup>`;else if(subscript)mathML=`<msub>${base}${subscript}</msub>`;stream.mathML+=mathML;stream.lastType="";return true;}
function scanText(stream,final,options){final=final!=null?final:stream.atoms.length;const initial=stream.index;let mathML="";let superscript=indexOfSuperscriptInNumber(stream);if(superscript>=0&&superscript<final)final=superscript;while(stream.index<final&&stream.atoms[stream.index].mode==="text"){mathML+=stream.atoms[stream.index].value?stream.atoms[stream.index].value:" ";stream.index+=1;}
if(mathML.length>0){mathML=`<mtext ${makeID(
        stream.atoms[initial].id,
        options
      )}>${mathML}</mtext>`;if(superscript<0&&isSuperscriptAtom(stream)){superscript=stream.index;stream.index+=1;}
if(!parseSubsup(mathML,stream,options)){stream.mathML+=mathML;stream.lastType="mtext";}
return true;}
return false;}
function scanNumber(stream,final,options){final=final!=null?final:stream.atoms.length;const initial=stream.index;let mathML="";let superscript=indexOfSuperscriptInNumber(stream);if(superscript>=0&&superscript<final)final=superscript;while(stream.index<final&&stream.atoms[stream.index].isDigit()){mathML+=stream.atoms[stream.index].asDigit();stream.index+=1;}
if(mathML.length<=0)return false;mathML="<mn"+makeID(stream.atoms[initial].id,options)+">"+mathML+"</mn>";if(superscript<0&&isSuperscriptAtom(stream)){superscript=stream.index;stream.index+=1;}
if(!parseSubsup(mathML,stream,options)){stream.mathML+=mathML;stream.lastType="mn";}
return true;}
function scanFence(stream,final,options){let result=false;final=final!=null?final:stream.atoms.length;let mathML="";let lastType="";if(stream.index<final&&stream.atoms[stream.index].type==="mopen"){let found=false;let depth=0;const openIndex=stream.index;let closeIndex=-1;let index=openIndex+1;while(index<final&&!found){if(stream.atoms[index].type==="mopen")depth+=1;else if(stream.atoms[index].type==="mclose")depth-=1;if(depth===-1){found=true;closeIndex=index;}
index+=1;}
if(found){mathML="<mrow>";mathML+=toMo(stream.atoms[openIndex],options);mathML+=toMathML(stream.atoms,options,openIndex+1,closeIndex);mathML+=toMo(stream.atoms[closeIndex],options);mathML+="</mrow>";stream.index=closeIndex+1;if(stream.lastType==="mi"||stream.lastType==="mn"||stream.lastType==="mfrac"||stream.lastType==="fence")
stream.mathML+=INVISIBLE_TIMES;if(parseSubsup(mathML,stream,options)){result=true;stream.lastType="";mathML="";}
lastType="fence";}}
if(mathML.length>0){result=true;stream.mathML+=mathML;stream.lastType=lastType;}
return result;}
function scanOperator(stream,final,options){let result=false;final=final!=null?final:stream.atoms.length;let mathML="";let lastType="";const atom=stream.atoms[stream.index];if(!atom)return false;const SPECIAL_OPERATORS={"\\ne":"&ne;","\\neq":"&ne;","\\pm":"&#177;","\\times":"&#215;","\\colon":":","\\vert":"|","\\Vert":"\u2225","\\mid":"\u2223","\\{":"{","\\}":"}","\\lbrace":"{","\\rbrace":"}","\\lbrack":"[","\\rbrack":"]","\\lparen":"(","\\rparen":")","\\langle":"\u27E8","\\rangle":"\u27E9","\\lfloor":"\u230A","\\rfloor":"\u230B","\\lceil":"\u2308","\\rceil":"\u2309"};if(SPECIAL_OPERATORS[atom.command]){stream.index+=1;const mathML2=`<mo${makeID(atom.id, options)}>${SPECIAL_OPERATORS[atom.command]}</mo>`;if(!parseSubsup(mathML2,stream,options)){stream.mathML+=mathML2;stream.lastType="mo";}
return true;}
if(stream.index<final&&(atom.type==="mbin"||atom.type==="mrel")){mathML+=atomToMathML(stream.atoms[stream.index],options);stream.index+=1;lastType="mo";}else if(stream.index<final&&(atom.type==="mop"||atom.type==="operator"||atom.type==="extensible-symbol")){if(atom.subsupPlacement==="over-under"&&(atom.superscript||atom.subscript)){const op=toMo(atom,options);if(atom.superscript&&atom.subscript){mathML+="<munderover>"+op;mathML+=toMathML(atom.subscript,options);mathML+=toMathML(atom.superscript,options);mathML+="</munderover>";}else if(atom.superscript){mathML+="<mover>"+op;mathML+=toMathML(atom.superscript,options);mathML+="</mover>";}else if(atom.subscript){mathML+="<munder>"+op;mathML+=toMathML(atom.subscript,options);mathML+="</munder>";}
stream.mathML+=mathML;stream.lastType="mo";stream.index+=1;return true;}
{const atom2=stream.atoms[stream.index];const isUnit=atom2.value==="\\operatorname";const op=isUnit?'<mi class="MathML-Unit"'+makeID(atom2.id,options)+">"+toString2(atom2.value)+"</mi>":toMo(atom2,options);mathML+=op;if(!isUnit&&!/^<mo>(.*)<\/mo>$/.test(op)){mathML+=APPLY_FUNCTION;lastType="applyfunction";}else lastType=isUnit?"mi":"mo";}
if((stream.lastType==="mi"||stream.lastType==="mn")&&!/^<mo>(.*)<\/mo>$/.test(mathML))
mathML=INVISIBLE_TIMES+mathML;stream.index+=1;}
if(mathML.length>0){result=true;if(!parseSubsup(mathML,stream,options)){stream.mathML+=mathML;stream.lastType=lastType;}}
return result;}
function toMathML(input,options,initial,final){options!=null?options:options={};const result={atoms:[],index:initial!=null?initial:0,mathML:"",lastType:""};if(typeof input==="number"||typeof input==="boolean")
result.mathML=input.toString();else if(typeof input==="string")result.mathML=input;else if(input instanceof Atom)result.mathML=atomToMathML(input,options);else if(Array.isArray(input)){result.atoms=input;let count=0;final=final?final:input?input.length:0;while(result.index<final){if(scanText(result,final,options)||scanNumber(result,final,options)||scanIdentifier(result,final,options)||scanOperator(result,final,options)||scanFence(result,final,options))
count+=1;else if(result.index<final){let mathML=atomToMathML(result.atoms[result.index],options);if(result.lastType==="mn"&&mathML.length>0&&result.atoms[result.index].type==="genfrac"){mathML="<mo>&#x2064;</mo>"+mathML;}
if(result.atoms[result.index].type==="genfrac")
result.lastType="mfrac";else result.lastType="";result.index+=1;if(parseSubsup(mathML,result,options))count+=1;else{if(mathML.length>0){result.mathML+=mathML;count+=1;}}}}
if(count>1)result.mathML="<mrow>"+result.mathML+"</mrow>";}
return result.mathML;}
function toMo(atom,options){let result="";const body=toString2(atom.value);if(body)result="<mo"+makeID(atom.id,options)+">"+body+"</mo>";return result;}
function toString2(atoms){if(!atoms)return"";if(typeof atoms==="string")return xmlEscape(atoms);if(!Array.isArray(atoms)&&typeof atoms.body==="string")
return xmlEscape(atoms.body);let result="";for(const atom of atoms)
if(typeof atom.value==="string")result+=atom.value;return xmlEscape(result);}
function atomToMathML(atom,options){var _a3,_b3,_c2,_d2,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u,_v;if(atom.mode==="text")
return`<mi${makeID(atom.id, options)}>${atom.value}</mi>`;const SVG_CODE_POINTS={widehat:"^",widecheck:"\u02C7",widetilde:"~",utilde:"~",overleftarrow:"\u2190",underleftarrow:"\u2190",xleftarrow:"\u2190",longleftarrow:"\u2190",overrightarrow:"\u2192",underrightarrow:"\u2192",xrightarrow:"\u2192",longrightarrow:"\u2192",underbrace:"\u23DF",overbrace:"\u23DE",overgroup:"\u23E0",undergroup:"\u23E1",overleftrightarrow:"\u2194",underleftrightarrow:"\u2194",xleftrightarrow:"\u2194",Overrightarrow:"\u21D2",xRightarrow:"\u21D2",overleftharpoon:"\u21BC",xleftharpoonup:"\u21BC",overrightharpoon:"\u21C0",xrightharpoonup:"\u21C0",xLeftarrow:"\u21D0",xLeftrightarrow:"\u21D4",xhookleftarrow:"\u21A9",xhookrightarrow:"\u21AA",xmapsto:"\u21A6",xrightharpoondown:"\u21C1",xleftharpoondown:"\u21BD",xrightleftharpoons:"\u21CC",longrightleftharpoons:"\u21CC",xleftrightharpoons:"\u21CB",xtwoheadleftarrow:"\u219E",xtwoheadrightarrow:"\u21A0",xlongequal:"=",xtofrom:"\u21C4",xleftrightarrows:"\u21C4",xRightleftharpoons:"\u21CC",longRightleftharpoons:"\u21CC",xLeftrightharpoons:"\u21CB",longLeftrightharpoons:"\u21CB"};const SPACING={"\\!":-3/18,"\\ ":6/18,"\\,":3/18,"\\:":4/18,"\\>":4/18,"\\;":5/18,"\\enspace":0.5,"\\quad":1,"\\qquad":2,"\\enskip":0.5};let result="";let sep="";let col;let row;let i;let underscript;let overscript;let body;const{command}=atom;if(atom.command==="\\error"){return`<merror${makeID(atom.id, options)}>${toMathML(
        atom.body,
        options
      )}</merror>`;}
const SPECIAL_DELIMS={"\\vert":"|","\\Vert":"\u2225","\\mid":"\u2223","\\lbrack":"[","\\rbrack":"]","\\{":"{","\\}":"}","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"\u27E8","\\rangle":"\u27E9","\\lfloor":"\u230A","\\rfloor":"\u230B","\\lceil":"\u2308","\\rceil":"\u2309"};const SPECIAL_ACCENTS={"\\vec":"&#x20d7;","\\acute":"&#x00b4;","\\grave":"&#x0060;","\\dot":"&#x02d9;","\\ddot":"&#x00a8;","\\tilde":"&#x007e;","\\bar":"&#x00af;","\\breve":"&#x02d8;","\\check":"&#x02c7;","\\hat":"&#x005e;"};switch(atom.type){case"first":break;case"group":case"root":result=toMathML(atom.body,options);break;case"array":const arrayAtom=atom;if(arrayAtom.leftDelim&&arrayAtom.leftDelim!=="."||arrayAtom.rightDelim&&arrayAtom.rightDelim!=="."){result+="<mrow>";if(arrayAtom.leftDelim&&arrayAtom.leftDelim!=="."){result+="<mo>"+(SPECIAL_DELIMS[arrayAtom.leftDelim]||arrayAtom.leftDelim)+"</mo>";}}
result+="<mtable";if(arrayAtom.colFormat){result+=' columnalign="';for(i=0;i<arrayAtom.colFormat.length;i++){const format=arrayAtom.colFormat[i];if("align"in format){result+={l:"left",c:"center",r:"right"}[format.align]+" ";}}
result+='"';}
result+=">";for(row=0;row<arrayAtom.rows.length;row++){result+="<mtr>";for(col=0;col<arrayAtom.rows[row].length;col++){result+="<mtd>"+toMathML(arrayAtom.rows[row][col],options)+"</mtd>";}
result+="</mtr>";}
result+="</mtable>";if(arrayAtom.leftDelim&&arrayAtom.leftDelim!=="."||arrayAtom.rightDelim&&arrayAtom.rightDelim!=="."){if(arrayAtom.rightDelim&&arrayAtom.rightDelim!=="."){result+="<mo>"+(SPECIAL_DELIMS[arrayAtom.leftDelim]||arrayAtom.rightDelim)+"</mo>";}
result+="</mrow>";}
break;case"genfrac":const genfracAtom=atom;if(genfracAtom.leftDelim||genfracAtom.rightDelim)result+="<mrow>";if(genfracAtom.leftDelim&&genfracAtom.leftDelim!=="."){result+="<mo"+makeID(atom.id,options)+">"+(SPECIAL_DELIMS[genfracAtom.leftDelim]||genfracAtom.leftDelim)+"</mo>";}
if(genfracAtom.hasBarLine){result+="<mfrac>";result+=toMathML(atom.above,options)||"<mi>&nbsp;</mi>";result+=toMathML(atom.below,options)||"<mi>&nbsp;</mi>";result+="</mfrac>";}else{result+="<mtable"+makeID(atom.id,options)+">";result+="<mtr>"+toMathML(atom.above,options)+"</mtr>";result+="<mtr>"+toMathML(atom.below,options)+"</mtr>";result+="</mtable>";}
if(genfracAtom.rightDelim&&genfracAtom.rightDelim!=="."){result+="<mo"+makeID(atom.id,options)+">"+(SPECIAL_DELIMS[genfracAtom.rightDelim]||genfracAtom.rightDelim)+"</mo>";}
if(genfracAtom.leftDelim||genfracAtom.rightDelim)result+="</mrow>";break;case"surd":if(!atom.hasEmptyBranch("above")){result+="<mroot"+makeID(atom.id,options)+">";result+=toMathML(atom.body,options);result+=toMathML(atom.above,options);result+="</mroot>";}else{result+="<msqrt"+makeID(atom.id,options)+">";result+=toMathML(atom.body,options);result+="</msqrt>";}
break;case"leftright":const leftrightAtom=atom;const lDelim=leftrightAtom.leftDelim;result="<mrow>";if(lDelim&&lDelim!=="."){result+=`<mo${makeID(atom.id, options)}>${(_a3 = SPECIAL_DELIMS[lDelim]) != null ? _a3 : lDelim}</mo>`;}
if(atom.body)result+=toMathML(atom.body,options);const rDelim=leftrightAtom.matchingRightDelim();if(rDelim&&rDelim!=="."){result+=`<mo${makeID(atom.id, options)}>${(_b3 = SPECIAL_DELIMS[rDelim]) != null ? _b3 : rDelim}</mo>`;}
result+="</mrow>";break;case"sizeddelim":case"delim":result+=`<mo${makeID(atom.id, options)}>${SPECIAL_DELIMS[atom.value] || atom.value}</mo>`;break;case"accent":const accentAtom=atom;result+='<mover accent="true"'+makeID(atom.id,options)+">";result+=toMathML(atom.body,options);result+="<mo>"+(SPECIAL_ACCENTS[command]||accentAtom.accent)+"</mo>";result+="</mover>";break;case"line":case"overlap":break;case"overunder":const overunderAtom=atom;overscript=atom.above;underscript=atom.below;if((overunderAtom.svgAbove||overscript)&&(overunderAtom.svgBelow||underscript))
body=atom.body;else if(overscript&&overscript.length>0){body=atom.body;if((_d2=(_c2=atom.body)==null?void 0:_c2[0])==null?void 0:_d2.below){underscript=atom.body[0].below;body=atom.body[0].body;}else if(((_f=(_e=atom.body)==null?void 0:_e[0])==null?void 0:_f.type)==="first"&&((_h=(_g=atom.body)==null?void 0:_g[1])==null?void 0:_h.below)){underscript=atom.body[1].below;body=atom.body[1].body;}}else if(underscript&&underscript.length>0){body=atom.body;if((_j=(_i=atom.body)==null?void 0:_i[0])==null?void 0:_j.above){overscript=atom.body[0].above;body=atom.body[0].body;}else if(((_l=(_k=atom.body)==null?void 0:_k[0])==null?void 0:_l.type)==="first"&&((_n=(_m=atom.body)==null?void 0:_m[1])==null?void 0:_n.above)){overscript=atom.body[1].above;body=atom.body[1].body;}}
if((overunderAtom.svgAbove||overscript)&&(overunderAtom.svgBelow||underscript)){result+=`<munderover ${makeID(atom.id, options)}>`;result+=(_o=SVG_CODE_POINTS[overunderAtom.svgBody])!=null?_o:toMathML(body,options);result+=(_p=SVG_CODE_POINTS[overunderAtom.svgBelow])!=null?_p:toMathML(underscript,options);result+=(_q=SVG_CODE_POINTS[overunderAtom.svgAbove])!=null?_q:toMathML(overscript,options);result+="</munderover>";}else if(overunderAtom.svgAbove||overscript){result+=`<mover ${makeID(atom.id, options)}>`+((_r=SVG_CODE_POINTS[overunderAtom.svgBody])!=null?_r:toMathML(body,options));result+=(_s=SVG_CODE_POINTS[overunderAtom.svgAbove])!=null?_s:toMathML(overscript,options);result+="</mover>";}else if(overunderAtom.svgBelow||underscript){result+=`<munder ${makeID(atom.id, options)}>`+((_t=SVG_CODE_POINTS[overunderAtom.svgBody])!=null?_t:toMathML(body,options));result+=(_u=SVG_CODE_POINTS[overunderAtom.svgBelow])!=null?_u:toMathML(underscript,options);result+="</munder>";}
break;case"placeholder":result+="?";break;case"mord":{result=typeof atom.value==="string"?atom.value:command;if(result.length>0&&result.startsWith("\\")){if(typeof atom.value==="string"&&atom.value.charCodeAt(0)>255){result="&#x"+("000000"+atom.value.charCodeAt(0).toString(16)).slice(-4)+";";}else if(typeof atom.value==="string")
result=atom.value.charAt(0);else{console.error("Did not expect this");result="";}}
const tag=/\d/.test(result)?"mn":"mi";result=`<${tag}${makeID(atom.id, options)}>${xmlEscape(
          result
        )}</${tag}>`;break;}
case"mbin":case"mrel":case"minner":result=toMo(atom,options);break;case"mpunct":result='<mo separator="true"'+makeID(atom.id,options)+">"+command+"</mo>";break;case"mop":case"operator":case"extensible-symbol":if(atom.value!=="\u200B"){result="<mo"+makeID(atom.id,options)+">";result+=command==="\\operatorname"?atom.body:command||atom.body;result+="</mo>";}
break;case"box":const boxAtom=atom;result='<menclose notation="box"';if(boxAtom.backgroundcolor)
result+=' mathbackground="'+boxAtom.backgroundcolor+'"';result+=makeID(atom.id,options)+">"+toMathML(atom.body,options)+"</menclose>";break;case"spacing":result+='<mspace width="'+((_v=SPACING[command])!=null?_v:0)+'em"/>';break;case"enclose":const encloseAtom=atom;result='<menclose notation="';for(const notation in encloseAtom.notation){if(Object.prototype.hasOwnProperty.call(encloseAtom.notation,notation)&&encloseAtom.notation[notation]){result+=sep+notation;sep=" ";}}
result+=makeID(atom.id,options)+'">'+toMathML(atom.body,options)+"</menclose>";break;case"prompt":result='<menclose notation="roundexbox""">'+toMathML(atom.body,options)+"</menclose>";break;case"space":result+="&nbsp;";break;case"subsup":break;case"phantom":break;case"composition":break;case"rule":break;case"chem":break;case"mopen":result+=toMo(atom,options);break;case"mclose":result+=toMo(atom,options);break;case"macro":{const body2=atom.command+toString2(atom.macroArgs);if(body2)result+=`<mo ${makeID(atom.id, options)}>${body2}</mo>`;}
break;case"latexgroup":result+=toMathML(atom.body,options);break;case"latex":result+="<mtext"+makeID(atom.id,options)+">"+atom.value+"</mtext>";break;case"tooltip":result+=toMathML(atom.body,options);break;case"text":result+=`<mtext ${makeID(atom.id, options)}x>${atom.value}</mtext>`;break;default:if(atom.command==="\\displaystyle"){return`<mrow ${makeID(
            atom.id,
            options
          )} displaystyle="true">${toMathML(atom.body, options)}</mrow>`;}
if(atom.command==="\\textstyle"){return`<mrow ${makeID(
            atom.id,
            options
          )} displaystyle="false">${toMathML(atom.body, options)}</mrow>`;}
console.info("Unexpected element in conversion to MathML:",atom);}
return result;}
var PRONUNCIATION={"\\alpha":"alpha ","\\mu":"mew ","\\sigma":"sigma ","\\pi":"pie ","\\imaginaryI":"imaginary eye ","\\imaginaryJ":"imaginary jay ","\\sum":"Summation ","\\prod":"Product ","+":"plus ","-":"minus ",";":'<break time="150ms"/> semi-colon <break time="150ms"/>',",":'<break time="150ms"/> comma  <break time="150ms"/>',"|":'<break time="150ms"/>Vertical bar<break time="150ms"/>',"(":'<break time="150ms"/>Open paren. <break time="150ms"/>',")":'<break time="150ms"/> Close paren. <break time="150ms"/>',"=":"equals ","<":"is less than ","\\lt":"is less than ","<=":"is less than or equal to ","\\le":"is less than or equal to ","\\gt":"is greater than ",">":"is greater than ","\\pm":"plus or minus","\\mp":"minus or plus","\\ge":"is greater than or equal to ","\\geq":"is greater than or equal to ","\\leq":"is less than or equal to ","\\ne":"is not equal to ","\\neq":"is not equal to ","!":"factorial ","\\sin":"sine ","\\cos":"cosine ","\u200B":"","\u2212":"minus ",":":'<break time="150ms"/> such that <break time="200ms"/> ',"\\colon":'<break time="150ms"/> such that <break time="200ms"/> ',"\\hbar":"etch bar ","\\iff":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\Longleftrightarrow":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\land":"and ","\\lor":"or ","\\neg":"not ","\\div":"divided by ","\\forall":"for all ","\\exists":"there exists ","\\nexists":"there does not exists ","\\in":"element of ","\\N":'the set <break time="150ms"/><say-as interpret-as="character">n</say-as>',"\\C":'the set <break time="150ms"/><say-as interpret-as="character">c</say-as>',"\\Z":'the set <break time="150ms"/><say-as interpret-as="character">z</say-as>',"\\Q":'the set <break time="150ms"/><say-as interpret-as="character">q</say-as>',"\\infty":"infinity ","\\nabla":"nabla ","\\partial":"partial derivative of ","\\cdot":"times ","\\cdots":"dot dot dot ","\\Rightarrow":"implies ","\\lparen":'<break time="150ms"/>open paren<break time="150ms"/>',"\\rparen":'<break time="150ms"/>close paren<break time="150ms"/>',"\\lbrace":'<break time="150ms"/>open brace<break time="150ms"/>',"\\{":'<break time="150ms"/>open brace<break time="150ms"/>',"\\rbrace":'<break time="150ms"/>close brace<break time="150ms"/>',"\\}":'<break time="150ms"/>close brace<break time="150ms"/>',"\\langle":'<break time="150ms"/>left angle bracket<break time="150ms"/>',"\\rangle":'<break time="150ms"/>right angle bracket<break time="150ms"/>',"\\lfloor":'<break time="150ms"/>open floor<break time="150ms"/>',"\\rfloor":'<break time="150ms"/>close floor<break time="150ms"/>',"\\lceil":'<break time="150ms"/>open ceiling<break time="150ms"/>',"\\rceil":'<break time="150ms"/>close ceiling<break time="150ms"/>',"\\vert":'<break time="150ms"/>vertical bar<break time="150ms"/>',"\\mvert":'<break time="150ms"/>divides<break time="150ms"/>',"\\lvert":'<break time="150ms"/>left vertical bar<break time="150ms"/>',"\\rvert":'<break time="150ms"/>right vertical bar<break time="150ms"/>',"\\lbrack":'<break time="150ms"/> open square bracket <break time="150ms"/>',"\\rbrack":'<break time="150ms"/> close square bracket <break time="150ms"/>',"mm":"millimeters","cm":"centimeters","km":"kilometers","kg":"kilograms"};var ENVIRONMENTS_NAMES={"array":"array","matrix":"matrix","pmatrix":"parenthesis matrix","bmatrix":"square brackets matrix","Bmatrix":"braces matrix","vmatrix":"bars matrix","Vmatrix":"double bars matrix","matrix*":"matrix","smallmatrix":"small matrix"};function getSpokenName(latex){let result="";if(latex.startsWith("\\"))result=" "+latex.replace("\\","")+" ";return result;}
function isAtomic(atoms){let count=0;if(isArray(atoms)){for(const atom of atoms)if(atom.type!=="first")count+=1;}
return count===1;}
function atomicID(atoms){if(isArray(atoms)){for(const atom of atoms)
if(atom.type!=="first"&&atom.id)return atom.id.toString();}
return"";}
function atomicValue(atoms){let result="";if(isArray(atoms)){for(const atom of atoms){if(atom.type!=="first"&&typeof atom.value==="string")
result+=atom.value;}}
return result;}
function atomsAsText(atoms){if(!atoms)return"";return atoms.map((atom)=>atom.value).join("");}
function atomsAsPotentialText(atoms){if(!atoms)return void 0;if(atoms.some((x)=>x.type!=="first"&&x.value===void 0))
return void 0;return atoms.map((atom)=>atom.value).join("");}
function emph(s){return`<emphasis>${s}</emphasis>`;}
function atomsToSpeakableFragment(mode,atom){var _a3;let result="";let isInDigitRun=false;let isInTextRun=false;for(let i=0;i<atom.length;i++){if(atom[i].type==="first")continue;if(atom[i].mode!=="text")isInTextRun=false;if(i<atom.length-2&&atom[i].type==="mopen"&&atom[i+2].type==="mclose"&&atom[i+1].type==="mord"){result+=" of ";result+=emph(atomToSpeakableFragment(mode,atom[i+1]));i+=2;}else if(atom[i].mode==="text"){if(isInTextRun)result+=(_a3=atom[i].value)!=null?_a3:" ";else{isInTextRun=true;result+=atomToSpeakableFragment("text",atom[i]);}}else if(atom[i].isDigit()){if(isInDigitRun)result+=atom[i].asDigit();else{isInDigitRun=true;result+=atomToSpeakableFragment(mode,atom[i]);}}else{isInDigitRun=false;result+=atomToSpeakableFragment(mode,atom[i]);}}
return result;}
function atomToSpeakableFragment(mode,atom){var _a3,_b3,_c2,_d2,_e,_f,_g,_h;function letter(c){if(!globalThis.MathfieldElement.textToSpeechMarkup){if(/[a-z]/.test(c))return" '"+c.toUpperCase()+"'";if(/[A-Z]/.test(c))return" 'capital "+c.toUpperCase()+"'";return c;}
if(/[a-z]/.test(c))
return` <say-as interpret-as="character">${c}</say-as>`;if(/[A-Z]/.test(c))
return`capital <say-as interpret-as="character">${c.toLowerCase()}</say-as>`;return c;}
if(!atom)return"";if(isArray(atom))return atomsToSpeakableFragment(mode,atom);let result="";if(atom.id&&mode==="math")
result+='<mark name="'+atom.id.toString()+'"/>';if(atom.mode==="text")return result+atom.value;let numer="";let denom="";let body="";let supsubHandled=false;const{command}=atom;switch(command){case"\\vec":return"vector "+atomToSpeakableFragment(mode,atom.body);case"\\acute":return atomToSpeakableFragment(mode,atom.body)+" acute";case"\\grave":return atomToSpeakableFragment(mode,atom.body)+" grave";case"\\dot":return"dot over"+atomToSpeakableFragment(mode,atom.body);case"\\ddot":return"double dot over"+atomToSpeakableFragment(mode,atom.body);case"\\mathring":return"ring over"+atomToSpeakableFragment(mode,atom.body);case"\\tilde":case"\\widetilde":return"tilde over"+atomToSpeakableFragment(mode,atom.body);case"\\bar":return atomToSpeakableFragment(mode,atom.body)+" bar";case"\\breve":return atomToSpeakableFragment(mode,atom.body)+" breve";case"\\check":case"\\widecheck":return"check over "+atomToSpeakableFragment(mode,atom.body);case"\\hat":case"\\widehat":return"hat over"+atomToSpeakableFragment(mode,atom.body);case"\\overarc":case"\\overparen":case"\\wideparen":return"arc over "+atomToSpeakableFragment(mode,atom.body);case"\\underarc":case"\\underparen":return"arc under "+atomToSpeakableFragment(mode,atom.body);case"\\mathop":return(_a3=atomsAsPotentialText(atom.body))!=null?_a3:atomToSpeakableFragment(mode,atom.body);case"\\mathit":return(_b3=atomsAsPotentialText(atom.body))!=null?_b3:atomToSpeakableFragment(mode,atom.body);case"\\mathrm":return(_c2=atomsAsPotentialText(atom.body))!=null?_c2:atomToSpeakableFragment(mode,atom.body);case"\\mathbb":return"blackboard"+((_d2=atomsAsPotentialText(atom.body))!=null?_d2:atomToSpeakableFragment(mode,atom.body));}
switch(atom.type){case"prompt":const input=atom.body.length>1?'start input . <break time="500ms"/> '+atomToSpeakableFragment(mode,atom.body)+'. <break time="500ms"/> end input':"blank";result+=' <break time="300ms"/> '+input+'. <break time="700ms"/>'+((_e=atom.correctness)!=null?_e:"")+' . <break time="700ms"/> ';break;case"array":const array=atom.rows;const environment=atom.environmentName;if(Object.keys(ENVIRONMENTS_NAMES).includes(environment)){result+=` begin ${ENVIRONMENTS_NAMES[environment]} `;for(let i=0;i<array.length;i++){if(i>0)result+=",";result+=` row ${i + 1} `;for(let j=0;j<array[i].length;j++){if(j>0)result+=",";result+=` column ${j + 1}: `;result+=atomToSpeakableFragment("math",array[i][j]);}}
result+=` end ${ENVIRONMENTS_NAMES[environment]} `;}
break;case"group":if(command==="\\ne")result+=" not equal ";else if(command==="\\not"){result+=" not ";result+=atomToSpeakableFragment("math",atom.body);}else{result+=atomToSpeakableFragment("math",atom.body);}
break;case"root":result+=atomToSpeakableFragment("math",atom.body);break;case"genfrac":numer=atomToSpeakableFragment("math",atom.above);denom=atomToSpeakableFragment("math",atom.below);if(isAtomic(atom.above)&&isAtomic(atom.below)){const COMMON_FRACTIONS={"1/2":" half ","1/3":" one third ","2/3":" two third","1/4":" one quarter ","3/4":" three quarter ","1/5":" one fifth ","2/5":" two fifths ","3/5":" three fifths ","4/5":" four fifths ","1/6":" one sixth ","5/6":" five sixths ","1/8":" one eight ","3/8":" three eights ","5/8":" five eights ","7/8":" seven eights ","1/9":" one ninth ","2/9":" two ninths ","4/9":" four ninths ","5/9":" five ninths ","7/9":" seven ninths ","8/9":" eight ninths "};const commonFraction=COMMON_FRACTIONS[atomicValue(atom.above)+"/"+atomicValue(atom.below)];if(commonFraction)result=commonFraction;else result+=numer+" over "+denom;}else{result+=' the fraction <break time="150ms"/>'+numer+' over <break time="150ms"/>'+denom+'.<break time="150ms"/> End fraction.<break time="150ms"/>';}
break;case"surd":body=atomToSpeakableFragment("math",atom.body);if(atom.hasEmptyBranch("above")){result+=isAtomic(atom.body)?" the square root of "+body+" , ":' the square root of <break time="200ms"/>'+body+'. <break time="200ms"/> End square root';}else{let index=atomToSpeakableFragment("math",atom.above);index=index.trim();const index2=index.replace(/<mark([^/]*)\/>/g,"");if(index2==="3"){result+=' the cube root of <break time="200ms"/>'+body+'. <break time="200ms"/> End cube root';}else if(index2==="n"){result+=' the nth root of <break time="200ms"/>'+body+'. <break time="200ms"/> End root';}else{result+=' the root with index: <break time="200ms"/>'+index+', of <break time="200ms"/>'+body+'. <break time="200ms"/> End root';}}
break;case"leftright":{const delimAtom=atom;result+=(_f=delimAtom.leftDelim?PRONUNCIATION[delimAtom.leftDelim]:void 0)!=null?_f:delimAtom.leftDelim;result+=atomToSpeakableFragment("math",atom.body);result+=(_g=delimAtom.rightDelim?PRONUNCIATION[delimAtom.rightDelim]:void 0)!=null?_g:delimAtom.rightDelim;}
break;case"rule":break;case"overunder":break;case"overlap":break;case"macro":const macroName=command.replace(/^\\/g,"");const macro=getMacros()[macroName];if(macro){if(macro==null?void 0:macro.expand)result+=atomToSpeakableFragment("math",atom.body);else result+=`${macroName} `;}
break;case"placeholder":result+="placeholder ";break;case"delim":case"sizeddelim":case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":{if(command==="\\mathbin"||command==="\\mathrel"||command==="\\mathopen"||command==="\\mathclose"||command==="\\mathpunct"||command==="\\mathord"||command==="\\mathinner"){result=atomToSpeakableFragment(mode,atom.body);break;}
let atomValue=atom.isDigit()?atom.asDigit():atom.value;let latexValue=atom.command;if(atom.type==="delim"||atom.type==="sizeddelim"){latexValue=atom.value;atomValue=latexValue;}
if(mode==="text")result+=atomValue;else{if(atom.type==="mbin")result+='<break time="150ms"/>';if(atomValue){const value=PRONUNCIATION[atomValue]||(latexValue?PRONUNCIATION[latexValue.trim()]:"");if(value)result+=" "+value;else{const spokenName=latexValue?getSpokenName(latexValue.trim()):"";result+=spokenName?spokenName:letter(atomValue);}}else result+=atomToSpeakableFragment("math",atom.body);if(atom.type==="mbin")result+='<break time="150ms"/>';}
break;}
case"mop":case"operator":case"extensible-symbol":if(atom.value!=="\u200B"){const trimLatex=atom.command;if(trimLatex==="\\sum"){if(!atom.hasEmptyBranch("superscript")&&!atom.hasEmptyBranch("subscript")){let sup=atomToSpeakableFragment("math",atom.superscript);sup=sup.trim();let sub=atomToSpeakableFragment("math",atom.subscript);sub=sub.trim();result+=' the summation from <break time="200ms"/>'+sub+'<break time="200ms"/> to  <break time="200ms"/>'+sup+'<break time="200ms"/> of <break time="150ms"/>';supsubHandled=true;}else if(!atom.hasEmptyBranch("subscript")){let sub=atomToSpeakableFragment("math",atom.subscript);sub=sub.trim();result+=' the summation from <break time="200ms"/>'+sub+'<break time="200ms"/> of <break time="150ms"/>';supsubHandled=true;}else result+=" the summation of";}else if(trimLatex==="\\prod"){if(!atom.hasEmptyBranch("superscript")&&!atom.hasEmptyBranch("subscript")){let sup=atomToSpeakableFragment("math",atom.superscript);sup=sup.trim();let sub=atomToSpeakableFragment("math",atom.subscript);sub=sub.trim();result+=' the product from <break time="200ms"/>'+sub+'<break time="200ms"/> to <break time="200ms"/>'+sup+'<break time="200ms"/> of <break time="150ms"/>';supsubHandled=true;}else if(!atom.hasEmptyBranch("subscript")){let sub=atomToSpeakableFragment("math",atom.subscript);sub=sub.trim();result+=' the product from <break time="200ms"/>'+sub+'<break time="200ms"/> of <break time="150ms"/>';supsubHandled=true;}else result+=" the product  of ";}else if(trimLatex==="\\int"){if(!atom.hasEmptyBranch("superscript")&&!atom.hasEmptyBranch("subscript")){let sup=atomToSpeakableFragment("math",atom.superscript);sup=sup.trim();let sub=atomToSpeakableFragment("math",atom.subscript);sub=sub.trim();result+=' the integral from <break time="200ms"/>'+emph(sub)+'<break time="200ms"/> to <break time="200ms"/>'+emph(sup)+' <break time="200ms"/> of ';supsubHandled=true;}else result+=' the integral of <break time="200ms"/> ';}else if(trimLatex==="\\operatorname"||trimLatex==="\\operatorname*")
result+=atomsAsText(atom.body)+" ";else if(typeof atom.value==="string"){const value=(_h=PRONUNCIATION[atom.value])!=null?_h:atom.command?PRONUNCIATION[atom.command]:void 0;result+=value?value:" "+atom.value;}else if(atom.command){if(atom.command==="\\mathop")
result+=atomToSpeakableFragment("math",atom.body);else{result+=atom.command.startsWith("\\")?" "+atom.command.slice(1):" "+atom.command;}}}
break;case"enclose":body=atomToSpeakableFragment("math",atom.body);result+=" crossed out "+body+". End crossed out.";break;case"space":case"spacing":break;}
if(!supsubHandled&&!atom.hasEmptyBranch("superscript")){let sup=atomToSpeakableFragment(mode,atom.superscript);sup=sup.trim();const sup2=sup.replace(/<[^>]*>/g,"");if(isAtomic(atom.superscript)){if(mode==="math"){const id=atomicID(atom.superscript);if(id)result+='<mark name="'+id+'"/>';}
if(sup2==="\u2032")result+=" prime ";else if(sup2==="2")result+=" squared ";else if(sup2==="3")result+=" cubed ";else if(Number.isNaN(Number.parseInt(sup2)))
result+=" to the "+sup+"; ";else{result+=' to the <say-as interpret-as="ordinal">'+sup2+"</say-as> power; ";}}else if(Number.isNaN(Number.parseInt(sup2)))
result+=" raised to the "+sup+"; ";else{result+=' raised to the <say-as interpret-as="ordinal">'+sup2+"</say-as> power; ";}}
if(!supsubHandled&&!atom.hasEmptyBranch("subscript")){let sub=atomToSpeakableFragment("math",atom.subscript);sub=sub.trim();result+=isAtomic(atom.subscript)?" sub "+sub:" subscript "+sub+". End subscript. ";}
return result;}
function atomToSpeakableText(atoms){var _a3,_b3;const mfe=globalThis.MathfieldElement;if(mfe.textToSpeechRules==="sre"&&("sre"in window||"SRE"in window)){const mathML=toMathML(atoms);if(mathML){if(mfe.textToSpeechMarkup){mfe.textToSpeechRulesOptions=(_a3=mfe.textToSpeechRulesOptions)!=null?_a3:{};mfe.textToSpeechRulesOptions=__spreadProps(__spreadValues({},mfe.textToSpeechRulesOptions),{markup:mfe.textToSpeechMarkup});if(mfe.textToSpeechRulesOptions.markup==="ssml"){mfe.textToSpeechRulesOptions=__spreadProps(__spreadValues({},mfe.textToSpeechRulesOptions),{markup:"ssml_step"});}
mfe.textToSpeechRulesOptions=__spreadProps(__spreadValues({},mfe.textToSpeechRulesOptions),{rate:mfe.speechEngineRate});}
const SRE=(_b3=window["SRE"])!=null?_b3:globalThis.sre.System.getInstance();if(mfe.textToSpeechRulesOptions)
SRE.setupEngine(mfe.textToSpeechRulesOptions);let result2="";try{result2=SRE.toSpeech(mathML);}catch(e){console.error(`MathLive 0.105.0: \`SRE.toSpeech()\` runtime error`,e);}
return result2;}
return"";}
let result=atomToSpeakableFragment("math",atoms);if(mfe.textToSpeechMarkup==="ssml"){let prosody="";if(mfe.speechEngineRate)
prosody='<prosody rate="'+mfe.speechEngineRate+'">';result=`<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><amazon:auto-breaths>`+prosody+"<p><s>"+result+"</s></p>"+(prosody?"</prosody>":"")+"</amazon:auto-breaths></speak>";}else if(mfe.textToSpeechMarkup==="mac"&&osPlatform()==="macos"){result=result.replace(/<mark([^/]*)\/>/g,"").replace(/<emphasis>/g,"[[emph+]]").replace(/<\/emphasis>/g,"").replace(/<break time="(\d*)ms"\/>/g,"[[slc $1]]").replace(/<say-as[^>]*>/g,"").replace(/<\/say-as>/g,"");}else{result=result.replace(/<[^>]*>/g,"").replace(/\s{2,}/g," ");}
return result;}
var IDENTIFIERS={"\\ne":"\u2260","\\neq":"\u2260","\u2212":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon","\\varepsilon":"varepsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta","\\vartheta":"vartheta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi","\\varphi":"varphi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega","\\exponentialE":"e","\\imaginaryI":"i","\\imaginaryJ":"j","\\!":" ","\\,":" ","\\:":" ","\\>":" ","\\;":" ","\\enskip":" ","\\enspace":" ","\\qquad":" ","\\quad":" ","\\infty":"oo","\\R":"RR","\\mathbb{R}":"RR","\\N":"NN","\\mathbb{N}":"NN","\\Z":"ZZ","\\mathbb{Z}":"ZZ","\\Q":"QQ","\\mathbb{Q}":"QQ","\\C":"CC","\\mathbb{C}":"CC","\\emptyset":"O/","\\varnothing":"O/","\\varDelta":"Delta","\\varTheta":"Theta","\\varLambda":"Lambda","\\varXi":"Xi","\\varPi":"Pi","\\varSigma":"Sigma","\\varUpsilon":"Upsilon","\\varPhi":"Phi","\\varPsi":"Psi","\\varOmega":"Omega"};var OPERATORS={"\\pm":"+-","\\colon":" : ","\\sum":" sum ","\\prod":" prod ","\\bigcap":" nnn ","\\bigcup":" uuu ","\\int":" int ","\\oint":" oint ","\\ge":">=","\\le":"<=","\\ne":"!=","\\neq":"!=","\\lt":"<","\\gt":">","\\gets":"<-","\\to":"->","\\land":" and ","\\lor":" or ","\\lnot":" not ","\\forall":" AA ","\\exists":" EE ","\\in":" in ","\\notin":" !in ","\\mapsto":"|->","\\implies":"=>","\\iff":"<=>","\\cdot":" * ","\\ast":" ** ","\\star":" *** ","\\times":" * ","\\div":" -: ","\\ltimes":" |>< ","\\rtimes":" ><| ","\\bowtie":" |><| ","\\circ":"@"};var FENCES2={"\\vert":"|","\\Vert":"||","\\mid":"|","\\lbrack":"[","\\rbrack":"]","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"(:","\\rangle":":)"};function joinAsciiMath(xs){let result="";for(const x of xs){const last=result[result.length-1];if(last!==void 0&&(/\d$/.test(last)&&/^\d/.test(x)||/[a-zA-Z]$/.test(last)&&/^[a-zA-Z]/.test(x)))
result+=" ";result+=x;}
return result;}
function atomToAsciiMath(atom,options){var _a3,_b3,_c2,_d2,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q;if(!atom)return"";if(isArray(atom)){if(atom.length===0)return"";if(atom[0].mode==="latex")
return atom.map((x)=>atomToAsciiMath(x)).join("");if(atom[0].mode==="text"){let i2=0;let text="";while(((_a3=atom[i2])==null?void 0:_a3.mode)==="text"){text+=atom[i2].body?atomToAsciiMath(atom[i2].body,options):atom[i2].value;i2++;}
if(options==null?void 0:options.plain)return text+atomToAsciiMath(atom.slice(i2),options);return`"${text}" ${atomToAsciiMath(atom.slice(i2))}`;}
let i=0;const result2=[];while(atom[i]&&atom[i].mode==="math"){let digits="";while(atom[i]&&atom[i].type==="mord"&&/\d/.test(atom[i].value))
digits+=atom[i++].value;if(digits)result2.push(digits);else result2.push(atomToAsciiMath(atom[i++],options));}
result2.push(atomToAsciiMath(atom.slice(i),options));return joinAsciiMath(result2);}
if(atom.mode==="text")
return(options==null?void 0:options.plain)?atom.value:`"${atom.value}"`;let result="";const{command}=atom;let m;if(command==="\\placeholder")
return`(${atomToAsciiMath(atom.body, options)})`;const latex=Atom.serialize([atom],{expandMacro:false,defaultMode:"math"});switch(atom.type){case"accent":const accent={"\\vec":"vec","\\dot":"dot","\\ddot":"ddot","\\bar":"bar","\\hat":"hat","\\acute":"acute;","\\grave":"grave","\\tilde":"tilde","\\breve":"breave","\\check":"check"}[command];result=`${accent != null ? accent : ""} ${atomToAsciiMath(atom.body, options)} `;break;case"first":return"";case"latexgroup":return atom.body.map((x)=>x.value).join("");case"group":case"root":result=(_b3=IDENTIFIERS[command])!=null?_b3:atomToAsciiMath(atom.body,options);break;case"genfrac":{const genfracAtom=atom;if(genfracAtom.leftDelim||genfracAtom.rightDelim){result=genfracAtom.leftDelim==="."||!genfracAtom.leftDelim?"{:":genfracAtom.leftDelim;}
if(genfracAtom.hasBarLine){result+="(";result+=atomToAsciiMath(genfracAtom.above,options);result+=")/(";result+=atomToAsciiMath(genfracAtom.below,options);result+=")";}else{result+="((";result+=atomToAsciiMath(genfracAtom.above,options);result+=") choose (";result+=atomToAsciiMath(genfracAtom.below,options);result+="))";}
if(genfracAtom.leftDelim||genfracAtom.rightDelim){result+=genfracAtom.rightDelim==="."||!genfracAtom.rightDelim?"{:":genfracAtom.rightDelim;}}
break;case"surd":if(atom.hasEmptyBranch("above"))
result+=`sqrt(${atomToAsciiMath(atom.body, options)})`;else
result+=`root(${atomToAsciiMath(atom.above, options)})(${atomToAsciiMath(atom.body, options)})`;break;case"latex":result=atom.value;break;case"leftright":{const leftrightAtom=atom;let lDelim=leftrightAtom.leftDelim;if(lDelim&&FENCES2[lDelim])lDelim=FENCES2[lDelim];result+=lDelim==="."||!lDelim?"{:":lDelim;result+=atomToAsciiMath(leftrightAtom.body,options);let rDelim=leftrightAtom.matchingRightDelim();if(rDelim&&FENCES2[rDelim])rDelim=FENCES2[rDelim];result+=rDelim==="."||!rDelim?":}":rDelim;}
break;case"sizeddelim":case"delim":result=atom.value;break;case"overlap":break;case"overunder":break;case"mord":if(IDENTIFIERS[latex])return IDENTIFIERS[latex];result=(_e=(_d2=(_c2=IDENTIFIERS[command])!=null?_c2:command)!=null?_d2:command)!=null?_e:typeof atom.value==="string"?atom.value:"";if(result.startsWith("\\"))result+=" ";m=command?command.match(/{?\\char"([\dabcdefABCDEF]+)}?/):null;if(m){result=String.fromCodePoint(Number.parseInt("0x"+m[1]));}else if(result.length>0&&result.startsWith("\\")){result=typeof atom.value==="string"?atom.value.charAt(0):atom.command;}
result=asciiStyle(result,atom.style);break;case"mbin":case"mrel":case"minner":result=(_h=(_g=(_f=IDENTIFIERS[latex])!=null?_f:IDENTIFIERS[command])!=null?_g:OPERATORS[command])!=null?_h:atom.value;break;case"mopen":case"mclose":result=atom.value;break;case"mpunct":result=(_i=OPERATORS[command])!=null?_i:command;break;case"mop":case"operator":case"extensible-symbol":if(atom.value!=="\u200B"){if(OPERATORS[command])result=OPERATORS[command];else{result=command==="\\operatorname"?atomToAsciiMath(atom.body,options):(_j=atom.value)!=null?_j:command;}
result+=" ";}
break;case"array":const environment=atom.environmentName;if(atom.isMultiline){const lines=atom.rows;result=lines.map((line)=>line.map((cell)=>atomToAsciiMath(cell,options)).join("")).join("\n");}else{const rowDelim=(_k={"bmatrix":["[","]"],"bmatrix*":["[","]"]}[environment])!=null?_k:["(",")"];const rows=[];const array=atom.rows;for(const row of array){const cells=[];for(const cell of row)cells.push(atomToAsciiMath(cell,options));rows.push(rowDelim[0]+cells.join(",")+rowDelim[1]);}
const delim=(_l={"bmatrix":["[","]"],"bmatrix*":["[","]"],"cases":["{",":}"]}[environment])!=null?_l:["(",")"];result=delim[0]+rows.join(",")+delim[1];}
break;case"box":break;case"spacing":result=(_n=(_m=IDENTIFIERS[latex])!=null?_m:IDENTIFIERS[command])!=null?_n:" ";break;case"enclose":result="("+atomToAsciiMath(atom.body,options)+")";break;case"space":result=" ";break;case"subsup":result="";break;case"macro":result=(_q=(_p=(_o=IDENTIFIERS[latex])!=null?_o:IDENTIFIERS[command])!=null?_p:OPERATORS[command])!=null?_q:atomToAsciiMath(atom.body,options);break;}
if(!atom.hasEmptyBranch("subscript")){result+="_";const arg=atomToAsciiMath(atom.subscript,options);result+=arg.length!==1?`(${arg})`:arg;}
if(!atom.hasEmptyBranch("superscript")){result+="^";const arg=atomToAsciiMath(atom.superscript,options);result+=arg.length!==1?`(${arg})`:arg;}
return result;}
function asciiStyle(body,style){if(!style)return body;let result=body;if(style.variant==="double-struck")result=`bbb "${result}"`;if(style.variant==="script")result=`cc "${result}"`;if(style.variant==="fraktur")result=`fr "${result}"`;if(style.variant==="sans-serif")result=`sf "${result}"`;if(style.variant==="monospace")result=`tt "${result}"`;if(style.variantStyle==="bold")result=`bb "${result}"`;if(style.color)return`color({${style.color}})(${result})`;return result;}
function convertLatexToMarkup(text,options){var _a3;const from=__spreadProps(__spreadValues({},getDefaultContext()),{renderPlaceholder:()=>new Box(160,{maxFontSize:1})});if((options==null?void 0:options.letterShapeStyle)&&(options==null?void 0:options.letterShapeStyle)!=="auto")
from.letterShapeStyle=options.letterShapeStyle;if(options==null?void 0:options.macros){const macros=normalizeMacroDictionary(options==null?void 0:options.macros);from.getMacro=(token)=>getMacroDefinition(token,macros);}
if(options==null?void 0:options.registers)
from.registers=__spreadValues(__spreadValues({},from.registers),options.registers);const defaultMode=(_a3=options==null?void 0:options.defaultMode)!=null?_a3:"math";let parseMode="math";let mathstyle="displaystyle";if(defaultMode==="inline-math")mathstyle="textstyle";else if(defaultMode==="math")mathstyle="displaystyle";else if(defaultMode==="text"){mathstyle="textstyle";parseMode="text";}
const effectiveContext=new Context({from});const root=new Atom({type:"root",mode:parseMode,body:parseLatex(text,{context:effectiveContext,parseMode,mathstyle})});const box=root.render(effectiveContext);if(!box)return"";coalesce(applyInterBoxSpacing(box,effectiveContext));const struts=makeStruts(box,{classes:"ML__latex"});return struts.toMarkup();}
function validateLatex2(s){return validateLatex(s,{context:getDefaultContext()});}
function convertLatexToMathMl(latex,options={}){return toMathML(parseLatex(latex,{parseMode:"math",args:()=>"",mathstyle:"displaystyle"}),options);}
function convertLatexToSpeakableText(latex){const atoms=parseLatex(latex,{parseMode:"math",mathstyle:"displaystyle"});return atomToSpeakableText(atoms);}
var gComputeEngine;function convertMathJsonToLatex(json){var _a3,_b3;if(!gComputeEngine){const ComputeEngineCtor=(_a3=globalThis[Symbol.for("io.cortexjs.compute-engine")])==null?void 0:_a3.ComputeEngine;if(ComputeEngineCtor)gComputeEngine=new ComputeEngineCtor();else{console.error(`MathLive 0.105.0: The CortexJS Compute Engine library is not available.
        
        Load the library, for example with:
        
        import "https://unpkg.com/@cortex-js/compute-engine?module"`);}}
return(_b3=gComputeEngine==null?void 0:gComputeEngine.box(json).latex)!=null?_b3:"";}
function convertLatexToAsciiMath(latex,parseMode="math"){return atomToAsciiMath(new Atom({type:"root",body:parseLatex(latex,{parseMode})}));}
function convertAsciiMathToLatex(ascii){return parseMathString(ascii,{format:"ascii-math"})[1];}
function asRgb(color){if(typeof color==="string"){const parsed=parseHex2(color);if(!parsed)throw new Error(`Invalid color: ${color}`);return parsed;}
if("C"in color)return oklchToRgb(color);if("a"in color)return oklabToRgb(color);return color;}
function clampByte2(v){if(v<0)return 0;if(v>255)return 255;return Math.round(v);}
function parseHex2(hex){if(!hex)return void 0;if(hex[0]!=="#")return void 0;hex=hex.slice(1);let result;if(hex.length<=4){result={r:parseInt(hex[0]+hex[0],16),g:parseInt(hex[1]+hex[1],16),b:parseInt(hex[2]+hex[2],16)};if(hex.length===4)result.a=parseInt(hex[3]+hex[3],16)/255;}else{result={r:parseInt(hex[0]+hex[1],16),g:parseInt(hex[2]+hex[3],16),b:parseInt(hex[4]+hex[5],16)};if(hex.length===8)result.a=parseInt(hex[6]+hex[7],16)/255;}
if(result&&typeof result.a==="undefined")result.a=1;return result;}
function oklchToOklab(_){const[L,C,H]=[_.L,_.C,_.H];const hRadians=H*Math.PI/180;const result={L,a:C*Math.cos(hRadians),b:C*Math.sin(hRadians)};if(_.alpha!==void 0)result.alpha=_.alpha;return result;}
function oklabToOklch(_){const[L,a,b]=[_.L,_.a,_.b];const C=Math.sqrt(a*a+b*b);const hRadians=Math.atan2(b,a);const H=hRadians*180/Math.PI;const result={L,C,H};if(_.alpha!==void 0)result.alpha=_.alpha;return result;}
function oklabToUnclippedRgb(_){const[l,a,b]=[_.L,_.a,_.b];const L=Math.pow(0.9999999984505198*l+0.39633779217376786*a+0.2158037580607588*b,3);const M=Math.pow(1.00000000888176*l-0.10556134232365635*a-0.0638541747717059*b,3);const S2=Math.pow(l*1.000000054672411-0.0894841820949657*a-1.2914855378640917*b,3);const r=4.076741661347994*L-3.307711590408193*M+0.230969928729428*S2;const g=-1.2684380040921763*L+2.6097574006633715*M-0.3413193963102197*S2;const bl=-0.004196086541837188*L-0.7034186144594493*M+1.7076147009309444*S2;const conv=(n)=>{const abs=Math.abs(n);if(abs<=31308e-7)return n*12.92;return(Math.sign(n)||1)*(1.055*Math.pow(abs,1/2.4)-0.055);};return[conv(r),conv(g),conv(bl)];}
function inGamut(rgb){const[r,g,b]=rgb;return r>=0&&r<=1&&g>=0&&g<=1&&b>=0&&b<=1;}
function clampRgb(rgb,alpha){let[r,g,b]=rgb;r=clampByte2(r*255);g=clampByte2(g*255);b=clampByte2(b*255);return alpha!==void 0?{r,g,b,alpha}:{r,g,b};}
function oklabToRgb(color){let[r,g,b]=oklabToUnclippedRgb(color);if(inGamut([r,g,b]))return clampRgb([r,g,b],color.alpha);const oklch=oklabToOklch(color);oklch.C=0;[r,g,b]=oklabToUnclippedRgb(oklchToOklab(oklch));if(!inGamut([r,g,b]))return clampRgb([r,g,b],color.alpha);let low=0;let high=color.L;let mid=(low+high)/2;oklch.C=mid;const resolution=0.36/Math.pow(2,12);while(high-low>resolution){mid=(low+high)/2;oklch.C=mid;[r,g,b]=oklabToUnclippedRgb(oklchToOklab(oklch));if(inGamut([r,g,b]))low=mid;else high=mid;}
return clampRgb([r,g,b],color.alpha);}
function oklchToRgb(_){return oklabToRgb(oklchToOklab(_));}
function apca(bgColor,fgColor){const bgRgb=asRgb(bgColor);const fgRgb=asRgb(fgColor);const normBG=0.56;const normTXT=0.57;const revTXT=0.62;const revBG=0.65;const blkThrs=0.022;const blkClmp=1.414;const loClip=0.1;const deltaYmin=5e-4;const scaleBoW=1.14;const loBoWoffset=0.027;const scaleWoB=1.14;const loWoBoffset=0.027;function fclamp(Y){return Y>=blkThrs?Y:Y+(blkThrs-Y)**blkClmp;}
function linearize(val){const sign=val<0?-1:1;return sign*Math.pow(Math.abs(val),2.4);}
const Yfg=fclamp(linearize(fgRgb.r/255)*0.2126729+linearize(fgRgb.g/255)*0.7151522+linearize(fgRgb.b/255)*0.072175);const Ybg=fclamp(linearize(bgRgb.r/255)*0.2126729+linearize(bgRgb.g/255)*0.7151522+linearize(bgRgb.b/255)*0.072175);let S2,C,Sapc;if(Math.abs(Ybg-Yfg)<deltaYmin)C=0;else{if(Ybg>Yfg){S2=Ybg**normBG-Yfg**normTXT;C=S2*scaleBoW;}else{S2=Ybg**revBG-Yfg**revTXT;C=S2*scaleWoB;}}
if(Math.abs(C)<loClip)Sapc=0;else if(C>0)Sapc=C-loWoBoffset;else Sapc=C+loBoWoffset;return Sapc*100;}
function contrast(bgColor,dark,light){light!=null?light:light="#fff";dark!=null?dark:dark="#000";const lightContrast=apca(bgColor,light);const darkContrast=apca(bgColor,dark);return Math.abs(lightContrast)>Math.abs(darkContrast)?light:dark;}
function asHexColor(_){const rgb=asRgb(_);let hexString=((1<<24)+(clampByte2(rgb.r)<<16)+(clampByte2(rgb.g)<<8)+clampByte2(rgb.b)).toString(16).slice(1);if(rgb.alpha!==void 0&&rgb.alpha<1)
hexString+=("00"+Math.round(rgb.alpha*255).toString(16)).slice(-2);if(hexString[0]===hexString[1]&&hexString[2]===hexString[3]&&hexString[4]===hexString[5]&&hexString[6]===hexString[7]){hexString=hexString[0]+hexString[2]+hexString[4]+(rgb.alpha!==void 0&&rgb.alpha<1?hexString[6]:"");}
return"#"+hexString;}
function getSelectionPlainString(mf){const atoms=getSelectionAtoms(mf);let result="";for(const atom of atoms){if(typeof atom.value!=="string")return"";result+=atom.value;}
return result;}
function getSelectionAtoms(mf){const model=mf.model;const ranges=model.selection.ranges;if(ranges.length!==1)return[];let atoms=mf.model.getAtoms(ranges[0]);if(atoms.length===1&&atoms[0].isRoot)atoms=atoms[0].children;return atoms.filter((x)=>x.type!=="first");}
function validVariantAtom(mf,variant){const atoms=getSelectionAtoms(mf);if(atoms.length!==1)return false;const repertoire=VARIANT_REPERTOIRE[variant];if(!repertoire)return false;if(repertoire.test(atoms[0].value))return true;return false;}
function validVariantStyleSelection(mf){return getSelectionPlainString(mf).length>0;}
function getVariantSubmenu(mf){return[variantMenuItem(mf,"double-struck","mathbb","tooltip.blackboard"),variantMenuItem(mf,"fraktur","mathfrak","tooltip.fraktur"),variantMenuItem(mf,"calligraphic","mathcal","tooltip.caligraphic"),variantStyleMenuItem(mf,"up","mathrm","tooltip.roman-upright"),variantStyleMenuItem(mf,"bold","bm","tooltip.bold"),variantStyleMenuItem(mf,"italic","mathit","tooltip.italic")];}
function getAccentSubmenu(mf){return[{id:"accent-vec",class:"ML__center-menu",label:()=>convertLatexToMarkup(`\\vec{${getSelectionPlainString(mf)}}`),visible:()=>getSelectionPlainString(mf).length===1,onMenuSelect:()=>mf.insert("\\vec{#@}",{selectionMode:"item"})},{id:"accent-overrightarrow",class:"ML__center-menu",label:()=>convertLatexToMarkup(`\\overrightarrow{${getSelectionPlainString(mf)}}`),visible:()=>getSelectionPlainString(mf).length>0,onMenuSelect:()=>mf.insert("\\overrightarrow{#@}",{selectionMode:"item"})},{id:"accent-overleftarrow",class:"ML__center-menu",label:()=>convertLatexToMarkup(`\\overleftarrow{${getSelectionPlainString(mf)}}`),visible:()=>getSelectionPlainString(mf).length>0,onMenuSelect:()=>mf.insert("\\overleftarrow{#@}",{selectionMode:"item"})},{id:"accent-dot",class:"ML__center-menu",label:()=>convertLatexToMarkup(`\\dot{${getSelectionPlainString(mf)}}`),visible:()=>getSelectionPlainString(mf).length===1,onMenuSelect:()=>mf.insert("\\dot{#@}",{selectionMode:"item"})},{id:"accent-ddot",class:"ML__center-menu",label:()=>convertLatexToMarkup(`\\ddot{${getSelectionPlainString(mf)}}`),visible:()=>getSelectionPlainString(mf).length===1,onMenuSelect:()=>mf.insert("\\ddot{#@}",{selectionMode:"item"})},{id:"accent-bar",class:"ML__center-menu",label:()=>convertLatexToMarkup(`\\bar{${getSelectionPlainString(mf)}}`),visible:()=>getSelectionPlainString(mf).length===1,onMenuSelect:()=>mf.insert("\\bar{#@}",{selectionMode:"item"})},{id:"accent-overline",class:"ML__center-menu",label:()=>convertLatexToMarkup(`\\overline{${getSelectionPlainString(mf)}}`),visible:()=>getSelectionPlainString(mf).length>0,onMenuSelect:()=>mf.insert("\\overline{#@}",{selectionMode:"item"})},{id:"accent-overgroup",class:"ML__center-menu",label:()=>convertLatexToMarkup(`\\overgroup{${getSelectionPlainString(mf)}}`),visible:()=>getSelectionPlainString(mf).length>0,onMenuSelect:()=>mf.insert("\\overgroup{#@}",{selectionMode:"item"})},{id:"accent-overbrace",class:"ML__center-menu",label:()=>convertLatexToMarkup(`\\overbrace{${getSelectionPlainString(mf)}}`),visible:()=>getSelectionPlainString(mf).length>0,onMenuSelect:()=>mf.insert("\\overbrace{#@}",{selectionMode:"item"})},{id:"accent-underline",class:"ML__center-menu",label:()=>convertLatexToMarkup(`\\underline{${getSelectionPlainString(mf)}}`),visible:()=>getSelectionPlainString(mf).length>0,onMenuSelect:()=>mf.insert("\\underline{#@}",{selectionMode:"item"})},{id:"accent-undergroup",class:"ML__center-menu",label:()=>convertLatexToMarkup(`\\undergroup{${getSelectionPlainString(mf)}}`),visible:()=>getSelectionPlainString(mf).length>0,onMenuSelect:()=>mf.insert("\\undergroup{#@}",{selectionMode:"item"})},{id:"accent-underbrace",class:"ML__center-menu",label:()=>convertLatexToMarkup(`\\underbrace{${getSelectionPlainString(mf)}}`),visible:()=>getSelectionPlainString(mf).length>0,onMenuSelect:()=>mf.insert("\\underbrace{#@}",{selectionMode:"item"})}];}
function getDecorationSubmenu(mf){return[{id:"decoration-boxed",label:()=>convertLatexToMarkup(`\\boxed{${mf.getValue(mf.model.selection)}}}`),onMenuSelect:()=>mf.insert("\\boxed{#@}",{selectionMode:"item"})},{id:"decoration-red-box",label:()=>convertLatexToMarkup(`\\bbox[5px, border: 2px solid red]{${mf.getValue(
            mf.model.selection
          )}}`),onMenuSelect:()=>mf.insert("\\bbox[5px, border: 2px solid red]{#@}",{selectionMode:"item"})},{id:"decoration-dashed-black-box",label:()=>convertLatexToMarkup(`\\bbox[5px, border: 2px dashed black]{${mf.getValue(
            mf.model.selection
          )}}`),onMenuSelect:()=>mf.insert("\\bbox[5px, border: 2px dashed black]{#@}",{selectionMode:"item"})}];}
function getBackgroundColorSubmenu(mf){const result=[];for(const color of Object.keys(BACKGROUND_COLORS)){result.push({id:`background-color-${color}`,class:(asHexColor(contrast(BACKGROUND_COLORS[color]))==="#000"?"dark-contrast":"light-contrast")+" menu-swatch",label:`<span style="background:${BACKGROUND_COLORS[color]} "></span>`,ariaLabel:()=>{var _a3;return(_a3=localize(color))!=null?_a3:color;},checked:()=>{var _a3;return(_a3={some:"mixed",all:true}[mf.queryStyle({backgroundColor:color})])!=null?_a3:false;},onMenuSelect:()=>mf.applyStyle({backgroundColor:color},{operation:"toggle"})});}
return result;}
function getColorSubmenu(mf){const result=[];for(const color of Object.keys(FOREGROUND_COLORS)){result.push({id:`color-${color}`,class:(contrast(FOREGROUND_COLORS[color])==="#000"?"dark-contrast":"light-contrast")+" menu-swatch",label:`<span style="background:${FOREGROUND_COLORS[color]} "></span>`,ariaLabel:()=>{var _a3;return(_a3=localize(color))!=null?_a3:color;},checked:()=>{var _a3;return(_a3={some:"mixed",all:true}[mf.queryStyle({color})])!=null?_a3:false;},onMenuSelect:()=>mf.applyStyle({color},{operation:"toggle"})});}
return result;}
var InsertMatrixMenuItem=class extends _MenuItemState{constructor(decl,parent,row,col){super(decl,parent);this.row=row;this.col=col;}
set active(value){const cells=this.parentMenu.children;if(value){for(const cell of cells){cell.element.classList.toggle("active",cell.row<=this.row&&cell.col<=this.col);}}else for(const cell of cells)cell.element.classList.remove("active");}};function getInsertMatrixSubmenu(mf){const result=[];for(let row=1;row<=5;row++){for(let col=1;col<=5;col++){result.push({id:`insert-matrix-${row}x${col}`,onCreate:(decl,parent)=>new InsertMatrixMenuItem(decl,parent,row,col),label:`\u2610`,tooltip:()=>localize("tooltip.row-by-col",row,col),data:{row,col},onMenuSelect:()=>{mf.insert(`\\begin{pmatrix}${Array(row).fill(Array(col).fill("#?").join(" & ")).join("\\\\")}\\end{pmatrix}`,{selectionMode:"item"});}});}}
return result;}
function getDefaultMenuItems(mf){return[{label:()=>localize("menu.array.add row above"),id:"add-row-above",onMenuSelect:()=>mf.executeCommand("addRowBefore"),keyboardShortcut:"shift+alt+[Return]",visible:()=>{if(!mf.isSelectionEditable||!inMatrix(mf))return false;const[minRows,_minCols]=minShape(mf);const[maxRows,_maxCols]=maxShape(mf);return minRows!==maxRows;}},{label:()=>localize("menu.array.add row below"),id:"add-row-below",onMenuSelect:()=>mf.executeCommand("addRowAfter"),keyboardShortcut:"alt+[Return]",visible:()=>{if(!mf.isSelectionEditable||!inMatrix(mf))return false;const[minRows,_minCols]=minShape(mf);const[maxRows,_maxCols]=maxShape(mf);return minRows!==maxRows;}},{label:()=>localize("menu.array.add column before"),id:"add-column-before",onMenuSelect:()=>mf.executeCommand("addColumnBefore"),visible:()=>{if(!mf.isSelectionEditable||!inMatrix(mf))return false;const[_minRows,minCols]=minShape(mf);const[_maxRows,maxCols]=maxShape(mf);return minCols!==maxCols;},keyboardShortcut:"shift+alt+[Tab]",enabled:()=>{const array=mf.model.parentEnvironment;if(!array)return false;const[rows,_cols]=shape(mf);return rows<array.maxColumns;}},{label:()=>localize("menu.array.add column after"),id:"add-column-after",onMenuSelect:()=>mf.executeCommand("addColumnAfter"),keyboardShortcut:"alt+[Tab]",visible:()=>{if(!mf.isSelectionEditable||!inMatrix(mf))return false;const[_minRows,minCols]=minShape(mf);const[_maxRows,maxCols]=maxShape(mf);return minCols!==maxCols;}},{type:"divider"},{label:()=>localize("menu.array.delete row"),id:"delete-row",onMenuSelect:()=>mf.executeCommand("removeRow"),enabled:()=>{const[minRows,_minCols]=minShape(mf);const[rows,_cols]=shape(mf);return rows>minRows;},visible:()=>{if(!mf.isSelectionEditable||!inMatrix(mf))return false;const[minRows,_minCols]=minShape(mf);const[maxRows,_maxCols]=maxShape(mf);return minRows!==maxRows;}},{label:()=>localize("menu.array.delete column"),id:"delete-column",onMenuSelect:()=>mf.executeCommand("removeColumn"),enabled:()=>{const[_minRows,minCols]=minShape(mf);const[_rows,cols]=shape(mf);return cols>minCols;},visible:()=>{if(!mf.isSelectionEditable||!inMatrix(mf))return false;const[_minRows,minCols]=minShape(mf);const[_maxRows,maxCols]=maxShape(mf);return minCols!==maxCols;}},{type:"divider"},{label:()=>localize("menu.borders"),visible:()=>(isMatrixSelected(mf)||inMatrix(mf))&&mf.isSelectionEditable,submenu:[{label:" \u22F1 ",id:"environment-no-border",onMenuSelect:()=>performSetEnvironment(mf,"matrix")},{label:"(\u22F1)",id:"environment-parentheses",onMenuSelect:()=>performSetEnvironment(mf,"pmatrix")},{label:"[\u22F1]",id:"environment-brackets",onMenuSelect:()=>performSetEnvironment(mf,"bmatrix")},{label:"|\u22F1|",id:"environment-bar",onMenuSelect:()=>performSetEnvironment(mf,"vmatrix")},{label:"{\u22F1}",id:"environment-braces",onMenuSelect:()=>performSetEnvironment(mf,"Bmatrix")}],submenuClass:"border-submenu"},{type:"divider"},{label:()=>localize("menu.insert matrix"),id:"insert-matrix",visible:()=>mf.isSelectionEditable,submenu:getInsertMatrixSubmenu(mf),submenuClass:"insert-matrix-submenu",columnCount:5},{type:"divider"},{label:()=>localize("menu.insert"),id:"insert",submenu:insertMenu(mf)},{type:"divider"},{label:()=>localize("menu.mode"),id:"mode",visible:()=>mf.isSelectionEditable&&mf.model.selectionIsCollapsed,submenu:[{label:()=>localize("menu.mode-math"),id:"mode-math",onMenuSelect:()=>{complete(mf,"accept-all");mf.executeCommand(["switchMode","math"]);},checked:()=>mf.model.mode==="math"},{label:()=>localize("menu.mode-text"),id:"mode-text",onMenuSelect:()=>{complete(mf,"accept-all");mf.executeCommand(["switchMode","text"]);},checked:()=>mf.model.mode==="text"},{label:()=>localize("menu.mode-latex"),id:"mode-latex",onMenuSelect:()=>mf.executeCommand(["switchMode","latex"]),checked:()=>mf.model.mode==="latex"}]},{type:"divider"},{label:()=>localize("menu.font-style"),id:"variant",visible:()=>mf.isSelectionEditable,submenu:getVariantSubmenu(mf),submenuClass:"variant-submenu"},{label:()=>localize("menu.color"),id:"color",visible:()=>mf.isSelectionEditable,submenu:getColorSubmenu(mf),columnCount:4,submenuClass:"swatches-submenu"},{label:()=>localize("menu.background-color"),id:"background-color",visible:()=>mf.isSelectionEditable,submenu:getBackgroundColorSubmenu(mf),columnCount:4,submenuClass:"swatches-submenu"},{label:()=>localize("menu.accent"),id:"accent",visible:()=>mf.isSelectionEditable,submenu:getAccentSubmenu(mf),submenuClass:"variant-submenu"},{label:()=>localize("menu.decoration"),id:"decoration",visible:()=>mf.isSelectionEditable&&getSelectionPlainString(mf).length>0,submenu:getDecorationSubmenu(mf),submenuClass:"variant-submenu"},{type:"divider"},{label:()=>localize("menu.evaluate"),id:"ce-evaluate",visible:()=>mf.isSelectionEditable&&globalThis.MathfieldElement.computeEngine!==null,onMenuSelect:()=>{const latex=evaluate(mf);if(!latex){mf.model.announce("plonk");return;}
if(mf.model.selectionIsCollapsed){mf.model.position=mf.model.lastOffset;mf.insert(`=${latex}`,{insertionMode:"insertAfter",selectionMode:"item"});}else{mf.insert(latex,{insertionMode:"replaceSelection",selectionMode:"item"});}}},{label:()=>localize("menu.simplify"),id:"ce-simplify",visible:()=>mf.isSelectionEditable&&globalThis.MathfieldElement.computeEngine!==null,onMenuSelect:()=>{var _a3,_b3;if(mf.model.selectionIsCollapsed){const result=(_a3=mf.expression)==null?void 0:_a3.simplify();mf.model.position=mf.model.lastOffset;if(!result){mf.model.announce("plonk");return;}
mf.insert(`=${result.latex}`,{insertionMode:"insertAfter",selectionMode:"item"});}else{const result=(_b3=globalThis.MathfieldElement.computeEngine)==null?void 0:_b3.parse(mf.getValue(mf.model.selection)).simplify();if(!result){mf.model.announce("plonk");return;}
mf.insert(result.latex,{insertionMode:"replaceSelection",selectionMode:"item"});}}},{label:()=>{var _a3;const ce=globalThis.MathfieldElement.computeEngine;if(ce===null)return"";const unknown=(_a3=mf.expression)==null?void 0:_a3.unknowns[0];if(unknown){const latex=ce.box(unknown).latex;return localize("menu.solve-for",convertLatexToMarkup(latex));}
return localize("menu.solve");},id:"ce-solve",visible:()=>{var _a3;return mf.isSelectionEditable&&globalThis.MathfieldElement.computeEngine!==null&&((_a3=mf.expression)==null?void 0:_a3.unknowns.length)===1&&mf.expression.unknowns[0]!=="Nothing";},onMenuSelect:()=>{var _a3;const expr=mf.expression;const unknown=expr==null?void 0:expr.unknowns[0];const results=(_a3=expr.solve(unknown))==null?void 0:_a3.map((x)=>{var _a4;return(_a4=x.simplify().latex)!=null?_a4:"";});if(!results){mf.model.announce("plonk");return;}
mf.insert(`${unknown}=${results.length === 1 ? results[0] : "\\left\\lbrace" + (results == null ? void 0 : results.join(", ")) + "\\right\\rbrace"}`,{insertionMode:"replaceAll",selectionMode:"item"});}},{type:"divider"},{label:()=>localize("menu.cut"),id:"cut",onMenuSelect:()=>mf.executeCommand("cutToClipboard"),visible:()=>!mf.options.readOnly&&mf.isSelectionEditable,keyboardShortcut:"meta+X"},{label:()=>localize("menu.copy"),id:"copy",submenu:[{label:()=>localize("menu.copy-as-latex"),id:"copy-latex",onMenuSelect:()=>ModeEditor.copyToClipboard(mf,"latex"),keyboardShortcut:"meta+C"},{label:()=>localize("menu.copy-as-ascii-math"),id:"copy-ascii-math",onMenuSelect:()=>ModeEditor.copyToClipboard(mf,"ascii-math")},{label:()=>localize("menu.copy-as-mathml"),id:"copy-math-ml",onMenuSelect:()=>ModeEditor.copyToClipboard(mf,"math-ml")}]},{label:()=>localize("menu.paste"),id:"paste",onMenuSelect:()=>mf.executeCommand("pasteFromClipboard"),visible:()=>mf.hasEditableContent,keyboardShortcut:"meta+V"},{label:()=>localize("menu.select-all"),id:"select-all",keyboardShortcut:"meta+A",onMenuSelect:()=>mf.executeCommand("selectAll")}];}
function inMatrix(mf){var _a3,_b3;const env=(_b3=(_a3=mf.model.parentEnvironment)==null?void 0:_a3.environmentName)!=null?_b3:"";return["array","matrix","pmatrix","bmatrix","vmatrix","Bmatrix"].includes(env);}
function isMatrixSelected(mf){const cursor=mf.model.at(mf.model.position);if(cursor.type!=="array")return false;const env=cursor.environmentName;return["matrix","pmatrix","bmatrix","vmatrix","Bmatrix"].includes(env);}
function shape(mf){var _a3;const rows=(_a3=mf.model.parentEnvironment)==null?void 0:_a3.rows;if(!rows)return[0,0];return[rows.length,rows.reduce((acc,col)=>Math.max(acc,col.length),0)];}
function minShape(mf){const array=mf.model.parentEnvironment;if(!array)return[0,0];return[array.minRows,array.minColumns];}
function maxShape(mf){const array=mf.model.parentEnvironment;if(!array)return[0,0];return[array.maxRows,array.maxColumns];}
function performSetEnvironment(mf,env){removeSuggestion(mf);mf.flushInlineShortcutBuffer();setEnvironment(mf.model,env);requestUpdate(mf);}
function evaluate(mf){var _a3,_b3;let expr;if(mf.model.selectionIsCollapsed){expr=(_a3=globalThis.MathfieldElement.computeEngine)==null?void 0:_a3.parse(mf.getValue(),{canonical:false});}else{expr=(_b3=globalThis.MathfieldElement.computeEngine)==null?void 0:_b3.parse(mf.getValue(mf.model.selection),{canonical:false});}
if(!expr)return"";let result=expr.evaluate();if(result.isSame(expr))result=expr.N();return result.latex;}
function variantMenuItem(mf,variant,command,tooltip){return{id:`variant-${variant}`,label:()=>{var _a3;const textSelection=getSelectionPlainString(mf);if(textSelection.length<12){return convertLatexToMarkup(`\\${command}{${getSelectionPlainString(mf)}}`);}
return(_a3=localize(tooltip))!=null?_a3:tooltip;},class:"ML__xl",tooltip:()=>{var _a3;return(_a3=localize(tooltip))!=null?_a3:tooltip;},visible:()=>validVariantAtom(mf,variant),checked:()=>{var _a3;return(_a3={some:"mixed",all:true}[mf.queryStyle({variant})])!=null?_a3:false;},onMenuSelect:()=>mf.applyStyle({variant},{operation:"toggle"})};}
function variantStyleMenuItem(mf,variantStyle,command,tooltip){return{id:`variant-style-${variantStyle}`,label:()=>{var _a3;const textSelection=getSelectionPlainString(mf);if(textSelection.length>0&&textSelection.length<12){return convertLatexToMarkup(`\\${command}{${getSelectionPlainString(mf)}}`);}
return(_a3=localize(tooltip))!=null?_a3:tooltip;},class:()=>{const textSelection=getSelectionPlainString(mf);if(textSelection.length>0&&textSelection.length<12)
return"ML__xl";return"";},tooltip:()=>{var _a3;return(_a3=localize(tooltip))!=null?_a3:tooltip;},visible:variantStyle==="bold"?true:()=>validVariantStyleSelection(mf),checked:()=>{var _a3;return(_a3={some:"mixed",all:true}[mf.queryStyle({variantStyle})])!=null?_a3:false;},onMenuSelect:()=>mf.applyStyle({variantStyle},{operation:"toggle"})};}
function insertMenu(mf){return[{label:()=>insertLabel("abs"),id:"insert-abs",visible:()=>mf.isSelectionEditable,onMenuSelect:()=>mf.insert("|#?|")},{label:()=>insertLabel("nth-root"),id:"insert-nth-root",visible:()=>mf.isSelectionEditable,onMenuSelect:()=>mf.insert("\\sqrt[#?]{#?}")},{label:()=>insertLabel("log-base"),id:"insert-log-base",visible:()=>mf.isSelectionEditable,onMenuSelect:()=>mf.insert("\\log_{#?}{#?}")},{type:"heading",label:()=>localize("menu.insert.heading-calculus")},{label:()=>insertLabel("derivative"),id:"insert-derivative",visible:()=>mf.isSelectionEditable,onMenuSelect:()=>mf.insert("\\dfrac{\\mathrm{d}}{\\mathrm{d}x}#?\\bigm|_{x=#?}")},{label:()=>insertLabel("nth-derivative"),id:"insert-nth-derivative",visible:()=>mf.isSelectionEditable,onMenuSelect:()=>mf.insert("\\dfrac{\\mathrm{d}^#?}{\\mathrm{d}x^#?}#?\\bigm|_{x=#?}")},{label:()=>insertLabel("integral"),id:"insert-integral",visible:()=>mf.isSelectionEditable,onMenuSelect:()=>mf.insert("\\int_#?^#?#?\\,\\mathrm{d}#?")},{label:()=>insertLabel("sum"),id:"insert-sum",visible:()=>mf.isSelectionEditable,onMenuSelect:()=>mf.insert("\\sum_#?^#?#?")},{label:()=>insertLabel("product"),id:"insert-product",visible:()=>mf.isSelectionEditable,onMenuSelect:()=>mf.insert("\\prod_#?^#?#?")},{type:"heading",label:()=>localize("menu.insert.heading-complex-numbers")},{label:()=>insertLabel("modulus"),id:"insert-modulus",visible:()=>mf.isSelectionEditable,onMenuSelect:()=>mf.insert("\\lvert#?\\rvert")},{label:()=>insertLabel("argument"),id:"insert-argument",visible:()=>mf.isSelectionEditable,onMenuSelect:()=>mf.insert("\\arg(#?)")},{label:()=>insertLabel("real-part"),id:"insert-real-part",visible:()=>mf.isSelectionEditable,onMenuSelect:()=>mf.insert("\\Re(#?)")},{label:()=>insertLabel("imaginary-part"),id:"insert-imaginary-part",visible:()=>mf.isSelectionEditable,onMenuSelect:()=>mf.insert("\\Im(#?)")},{label:()=>insertLabel("conjugate"),id:"insert-conjugate",visible:()=>mf.isSelectionEditable,onMenuSelect:()=>mf.insert("\\overline{#?}")}];}
function insertLabel(id){return`<span class='ML__insert-template'> ${convertLatexToMarkup(localize(`menu.insert.${id}-template`))}</span><span class="ML__insert-label">${localize(`menu.insert.${id}`)}</span>`;}
function speakableText(arg1,arg2){if(typeof arg1==="string")return arg1+atomToSpeakableText(arg2);return atomToSpeakableText(arg1);}
function relationName(atom){var _a3;let result=void 0;if(atom.parent.type==="prompt"){if(atom.parentBranch==="body")result="prompt";}else if(atom.parentBranch==="body"){if(atom.type==="first"){if(atom.parent.type==="root")result="mathfield";else if(atom.parent.type==="surd")result="radicand";else if(atom.parent.type==="genfrac")result="fraction";else if(atom.parent.type==="sizeddelim")result="delimiter";if(result)return result;}
if(atom.type==="subsup"){if(atom.superscript&&atom.subscript)
result="superscript and subscript";else if(atom.superscript)result="superscript";else if(atom.subscript)result="subscript";}else if(atom.type){result=(_a3={"accent":"accented","array":"array","box":"box","chem":"chemical formula","delim":"delimiter","enclose":"cross out","extensible-symbol":"extensible symbol","error":"error","first":"first","genfrac":"fraction","group":"group","latex":"LaTeX","leftright":"delimiter","line":"line","subsup":"subscript-superscript","operator":"operator","overunder":"over-under","placeholder":"placeholder","rule":"rule","sizeddelim":"delimiter","space":"space","spacing":"spacing","surd":"square root","text":"text","prompt":"prompt","root":"math field","mop":"operator"}[atom.type])!=null?_a3:"parent";}}else if(atom.parent.type==="genfrac"){if(atom.parentBranch==="above")return"numerator";if(atom.parentBranch==="below")return"denominator";}else if(atom.parent.type==="surd"){if(atom.parentBranch==="above")result="index";}else if(atom.parentBranch==="superscript")result="superscript";else if(atom.parentBranch==="subscript")result="subscript";if(!result)console.log("unknown relationship");return result!=null?result:"parent";}
function defaultAnnounceHook(mathfield,action,previousPosition,atoms){let liveText="";if(action==="plonk"){globalThis.MathfieldElement.playSound("plonk");mathfield.flushInlineShortcutBuffer();return;}
if(action==="delete")liveText=speakableText("deleted: ",atoms);else if(action==="focus"||action.includes("move")){liveText=getRelationshipAsSpokenText(mathfield.model,previousPosition);liveText+=getNextAtomAsSpokenText(mathfield.model);}else if(action==="replacement"){liveText=speakableText(mathfield.model.at(mathfield.model.position));}else if(action==="line"){const label=speakableText(mathfield.model.root);mathfield.keyboardDelegate.setAriaLabel(label);}else liveText=atoms?speakableText(action+" ",atoms):action;if(liveText){const ariaLiveChangeHack=mathfield.ariaLiveText.textContent.includes("\xA0")?" \u202F ":" \xA0 ";mathfield.ariaLiveText.textContent=liveText+ariaLiveChangeHack;}}
function getRelationshipAsSpokenText(model,previousOffset){if(Number.isNaN(previousOffset))return"";const previous=model.at(previousOffset);if(!previous)return"";if(previous.treeDepth<=model.at(model.position).treeDepth)return"";let result="";let ancestor=previous.parent;const newParent=model.at(model.position).parent;while(ancestor!==model.root&&ancestor!==newParent){result+=`out of ${relationName(ancestor)};`;ancestor=ancestor.parent;}
return result;}
function getNextAtomAsSpokenText(model){if(!model.selectionIsCollapsed)
return`selected: ${speakableText(model.getAtoms(model.selection))}`;let result="";const cursor=model.at(model.position);if(cursor.isFirstSibling)result=`start of ${relationName(cursor)}: `;if(cursor.isLastSibling){if(!cursor.isFirstSibling){if(!cursor.parent.parent)
return`${speakableText(cursor)}; end of mathfield`;result=`${speakableText(cursor)}; end of ${relationName(cursor)}`;}}else result+=speakableText(cursor);return result;}
var _Model=class{constructor(target,mode,root){this.mathfield=target;this.mode=mode;this.silenceNotifications=false;this._selection={ranges:[[0,0]],direction:"none"};this._anchor=0;this._position=0;this.root=root;}
dispose(){this.mathfield=void 0;}
getState(){const selection={ranges:[...this._selection.ranges]};if(this.selection.direction&&this.selection.direction!=="none")
selection.direction=this.selection.direction;return{content:this.root.toJson(),selection,mode:this.mode};}
setState(state,options){var _a3;const wasSuppressing=this.silenceNotifications;this.silenceNotifications=(_a3=options==null?void 0:options.silenceNotifications)!=null?_a3:true;let changeOption={};if((options==null?void 0:options.type)==="undo")changeOption={inputType:"historyUndo"};if((options==null?void 0:options.type)==="redo")changeOption={inputType:"historyRedo"};if(this.contentWillChange(changeOption)){const didSuppress=this.silenceNotifications;this.silenceNotifications=true;this.mode=state.mode;this.root=fromJson(state.content);this.selection=state.selection;this.silenceNotifications=didSuppress;this.contentDidChange(changeOption);this.selectionDidChange();}
this.silenceNotifications=wasSuppressing;}
get atoms(){return this.root.children;}
get selection(){return this._selection;}
set selection(value){this.setSelection(value);}
setSelection(arg1,arg2){if(!this.mathfield.contentEditable&&this.mathfield.userSelect==="none")
return false;return this.deferNotifications({selection:true,content:true},()=>{var _a3,_b3,_c2;const value=this.normalizeSelection(arg1,arg2);if(value===void 0)throw new TypeError("Invalid selection");if(value.ranges.length===1&&value.ranges[0][0]===value.ranges[0][1]){const pos=value.ranges[0][0];if(!this.mathfield.dirty&&!((_a3=this.at(pos))==null?void 0:_a3.parentPrompt)&&this.mathfield.hasEditablePrompts){if((_b3=this.at(pos-1))==null?void 0:_b3.parentPrompt){this._anchor=this.normalizeOffset(pos-1);this._position=this._anchor;this._selection=this.normalizeSelection(this._anchor);return;}
if((_c2=this.at(pos+1))==null?void 0:_c2.parentPrompt){this._anchor=this.normalizeOffset(pos+1);this._position=this._anchor;this._selection=this.normalizeSelection(this._anchor);return;}
this._anchor=0;this._position=0;this._selection={ranges:[[0,0]]};return;}
this._anchor=pos;this._position=pos;this._selection=value;return;}
const selRange=range(value);if(value.direction==="backward")
[this._position,this._anchor]=selRange;else[this._anchor,this._position]=selRange;const first=this.at(selRange[0]+1);const last=this.at(selRange[1]);const commonAncestor=Atom.commonAncestor(first,last);if((commonAncestor==null?void 0:commonAncestor.type)==="array"&&first.parent===commonAncestor&&last.parent===commonAncestor){this._selection={ranges:[selRange],direction:value.direction};}else
this._selection={ranges:[selRange],direction:value.direction};console.assert(this._position>=0&&this._position<=this.lastOffset);return;});}
setPositionHandlingPlaceholder(pos){var _a3;const atom=this.at(pos);if((atom==null?void 0:atom.type)==="placeholder"){this.setSelection(pos-1,pos);}else if(((_a3=atom==null?void 0:atom.rightSibling)==null?void 0:_a3.type)==="placeholder"){this.setSelection(pos,pos+1);}else this.position=pos;if(atom instanceof LatexAtom&&atom.isSuggestion)
atom.isSuggestion=false;this.mathfield.stopCoalescingUndo();}
get position(){return this._position;}
set position(value){this.setSelection(value,value);}
get anchor(){return this._anchor;}
get selectionIsCollapsed(){return this._anchor===this._position;}
get selectionIsPlaceholder(){if(Math.abs(this._anchor-this._position)===1){return this.at(Math.max(this._anchor,this._position)).type==="placeholder";}
return false;}
collapseSelection(direction="forward"){if(this._anchor===this._position)return false;if(direction==="backward")
this.position=Math.min(this._anchor,this._position);else this.position=Math.max(this._anchor,this._position);return true;}
get lastOffset(){return this.atoms.length-1;}
at(index){return this.atoms[index];}
offsetOf(atom){return this.atoms.indexOf(atom);}
getSiblingsRange(offset){const atom=this.at(offset);const{parent}=atom;if(!parent)return[0,this.lastOffset];const branch=atom.parent.branch(atom.parentBranch);return[this.offsetOf(branch[0]),this.offsetOf(branch[branch.length-1])];}
getBranchRange(offset,branchName){const branch=this.at(offset).branch(branchName);return[this.offsetOf(branch[0]),this.offsetOf(branch[branch.length-1])];}
getCellRange(offset){var _a3;const cellIndex=this.getParentCell(offset);let atom=this.at(offset);if(!atom)return void 0;while(atom&&((_a3=atom.parent)==null?void 0:_a3.type)!=="array")atom=atom.parent;if(!(atom==null?void 0:atom.parent)||atom.parent.type!=="array")return void 0;return[this.offsetOf(atom.firstSibling),this.offsetOf(atom.lastSibling)];}
getAtoms(arg1,arg2,arg3){let options=arg3!=null?arg3:{};if(isSelection(arg1)){options=arg2!=null?arg2:{};if(arg1.ranges.length>1){return arg1.ranges.reduce((acc,range2)=>[...acc,...this.getAtoms(range2,options)],[]);}
arg1=arg1.ranges[0];}
let start;let end;if(isOffset(arg1)){start=arg1;if(!isOffset(arg2))return[];end=arg2;}else{[start,end]=arg1;options=arg2!=null?arg2:{};}
if(!Number.isFinite(start))return[];if(options.includeChildren===void 0)options.includeChildren=false;if(start<0)start=this.lastOffset-start+1;if(end<0)end=this.lastOffset+end+1;const first=Math.min(start,end)+1;const last=Math.max(start,end);if(!options.includeChildren&&first===1&&last===this.lastOffset)
return[this.root];let result=[];for(let i=first;i<=last;i++){const atom=this.atoms[i];if(atomIsInRange(this,atom,first,last))result.push(atom);}
if(!options.includeChildren){result=result.filter((atom)=>{let ancestorIncluded=false;let{parent}=atom;while(parent&&!ancestorIncluded){ancestorIncluded=atomIsInRange(this,parent,first,last);parent=parent.parent;}
return!ancestorIncluded;});}
return result;}
findAtom(filter,startingIndex=0,direction="forward"){let atom=void 0;const last=this.lastOffset;if(direction==="forward"){for(let i=startingIndex;i<=last;i++){atom=this.atoms[i];if(filter(atom))return atom;}
for(let i=0;i<startingIndex;i++){atom=this.atoms[i];if(filter(atom))return atom;}
return void 0;}
for(let i=startingIndex;i>=0;i--){atom=this.atoms[i];if(filter(atom))return atom;}
for(let i=last;i>startingIndex;i--){atom=this.atoms[i];if(filter(atom))return atom;}
return void 0;}
extractAtoms(range2){var _a3;let result=this.getAtoms(range2);if(result.length===1&&!result[0].parent){if(result[0].isRoot){if(result[0]instanceof ArrayAtom){result=result[0].rows.flatMap((x)=>x.flatMap((y)=>y));}else{result=[...(_a3=result[0].body)!=null?_a3:result[0].children];}
result=result.filter((x)=>x.type!=="first");}}
for(const child of result)child.parent.removeChild(child);return result;}
deleteAtoms(range2){range2!=null?range2:range2=[0,-1];this.extractAtoms(range2);this.position=range2[0];}
atomToString(atom,inFormat){const format=inFormat!=null?inFormat:"latex";if(format.startsWith("latex")){return Atom.serialize([atom],{expandMacro:format==="latex-expanded",skipStyles:format==="latex-unstyled",skipPlaceholders:format==="latex-without-placeholders",defaultMode:this.mathfield.options.defaultMode});}
if(format==="math-ml")return toMathML(atom);if(format==="spoken")return atomToSpeakableText(atom);if(format==="spoken-text"){const saveTextToSpeechMarkup=globalThis.MathfieldElement.textToSpeechMarkup;globalThis.MathfieldElement.textToSpeechMarkup="";const result=atomToSpeakableText(atom);globalThis.MathfieldElement.textToSpeechMarkup=saveTextToSpeechMarkup;return result;}
if(format==="spoken-ssml"||format==="spoken-ssml-with-highlighting"){const saveTextToSpeechMarkup=globalThis.MathfieldElement.textToSpeechMarkup;globalThis.MathfieldElement.textToSpeechMarkup="ssml";const result=atomToSpeakableText(atom);globalThis.MathfieldElement.textToSpeechMarkup=saveTextToSpeechMarkup;return result;}
if(format==="plain-text")return atomToAsciiMath(atom,{plain:true});if(format==="ascii-math")return atomToAsciiMath(atom);console.error(`MathLive 0.105.0: Unexpected format "${format}`);return"";}
getValue(arg1,arg2,arg3){if(arg1===void 0)return this.atomToString(this.root,"latex");if(typeof arg1==="string"&&arg1!=="math-json")
return this.atomToString(this.root,arg1);let ranges;let format;if(isOffset(arg1)&&isOffset(arg2)){ranges=[this.normalizeRange([arg1,arg2])];format=arg3;}else if(isRange(arg1)){ranges=[this.normalizeRange(arg1)];format=arg2;}else if(isSelection(arg1)){ranges=arg1.ranges;format=arg2;}else{ranges=[this.normalizeRange([0,-1])];format=arg1;}
format!=null?format:format="latex";if(format==="math-json"){if(!globalThis.MathfieldElement.computeEngine){if(!window[Symbol.for("io.cortexjs.compute-engine")]){console.error('The CortexJS Compute Engine library is not available.\nLoad the library, for example with:\nimport "https://unpkg.com/@cortex-js/compute-engine?module"');}
return'["Error", "compute-engine-not-available"]';}
const latex=this.getValue({ranges},"latex-unstyled");try{const expr=globalThis.MathfieldElement.computeEngine.parse(latex);return JSON.stringify(expr.json);}catch(e){return JSON.stringify(["Error",`'${e.toString()}'`]);}}
if(format.startsWith("latex")){const options={expandMacro:format==="latex-expanded",skipStyles:format==="latex-unstyled",skipPlaceholders:format==="latex-without-placeholders",defaultMode:this.mathfield.options.defaultMode};return joinLatex(ranges.map((range2)=>Atom.serialize(this.getAtoms(range2),options)));}
return ranges.map((range2)=>this.getAtoms(range2).map((atom)=>this.atomToString(atom,format)).join("")).join("");}
extendSelectionTo(anchor,position){if(!this.mathfield.contentEditable&&this.mathfield.userSelect==="none")
return false;return this.deferNotifications({selection:true},()=>{const range2=this.normalizeRange([anchor,position]);let[start,end]=range2;let{parent}=this.at(end);if(parent){if(parent.type==="genfrac"||parent.type==="subsup"){while(parent!==this.root&&childrenInRange(this,parent,[start,end])){end=this.offsetOf(parent);parent=parent.parent;}}}
parent=this.at(start).parent;while(parent!==this.root&&childrenInRange(this,parent,[start,end])){start=this.offsetOf(parent.leftSibling);parent=parent.parent;}
parent=this.at(end).parent;if((parent==null?void 0:parent.type)==="genfrac"){while(parent!==this.root&&childrenInRange(this,parent,[start,end])){end=this.offsetOf(parent);console.assert(end>=0);parent=parent.parent;}}
this._position=this.normalizeOffset(position);this._selection={ranges:[[start,end]],direction:"none"};});}
announce(command,previousPosition,atoms=[]){var _a3,_b3;const success=(_b3=(_a3=this.mathfield.host)==null?void 0:_a3.dispatchEvent(new CustomEvent("announce",{detail:{command,previousPosition,atoms},cancelable:true,bubbles:true,composed:true})))!=null?_b3:true;if(success)
defaultAnnounceHook(this.mathfield,command,previousPosition,atoms);}
deferNotifications(options,f){const oldSelection=this._selection;const oldAnchor=this._anchor;const oldPosition=this._position;const saved=this.silenceNotifications;this.silenceNotifications=true;const previousCounter=this.root.changeCounter;f();this.silenceNotifications=saved;const selectionChanged=oldAnchor!==this._anchor||oldPosition!==this._position||compareSelection(this._selection,oldSelection)==="different";if(options.selection&&selectionChanged)this.selectionDidChange();const contentChanged=this.root.changeCounter!==previousCounter;if(options.content&&contentChanged)
this.contentDidChange({inputType:options.type});return contentChanged||selectionChanged;}
normalizeOffset(value){if(value>0)value=Math.min(value,this.lastOffset);else if(value<0)value=this.lastOffset+value+1;return value;}
normalizeRange(range2){let[start,end]=range2;start=this.normalizeOffset(start);end=this.normalizeOffset(end);return start<end?[start,end]:[end,start];}
normalizeSelection(value,value2){var _a3;let result=void 0;if(isOffset(value)){const offset=this.normalizeOffset(value);if(isOffset(value2)){const offset2=this.normalizeOffset(value2);result=offset<=offset2?{ranges:[[offset,offset2]],direction:"none"}:{ranges:[[offset2,offset]],direction:"backward"};}else result={ranges:[[offset,offset]],direction:"none"};}else if(isRange(value)){const start=this.normalizeOffset(value[0]);const end=this.normalizeOffset(value[1]);result=start<=end?{ranges:[[start,end]],direction:"none"}:{ranges:[[end,start]],direction:"backward"};}else if(isSelection(value)){result={ranges:value.ranges.map((x)=>this.normalizeRange(x)),direction:(_a3=value.direction)!=null?_a3:"none"};}
console.assert(result!==void 0);return result;}
get parentEnvironment(){let parent=this.at(this.position).parent;if(!parent)return void 0;while(parent.parent&&parent.type!=="array")parent=parent.parent;if(parent.type!=="array")return void 0;return parent;}
get parentCell(){return this.getParentCell(this.position);}
getParentCell(pos){var _a3;let atom=this.at(pos);if(!atom)return void 0;while(atom&&((_a3=atom.parent)==null?void 0:_a3.type)!=="array")atom=atom.parent;if(!(atom==null?void 0:atom.parent)||atom.parent.type!=="array")return void 0;return atom.parentBranch;}
contentWillChange(options={}){if(this.silenceNotifications||!this.mathfield)return true;const save=this.silenceNotifications;this.silenceNotifications=true;const result=this.mathfield.onContentWillChange(options);this.silenceNotifications=save;return result;}
contentDidChange(options){if(window.mathVirtualKeyboard.visible)
window.mathVirtualKeyboard.update(makeProxy(this.mathfield));if(this.silenceNotifications||!this.mathfield||!this.mathfield.host)
return;const save=this.silenceNotifications;this.silenceNotifications=true;setTimeout(()=>{var _a3;if(!this.mathfield||!isValidMathfield(this.mathfield)||!this.mathfield.host)
return;this.mathfield.host.dispatchEvent(new InputEvent("input",__spreadProps(__spreadValues({},options),{data:options.data?options.data:(_a3=options.inputType)!=null?_a3:"",bubbles:true,composed:true})));},0);this.silenceNotifications=save;}
selectionDidChange(){if(!this.mathfield)return;if(window.mathVirtualKeyboard.visible)
window.mathVirtualKeyboard.update(makeProxy(this.mathfield));if(this.silenceNotifications)return;const save=this.silenceNotifications;this.silenceNotifications=true;this.mathfield.onSelectionDidChange();this.silenceNotifications=save;}};function atomIsInRange(model,atom,first,last){const offset=model.offsetOf(atom);if(offset<first||offset>last)return false;if(!atom.hasChildren)return true;const firstOffset=model.offsetOf(atom.firstChild);if(firstOffset>=first&&firstOffset<=last){const lastOffset=model.offsetOf(atom.lastChild);if(lastOffset>=first&&lastOffset<=last)return true;}
return false;}
function childrenInRange(model,atom,range2){if(!(atom==null?void 0:atom.hasChildren))return false;const[start,end]=range2;const first=model.offsetOf(atom.firstChild);const last=model.offsetOf(atom.lastChild);if(first>=start&&first<=end&&last>=first&&last<=end)
return true;return false;}
function onDelete(model,direction,atom,branch){var _a3,_b3,_c2,_d2,_e,_f;const parent=atom.parent;if(isCellBranch(branch)&&atom instanceof ArrayAtom&&atom.isMultiline){if(deleteRow(model,atom,branch[0],direction))return true;}
if(parent&&atom instanceof LeftRightAtom){const atStart=!branch&&direction==="forward"||branch==="body"&&direction==="backward";let pos=atStart?model.offsetOf(atom.firstChild):model.offsetOf(atom.lastChild);if(atStart){if(atom.rightDelim!=="?"&&atom.rightDelim!=="."){atom.leftDelim=".";atom.isDirty=true;}else{parent.addChildrenAfter(atom.removeBranch("body"),atom);parent.removeChild(atom);pos--;}}else{if(atom.leftDelim!=="?"&&atom.leftDelim!=="."){atom.rightDelim=".";atom.isDirty=true;}else{parent.addChildrenAfter(atom.removeBranch("body"),atom);parent.removeChild(atom);pos--;}}
model.position=pos;return true;}
if(parent&&atom.type==="surd"){if(direction==="forward"&&!branch||direction==="backward"&&branch==="body"){const pos=atom.leftSibling;if(atom.hasChildren)
parent.addChildrenAfter(atom.removeBranch("body"),atom);parent.removeChild(atom);model.position=model.offsetOf(pos);}else if(direction==="forward"&&branch==="body"){model.position=model.offsetOf(atom);}else if(!branch&&direction==="backward"){if(atom.hasChildren)model.position=model.offsetOf(atom.lastChild);else{model.position=Math.max(0,model.offsetOf(atom)-1);parent.removeChild(atom);}}else if(branch==="above"){if(atom.hasEmptyBranch("above"))atom.removeBranch("above");if(direction==="backward"){model.position=model.offsetOf(atom.leftSibling);}else{model.position=model.offsetOf(atom.body[0]);}}
return true;}
if(parent&&(atom.type==="box"||atom.type==="enclose")){const pos=branch&&direction==="backward"||!branch&&direction==="forward"?atom.leftSibling:atom.lastChild;parent.addChildrenAfter(atom.removeBranch("body"),atom);parent.removeChild(atom);model.position=model.offsetOf(pos);return true;}
if(atom.type==="genfrac"||atom.type==="overunder"){if(!branch){if(atom.type==="overunder"&&atom.hasEmptyBranch("body"))
return false;if(atom.type==="genfrac"&&atom.hasEmptyBranch("below")&&atom.hasEmptyBranch("above"))
return false;model.position=model.offsetOf(direction==="forward"?atom.firstChild:atom.lastChild);return true;}
const firstBranch=MathfieldElement.fractionNavigationOrder==="numerator-denominator"?"above":"below";const secondBranch=firstBranch==="above"?"below":"above";if(parent&&(direction==="forward"&&branch===firstBranch||direction==="backward"&&branch===secondBranch)){const first=atom.removeBranch(firstBranch);const second=atom.removeBranch(secondBranch);parent.addChildrenAfter([...first,...second],atom);parent.removeChild(atom);model.position=model.offsetOf(first.length>0?first[first.length-1]:second[0]);return true;}
if(direction==="backward")
model.position=model.offsetOf(atom.leftSibling);else model.position=model.offsetOf(atom);return true;}
if(atom.type==="extensible-symbol"||atom.type==="subsup"){if(!branch&&direction==="forward")return false;if(!branch){if(atom.subscript||atom.superscript){const pos=direction==="forward"?(_c2=(_a3=atom.superscript)==null?void 0:_a3[0])!=null?_c2:(_b3=atom.subscript)==null?void 0:_b3[0]:(_f=(_d2=atom.subscript)==null?void 0:_d2[0].lastSibling)!=null?_f:(_e=atom.superscript)==null?void 0:_e[0].lastSibling;if(pos)model.position=model.offsetOf(pos);return true;}
return false;}
if(!atom.hasChildren&&atom.type==="subsup"){const pos=direction==="forward"?model.offsetOf(atom):Math.max(0,model.offsetOf(atom)-1);atom.parent.removeChild(atom);model.position=pos;return true;}
if(branch==="superscript"){if(direction==="backward"){const pos=model.offsetOf(atom.firstChild)-1;console.assert(pos>=0);model.position=pos;}else if(atom.subscript)
model.position=model.offsetOf(atom.subscript[0]);else model.position=model.offsetOf(atom);}else if(branch==="subscript"){if(direction==="backward"&&atom.superscript){model.position=model.offsetOf(atom.superscript[0].lastSibling);}else if(direction==="backward"){model.position=model.offsetOf(atom.firstChild)-1;}else{model.position=model.offsetOf(atom);}}
if(branch&&atom.hasEmptyBranch(branch)){atom.removeBranch(branch);if(atom.type==="subsup"&&!atom.subscript&&!atom.superscript){const pos=direction==="forward"?model.offsetOf(atom):Math.max(0,model.offsetOf(atom)-1);atom.parent.removeChild(atom);model.position=pos;}}
return true;}
if((parent==null?void 0:parent.type)==="genfrac"&&!branch&&atom.type!=="first"){let pos=model.offsetOf(atom.leftSibling);parent.removeChild(atom);if(parent.hasEmptyBranch("above")&&parent.hasEmptyBranch("below")){pos=model.offsetOf(parent.leftSibling);parent.parent.removeChild(parent);model.announce("delete",void 0,[parent]);model.position=pos;return true;}
model.announce("delete",void 0,[atom]);model.position=pos;return true;}
if(direction==="backward"&&((parent==null?void 0:parent.command)==="\\ln"||(parent==null?void 0:parent.command)==="\\log")&&atom.parentBranch!=="body"){const pos=model.offsetOf(parent.leftSibling);parent.parent.removeChild(parent);model.announce("delete",void 0,[parent]);model.position=pos;return true;}
return false;}
function deleteBackward(model){if(!model.mathfield.isSelectionEditable)return false;if(!model.contentWillChange({inputType:"deleteContentBackward"}))
return false;if(!model.selectionIsCollapsed)
return deleteRange(model,range(model.selection),"deleteContentBackward");return model.deferNotifications({content:true,selection:true,type:"deleteContentBackward"},()=>{let target=model.at(model.position);if(target&&onDelete(model,"backward",target))return;if(target==null?void 0:target.isFirstSibling){if(onDelete(model,"backward",target.parent,target.parentBranch))
return;target=null;}
if(!target){model.announce("plonk");return;}
model.position=model.offsetOf(target.leftSibling);target.parent.removeChild(target);model.announce("delete",void 0,[target]);});}
function deleteForward(model){if(!model.mathfield.isSelectionEditable)return false;if(!model.contentWillChange({inputType:"deleteContentForward"}))
return false;if(!model.selectionIsCollapsed)
return deleteRange(model,range(model.selection),"deleteContentForward");return model.deferNotifications({content:true,selection:true,type:"deleteContentForward"},()=>{var _a3,_b3;let target=model.at(model.position).rightSibling;if(target&&onDelete(model,"forward",target))return;if(!target){target=model.at(model.position);if(target.isLastSibling&&onDelete(model,"forward",target.parent,target.parentBranch))
return;target=void 0;}else if(model.at(model.position).isLastSibling&&onDelete(model,"forward",target.parent,target.parentBranch))
return;if(model.position===model.lastOffset||!target){model.announce("plonk");return;}
target.parent.removeChild(target);let sibling=(_a3=model.at(model.position))==null?void 0:_a3.rightSibling;while((sibling==null?void 0:sibling.type)==="subsup"){sibling.parent.removeChild(sibling);sibling=(_b3=model.at(model.position))==null?void 0:_b3.rightSibling;}
model.announce("delete",void 0,[target]);});}
function deleteRange(model,range2,type){const result=model.getAtoms(range2);if(result.length>0&&result[0].parent){let parent=result[0];while(parent&&!(parent instanceof ArrayAtom))parent=parent.parent;let endArray=result[result.length-1];while(endArray&&!(endArray instanceof ArrayAtom))
endArray=endArray.parent;if(parent&&parent instanceof ArrayAtom){const parentArray2=parent;if(parentArray2&&endArray===parentArray2&&parentArray2.isMultiline){const[startOffset,endOffset]=[Math.min(model.position,model.anchor),Math.max(model.position,model.anchor)];const[startRow,startColumn]=model.at(startOffset).parentBranch;const[endRow,endColumn]=model.at(endOffset).parentBranch;const rowSpan=endRow-startRow+1;if(rowSpan===2){}
if(rowSpan>2){model.extractAtoms([startOffset,endOffset]);for(let i=startRow+1;i<endRow;i++)parentArray2.removeRow(i);model.position=startOffset;return true;}}}
let firstChild=result[0].parent.firstChild;if(firstChild.type==="first")firstChild=firstChild.rightSibling;const lastChild=result[result.length-1].parent.lastChild;let firstSelected=result[0];if(firstSelected.type==="first")
firstSelected=firstSelected.rightSibling;const lastSelected=result[result.length-1];if(firstSelected===firstChild&&lastSelected===lastChild){const parent2=result[0].parent;if(parent2.parent&&parent2.type!=="prompt")
range2=[model.offsetOf(parent2.leftSibling),model.offsetOf(parent2)];}
if(result.length===1&&result[0].type==="placeholder"&&result[0].parent.type==="genfrac"){const genfrac=result[0].parent;const branch=result[0].parentBranch==="below"?"above":"below";const pos=model.offsetOf(genfrac.leftSibling);return model.deferNotifications({content:true,selection:true,type},()=>{var _a3,_b3;const numer=genfrac.removeBranch(branch);if(!(numer.length===1&&numer[0].type==="placeholder")){const lastAtom=genfrac.parent.addChildrenAfter(numer,genfrac);(_a3=genfrac.parent)==null?void 0:_a3.removeChild(genfrac);model.position=model.offsetOf(lastAtom);}else{(_b3=genfrac.parent)==null?void 0:_b3.removeChild(genfrac);model.position=Math.max(0,pos);}});}}
return model.deferNotifications({content:true,selection:true,type},()=>model.deleteAtoms(range2));}
function deleteRow(model,atom,row,direction){if(!(atom instanceof ArrayAtom))return false;if(!atom.isMultiline)return false;if(atom.rows.length===1)return false;if(atom.rows[row].length>1)return false;const content=atom.getCell(row,0);atom.removeRow(row);if(direction==="backward"){const prevLine=atom.getCell(row-1,0);model.position=model.offsetOf(prevLine[prevLine.length-1]);atom.setCell(row-1,0,[...prevLine,...content]);}else{const nextLine=atom.getCell(row,0);model.position=model.offsetOf(nextLine[0]);atom.setCell(row,0,[...content,...nextLine]);}
return true;}
register2({deleteAll:(model)=>model.contentWillChange({inputType:"deleteContent"})&&deleteRange(model,[0,-1],"deleteContent"),deleteForward:(model)=>deleteForward(model),deleteBackward:(model)=>deleteBackward(model),deleteNextWord:(model)=>model.contentWillChange({inputType:"deleteWordForward"})&&deleteRange(model,[model.anchor,wordBoundaryOffset(model,model.position,"forward")],"deleteWordForward"),deletePreviousWord:(model)=>model.contentWillChange({inputType:"deleteWordBackward"})&&deleteRange(model,[model.anchor,wordBoundaryOffset(model,model.position,"backward")],"deleteWordBackward"),deleteToGroupStart:(model)=>model.contentWillChange({inputType:"deleteSoftLineBackward"})&&deleteRange(model,[model.anchor,model.offsetOf(model.at(model.position).firstSibling)],"deleteSoftLineBackward"),deleteToGroupEnd:(model)=>model.contentWillChange({inputType:"deleteSoftLineForward"})&&deleteRange(model,[model.anchor,model.offsetOf(model.at(model.position).lastSibling)],"deleteSoftLineForward"),deleteToMathFieldStart:(model)=>model.contentWillChange({inputType:"deleteHardLineBackward"})&&deleteRange(model,[model.anchor,0],"deleteHardLineBackward"),deleteToMathFieldEnd:(model)=>model.contentWillChange({inputType:"deleteHardLineForward"})&&deleteRange(model,[model.anchor,-1],"deleteHardLineForward")},{target:"model",audioFeedback:"delete",canUndo:true,changeContent:true,changeSelection:true});var DEFAULT_KEYBOARD_TOGGLE_GLYPH=`<svg xmlns="http://www.w3.org/2000/svg" style="width: 21px;"  viewBox="0 0 576 512" role="img" aria-label="${localize(
    "tooltip.toggle virtual keyboard"
  )}"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg>`;var MENU_GLYPH=`<svg xmlns="http://www.w3.org/2000/svg" style="height: 18px;" viewBox="0 0 448 512" role="img" aria-label="${localize(
    "tooltip.menu"
  )}"><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg>`;var _Mathfield=class{constructor(element,options){this.focusBlurInProgress=false;var _a3,_b3,_c2;this.options=__spreadValues(__spreadProps(__spreadValues({},getDefault()),{macros:getMacros(),registers:getDefaultRegisters()}),update(options));this.eventController=new AbortController();const signal=this.eventController.signal;if(options.eventSink)this.host=options.eventSink;this.element=element;element.mathfield=this;this.blurred=true;this.keystrokeCaptionVisible=false;this.suggestionIndex=0;this.inlineShortcutBuffer=[];this.inlineShortcutBufferFlushTimer=0;this.defaultStyle={};this.styleBias="left";if(this.options.defaultMode==="inline-math")
this.element.classList.add("ML__is-inline");else this.element.classList.remove("ML__is-inline");this.dirty=false;let elementText=(_b3=(_a3=options.value)!=null?_a3:this.element.textContent)!=null?_b3:"";elementText=elementText.trim();const mode=effectiveMode(this.options);const body=parseLatex(elementText,{context:this.context});let root;if(body.length===1&&body[0].isRoot)root=body[0];else root=new Atom({type:"root",mode,body});this.model=new _Model(this,mode,root);this.undoManager=new UndoManager(this.model);const markup=[];markup.push(`<span contenteditable=true role=textbox aria-autocomplete=none aria-multiline=false part=keyboard-sink class=ML__keyboard-sink autocapitalize=off autocomplete=off autocorrect=off spellcheck=false inputmode=none tabindex=0></span>`);markup.push('<span part=container class=ML__container  style="visibility:hidden">');markup.push("<span part=content class=ML__content>");markup.push(contentMarkup(this));markup.push("</span>");if(window.mathVirtualKeyboard){markup.push(`<div part=virtual-keyboard-toggle class=ML__virtual-keyboard-toggle role=button ${this.hasEditableContent ? "" : 'style="display:none;"'} data-l10n-tooltip="tooltip.toggle virtual keyboard">`);markup.push(DEFAULT_KEYBOARD_TOGGLE_GLYPH);markup.push("</div>");}
markup.push(`<div part=menu-toggle class=ML__menu-toggle role=button data-l10n-tooltip="tooltip.menu">`);markup.push(MENU_GLYPH);markup.push("</div>");markup.push("</span>");markup.push("<span class=ML__sr-only>");markup.push("<span role=status aria-live=assertive aria-atomic=true></span>");markup.push("</span>");this.element.innerHTML=globalThis.MathfieldElement.createHTML(markup.join(""));if(!this.element.children){console.error(`%cMathLive 0.105.0: Something went wrong and the mathfield could not be created.%c
If you are using Vue, this may be because you are using the runtime-only build of Vue. Make sure to include \`runtimeCompiler: true\` in your Vue configuration. There may a warning from Vue in the log above.`,"color:red;font-family:system-ui;font-size:1.2rem;font-weight:bold","color:inherit;font-family:system-ui;font-size:inherit;font-weight:inherit");return;}
this._l10Subscription=l10n.subscribe(()=>l10n.update(this.element));l10n.update(this.element);this.field=this.element.querySelector("[part=content]");this.field.addEventListener("click",(evt)=>evt.stopImmediatePropagation(),{capture:false,signal});this.field.addEventListener("wheel",this,{passive:false,signal});if("PointerEvent"in window)
this.field.addEventListener("pointerdown",this,{signal});else this.field.addEventListener("mousedown",this,{signal});(_c2=this.element.querySelector("[part=virtual-keyboard-toggle]"))==null?void 0:_c2.addEventListener("click",()=>{if(window.mathVirtualKeyboard.visible)
window.mathVirtualKeyboard.hide();else{window.mathVirtualKeyboard.show({animate:true});window.mathVirtualKeyboard.update(makeProxy(this));}},{signal});this.field.addEventListener("contextmenu",this,{signal});const menuToggle=this.element.querySelector("[part=menu-toggle]");menuToggle==null?void 0:menuToggle.addEventListener("pointerdown",(ev)=>{if(ev.currentTarget!==menuToggle)return;const menu=this.menu;if(menu.state!=="closed")return;this.element.classList.add("tracking");const bounds=menuToggle.getBoundingClientRect();menu.modifiers=keyboardModifiersFromEvent(ev);menu.show({target:menuToggle,location:{x:bounds.left,y:bounds.bottom},onDismiss:()=>this.element.classList.remove("tracking")});ev.preventDefault();ev.stopPropagation();},{signal});if(this.model.atoms.length<=1||this.disabled||this.readOnly&&!this.hasEditableContent||this.userSelect==="none")
menuToggle.style.display="none";this.ariaLiveText=this.element.querySelector("[role=status]");this.keyboardDelegate=delegateKeyboardEvents(this.element.querySelector(".ML__keyboard-sink"),this.element,this);window.addEventListener("resize",this,{signal});document.addEventListener("scroll",this,{signal});this.resizeObserver=new ResizeObserver((_entries)=>{if(this.resizeObserverStarted){this.resizeObserverStarted=false;return;}
requestUpdate(this);});this.resizeObserverStarted=true;this.resizeObserver.observe(this.field);window.mathVirtualKeyboard.addEventListener("virtual-keyboard-toggle",this,{signal});if(gKeyboardLayout&&!l10n.locale.startsWith(gKeyboardLayout.locale))
setKeyboardLayoutLocale(l10n.locale);if(gFontsState!=="ready")
document.fonts.ready.then(()=>renderSelection(this));element.querySelector("[part=container]").style.removeProperty("visibility");this.undoManager.startRecording();this.undoManager.snapshot("set-value");requestUpdate(this);}
connectToVirtualKeyboard(){if(this.connectedToVirtualKeyboard)return;this.connectedToVirtualKeyboard=true;window.addEventListener("message",this,{signal:this.eventController.signal});window.mathVirtualKeyboard.connect();if(window.mathVirtualKeyboard.visible)
window.mathVirtualKeyboard.update(makeProxy(this));updateEnvironmentPopover(this);}
disconnectFromVirtualKeyboard(){if(!this.connectedToVirtualKeyboard)return;window.removeEventListener("message",this);window.mathVirtualKeyboard.disconnect();this.connectedToVirtualKeyboard=false;hideEnvironmentPopover();}
showMenu(_){var _a3,_b3;const location=(_b3=(_a3=_==null?void 0:_.location)!=null?_a3:getCaretPoint(this.field))!=null?_b3:void 0;const modifiers=_==null?void 0:_.modifiers;const target=this.element.querySelector("[part=container]");return this._menu.show({target,location,modifiers});}
get colorMap(){return(name)=>{var _a3,_b3,_c2;return(_c2=(_b3=(_a3=this.options).colorMap)==null?void 0:_b3.call(_a3,name))!=null?_c2:defaultColorMap(name);};}
get backgroundColorMap(){return(name)=>{var _a3,_b3,_c2,_d2,_e,_f;return(_f=(_e=(_b3=(_a3=this.options).backgroundColorMap)==null?void 0:_b3.call(_a3,name))!=null?_e:(_d2=(_c2=this.options).colorMap)==null?void 0:_d2.call(_c2,name))!=null?_f:defaultBackgroundColorMap(name);};}
get smartFence(){var _a3;return(_a3=this.options.smartFence)!=null?_a3:false;}
get readOnly(){var _a3;return(_a3=this.options.readOnly)!=null?_a3:false;}
get disabled(){var _a3,_b3;return(_b3=(_a3=this.host)==null?void 0:_a3["disabled"])!=null?_b3:false;}
get contentEditable(){if(!this.host)return false;return this.host.getAttribute("contenteditable")!=="false";}
get userSelect(){if(!this.host)return"";const style=getComputedStyle(this.host);return style.getPropertyValue("user-select")||style.getPropertyValue("-webkit-user-select");}
get hasEditableContent(){if(this.disabled||!this.contentEditable)return false;return!this.readOnly||this.hasEditablePrompts;}
get hasEditablePrompts(){return this.readOnly&&!this.disabled&&this.contentEditable&&this.model.findAtom((a)=>a.type==="prompt"&&!a.locked)!==void 0;}
get isSelectionEditable(){if(this.disabled||!this.contentEditable)return false;if(!this.readOnly)return true;const anchor=this.model.at(this.model.anchor);const cursor=this.model.at(this.model.position);const ancestor=Atom.commonAncestor(anchor,cursor);if((ancestor==null?void 0:ancestor.type)==="prompt"||(ancestor==null?void 0:ancestor.parentPrompt))return true;return false;}
get letterShapeStyle(){var _a3;return(_a3=this.options.letterShapeStyle)!=null?_a3:"tex";}
get minFontScale(){return this.options.minFontScale;}
get maxMatrixCols(){return this.options.maxMatrixCols;}
queryStyle(inStyle){const style=validateStyle(this,inStyle);if("verbatimColor"in style)delete style.verbatimColor;if("verbatimBackgroundColor"in style)
delete style.verbatimBackgroundColor;const keyCount=Object.keys(style).length;if(keyCount===0)return"all";if(keyCount>1){for(const prop2 of Object.keys(style)){const result=this.queryStyle({[prop2]:style[prop2]});if(result==="none")return"none";if(result==="some")return"some";}
return"all";}
const prop=Object.keys(style)[0];const value=style[prop];if(this.model.selectionIsCollapsed){const style2=computeInsertStyle(this);return style2[prop]===value?"all":"none";}
const atoms=this.model.getAtoms(this.model.selection,{includeChildren:true});let length=atoms.length;if(length===0)return"none";let count=0;for(const atom of atoms){if(atom.type==="first"){length-=1;continue;}
if(atom.style[prop]===value)count+=1;}
if(count===0)return"none";if(count===length)return"all";return"some";}
get keybindings(){var _a3,_b3;if(this._keybindings)return this._keybindings;const[keybindings,errors]=normalizeKeybindings(this.options.keybindings,(_a3=getActiveKeyboardLayout())!=null?_a3:getDefaultKeyboardLayout());if(((_b3=getActiveKeyboardLayout())==null?void 0:_b3.score)>0){this._keybindings=keybindings;if(errors.length>0){console.error(`MathLive 0.105.0: Invalid keybindings for current keyboard layout`,errors);}}
return keybindings;}
get menu(){var _a3;(_a3=this._menu)!=null?_a3:this._menu=new Menu(getDefaultMenuItems(this),{host:this.host});return this._menu;}
set menuItems(menuItems){if(this._menu)this._menu.menuItems=menuItems;else this._menu=new Menu(menuItems,{host:this.host});}
setOptions(config){var _a3;this.options=__spreadValues(__spreadValues({},this.options),update(config));this._keybindings=void 0;if(this.options.defaultMode==="inline-math")
this.element.classList.add("ML__is-inline");else this.element.classList.remove("ML__is-inline");let mode=this.options.defaultMode;if(mode==="inline-math")mode="math";if(((_a3=this.model.root.firstChild)==null?void 0:_a3.mode)!==mode)
this.model.root.firstChild.mode=mode;if(this.options.readOnly){if(this.hasFocus()&&window.mathVirtualKeyboard.visible)
this.executeCommand("hideVirtualKeyboard");}
const content=Atom.serialize([this.model.root],{expandMacro:false,defaultMode:this.options.defaultMode});if("macros"in config||this.model.getValue()!==content)reparse(this);if("value"in config||"registers"in config||"colorMap"in config||"backgroundColorMap"in config||"letterShapeStyle"in config||"minFontScale"in config||"maxMatrixCols"in config||"readOnly"in config||"placeholderContent"in config||"placeholderSymbol"in config)
requestUpdate(this);}
getOptions(keys){return get(this.options,keys);}
getOption(key){return get(this.options,key);}
async handleEvent(evt){var _a3;if(!isValidMathfield(this))return;if(isVirtualKeyboardMessage(evt)){if(!validateOrigin(evt.origin,(_a3=this.options.originValidator)!=null?_a3:"none")){throw new DOMException(`Message from unknown origin (${evt.origin}) cannot be handled`,"SecurityError");}
const{action}=evt.data;if(action==="execute-command"){const command=parseCommand(evt.data.command);if(!command)return;if(getCommandTarget(command)==="virtual-keyboard")return;this.executeCommand(command);}else if(action==="update-state"){}else if(action==="focus")this.focus({preventScroll:true});else if(action==="blur")this.blur();return;}
switch(evt.type){case"focus":this.onFocus();break;case"blur":this.onBlur();break;case"mousedown":if(this.userSelect!=="none")
onPointerDown(this,evt);break;case"pointerdown":if(!evt.defaultPrevented&&this.userSelect!=="none"){onPointerDown(this,evt);if(evt.shiftKey===false){if(await onContextMenu(evt,this.element.querySelector("[part=container]"),this.menu))
PointerTracker.stop();}}
break;case"contextmenu":if(this.userSelect!=="none"&&evt.shiftKey===false){if(await onContextMenu(evt,this.element.querySelector("[part=container]"),this.menu))
PointerTracker.stop();}
break;case"virtual-keyboard-toggle":if(this.hasFocus())updateEnvironmentPopover(this);if(this.hasFocus()){this.keyboardDelegate.blur();this.keyboardDelegate.focus();}
break;case"resize":if(this.geometryChangeTimer)
cancelAnimationFrame(this.geometryChangeTimer);this.geometryChangeTimer=requestAnimationFrame(()=>isValidMathfield(this)&&this.onGeometryChange());break;case"scroll":if(this.geometryChangeTimer)
cancelAnimationFrame(this.geometryChangeTimer);this.geometryChangeTimer=requestAnimationFrame(()=>isValidMathfield(this)&&this.onGeometryChange());break;case"wheel":this.onWheel(evt);break;case"message":break;default:console.warn("Unexpected event type",evt.type);}}
dispose(){if(!isValidMathfield(this))return;l10n.unsubscribe(this._l10Subscription);this.keyboardDelegate.dispose();this.keyboardDelegate=void 0;this.eventController.abort();this.eventController=void 0;this.resizeObserver.disconnect();window.mathVirtualKeyboard.removeEventListener("virtual-keyboard-toggle",this);this.disconnectFromVirtualKeyboard();this.model.dispose();const element=this.element;delete element.mathfield;this.element=void 0;this.host=void 0;this.field=void 0;this.ariaLiveText=void 0;disposeKeystrokeCaption();disposeSuggestionPopover();disposeEnvironmentPopover();}
flushInlineShortcutBuffer(options){options!=null?options:options={defer:false};if(!options.defer){this.inlineShortcutBuffer=[];clearTimeout(this.inlineShortcutBufferFlushTimer);this.inlineShortcutBufferFlushTimer=0;return;}
if(this.options.inlineShortcutTimeout>0){clearTimeout(this.inlineShortcutBufferFlushTimer);this.inlineShortcutBufferFlushTimer=setTimeout(()=>this.flushInlineShortcutBuffer(),this.options.inlineShortcutTimeout);}}
executeCommand(command){if(getCommandTarget(command)==="virtual-keyboard"){this.focus({preventScroll:true});window.mathVirtualKeyboard.executeCommand(command);requestAnimationFrame(()=>window.mathVirtualKeyboard.update(makeProxy(this)));return false;}
return perform(this,command);}
get errors(){return validateLatex(this.model.getValue(),{context:this.context});}
getValue(arg1,arg2,arg3){return this.model.getValue(arg1,arg2,arg3);}
setValue(value,options){var _a3;options=options!=null?options:{mode:"math"};if(options.insertionMode===void 0)
options.insertionMode="replaceAll";if(options.format===void 0||options.format==="auto")
options.format="latex";if(options.mode===void 0||options.mode==="auto")
options.mode=(_a3=getMode(this.model,this.model.position))!=null?_a3:"math";const couldUndo=this.undoManager.canUndo();if(ModeEditor.insert(this.model,value,options)){requestUpdate(this);if(!couldUndo)this.undoManager.reset();this.undoManager.snapshot("set-value");}}
get expression(){const ce=globalThis.MathfieldElement.computeEngine;if(!ce){console.error(`MathLive 0.105.0:  no compute engine available. Make sure the Compute Engine library is loaded.`);return null;}
return ce.box(ce.parse(this.model.getValue("latex-unstyled")));}
scrollIntoView(){var _a3;if(!this.element)return;if(this.host){if(this.options.onScrollIntoView)this.options.onScrollIntoView(this);else{this.host.scrollIntoView({block:"nearest",inline:"nearest"});if(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.container===window.document.body){const kbdBounds=window.mathVirtualKeyboard.boundingRect;const mathfieldBounds=this.host.getBoundingClientRect();if(mathfieldBounds.bottom>kbdBounds.top){(_a3=window.document.scrollingElement)==null?void 0:_a3.scrollBy(0,mathfieldBounds.bottom-kbdBounds.top+8);}}}}
if(this.dirty)render(this,{interactive:true});const fieldBounds=this.field.getBoundingClientRect();let caretPoint=null;if(this.model.selectionIsCollapsed)
caretPoint=getCaretPoint(this.field);else{const selectionBounds=getSelectionBounds(this);if(selectionBounds.length>0){let maxRight=-Infinity;let minTop=-Infinity;for(const r of selectionBounds){if(r.right>maxRight)maxRight=r.right;if(r.top<minTop)minTop=r.top;}
caretPoint={x:maxRight+fieldBounds.left-this.field.scrollLeft,y:minTop+fieldBounds.top-this.field.scrollTop,height:0};}}
if(this.host&&caretPoint){const hostBounds=this.host.getBoundingClientRect();const y=caretPoint.y;let top=this.host.scrollTop;if(y<hostBounds.top)top=y-hostBounds.top+this.host.scrollTop;else if(y>hostBounds.bottom)
top=y-hostBounds.bottom+this.host.scrollTop+caretPoint.height;this.host.scroll({top,left:0});}
if(caretPoint){const x=caretPoint.x-window.scrollX;let left=this.field.scrollLeft;if(x<fieldBounds.left)
left=x-fieldBounds.left+this.field.scrollLeft-20;else if(x>fieldBounds.right)
left=x-fieldBounds.right+this.field.scrollLeft+20;this.field.scroll({top:this.field.scrollTop,left});}}
insert(s,options){if(typeof s!=="string")return false;if(s.length===0&&((options==null?void 0:options.insertionMode)==="insertBefore"||(options==null?void 0:options.insertionMode)==="insertAfter"))
return false;if(s.length===0&&this.model.selectionIsCollapsed)return false;this.flushInlineShortcutBuffer();options=options!=null?options:{mode:"math"};if(options.focus)this.focus();if(options.feedback){if(globalThis.MathfieldElement.keypressVibration&&canVibrate())
navigator.vibrate(HAPTIC_FEEDBACK_DURATION);globalThis.MathfieldElement.playSound("keypress");}
if(s==="\\\\"){addRowAfter(this.model);}else if(s==="&")addColumnAfter(this.model);else{if(this.model.selectionIsCollapsed){const style=__spreadValues({},computeInsertStyle(this));if(!/^[a-zA-Z0-9]$/.test(s)&&this.styleBias!=="none"){style.variant="normal";style.variantStyle=void 0;}
ModeEditor.insert(this.model,s,__spreadValues({style},options));}else ModeEditor.insert(this.model,s,options);}
this.snapshot(`insert-${this.model.at(this.model.position).type}`);requestUpdate(this);if(options.scrollIntoView)this.scrollIntoView();return true;}
switchMode(mode,prefix="",suffix=""){if(this.model.mode===mode||!this.hasEditableContent||!this.contentEditable||this.disabled)
return;const{model}=this;const previousMode=model.mode;model.mode=mode;if(this.host&&!this.host.dispatchEvent(new Event("mode-change",{bubbles:true,composed:true,cancelable:true}))){model.mode=previousMode;return;}
model.mode=previousMode;model.deferNotifications({content:Boolean(suffix)||Boolean(prefix),selection:true,type:"insertText"},()=>{let cursor=model.at(model.position);const insertString=(s,options)=>{if(!s)return;const atoms=model.mode==="math"?parseLatex(parseMathString(s,{format:"ascii-math"})[1],{context:this.context}):[...s].map((c)=>new TextAtom(c,c,{}));if(options.select){const end=cursor.parent.addChildrenAfter(atoms,cursor);model.setSelection(model.offsetOf(atoms[0].leftSibling),model.offsetOf(end));}else{model.position=model.offsetOf(cursor.parent.addChildrenAfter(atoms,cursor));}
contentChanged=true;};const insertLatexGroup=(latex,options)=>{const atom=new LatexGroupAtom(latex);cursor.parent.addChildAfter(atom,cursor);if(options.select){model.setSelection(model.offsetOf(atom.firstChild),model.offsetOf(atom.lastChild));}else model.position=model.offsetOf(atom.lastChild);contentChanged=true;};const getContent=()=>{const format=mode==="latex"?"latex":mode==="math"?"plain-text":"ascii-math";const selRange=range(model.selection);let content=this.model.getValue(selRange,format);const atoms=this.model.extractAtoms(selRange);if(atoms.length===1&&atoms[0].type==="placeholder")
content=suffix;cursor=model.at(selRange[0]);return content;};let contentChanged=false;this.flushInlineShortcutBuffer();this.stopCoalescingUndo();complete(this,"accept");if(model.selectionIsCollapsed){insertString(prefix,{select:false});model.mode=mode;if(mode==="latex")insertLatexGroup(suffix,{select:false});else insertString(suffix,{select:false});}else{const content=getContent();model.mode=mode;if(mode==="latex")insertLatexGroup(content,{select:true});else insertString(content,{select:true});}
requestUpdate(this);this.undoManager.snapshot(mode==="latex"?"insert-latex":"insert");return contentChanged;});model.mode=mode;window.mathVirtualKeyboard.update(makeProxy(this));}
hasFocus(){return!this.blurred;}
focus(options){var _a3;if(this.focusBlurInProgress)return;if(!this.hasFocus()){this.onFocus();this.model.announce("line");}
if(!((_a3=options==null?void 0:options.preventScroll)!=null?_a3:false))this.scrollIntoView();}
blur(){this.disconnectFromVirtualKeyboard();if(!this.hasFocus())return;this.keyboardDelegate.blur();}
select(){this.model.selection={ranges:[[0,this.model.lastOffset]]};this.focus();}
applyStyle(inStyle,inOptions={}){var _a3;let range2;let operation="set";let silenceNotifications=false;if(isRange(inOptions))range2=inOptions;else{if(inOptions.operation==="toggle")operation="toggle";range2=inOptions.range;silenceNotifications=(_a3=inOptions.silenceNotifications)!=null?_a3:false;}
if(range2)range2=this.model.normalizeRange(range2);if(range2&&range2[0]===range2[1])range2=void 0;const style=validateStyle(this,inStyle);if(range2===void 0&&this.model.selectionIsCollapsed){if(operation==="set"){const newStyle2=__spreadValues({},this.defaultStyle);if("color"in style)delete newStyle2.verbatimColor;if("backgroundColor"in style)delete newStyle2.verbatimBackgroundColor;this.defaultStyle=__spreadValues(__spreadValues({},newStyle2),style);this.styleBias="none";return;}
const newStyle=__spreadValues({},this.defaultStyle);for(const prop of Object.keys(style)){if(newStyle[prop]===style[prop]){if(prop==="color")delete newStyle.verbatimColor;if(prop==="backgroundColor")
delete newStyle.verbatimBackgroundColor;delete newStyle[prop];}else newStyle[prop]=style[prop];}
this.defaultStyle=newStyle;this.styleBias="none";return;}
this.model.deferNotifications({content:!silenceNotifications,type:"insertText"},()=>{if(range2===void 0){for(const range3 of this.model.selection.ranges)
applyStyle(this.model,range3,style,{operation});}else applyStyle(this.model,range2,style,{operation});});requestUpdate(this);}
toggleContextMenu(){var _a3;const menu=this.menu;if(!menu.visible)return false;if(menu.state==="open"){menu.hide();return true;}
const caretBounds=(_a3=getElementInfo(this,this.model.position))==null?void 0:_a3.bounds;if(!caretBounds)return false;const location={x:caretBounds.right,y:caretBounds.bottom};menu.show({target:this.element.querySelector("[part=container]"),location,onDismiss:()=>{var _a4;return(_a4=this.element)==null?void 0:_a4.focus();}});return true;}
getPrompt(id){const prompt=this.model.findAtom((a)=>a.type==="prompt"&&a.placeholderId===id);console.assert(prompt!==void 0,`MathLive 0.105.0:  no prompts with matching ID found`);return prompt;}
getPromptValue(id,format){const prompt=this.getPrompt(id);if(!prompt)return"";const first=this.model.offsetOf(prompt.firstChild);const last=this.model.offsetOf(prompt.lastChild);return this.model.getValue(first,last,format);}
getPrompts(filter){return this.model.atoms.filter((a)=>{if(a.type!=="prompt")return false;if(!filter)return true;if(filter.id&&a.placeholderId!==filter.id)return false;if(filter.locked&&a.locked!==filter.locked)return false;if(filter.correctness==="undefined"&&a.correctness)return false;if(filter.correctness&&a.correctness!==filter.correctness)
return false;return true;}).map((a)=>a.placeholderId);}
setPromptValue(id,value,insertOptions){if(value!==void 0){const prompt=this.getPrompt(id);if(!prompt){console.error(`MathLive 0.105.0: unknown prompt ${id}`);return;}
const branchRange=this.model.getBranchRange(this.model.offsetOf(prompt),"body");this.model.setSelection(branchRange);this.insert(value,__spreadProps(__spreadValues({},insertOptions),{insertionMode:"replaceSelection"}));}
if(insertOptions==null?void 0:insertOptions.silenceNotifications)
this.valueOnFocus=this.getValue();requestUpdate(this);}
setPromptState(id,state,locked){const prompt=this.getPrompt(id);if(!prompt){console.error(`MathLive 0.105.0: unknown prompt ${id}`);return;}
if(state==="undefined")prompt.correctness=void 0;else if(typeof state==="string")prompt.correctness=state;if(typeof locked==="boolean"){prompt.locked=locked;prompt.captureSelection=locked;}
requestUpdate(this);}
getPromptState(id){const prompt=this.getPrompt(id);if(!prompt){console.error(`MathLive 0.105.0: unknown prompt ${id}`);return[void 0,true];}
return[prompt.correctness,prompt.locked];}
getPromptRange(id){const prompt=this.getPrompt(id);if(!prompt){console.error(`MathLive 0.105.0: unknown prompt ${id}`);return[0,0];}
return this.model.getBranchRange(this.model.offsetOf(prompt),"body");}
canUndo(){return this.undoManager.canUndo();}
canRedo(){return this.undoManager.canRedo();}
popUndoStack(){this.undoManager.pop();}
snapshot(op){var _a3;if(this.undoManager.snapshot(op)){if(window.mathVirtualKeyboard.visible)
window.mathVirtualKeyboard.update(makeProxy(this));(_a3=this.host)==null?void 0:_a3.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:true,composed:true,detail:{type:"snapshot"}}));}}
stopCoalescingUndo(){this.undoManager.stopCoalescing(this.model.selection);}
stopRecording(){this.undoManager.stopRecording();}
startRecording(){this.undoManager.startRecording();}
undo(){var _a3;if(!this.undoManager.undo())return;(_a3=this.host)==null?void 0:_a3.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:true,composed:true,detail:{type:"undo"}}));}
redo(){var _a3;if(!this.undoManager.redo())return;(_a3=this.host)==null?void 0:_a3.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:true,composed:true,detail:{type:"redo"}}));}
resetUndo(){var _a3;(_a3=this.undoManager)==null?void 0:_a3.reset();}
onSelectionDidChange(){var _a3,_b3;const model=this.model;this.keyboardDelegate.setValue(model.getValue(model.selection,"latex-expanded"));if(model.selectionIsCollapsed){const latexGroup=getLatexGroup(model);const pos=model.position;const cursor=model.at(pos);const mode=(_a3=cursor.mode)!=null?_a3:effectiveMode(this.options);if(latexGroup&&(pos<model.offsetOf(latexGroup.firstChild)-1||pos>model.offsetOf(latexGroup.lastChild)+1)){complete(this,"accept",{mode});model.position=model.offsetOf(cursor);}else{const sibling=model.at(pos+1);if((sibling==null?void 0:sibling.type)==="first"&&sibling.mode==="latex")
model.position=pos+1;else if(latexGroup&&(sibling==null?void 0:sibling.mode)!=="latex")
model.position=pos-1;else{this.switchMode(mode);}}}
(_b3=this.host)==null?void 0:_b3.dispatchEvent(new Event("selection-change",{bubbles:true,composed:true}));if(window.mathVirtualKeyboard.visible)
window.mathVirtualKeyboard.update(makeProxy(this));updateEnvironmentPopover(this);}
onContentWillChange(options){var _a3,_b3,_c2;return(_c2=(_b3=this.host)==null?void 0:_b3.dispatchEvent(new InputEvent("beforeinput",__spreadProps(__spreadValues({},options),{data:options.data?options.data:(_a3=options.inputType)!=null?_a3:"",cancelable:true,bubbles:true,composed:true}))))!=null?_c2:true;}
onFocus(){if(this.focusBlurInProgress||!this.blurred)return;this.focusBlurInProgress=true;this.blurred=false;this.stopCoalescingUndo();this.valueOnFocus=this.model.getValue();if(this.hasEditablePrompts&&!this.model.at(this.model.anchor).parentPrompt)
this.executeCommand("moveToNextPlaceholder");render(this,{interactive:true});setTimeout(()=>{this.keyboardDelegate.blur();this.keyboardDelegate.focus();this.connectToVirtualKeyboard();this.focusBlurInProgress=false;},60);}
onBlur(){var _a3,_b3,_c2;if(this.focusBlurInProgress||this.blurred)return;this.focusBlurInProgress=true;this.stopCoalescingUndo();this.blurred=true;this.ariaLiveText.textContent="";hideSuggestionPopover(this);if(this.model.getValue()!==this.valueOnFocus){(_a3=this.host)==null?void 0:_a3.dispatchEvent(new Event("change",{bubbles:true,composed:true}));}
this.disconnectFromVirtualKeyboard();(_b3=this.host)==null?void 0:_b3.dispatchEvent(new Event("blur",{bubbles:false,composed:true}));(_c2=this.host)==null?void 0:_c2.dispatchEvent(new UIEvent("focusout",{bubbles:true,composed:true}));requestUpdate(this);this.focusBlurInProgress=false;hideEnvironmentPopover();if(mathfield_element_default.restoreFocusWhenDocumentFocused){const controller=new AbortController();const signal=controller.signal;window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{if(isValidMathfield(this))this.focus({preventScroll:true});},{once:true,signal});},{once:true,signal});document.addEventListener("focusin",()=>controller.abort(),{once:true});document.addEventListener("click",()=>controller.abort(),{once:true});}}
onInput(text){onInput(this,text);}
onKeystroke(evt){return onKeystroke(this,evt);}
onCompositionStart(_composition){deleteRange(this.model,range(this.model.selection),"insertText");const caretPoint=getCaretPoint(this.field);if(!caretPoint)return;requestAnimationFrame(()=>{render(this);this.keyboardDelegate.moveTo(caretPoint.x,caretPoint.y-caretPoint.height);});}
onCompositionUpdate(composition){updateComposition(this.model,composition);requestUpdate(this);}
onCompositionEnd(composition){removeComposition(this.model);onInput(this,composition,{simulateKeystroke:true});}
onCut(ev){if(!this.isSelectionEditable){this.model.announce("plonk");return;}
if(this.model.contentWillChange({inputType:"deleteByCut"})){this.stopCoalescingUndo();if(ev.clipboardData)ModeEditor.onCopy(this,ev);else ModeEditor.copyToClipboard(this,"latex");deleteRange(this.model,range(this.model.selection),"deleteByCut");this.snapshot("cut");requestUpdate(this);}}
onCopy(ev){if(ev.clipboardData)ModeEditor.onCopy(this,ev);else ModeEditor.copyToClipboard(this,"latex");}
onPaste(ev){let result=this.isSelectionEditable;if(result){result=ModeEditor.onPaste(this.model.at(this.model.position).mode,this,ev.clipboardData);}
if(!result)this.model.announce("plonk");ev.preventDefault();ev.stopPropagation();return result;}
onGeometryChange(){var _a3;(_a3=this._menu)==null?void 0:_a3.hide();updateSuggestionPopoverPosition(this);updateEnvironmentPopover(this);}
onWheel(ev){const wheelDelta=5*ev.deltaX;if(!Number.isFinite(wheelDelta)||wheelDelta===0)return;const field=this.field;if(wheelDelta<0&&field.scrollLeft===0)return;if(wheelDelta>0&&field.offsetWidth+field.scrollLeft>=field.scrollWidth)
return;field.scrollBy({top:0,left:wheelDelta});ev.preventDefault();ev.stopPropagation();}
getHTMLElement(atom){let target=atom;while(!target.id&&target.hasChildren)target=atom.children[0];return this.field.querySelector(`[data-atom-id="${target.id}"]`);}
get context(){var _a3,_b3;return{registers:(_a3=this.options.registers)!=null?_a3:{},smartFence:this.smartFence,letterShapeStyle:this.letterShapeStyle,minFontScale:this.minFontScale,maxMatrixCols:this.maxMatrixCols,placeholderSymbol:(_b3=this.options.placeholderSymbol)!=null?_b3:"\u25A2",colorMap:(name)=>this.colorMap(name),backgroundColorMap:(name)=>this.backgroundColorMap(name),getMacro:(token)=>getMacroDefinition(token,this.options.macros),atomIdsSettings:{seed:"random",groupNumbers:false}};}};register2({speak:(mathfield,scope,options)=>{return speak(mathfield,scope,options);}},{target:"mathfield"});function speak(mathfield,scope,speakOptions){var _a3;speakOptions=speakOptions!=null?speakOptions:{withHighlighting:false};const{model}=mathfield;function getAtoms(scope2){let result=null;switch(scope2){case"all":result=model.root;break;case"selection":result=model.getAtoms(model.selection);break;case"left":{result=model.getAtoms(model.offsetOf(model.at(model.position).leftSibling),model.position);break;}
case"right":{result=model.getAtoms(model.position,model.offsetOf(model.at(model.position).rightSibling));break;}
case"group":result=model.getAtoms(model.getSiblingsRange(model.position));break;case"parent":{const{parent}=model.at(model.position);if(parent==null?void 0:parent.parent)result=parent;else result=model.root;break;}
default:result=model.root;}
return result;}
function getFailedSpeech(scope2){let result="";switch(scope2){case"all":console.error("Internal failure: speak all failed");break;case"selection":result="no selection";break;case"left":result="at start";break;case"right":result="at end";break;case"group":console.error("Internal failure: speak group failed");break;case"parent":result="no parent";break;default:console.error('unknown speak_ param value: "'+scope2+'"');break;}
return result;}
const mfe=globalThis.MathfieldElement;const atoms=getAtoms(scope);if(atoms===null){(_a3=mfe.speakHook)==null?void 0:_a3.call(mfe,getFailedSpeech(scope));return false;}
if(speakOptions.withHighlighting||mfe.speechEngine==="amazon"){mfe.textToSpeechMarkup=globalThis.sre&&mfe.textToSpeechRules==="sre"?"ssml_step":"ssml";}
const text=atomToSpeakableText(atoms);if(isBrowser()&&speakOptions.withHighlighting){globalMathLive().readAloudMathfield=mathfield;render(mathfield,{forHighlighting:true});if(mfe.readAloudHook)mfe.readAloudHook(mathfield.field,text);}else if(mfe.speakHook)mfe.speakHook(text);return false;}
function defaultSpeakHook(text){var _a3,_b3;if(!isBrowser()){console.log("Speak:",text);return;}
const mfe=globalThis.MathfieldElement;if(!mfe.speechEngine||mfe.speechEngine==="local"){const utterance=new SpeechSynthesisUtterance(text);globalThis.speechSynthesis.speak(utterance);}else if(mfe.speechEngine==="amazon"){if(!("AWS"in window)){console.error(`MathLive 0.105.0: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk`);}else{const polly=new globalThis.AWS.Polly({apiVersion:"2016-06-10"});const parameters={OutputFormat:"mp3",VoiceId:(_a3=mfe.speechEngineVoice)!=null?_a3:"Joanna",Engine:["Amy","Emma","Brian","Ivy","Joanna","Kendra","Kimberly","Salli","Joey","Justin","Matthew"].includes((_b3=mfe.speechEngineVoice)!=null?_b3:"Joanna")?"neural":"standard",Text:text,TextType:"ssml"};polly.synthesizeSpeech(parameters,(err,data)=>{if(err){console.trace(`MathLive 0.105.0: \`polly.synthesizeSpeech()\` error: ${err}`);}else if(data==null?void 0:data.AudioStream){const uInt8Array=new Uint8Array(data.AudioStream);const blob=new Blob([uInt8Array.buffer],{type:"audio/mpeg"});const url=URL.createObjectURL(blob);const audioElement=new Audio(url);audioElement.play().catch((error)=>console.error(error));}else console.log("polly.synthesizeSpeech():",data);});}}else if(mfe.speechEngine==="google"){console.error(`MathLive 0.105.0: The Google speech engine is not supported yet. Please come again.`);}}
function removeHighlight(element){if(!element)return;element.classList.remove("ML__highlight");if(element.children)
for(const child of element.children)removeHighlight(child);}
function highlightAtomID(element,atomID){var _a3;if(!element)return;if(!atomID||((_a3=element.dataset)==null?void 0:_a3.atomId)===atomID){element.classList.add("ML__highlight");if(element.children&&element.children.length>0){[...element.children].forEach((x)=>{if(x instanceof HTMLElement)highlightAtomID(x);});}}else{element.classList.remove("ML__highlight");if(element.children&&element.children.length>0){[...element.children].forEach((x)=>{if(x instanceof HTMLElement)highlightAtomID(x,atomID);});}}}
function defaultReadAloudHook(element,text){var _a3;if(!isBrowser())return;if(globalThis.MathfieldElement.speechEngine!=="amazon"){console.error(`MathLive 0.105.0: Use Amazon TTS Engine for synchronized highlighting`);if(typeof globalThis.MathfieldElement.speakHook==="function")
globalThis.MathfieldElement.speakHook(text);return;}
if(!globalThis.AWS){console.error(`MathLive 0.105.0: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk`);return;}
const polly=new globalThis.AWS.Polly({apiVersion:"2016-06-10"});const parameters={OutputFormat:"json",VoiceId:(_a3=globalThis.MathfieldElement.speechEngineVoice)!=null?_a3:"Joanna",Engine:"standard",Text:text,TextType:"ssml",SpeechMarkTypes:["ssml"]};globalMathLive().readAloudElement=element;polly.synthesizeSpeech(parameters,(err,data)=>{if(err){console.trace(`MathLive 0.105.0: \`polly.synthesizeSpeech()\` error: ${err}`);return;}
if(!(data==null?void 0:data.AudioStream)){console.log("polly.synthesizeSpeech():",data);return;}
const response=new TextDecoder("utf-8").decode(new Uint8Array(data.AudioStream));globalMathLive().readAloudMarks=response.split("\n").map((x)=>x?JSON.parse(x):{});globalMathLive().readAloudTokens=[];for(const mark of globalMathLive().readAloudMarks)
if(mark.value)globalMathLive().readAloudTokens.push(mark.value);globalMathLive().readAloudCurrentMark="";parameters.OutputFormat="mp3";parameters.SpeechMarkTypes=[];polly.synthesizeSpeech(parameters,(err2,data2)=>{if(err2){console.trace(`MathLive 0.105.0: \`polly.synthesizeSpeech("${text}") error:${err2}`);return;}
if(!(data2==null?void 0:data2.AudioStream))return;const uInt8Array=new Uint8Array(data2.AudioStream);const blob=new Blob([uInt8Array.buffer],{type:"audio/mpeg"});const url=URL.createObjectURL(blob);const global=globalMathLive();if(!global.readAloudAudio){global.readAloudAudio=new Audio();global.readAloudAudio.addEventListener("ended",()=>{const mathfield=global.readAloudMathfield;global.readAloudStatus="ended";document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:true,composed:true}));if(mathfield){render(mathfield);global.readAloudElement=null;global.readAloudMathfield=null;global.readAloudTokens=[];global.readAloudMarks=[];global.readAloudCurrentMark="";}else removeHighlight(global.readAloudElement);});global.readAloudAudio.addEventListener("timeupdate",()=>{let value="";const target=global.readAloudAudio.currentTime*1e3+100;for(const mark of global.readAloudMarks)
if(mark.time<target)value=mark.value;if(global.readAloudCurrentMark!==value){global.readAloudCurrentToken=value;if(value&&value===global.readAloudFinalToken)
global.readAloudAudio.pause();else{global.readAloudCurrentMark=value;highlightAtomID(global.readAloudElement,global.readAloudCurrentMark);}}});}else global.readAloudAudio.pause();global.readAloudAudio.src=url;global.readAloudStatus="playing";document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:true,composed:true}));global.readAloudAudio.play();});});}
if(!isBrowser()){console.error(`MathLive 0.105.0: this version of the MathLive library is for use in the browser. A subset of the API is available on the server side in the "mathlive-ssr" library. If using server side rendering (with React for example) you may want to do a dynamic import of the MathLive library inside a \`useEffect()\` call.`);}
var gDeferredState=new WeakMap();var AUDIO_FEEDBACK_VOLUME=0.5;var DEPRECATED_OPTIONS={letterShapeStyle:"mf.letterShapeStyle = ...",horizontalSpacingScale:'Removed. Use `"thinmuskip"`, `"medmuskip"`, and `"thickmuskip"` registers ',macros:"mf.macros = ...",registers:"mf.registers = ...",backgroundColorMap:"mf.backgroundColorMap = ...",colorMap:"mf.colorMap = ...",enablePopover:"mf.popoverPolicy = ...",mathModeSpace:"mf.mathModeSpace = ...",placeholderSymbol:"mf.placeholderSymbol = ...",readOnly:"mf.readOnly = ...",removeExtraneousParentheses:"mf.removeExtraneousParentheses = ...",scriptDepth:"mf.scriptDepth = ...",smartFence:"mf.smartFence = ...",smartMode:"mf.smartMode = ...",smartSuperscript:"mf.smartSuperscript = ...",inlineShortcutTimeout:"mf.inlineShortcutTimeout = ...",inlineShortcuts:"mf.inlineShortcuts = ...",keybindings:"mf.keybindings = ...",virtualKeyboardMode:"mf.mathVirtualKeyboardPolicy = ...",customVirtualKeyboardLayers:"mathVirtualKeyboard.layers = ...",customVirtualKeyboards:"mathVirtualKeyboard.layouts = ...",keypressSound:"mathVirtualKeyboard.keypressSound = ...",keypressVibration:"mathVirtualKeyboard.keypressVibration = ...",plonkSound:"mathVirtualKeyboard.plonkSound = ...",virtualKeyboardContainer:"mathVirtualKeyboard.container = ...",virtualKeyboardLayout:"mathVirtualKeyboard.alphabeticLayout = ...",virtualKeyboardTheme:"No longer supported",virtualKeyboardToggleGlyph:"No longer supported",virtualKeyboardToolbar:"mathVirtualKeyboard.editToolbar = ...",virtualKeyboards:"Use `mathVirtualKeyboard.layouts`",speechEngine:"`MathfieldElement.speechEngine`",speechEngineRate:"`MathfieldElement.speechEngineRate`",speechEngineVoice:"`MathfieldElement.speechEngineVoice`",textToSpeechMarkup:"`MathfieldElement.textToSpeechMarkup`",textToSpeechRules:"`MathfieldElement.textToSpeechRules`",textToSpeechRulesOptions:"`MathfieldElement.textToSpeechRulesOptions`",readAloudHook:"`MathfieldElement.readAloudHook`",speakHook:"`MathfieldElement.speakHook`",computeEngine:"`MathfieldElement.computeEngine`",fontsDirectory:"`MathfieldElement.fontsDirectory`",soundsDirectory:"`MathfieldElement.soundsDirectory`",createHTML:"`MathfieldElement.createHTML`",onExport:"`mf.onExport`",onInlineShortcut:"`mf.onInlineShortcut`",onScrollIntoView:"`mf.onScrollIntoView`",locale:"MathfieldElement.locale = ...",strings:"MathfieldElement.strings = ...",decimalSeparator:"MathfieldElement.decimalSeparator = ...",fractionNavigationOrder:"MathfieldElement.fractionNavigationOrder = ..."};var _MathfieldElement=class _MathfieldElement extends HTMLElement{constructor(options){super();this._observer=null;if(options){const warnings=[];for(const key of Object.keys(options)){if(DEPRECATED_OPTIONS[key]){if(DEPRECATED_OPTIONS[key].startsWith("mf.")){if(!DEPRECATED_OPTIONS[key].startsWith(`mf.${key}`)){const newName=DEPRECATED_OPTIONS[key].match(/([a-zA-Z]+) =/);warnings.push(`Option \`${key}\` has been renamed \`${newName[1]}\``);}else{warnings.push(`Option \`${key}\` cannot be used as a constructor option. Use ${DEPRECATED_OPTIONS[key]}`);}}else{warnings.push(`Option \`${key}\` cannot be used as a constructor option. Use ${DEPRECATED_OPTIONS[key]}`);}}}
if(warnings.length>0){console.group(`%cMathLive 0.105.0: %cInvalid Options`,"color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem");console.warn(`Some of the options passed to \`new MathfieldElement(...)\` are invalid. 
          See mathfield/changelog/ for details.`);for(const warning of warnings)console.warn(warning);console.groupEnd();}}
if(isElementInternalsSupported()){this._internals=this.attachInternals();this._internals["role"]="math";this._internals.ariaLabel="math input field";this._internals.ariaMultiLine="false";}
this.attachShadow({mode:"open",delegatesFocus:true});if(this.shadowRoot&&"adoptedStyleSheets"in this.shadowRoot){this.shadowRoot.adoptedStyleSheets=[getStylesheet("core"),getStylesheet("mathfield"),getStylesheet("mathfield-element"),getStylesheet("ui"),getStylesheet("menu")];this.shadowRoot.appendChild(document.createElement("span"));const slot=document.createElement("slot");slot.style.display="none";this.shadowRoot.appendChild(slot);}else{this.shadowRoot.innerHTML="<style>"+getStylesheetContent("core")+getStylesheetContent("mathfield")+getStylesheetContent("mathfield-element")+getStylesheetContent("ui")+getStylesheetContent("menu")+'</style><span></span><slot style="display:none"></slot>';}
if(options)this._setOptions(options);}
static get formAssociated(){return isElementInternalsSupported();}
static get optionsAttributes(){return{"default-mode":"string","letter-shape-style":"string","min-font-scale":"number","max-matrix-cols":"number","popover-policy":"string","math-mode-space":"string","read-only":"boolean","remove-extraneous-parentheses":"on/off","smart-fence":"on/off","smart-mode":"on/off","smart-superscript":"on/off","inline-shortcut-timeout":"string","script-depth":"string","placeholder":"string","virtual-keyboard-target-origin":"string","math-virtual-keyboard-policy":"string"};}
static get observedAttributes(){return[...Object.keys(this.optionsAttributes),"contenteditable","disabled","readonly","read-only"];}
static get fontsDirectory(){return this._fontsDirectory;}
static set fontsDirectory(value){if(value!==this._fontsDirectory){this._fontsDirectory=value;reloadFonts();}}
get fontsDirectory(){throw new Error("Use MathfieldElement.fontsDirectory instead");}
set fontsDirectory(_value){throw new Error("Use MathfieldElement.fontsDirectory instead");}
static get soundsDirectory(){return this._soundsDirectory;}
static set soundsDirectory(value){this._soundsDirectory=value;this.audioBuffers={};}
get soundsDirectory(){throw new Error("Use MathfieldElement.soundsDirectory instead");}
set soundsDirectory(_value){throw new Error("Use MathfieldElement.soundsDirectory instead");}
static get keypressSound(){return this._keypressSound;}
static set keypressSound(value){var _a3,_b3,_c2;this.audioBuffers={};if(value===null){this._keypressSound={spacebar:null,return:null,delete:null,default:null};}else if(typeof value==="string"){this._keypressSound={spacebar:value,return:value,delete:value,default:value};}else if(typeof value==="object"&&"default"in value){this._keypressSound={spacebar:(_a3=value.spacebar)!=null?_a3:value.default,return:(_b3=value.return)!=null?_b3:value.default,delete:(_c2=value.delete)!=null?_c2:value.default,default:value.default};}}
static get plonkSound(){return this._plonkSound;}
static set plonkSound(value){this.audioBuffers={};this._plonkSound=value;}
static get audioContext(){if(!this._audioContext)this._audioContext=new AudioContext();return this._audioContext;}
static get speechEngine(){return this._speechEngine;}
static set speechEngine(value){this._speechEngine=value;}
static get speechEngineRate(){return this._speechEngineRate;}
static set speechEngineRate(value){this._speechEngineRate=value;}
static get speechEngineVoice(){return this._speechEngineVoice;}
static set speechEngineVoice(value){this._speechEngineVoice=value;}
static get textToSpeechMarkup(){return this._textToSpeechMarkup;}
static set textToSpeechMarkup(value){this._textToSpeechMarkup=value;}
static get textToSpeechRules(){return this._textToSpeechRules;}
static set textToSpeechRules(value){this._textToSpeechRules=value;}
static get textToSpeechRulesOptions(){return this._textToSpeechRulesOptions;}
static set textToSpeechRulesOptions(value){this._textToSpeechRulesOptions=value;}
static get locale(){return l10n.locale;}
static set locale(value){if(value==="auto")value=navigator.language.slice(0,5);l10n.locale=value;}
get locale(){throw new Error("Use MathfieldElement.locale instead");}
set locale(_value){throw new Error("Use MathfieldElement.locale instead");}
static get strings(){return l10n.strings;}
static set strings(value){l10n.merge(value);}
get strings(){throw new Error("Use MathfieldElement.strings instead");}
set strings(_val){throw new Error("Use MathfieldElement.strings instead");}
static get decimalSeparator(){return this._decimalSeparator;}
static set decimalSeparator(value){this._decimalSeparator=value;if(this._computeEngine){this._computeEngine.decimalSeparator=this.decimalSeparator===","?"{,}":".";}}
get decimalSeparator(){throw new Error("Use MathfieldElement.decimalSeparator instead");}
set decimalSeparator(_val){throw new Error("Use MathfieldElement.decimalSeparator instead");}
static get fractionNavigationOrder(){return _MathEnvironment.fractionNavigationOrder;}
static set fractionNavigationOrder(s){if(s!=="numerator-denominator"&&s!=="denominator-numerator")
throw new Error("Invalid value");if(_MathEnvironment.fractionNavigationOrder===s)return;_MathEnvironment.fractionNavigationOrder=s;reparseAllMathfields();}
static get computeEngine(){var _a3,_b3;if(this._computeEngine===void 0){const ComputeEngineCtor=(_a3=window[Symbol.for("io.cortexjs.compute-engine")])==null?void 0:_a3.ComputeEngine;if(!ComputeEngineCtor)return null;this._computeEngine=new ComputeEngineCtor();if(this._computeEngine&&this.decimalSeparator===",")
this._computeEngine.decimalSeparator="{,}";}
return(_b3=this._computeEngine)!=null?_b3:null;}
static set computeEngine(value){this._computeEngine=value;}
get computeEngine(){throw new Error("Use MathfieldElement.computeEngine instead");}
set computeEngine(_val){throw new Error("Use MathfieldElement.computeEngine instead");}
static get isFunction(){if(typeof this._isFunction!=="function")return()=>false;return this._isFunction;}
static set isFunction(value){this._isFunction=value;reparseAllMathfields();}
static async loadSound(sound){delete this.audioBuffers[sound];let soundFile="";switch(sound){case"keypress":soundFile=this._keypressSound.default;break;case"return":soundFile=this._keypressSound.return;break;case"spacebar":soundFile=this._keypressSound.spacebar;break;case"delete":soundFile=this._keypressSound.delete;break;case"plonk":soundFile=this.plonkSound;break;}
if(typeof soundFile!=="string")return;soundFile=soundFile.trim();const soundsDirectory=this.soundsDirectory;if(soundsDirectory===void 0||soundsDirectory===null||soundsDirectory==="null"||soundFile==="none"||soundFile==="null")
return;try{const response=await fetch(await resolveUrl(`${soundsDirectory}/${soundFile}`));const arrayBuffer=await response.arrayBuffer();const audioBuffer=await this.audioContext.decodeAudioData(arrayBuffer);this.audioBuffers[sound]=audioBuffer;}catch(e){}}
static async playSound(name){if(this.audioContext.state==="suspended"||this.audioContext.state==="interrupted")
await this.audioContext.resume();if(!this.audioBuffers[name])await this.loadSound(name);if(!this.audioBuffers[name])return;const soundSource=this.audioContext.createBufferSource();soundSource.buffer=this.audioBuffers[name];const gainNode=this.audioContext.createGain();gainNode.gain.value=AUDIO_FEEDBACK_VOLUME;soundSource.connect(gainNode).connect(this.audioContext.destination);soundSource.start();}
showMenu(_){var _a3,_b3;return(_b3=(_a3=this._mathfield)==null?void 0:_a3.showMenu(_))!=null?_b3:false;}
get mathVirtualKeyboard(){throw new Error("The `mathVirtualKeyboard` property is not available on the MathfieldElement. Use `window.mathVirtualKeyboard` instead.");}
onPointerDown(){window.addEventListener("pointerup",(evt)=>{const mf=this._mathfield;if(!mf)return;if(evt.target===this&&!mf.disabled){this.dispatchEvent(new MouseEvent("click",{altKey:evt.altKey,button:evt.button,buttons:evt.buttons,clientX:evt.clientX,clientY:evt.clientY,ctrlKey:evt.ctrlKey,metaKey:evt.metaKey,movementX:evt.movementX,movementY:evt.movementY,relatedTarget:evt.relatedTarget,screenX:evt.screenX,screenY:evt.screenY,shiftKey:evt.shiftKey}));const offset=this.getOffsetFromPoint(evt.clientX,evt.clientY);if(offset>=0)_MathfieldElement.openUrl(getHref(mf,offset));if(evt.pointerType==="touch"&&this.selectionIsCollapsed)
this.position=offset;}},{once:true});}
getPromptValue(placeholderId,format){var _a3,_b3;return(_b3=(_a3=this._mathfield)==null?void 0:_a3.getPromptValue(placeholderId,format))!=null?_b3:"";}
setPromptValue(id,content,insertOptions){var _a3;(_a3=this._mathfield)==null?void 0:_a3.setPromptValue(id,content,insertOptions);}
getPromptRange(id){var _a3,_b3;return(_b3=(_a3=this._mathfield)==null?void 0:_a3.getPromptRange(id))!=null?_b3:null;}
getPrompts(filter){var _a3,_b3;return(_b3=(_a3=this._mathfield)==null?void 0:_a3.getPrompts(filter))!=null?_b3:[];}
get form(){var _a3;return(_a3=this._internals)==null?void 0:_a3["form"];}
get name(){var _a3;return(_a3=this.getAttribute("name"))!=null?_a3:"";}
get type(){return this.localName;}
get mode(){var _a3,_b3;return(_b3=(_a3=this._mathfield)==null?void 0:_a3.model.mode)!=null?_b3:this.defaultMode==="text"?"text":"math";}
set mode(value){var _a3;(_a3=this._mathfield)==null?void 0:_a3.switchMode(value);}
get expression(){if(!this._mathfield)return void 0;if(!window[Symbol.for("io.cortexjs.compute-engine")]){console.error(`MathLive 0.105.0: The CortexJS Compute Engine library is not available.
        
        Load the library, for example with:
        
        import "https://unpkg.com/@cortex-js/compute-engine?module"`);return null;}
return this._mathfield.expression;}
set expression(mathJson){var _a3,_b3;if(!this._mathfield)return;const latex=(_b3=(_a3=_MathfieldElement.computeEngine)==null?void 0:_a3.box(mathJson).latex)!=null?_b3:null;if(latex!==null)this._mathfield.setValue(latex);if(!window[Symbol.for("io.cortexjs.compute-engine")]){console.error(`MathLive 0.105.0: The Compute Engine library is not available.
        
        Load the library, for example with:
        
        import "https://unpkg.com/@cortex-js/compute-engine?module"`);}}
get errors(){var _a3,_b3;return(_b3=(_a3=this._mathfield)==null?void 0:_a3.errors)!=null?_b3:[];}
_getOptions(keys){if(this._mathfield)return get(this._mathfield.options,keys);if(!gDeferredState.has(this))return null;return __spreadValues({},get(__spreadValues(__spreadValues({},getDefault()),update(gDeferredState.get(this).options)),keys));}
getOptions(keys){console.warn(`%cMathLive 0.105.0: %cDeprecated Usage%c
      \`mf.getOptions()\` is deprecated. Read the property directly on the mathfield instead.
      See mathfield/changelog/ for details.`,"color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem","color: inherit, font-size: 1rem");if(this._mathfield)return get(this._mathfield.options,keys);if(!gDeferredState.has(this))return null;return get(__spreadValues(__spreadValues({},getDefault()),update(gDeferredState.get(this).options)),keys);}
reflectAttributes(){const defaultOptions=getDefault();const options=this._getOptions();Object.keys(_MathfieldElement.optionsAttributes).forEach((x)=>{const prop=toCamelCase(x);if(_MathfieldElement.optionsAttributes[x]==="on/off"){if(defaultOptions[prop]!==options[prop])
this.setAttribute(x,options[prop]?"on":"off");else this.removeAttribute(x);}else if(defaultOptions[prop]!==options[prop]){if(_MathfieldElement.optionsAttributes[x]==="boolean"){if(options[prop]){this.setAttribute(x,"");}else{this.removeAttribute(x);}}else{if(typeof options[prop]==="string"||typeof options[prop]==="number")
this.setAttribute(x,options[prop].toString());}}});}
getOption(key){console.warn(`%cMathLive 0.105.0: %cDeprecated Usage%c
      \`mf.getOption()\` is deprecated. Read the property directly on the mathfield instead.
      See mathfield/changelog/ for details.`,"color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem","color: inherit, font-size: 1rem");return this._getOptions([key])[key];}
_getOption(key){return this._getOptions([key])[key];}
_setOptions(options){if(this._mathfield)this._mathfield.setOptions(options);else if(gDeferredState.has(this)){const mergedOptions=__spreadValues(__spreadValues({},gDeferredState.get(this).options),options);gDeferredState.set(this,__spreadProps(__spreadValues({},gDeferredState.get(this)),{selection:{ranges:mergedOptions.readOnly?[[0,0]]:[[0,-1]]},options:mergedOptions}));}else{gDeferredState.set(this,{value:void 0,selection:{ranges:[[0,0]]},options,menuItems:void 0});}
this.reflectAttributes();}
setOptions(options){console.group(`%cMathLive 0.105.0: %cDeprecated Usage`,"color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem");console.warn(` \`mf.setOptions()\` is deprecated. Set the property directly on the mathfield instead.
      See mathfield/changelog/ for details.`);for(const key of Object.keys(options)){if(DEPRECATED_OPTIONS[key]){console.warn(`\`mf.setOptions({${key}:...})\` -> ${DEPRECATED_OPTIONS[key]}`);}}
console.groupEnd();this._setOptions(options);}
executeCommand(...args){var _a3,_b3;let selector;if(args.length===1)
selector=args[0];else selector=[args[0],...args.slice(1)];if(selector)return(_b3=(_a3=this._mathfield)==null?void 0:_a3.executeCommand(selector))!=null?_b3:false;throw new Error("Invalid selector");}
getValue(arg1,arg2,arg3){var _a3,_b3;if(this._mathfield)
return this._mathfield.model.getValue(arg1,arg2,arg3);if(gDeferredState.has(this)){let start;let end;let format=void 0;if(isSelection(arg1)){[start,end]=arg1.ranges[0];format=arg2;}else if(isRange(arg1)){[start,end]=arg1;format=arg2;}else if(isOffset(arg1)&&isOffset(arg2)){start=arg1;end=arg2;format=arg3;}else{start=0;end=-1;format=arg1;}
if((format===void 0||format==="latex")&&start===0&&end===-1)
return(_b3=(_a3=gDeferredState.get(this).value)!=null?_a3:this.textContent)!=null?_b3:"";}
return"";}
setValue(value,options){if(this._mathfield&&value!==void 0){const currentValue=this._mathfield.model.getValue();if(currentValue===value)return;options!=null?options:options={silenceNotifications:true,mode:"math"};this._mathfield.setValue(value,options);return;}
if(gDeferredState.has(this)){const options2=gDeferredState.get(this).options;gDeferredState.set(this,{value,selection:{ranges:[[-1,-1]],direction:"forward"},options:options2,menuItems:void 0});return;}
const attrOptions=getOptionsFromAttributes(this);gDeferredState.set(this,{value,selection:{ranges:[[-1,-1]],direction:"forward"},options:attrOptions,menuItems:void 0});}
hasFocus(){var _a3,_b3;return(_b3=(_a3=this._mathfield)==null?void 0:_a3.hasFocus())!=null?_b3:false;}
focus(){var _a3;(_a3=this._mathfield)==null?void 0:_a3.focus();}
blur(){var _a3;(_a3=this._mathfield)==null?void 0:_a3.blur();}
select(){var _a3;(_a3=this._mathfield)==null?void 0:_a3.select();}
insert(s,options){var _a3,_b3;return(_b3=(_a3=this._mathfield)==null?void 0:_a3.insert(s,options))!=null?_b3:false;}
applyStyle(style,options){var _a3;return(_a3=this._mathfield)==null?void 0:_a3.applyStyle(style,options);}
queryStyle(style){var _a3,_b3;return(_b3=(_a3=this._mathfield)==null?void 0:_a3.queryStyle(style))!=null?_b3:"none";}
getOffsetFromPoint(x,y,options){if(!this._mathfield)return-1;return offsetFromPoint(this._mathfield,x,y,options);}
getElementInfo(offset){return getElementInfo(this._mathfield,offset);}
resetUndo(){var _a3;(_a3=this._mathfield)==null?void 0:_a3.resetUndo();}
canUndo(){if(!this._mathfield)return false;return this._mathfield.canUndo();}
canRedo(){if(!this._mathfield)return false;return this._mathfield.canRedo();}
handleEvent(evt){var _a3,_b3,_c2,_d2,_e,_f,_g;if(Scrim.state!=="closed")return;if(((_b3=(_a3=this._mathfield)==null?void 0:_a3.menu)==null?void 0:_b3.state)!=="closed")return;if(evt.type==="pointerdown"){this.onPointerDown();const kbdDelegate=(_c2=this._mathfield)==null?void 0:_c2.keyboardDelegate;kbdDelegate==null?void 0:kbdDelegate.blur();kbdDelegate==null?void 0:kbdDelegate.focus();}
if(evt.type==="focus")(_d2=this._mathfield)==null?void 0:_d2.focus();if(evt.type!=="blur")return;const touch=isTouchCapable();if(touch&&((_e=window==null?void 0:window.mathVirtualKeyboard)==null?void 0:_e.visible))return;if(((_f=Scrim.scrim)==null?void 0:_f.state)!=="closed"||touch&&isInIframe())return;(_g=this._mathfield)==null?void 0:_g.blur();}
connectedCallback(){var _a3,_b3,_c2,_d2;const shadowRoot=this.shadowRoot;const host=shadowRoot.host;const computedStyle=window.getComputedStyle(this);const userSelect=computedStyle.userSelect!=="none";if(userSelect)host.addEventListener("pointerdown",this,true);else{const span=shadowRoot.querySelector("span");span.style.pointerEvents="none";}
host.addEventListener("focus",this,true);host.addEventListener("blur",this,true);this._observer=new MutationObserver(()=>{var _a4;this.value=(_a4=this.textContent)!=null?_a4:"";});this._observer.observe(this,{childList:true,characterData:true,subtree:true});if(!isElementInternalsSupported()){if(!this.hasAttribute("role"))this.setAttribute("role","math");if(!this.hasAttribute("aria-label"))
this.setAttribute("aria-label","math input field");this.setAttribute("aria-multiline","false");}
if(userSelect&&!this.hasAttribute("contenteditable"))
this.setAttribute("contenteditable","true");if(!this.hasAttribute("tabindex"))this.setAttribute("tabindex","0");const slot=shadowRoot.querySelector("slot:not([name])");if(slot){try{this._style=slot.assignedElements().filter((x)=>x.tagName.toLowerCase()==="style").map((x)=>x.textContent).join("");}catch(error){console.error(error);}}
if(this._style){const styleElement=document.createElement("style");styleElement.textContent=this._style;shadowRoot.appendChild(styleElement);}
let value="";if(this.hasAttribute("value"))value=this.getAttribute("value");else{value=(_a3=slot==null?void 0:slot.assignedNodes().map((x)=>x.nodeType===3?x.textContent:"").join("").trim())!=null?_a3:"";}
this._mathfield=new _Mathfield(shadowRoot.querySelector(":host > span"),__spreadProps(__spreadValues({},(_c2=(_b3=gDeferredState.get(this))==null?void 0:_b3.options)!=null?_c2:getOptionsFromAttributes(this)),{eventSink:this,value}));if(!gDeferredState.has(this)){this.upgradeProperty("disabled");this.upgradeProperty("readonly");for(const attr of Object.keys(_MathfieldElement.optionsAttributes))
this.upgradeProperty(toCamelCase(attr));}
if(!((_d2=this._mathfield)==null?void 0:_d2.model)){this._mathfield=null;return;}
if(gDeferredState.has(this)){const mf=this._mathfield;const state=gDeferredState.get(this);const menuItems=state.menuItems;mf.model.deferNotifications({content:false,selection:false},()=>{const value2=state.value;if(value2!==void 0)mf.setValue(value2);mf.model.selection=state.selection;gDeferredState.delete(this);});if(menuItems)this.menuItems=menuItems;}
window.queueMicrotask(()=>{if(!this.isConnected)return;this.dispatchEvent(new Event("mount",{cancelable:false,bubbles:true,composed:true}));});void loadFonts();}
disconnectedCallback(){var _a3,_b3,_c2;this.shadowRoot.host.removeEventListener("pointerdown",this,true);if(!this._mathfield)return;(_a3=this._observer)==null?void 0:_a3.disconnect();this._observer=null;window.queueMicrotask(()=>(this.dispatchEvent(new Event("unmount",{cancelable:false,bubbles:true,composed:true}))));const options=get(this._mathfield.options,Object.keys(_MathfieldElement.optionsAttributes).map((x)=>toCamelCase(x)));gDeferredState.set(this,{value:this._mathfield.getValue(),selection:this._mathfield.model.selection,menuItems:(_c2=(_b3=this._mathfield.menu)==null?void 0:_b3.menuItems)!=null?_c2:void 0,options});this._mathfield.dispose();this._mathfield=null;}
upgradeProperty(prop){if(this.hasOwnProperty(prop)){const value=this[prop];delete this[prop];if(prop==="readonly"||prop==="read-only")prop="readOnly";this[prop]=value;}}
attributeChangedCallback(name,oldValue,newValue){if(oldValue===newValue)return;const hasValue=newValue!==null;switch(name){case"contenteditable":requestUpdate(this._mathfield);break;case"placeholder":if(newValue===false)newValue="";this.placeholder=newValue;break;case"disabled":this.disabled=hasValue;break;case"read-only":case"readonly":this.readOnly=hasValue;break;default:}}
get readonly(){return this.hasAttribute("readonly")||this.hasAttribute("read-only");}
set readonly(value){const isReadonly=Boolean(value);if(isReadonly){this.setAttribute("readonly","");if(isElementInternalsSupported())this._internals.ariaReadOnly="true";else this.setAttribute("aria-readonly","true");this.setAttribute("aria-readonly","true");}else{if(isElementInternalsSupported())this._internals.ariaReadOnly="false";else this.removeAttribute("aria-readonly");this.removeAttribute("readonly");this.removeAttribute("read-only");}
this._setOptions({readOnly:isReadonly});}
get disabled(){return this.hasAttribute("disabled");}
set disabled(value){var _a3;const isDisabled=Boolean(value);if(isDisabled)this.setAttribute("disabled","");else this.removeAttribute("disabled");if(isElementInternalsSupported())
this._internals.ariaDisabled=isDisabled?"true":"false";else this.setAttribute("aria-disabled",isDisabled?"true":"false");if(isDisabled&&((_a3=this._mathfield)==null?void 0:_a3.hasFocus)&&window.mathVirtualKeyboard.visible)
this._mathfield.executeCommand("hideVirtualKeyboard");}
get value(){return this.getValue();}
set value(value){this.setValue(value);}
get defaultMode(){return this._getOption("defaultMode");}
set defaultMode(value){this._setOptions({defaultMode:value});}
get macros(){if(!this._mathfield)throw new Error("Mathfield not mounted");return this._getOption("macros");}
set macros(value){this._setOptions({macros:value});}
get registers(){if(!this._mathfield)throw new Error("Mathfield not mounted");const that=this;return new Proxy({},{get:(_,prop)=>{if(typeof prop!=="string")return void 0;return that._getOption("registers")[prop];},set(_,prop,value){if(typeof prop!=="string")return false;that._setOptions({registers:__spreadProps(__spreadValues({},that._getOption("registers")),{[prop]:value})});return true;},ownKeys:()=>Reflect.ownKeys(that._getOption("registers")),getOwnPropertyDescriptor:(_,prop)=>{const value=that._getOption("registers")[prop];if(value!==void 0){return{configurable:true,enumerable:true,value,writable:true};}
return void 0;}});}
set registers(value){this._setOptions({registers:value});}
get colorMap(){return this._getOption("colorMap");}
set colorMap(value){this._setOptions({colorMap:value});}
get backgroundColorMap(){return this._getOption("backgroundColorMap");}
set backgroundColorMap(value){this._setOptions({backgroundColorMap:value});}
get letterShapeStyle(){return this._getOption("letterShapeStyle");}
set letterShapeStyle(value){this._setOptions({letterShapeStyle:value});}
get minFontScale(){return this._getOption("minFontScale");}
set minFontScale(value){this._setOptions({minFontScale:value});}
get maxMatrixCols(){return this._getOption("maxMatrixCols");}
set maxMatrixCols(value){this._setOptions({maxMatrixCols:value});}
get smartMode(){return this._getOption("smartMode");}
set smartMode(value){this._setOptions({smartMode:value});}
get smartFence(){return this._getOption("smartFence");}
set smartFence(value){this._setOptions({smartFence:value});}
get smartSuperscript(){return this._getOption("smartSuperscript");}
set smartSuperscript(value){this._setOptions({smartSuperscript:value});}
get scriptDepth(){return this._getOption("scriptDepth");}
set scriptDepth(value){this._setOptions({scriptDepth:value});}
get removeExtraneousParentheses(){return this._getOption("removeExtraneousParentheses");}
set removeExtraneousParentheses(value){this._setOptions({removeExtraneousParentheses:value});}
get mathModeSpace(){return this._getOption("mathModeSpace");}
set mathModeSpace(value){this._setOptions({mathModeSpace:value});}
get placeholderSymbol(){return this._getOption("placeholderSymbol");}
set placeholderSymbol(value){this._setOptions({placeholderSymbol:value});}
get placeholder(){var _a3;return(_a3=this.getAttribute("placeholder"))!=null?_a3:"";}
set placeholder(value){var _a3;if(typeof value!=="string")return;(_a3=this._mathfield)==null?void 0:_a3.setOptions({contentPlaceholder:value});}
get popoverPolicy(){return this._getOption("popoverPolicy");}
set popoverPolicy(value){this._setOptions({popoverPolicy:value});}
get environmentPopoverPolicy(){return this._getOption("environmentPopoverPolicy");}
set environmentPopoverPolicy(value){this._setOptions({environmentPopoverPolicy:value});}
get menuItems(){var _a3;if(!this._mathfield)throw new Error("Mathfield not mounted");return(_a3=this._mathfield.menu._menuItems.map((x)=>x.menuItem))!=null?_a3:[];}
set menuItems(menuItems){var _a3;if(!this._mathfield)throw new Error("Mathfield not mounted");if(this._mathfield){const btn=(_a3=this._mathfield.element)==null?void 0:_a3.querySelector("[part=menu-toggle]");if(btn)btn.style.display=menuItems.length===0?"none":"";this._mathfield.menu.menuItems=menuItems;}}
get mathVirtualKeyboardPolicy(){return this._getOption("mathVirtualKeyboardPolicy");}
set mathVirtualKeyboardPolicy(value){this._setOptions({mathVirtualKeyboardPolicy:value});}
get inlineShortcuts(){if(!this._mathfield)throw new Error("Mathfield not mounted");return this._getOption("inlineShortcuts");}
set inlineShortcuts(value){if(!this._mathfield)throw new Error("Mathfield not mounted");this._setOptions({inlineShortcuts:value});}
get inlineShortcutTimeout(){return this._getOption("inlineShortcutTimeout");}
set inlineShortcutTimeout(value){this._setOptions({inlineShortcutTimeout:value});}
get keybindings(){if(!this._mathfield)throw new Error("Mathfield not mounted");return this._getOption("keybindings");}
set keybindings(value){if(!this._mathfield)throw new Error("Mathfield not mounted");this._setOptions({keybindings:value});}
get onInsertStyle(){const hook=this._getOption("onInsertStyle");if(hook===void 0)return defaultInsertStyleHook;return hook;}
set onInsertStyle(value){this._setOptions({onInsertStyle:value});}
get onInlineShortcut(){return this._getOption("onInlineShortcut");}
set onInlineShortcut(value){this._setOptions({onInlineShortcut:value});}
get onScrollIntoView(){return this._getOption("onScrollIntoView");}
set onScrollIntoView(value){this._setOptions({onScrollIntoView:value});}
get onExport(){return this._getOption("onExport");}
set onExport(value){this._setOptions({onExport:value});}
get readOnly(){return this._getOption("readOnly");}
set readOnly(value){this._setOptions({readOnly:value});}
get isSelectionEditable(){var _a3,_b3;return(_b3=(_a3=this._mathfield)==null?void 0:_a3.isSelectionEditable)!=null?_b3:false;}
setPromptState(id,state,locked){var _a3;(_a3=this._mathfield)==null?void 0:_a3.setPromptState(id,state,locked);}
getPromptState(id){var _a3,_b3;return(_b3=(_a3=this._mathfield)==null?void 0:_a3.getPromptState(id))!=null?_b3:[void 0,true];}
get virtualKeyboardTargetOrigin(){return this._getOption("virtualKeyboardTargetOrigin");}
set virtualKeyboardTargetOrigin(value){this._setOptions({virtualKeyboardTargetOrigin:value});}
get selection(){if(this._mathfield)return this._mathfield.model.selection;if(gDeferredState.has(this))return gDeferredState.get(this).selection;return{ranges:[[0,0]],direction:"forward"};}
set selection(sel){if(typeof sel==="number")sel={ranges:[[sel,sel]]};if(this._mathfield){this._mathfield.model.selection=sel;requestUpdate(this._mathfield);return;}
if(gDeferredState.has(this)){gDeferredState.set(this,__spreadProps(__spreadValues({},gDeferredState.get(this)),{selection:sel}));return;}
gDeferredState.set(this,{value:void 0,selection:sel,options:getOptionsFromAttributes(this),menuItems:void 0});}
get selectionIsCollapsed(){const selection=this.selection;return selection.ranges.length===1&&selection.ranges[0][0]===selection.ranges[0][1];}
get position(){if(this._mathfield)return this._mathfield.model.position;if(gDeferredState.has(this))
return gDeferredState.get(this).selection.ranges[0][0];return 0;}
set position(offset){if(this._mathfield){this._mathfield.model.position=offset;requestUpdate(this._mathfield);}
if(gDeferredState.has(this)){gDeferredState.set(this,__spreadProps(__spreadValues({},gDeferredState.get(this)),{selection:{ranges:[[offset,offset]]}}));return;}
gDeferredState.set(this,{value:void 0,selection:{ranges:[[offset,offset]]},options:getOptionsFromAttributes(this),menuItems:void 0});}
get lastOffset(){var _a3,_b3;return(_b3=(_a3=this._mathfield)==null?void 0:_a3.model.lastOffset)!=null?_b3:-1;}};_MathfieldElement.version="0.105.0";_MathfieldElement.openUrl=(href)=>{if(!href)return;const url=new URL(href);if(!["http:","https:","file:"].includes(url.protocol.toLowerCase())){_MathfieldElement.playSound("plonk");return;}
window.open(url,"_blank");};_MathfieldElement._fontsDirectory="./fonts";_MathfieldElement._soundsDirectory="./sounds";_MathfieldElement.keypressVibration=true;_MathfieldElement._keypressSound={spacebar:"keypress-spacebar.wav",return:"keypress-return.wav",delete:"keypress-delete.wav",default:"keypress-standard.wav"};_MathfieldElement._plonkSound="plonk.wav";_MathfieldElement.audioBuffers={};_MathfieldElement.createHTML=(x)=>x;_MathfieldElement._speechEngineRate="100%";_MathfieldElement._speechEngineVoice="Joanna";_MathfieldElement._textToSpeechMarkup="";_MathfieldElement._textToSpeechRules="mathlive";_MathfieldElement._textToSpeechRulesOptions={};_MathfieldElement.speakHook=defaultSpeakHook;_MathfieldElement.readAloudHook=defaultReadAloudHook;_MathfieldElement.restoreFocusWhenDocumentFocused=true;_MathfieldElement._decimalSeparator=".";_MathfieldElement._isFunction=(command)=>{var _a3,_b3;const ce=globalThis.MathfieldElement.computeEngine;return(_b3=(_a3=ce==null?void 0:ce.parse(command).domain)==null?void 0:_a3.isFunction)!=null?_b3:false;};var MathfieldElement=_MathfieldElement;function toCamelCase(s){return s.replace(/[^a-zA-Z\d]+(.)/g,(_m,c)=>c.toUpperCase());}
function getOptionsFromAttributes(mfe){const result={readOnly:false};const attribs=MathfieldElement.optionsAttributes;Object.keys(attribs).forEach((x)=>{var _a3;if(mfe.hasAttribute(x)){let value=mfe.getAttribute(x);if(x==="placeholder")result.contentPlaceholder=value!=null?value:"";else if(attribs[x]==="boolean")result[toCamelCase(x)]=true;else if(attribs[x]==="on/off"){value=(_a3=value==null?void 0:value.toLowerCase())!=null?_a3:"";if(value==="on"||value==="true")result[toCamelCase(x)]=true;else if(value==="off"||value==="false")
result[toCamelCase(x)]=false;else result[toCamelCase(x)]=void 0;}else if(attribs[x]==="number")
result[toCamelCase(x)]=Number.parseFloat(value!=null?value:"0");else result[toCamelCase(x)]=value;}});return result;}
function isElementInternalsSupported(){if(!("ElementInternals"in window)||!HTMLElement.prototype.attachInternals)
return false;if(!("role"in window.ElementInternals.prototype))return false;return true;}
var mathfield_element_default=MathfieldElement;var _a2,_b2,_c,_d;if(isBrowser()&&!((_a2=window.customElements)==null?void 0:_a2.get("math-field"))){(_c=window[_b2=Symbol.for("io.cortexjs.mathlive")])!=null?_c:window[_b2]={};const global=window[Symbol.for("io.cortexjs.mathlive")];global.version="0.105.0";globalThis.MathfieldElement=MathfieldElement;(_d=window.customElements)==null?void 0:_d.define("math-field",MathfieldElement);}
function findEndOfMath(delimiter,text,startIndex){let index=startIndex;let braceLevel=0;const delimLength=delimiter.length;while(index<text.length){const character=text[index];if(braceLevel<=0&&text.slice(index,index+delimLength)===delimiter)
return index;if(character==="\\")index++;else if(character==="{")braceLevel++;else if(character==="}")braceLevel--;index++;}
return-1;}
function splitAtDelimiters(startData,leftDelim,rightDelim,mathstyle,format="latex"){const finalData=[];for(const startDatum of startData){if(startDatum.type==="text"){const text=startDatum.data;let lookingForLeft=true;let currIndex=0;let nextIndex;nextIndex=text.indexOf(leftDelim);if(nextIndex!==-1){currIndex=nextIndex;if(currIndex>0){finalData.push({type:"text",data:text.slice(0,currIndex)});}
lookingForLeft=false;}
let done=false;while(!done){if(lookingForLeft){nextIndex=text.indexOf(leftDelim,currIndex);if(nextIndex===-1){done=true;break;}
if(currIndex!==nextIndex){finalData.push({type:"text",data:text.slice(currIndex,nextIndex)});}
currIndex=nextIndex;}else{nextIndex=findEndOfMath(rightDelim,text,currIndex+leftDelim.length);if(nextIndex===-1){done=true;break;}
let formula=text.slice(currIndex+leftDelim.length,nextIndex);if(format==="ascii-math")
[,formula]=parseMathString(formula,{format:"ascii-math"});finalData.push({type:"math",data:formula,mathstyle});currIndex=nextIndex+rightDelim.length;}
lookingForLeft=!lookingForLeft;}
if(currIndex<text.length)
finalData.push({type:"text",data:text.slice(currIndex)});}else finalData.push(startDatum);}
return finalData;}
function splitWithDelimiters(text,options){var _a3,_b3,_c2,_d2,_e,_f,_g,_h;let data=[{type:"text",data:text}];if((_b3=(_a3=options.TeX)==null?void 0:_a3.delimiters)==null?void 0:_b3.display){options.TeX.delimiters.display.forEach(([openDelim,closeDelim])=>{data=splitAtDelimiters(data,openDelim,closeDelim,"displaystyle");});}
if((_d2=(_c2=options.TeX)==null?void 0:_c2.delimiters)==null?void 0:_d2.inline){options.TeX.delimiters.inline.forEach(([openDelim,closeDelim])=>{data=splitAtDelimiters(data,openDelim,closeDelim,"textstyle");});}
if((_f=(_e=options.asciiMath)==null?void 0:_e.delimiters)==null?void 0:_f.inline){options.asciiMath.delimiters.inline.forEach(([openDelim,closeDelim])=>{data=splitAtDelimiters(data,openDelim,closeDelim,"textstyle","ascii-math");});}
if((_h=(_g=options.asciiMath)==null?void 0:_g.delimiters)==null?void 0:_h.display){options.asciiMath.delimiters.display.forEach(([openDelim,closeDelim])=>{data=splitAtDelimiters(data,openDelim,closeDelim,"displaystyle","ascii-math");});}
return data;}
function createMathMLNode(latex,options){const span=document.createElement("span");span.setAttribute("translate","no");try{const html="<math xmlns='http://www.w3.org/1998/Math/MathML'>"+options.renderToMathML(latex)+"</math>";span.innerHTML=globalThis.MathfieldElement.createHTML(html);}catch(error){console.error(`MathLive 0.105.0:  Could not convert "${latex}"' to MathML with ${error}`);span.textContent=latex;}
span.className="ML__sr-only";return span;}
function createMarkupNode(text,options,mathstyle){try{const html=options.renderToMarkup(text,__spreadProps(__spreadValues({},options),{defaultMode:mathstyle==="displaystyle"?"math":"inline-math"}));const element=document.createElement("span");element.dataset.latex=text;element.style.display=mathstyle==="displaystyle"?"flex":"inline-flex";element.setAttribute("aria-hidden","true");element.setAttribute("translate","no");element.innerHTML=globalThis.MathfieldElement.createHTML(html);return element;}catch(error){console.error("Could not parse'"+text+"' with ",error);return document.createTextNode(text);}}
function createAccessibleMarkupPair(latex,mathstyle,options){var _a3;const markupNode=createMarkupNode(latex,options,mathstyle?mathstyle:"textstyle");const accessibleContent=(_a3=options.renderAccessibleContent)!=null?_a3:"";if(/\b(mathml|speakable-text)\b/i.test(accessibleContent)){const fragment=document.createElement("span");if(/\bmathml\b/i.test(accessibleContent)&&options.renderToMathML)
fragment.append(createMathMLNode(latex,options));if(/\bspeakable-text\b/i.test(accessibleContent)&&options.renderToSpeakableText){const span=document.createElement("span");span.setAttribute("translate","no");const html=options.renderToSpeakableText(latex);span.innerHTML=globalThis.MathfieldElement.createHTML(html);span.className="ML__sr-only";fragment.append(span);}
fragment.append(markupNode);return fragment;}
return markupNode;}
function scanText2(text,options){var _a3;if(/^\s*$/.test(text))return null;if(((_a3=options.TeX)==null?void 0:_a3.processEnvironments)&&/^\s*\\begin/.test(text))
return[createAccessibleMarkupPair(text,"",options)];const runs=splitWithDelimiters(text,options);if(runs.length===1&&runs[0].type==="text")return null;const result=[];for(const run of runs){if(run.type==="text")result.push(run.data);else{result.push(createAccessibleMarkupPair(run.data,run.mathstyle==="textstyle"?"textstyle":"displaystyle",options));}}
return result;}
function scanElement(element,options){var _a3,_b3,_c2,_d2,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r;if(element.childNodes.length===1&&element.childNodes[0].nodeType===3){const text=(_a3=element.childNodes[0].textContent)!=null?_a3:"";if(((_b3=options.TeX)==null?void 0:_b3.processEnvironments)&&/^\s*\\begin/.test(text)){element.textContent="";element.append(createAccessibleMarkupPair(text,"",options));return;}
const runs=splitWithDelimiters(text,options);if(runs.length===1){const run=runs[0];if(run.type==="text")return;element.textContent="";element.append(createAccessibleMarkupPair(run.data,run.mathstyle==="textstyle"?"textstyle":"displaystyle",options));return;}}
const nodes=[...element.childNodes];for(let childNode of nodes){if(childNode.nodeType===3){const nodes2=scanText2((_c2=childNode.textContent)!=null?_c2:"",options);if(nodes2)childNode.replaceWith(...nodes2);}else if(childNode.nodeType===1){const tag=childNode.nodeName.toLowerCase();if(tag==="script"){const scriptNode=childNode;const type=scriptNode.type.toLowerCase();if(type==="module"||type==="javascript")continue;let textContent=void 0;if((_d2=options.processScriptTypePattern)==null?void 0:_d2.test(type))
textContent=(_e=scriptNode.textContent)!=null?_e:"";else if((_f=options.processMathJSONScriptTypePattern)==null?void 0:_f.test(type)){try{textContent=(_h=options.serializeToLatex)==null?void 0:_h.call(options,JSON.parse((_g=scriptNode.textContent)!=null?_g:""));}catch(e){console.error(e);}}
if(textContent){let style="textstyle";for(const l of type.split(";")){const[key,value]=l.split("=");if(key.trim()==="mode")
style=value.trim()==="display"?"displaystyle":"textstyle";}
replaceWithMath(scriptNode,textContent,style,options);}}else{const el=childNode;if((_i=options.texClassDisplayPattern)==null?void 0:_i.test(el.className)){replaceWithMath(el,(_j=el.textContent)!=null?_j:"","displaystyle",options);continue;}
if((_k=options.texClassInlinePattern)==null?void 0:_k.test(el.className)){replaceWithMath(el,(_l=el.textContent)!=null?_l:"","textstyle",options);continue;}
const shouldProcess=((_n=(_m=options.processClassPattern)==null?void 0:_m.test(el.className))!=null?_n:false)||!(((_p=(_o=options.skipTags)==null?void 0:_o.includes(tag))!=null?_p:false)||((_r=(_q=options.ignoreClassPattern)==null?void 0:_q.test(el.className))!=null?_r:false));if(shouldProcess)scanElement(el,options);}}}}
var DEFAULT_AUTO_RENDER_OPTIONS={skipTags:["math-field","noscript","style","textarea","pre","code","annotation","annotation-xml"],processScriptType:"math/tex",processMathJSONScriptType:"math/json",ignoreClass:"^(tex2jax_ignore|ML__latex)$",processClass:"tex2jax_process",renderAccessibleContent:"mathml",asciiMath:{delimiters:{inline:["`","`"]}},TeX:{processEnvironments:true,delimiters:{inline:[["\\(","\\)"]],display:[["$$","$$"],["\\[","\\]"]]}}};function _renderMathInElement(element,options){var _a3,_b3,_c2,_d2,_e,_f,_g,_h;try{const optionsPrivate=__spreadValues(__spreadValues({},DEFAULT_AUTO_RENDER_OPTIONS),options);optionsPrivate.ignoreClassPattern=new RegExp((_a3=optionsPrivate.ignoreClass)!=null?_a3:"");optionsPrivate.processClassPattern=new RegExp((_b3=optionsPrivate.processClass)!=null?_b3:"");optionsPrivate.processScriptTypePattern=new RegExp((_c2=optionsPrivate.processScriptType)!=null?_c2:"");optionsPrivate.processMathJSONScriptTypePattern=new RegExp((_d2=optionsPrivate.processMathJSONScriptType)!=null?_d2:"");if((_f=(_e=optionsPrivate.TeX)==null?void 0:_e.className)==null?void 0:_f.display){optionsPrivate.texClassDisplayPattern=new RegExp(optionsPrivate.TeX.className.display);}
if((_h=(_g=optionsPrivate.TeX)==null?void 0:_g.className)==null?void 0:_h.inline){optionsPrivate.texClassInlinePattern=new RegExp(optionsPrivate.TeX.className.inline);}
void loadFonts();injectStylesheet("core");scanElement(element,optionsPrivate);}catch(error){if(error instanceof Error)
console.error("renderMathInElement(): "+error.message);else{console.error("renderMathInElement(): Could not render math for element",element);}}}
function replaceWithMath(el,latex,style,options){el.parentNode.replaceChild(createAccessibleMarkupPair(latex,style,options),el);}
function switchKeyboardLayer(mathfield,layerName){const keyboard=VirtualKeyboard.singleton;if(!keyboard)return false;keyboard.show();hideVariantsPanel();keyboard.currentLayer=layerName;keyboard.render();keyboard.focus();return true;}
function toggleVirtualKeyboard(){const kbd=window.mathVirtualKeyboard;if(kbd.visible)kbd.hide({animate:true});else kbd.show({animate:true});return false;}
register2({switchKeyboardLayer,toggleVirtualKeyboard,hideVirtualKeyboard:()=>{window.mathVirtualKeyboard.hide({animate:true});return false;},showVirtualKeyboard:()=>{window.mathVirtualKeyboard.show({animate:true});return false;}},{target:"virtual-keyboard"});function globalMathLive(){var _a3,_b3;(_b3=globalThis[_a3=Symbol.for("io.cortexjs.mathlive")])!=null?_b3:globalThis[_a3]={};return globalThis[Symbol.for("io.cortexjs.mathlive")];}
function renderMathInDocument(options){if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",()=>renderMathInElement(document.body,options));}else renderMathInElement(document.body,options);}
function getElement(element){if(typeof element==="string"){const result=document.getElementById(element);if(result===null)
throw new Error(`The element with ID "${element}" could not be found.`);return result;}
return element;}
function renderMathInElement(element,options){var _a3,_b3,_c2,_d2;if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",()=>renderMathInElement(element,options));return;}
const el=getElement(element);if(!el)return;const optionsPrivate=options!=null?options:{};(_a3=optionsPrivate.renderToMarkup)!=null?_a3:optionsPrivate.renderToMarkup=convertLatexToMarkup;(_b3=optionsPrivate.renderToMathML)!=null?_b3:optionsPrivate.renderToMathML=convertLatexToMathMl;(_c2=optionsPrivate.renderToSpeakableText)!=null?_c2:optionsPrivate.renderToSpeakableText=convertLatexToSpeakableText;(_d2=optionsPrivate.serializeToLatex)!=null?_d2:optionsPrivate.serializeToLatex=convertMathJsonToLatex;_renderMathInElement(el,optionsPrivate);}
var version={mathlive:"0.105.0"};return __toCommonJS(mathlive_exports);})();Object.assign(exports,MathLive);Object.defineProperty(exports,'__esModule',{value:true});}));$(function(){$('[data-toggle="popover"]').popover()})
Array.prototype.stdDev=function()
{var mean=this.mean();var length=this.length;for(var i=0,sumOfSquares=0;i<length;i++)
{sumOfSquares+=Math.pow(this[i]-mean,2);}
var stdDev=Math.sqrt(sumOfSquares/length);return stdDev;}
Array.prototype.variance=function()
{var mean=this.mean();var length=this.length;for(var i=0,sumOfSquares=0;i<length;i++)
{sumOfSquares+=Math.pow(this[i]-mean,2);}
var variance=sumOfSquares/length;return variance;}
Array.prototype.sum=function()
{for(var i=0,length=this.length,sum=0;i<length;sum+=this[i++]);return sum;}
Array.prototype.mean=function()
{for(var i=0,length=this.length,sum=0;i<length;sum+=this[i++]);var mean=sum/length;return mean;}
Array.prototype.max=function()
{return Math.max.apply(Math,this);}
Array.prototype.min=function()
{return Math.min.apply(Math,this);}
Array.prototype.median=function()
{var length=this.length;if(length%2==1)
{var middle=Math.floor(length/2);var median=this.sortNumber()[middle];}
else
{var middle=length/2;var sorted=this.sortNumber();var median=(sorted[middle-1]+sorted[middle])/2;}
return median;}
Array.prototype.sortNumber=function(invert)
{if(invert==true)
{return this.sort(function(a,b){return a-b}).reverse();}
else
{return this.sort(function(a,b){return a-b});}}
function normsinv(p)
{var a=new Array(-3.969683028665376e+01,2.209460984245205e+02,-2.759285104469687e+02,1.383577518672690e+02,-3.066479806614716e+01,2.506628277459239e+00);var b=new Array(-5.447609879822406e+01,1.615858368580409e+02,-1.556989798598866e+02,6.680131188771972e+01,-1.328068155288572e+01);var c=new Array(-7.784894002430293e-03,-3.223964580411365e-01,-2.400758277161838e+00,-2.549732539343734e+00,4.374664141464968e+00,2.938163982698783e+00);var d=new Array(7.784695709041462e-03,3.224671290700398e-01,2.445134137142996e+00,3.754408661907416e+00);var plow=0.02425;var phigh=1-plow;if(p<plow)
{var q=Math.sqrt(-2*Math.log(p));return(((((c[0]*q+c[1])*q+c[2])*q+c[3])*q+c[4])*q+c[5])/((((d[0]*q+d[1])*q+d[2])*q+d[3])*q+1);}
if(phigh<p)
{var q=Math.sqrt(-2*Math.log(1-p));return-(((((c[0]*q+c[1])*q+c[2])*q+c[3])*q+c[4])*q+c[5])/((((d[0]*q+d[1])*q+d[2])*q+d[3])*q+1);}
var q=p-0.5;var r=q*q;return(((((a[0]*r+a[1])*r+a[2])*r+a[3])*r+a[4])*r+a[5])*q/(((((b[0]*r+b[1])*r+b[2])*r+b[3])*r+b[4])*r+1);}
window['rangy']=(function(){var OBJECT="object",FUNCTION="function",UNDEFINED="undefined";var domRangeProperties=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"];var domRangeMethods=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"];var textRangeProperties=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"];var textRangeMethods=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"];function isHostMethod(o,p){var t=typeof o[p];return t==FUNCTION||(!!(t==OBJECT&&o[p]))||t=="unknown";}
function isHostObject(o,p){return!!(typeof o[p]==OBJECT&&o[p]);}
function isHostProperty(o,p){return typeof o[p]!=UNDEFINED;}
function createMultiplePropertyTest(testFunc){return function(o,props){var i=props.length;while(i--){if(!testFunc(o,props[i])){return false;}}
return true;};}
var areHostMethods=createMultiplePropertyTest(isHostMethod);var areHostObjects=createMultiplePropertyTest(isHostObject);var areHostProperties=createMultiplePropertyTest(isHostProperty);function isTextRange(range){return range&&areHostMethods(range,textRangeMethods)&&areHostProperties(range,textRangeProperties);}
var api={version:"1.2.3",initialized:false,supported:true,util:{isHostMethod:isHostMethod,isHostObject:isHostObject,isHostProperty:isHostProperty,areHostMethods:areHostMethods,areHostObjects:areHostObjects,areHostProperties:areHostProperties,isTextRange:isTextRange},features:{},modules:{},config:{alertOnWarn:false,preferTextRange:false}};function fail(reason){window.alert("Rangy not supported in your browser. Reason: "+reason);api.initialized=true;api.supported=false;}
api.fail=fail;function warn(msg){var warningMessage="Rangy warning: "+msg;if(api.config.alertOnWarn){window.alert(warningMessage);}else if(typeof window.console!=UNDEFINED&&typeof window.console.log!=UNDEFINED){window.console.log(warningMessage);}}
api.warn=warn;if({}.hasOwnProperty){api.util.extend=function(o,props){for(var i in props){if(props.hasOwnProperty(i)){o[i]=props[i];}}};}else{fail("hasOwnProperty not supported");}
var initListeners=[];var moduleInitializers=[];function init(){if(api.initialized){return;}
var testRange;var implementsDomRange=false,implementsTextRange=false;if(isHostMethod(document,"createRange")){testRange=document.createRange();if(areHostMethods(testRange,domRangeMethods)&&areHostProperties(testRange,domRangeProperties)){implementsDomRange=true;}
testRange.detach();}
var body=isHostObject(document,"body")?document.body:document.getElementsByTagName("body")[0];if(body&&isHostMethod(body,"createTextRange")){testRange=body.createTextRange();if(isTextRange(testRange)){implementsTextRange=true;}}
if(!implementsDomRange&&!implementsTextRange){fail("Neither Range nor TextRange are implemented");}
api.initialized=true;api.features={implementsDomRange:implementsDomRange,implementsTextRange:implementsTextRange};var allListeners=moduleInitializers.concat(initListeners);for(var i=0,len=allListeners.length;i<len;++i){try{allListeners[i](api);}catch(ex){if(isHostObject(window,"console")&&isHostMethod(window.console,"log")){window.console.log("Init listener threw an exception. Continuing.",ex);}}}}
api.init=init;api.addInitListener=function(listener){if(api.initialized){listener(api);}else{initListeners.push(listener);}};var createMissingNativeApiListeners=[];api.addCreateMissingNativeApiListener=function(listener){createMissingNativeApiListeners.push(listener);};function createMissingNativeApi(win){win=win||window;init();for(var i=0,len=createMissingNativeApiListeners.length;i<len;++i){createMissingNativeApiListeners[i](win);}}
api.createMissingNativeApi=createMissingNativeApi;function Module(name){this.name=name;this.initialized=false;this.supported=false;}
Module.prototype.fail=function(reason){this.initialized=true;this.supported=false;throw new Error("Module '"+this.name+"' failed to load: "+reason);};Module.prototype.warn=function(msg){api.warn("Module "+this.name+": "+msg);};Module.prototype.createError=function(msg){return new Error("Error in Rangy "+this.name+" module: "+msg);};api.createModule=function(name,initFunc){var module=new Module(name);api.modules[name]=module;moduleInitializers.push(function(api){initFunc(api,module);module.initialized=true;module.supported=true;});};api.requireModules=function(modules){for(var i=0,len=modules.length,module,moduleName;i<len;++i){moduleName=modules[i];module=api.modules[moduleName];if(!module||!(module instanceof Module)){throw new Error("Module '"+moduleName+"' not found");}
if(!module.supported){throw new Error("Module '"+moduleName+"' not supported");}}};var docReady=false;var loadHandler=function(e){if(!docReady){docReady=true;if(!api.initialized){init();}}};if(typeof window==UNDEFINED){fail("No window found");return;}
if(typeof document==UNDEFINED){fail("No document found");return;}
if(isHostMethod(document,"addEventListener")){document.addEventListener("DOMContentLoaded",loadHandler,false);}
if(isHostMethod(window,"addEventListener")){window.addEventListener("load",loadHandler,false);}else if(isHostMethod(window,"attachEvent")){window.attachEvent("onload",loadHandler);}else{fail("Window does not have required addEventListener or attachEvent method");}
return api;})();rangy.createModule("DomUtil",function(api,module){var UNDEF="undefined";var util=api.util;if(!util.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])){module.fail("document missing a Node creation method");}
if(!util.isHostMethod(document,"getElementsByTagName")){module.fail("document missing getElementsByTagName method");}
var el=document.createElement("div");if(!util.areHostMethods(el,["insertBefore","appendChild","cloneNode"]||!util.areHostObjects(el,["previousSibling","nextSibling","childNodes","parentNode"]))){module.fail("Incomplete Element implementation");}
if(!util.isHostProperty(el,"innerHTML")){module.fail("Element is missing innerHTML property");}
var textNode=document.createTextNode("test");if(!util.areHostMethods(textNode,["splitText","deleteData","insertData","appendData","cloneNode"]||!util.areHostObjects(el,["previousSibling","nextSibling","childNodes","parentNode"])||!util.areHostProperties(textNode,["data"]))){module.fail("Incomplete Text Node implementation");}
var arrayContains=function(arr,val){var i=arr.length;while(i--){if(arr[i]===val){return true;}}
return false;};function isHtmlNamespace(node){var ns;return typeof node.namespaceURI==UNDEF||((ns=node.namespaceURI)===null||ns=="http://www.w3.org/1999/xhtml");}
function parentElement(node){var parent=node.parentNode;return(parent.nodeType==1)?parent:null;}
function getNodeIndex(node){var i=0;while((node=node.previousSibling)){i++;}
return i;}
function getNodeLength(node){var childNodes;return isCharacterDataNode(node)?node.length:((childNodes=node.childNodes)?childNodes.length:0);}
function getCommonAncestor(node1,node2){var ancestors=[],n;for(n=node1;n;n=n.parentNode){ancestors.push(n);}
for(n=node2;n;n=n.parentNode){if(arrayContains(ancestors,n)){return n;}}
return null;}
function isAncestorOf(ancestor,descendant,selfIsAncestor){var n=selfIsAncestor?descendant:descendant.parentNode;while(n){if(n===ancestor){return true;}else{n=n.parentNode;}}
return false;}
function getClosestAncestorIn(node,ancestor,selfIsAncestor){var p,n=selfIsAncestor?node:node.parentNode;while(n){p=n.parentNode;if(p===ancestor){return n;}
n=p;}
return null;}
function isCharacterDataNode(node){var t=node.nodeType;return t==3||t==4||t==8;}
function insertAfter(node,precedingNode){var nextNode=precedingNode.nextSibling,parent=precedingNode.parentNode;if(nextNode){parent.insertBefore(node,nextNode);}else{parent.appendChild(node);}
return node;}
function splitDataNode(node,index){var newNode=node.cloneNode(false);newNode.deleteData(0,index);node.deleteData(index,node.length-index);insertAfter(newNode,node);return newNode;}
function getDocument(node){if(node.nodeType==9){return node;}else if(typeof node.ownerDocument!=UNDEF){return node.ownerDocument;}else if(typeof node.document!=UNDEF){return node.document;}else if(node.parentNode){return getDocument(node.parentNode);}else{throw new Error("getDocument: no document found for node");}}
function getWindow(node){var doc=getDocument(node);if(typeof doc.defaultView!=UNDEF){return doc.defaultView;}else if(typeof doc.parentWindow!=UNDEF){return doc.parentWindow;}else{throw new Error("Cannot get a window object for node");}}
function getIframeDocument(iframeEl){if(typeof iframeEl.contentDocument!=UNDEF){return iframeEl.contentDocument;}else if(typeof iframeEl.contentWindow!=UNDEF){return iframeEl.contentWindow.document;}else{throw new Error("getIframeWindow: No Document object found for iframe element");}}
function getIframeWindow(iframeEl){if(typeof iframeEl.contentWindow!=UNDEF){return iframeEl.contentWindow;}else if(typeof iframeEl.contentDocument!=UNDEF){return iframeEl.contentDocument.defaultView;}else{throw new Error("getIframeWindow: No Window object found for iframe element");}}
function getBody(doc){return util.isHostObject(doc,"body")?doc.body:doc.getElementsByTagName("body")[0];}
function getRootContainer(node){var parent;while((parent=node.parentNode)){node=parent;}
return node;}
function comparePoints(nodeA,offsetA,nodeB,offsetB){var nodeC,root,childA,childB,n;if(nodeA==nodeB){return offsetA===offsetB?0:(offsetA<offsetB)?-1:1;}else if((nodeC=getClosestAncestorIn(nodeB,nodeA,true))){return offsetA<=getNodeIndex(nodeC)?-1:1;}else if((nodeC=getClosestAncestorIn(nodeA,nodeB,true))){return getNodeIndex(nodeC)<offsetB?-1:1;}else{root=getCommonAncestor(nodeA,nodeB);childA=(nodeA===root)?root:getClosestAncestorIn(nodeA,root,true);childB=(nodeB===root)?root:getClosestAncestorIn(nodeB,root,true);if(childA===childB){throw new Error("comparePoints got to case 4 and childA and childB are the same!");}else{n=root.firstChild;while(n){if(n===childA){return-1;}else if(n===childB){return 1;}
n=n.nextSibling;}
throw new Error("Should not be here!");}}}
function fragmentFromNodeChildren(node){var fragment=getDocument(node).createDocumentFragment(),child;while((child=node.firstChild)){fragment.appendChild(child);}
return fragment;}
function inspectNode(node){if(!node){return"[No node]";}
if(isCharacterDataNode(node)){return'"'+node.data+'"';}else if(node.nodeType==1){var idAttr=node.id?' id="'+node.id+'"':"";return"<"+node.nodeName+idAttr+">["+node.childNodes.length+"]";}else{return node.nodeName;}}
function NodeIterator(root){this.root=root;this._next=root;}
NodeIterator.prototype={_current:null,hasNext:function(){return!!this._next;},next:function(){var n=this._current=this._next;var child,next;if(this._current){child=n.firstChild;if(child){this._next=child;}else{next=null;while((n!==this.root)&&!(next=n.nextSibling)){n=n.parentNode;}
this._next=next;}}
return this._current;},detach:function(){this._current=this._next=this.root=null;}};function createIterator(root){return new NodeIterator(root);}
function DomPosition(node,offset){this.node=node;this.offset=offset;}
DomPosition.prototype={equals:function(pos){return this.node===pos.node&this.offset==pos.offset;},inspect:function(){return"[DomPosition("+inspectNode(this.node)+":"+this.offset+")]";}};function DOMException(codeName){this.code=this[codeName];this.codeName=codeName;this.message="DOMException: "+this.codeName;}
DOMException.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11};DOMException.prototype.toString=function(){return this.message;};api.dom={arrayContains:arrayContains,isHtmlNamespace:isHtmlNamespace,parentElement:parentElement,getNodeIndex:getNodeIndex,getNodeLength:getNodeLength,getCommonAncestor:getCommonAncestor,isAncestorOf:isAncestorOf,getClosestAncestorIn:getClosestAncestorIn,isCharacterDataNode:isCharacterDataNode,insertAfter:insertAfter,splitDataNode:splitDataNode,getDocument:getDocument,getWindow:getWindow,getIframeWindow:getIframeWindow,getIframeDocument:getIframeDocument,getBody:getBody,getRootContainer:getRootContainer,comparePoints:comparePoints,inspectNode:inspectNode,fragmentFromNodeChildren:fragmentFromNodeChildren,createIterator:createIterator,DomPosition:DomPosition};api.DOMException=DOMException;});rangy.createModule("DomRange",function(api,module){api.requireModules(["DomUtil"]);var dom=api.dom;var DomPosition=dom.DomPosition;var DOMException=api.DOMException;function isNonTextPartiallySelected(node,range){return(node.nodeType!=3)&&(dom.isAncestorOf(node,range.startContainer,true)||dom.isAncestorOf(node,range.endContainer,true));}
function getRangeDocument(range){return dom.getDocument(range.startContainer);}
function dispatchEvent(range,type,args){var listeners=range._listeners[type];if(listeners){for(var i=0,len=listeners.length;i<len;++i){listeners[i].call(range,{target:range,args:args});}}}
function getBoundaryBeforeNode(node){return new DomPosition(node.parentNode,dom.getNodeIndex(node));}
function getBoundaryAfterNode(node){return new DomPosition(node.parentNode,dom.getNodeIndex(node)+1);}
function insertNodeAtPosition(node,n,o){var firstNodeInserted=node.nodeType==11?node.firstChild:node;if(dom.isCharacterDataNode(n)){if(o==n.length){dom.insertAfter(node,n);}else{n.parentNode.insertBefore(node,o==0?n:dom.splitDataNode(n,o));}}else if(o>=n.childNodes.length){n.appendChild(node);}else{n.insertBefore(node,n.childNodes[o]);}
return firstNodeInserted;}
function cloneSubtree(iterator){var partiallySelected;for(var node,frag=getRangeDocument(iterator.range).createDocumentFragment(),subIterator;node=iterator.next();){partiallySelected=iterator.isPartiallySelectedSubtree();node=node.cloneNode(!partiallySelected);if(partiallySelected){subIterator=iterator.getSubtreeIterator();node.appendChild(cloneSubtree(subIterator));subIterator.detach(true);}
if(node.nodeType==10){throw new DOMException("HIERARCHY_REQUEST_ERR");}
frag.appendChild(node);}
return frag;}
function iterateSubtree(rangeIterator,func,iteratorState){var it,n;iteratorState=iteratorState||{stop:false};for(var node,subRangeIterator;node=rangeIterator.next();){if(rangeIterator.isPartiallySelectedSubtree()){if(func(node)===false){iteratorState.stop=true;return;}else{subRangeIterator=rangeIterator.getSubtreeIterator();iterateSubtree(subRangeIterator,func,iteratorState);subRangeIterator.detach(true);if(iteratorState.stop){return;}}}else{it=dom.createIterator(node);while((n=it.next())){if(func(n)===false){iteratorState.stop=true;return;}}}}}
function deleteSubtree(iterator){var subIterator;while(iterator.next()){if(iterator.isPartiallySelectedSubtree()){subIterator=iterator.getSubtreeIterator();deleteSubtree(subIterator);subIterator.detach(true);}else{iterator.remove();}}}
function extractSubtree(iterator){for(var node,frag=getRangeDocument(iterator.range).createDocumentFragment(),subIterator;node=iterator.next();){if(iterator.isPartiallySelectedSubtree()){node=node.cloneNode(false);subIterator=iterator.getSubtreeIterator();node.appendChild(extractSubtree(subIterator));subIterator.detach(true);}else{iterator.remove();}
if(node.nodeType==10){throw new DOMException("HIERARCHY_REQUEST_ERR");}
frag.appendChild(node);}
return frag;}
function getNodesInRange(range,nodeTypes,filter){var filterNodeTypes=!!(nodeTypes&&nodeTypes.length),regex;var filterExists=!!filter;if(filterNodeTypes){regex=new RegExp("^("+nodeTypes.join("|")+")$");}
var nodes=[];iterateSubtree(new RangeIterator(range,false),function(node){if((!filterNodeTypes||regex.test(node.nodeType))&&(!filterExists||filter(node))){nodes.push(node);}});return nodes;}
function inspect(range){var name=(typeof range.getName=="undefined")?"Range":range.getName();return"["+name+"("+dom.inspectNode(range.startContainer)+":"+range.startOffset+", "+
dom.inspectNode(range.endContainer)+":"+range.endOffset+")]";}
function RangeIterator(range,clonePartiallySelectedTextNodes){this.range=range;this.clonePartiallySelectedTextNodes=clonePartiallySelectedTextNodes;if(!range.collapsed){this.sc=range.startContainer;this.so=range.startOffset;this.ec=range.endContainer;this.eo=range.endOffset;var root=range.commonAncestorContainer;if(this.sc===this.ec&&dom.isCharacterDataNode(this.sc)){this.isSingleCharacterDataNode=true;this._first=this._last=this._next=this.sc;}else{this._first=this._next=(this.sc===root&&!dom.isCharacterDataNode(this.sc))?this.sc.childNodes[this.so]:dom.getClosestAncestorIn(this.sc,root,true);this._last=(this.ec===root&&!dom.isCharacterDataNode(this.ec))?this.ec.childNodes[this.eo-1]:dom.getClosestAncestorIn(this.ec,root,true);}}}
RangeIterator.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:false,reset:function(){this._current=null;this._next=this._first;},hasNext:function(){return!!this._next;},next:function(){var current=this._current=this._next;if(current){this._next=(current!==this._last)?current.nextSibling:null;if(dom.isCharacterDataNode(current)&&this.clonePartiallySelectedTextNodes){if(current===this.ec){(current=current.cloneNode(true)).deleteData(this.eo,current.length-this.eo);}
if(this._current===this.sc){(current=current.cloneNode(true)).deleteData(0,this.so);}}}
return current;},remove:function(){var current=this._current,start,end;if(dom.isCharacterDataNode(current)&&(current===this.sc||current===this.ec)){start=(current===this.sc)?this.so:0;end=(current===this.ec)?this.eo:current.length;if(start!=end){current.deleteData(start,end-start);}}else{if(current.parentNode){current.parentNode.removeChild(current);}else{}}},isPartiallySelectedSubtree:function(){var current=this._current;return isNonTextPartiallySelected(current,this.range);},getSubtreeIterator:function(){var subRange;if(this.isSingleCharacterDataNode){subRange=this.range.cloneRange();subRange.collapse();}else{subRange=new Range(getRangeDocument(this.range));var current=this._current;var startContainer=current,startOffset=0,endContainer=current,endOffset=dom.getNodeLength(current);if(dom.isAncestorOf(current,this.sc,true)){startContainer=this.sc;startOffset=this.so;}
if(dom.isAncestorOf(current,this.ec,true)){endContainer=this.ec;endOffset=this.eo;}
updateBoundaries(subRange,startContainer,startOffset,endContainer,endOffset);}
return new RangeIterator(subRange,this.clonePartiallySelectedTextNodes);},detach:function(detachRange){if(detachRange){this.range.detach();}
this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null;}};function RangeException(codeName){this.code=this[codeName];this.codeName=codeName;this.message="RangeException: "+this.codeName;}
RangeException.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2};RangeException.prototype.toString=function(){return this.message;};function RangeNodeIterator(range,nodeTypes,filter){this.nodes=getNodesInRange(range,nodeTypes,filter);this._next=this.nodes[0];this._position=0;}
RangeNodeIterator.prototype={_current:null,hasNext:function(){return!!this._next;},next:function(){this._current=this._next;this._next=this.nodes[++this._position];return this._current;},detach:function(){this._current=this._next=this.nodes=null;}};var beforeAfterNodeTypes=[1,3,4,5,7,8,10];var rootContainerNodeTypes=[2,9,11];var readonlyNodeTypes=[5,6,10,12];var insertableNodeTypes=[1,3,4,5,7,8,10,11];var surroundNodeTypes=[1,3,4,5,7,8];function createAncestorFinder(nodeTypes){return function(node,selfIsAncestor){var t,n=selfIsAncestor?node:node.parentNode;while(n){t=n.nodeType;if(dom.arrayContains(nodeTypes,t)){return n;}
n=n.parentNode;}
return null;};}
var getRootContainer=dom.getRootContainer;var getDocumentOrFragmentContainer=createAncestorFinder([9,11]);var getReadonlyAncestor=createAncestorFinder(readonlyNodeTypes);var getDocTypeNotationEntityAncestor=createAncestorFinder([6,10,12]);function assertNoDocTypeNotationEntityAncestor(node,allowSelf){if(getDocTypeNotationEntityAncestor(node,allowSelf)){throw new RangeException("INVALID_NODE_TYPE_ERR");}}
function assertNotDetached(range){if(!range.startContainer){throw new DOMException("INVALID_STATE_ERR");}}
function assertValidNodeType(node,invalidTypes){if(!dom.arrayContains(invalidTypes,node.nodeType)){throw new RangeException("INVALID_NODE_TYPE_ERR");}}
function assertValidOffset(node,offset){if(offset<0||offset>(dom.isCharacterDataNode(node)?node.length:node.childNodes.length)){throw new DOMException("INDEX_SIZE_ERR");}}
function assertSameDocumentOrFragment(node1,node2){if(getDocumentOrFragmentContainer(node1,true)!==getDocumentOrFragmentContainer(node2,true)){throw new DOMException("WRONG_DOCUMENT_ERR");}}
function assertNodeNotReadOnly(node){if(getReadonlyAncestor(node,true)){throw new DOMException("NO_MODIFICATION_ALLOWED_ERR");}}
function assertNode(node,codeName){if(!node){throw new DOMException(codeName);}}
function isOrphan(node){return!dom.arrayContains(rootContainerNodeTypes,node.nodeType)&&!getDocumentOrFragmentContainer(node,true);}
function isValidOffset(node,offset){return offset<=(dom.isCharacterDataNode(node)?node.length:node.childNodes.length);}
function isRangeValid(range){return(!!range.startContainer&&!!range.endContainer&&!isOrphan(range.startContainer)&&!isOrphan(range.endContainer)&&isValidOffset(range.startContainer,range.startOffset)&&isValidOffset(range.endContainer,range.endOffset));}
function assertRangeValid(range){assertNotDetached(range);if(!isRangeValid(range)){throw new Error("Range error: Range is no longer valid after DOM mutation ("+range.inspect()+")");}}
var styleEl=document.createElement("style");var htmlParsingConforms=false;try{styleEl.innerHTML="<b>x</b>";htmlParsingConforms=(styleEl.firstChild.nodeType==3);}catch(e){}
api.features.htmlParsingConforms=htmlParsingConforms;var createContextualFragment=htmlParsingConforms?function(fragmentStr){var node=this.startContainer;var doc=dom.getDocument(node);if(!node){throw new DOMException("INVALID_STATE_ERR");}
var el=null;if(node.nodeType==1){el=node;}else if(dom.isCharacterDataNode(node)){el=dom.parentElement(node);}
if(el===null||(el.nodeName=="HTML"&&dom.isHtmlNamespace(dom.getDocument(el).documentElement)&&dom.isHtmlNamespace(el))){el=doc.createElement("body");}else{el=el.cloneNode(false);}
el.innerHTML=fragmentStr;return dom.fragmentFromNodeChildren(el);}:function(fragmentStr){assertNotDetached(this);var doc=getRangeDocument(this);var el=doc.createElement("body");el.innerHTML=fragmentStr;return dom.fragmentFromNodeChildren(el);};var rangeProperties=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"];var s2s=0,s2e=1,e2e=2,e2s=3;var n_b=0,n_a=1,n_b_a=2,n_i=3;function RangePrototype(){}
RangePrototype.prototype={attachListener:function(type,listener){this._listeners[type].push(listener);},compareBoundaryPoints:function(how,range){assertRangeValid(this);assertSameDocumentOrFragment(this.startContainer,range.startContainer);var nodeA,offsetA,nodeB,offsetB;var prefixA=(how==e2s||how==s2s)?"start":"end";var prefixB=(how==s2e||how==s2s)?"start":"end";nodeA=this[prefixA+"Container"];offsetA=this[prefixA+"Offset"];nodeB=range[prefixB+"Container"];offsetB=range[prefixB+"Offset"];return dom.comparePoints(nodeA,offsetA,nodeB,offsetB);},insertNode:function(node){assertRangeValid(this);assertValidNodeType(node,insertableNodeTypes);assertNodeNotReadOnly(this.startContainer);if(dom.isAncestorOf(node,this.startContainer,true)){throw new DOMException("HIERARCHY_REQUEST_ERR");}
var firstNodeInserted=insertNodeAtPosition(node,this.startContainer,this.startOffset);this.setStartBefore(firstNodeInserted);},cloneContents:function(){assertRangeValid(this);var clone,frag;if(this.collapsed){return getRangeDocument(this).createDocumentFragment();}else{if(this.startContainer===this.endContainer&&dom.isCharacterDataNode(this.startContainer)){clone=this.startContainer.cloneNode(true);clone.data=clone.data.slice(this.startOffset,this.endOffset);frag=getRangeDocument(this).createDocumentFragment();frag.appendChild(clone);return frag;}else{var iterator=new RangeIterator(this,true);clone=cloneSubtree(iterator);iterator.detach();}
return clone;}},canSurroundContents:function(){assertRangeValid(this);assertNodeNotReadOnly(this.startContainer);assertNodeNotReadOnly(this.endContainer);var iterator=new RangeIterator(this,true);var boundariesInvalid=(iterator._first&&(isNonTextPartiallySelected(iterator._first,this))||(iterator._last&&isNonTextPartiallySelected(iterator._last,this)));iterator.detach();return!boundariesInvalid;},surroundContents:function(node){assertValidNodeType(node,surroundNodeTypes);if(!this.canSurroundContents()){throw new RangeException("BAD_BOUNDARYPOINTS_ERR");}
var content=this.extractContents();if(node.hasChildNodes()){while(node.lastChild){node.removeChild(node.lastChild);}}
insertNodeAtPosition(node,this.startContainer,this.startOffset);node.appendChild(content);this.selectNode(node);},cloneRange:function(){assertRangeValid(this);var range=new Range(getRangeDocument(this));var i=rangeProperties.length,prop;while(i--){prop=rangeProperties[i];range[prop]=this[prop];}
return range;},toString:function(){assertRangeValid(this);var sc=this.startContainer;if(sc===this.endContainer&&dom.isCharacterDataNode(sc)){return(sc.nodeType==3||sc.nodeType==4)?sc.data.slice(this.startOffset,this.endOffset):"";}else{var textBits=[],iterator=new RangeIterator(this,true);iterateSubtree(iterator,function(node){if(node.nodeType==3||node.nodeType==4){textBits.push(node.data);}});iterator.detach();return textBits.join("");}},compareNode:function(node){assertRangeValid(this);var parent=node.parentNode;var nodeIndex=dom.getNodeIndex(node);if(!parent){throw new DOMException("NOT_FOUND_ERR");}
var startComparison=this.comparePoint(parent,nodeIndex),endComparison=this.comparePoint(parent,nodeIndex+1);if(startComparison<0){return(endComparison>0)?n_b_a:n_b;}else{return(endComparison>0)?n_a:n_i;}},comparePoint:function(node,offset){assertRangeValid(this);assertNode(node,"HIERARCHY_REQUEST_ERR");assertSameDocumentOrFragment(node,this.startContainer);if(dom.comparePoints(node,offset,this.startContainer,this.startOffset)<0){return-1;}else if(dom.comparePoints(node,offset,this.endContainer,this.endOffset)>0){return 1;}
return 0;},createContextualFragment:createContextualFragment,toHtml:function(){assertRangeValid(this);var container=getRangeDocument(this).createElement("div");container.appendChild(this.cloneContents());return container.innerHTML;},intersectsNode:function(node,touchingIsIntersecting){assertRangeValid(this);assertNode(node,"NOT_FOUND_ERR");if(dom.getDocument(node)!==getRangeDocument(this)){return false;}
var parent=node.parentNode,offset=dom.getNodeIndex(node);assertNode(parent,"NOT_FOUND_ERR");var startComparison=dom.comparePoints(parent,offset,this.endContainer,this.endOffset),endComparison=dom.comparePoints(parent,offset+1,this.startContainer,this.startOffset);return touchingIsIntersecting?startComparison<=0&&endComparison>=0:startComparison<0&&endComparison>0;},isPointInRange:function(node,offset){assertRangeValid(this);assertNode(node,"HIERARCHY_REQUEST_ERR");assertSameDocumentOrFragment(node,this.startContainer);return(dom.comparePoints(node,offset,this.startContainer,this.startOffset)>=0)&&(dom.comparePoints(node,offset,this.endContainer,this.endOffset)<=0);},intersectsRange:function(range,touchingIsIntersecting){assertRangeValid(this);if(getRangeDocument(range)!=getRangeDocument(this)){throw new DOMException("WRONG_DOCUMENT_ERR");}
var startComparison=dom.comparePoints(this.startContainer,this.startOffset,range.endContainer,range.endOffset),endComparison=dom.comparePoints(this.endContainer,this.endOffset,range.startContainer,range.startOffset);return touchingIsIntersecting?startComparison<=0&&endComparison>=0:startComparison<0&&endComparison>0;},intersection:function(range){if(this.intersectsRange(range)){var startComparison=dom.comparePoints(this.startContainer,this.startOffset,range.startContainer,range.startOffset),endComparison=dom.comparePoints(this.endContainer,this.endOffset,range.endContainer,range.endOffset);var intersectionRange=this.cloneRange();if(startComparison==-1){intersectionRange.setStart(range.startContainer,range.startOffset);}
if(endComparison==1){intersectionRange.setEnd(range.endContainer,range.endOffset);}
return intersectionRange;}
return null;},union:function(range){if(this.intersectsRange(range,true)){var unionRange=this.cloneRange();if(dom.comparePoints(range.startContainer,range.startOffset,this.startContainer,this.startOffset)==-1){unionRange.setStart(range.startContainer,range.startOffset);}
if(dom.comparePoints(range.endContainer,range.endOffset,this.endContainer,this.endOffset)==1){unionRange.setEnd(range.endContainer,range.endOffset);}
return unionRange;}else{throw new RangeException("Ranges do not intersect");}},containsNode:function(node,allowPartial){if(allowPartial){return this.intersectsNode(node,false);}else{return this.compareNode(node)==n_i;}},containsNodeContents:function(node){return this.comparePoint(node,0)>=0&&this.comparePoint(node,dom.getNodeLength(node))<=0;},containsRange:function(range){return this.intersection(range).equals(range);},containsNodeText:function(node){var nodeRange=this.cloneRange();nodeRange.selectNode(node);var textNodes=nodeRange.getNodes([3]);if(textNodes.length>0){nodeRange.setStart(textNodes[0],0);var lastTextNode=textNodes.pop();nodeRange.setEnd(lastTextNode,lastTextNode.length);var contains=this.containsRange(nodeRange);nodeRange.detach();return contains;}else{return this.containsNodeContents(node);}},createNodeIterator:function(nodeTypes,filter){assertRangeValid(this);return new RangeNodeIterator(this,nodeTypes,filter);},getNodes:function(nodeTypes,filter){assertRangeValid(this);return getNodesInRange(this,nodeTypes,filter);},getDocument:function(){return getRangeDocument(this);},collapseBefore:function(node){assertNotDetached(this);this.setEndBefore(node);this.collapse(false);},collapseAfter:function(node){assertNotDetached(this);this.setStartAfter(node);this.collapse(true);},getName:function(){return"DomRange";},equals:function(range){return Range.rangesEqual(this,range);},isValid:function(){return isRangeValid(this);},inspect:function(){return inspect(this);}};function copyComparisonConstantsToObject(obj){obj.START_TO_START=s2s;obj.START_TO_END=s2e;obj.END_TO_END=e2e;obj.END_TO_START=e2s;obj.NODE_BEFORE=n_b;obj.NODE_AFTER=n_a;obj.NODE_BEFORE_AND_AFTER=n_b_a;obj.NODE_INSIDE=n_i;}
function copyComparisonConstants(constructor){copyComparisonConstantsToObject(constructor);copyComparisonConstantsToObject(constructor.prototype);}
function createRangeContentRemover(remover,boundaryUpdater){return function(){assertRangeValid(this);var sc=this.startContainer,so=this.startOffset,root=this.commonAncestorContainer;var iterator=new RangeIterator(this,true);var node,boundary;if(sc!==root){node=dom.getClosestAncestorIn(sc,root,true);boundary=getBoundaryAfterNode(node);sc=boundary.node;so=boundary.offset;}
iterateSubtree(iterator,assertNodeNotReadOnly);iterator.reset();var returnValue=remover(iterator);iterator.detach();boundaryUpdater(this,sc,so,sc,so);return returnValue;};}
function createPrototypeRange(constructor,boundaryUpdater,detacher){function createBeforeAfterNodeSetter(isBefore,isStart){return function(node){assertNotDetached(this);assertValidNodeType(node,beforeAfterNodeTypes);assertValidNodeType(getRootContainer(node),rootContainerNodeTypes);var boundary=(isBefore?getBoundaryBeforeNode:getBoundaryAfterNode)(node);(isStart?setRangeStart:setRangeEnd)(this,boundary.node,boundary.offset);};}
function setRangeStart(range,node,offset){var ec=range.endContainer,eo=range.endOffset;if(node!==range.startContainer||offset!==range.startOffset){if(getRootContainer(node)!=getRootContainer(ec)||dom.comparePoints(node,offset,ec,eo)==1){ec=node;eo=offset;}
boundaryUpdater(range,node,offset,ec,eo);}}
function setRangeEnd(range,node,offset){var sc=range.startContainer,so=range.startOffset;if(node!==range.endContainer||offset!==range.endOffset){if(getRootContainer(node)!=getRootContainer(sc)||dom.comparePoints(node,offset,sc,so)==-1){sc=node;so=offset;}
boundaryUpdater(range,sc,so,node,offset);}}
function setRangeStartAndEnd(range,node,offset){if(node!==range.startContainer||offset!==range.startOffset||node!==range.endContainer||offset!==range.endOffset){boundaryUpdater(range,node,offset,node,offset);}}
constructor.prototype=new RangePrototype();api.util.extend(constructor.prototype,{setStart:function(node,offset){assertNotDetached(this);assertNoDocTypeNotationEntityAncestor(node,true);assertValidOffset(node,offset);setRangeStart(this,node,offset);},setEnd:function(node,offset){assertNotDetached(this);assertNoDocTypeNotationEntityAncestor(node,true);assertValidOffset(node,offset);setRangeEnd(this,node,offset);},setStartBefore:createBeforeAfterNodeSetter(true,true),setStartAfter:createBeforeAfterNodeSetter(false,true),setEndBefore:createBeforeAfterNodeSetter(true,false),setEndAfter:createBeforeAfterNodeSetter(false,false),collapse:function(isStart){assertRangeValid(this);if(isStart){boundaryUpdater(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset);}else{boundaryUpdater(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset);}},selectNodeContents:function(node){assertNotDetached(this);assertNoDocTypeNotationEntityAncestor(node,true);boundaryUpdater(this,node,0,node,dom.getNodeLength(node));},selectNode:function(node){assertNotDetached(this);assertNoDocTypeNotationEntityAncestor(node,false);assertValidNodeType(node,beforeAfterNodeTypes);var start=getBoundaryBeforeNode(node),end=getBoundaryAfterNode(node);boundaryUpdater(this,start.node,start.offset,end.node,end.offset);},extractContents:createRangeContentRemover(extractSubtree,boundaryUpdater),deleteContents:createRangeContentRemover(deleteSubtree,boundaryUpdater),canSurroundContents:function(){assertRangeValid(this);assertNodeNotReadOnly(this.startContainer);assertNodeNotReadOnly(this.endContainer);var iterator=new RangeIterator(this,true);var boundariesInvalid=(iterator._first&&(isNonTextPartiallySelected(iterator._first,this))||(iterator._last&&isNonTextPartiallySelected(iterator._last,this)));iterator.detach();return!boundariesInvalid;},detach:function(){detacher(this);},splitBoundaries:function(){assertRangeValid(this);var sc=this.startContainer,so=this.startOffset,ec=this.endContainer,eo=this.endOffset;var startEndSame=(sc===ec);if(dom.isCharacterDataNode(ec)&&eo>0&&eo<ec.length){dom.splitDataNode(ec,eo);}
if(dom.isCharacterDataNode(sc)&&so>0&&so<sc.length){sc=dom.splitDataNode(sc,so);if(startEndSame){eo-=so;ec=sc;}else if(ec==sc.parentNode&&eo>=dom.getNodeIndex(sc)){eo++;}
so=0;}
boundaryUpdater(this,sc,so,ec,eo);},normalizeBoundaries:function(){assertRangeValid(this);var sc=this.startContainer,so=this.startOffset,ec=this.endContainer,eo=this.endOffset;var mergeForward=function(node){var sibling=node.nextSibling;if(sibling&&sibling.nodeType==node.nodeType){ec=node;eo=node.length;node.appendData(sibling.data);sibling.parentNode.removeChild(sibling);}};var mergeBackward=function(node){var sibling=node.previousSibling;if(sibling&&sibling.nodeType==node.nodeType){sc=node;var nodeLength=node.length;so=sibling.length;node.insertData(0,sibling.data);sibling.parentNode.removeChild(sibling);if(sc==ec){eo+=so;ec=sc;}else if(ec==node.parentNode){var nodeIndex=dom.getNodeIndex(node);if(eo==nodeIndex){ec=node;eo=nodeLength;}else if(eo>nodeIndex){eo--;}}}};var normalizeStart=true;if(dom.isCharacterDataNode(ec)){if(ec.length==eo){mergeForward(ec);}}else{if(eo>0){var endNode=ec.childNodes[eo-1];if(endNode&&dom.isCharacterDataNode(endNode)){mergeForward(endNode);}}
normalizeStart=!this.collapsed;}
if(normalizeStart){if(dom.isCharacterDataNode(sc)){if(so==0){mergeBackward(sc);}}else{if(so<sc.childNodes.length){var startNode=sc.childNodes[so];if(startNode&&dom.isCharacterDataNode(startNode)){mergeBackward(startNode);}}}}else{sc=ec;so=eo;}
boundaryUpdater(this,sc,so,ec,eo);},collapseToPoint:function(node,offset){assertNotDetached(this);assertNoDocTypeNotationEntityAncestor(node,true);assertValidOffset(node,offset);setRangeStartAndEnd(this,node,offset);}});copyComparisonConstants(constructor);}
function updateCollapsedAndCommonAncestor(range){range.collapsed=(range.startContainer===range.endContainer&&range.startOffset===range.endOffset);range.commonAncestorContainer=range.collapsed?range.startContainer:dom.getCommonAncestor(range.startContainer,range.endContainer);}
function updateBoundaries(range,startContainer,startOffset,endContainer,endOffset){var startMoved=(range.startContainer!==startContainer||range.startOffset!==startOffset);var endMoved=(range.endContainer!==endContainer||range.endOffset!==endOffset);range.startContainer=startContainer;range.startOffset=startOffset;range.endContainer=endContainer;range.endOffset=endOffset;updateCollapsedAndCommonAncestor(range);dispatchEvent(range,"boundarychange",{startMoved:startMoved,endMoved:endMoved});}
function detach(range){assertNotDetached(range);range.startContainer=range.startOffset=range.endContainer=range.endOffset=null;range.collapsed=range.commonAncestorContainer=null;dispatchEvent(range,"detach",null);range._listeners=null;}
function Range(doc){this.startContainer=doc;this.startOffset=0;this.endContainer=doc;this.endOffset=0;this._listeners={boundarychange:[],detach:[]};updateCollapsedAndCommonAncestor(this);}
createPrototypeRange(Range,updateBoundaries,detach);api.rangePrototype=RangePrototype.prototype;Range.rangeProperties=rangeProperties;Range.RangeIterator=RangeIterator;Range.copyComparisonConstants=copyComparisonConstants;Range.createPrototypeRange=createPrototypeRange;Range.inspect=inspect;Range.getRangeDocument=getRangeDocument;Range.rangesEqual=function(r1,r2){return r1.startContainer===r2.startContainer&&r1.startOffset===r2.startOffset&&r1.endContainer===r2.endContainer&&r1.endOffset===r2.endOffset;};api.DomRange=Range;api.RangeException=RangeException;});rangy.createModule("WrappedRange",function(api,module){api.requireModules(["DomUtil","DomRange"]);var WrappedRange;var dom=api.dom;var DomPosition=dom.DomPosition;var DomRange=api.DomRange;function getTextRangeContainerElement(textRange){var parentEl=textRange.parentElement();var range=textRange.duplicate();range.collapse(true);var startEl=range.parentElement();range=textRange.duplicate();range.collapse(false);var endEl=range.parentElement();var startEndContainer=(startEl==endEl)?startEl:dom.getCommonAncestor(startEl,endEl);return startEndContainer==parentEl?startEndContainer:dom.getCommonAncestor(parentEl,startEndContainer);}
function textRangeIsCollapsed(textRange){return textRange.compareEndPoints("StartToEnd",textRange)==0;}
function getTextRangeBoundaryPosition(textRange,wholeRangeContainerElement,isStart,isCollapsed){var workingRange=textRange.duplicate();workingRange.collapse(isStart);var containerElement=workingRange.parentElement();if(!dom.isAncestorOf(wholeRangeContainerElement,containerElement,true)){containerElement=wholeRangeContainerElement;}
if(!containerElement.canHaveHTML){return new DomPosition(containerElement.parentNode,dom.getNodeIndex(containerElement));}
var workingNode=dom.getDocument(containerElement).createElement("span");var comparison,workingComparisonType=isStart?"StartToStart":"StartToEnd";var previousNode,nextNode,boundaryPosition,boundaryNode;do{containerElement.insertBefore(workingNode,workingNode.previousSibling);workingRange.moveToElementText(workingNode);}while((comparison=workingRange.compareEndPoints(workingComparisonType,textRange))>0&&workingNode.previousSibling);boundaryNode=workingNode.nextSibling;if(comparison==-1&&boundaryNode&&dom.isCharacterDataNode(boundaryNode)){workingRange.setEndPoint(isStart?"EndToStart":"EndToEnd",textRange);var offset;if(/[\r\n]/.test(boundaryNode.data)){var tempRange=workingRange.duplicate();var rangeLength=tempRange.text.replace(/\r\n/g,"\r").length;offset=tempRange.moveStart("character",rangeLength);while((comparison=tempRange.compareEndPoints("StartToEnd",tempRange))==-1){offset++;tempRange.moveStart("character",1);}}else{offset=workingRange.text.length;}
boundaryPosition=new DomPosition(boundaryNode,offset);}else{previousNode=(isCollapsed||!isStart)&&workingNode.previousSibling;nextNode=(isCollapsed||isStart)&&workingNode.nextSibling;if(nextNode&&dom.isCharacterDataNode(nextNode)){boundaryPosition=new DomPosition(nextNode,0);}else if(previousNode&&dom.isCharacterDataNode(previousNode)){boundaryPosition=new DomPosition(previousNode,previousNode.length);}else{boundaryPosition=new DomPosition(containerElement,dom.getNodeIndex(workingNode));}}
workingNode.parentNode.removeChild(workingNode);return boundaryPosition;}
function createBoundaryTextRange(boundaryPosition,isStart){var boundaryNode,boundaryParent,boundaryOffset=boundaryPosition.offset;var doc=dom.getDocument(boundaryPosition.node);var workingNode,childNodes,workingRange=doc.body.createTextRange();var nodeIsDataNode=dom.isCharacterDataNode(boundaryPosition.node);if(nodeIsDataNode){boundaryNode=boundaryPosition.node;boundaryParent=boundaryNode.parentNode;}else{childNodes=boundaryPosition.node.childNodes;boundaryNode=(boundaryOffset<childNodes.length)?childNodes[boundaryOffset]:null;boundaryParent=boundaryPosition.node;}
workingNode=doc.createElement("span");workingNode.innerHTML="&#feff;";if(boundaryNode){boundaryParent.insertBefore(workingNode,boundaryNode);}else{boundaryParent.appendChild(workingNode);}
workingRange.moveToElementText(workingNode);workingRange.collapse(!isStart);boundaryParent.removeChild(workingNode);if(nodeIsDataNode){workingRange[isStart?"moveStart":"moveEnd"]("character",boundaryOffset);}
return workingRange;}
if(api.features.implementsDomRange&&(!api.features.implementsTextRange||!api.config.preferTextRange)){(function(){var rangeProto;var rangeProperties=DomRange.rangeProperties;var canSetRangeStartAfterEnd;function updateRangeProperties(range){var i=rangeProperties.length,prop;while(i--){prop=rangeProperties[i];range[prop]=range.nativeRange[prop];}}
function updateNativeRange(range,startContainer,startOffset,endContainer,endOffset){var startMoved=(range.startContainer!==startContainer||range.startOffset!=startOffset);var endMoved=(range.endContainer!==endContainer||range.endOffset!=endOffset);if(startMoved||endMoved){range.setEnd(endContainer,endOffset);range.setStart(startContainer,startOffset);}}
function detach(range){range.nativeRange.detach();range.detached=true;var i=rangeProperties.length,prop;while(i--){prop=rangeProperties[i];range[prop]=null;}}
var createBeforeAfterNodeSetter;WrappedRange=function(range){if(!range){throw new Error("Range must be specified");}
this.nativeRange=range;updateRangeProperties(this);};DomRange.createPrototypeRange(WrappedRange,updateNativeRange,detach);rangeProto=WrappedRange.prototype;rangeProto.selectNode=function(node){this.nativeRange.selectNode(node);updateRangeProperties(this);};rangeProto.deleteContents=function(){this.nativeRange.deleteContents();updateRangeProperties(this);};rangeProto.extractContents=function(){var frag=this.nativeRange.extractContents();updateRangeProperties(this);return frag;};rangeProto.cloneContents=function(){return this.nativeRange.cloneContents();};rangeProto.surroundContents=function(node){this.nativeRange.surroundContents(node);updateRangeProperties(this);};rangeProto.collapse=function(isStart){this.nativeRange.collapse(isStart);updateRangeProperties(this);};rangeProto.cloneRange=function(){return new WrappedRange(this.nativeRange.cloneRange());};rangeProto.refresh=function(){updateRangeProperties(this);};rangeProto.toString=function(){return this.nativeRange.toString();};var testTextNode=document.createTextNode("test");dom.getBody(document).appendChild(testTextNode);var range=document.createRange();range.setStart(testTextNode,0);range.setEnd(testTextNode,0);try{range.setStart(testTextNode,1);canSetRangeStartAfterEnd=true;rangeProto.setStart=function(node,offset){this.nativeRange.setStart(node,offset);updateRangeProperties(this);};rangeProto.setEnd=function(node,offset){this.nativeRange.setEnd(node,offset);updateRangeProperties(this);};createBeforeAfterNodeSetter=function(name){return function(node){this.nativeRange[name](node);updateRangeProperties(this);};};}catch(ex){canSetRangeStartAfterEnd=false;rangeProto.setStart=function(node,offset){try{this.nativeRange.setStart(node,offset);}catch(ex){this.nativeRange.setEnd(node,offset);this.nativeRange.setStart(node,offset);}
updateRangeProperties(this);};rangeProto.setEnd=function(node,offset){try{this.nativeRange.setEnd(node,offset);}catch(ex){this.nativeRange.setStart(node,offset);this.nativeRange.setEnd(node,offset);}
updateRangeProperties(this);};createBeforeAfterNodeSetter=function(name,oppositeName){return function(node){try{this.nativeRange[name](node);}catch(ex){this.nativeRange[oppositeName](node);this.nativeRange[name](node);}
updateRangeProperties(this);};};}
rangeProto.setStartBefore=createBeforeAfterNodeSetter("setStartBefore","setEndBefore");rangeProto.setStartAfter=createBeforeAfterNodeSetter("setStartAfter","setEndAfter");rangeProto.setEndBefore=createBeforeAfterNodeSetter("setEndBefore","setStartBefore");rangeProto.setEndAfter=createBeforeAfterNodeSetter("setEndAfter","setStartAfter");range.selectNodeContents(testTextNode);if(range.startContainer==testTextNode&&range.endContainer==testTextNode&&range.startOffset==0&&range.endOffset==testTextNode.length){rangeProto.selectNodeContents=function(node){this.nativeRange.selectNodeContents(node);updateRangeProperties(this);};}else{rangeProto.selectNodeContents=function(node){this.setStart(node,0);this.setEnd(node,DomRange.getEndOffset(node));};}
range.selectNodeContents(testTextNode);range.setEnd(testTextNode,3);var range2=document.createRange();range2.selectNodeContents(testTextNode);range2.setEnd(testTextNode,4);range2.setStart(testTextNode,2);if(range.compareBoundaryPoints(range.START_TO_END,range2)==-1&range.compareBoundaryPoints(range.END_TO_START,range2)==1){rangeProto.compareBoundaryPoints=function(type,range){range=range.nativeRange||range;if(type==range.START_TO_END){type=range.END_TO_START;}else if(type==range.END_TO_START){type=range.START_TO_END;}
return this.nativeRange.compareBoundaryPoints(type,range);};}else{rangeProto.compareBoundaryPoints=function(type,range){return this.nativeRange.compareBoundaryPoints(type,range.nativeRange||range);};}
if(api.util.isHostMethod(range,"createContextualFragment")){rangeProto.createContextualFragment=function(fragmentStr){return this.nativeRange.createContextualFragment(fragmentStr);};}
dom.getBody(document).removeChild(testTextNode);range.detach();range2.detach();})();api.createNativeRange=function(doc){doc=doc||document;return doc.createRange();};}else if(api.features.implementsTextRange){WrappedRange=function(textRange){this.textRange=textRange;this.refresh();};WrappedRange.prototype=new DomRange(document);WrappedRange.prototype.refresh=function(){var start,end;var rangeContainerElement=getTextRangeContainerElement(this.textRange);if(textRangeIsCollapsed(this.textRange)){end=start=getTextRangeBoundaryPosition(this.textRange,rangeContainerElement,true,true);}else{start=getTextRangeBoundaryPosition(this.textRange,rangeContainerElement,true,false);end=getTextRangeBoundaryPosition(this.textRange,rangeContainerElement,false,false);}
this.setStart(start.node,start.offset);this.setEnd(end.node,end.offset);};DomRange.copyComparisonConstants(WrappedRange);var globalObj=(function(){return this;})();if(typeof globalObj.Range=="undefined"){globalObj.Range=WrappedRange;}
api.createNativeRange=function(doc){doc=doc||document;return doc.body.createTextRange();};}
if(api.features.implementsTextRange){WrappedRange.rangeToTextRange=function(range){if(range.collapsed){var tr=createBoundaryTextRange(new DomPosition(range.startContainer,range.startOffset),true);return tr;}else{var startRange=createBoundaryTextRange(new DomPosition(range.startContainer,range.startOffset),true);var endRange=createBoundaryTextRange(new DomPosition(range.endContainer,range.endOffset),false);var textRange=dom.getDocument(range.startContainer).body.createTextRange();textRange.setEndPoint("StartToStart",startRange);textRange.setEndPoint("EndToEnd",endRange);return textRange;}};}
WrappedRange.prototype.getName=function(){return"WrappedRange";};api.WrappedRange=WrappedRange;api.createRange=function(doc){doc=doc||document;return new WrappedRange(api.createNativeRange(doc));};api.createRangyRange=function(doc){doc=doc||document;return new DomRange(doc);};api.createIframeRange=function(iframeEl){return api.createRange(dom.getIframeDocument(iframeEl));};api.createIframeRangyRange=function(iframeEl){return api.createRangyRange(dom.getIframeDocument(iframeEl));};api.addCreateMissingNativeApiListener(function(win){var doc=win.document;if(typeof doc.createRange=="undefined"){doc.createRange=function(){return api.createRange(this);};}
doc=win=null;});});rangy.createModule("WrappedSelection",function(api,module){api.requireModules(["DomUtil","DomRange","WrappedRange"]);api.config.checkSelectionRanges=true;var BOOLEAN="boolean",windowPropertyName="_rangySelection",dom=api.dom,util=api.util,DomRange=api.DomRange,WrappedRange=api.WrappedRange,DOMException=api.DOMException,DomPosition=dom.DomPosition,getSelection,selectionIsCollapsed,CONTROL="Control";function getWinSelection(winParam){return(winParam||window).getSelection();}
function getDocSelection(winParam){return(winParam||window).document.selection;}
var implementsWinGetSelection=api.util.isHostMethod(window,"getSelection"),implementsDocSelection=api.util.isHostObject(document,"selection");var useDocumentSelection=implementsDocSelection&&(!implementsWinGetSelection||api.config.preferTextRange);if(useDocumentSelection){getSelection=getDocSelection;api.isSelectionValid=function(winParam){var doc=(winParam||window).document,nativeSel=doc.selection;return(nativeSel.type!="None"||dom.getDocument(nativeSel.createRange().parentElement())==doc);};}else if(implementsWinGetSelection){getSelection=getWinSelection;api.isSelectionValid=function(){return true;};}else{module.fail("Neither document.selection or window.getSelection() detected.");}
api.getNativeSelection=getSelection;var testSelection=getSelection();var testRange=api.createNativeRange(document);var body=dom.getBody(document);var selectionHasAnchorAndFocus=util.areHostObjects(testSelection,["anchorNode","focusNode"]&&util.areHostProperties(testSelection,["anchorOffset","focusOffset"]));api.features.selectionHasAnchorAndFocus=selectionHasAnchorAndFocus;var selectionHasExtend=util.isHostMethod(testSelection,"extend");api.features.selectionHasExtend=selectionHasExtend;var selectionHasRangeCount=(typeof testSelection.rangeCount=="number");api.features.selectionHasRangeCount=selectionHasRangeCount;var selectionSupportsMultipleRanges=false;var collapsedNonEditableSelectionsSupported=true;if(util.areHostMethods(testSelection,["addRange","getRangeAt","removeAllRanges"])&&typeof testSelection.rangeCount=="number"&&api.features.implementsDomRange){(function(){var iframe=document.createElement("iframe");iframe.frameBorder=0;iframe.style.position="absolute";iframe.style.left="-10000px";body.appendChild(iframe);var iframeDoc=dom.getIframeDocument(iframe);iframeDoc.open();iframeDoc.write("<html><head></head><body>12</body></html>");iframeDoc.close();var sel=dom.getIframeWindow(iframe).getSelection();var docEl=iframeDoc.documentElement;var iframeBody=docEl.lastChild,textNode=iframeBody.firstChild;var r1=iframeDoc.createRange();r1.setStart(textNode,1);r1.collapse(true);sel.addRange(r1);collapsedNonEditableSelectionsSupported=(sel.rangeCount==1);sel.removeAllRanges();var r2=r1.cloneRange();r1.setStart(textNode,0);r2.setEnd(textNode,2);sel.addRange(r1);sel.addRange(r2);selectionSupportsMultipleRanges=(sel.rangeCount==2);r1.detach();r2.detach();body.removeChild(iframe);})();}
api.features.selectionSupportsMultipleRanges=selectionSupportsMultipleRanges;api.features.collapsedNonEditableSelectionsSupported=collapsedNonEditableSelectionsSupported;var implementsControlRange=false,testControlRange;if(body&&util.isHostMethod(body,"createControlRange")){testControlRange=body.createControlRange();if(util.areHostProperties(testControlRange,["item","add"])){implementsControlRange=true;}}
api.features.implementsControlRange=implementsControlRange;if(selectionHasAnchorAndFocus){selectionIsCollapsed=function(sel){return sel.anchorNode===sel.focusNode&&sel.anchorOffset===sel.focusOffset;};}else{selectionIsCollapsed=function(sel){return sel.rangeCount?sel.getRangeAt(sel.rangeCount-1).collapsed:false;};}
function updateAnchorAndFocusFromRange(sel,range,backwards){var anchorPrefix=backwards?"end":"start",focusPrefix=backwards?"start":"end";sel.anchorNode=range[anchorPrefix+"Container"];sel.anchorOffset=range[anchorPrefix+"Offset"];sel.focusNode=range[focusPrefix+"Container"];sel.focusOffset=range[focusPrefix+"Offset"];}
function updateAnchorAndFocusFromNativeSelection(sel){var nativeSel=sel.nativeSelection;sel.anchorNode=nativeSel.anchorNode;sel.anchorOffset=nativeSel.anchorOffset;sel.focusNode=nativeSel.focusNode;sel.focusOffset=nativeSel.focusOffset;}
function updateEmptySelection(sel){sel.anchorNode=sel.focusNode=null;sel.anchorOffset=sel.focusOffset=0;sel.rangeCount=0;sel.isCollapsed=true;sel._ranges.length=0;}
function getNativeRange(range){var nativeRange;if(range instanceof DomRange){nativeRange=range._selectionNativeRange;if(!nativeRange){nativeRange=api.createNativeRange(dom.getDocument(range.startContainer));nativeRange.setEnd(range.endContainer,range.endOffset);nativeRange.setStart(range.startContainer,range.startOffset);range._selectionNativeRange=nativeRange;range.attachListener("detach",function(){this._selectionNativeRange=null;});}}else if(range instanceof WrappedRange){nativeRange=range.nativeRange;}else if(api.features.implementsDomRange&&(range instanceof dom.getWindow(range.startContainer).Range)){nativeRange=range;}
return nativeRange;}
function rangeContainsSingleElement(rangeNodes){if(!rangeNodes.length||rangeNodes[0].nodeType!=1){return false;}
for(var i=1,len=rangeNodes.length;i<len;++i){if(!dom.isAncestorOf(rangeNodes[0],rangeNodes[i])){return false;}}
return true;}
function getSingleElementFromRange(range){var nodes=range.getNodes();if(!rangeContainsSingleElement(nodes)){throw new Error("getSingleElementFromRange: range "+range.inspect()+" did not consist of a single element");}
return nodes[0];}
function isTextRange(range){return!!range&&typeof range.text!="undefined";}
function updateFromTextRange(sel,range){var wrappedRange=new WrappedRange(range);sel._ranges=[wrappedRange];updateAnchorAndFocusFromRange(sel,wrappedRange,false);sel.rangeCount=1;sel.isCollapsed=wrappedRange.collapsed;}
function updateControlSelection(sel){sel._ranges.length=0;if(sel.docSelection.type=="None"){updateEmptySelection(sel);}else{var controlRange=sel.docSelection.createRange();if(isTextRange(controlRange)){updateFromTextRange(sel,controlRange);}else{sel.rangeCount=controlRange.length;var range,doc=dom.getDocument(controlRange.item(0));for(var i=0;i<sel.rangeCount;++i){range=api.createRange(doc);range.selectNode(controlRange.item(i));sel._ranges.push(range);}
sel.isCollapsed=sel.rangeCount==1&&sel._ranges[0].collapsed;updateAnchorAndFocusFromRange(sel,sel._ranges[sel.rangeCount-1],false);}}}
function addRangeToControlSelection(sel,range){var controlRange=sel.docSelection.createRange();var rangeElement=getSingleElementFromRange(range);var doc=dom.getDocument(controlRange.item(0));var newControlRange=dom.getBody(doc).createControlRange();for(var i=0,len=controlRange.length;i<len;++i){newControlRange.add(controlRange.item(i));}
try{newControlRange.add(rangeElement);}catch(ex){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)");}
newControlRange.select();updateControlSelection(sel);}
var getSelectionRangeAt;if(util.isHostMethod(testSelection,"getRangeAt")){getSelectionRangeAt=function(sel,index){try{return sel.getRangeAt(index);}catch(ex){return null;}};}else if(selectionHasAnchorAndFocus){getSelectionRangeAt=function(sel){var doc=dom.getDocument(sel.anchorNode);var range=api.createRange(doc);range.setStart(sel.anchorNode,sel.anchorOffset);range.setEnd(sel.focusNode,sel.focusOffset);if(range.collapsed!==this.isCollapsed){range.setStart(sel.focusNode,sel.focusOffset);range.setEnd(sel.anchorNode,sel.anchorOffset);}
return range;};}
function WrappedSelection(selection,docSelection,win){this.nativeSelection=selection;this.docSelection=docSelection;this._ranges=[];this.win=win;this.refresh();}
api.getSelection=function(win){win=win||window;var sel=win[windowPropertyName];var nativeSel=getSelection(win),docSel=implementsDocSelection?getDocSelection(win):null;if(sel){sel.nativeSelection=nativeSel;sel.docSelection=docSel;sel.refresh(win);}else{sel=new WrappedSelection(nativeSel,docSel,win);win[windowPropertyName]=sel;}
return sel;};api.getIframeSelection=function(iframeEl){return api.getSelection(dom.getIframeWindow(iframeEl));};var selProto=WrappedSelection.prototype;function createControlSelection(sel,ranges){var doc=dom.getDocument(ranges[0].startContainer);var controlRange=dom.getBody(doc).createControlRange();for(var i=0,el;i<rangeCount;++i){el=getSingleElementFromRange(ranges[i]);try{controlRange.add(el);}catch(ex){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)");}}
controlRange.select();updateControlSelection(sel);}
if(!useDocumentSelection&&selectionHasAnchorAndFocus&&util.areHostMethods(testSelection,["removeAllRanges","addRange"])){selProto.removeAllRanges=function(){this.nativeSelection.removeAllRanges();updateEmptySelection(this);};var addRangeBackwards=function(sel,range){var doc=DomRange.getRangeDocument(range);var endRange=api.createRange(doc);endRange.collapseToPoint(range.endContainer,range.endOffset);sel.nativeSelection.addRange(getNativeRange(endRange));sel.nativeSelection.extend(range.startContainer,range.startOffset);sel.refresh();};if(selectionHasRangeCount){selProto.addRange=function(range,backwards){if(implementsControlRange&&implementsDocSelection&&this.docSelection.type==CONTROL){addRangeToControlSelection(this,range);}else{if(backwards&&selectionHasExtend){addRangeBackwards(this,range);}else{var previousRangeCount;if(selectionSupportsMultipleRanges){previousRangeCount=this.rangeCount;}else{this.removeAllRanges();previousRangeCount=0;}
this.nativeSelection.addRange(getNativeRange(range));this.rangeCount=this.nativeSelection.rangeCount;if(this.rangeCount==previousRangeCount+1){if(api.config.checkSelectionRanges){var nativeRange=getSelectionRangeAt(this.nativeSelection,this.rangeCount-1);if(nativeRange&&!DomRange.rangesEqual(nativeRange,range)){range=new WrappedRange(nativeRange);}}
this._ranges[this.rangeCount-1]=range;updateAnchorAndFocusFromRange(this,range,selectionIsBackwards(this.nativeSelection));this.isCollapsed=selectionIsCollapsed(this);}else{this.refresh();}}}};}else{selProto.addRange=function(range,backwards){if(backwards&&selectionHasExtend){addRangeBackwards(this,range);}else{this.nativeSelection.addRange(getNativeRange(range));this.refresh();}};}
selProto.setRanges=function(ranges){if(implementsControlRange&&ranges.length>1){createControlSelection(this,ranges);}else{this.removeAllRanges();for(var i=0,len=ranges.length;i<len;++i){this.addRange(ranges[i]);}}};}else if(util.isHostMethod(testSelection,"empty")&&util.isHostMethod(testRange,"select")&&implementsControlRange&&useDocumentSelection){selProto.removeAllRanges=function(){try{this.docSelection.empty();if(this.docSelection.type!="None"){var doc;if(this.anchorNode){doc=dom.getDocument(this.anchorNode);}else if(this.docSelection.type==CONTROL){var controlRange=this.docSelection.createRange();if(controlRange.length){doc=dom.getDocument(controlRange.item(0)).body.createTextRange();}}
if(doc){var textRange=doc.body.createTextRange();textRange.select();this.docSelection.empty();}}}catch(ex){}
updateEmptySelection(this);};selProto.addRange=function(range){if(this.docSelection.type==CONTROL){addRangeToControlSelection(this,range);}else{WrappedRange.rangeToTextRange(range).select();this._ranges[0]=range;this.rangeCount=1;this.isCollapsed=this._ranges[0].collapsed;updateAnchorAndFocusFromRange(this,range,false);}};selProto.setRanges=function(ranges){this.removeAllRanges();var rangeCount=ranges.length;if(rangeCount>1){createControlSelection(this,ranges);}else if(rangeCount){this.addRange(ranges[0]);}};}else{module.fail("No means of selecting a Range or TextRange was found");return false;}
selProto.getRangeAt=function(index){if(index<0||index>=this.rangeCount){throw new DOMException("INDEX_SIZE_ERR");}else{return this._ranges[index];}};var refreshSelection;if(useDocumentSelection){refreshSelection=function(sel){var range;if(api.isSelectionValid(sel.win)){range=sel.docSelection.createRange();}else{range=dom.getBody(sel.win.document).createTextRange();range.collapse(true);}
if(sel.docSelection.type==CONTROL){updateControlSelection(sel);}else if(isTextRange(range)){updateFromTextRange(sel,range);}else{updateEmptySelection(sel);}};}else if(util.isHostMethod(testSelection,"getRangeAt")&&typeof testSelection.rangeCount=="number"){refreshSelection=function(sel){if(implementsControlRange&&implementsDocSelection&&sel.docSelection.type==CONTROL){updateControlSelection(sel);}else{sel._ranges.length=sel.rangeCount=sel.nativeSelection.rangeCount;if(sel.rangeCount){for(var i=0,len=sel.rangeCount;i<len;++i){sel._ranges[i]=new api.WrappedRange(sel.nativeSelection.getRangeAt(i));}
updateAnchorAndFocusFromRange(sel,sel._ranges[sel.rangeCount-1],selectionIsBackwards(sel.nativeSelection));sel.isCollapsed=selectionIsCollapsed(sel);}else{updateEmptySelection(sel);}}};}else if(selectionHasAnchorAndFocus&&typeof testSelection.isCollapsed==BOOLEAN&&typeof testRange.collapsed==BOOLEAN&&api.features.implementsDomRange){refreshSelection=function(sel){var range,nativeSel=sel.nativeSelection;if(nativeSel.anchorNode){range=getSelectionRangeAt(nativeSel,0);sel._ranges=[range];sel.rangeCount=1;updateAnchorAndFocusFromNativeSelection(sel);sel.isCollapsed=selectionIsCollapsed(sel);}else{updateEmptySelection(sel);}};}else{module.fail("No means of obtaining a Range or TextRange from the user's selection was found");return false;}
selProto.refresh=function(checkForChanges){var oldRanges=checkForChanges?this._ranges.slice(0):null;refreshSelection(this);if(checkForChanges){var i=oldRanges.length;if(i!=this._ranges.length){return false;}
while(i--){if(!DomRange.rangesEqual(oldRanges[i],this._ranges[i])){return false;}}
return true;}};var removeRangeManually=function(sel,range){var ranges=sel.getAllRanges(),removed=false;sel.removeAllRanges();for(var i=0,len=ranges.length;i<len;++i){if(removed||range!==ranges[i]){sel.addRange(ranges[i]);}else{removed=true;}}
if(!sel.rangeCount){updateEmptySelection(sel);}};if(implementsControlRange){selProto.removeRange=function(range){if(this.docSelection.type==CONTROL){var controlRange=this.docSelection.createRange();var rangeElement=getSingleElementFromRange(range);var doc=dom.getDocument(controlRange.item(0));var newControlRange=dom.getBody(doc).createControlRange();var el,removed=false;for(var i=0,len=controlRange.length;i<len;++i){el=controlRange.item(i);if(el!==rangeElement||removed){newControlRange.add(controlRange.item(i));}else{removed=true;}}
newControlRange.select();updateControlSelection(this);}else{removeRangeManually(this,range);}};}else{selProto.removeRange=function(range){removeRangeManually(this,range);};}
var selectionIsBackwards;if(!useDocumentSelection&&selectionHasAnchorAndFocus&&api.features.implementsDomRange){selectionIsBackwards=function(sel){var backwards=false;if(sel.anchorNode){backwards=(dom.comparePoints(sel.anchorNode,sel.anchorOffset,sel.focusNode,sel.focusOffset)==1);}
return backwards;};selProto.isBackwards=function(){return selectionIsBackwards(this);};}else{selectionIsBackwards=selProto.isBackwards=function(){return false;};}
selProto.toString=function(){var rangeTexts=[];for(var i=0,len=this.rangeCount;i<len;++i){rangeTexts[i]=""+this._ranges[i];}
return rangeTexts.join("");};function assertNodeInSameDocument(sel,node){if(sel.anchorNode&&(dom.getDocument(sel.anchorNode)!==dom.getDocument(node))){throw new DOMException("WRONG_DOCUMENT_ERR");}}
selProto.collapse=function(node,offset){assertNodeInSameDocument(this,node);var range=api.createRange(dom.getDocument(node));range.collapseToPoint(node,offset);this.removeAllRanges();this.addRange(range);this.isCollapsed=true;};selProto.collapseToStart=function(){if(this.rangeCount){var range=this._ranges[0];this.collapse(range.startContainer,range.startOffset);}else{throw new DOMException("INVALID_STATE_ERR");}};selProto.collapseToEnd=function(){if(this.rangeCount){var range=this._ranges[this.rangeCount-1];this.collapse(range.endContainer,range.endOffset);}else{throw new DOMException("INVALID_STATE_ERR");}};selProto.selectAllChildren=function(node){assertNodeInSameDocument(this,node);var range=api.createRange(dom.getDocument(node));range.selectNodeContents(node);this.removeAllRanges();this.addRange(range);};selProto.deleteFromDocument=function(){if(implementsControlRange&&implementsDocSelection&&this.docSelection.type==CONTROL){var controlRange=this.docSelection.createRange();var element;while(controlRange.length){element=controlRange.item(0);controlRange.remove(element);element.parentNode.removeChild(element);}
this.refresh();}else if(this.rangeCount){var ranges=this.getAllRanges();this.removeAllRanges();for(var i=0,len=ranges.length;i<len;++i){ranges[i].deleteContents();}
this.addRange(ranges[len-1]);}};selProto.getAllRanges=function(){return this._ranges.slice(0);};selProto.setSingleRange=function(range){this.setRanges([range]);};selProto.containsNode=function(node,allowPartial){for(var i=0,len=this._ranges.length;i<len;++i){if(this._ranges[i].containsNode(node,allowPartial)){return true;}}
return false;};selProto.toHtml=function(){var html="";if(this.rangeCount){var container=DomRange.getRangeDocument(this._ranges[0]).createElement("div");for(var i=0,len=this._ranges.length;i<len;++i){container.appendChild(this._ranges[i].cloneContents());}
html=container.innerHTML;}
return html;};function inspect(sel){var rangeInspects=[];var anchor=new DomPosition(sel.anchorNode,sel.anchorOffset);var focus=new DomPosition(sel.focusNode,sel.focusOffset);var name=(typeof sel.getName=="function")?sel.getName():"Selection";if(typeof sel.rangeCount!="undefined"){for(var i=0,len=sel.rangeCount;i<len;++i){rangeInspects[i]=DomRange.inspect(sel.getRangeAt(i));}}
return"["+name+"(Ranges: "+rangeInspects.join(", ")+")(anchor: "+anchor.inspect()+", focus: "+focus.inspect()+"]";}
selProto.getName=function(){return"WrappedSelection";};selProto.inspect=function(){return inspect(this);};selProto.detach=function(){this.win[windowPropertyName]=null;this.win=this.anchorNode=this.focusNode=null;};WrappedSelection.inspect=inspect;api.Selection=WrappedSelection;api.selectionPrototype=selProto;api.addCreateMissingNativeApiListener(function(win){if(typeof win.getSelection=="undefined"){win.getSelection=function(){return api.getSelection(this);};}
win=null;});});rangy.createModule("CssClassApplier",function(api,module){api.requireModules(["WrappedSelection","WrappedRange"]);var dom=api.dom;var defaultTagName="span";function trim(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"");}
function hasClass(el,cssClass){return el.className&&new RegExp("(?:^|\\s)"+cssClass+"(?:\\s|$)").test(el.className);}
function addClass(el,cssClass){if(el.className){if(!hasClass(el,cssClass)){el.className+=" "+cssClass;}}else{el.className=cssClass;}}
var removeClass=(function(){function replacer(matched,whiteSpaceBefore,whiteSpaceAfter){return(whiteSpaceBefore&&whiteSpaceAfter)?" ":"";}
return function(el,cssClass){if(el.className){el.className=el.className.replace(new RegExp("(?:^|\\s)"+cssClass+"(?:\\s|$)"),replacer);}};})();function sortClassName(className){return className.split(/\s+/).sort().join(" ");}
function getSortedClassName(el){return sortClassName(el.className);}
function haveSameClasses(el1,el2){return getSortedClassName(el1)==getSortedClassName(el2);}
function replaceWithOwnChildren(el){var parent=el.parentNode;while(el.hasChildNodes()){parent.insertBefore(el.firstChild,el);}
parent.removeChild(el);}
function rangeSelectsAnyText(range,textNode){var textRange=range.cloneRange();textRange.selectNodeContents(textNode);var intersectionRange=textRange.intersection(range);var text=intersectionRange?intersectionRange.toString():"";textRange.detach();return text!="";}
function getEffectiveTextNodes(range){return range.getNodes([3],function(textNode){return rangeSelectsAnyText(range,textNode);});}
function elementsHaveSameNonClassAttributes(el1,el2){if(el1.attributes.length!=el2.attributes.length)return false;for(var i=0,len=el1.attributes.length,attr1,attr2,name;i<len;++i){attr1=el1.attributes[i];name=attr1.name;if(name!="class"){attr2=el2.attributes.getNamedItem(name);if(attr1.specified!=attr2.specified)return false;if(attr1.specified&&attr1.nodeValue!==attr2.nodeValue)return false;}}
return true;}
function elementHasNonClassAttributes(el,exceptions){for(var i=0,len=el.attributes.length,attrName;i<len;++i){attrName=el.attributes[i].name;if(!(exceptions&&dom.arrayContains(exceptions,attrName))&&el.attributes[i].specified&&attrName!="class"){return true;}}
return false;}
function elementHasProps(el,props){for(var p in props){if(props.hasOwnProperty(p)&&el[p]!==props[p]){return false;}}
return true;}
var getComputedStyleProperty;if(typeof window.getComputedStyle!="undefined"){getComputedStyleProperty=function(el,propName){return dom.getWindow(el).getComputedStyle(el,null)[propName];};}else if(typeof document.documentElement.currentStyle!="undefined"){getComputedStyleProperty=function(el,propName){return el.currentStyle[propName];};}else{module.fail("No means of obtaining computed style properties found");}
var isEditableElement;(function(){var testEl=document.createElement("div");if(typeof testEl.isContentEditable=="boolean"){isEditableElement=function(node){return node&&node.nodeType==1&&node.isContentEditable;};}else{isEditableElement=function(node){if(!node||node.nodeType!=1||node.contentEditable=="false"){return false;}
return node.contentEditable=="true"||isEditableElement(node.parentNode);};}})();function isEditingHost(node){var parent;return node&&node.nodeType==1&&(((parent=node.parentNode)&&parent.nodeType==9&&parent.designMode=="on")||(isEditableElement(node)&&!isEditableElement(node.parentNode)));}
function isEditable(node){return(isEditableElement(node)||(node.nodeType!=1&&isEditableElement(node.parentNode)))&&!isEditingHost(node);}
var inlineDisplayRegex=/^inline(-block|-table)?$/i;function isNonInlineElement(node){return node&&node.nodeType==1&&!inlineDisplayRegex.test(getComputedStyleProperty(node,"display"));}
var htmlNonWhiteSpaceRegex=/[^\r\n\t\f \u200B]/;function isUnrenderedWhiteSpaceNode(node){if(node.data.length==0){return true;}
if(htmlNonWhiteSpaceRegex.test(node.data)){return false;}
var cssWhiteSpace=getComputedStyleProperty(node.parentNode,"whiteSpace");switch(cssWhiteSpace){case"pre":case"pre-wrap":case"-moz-pre-wrap":return false;case"pre-line":if(/[\r\n]/.test(node.data)){return false;}}
return isNonInlineElement(node.previousSibling)||isNonInlineElement(node.nextSibling);}
function isSplitPoint(node,offset){if(dom.isCharacterDataNode(node)){if(offset==0){return!!node.previousSibling;}else if(offset==node.length){return!!node.nextSibling;}else{return true;}}
return offset>0&&offset<node.childNodes.length;}
function splitNodeAt(node,descendantNode,descendantOffset,rangesToPreserve){var newNode;var splitAtStart=(descendantOffset==0);if(dom.isAncestorOf(descendantNode,node)){return node;}
if(dom.isCharacterDataNode(descendantNode)){if(descendantOffset==0){descendantOffset=dom.getNodeIndex(descendantNode);descendantNode=descendantNode.parentNode;}else if(descendantOffset==descendantNode.length){descendantOffset=dom.getNodeIndex(descendantNode)+1;descendantNode=descendantNode.parentNode;}else{throw module.createError("splitNodeAt should not be called with offset in the middle of a data node ("
+descendantOffset+" in "+descendantNode.data);}}
if(isSplitPoint(descendantNode,descendantOffset)){if(!newNode){newNode=descendantNode.cloneNode(false);if(newNode.id){newNode.removeAttribute("id");}
var child;while((child=descendantNode.childNodes[descendantOffset])){newNode.appendChild(child);}
dom.insertAfter(newNode,descendantNode);}
return(descendantNode==node)?newNode:splitNodeAt(node,newNode.parentNode,dom.getNodeIndex(newNode),rangesToPreserve);}else if(node!=descendantNode){newNode=descendantNode.parentNode;var newNodeIndex=dom.getNodeIndex(descendantNode);if(!splitAtStart){newNodeIndex++;}
return splitNodeAt(node,newNode,newNodeIndex,rangesToPreserve);}
return node;}
function areElementsMergeable(el1,el2){return el1.tagName==el2.tagName&&haveSameClasses(el1,el2)&&elementsHaveSameNonClassAttributes(el1,el2);}
function createAdjacentMergeableTextNodeGetter(forward){var propName=forward?"nextSibling":"previousSibling";return function(textNode,checkParentElement){var el=textNode.parentNode;var adjacentNode=textNode[propName];if(adjacentNode){if(adjacentNode&&adjacentNode.nodeType==3){return adjacentNode;}}else if(checkParentElement){adjacentNode=el[propName];if(adjacentNode&&adjacentNode.nodeType==1&&areElementsMergeable(el,adjacentNode)){return adjacentNode[forward?"firstChild":"lastChild"];}}
return null;}}
var getPreviousMergeableTextNode=createAdjacentMergeableTextNodeGetter(false),getNextMergeableTextNode=createAdjacentMergeableTextNodeGetter(true);function Merge(firstNode){this.isElementMerge=(firstNode.nodeType==1);this.firstTextNode=this.isElementMerge?firstNode.lastChild:firstNode;this.textNodes=[this.firstTextNode];}
Merge.prototype={doMerge:function(){var textBits=[],textNode,parent,text;for(var i=0,len=this.textNodes.length;i<len;++i){textNode=this.textNodes[i];parent=textNode.parentNode;textBits[i]=textNode.data;if(i){parent.removeChild(textNode);if(!parent.hasChildNodes()){parent.parentNode.removeChild(parent);}}}
this.firstTextNode.data=text=textBits.join("");return text;},getLength:function(){var i=this.textNodes.length,len=0;while(i--){len+=this.textNodes[i].length;}
return len;},toString:function(){var textBits=[];for(var i=0,len=this.textNodes.length;i<len;++i){textBits[i]="'"+this.textNodes[i].data+"'";}
return"[Merge("+textBits.join(",")+")]";}};var optionProperties=["elementTagName","ignoreWhiteSpace","applyToEditableOnly"];var mappedPropertyNames={"class":"className"};function CssClassApplier(cssClass,options,tagNames){this.cssClass=cssClass;var normalize,i,len,propName;var elementPropertiesFromOptions=null;if(typeof options=="object"&&options!==null){tagNames=options.tagNames;elementPropertiesFromOptions=options.elementProperties;for(i=0;propName=optionProperties[i++];){if(options.hasOwnProperty(propName)){this[propName]=options[propName];}}
normalize=options.normalize;}else{normalize=options;}
this.normalize=(typeof normalize=="undefined")?true:normalize;this.attrExceptions=[];var el=document.createElement(this.elementTagName);this.elementProperties={};for(var p in elementPropertiesFromOptions){if(elementPropertiesFromOptions.hasOwnProperty(p)){if(mappedPropertyNames.hasOwnProperty(p)){p=mappedPropertyNames[p];}
el[p]=elementPropertiesFromOptions[p];this.elementProperties[p]=el[p];this.attrExceptions.push(p);}}
this.elementSortedClassName=this.elementProperties.hasOwnProperty("className")?sortClassName(this.elementProperties.className+" "+cssClass):cssClass;this.applyToAnyTagName=false;var type=typeof tagNames;if(type=="string"){if(tagNames=="*"){this.applyToAnyTagName=true;}else{this.tagNames=trim(tagNames.toLowerCase()).split(/\s*,\s*/);}}else if(type=="object"&&typeof tagNames.length=="number"){this.tagNames=[];for(i=0,len=tagNames.length;i<len;++i){if(tagNames[i]=="*"){this.applyToAnyTagName=true;}else{this.tagNames.push(tagNames[i].toLowerCase());}}}else{this.tagNames=[this.elementTagName];}}
CssClassApplier.prototype={elementTagName:defaultTagName,elementProperties:{},ignoreWhiteSpace:true,applyToEditableOnly:false,hasClass:function(node){return node.nodeType==1&&dom.arrayContains(this.tagNames,node.tagName.toLowerCase())&&hasClass(node,this.cssClass);},getSelfOrAncestorWithClass:function(node){while(node){if(this.hasClass(node,this.cssClass)){return node;}
node=node.parentNode;}
return null;},isModifiable:function(node){return!this.applyToEditableOnly||isEditable(node);},isIgnorableWhiteSpaceNode:function(node){return this.ignoreWhiteSpace&&node&&node.nodeType==3&&isUnrenderedWhiteSpaceNode(node);},postApply:function(textNodes,range,isUndo){var firstNode=textNodes[0],lastNode=textNodes[textNodes.length-1];var merges=[],currentMerge;var rangeStartNode=firstNode,rangeEndNode=lastNode;var rangeStartOffset=0,rangeEndOffset=lastNode.length;var textNode,precedingTextNode;for(var i=0,len=textNodes.length;i<len;++i){textNode=textNodes[i];precedingTextNode=getPreviousMergeableTextNode(textNode,!isUndo);if(precedingTextNode){if(!currentMerge){currentMerge=new Merge(precedingTextNode);merges.push(currentMerge);}
currentMerge.textNodes.push(textNode);if(textNode===firstNode){rangeStartNode=currentMerge.firstTextNode;rangeStartOffset=rangeStartNode.length;}
if(textNode===lastNode){rangeEndNode=currentMerge.firstTextNode;rangeEndOffset=currentMerge.getLength();}}else{currentMerge=null;}}
var nextTextNode=getNextMergeableTextNode(lastNode,!isUndo);if(nextTextNode){if(!currentMerge){currentMerge=new Merge(lastNode);merges.push(currentMerge);}
currentMerge.textNodes.push(nextTextNode);}
if(merges.length){for(i=0,len=merges.length;i<len;++i){merges[i].doMerge();}
range.setStart(rangeStartNode,rangeStartOffset);range.setEnd(rangeEndNode,rangeEndOffset);}},createContainer:function(doc){var el=doc.createElement(this.elementTagName);api.util.extend(el,this.elementProperties);addClass(el,this.cssClass);return el;},applyToTextNode:function(textNode){var parent=textNode.parentNode;if(parent.childNodes.length==1&&dom.arrayContains(this.tagNames,parent.tagName.toLowerCase())){addClass(parent,this.cssClass);}else{var el=this.createContainer(dom.getDocument(textNode));textNode.parentNode.insertBefore(el,textNode);el.appendChild(textNode);}},isRemovable:function(el){return el.tagName.toLowerCase()==this.elementTagName&&getSortedClassName(el)==this.elementSortedClassName&&elementHasProps(el,this.elementProperties)&&!elementHasNonClassAttributes(el,this.attrExceptions)&&this.isModifiable(el);},undoToTextNode:function(textNode,range,ancestorWithClass){if(!range.containsNode(ancestorWithClass)){var ancestorRange=range.cloneRange();ancestorRange.selectNode(ancestorWithClass);if(ancestorRange.isPointInRange(range.endContainer,range.endOffset)){splitNodeAt(ancestorWithClass,range.endContainer,range.endOffset,[range]);range.setEndAfter(ancestorWithClass);}
if(ancestorRange.isPointInRange(range.startContainer,range.startOffset)){ancestorWithClass=splitNodeAt(ancestorWithClass,range.startContainer,range.startOffset,[range]);}}
if(this.isRemovable(ancestorWithClass)){replaceWithOwnChildren(ancestorWithClass);}else{removeClass(ancestorWithClass,this.cssClass);}},applyToRange:function(range){range.splitBoundaries();var textNodes=getEffectiveTextNodes(range);if(textNodes.length){var textNode;for(var i=0,len=textNodes.length;i<len;++i){textNode=textNodes[i];if(!this.isIgnorableWhiteSpaceNode(textNode)&&!this.getSelfOrAncestorWithClass(textNode)&&this.isModifiable(textNode)){this.applyToTextNode(textNode);}}
range.setStart(textNodes[0],0);textNode=textNodes[textNodes.length-1];range.setEnd(textNode,textNode.length);if(this.normalize){this.postApply(textNodes,range,false);}}},applyToSelection:function(win){win=win||window;var sel=api.getSelection(win);var range,ranges=sel.getAllRanges();sel.removeAllRanges();var i=ranges.length;while(i--){range=ranges[i];this.applyToRange(range);sel.addRange(range);}},undoToRange:function(range){range.splitBoundaries();var textNodes=getEffectiveTextNodes(range);var textNode,ancestorWithClass;var lastTextNode=textNodes[textNodes.length-1];if(textNodes.length){for(var i=0,len=textNodes.length;i<len;++i){textNode=textNodes[i];ancestorWithClass=this.getSelfOrAncestorWithClass(textNode);if(ancestorWithClass&&this.isModifiable(textNode)){this.undoToTextNode(textNode,range,ancestorWithClass);}
range.setStart(textNodes[0],0);range.setEnd(lastTextNode,lastTextNode.length);}
if(this.normalize){this.postApply(textNodes,range,true);}}},undoToSelection:function(win){win=win||window;var sel=api.getSelection(win);var ranges=sel.getAllRanges(),range;sel.removeAllRanges();for(var i=0,len=ranges.length;i<len;++i){range=ranges[i];this.undoToRange(range);sel.addRange(range);}},getTextSelectedByRange:function(textNode,range){var textRange=range.cloneRange();textRange.selectNodeContents(textNode);var intersectionRange=textRange.intersection(range);var text=intersectionRange?intersectionRange.toString():"";textRange.detach();return text;},isAppliedToRange:function(range){if(range.collapsed){return!!this.getSelfOrAncestorWithClass(range.commonAncestorContainer);}else{var textNodes=range.getNodes([3]);for(var i=0,textNode;textNode=textNodes[i++];){if(!this.isIgnorableWhiteSpaceNode(textNode)&&rangeSelectsAnyText(range,textNode)&&this.isModifiable(textNode)&&!this.getSelfOrAncestorWithClass(textNode)){return false;}}
return true;}},isAppliedToSelection:function(win){win=win||window;var sel=api.getSelection(win);var ranges=sel.getAllRanges();var i=ranges.length;while(i--){if(!this.isAppliedToRange(ranges[i])){return false;}}
return true;},toggleRange:function(range){if(this.isAppliedToRange(range)){this.undoToRange(range);}else{this.applyToRange(range);}},toggleSelection:function(win){if(this.isAppliedToSelection(win)){this.undoToSelection(win);}else{this.applyToSelection(win);}},detach:function(){}};function createCssClassApplier(cssClass,options,tagNames){return new CssClassApplier(cssClass,options,tagNames);}
CssClassApplier.util={hasClass:hasClass,addClass:addClass,removeClass:removeClass,hasSameClasses:haveSameClasses,replaceWithOwnChildren:replaceWithOwnChildren,elementsHaveSameNonClassAttributes:elementsHaveSameNonClassAttributes,elementHasNonClassAttributes:elementHasNonClassAttributes,splitNodeAt:splitNodeAt,isEditableElement:isEditableElement,isEditingHost:isEditingHost,isEditable:isEditable};api.CssClassApplier=CssClassApplier;api.createCssClassApplier=createCssClassApplier;});rangy.createModule("SaveRestore",function(api,module){api.requireModules(["DomUtil","DomRange","WrappedRange"]);var dom=api.dom;var markerTextChar="\ufeff";function gEBI(id,doc){return(doc||document).getElementById(id);}
function insertRangeBoundaryMarker(range,atStart){var markerId="selectionBoundary_"+(+new Date())+"_"+(""+Math.random()).slice(2);var markerEl;var doc=dom.getDocument(range.startContainer);var boundaryRange=range.cloneRange();boundaryRange.collapse(atStart);markerEl=doc.createElement("span");markerEl.id=markerId;markerEl.style.lineHeight="0";markerEl.style.display="none";markerEl.className="rangySelectionBoundary";markerEl.appendChild(doc.createTextNode(markerTextChar));boundaryRange.insertNode(markerEl);boundaryRange.detach();return markerEl;}
function setRangeBoundary(doc,range,markerId,atStart){var markerEl=gEBI(markerId,doc);if(markerEl){range[atStart?"setStartBefore":"setEndBefore"](markerEl);markerEl.parentNode.removeChild(markerEl);}else{module.warn("Marker element has been removed. Cannot restore selection.");}}
function compareRanges(r1,r2){return r2.compareBoundaryPoints(r1.START_TO_START,r1);}
function saveSelection(win){win=win||window;var doc=win.document;if(!api.isSelectionValid(win)){module.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus.");return;}
var sel=api.getSelection(win);var ranges=sel.getAllRanges();var rangeInfos=[],startEl,endEl,range;ranges.sort(compareRanges);for(var i=0,len=ranges.length;i<len;++i){range=ranges[i];if(range.collapsed){endEl=insertRangeBoundaryMarker(range,false);rangeInfos.push({markerId:endEl.id,collapsed:true});}else{endEl=insertRangeBoundaryMarker(range,false);startEl=insertRangeBoundaryMarker(range,true);rangeInfos[i]={startMarkerId:startEl.id,endMarkerId:endEl.id,collapsed:false,backwards:ranges.length==1&&sel.isBackwards()};}}
for(i=len-1;i>=0;--i){range=ranges[i];if(range.collapsed){range.collapseBefore(gEBI(rangeInfos[i].markerId,doc));}else{range.setEndBefore(gEBI(rangeInfos[i].endMarkerId,doc));range.setStartAfter(gEBI(rangeInfos[i].startMarkerId,doc));}}
sel.setRanges(ranges);return{win:win,doc:doc,rangeInfos:rangeInfos,restored:false};}
function restoreSelection(savedSelection,preserveDirection){if(!savedSelection.restored){var rangeInfos=savedSelection.rangeInfos;var sel=api.getSelection(savedSelection.win);var ranges=[];for(var len=rangeInfos.length,i=len-1,rangeInfo,range;i>=0;--i){rangeInfo=rangeInfos[i];range=api.createRange(savedSelection.doc);if(rangeInfo.collapsed){var markerEl=gEBI(rangeInfo.markerId,savedSelection.doc);if(markerEl){markerEl.style.display="inline";var previousNode=markerEl.previousSibling;if(previousNode&&previousNode.nodeType==3){markerEl.parentNode.removeChild(markerEl);range.collapseToPoint(previousNode,previousNode.length);}else{range.collapseBefore(markerEl);markerEl.parentNode.removeChild(markerEl);}}else{module.warn("Marker element has been removed. Cannot restore selection.");}}else{setRangeBoundary(savedSelection.doc,range,rangeInfo.startMarkerId,true);setRangeBoundary(savedSelection.doc,range,rangeInfo.endMarkerId,false);}
if(len==1){range.normalizeBoundaries();}
ranges[i]=range;}
if(len==1&&preserveDirection&&api.features.selectionHasExtend&&rangeInfos[0].backwards){sel.removeAllRanges();sel.addRange(ranges[0],true);}else{sel.setRanges(ranges);}
savedSelection.restored=true;}}
function removeMarkerElement(doc,markerId){var markerEl=gEBI(markerId,doc);if(markerEl){markerEl.parentNode.removeChild(markerEl);}}
function removeMarkers(savedSelection){var rangeInfos=savedSelection.rangeInfos;for(var i=0,len=rangeInfos.length,rangeInfo;i<len;++i){rangeInfo=rangeInfos[i];if(rangeInfo.collapsed){removeMarkerElement(savedSelection.doc,rangeInfo.markerId);}else{removeMarkerElement(savedSelection.doc,rangeInfo.startMarkerId);removeMarkerElement(savedSelection.doc,rangeInfo.endMarkerId);}}}
api.saveSelection=saveSelection;api.restoreSelection=restoreSelection;api.removeMarkerElement=removeMarkerElement;api.removeMarkers=removeMarkers;});rangy.createModule("Serializer",function(api,module){api.requireModules(["WrappedSelection","WrappedRange"]);var UNDEF="undefined";if(typeof encodeURIComponent==UNDEF||typeof decodeURIComponent==UNDEF){module.fail("Global object is missing encodeURIComponent and/or decodeURIComponent method");}
var crc32=(function(){function utf8encode(str){var utf8CharCodes=[];for(var i=0,len=str.length,c;i<len;++i){c=str.charCodeAt(i);if(c<128){utf8CharCodes.push(c);}else if(c<2048){utf8CharCodes.push((c>>6)|192,(c&63)|128);}else{utf8CharCodes.push((c>>12)|224,((c>>6)&63)|128,(c&63)|128);}}
return utf8CharCodes;}
var cachedCrcTable=null;function buildCRCTable(){var table=[];for(var i=0,j,crc;i<256;++i){crc=i;j=8;while(j--){if((crc&1)==1){crc=(crc>>>1)^0xEDB88320;}else{crc>>>=1;}}
table[i]=crc>>>0;}
return table;}
function getCrcTable(){if(!cachedCrcTable){cachedCrcTable=buildCRCTable();}
return cachedCrcTable;}
return function(str){var utf8CharCodes=utf8encode(str),crc=-1,crcTable=getCrcTable();for(var i=0,len=utf8CharCodes.length,y;i<len;++i){y=(crc^utf8CharCodes[i])&0xFF;crc=(crc>>>8)^crcTable[y];}
return(crc^-1)>>>0;};})();var dom=api.dom;function escapeTextForHtml(str){return str.replace(/</g,"&lt;").replace(/>/g,"&gt;");}
function nodeToInfoString(node,infoParts){infoParts=infoParts||[];var nodeType=node.nodeType,children=node.childNodes,childCount=children.length;var nodeInfo=[nodeType,node.nodeName,childCount].join(":");var start="",end="";switch(nodeType){case 3:start=escapeTextForHtml(node.nodeValue);break;case 8:start="<!--"+escapeTextForHtml(node.nodeValue)+"-->";break;default:start="<"+nodeInfo+">";end="</>";break;}
if(start){infoParts.push(start);}
for(var i=0;i<childCount;++i){nodeToInfoString(children[i],infoParts);}
if(end){infoParts.push(end);}
return infoParts;}
function getElementChecksum(el){var info=nodeToInfoString(el).join("");return crc32(info).toString(16);}
function serializePosition(node,offset,rootNode){var pathBits=[],n=node;rootNode=rootNode||dom.getDocument(node).documentElement;while(n&&n!=rootNode){pathBits.push(dom.getNodeIndex(n,true));n=n.parentNode;}
return pathBits.join("/")+":"+offset;}
function deserializePosition(serialized,rootNode,doc){if(rootNode){doc=doc||dom.getDocument(rootNode);}else{doc=doc||document;rootNode=doc.documentElement;}
var bits=serialized.split(":");var node=rootNode;var nodeIndices=bits[0]?bits[0].split("/"):[],i=nodeIndices.length,nodeIndex;while(i--){nodeIndex=parseInt(nodeIndices[i],10);if(nodeIndex<node.childNodes.length){node=node.childNodes[parseInt(nodeIndices[i],10)];}else{throw module.createError("deserializePosition failed: node "+dom.inspectNode(node)+" has no child with index "+nodeIndex+", "+i);}}
return new dom.DomPosition(node,parseInt(bits[1],10));}
function serializeRange(range,omitChecksum,rootNode){rootNode=rootNode||api.DomRange.getRangeDocument(range).documentElement;if(!dom.isAncestorOf(rootNode,range.commonAncestorContainer,true)){throw new Error("serializeRange: range is not wholly contained within specified root node");}
var serialized=serializePosition(range.startContainer,range.startOffset,rootNode)+","+
serializePosition(range.endContainer,range.endOffset,rootNode);if(!omitChecksum){serialized+="{"+getElementChecksum(rootNode)+"}";}
return serialized;}
function deserializeRange(serialized,rootNode,doc){if(rootNode){doc=doc||dom.getDocument(rootNode);}else{doc=doc||document;rootNode=doc.documentElement;}
var result=/^([^,]+),([^,\{]+)({([^}]+)})?$/.exec(serialized);var checksum=result[4],rootNodeChecksum=getElementChecksum(rootNode);if(checksum&&checksum!==getElementChecksum(rootNode)){throw new Error("deserializeRange: checksums of serialized range root node ("+checksum+") and target root node ("+rootNodeChecksum+") do not match");}
var start=deserializePosition(result[1],rootNode,doc),end=deserializePosition(result[2],rootNode,doc);var range=api.createRange(doc);range.setStart(start.node,start.offset);range.setEnd(end.node,end.offset);return range;}
function canDeserializeRange(serialized,rootNode,doc){if(rootNode){doc=doc||dom.getDocument(rootNode);}else{doc=doc||document;rootNode=doc.documentElement;}
var result=/^([^,]+),([^,]+)({([^}]+)})?$/.exec(serialized);var checksum=result[3];return!checksum||checksum===getElementChecksum(rootNode);}
function serializeSelection(selection,omitChecksum,rootNode){selection=selection||api.getSelection();var ranges=selection.getAllRanges(),serializedRanges=[];for(var i=0,len=ranges.length;i<len;++i){serializedRanges[i]=serializeRange(ranges[i],omitChecksum,rootNode);}
return serializedRanges.join("|");}
function deserializeSelection(serialized,rootNode,win){if(rootNode){win=win||dom.getWindow(rootNode);}else{win=win||window;rootNode=win.document.documentElement;}
var serializedRanges=serialized.split("|");var sel=api.getSelection(win);var ranges=[];for(var i=0,len=serializedRanges.length;i<len;++i){ranges[i]=deserializeRange(serializedRanges[i],rootNode,win.document);}
sel.setRanges(ranges);return sel;}
function canDeserializeSelection(serialized,rootNode,win){var doc;if(rootNode){doc=win?win.document:dom.getDocument(rootNode);}else{win=win||window;rootNode=win.document.documentElement;}
var serializedRanges=serialized.split("|");for(var i=0,len=serializedRanges.length;i<len;++i){if(!canDeserializeRange(serializedRanges[i],rootNode,doc)){return false;}}
return true;}
var cookieName="rangySerializedSelection";function getSerializedSelectionFromCookie(cookie){var parts=cookie.split(/[;,]/);for(var i=0,len=parts.length,nameVal,val;i<len;++i){nameVal=parts[i].split("=");if(nameVal[0].replace(/^\s+/,"")==cookieName){val=nameVal[1];if(val){return decodeURIComponent(val.replace(/\s+$/,""));}}}
return null;}
function restoreSelectionFromCookie(win){win=win||window;var serialized=getSerializedSelectionFromCookie(win.document.cookie);if(serialized){deserializeSelection(serialized,win.doc)}}
function saveSelectionCookie(win,props){win=win||window;props=(typeof props=="object")?props:{};var expires=props.expires?";expires="+props.expires.toUTCString():"";var path=props.path?";path="+props.path:"";var domain=props.domain?";domain="+props.domain:"";var secure=props.secure?";secure":"";var serialized=serializeSelection(api.getSelection(win));win.document.cookie=encodeURIComponent(cookieName)+"="+encodeURIComponent(serialized)+expires+path+domain+secure;}
api.serializePosition=serializePosition;api.deserializePosition=deserializePosition;api.serializeRange=serializeRange;api.deserializeRange=deserializeRange;api.canDeserializeRange=canDeserializeRange;api.serializeSelection=serializeSelection;api.deserializeSelection=deserializeSelection;api.canDeserializeSelection=canDeserializeSelection;api.restoreSelectionFromCookie=restoreSelectionFromCookie;api.saveSelectionCookie=saveSelectionCookie;api.getElementChecksum=getElementChecksum;});(function(window,undefined){var document=window.document,navigator=window.navigator,location=window.location;var jQuery=(function(){var jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery);},_jQuery=window.jQuery,_$=window.$,rootjQuery,quickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rnotwhite=/\S/,trimLeft=/^\s+/,trimRight=/\s+$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rwebkit=/(webkit)[ \/]([\w.]+)/,ropera=/(opera)(?:.*version)?[ \/]([\w.]+)/,rmsie=/(msie) ([\w.]+)/,rmozilla=/(mozilla)(?:.*? rv:([\w.]+))?/,rdashAlpha=/-([a-z]|[0-9])/ig,rmsPrefix=/^-ms-/,fcamelCase=function(all,letter){return(letter+"").toUpperCase();},userAgent=navigator.userAgent,browserMatch,readyList,DOMContentLoaded,toString=Object.prototype.toString,hasOwn=Object.prototype.hasOwnProperty,push=Array.prototype.push,slice=Array.prototype.slice,trim=String.prototype.trim,indexOf=Array.prototype.indexOf,class2type={};jQuery.fn=jQuery.prototype={constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem,ret,doc;if(!selector){return this;}
if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this;}
if(selector==="body"&&!context&&document.body){this.context=document;this[0]=document.body;this.selector=selector;this.length=1;return this;}
if(typeof selector==="string"){if(selector.charAt(0)==="<"&&selector.charAt(selector.length-1)===">"&&selector.length>=3){match=[null,selector,null];}else{match=quickExpr.exec(selector);}
if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;doc=(context?context.ownerDocument||context:document);ret=rsingleTag.exec(selector);if(ret){if(jQuery.isPlainObject(context)){selector=[document.createElementNS('http://www.w3.org/2000/svg',ret[1])];jQuery.fn.attr.call(selector,context,true);}else{selector=[doc.createElementNS('http://www.w3.org/2000/svg',ret[1])];}}else{ret=jQuery.buildFragment([match[1]],[doc]);selector=(ret.cacheable?jQuery.clone(ret.fragment):ret.fragment).childNodes;}
return jQuery.merge(this,selector);}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){if(elem.id!==match[2]){return rootjQuery.find(selector);}
this.length=1;this[0]=elem;}
this.context=document;this.selector=selector;return this;}}else if(!context||context.jquery){return(context||rootjQuery).find(selector);}else{return this.constructor(context).find(selector);}}else if(jQuery.isFunction(selector)){return rootjQuery.ready(selector);}
if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context;}
return jQuery.makeArray(selector,this);},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length;},toArray:function(){return slice.call(this,0);},get:function(num){return num==null?this.toArray():(num<0?this[this.length+num]:this[num]);},pushStack:function(elems,name,selector){var ret=this.constructor();if(jQuery.isArray(elems)){push.apply(ret,elems);}else{jQuery.merge(ret,elems);}
ret.prevObject=this;ret.context=this.context;if(name==="find"){ret.selector=this.selector+(this.selector?" ":"")+selector;}else if(name){ret.selector=this.selector+"."+name+"("+selector+")";}
return ret;},each:function(callback,args){return jQuery.each(this,callback,args);},ready:function(fn){jQuery.bindReady();readyList.add(fn);return this;},eq:function(i){i=+i;return i===-1?this.slice(i):this.slice(i,i+1);},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},slice:function(){return this.pushStack(slice.apply(this,arguments),"slice",slice.call(arguments).join(","));},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},end:function(){return this.prevObject||this.constructor(null);},push:push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2;}
if(typeof target!=="object"&&!jQuery.isFunction(target)){target={};}
if(length===i){target=this;--i;}
for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}
if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[];}else{clone=src&&jQuery.isPlainObject(src)?src:{};}
target[name]=jQuery.extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}
return target;};jQuery.extend({noConflict:function(deep){if(window.$===jQuery){window.$=_$;}
if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery;}
return jQuery;},isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++;}else{jQuery.ready(true);}},ready:function(wait){if((wait===true&&!--jQuery.readyWait)||(wait!==true&&!jQuery.isReady)){jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return;}
readyList.fireWith(document,[jQuery]);if(jQuery.fn.trigger){jQuery(document).trigger("ready").off("ready");}}},bindReady:function(){if(readyList){return;}
readyList=jQuery.Callbacks("once memory");if(document.readyState==="complete"){return setTimeout(jQuery.ready,1);}
if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",jQuery.ready,false);}else if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",jQuery.ready);var toplevel=false;try{toplevel=window.frameElement==null;}catch(e){}
if(document.documentElement.doScroll&&toplevel){doScrollCheck();}}},isFunction:function(obj){return jQuery.type(obj)==="function";},isArray:Array.isArray||function(obj){return jQuery.type(obj)==="array";},isWindow:function(obj){return obj!=null&&obj==obj.window;},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj);},type:function(obj){return obj==null?String(obj):class2type[toString.call(obj)]||"object";},isPlainObject:function(obj){if(!obj||jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false;}
try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false;}}catch(e){return false;}
var key;for(key in obj){}
return key===undefined||hasOwn.call(obj,key);},isEmptyObject:function(obj){for(var name in obj){return false;}
return true;},error:function(msg){throw new Error(msg);},parseJSON:function(data){if(typeof data!=="string"||!data){return null;}
data=jQuery.trim(data);if(window.JSON&&window.JSON.parse){return window.JSON.parse(data);}
if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){return(new Function("return "+data))();}
jQuery.error("Invalid JSON: "+data);},parseXML:function(data){if(typeof data!=="string"||!data){return null;}
var xml,tmp;try{if(window.DOMParser){tmp=new DOMParser();xml=tmp.parseFromString(data,"text/xml");}else{xml=new ActiveXObject("Microsoft.XMLDOM");xml.async="false";xml.loadXML(data);}}catch(e){xml=undefined;}
if(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data);}
return xml;},noop:function(){},globalEval:function(data){if(data&&rnotwhite.test(data)){(window.execScript||function(data){window["eval"].call(window,data);})(data);}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase);},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase();},each:function(object,callback,args){var name,i=0,length=object.length,isObj=length===undefined||jQuery.isFunction(object);if(args){if(isObj){for(name in object){if(callback.apply(object[name],args)===false){break;}}}else{for(;i<length;){if(callback.apply(object[i++],args)===false){break;}}}}else{if(isObj){for(name in object){if(callback.call(object[name],name,object[name])===false){break;}}}else{for(;i<length;){if(callback.call(object[i],i,object[i++])===false){break;}}}}
return object;},trim:trim?function(text){return text==null?"":trim.call(text);}:function(text){return text==null?"":text.toString().replace(trimLeft,"").replace(trimRight,"");},makeArray:function(array,results){var ret=results||[];if(array!=null){var type=jQuery.type(array);if(array.length==null||type==="string"||type==="function"||type==="regexp"||jQuery.isWindow(array)){push.call(ret,array);}else{jQuery.merge(ret,array);}}
return ret;},inArray:function(elem,array,i){var len;if(array){if(indexOf){return indexOf.call(array,elem,i);}
len=array.length;i=i?i<0?Math.max(0,len+i):i:0;for(;i<len;i++){if(i in array&&array[i]===elem){return i;}}}
return-1;},merge:function(first,second){var i=first.length,j=0;if(typeof second.length==="number"){for(var l=second.length;j<l;j++){first[i++]=second[j];}}else{while(second[j]!==undefined){first[i++]=second[j++];}}
first.length=i;return first;},grep:function(elems,callback,inv){var ret=[],retVal;inv=!!inv;for(var i=0,length=elems.length;i<length;i++){retVal=!!callback(elems[i],i);if(inv!==retVal){ret.push(elems[i]);}}
return ret;},map:function(elems,callback,arg){var value,key,ret=[],i=0,length=elems.length,isArray=elems instanceof jQuery||length!==undefined&&typeof length==="number"&&((length>0&&elems[0]&&elems[length-1])||length===0||jQuery.isArray(elems));if(isArray){for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret[ret.length]=value;}}}else{for(key in elems){value=callback(elems[key],key,arg);if(value!=null){ret[ret.length]=value;}}}
return ret.concat.apply([],ret);},guid:1,proxy:function(fn,context){if(typeof context==="string"){var tmp=fn[context];context=fn;fn=tmp;}
if(!jQuery.isFunction(fn)){return undefined;}
var args=slice.call(arguments,2),proxy=function(){return fn.apply(context,args.concat(slice.call(arguments)));};proxy.guid=fn.guid=fn.guid||proxy.guid||jQuery.guid++;return proxy;},access:function(elems,fn,key,value,chainable,emptyGet,pass){var exec,bulk=key==null,i=0,length=elems.length;if(key&&typeof key==="object"){for(i in key){jQuery.access(elems,fn,i,key[i],1,emptyGet,value);}
chainable=1;}else if(value!==undefined){exec=pass===undefined&&jQuery.isFunction(value);if(bulk){if(exec){exec=fn;fn=function(elem,key,value){return exec.call(jQuery(elem),value);};}else{fn.call(elems,value);fn=null;}}
if(fn){for(;i<length;i++){fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass);}}
chainable=1;}
return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet;},now:function(){return(new Date()).getTime();},uaMatch:function(ua){ua=ua.toLowerCase();var match=rwebkit.exec(ua)||ropera.exec(ua)||rmsie.exec(ua)||ua.indexOf("compatible")<0&&rmozilla.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"};},sub:function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context);}
jQuery.extend(true,jQuerySub,this);jQuerySub.superclass=this;jQuerySub.fn=jQuerySub.prototype=this();jQuerySub.fn.constructor=jQuerySub;jQuerySub.sub=this.sub;jQuerySub.fn.init=function init(selector,context){if(context&&context instanceof jQuery&&!(context instanceof jQuerySub)){context=jQuerySub(context);}
return jQuery.fn.init.call(this,selector,context,rootjQuerySub);};jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return jQuerySub;},browser:{}});jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase();});browserMatch=jQuery.uaMatch(userAgent);if(browserMatch.browser){jQuery.browser[browserMatch.browser]=true;jQuery.browser.version=browserMatch.version;}
if(jQuery.browser.webkit){jQuery.browser.safari=true;}
if(rnotwhite.test("\xA0")){trimLeft=/^[\s\xA0]+/;trimRight=/[\s\xA0]+$/;}
rootjQuery=jQuery(document);if(document.addEventListener){DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);jQuery.ready();};}else if(document.attachEvent){DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);jQuery.ready();}};}
function doScrollCheck(){if(jQuery.isReady){return;}
try{document.documentElement.doScroll("left");}catch(e){setTimeout(doScrollCheck,1);return;}
jQuery.ready();}
return jQuery;})();var flagsCache={};function createFlags(flags){var object=flagsCache[flags]={},i,length;flags=flags.split(/\s+/);for(i=0,length=flags.length;i<length;i++){object[flags[i]]=true;}
return object;}
jQuery.Callbacks=function(flags){flags=flags?(flagsCache[flags]||createFlags(flags)):{};var
list=[],stack=[],memory,fired,firing,firingStart,firingLength,firingIndex,add=function(args){var i,length,elem,type,actual;for(i=0,length=args.length;i<length;i++){elem=args[i];type=jQuery.type(elem);if(type==="array"){add(elem);}else if(type==="function"){if(!flags.unique||!self.has(elem)){list.push(elem);}}}},fire=function(context,args){args=args||[];memory=!flags.memory||[context,args];fired=true;firing=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;for(;list&&firingIndex<firingLength;firingIndex++){if(list[firingIndex].apply(context,args)===false&&flags.stopOnFalse){memory=true;break;}}
firing=false;if(list){if(!flags.once){if(stack&&stack.length){memory=stack.shift();self.fireWith(memory[0],memory[1]);}}else if(memory===true){self.disable();}else{list=[];}}},self={add:function(){if(list){var length=list.length;add(arguments);if(firing){firingLength=list.length;}else if(memory&&memory!==true){firingStart=length;fire(memory[0],memory[1]);}}
return this;},remove:function(){if(list){var args=arguments,argIndex=0,argLength=args.length;for(;argIndex<argLength;argIndex++){for(var i=0;i<list.length;i++){if(args[argIndex]===list[i]){if(firing){if(i<=firingLength){firingLength--;if(i<=firingIndex){firingIndex--;}}}
list.splice(i--,1);if(flags.unique){break;}}}}}
return this;},has:function(fn){if(list){var i=0,length=list.length;for(;i<length;i++){if(fn===list[i]){return true;}}}
return false;},empty:function(){list=[];return this;},disable:function(){list=stack=memory=undefined;return this;},disabled:function(){return!list;},lock:function(){stack=undefined;if(!memory||memory===true){self.disable();}
return this;},locked:function(){return!stack;},fireWith:function(context,args){if(stack){if(firing){if(!flags.once){stack.push([context,args]);}}else if(!(flags.once&&memory)){fire(context,args);}}
return this;},fire:function(){self.fireWith(this,arguments);return this;},fired:function(){return!!fired;}};return self;};var
sliceDeferred=[].slice;jQuery.extend({Deferred:function(func){var doneList=jQuery.Callbacks("once memory"),failList=jQuery.Callbacks("once memory"),progressList=jQuery.Callbacks("memory"),state="pending",lists={resolve:doneList,reject:failList,notify:progressList},promise={done:doneList.add,fail:failList.add,progress:progressList.add,state:function(){return state;},isResolved:doneList.fired,isRejected:failList.fired,then:function(doneCallbacks,failCallbacks,progressCallbacks){deferred.done(doneCallbacks).fail(failCallbacks).progress(progressCallbacks);return this;},always:function(){deferred.done.apply(deferred,arguments).fail.apply(deferred,arguments);return this;},pipe:function(fnDone,fnFail,fnProgress){return jQuery.Deferred(function(newDefer){jQuery.each({done:[fnDone,"resolve"],fail:[fnFail,"reject"],progress:[fnProgress,"notify"]},function(handler,data){var fn=data[0],action=data[1],returned;if(jQuery.isFunction(fn)){deferred[handler](function(){returned=fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().then(newDefer.resolve,newDefer.reject,newDefer.notify);}else{newDefer[action+"With"](this===deferred?newDefer:this,[returned]);}});}else{deferred[handler](newDefer[action]);}});}).promise();},promise:function(obj){if(obj==null){obj=promise;}else{for(var key in promise){obj[key]=promise[key];}}
return obj;}},deferred=promise.promise({}),key;for(key in lists){deferred[key]=lists[key].fire;deferred[key+"With"]=lists[key].fireWith;}
deferred.done(function(){state="resolved";},failList.disable,progressList.lock).fail(function(){state="rejected";},doneList.disable,progressList.lock);if(func){func.call(deferred,deferred);}
return deferred;},when:function(firstParam){var args=sliceDeferred.call(arguments,0),i=0,length=args.length,pValues=new Array(length),count=length,pCount=length,deferred=length<=1&&firstParam&&jQuery.isFunction(firstParam.promise)?firstParam:jQuery.Deferred(),promise=deferred.promise();function resolveFunc(i){return function(value){args[i]=arguments.length>1?sliceDeferred.call(arguments,0):value;if(!(--count)){deferred.resolveWith(deferred,args);}};}
function progressFunc(i){return function(value){pValues[i]=arguments.length>1?sliceDeferred.call(arguments,0):value;deferred.notifyWith(promise,pValues);};}
if(length>1){for(;i<length;i++){if(args[i]&&args[i].promise&&jQuery.isFunction(args[i].promise)){args[i].promise().then(resolveFunc(i),deferred.reject,progressFunc(i));}else{--count;}}
if(!count){deferred.resolveWith(deferred,args);}}else if(deferred!==firstParam){deferred.resolveWith(deferred,length?[firstParam]:[]);}
return promise;}});jQuery.support={leadingWhitespace:true,tbody:false,htmlSerialize:true,style:true,hrefNormalized:true,opacity:true,cssFloat:true,checkOn:true,optSelected:true,getSetAttribute:true,enctype:true,html5Clone:true,submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,pixelMargin:true};var rbrace=/^(?:\{.*\}|\[.*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},uuid:0,expando:"jQuery"+(jQuery.fn.jquery+Math.random()).replace(/\D/g,""),noData:{"embed":true,"object":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000","applet":true},hasData:function(elem){elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando];return!!elem&&!isEmptyDataObject(elem);},data:function(elem,name,data,pvt){if(!jQuery.acceptData(elem)){return;}
var privateCache,thisCache,ret,internalKey=jQuery.expando,getByName=typeof name==="string",isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey,isEvents=name==="events";if((!id||!cache[id]||(!isEvents&&!pvt&&!cache[id].data))&&getByName&&data===undefined){return;}
if(!id){if(isNode){elem[internalKey]=id=++jQuery.uuid;}else{id=internalKey;}}
if(!cache[id]){cache[id]={};if(!isNode){cache[id].toJSON=jQuery.noop;}}
if(typeof name==="object"||typeof name==="function"){if(pvt){cache[id]=jQuery.extend(cache[id],name);}else{cache[id].data=jQuery.extend(cache[id].data,name);}}
privateCache=thisCache=cache[id];if(!pvt){if(!thisCache.data){thisCache.data={};}
thisCache=thisCache.data;}
if(data!==undefined){thisCache[jQuery.camelCase(name)]=data;}
if(isEvents&&!thisCache[name]){return privateCache.events;}
if(getByName){ret=thisCache[name];if(ret==null){ret=thisCache[jQuery.camelCase(name)];}}else{ret=thisCache;}
return ret;},removeData:function(elem,name,pvt){if(!jQuery.acceptData(elem)){return;}
var thisCache,i,l,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:internalKey;if(!cache[id]){return;}
if(name){thisCache=pvt?cache[id]:cache[id].data;if(thisCache){if(!jQuery.isArray(name)){if(name in thisCache){name=[name];}else{name=jQuery.camelCase(name);if(name in thisCache){name=[name];}else{name=name.split(" ");}}}
for(i=0,l=name.length;i<l;i++){delete thisCache[name[i]];}
if(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache)){return;}}}
if(!pvt){delete cache[id].data;if(!isEmptyDataObject(cache[id])){return;}}
if(jQuery.support.deleteExpando||!cache.setInterval){delete cache[id];}else{cache[id]=null;}
if(isNode){if(jQuery.support.deleteExpando){delete elem[internalKey];}else if(elem.removeAttribute){elem.removeAttribute(internalKey);}else{elem[internalKey]=null;}}},_data:function(elem,name,data){return jQuery.data(elem,name,data,true);},acceptData:function(elem){if(elem.nodeName){var match=jQuery.noData[elem.nodeName.toLowerCase()];if(match){return!(match===true||elem.getAttribute("classid")!==match);}}
return true;}});jQuery.fn.extend({data:function(key,value){var parts,part,attr,name,l,elem=this[0],i=0,data=null;if(key===undefined){if(this.length){data=jQuery.data(elem);if(elem.nodeType===1&&!jQuery._data(elem,"parsedAttrs")){attr=elem.attributes;for(l=attr.length;i<l;i++){name=attr[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.substring(5));dataAttr(elem,name,data[name]);}}
jQuery._data(elem,"parsedAttrs",true);}}
return data;}
if(typeof key==="object"){return this.each(function(){jQuery.data(this,key);});}
parts=key.split(".",2);parts[1]=parts[1]?"."+parts[1]:"";part=parts[1]+"!";return jQuery.access(this,function(value){if(value===undefined){data=this.triggerHandler("getData"+part,[parts[0]]);if(data===undefined&&elem){data=jQuery.data(elem,key);data=dataAttr(elem,key,data);}
return data===undefined&&parts[1]?this.data(parts[0]):data;}
parts[1]=value;this.each(function(){var self=jQuery(this);self.triggerHandler("setData"+part,parts);jQuery.data(this,key,value);self.triggerHandler("changeData"+part,parts);});},null,value,arguments.length>1,null,false);},removeData:function(key){return this.each(function(){jQuery.removeData(this,key);});}});function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:jQuery.isNumeric(data)?+data:rbrace.test(data)?jQuery.parseJSON(data):data;}catch(e){}
jQuery.data(elem,key,data);}else{data=undefined;}}
return data;}
function isEmptyDataObject(obj){for(var name in obj){if(name==="data"&&jQuery.isEmptyObject(obj[name])){continue;}
if(name!=="toJSON"){return false;}}
return true;}
function handleQueueMarkDefer(elem,type,src){var deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark",defer=jQuery._data(elem,deferDataKey);if(defer&&(src==="queue"||!jQuery._data(elem,queueDataKey))&&(src==="mark"||!jQuery._data(elem,markDataKey))){setTimeout(function(){if(!jQuery._data(elem,queueDataKey)&&!jQuery._data(elem,markDataKey)){jQuery.removeData(elem,deferDataKey,true);defer.fire();}},0);}}
jQuery.extend({_mark:function(elem,type){if(elem){type=(type||"fx")+"mark";jQuery._data(elem,type,(jQuery._data(elem,type)||0)+1);}},_unmark:function(force,elem,type){if(force!==true){type=elem;elem=force;force=false;}
if(elem){type=type||"fx";var key=type+"mark",count=force?0:((jQuery._data(elem,key)||1)-1);if(count){jQuery._data(elem,key,count);}else{jQuery.removeData(elem,key,true);handleQueueMarkDefer(elem,type,"mark");}}},queue:function(elem,type,data){var q;if(elem){type=(type||"fx")+"queue";q=jQuery._data(elem,type);if(data){if(!q||jQuery.isArray(data)){q=jQuery._data(elem,type,jQuery.makeArray(data));}else{q.push(data);}}
return q||[];}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),fn=queue.shift(),hooks={};if(fn==="inprogress"){fn=queue.shift();}
if(fn){if(type==="fx"){queue.unshift("inprogress");}
jQuery._data(elem,type+".run",hooks);fn.call(elem,function(){jQuery.dequeue(elem,type);},hooks);}
if(!queue.length){jQuery.removeData(elem,type+"queue "+type+".run",true);handleQueueMarkDefer(elem,type,"queue");}}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--;}
if(arguments.length<setter){return jQuery.queue(this[0],type);}
return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type);}});},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type);});},delay:function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout);};});},clearQueue:function(type){return this.queue(type||"fx",[]);},promise:function(type,object){if(typeof type!=="string"){object=type;type=undefined;}
type=type||"fx";var defer=jQuery.Deferred(),elements=this,i=elements.length,count=1,deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark",tmp;function resolve(){if(!(--count)){defer.resolveWith(elements,[elements]);}}
while(i--){if((tmp=jQuery.data(elements[i],deferDataKey,undefined,true)||(jQuery.data(elements[i],queueDataKey,undefined,true)||jQuery.data(elements[i],markDataKey,undefined,true))&&jQuery.data(elements[i],deferDataKey,jQuery.Callbacks("once memory"),true))){count++;tmp.add(resolve);}}
resolve();return defer.promise(object);}});var rclass=/[\n\t\r]/g,rspace=/\s+/,rreturn=/\r/g,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,rclickable=/^a(?:rea)?$/i,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute,nodeHook,boolHook,fixSpecified;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1);},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name);});},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1);},removeProp:function(name){name=jQuery.propFix[name]||name;return this.each(function(){try{this[name]=undefined;delete this[name];}catch(e){}});},addClass:function(value){var classNames,i,l,elem,setClass,c,cl;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className.baseVal));});}
if(value&&typeof value==="string"){classNames=value.split(rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1){if(!elem.className.baseVal&&classNames.length===1){elem.className.baseVal=value;}else{setClass=" "+elem.className.baseVal+" ";for(c=0,cl=classNames.length;c<cl;c++){if(!~setClass.indexOf(" "+classNames[c]+" ")){setClass+=classNames[c]+" ";}}
elem.className.baseVal=jQuery.trim(setClass);}}}}
return this;},removeClass:function(value){var classNames,i,l,elem,className,c,cl;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className.baseVal));});}
if((value&&typeof value==="string")||value===undefined){classNames=(value||"").split(rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1&&elem.className.baseVal){if(value){className=(" "+elem.className.baseVal+" ").replace(rclass," ");for(c=0,cl=classNames.length;c<cl;c++){className=className.replace(" "+classNames[c]+" "," ");}
elem.className.baseVal=jQuery.trim(className);}else{elem.className.baseVal="";}}}}
return this;},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal==="boolean";if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className.baseVal,stateVal),stateVal);});}
return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(rspace);while((className=classNames[i++])){state=isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className);}}else if(type==="undefined"||type==="boolean"){if(this.className.baseVal){jQuery._data(this,"__className__",this.className.baseVal);}
this.className.baseVal=this.className.baseVal||value===false?"":jQuery._data(this,"__className__")||"";}});},hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++){if(this[i].nodeType===1&&(" "+this[i].className.baseVal+" ").replace(rclass," ").indexOf(className)>-1){return true;}}
return false;},val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret;}
ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret;}
return;}
isFunction=jQuery.isFunction(value);return this.each(function(i){var self=jQuery(this),val;if(this.nodeType!==1){return;}
if(isFunction){val=value.call(this,i,self.val());}else{val=value;}
if(val==null){val="";}else if(typeof val==="number"){val+="";}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+"";});}
hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val;}});}});jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text;}},select:{get:function(elem){var value,i,max,option,index=elem.selectedIndex,values=[],options=elem.options,one=elem.type==="select-one";if(index<0){return null;}
i=one?index:0;max=one?index+1:options.length;for(;i<max;i++){option=options[i];if(option.selected&&(jQuery.support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value;}
values.push(value);}}
if(one&&!values.length&&options.length){return jQuery(options[index]).val();}
return values;},set:function(elem,value){var values=jQuery.makeArray(value);jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0;});if(!values.length){elem.selectedIndex=-1;}
return values;}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(elem,name,value,pass){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return;}
if(pass&&name in jQuery.attrFn){return jQuery(elem)[name](value);}
if(typeof elem.getAttribute==="undefined"){return jQuery.prop(elem,name,value);}
notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook);}
if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return;}else if(hooks&&"set"in hooks&&notxml&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}else{if(name=='href'){elem.setAttributeNS('http://www.w3.org/1999/xlink',name,""+value);}else{elem.setAttribute(name,""+value);}
return value;}}else if(hooks&&"get"in hooks&&notxml&&(ret=hooks.get(elem,name))!==null){return ret;}else{ret=elem.getAttribute(name);return ret===null?undefined:ret;}},removeAttr:function(elem,value){var propName,attrNames,name,l,isBool,i=0;if(value&&elem.nodeType===1){attrNames=value.toLowerCase().split(rspace);l=attrNames.length;for(;i<l;i++){name=attrNames[i];if(name){propName=jQuery.propFix[name]||name;isBool=rboolean.test(name);if(!isBool){jQuery.attr(elem,name,"");}
elem.removeAttribute(getSetAttribute?name:propName);if(isBool&&propName in elem){elem[propName]=false;}}}}},attrHooks:{type:{set:function(elem,value){if(rtype.test(elem.nodeName)&&elem.parentNode){jQuery.error("type property can't be changed");}else if(!jQuery.support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val;}
return value;}}},value:{get:function(elem,name){if(nodeHook&&jQuery.nodeName(elem,"button")){return nodeHook.get(elem,name);}
return name in elem?elem.value:null;},set:function(elem,value,name){if(nodeHook&&jQuery.nodeName(elem,"button")){return nodeHook.set(elem,value,name);}
elem.value=value;}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return;}
notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name];}
if(value!==undefined){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}else{return(elem[name]=value);}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret;}else{return elem[name];}}},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined;}}}});jQuery.attrHooks.tabindex=jQuery.propHooks.tabIndex;boolHook={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===true||typeof property!=="boolean"&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==false?name.toLowerCase():undefined;},set:function(elem,value,name){var propName;if(value===false){jQuery.removeAttr(elem,name);}else{propName=jQuery.propFix[name]||name;if(propName in elem){elem[propName]=true;}
elem.setAttribute(name,name.toLowerCase());}
return name;}};if(!getSetAttribute){fixSpecified={name:true,id:true,coords:true};nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret;ret=elem.getAttributeNode(name);return ret&&(fixSpecified[name]?ret.nodeValue!=="":ret.specified)?ret.nodeValue:undefined;},set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret){ret=document.createAttribute(name);elem.setAttributeNode(ret);}
return(ret.nodeValue=value+"");}};jQuery.attrHooks.tabindex.set=nodeHook.set;jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){if(value===""){elem.setAttribute(name,"auto");return value;}}});});jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){if(value===""){value="false";}
nodeHook.set(elem,value,name);}};}
if(!jQuery.support.hrefNormalized){jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return ret===null?undefined:ret;}});});}
if(!jQuery.support.style){jQuery.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined;},set:function(elem,value){return(elem.style.cssText=""+value);}};}
if(!jQuery.support.optSelected){jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex;}}
return null;}});}
if(!jQuery.support.enctype){jQuery.propFix.enctype="encoding";}
if(!jQuery.support.checkOn){jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return elem.getAttribute("value")===null?"on":elem.value;}};});}
jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){if(jQuery.isArray(value)){return(elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0);}}});});var rformElems=/^(?:textarea|input|select)$/i,rtypenamespace=/^([^\.]*)?(?:\.(.+))?$/,rhoverHack=/(?:^|\s)hover(\.\S+)?\b/,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rquickIs=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,quickParse=function(selector){var quick=rquickIs.exec(selector);if(quick){quick[1]=(quick[1]||"").toLowerCase();quick[3]=quick[3]&&new RegExp("(?:^|\\s)"+quick[3]+"(?:\\s|$)");}
return quick;},quickIs=function(elem,m){var attrs=elem.attributes||{};return((!m[1]||elem.nodeName.toLowerCase()===m[1])&&(!m[2]||(attrs.id||{}).value===m[2])&&(!m[3]||m[3].test((attrs["class"]||{}).value)));},hoverHack=function(events){return jQuery.event.special.hover?events:events.replace(rhoverHack,"mouseenter$1 mouseleave$1");};jQuery.event={add:function(elem,types,handler,data,selector){var elemData,eventHandle,events,t,tns,type,namespaces,handleObj,handleObjIn,quick,handlers,special;if(elem.nodeType===3||elem.nodeType===8||!types||!handler||!(elemData=jQuery._data(elem))){return;}
if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector;}
if(!handler.guid){handler.guid=jQuery.guid++;}
events=elemData.events;if(!events){elemData.events=events={};}
eventHandle=elemData.handle;if(!eventHandle){elemData.handle=eventHandle=function(e){return typeof jQuery!=="undefined"&&(!e||jQuery.event.triggered!==e.type)?jQuery.event.dispatch.apply(eventHandle.elem,arguments):undefined;};eventHandle.elem=elem;}
types=jQuery.trim(hoverHack(types)).split(" ");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=tns[1];namespaces=(tns[2]||"").split(".").sort();special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:tns[1],data:data,handler:handler,guid:handler.guid,selector:selector,quick:selector&&quickParse(selector),namespace:namespaces.join(".")},handleObjIn);handlers=events[type];if(!handlers){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false);}else if(elem.attachEvent){elem.attachEvent("on"+type,eventHandle);}}}
if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid;}}
if(selector){handlers.splice(handlers.delegateCount++,0,handleObj);}else{handlers.push(handleObj);}
jQuery.event.global[type]=true;}
elem=null;},global:{},remove:function(elem,types,handler,selector,mappedTypes){var elemData=jQuery.hasData(elem)&&jQuery._data(elem),t,tns,type,origType,namespaces,origCount,j,events,special,handle,eventType,handleObj;if(!elemData||!(events=elemData.events)){return;}
types=jQuery.trim(hoverHack(types||"")).split(" ");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=origType=tns[1];namespaces=tns[2];if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true);}
continue;}
special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;eventType=events[type]||[];origCount=eventType.length;namespaces=namespaces?new RegExp("(^|\\.)"+namespaces.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(j=0;j<eventType.length;j++){handleObj=eventType[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!namespaces||namespaces.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){eventType.splice(j--,1);if(handleObj.selector){eventType.delegateCount--;}
if(special.remove){special.remove.call(elem,handleObj);}}}
if(eventType.length===0&&origCount!==eventType.length){if(!special.teardown||special.teardown.call(elem,namespaces)===false){jQuery.removeEvent(elem,type,elemData.handle);}
delete events[type];}}
if(jQuery.isEmptyObject(events)){handle=elemData.handle;if(handle){handle.elem=null;}
jQuery.removeData(elem,["events","handle"],true);}},customEvent:{"getData":true,"setData":true,"changeData":true},trigger:function(event,data,elem,onlyHandlers){if(elem&&(elem.nodeType===3||elem.nodeType===8)){return;}
var type=event.type||event,namespaces=[],cache,exclusive,i,cur,old,ontype,special,handle,eventPath,bubbleType;if(rfocusMorph.test(type+jQuery.event.triggered)){return;}
if(type.indexOf("!")>=0){type=type.slice(0,-1);exclusive=true;}
if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort();}
if((!elem||jQuery.event.customEvent[type])&&!jQuery.event.global[type]){return;}
event=typeof event==="object"?event[jQuery.expando]?event:new jQuery.Event(type,event):new jQuery.Event(type);event.type=type;event.isTrigger=true;event.exclusive=exclusive;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.)?")+"(\\.|$)"):null;ontype=type.indexOf(":")<0?"on"+type:"";if(!elem){cache=jQuery.cache;for(i in cache){if(cache[i].events&&cache[i].events[type]){jQuery.event.trigger(event,data,cache[i].handle.elem,true);}}
return;}
event.result=undefined;if(!event.target){event.target=elem;}
data=data!=null?jQuery.makeArray(data):[];data.unshift(event);special=jQuery.event.special[type]||{};if(special.trigger&&special.trigger.apply(elem,data)===false){return;}
eventPath=[[elem,special.bindType||type]];if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;cur=rfocusMorph.test(bubbleType+type)?elem:elem.parentNode;old=null;for(;cur;cur=cur.parentNode){eventPath.push([cur,bubbleType]);old=cur;}
if(old&&old===elem.ownerDocument){eventPath.push([old.defaultView||old.parentWindow||window,bubbleType]);}}
for(i=0;i<eventPath.length&&!event.isPropagationStopped();i++){cur=eventPath[i][0];event.type=eventPath[i][1];handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle");if(handle){handle.apply(cur,data);}
handle=ontype&&cur[ontype];if(handle&&jQuery.acceptData(cur)&&handle.apply(cur,data)===false){event.preventDefault();}}
event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(elem.ownerDocument,data)===false)&&!(type==="click"&&jQuery.nodeName(elem,"a"))&&jQuery.acceptData(elem)){if(ontype&&elem[type]&&((type!=="focus"&&type!=="blur")||event.target.offsetWidth!==0)&&!jQuery.isWindow(elem)){old=elem[ontype];if(old){elem[ontype]=null;}
jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(old){elem[ontype]=old;}}}}
return event.result;},dispatch:function(event){event=jQuery.event.fix(event||window.event);var handlers=((jQuery._data(this,"events")||{})[event.type]||[]),delegateCount=handlers.delegateCount,args=[].slice.call(arguments,0),run_all=!event.exclusive&&!event.namespace,special=jQuery.event.special[event.type]||{},handlerQueue=[],i,j,cur,jqcur,ret,selMatch,matched,matches,handleObj,sel,related;args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return;}
if(delegateCount&&!(event.button&&event.type==="click")){jqcur=jQuery(this);jqcur.context=this.ownerDocument||this;for(cur=event.target;cur!=this;cur=cur.parentNode||this){if(cur.disabled!==true){selMatch={};matches=[];jqcur[0]=cur;for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector;if(selMatch[sel]===undefined){selMatch[sel]=(handleObj.quick?quickIs(cur,handleObj.quick):jqcur.is(sel));}
if(selMatch[sel]){matches.push(handleObj);}}
if(matches.length){handlerQueue.push({elem:cur,matches:matches});}}}}
if(handlers.length>delegateCount){handlerQueue.push({elem:this,matches:handlers.slice(delegateCount)});}
for(i=0;i<handlerQueue.length&&!event.isPropagationStopped();i++){matched=handlerQueue[i];event.currentTarget=matched.elem;for(j=0;j<matched.matches.length&&!event.isImmediatePropagationStopped();j++){handleObj=matched.matches[j];if(run_all||(!event.namespace&&!handleObj.namespace)||event.namespace_re&&event.namespace_re.test(handleObj.namespace)){event.data=handleObj.data;event.handleObj=handleObj;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){event.result=ret;if(ret===false){event.preventDefault();event.stopPropagation();}}}}}
if(special.postDispatch){special.postDispatch.call(this,event);}
return event.result;},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode;}
return event;}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button,fromElement=original.fromElement;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);}
if(!event.relatedTarget&&fromElement){event.relatedTarget=fromElement===event.target?original.toElement:fromElement;}
if(!event.which&&button!==undefined){event.which=(button&1?1:(button&2?3:(button&4?2:0)));}
return event;}},fix:function(event){if(event[jQuery.expando]){return event;}
var i,prop,originalEvent=event,fixHook=jQuery.event.fixHooks[event.type]||{},copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=jQuery.Event(originalEvent);for(i=copy.length;i;){prop=copy[--i];event[prop]=originalEvent[prop];}
if(!event.target){event.target=originalEvent.srcElement||document;}
if(event.target.nodeType===3){event.target=event.target.parentNode;}
if(event.metaKey===undefined){event.metaKey=event.ctrlKey;}
return fixHook.filter?fixHook.filter(event,originalEvent):event;},special:{ready:{setup:jQuery.bindReady},load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(data,namespaces,eventHandle){if(jQuery.isWindow(this)){this.onbeforeunload=eventHandle;}},teardown:function(namespaces,eventHandle){if(this.onbeforeunload===eventHandle){this.onbeforeunload=null;}}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event(),event,{type:type,isSimulated:true,originalEvent:{}});if(bubble){jQuery.event.trigger(e,null,elem);}else{jQuery.event.dispatch.call(elem,e);}
if(e.isDefaultPrevented()){event.preventDefault();}}};jQuery.event.handle=jQuery.event.dispatch;jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false);}}:function(elem,type,handle){if(elem.detachEvent){elem.detachEvent("on"+type,handle);}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props);}
if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=(src.defaultPrevented||src.returnValue===false||src.getPreventDefault&&src.getPreventDefault())?returnTrue:returnFalse;}else{this.type=src;}
if(props){jQuery.extend(this,props);}
this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true;};function returnFalse(){return false;}
function returnTrue(){return true;}
jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e){return;}
if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e){return;}
if(e.stopPropagation){e.stopPropagation();}
e.cancelBubble=true;},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation();},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var target=this,related=event.relatedTarget,handleObj=event.handleObj,selector=handleObj.selector,ret;if(!related||(related!==target&&!jQuery.contains(target,related))){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix;}
return ret;}};});if(!jQuery.support.submitBubbles){jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form")){return false;}
jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;if(form&&!form._submit_attached){jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=true;});form._submit_attached=true;}});},postDispatch:function(event){if(event._submit_bubble){delete event._submit_bubble;if(this.parentNode&&!event.isTrigger){jQuery.event.simulate("submit",this.parentNode,event,true);}}},teardown:function(){if(jQuery.nodeName(this,"form")){return false;}
jQuery.event.remove(this,"._submit");}};}
if(!jQuery.support.changeBubbles){jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){jQuery.event.add(this,"propertychange._change",function(event){if(event.originalEvent.propertyName==="checked"){this._just_changed=true;}});jQuery.event.add(this,"click._change",function(event){if(this._just_changed&&!event.isTrigger){this._just_changed=false;jQuery.event.simulate("change",this,event,true);}});}
return false;}
jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;if(rformElems.test(elem.nodeName)&&!elem._change_attached){jQuery.event.add(elem,"change._change",function(event){if(this.parentNode&&!event.isSimulated&&!event.isTrigger){jQuery.event.simulate("change",this.parentNode,event,true);}});elem._change_attached=true;}});},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||(elem.type!=="radio"&&elem.type!=="checkbox")){return event.handleObj.handler.apply(this,arguments);}},teardown:function(){jQuery.event.remove(this,"._change");return rformElems.test(this.nodeName);}};}
if(!jQuery.support.focusinBubbles){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true);};jQuery.event.special[fix]={setup:function(){if(attaches++===0){document.addEventListener(orig,handler,true);}},teardown:function(){if(--attaches===0){document.removeEventListener(orig,handler,true);}}};});}
jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined;}
for(type in types){this.on(type,selector,data,types[type],one);}
return this;}
if(data==null&&fn==null){fn=selector;data=selector=undefined;}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined;}else{fn=data;data=selector;selector=undefined;}}
if(fn===false){fn=returnFalse;}else if(!fn){return this;}
if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments);};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++);}
return this.each(function(){jQuery.event.add(this,types,fn,data,selector);});},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1);},off:function(types,selector,fn){if(types&&types.preventDefault&&types.handleObj){var handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this;}
if(typeof types==="object"){for(var type in types){this.off(type,selector,types[type]);}
return this;}
if(selector===false||typeof selector==="function"){fn=selector;selector=undefined;}
if(fn===false){fn=returnFalse;}
return this.each(function(){jQuery.event.remove(this,types,fn,selector);});},bind:function(types,data,fn){return this.on(types,null,data,fn);},unbind:function(types,fn){return this.off(types,null,fn);},live:function(types,data,fn){jQuery(this.context).on(types,this.selector,data,fn);return this;},die:function(types,fn){jQuery(this.context).off(types,this.selector||"**",fn);return this;},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn);},undelegate:function(selector,types,fn){return arguments.length==1?this.off(selector,"**"):this.off(types,selector,fn);},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this);});},triggerHandler:function(type,data){if(this[0]){return jQuery.event.trigger(type,data,this[0],true);}},toggle:function(fn){var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+fn.guid)||0)%i;jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1);event.preventDefault();return args[lastToggle].apply(this,arguments)||false;};toggler.guid=guid;while(i<args.length){args[i++].guid=guid;}
return this.click(toggler);},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver);}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){if(fn==null){fn=data;data=null;}
return arguments.length>0?this.on(name,null,data,fn):this.trigger(name);};if(jQuery.attrFn){jQuery.attrFn[name]=true;}
if(rkeyEvent.test(name)){jQuery.event.fixHooks[name]=jQuery.event.keyHooks;}
if(rmouseEvent.test(name)){jQuery.event.fixHooks[name]=jQuery.event.mouseHooks;}});(function(){var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,expando="sizcache"+(Math.random()+'').replace('.',''),done=0,toString=Object.prototype.toString,hasDuplicate=false,baseHasDuplicate=true,rBackslash=/\\/g,rReturn=/\r\n/g,rNonWord=/\W/;[0,0].sort(function(){baseHasDuplicate=false;return 0;});var Sizzle=function(selector,context,results,seed){results=results||[];context=context||document;var origContext=context;if(context.nodeType!==1&&context.nodeType!==9){return[];}
if(!selector||typeof selector!=="string"){return results;}
var m,set,checkSet,extra,ret,cur,pop,i,prune=true,contextXML=Sizzle.isXML(context),parts=[],soFar=selector;do{chunker.exec("");m=chunker.exec(soFar);if(m){soFar=m[3];parts.push(m[1]);if(m[2]){extra=m[3];break;}}}while(m);if(parts.length>1&&origPOS.exec(selector)){if(parts.length===2&&Expr.relative[parts[0]]){set=posProcess(parts[0]+parts[1],context,seed);}else{set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);while(parts.length){selector=parts.shift();if(Expr.relative[selector]){selector+=parts.shift();}
set=posProcess(selector,set,seed);}}}else{if(!seed&&parts.length>1&&context.nodeType===9&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])){ret=Sizzle.find(parts.shift(),context,contextXML);context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0];}
if(context){ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),parts.length===1&&(parts[0]==="~"||parts[0]==="+")&&context.parentNode?context.parentNode:context,contextXML);set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set;if(parts.length>0){checkSet=makeArray(set);}else{prune=false;}
while(parts.length){cur=parts.pop();pop=cur;if(!Expr.relative[cur]){cur="";}else{pop=parts.pop();}
if(pop==null){pop=context;}
Expr.relative[cur](checkSet,pop,contextXML);}}else{checkSet=parts=[];}}
if(!checkSet){checkSet=set;}
if(!checkSet){Sizzle.error(cur||selector);}
if(toString.call(checkSet)==="[object Array]"){if(!prune){results.push.apply(results,checkSet);}else if(context&&context.nodeType===1){for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&(checkSet[i]===true||checkSet[i].nodeType===1&&Sizzle.contains(context,checkSet[i]))){results.push(set[i]);}}}else{for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&checkSet[i].nodeType===1){results.push(set[i]);}}}}else{makeArray(checkSet,results);}
if(extra){Sizzle(extra,origContext,results,seed);Sizzle.uniqueSort(results);}
return results;};Sizzle.uniqueSort=function(results){if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(var i=1;i<results.length;i++){if(results[i]===results[i-1]){results.splice(i--,1);}}}}
return results;};Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set);};Sizzle.matchesSelector=function(node,expr){return Sizzle(expr,null,null,[node]).length>0;};Sizzle.find=function(expr,context,isXML){var set,i,len,match,type,left;if(!expr){return[];}
for(i=0,len=Expr.order.length;i<len;i++){type=Expr.order[i];if((match=Expr.leftMatch[type].exec(expr))){left=match[1];match.splice(1,1);if(left.substr(left.length-1)!=="\\"){match[1]=(match[1]||"").replace(rBackslash,"");set=Expr.find[type](match,context,isXML);if(set!=null){expr=expr.replace(Expr.match[type],"");break;}}}}
if(!set){set=typeof context.getElementsByTagName!=="undefined"?context.getElementsByTagName("*"):[];}
return{set:set,expr:expr};};Sizzle.filter=function(expr,set,inplace,not){var match,anyFound,type,found,item,filter,left,i,pass,old=expr,result=[],curLoop=set,isXMLFilter=set&&set[0]&&Sizzle.isXML(set[0]);while(expr&&set.length){for(type in Expr.filter){if((match=Expr.leftMatch[type].exec(expr))!=null&&match[2]){filter=Expr.filter[type];left=match[1];anyFound=false;match.splice(1,1);if(left.substr(left.length-1)==="\\"){continue;}
if(curLoop===result){result=[];}
if(Expr.preFilter[type]){match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter);if(!match){anyFound=found=true;}else if(match===true){continue;}}
if(match){for(i=0;(item=curLoop[i])!=null;i++){if(item){found=filter(item,match,i,curLoop);pass=not^found;if(inplace&&found!=null){if(pass){anyFound=true;}else{curLoop[i]=false;}}else if(pass){result.push(item);anyFound=true;}}}}
if(found!==undefined){if(!inplace){curLoop=result;}
expr=expr.replace(Expr.match[type],"");if(!anyFound){return[];}
break;}}}
if(expr===old){if(anyFound==null){Sizzle.error(expr);}else{break;}}
old=expr;}
return curLoop;};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};var getText=Sizzle.getText=function(elem){var i,node,nodeType=elem.nodeType,ret="";if(nodeType){if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==='string'){return elem.textContent;}else if(typeof elem.innerText==='string'){return elem.innerText.replace(rReturn,'');}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem);}}}else if(nodeType===3||nodeType===4){return elem.nodeValue;}}else{for(i=0;(node=elem[i]);i++){if(node.nodeType!==8){ret+=getText(node);}}}
return ret;};var Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href");},type:function(elem){return elem.getAttribute("type");}},relative:{"+":function(checkSet,part){var isPartStr=typeof part==="string",isTag=isPartStr&&!rNonWord.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag){part=part.toLowerCase();}
for(var i=0,l=checkSet.length,elem;i<l;i++){if((elem=checkSet[i])){while((elem=elem.previousSibling)&&elem.nodeType!==1){}
checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||false:elem===part;}}
if(isPartStrNotTag){Sizzle.filter(part,checkSet,true);}},">":function(checkSet,part){var elem,isPartStr=typeof part==="string",i=0,l=checkSet.length;if(isPartStr&&!rNonWord.test(part)){part=part.toLowerCase();for(;i<l;i++){elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:false;}}}else{for(;i<l;i++){elem=checkSet[i];if(elem){checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part;}}
if(isPartStr){Sizzle.filter(part,checkSet,true);}}},"":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!rNonWord.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck;}
checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML);},"~":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!rNonWord.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck;}
checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML);}},find:{ID:function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m&&m.parentNode?[m]:[];}},NAME:function(match,context){if(typeof context.getElementsByName!=="undefined"){var ret=[],results=context.getElementsByName(match[1]);for(var i=0,l=results.length;i<l;i++){if(results[i].getAttribute("name")===match[1]){ret.push(results[i]);}}
return ret.length===0?null:ret;}},TAG:function(match,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(match[1]);}}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){match=" "+match[1].replace(rBackslash,"")+" ";if(isXML){return match;}
for(var i=0,elem;(elem=curLoop[i])!=null;i++){if(elem){if(not^(elem.className&&elem.className.baseVal&&(" "+elem.className.baseVal+" ").replace(/[\t\n\r]/g," ").indexOf(match)>=0)){if(!inplace){result.push(elem);}}else if(inplace){curLoop[i]=false;}}}
return false;},ID:function(match){return match[1].replace(rBackslash,"");},TAG:function(match,curLoop){return match[1].replace(rBackslash,"").toLowerCase();},CHILD:function(match){if(match[1]==="nth"){if(!match[2]){Sizzle.error(match[0]);}
match[2]=match[2].replace(/^\+|\s*/g,'');var test=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(match[2]==="even"&&"2n"||match[2]==="odd"&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=(test[1]+(test[2]||1))-0;match[3]=test[3]-0;}
else if(match[2]){Sizzle.error(match[0]);}
match[0]=done++;return match;},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1]=match[1].replace(rBackslash,"");if(!isXML&&Expr.attrMap[name]){match[1]=Expr.attrMap[name];}
match[4]=(match[4]||match[5]||"").replace(rBackslash,"");if(match[2]==="~="){match[4]=" "+match[4]+" ";}
return match;},PSEUDO:function(match,curLoop,inplace,result,not){if(match[1]==="not"){if((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3])){match[3]=Sizzle(match[3],null,null,curLoop);}else{var ret=Sizzle.filter(match[3],curLoop,inplace,true^not);if(!inplace){result.push.apply(result,ret);}
return false;}}else if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0])){return true;}
return match;},POS:function(match){match.unshift(true);return match;}},filters:{enabled:function(elem){return elem.disabled===false&&elem.type!=="hidden";},disabled:function(elem){return elem.disabled===true;},checked:function(elem){return elem.checked===true;},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex;}
return elem.selected===true;},parent:function(elem){return!!elem.firstChild;},empty:function(elem){return!elem.firstChild;},has:function(elem,i,match){return!!Sizzle(match[3],elem).length;},header:function(elem){return(/h\d/i).test(elem.nodeName);},text:function(elem){var attr=elem.getAttribute("type"),type=elem.type;return elem.nodeName.toLowerCase()==="input"&&"text"===type&&(attr===type||attr===null);},radio:function(elem){return elem.nodeName.toLowerCase()==="input"&&"radio"===elem.type;},checkbox:function(elem){return elem.nodeName.toLowerCase()==="input"&&"checkbox"===elem.type;},file:function(elem){return elem.nodeName.toLowerCase()==="input"&&"file"===elem.type;},password:function(elem){return elem.nodeName.toLowerCase()==="input"&&"password"===elem.type;},submit:function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&"submit"===elem.type;},image:function(elem){return elem.nodeName.toLowerCase()==="input"&&"image"===elem.type;},reset:function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&"reset"===elem.type;},button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&"button"===elem.type||name==="button";},input:function(elem){return(/input|select|textarea|button/i).test(elem.nodeName);},focus:function(elem){return elem===elem.ownerDocument.activeElement;}},setFilters:{first:function(elem,i){return i===0;},last:function(elem,i,match,array){return i===array.length-1;},even:function(elem,i){return i%2===0;},odd:function(elem,i){return i%2===1;},lt:function(elem,i,match){return i<match[3]-0;},gt:function(elem,i,match){return i>match[3]-0;},nth:function(elem,i,match){return match[3]-0===i;},eq:function(elem,i,match){return match[3]-0===i;}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter){return filter(elem,i,match,array);}else if(name==="contains"){return(elem.textContent||elem.innerText||getText([elem])||"").indexOf(match[3])>=0;}else if(name==="not"){var not=match[3];for(var j=0,l=not.length;j<l;j++){if(not[j]===elem){return false;}}
return true;}else{Sizzle.error(name);}},CHILD:function(elem,match){var first,last,doneName,parent,cache,count,diff,type=match[1],node=elem;switch(type){case"only":case"first":while((node=node.previousSibling)){if(node.nodeType===1){return false;}}
if(type==="first"){return true;}
node=elem;case"last":while((node=node.nextSibling)){if(node.nodeType===1){return false;}}
return true;case"nth":first=match[2];last=match[3];if(first===1&&last===0){return true;}
doneName=match[0];parent=elem.parentNode;if(parent&&(parent[expando]!==doneName||!elem.nodeIndex)){count=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.nodeIndex=++count;}}
parent[expando]=doneName;}
diff=elem.nodeIndex-last;if(first===0){return diff===0;}else{return(diff%first===0&&diff/first>=0);}}},ID:function(elem,match){return elem.nodeType===1&&elem.getAttribute("id")===match;},TAG:function(elem,match){return(match==="*"&&elem.nodeType===1)||!!elem.nodeName&&elem.nodeName.toLowerCase()===match;},CLASS:function(elem,match){return(" "+((elem.className&&elem.className.baseVal)||elem.getAttribute("class"))+" ").indexOf(match)>-1;},ATTR:function(elem,match){var name=match[1],result=Sizzle.attr?Sizzle.attr(elem,name):Expr.attrHandle[name]?Expr.attrHandle[name](elem):elem[name]!=null?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return result==null?type==="!=":!type&&Sizzle.attr?result!=null:type==="="?value===check:type==="*="?value.indexOf(check)>=0:type==="~="?(" "+value+" ").indexOf(check)>=0:!check?value&&result!==false:type==="!="?value!==check:type==="^="?value.indexOf(check)===0:type==="$="?value.substr(value.length-check.length)===check:type==="|="?value===check||value.substr(0,check.length+1)===check+"-":false;},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter){return filter(elem,i,match,array);}}}};var origPOS=Expr.match.POS,fescape=function(all,num){return"\\"+(num-0+1);};for(var type in Expr.match){Expr.match[type]=new RegExp(Expr.match[type].source+(/(?![^\[]*\])(?![^\(]*\))/.source));Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source.replace(/\\(\d+)/g,fescape));}
Expr.match.globalPOS=origPOS;var makeArray=function(array,results){array=Array.prototype.slice.call(array,0);if(results){results.push.apply(results,array);return results;}
return array;};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType;}catch(e){makeArray=function(array,results){var i=0,ret=results||[];if(toString.call(array)==="[object Array]"){Array.prototype.push.apply(ret,array);}else{if(typeof array.length==="number"){for(var l=array.length;i<l;i++){ret.push(array[i]);}}else{for(;array[i];i++){ret.push(array[i]);}}}
return ret;};}
var sortOrder,siblingCheck;if(document.documentElement.compareDocumentPosition){sortOrder=function(a,b){if(a===b){hasDuplicate=true;return 0;}
if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1;}
return a.compareDocumentPosition(b)&4?-1:1;};}else{sortOrder=function(a,b){if(a===b){hasDuplicate=true;return 0;}else if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex;}
var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup){return siblingCheck(a,b);}else if(!aup){return-1;}else if(!bup){return 1;}
while(cur){ap.unshift(cur);cur=cur.parentNode;}
cur=bup;while(cur){bp.unshift(cur);cur=cur.parentNode;}
al=ap.length;bl=bp.length;for(var i=0;i<al&&i<bl;i++){if(ap[i]!==bp[i]){return siblingCheck(ap[i],bp[i]);}}
return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1);};siblingCheck=function(a,b,ret){if(a===b){return ret;}
var cur=a.nextSibling;while(cur){if(cur===b){return-1;}
cur=cur.nextSibling;}
return 1;};}
(function(){var form=document.createElement("div"),id="script"+(new Date()).getTime(),root=document.documentElement;form.innerHTML="<a name='"+id+"'/>";root.insertBefore(form,root.firstChild);if(document.getElementById(id)){Expr.find.ID=function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[];}};Expr.filter.ID=function(elem,match){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return elem.nodeType===1&&node&&node.nodeValue===match;};}
root.removeChild(form);root=form=null;})();(function(){var div=document.createElement("div");div.appendChild(document.createComment(""));if(div.getElementsByTagName("*").length>0){Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if(match[1]==="*"){var tmp=[];for(var i=0;results[i];i++){if(results[i].nodeType===1){tmp.push(results[i]);}}
results=tmp;}
return results;};}
div.innerHTML="<a href='#'></a>";if(div.firstChild&&typeof div.firstChild.getAttribute!=="undefined"&&div.firstChild.getAttribute("href")!=="#"){Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2);};}
div=null;})();if(document.querySelectorAll){(function(){var oldSizzle=Sizzle,div=document.createElement("div"),id="__sizzle__";div.innerHTML="<p class='TEST'></p>";if(div.querySelectorAll&&div.querySelectorAll(".TEST").length===0){return;}
Sizzle=function(query,context,extra,seed){context=context||document;if(!seed&&!Sizzle.isXML(context)){var match=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(query);if(match&&(context.nodeType===1||context.nodeType===9)){if(match[1]){return makeArray(context.getElementsByTagName(query),extra);}else if(match[2]&&Expr.find.CLASS&&context.getElementsByClassName){return makeArray(context.getElementsByClassName(match[2]),extra);}}
if(context.nodeType===9){if(query==="body"&&context.body){return makeArray([context.body],extra);}else if(match&&match[3]){var elem=context.getElementById(match[3]);if(elem&&elem.parentNode){if(elem.id===match[3]){return makeArray([elem],extra);}}else{return makeArray([],extra);}}
try{return makeArray(context.querySelectorAll(query),extra);}catch(qsaError){}}else if(context.nodeType===1&&context.nodeName.toLowerCase()!=="object"){var oldContext=context,old=context.getAttribute("id"),nid=old||id,hasParent=context.parentNode,relativeHierarchySelector=/^\s*[+~]/.test(query);if(!old){context.setAttribute("id",nid);}else{nid=nid.replace(/'/g,"\\$&");}
if(relativeHierarchySelector&&hasParent){context=context.parentNode;}
try{if(!relativeHierarchySelector||hasParent){return makeArray(context.querySelectorAll("[id='"+nid+"'] "+query),extra);}}catch(pseudoError){}finally{if(!old){oldContext.removeAttribute("id");}}}}
return oldSizzle(query,context,extra,seed);};for(var prop in oldSizzle){Sizzle[prop]=oldSizzle[prop];}
div=null;})();}
(function(){var html=document.documentElement,matches=html.matchesSelector||html.mozMatchesSelector||html.webkitMatchesSelector||html.msMatchesSelector;if(matches){var disconnectedMatch=!matches.call(document.createElement("div"),"div"),pseudoWorks=false;try{matches.call(document.documentElement,"[test!='']:sizzle");}catch(pseudoError){pseudoWorks=true;}
Sizzle.matchesSelector=function(node,expr){expr=expr.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!Sizzle.isXML(node)){try{if(pseudoWorks||!Expr.match.PSEUDO.test(expr)&&!/!=/.test(expr)){var ret=matches.call(node,expr);if(ret||!disconnectedMatch||node.document&&node.document.nodeType!==11){return ret;}}}catch(e){}}
return Sizzle(expr,null,null,[node]).length>0;};}})();(function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>";if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0){return;}
div.lastChild.className.baseVal="e";if(div.getElementsByClassName("e").length===1){return;}
Expr.order.splice(1,0,"CLASS");Expr.find.CLASS=function(match,context,isXML){if(typeof context.getElementsByClassName!=="undefined"&&!isXML){return context.getElementsByClassName(match[1]);}};div=null;})();function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=false;elem=elem[dir];while(elem){if(elem[expando]===doneName){match=checkSet[elem.sizset];break;}
if(elem.nodeType===1&&!isXML){elem[expando]=doneName;elem.sizset=i;}
if(elem.nodeName.toLowerCase()===cur){match=elem;break;}
elem=elem[dir];}
checkSet[i]=match;}}}
function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=false;elem=elem[dir];while(elem){if(elem[expando]===doneName){match=checkSet[elem.sizset];break;}
if(elem.nodeType===1){if(!isXML){elem[expando]=doneName;elem.sizset=i;}
if(typeof cur!=="string"){if(elem===cur){match=true;break;}}else if(Sizzle.filter(cur,[elem]).length>0){match=elem;break;}}
elem=elem[dir];}
checkSet[i]=match;}}}
if(document.documentElement.contains){Sizzle.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):true);};}else if(document.documentElement.compareDocumentPosition){Sizzle.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16);};}else{Sizzle.contains=function(){return false;};}
Sizzle.isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false;};var posProcess=function(selector,context,seed){var match,tmpSet=[],later="",root=context.nodeType?[context]:context;while((match=Expr.match.PSEUDO.exec(selector))){later+=match[0];selector=selector.replace(Expr.match.PSEUDO,"");}
selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;i<l;i++){Sizzle(selector,root[i],tmpSet,seed);}
return Sizzle.filter(later,tmpSet);};Sizzle.attr=jQuery.attr;Sizzle.selectors.attrMap={};jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.filters;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;})();var runtil=/Until$/,rparentsprev=/^(?:parents|prevUntil|prevAll)/,rmultiselector=/,/,isSimple=/^.[^:#\[\.,]*$/,slice=Array.prototype.slice,POS=jQuery.expr.match.globalPOS,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({find:function(selector){var self=this,i,l;if(typeof selector!=="string"){return jQuery(selector).filter(function(){for(i=0,l=self.length;i<l;i++){if(jQuery.contains(self[i],this)){return true;}}});}
var ret=this.pushStack("","find",selector),length,n,r;for(i=0,l=this.length;i<l;i++){length=ret.length;jQuery.find(selector,this[i],ret);if(i>0){for(n=length;n<ret.length;n++){for(r=0;r<length;r++){if(ret[r]===ret[n]){ret.splice(n--,1);break;}}}}}
return ret;},has:function(target){var targets=jQuery(target);return this.filter(function(){for(var i=0,l=targets.length;i<l;i++){if(jQuery.contains(this,targets[i])){return true;}}});},not:function(selector){return this.pushStack(winnow(this,selector,false),"not",selector);},filter:function(selector){return this.pushStack(winnow(this,selector,true),"filter",selector);},is:function(selector){return!!selector&&(typeof selector==="string"?POS.test(selector)?jQuery(selector,this.context).index(this[0])>=0:jQuery.filter(selector,this).length>0:this.filter(selector).length>0);},closest:function(selectors,context){var ret=[],i,l,cur=this[0];if(jQuery.isArray(selectors)){var level=1;while(cur&&cur.ownerDocument&&cur!==context){for(i=0;i<selectors.length;i++){if(jQuery(cur).is(selectors[i])){ret.push({selector:selectors[i],elem:cur,level:level});}}
cur=cur.parentNode;level++;}
return ret;}
var pos=POS.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(i=0,l=this.length;i<l;i++){cur=this[i];while(cur){if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break;}else{cur=cur.parentNode;if(!cur||!cur.ownerDocument||cur===context||cur.nodeType===11){break;}}}}
ret=ret.length>1?jQuery.unique(ret):ret;return this.pushStack(ret,"closest",selectors);},index:function(elem){if(!elem){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1;}
if(typeof elem==="string"){return jQuery.inArray(this[0],jQuery(elem));}
return jQuery.inArray(elem.jquery?elem[0]:elem,this);},add:function(selector,context){var set=typeof selector==="string"?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all));},andSelf:function(){return this.add(this.prevObject);}});function isDisconnected(node){return!node||!node.parentNode||node.parentNode.nodeType===11;}
jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null;},parents:function(elem){return jQuery.dir(elem,"parentNode");},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until);},next:function(elem){return jQuery.nth(elem,2,"nextSibling");},prev:function(elem){return jQuery.nth(elem,2,"previousSibling");},nextAll:function(elem){return jQuery.dir(elem,"nextSibling");},prevAll:function(elem){return jQuery.dir(elem,"previousSibling");},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until);},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until);},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem);},children:function(elem){return jQuery.sibling(elem.firstChild);},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes);}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);if(!runtil.test(name)){selector=until;}
if(selector&&typeof selector==="string"){ret=jQuery.filter(selector,ret);}
ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret;if((this.length>1||rmultiselector.test(selector))&&rparentsprev.test(name)){ret=ret.reverse();}
return this.pushStack(ret,name,slice.call(arguments).join(","));};});jQuery.extend({filter:function(expr,elems,not){if(not){expr=":not("+expr+")";}
return elems.length===1?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems);},dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!jQuery(cur).is(until))){if(cur.nodeType===1){matched.push(cur);}
cur=cur[dir];}
return matched;},nth:function(cur,result,dir,elem){result=result||1;var num=0;for(;cur;cur=cur[dir]){if(cur.nodeType===1&&++num===result){break;}}
return cur;},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){r.push(n);}}
return r;}});function winnow(elements,qualifier,keep){qualifier=qualifier||0;if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep;});}else if(qualifier.nodeType){return jQuery.grep(elements,function(elem,i){return(elem===qualifier)===keep;});}else if(typeof qualifier==="string"){var filtered=jQuery.grep(elements,function(elem){return elem.nodeType===1;});if(isSimple.test(qualifier)){return jQuery.filter(qualifier,filtered,!keep);}else{qualifier=jQuery.filter(qualifier,filtered);}}
return jQuery.grep(elements,function(elem,i){return(jQuery.inArray(elem,qualifier)>=0)===keep;});}
function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement){while(list.length){safeFrag.createElement(list.pop());}}
return safeFrag;}
var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|"+"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:\d+|null)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style)/i,rnocache=/<(?:script|object|embed|option|style)/i,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/\/(java|ecma)script/i,rcleanScript=/^\s*<!(?:\[CDATA\[|\-\-)/,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},safeFragment=createSafeFragment(document);wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;if(!jQuery.support.htmlSerialize){wrapMap._default=[1,"div<div>","</div>"];}
jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value));},null,value,arguments.length);},wrapAll:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i));});}
if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0]);}
wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1){elem=elem.firstChild;}
return elem;}).append(this);}
return this;},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i));});}
return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html);}else{self.append(html);}});},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html);});},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes);}}).end();},append:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1){this.appendChild(elem);}});},prepend:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1){this.insertBefore(elem,this.firstChild);}});},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this);});}else if(arguments.length){var set=jQuery.clean(arguments);set.push.apply(set,this.toArray());return this.pushStack(set,"before",arguments);}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this.nextSibling);});}else if(arguments.length){var set=this.pushStack(this,"after",arguments);set.push.apply(set,jQuery.clean(arguments));return set;}},remove:function(selector,keepData){for(var i=0,elem;(elem=this[i])!=null;i++){if(!selector||jQuery.filter(selector,[elem]).length){if(!keepData&&elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));jQuery.cleanData([elem]);}
if(elem.parentNode){elem.parentNode.removeChild(elem);}}}
return this;},empty:function(){for(var i=0,elem;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));}
while(elem.firstChild){elem.removeChild(elem.firstChild);}}
return this;},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents);});},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined){return elem.nodeType===1?elem.innerHTML.replace(rinlinejQuery,""):null;}
if(typeof value==="string"&&!rnoInnerhtml.test(value)&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));elem.innerHTML=value;}}
elem=0;}catch(e){}}
if(elem){this.empty().append(value);}},null,value,arguments.length);},replaceWith:function(value){if(this[0]&&this[0].parentNode){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old));});}
if(typeof value!=="string"){value=jQuery(value).detach();}
return this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove();if(next){jQuery(next).before(value);}else{jQuery(parent).append(value);}});}else{return this.length?this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value):this;}},detach:function(selector){return this.remove(selector,true);},domManip:function(args,table,callback){var results,first,fragment,parent,value=args[0],scripts=[];if(!jQuery.support.checkClone&&arguments.length===3&&typeof value==="string"&&rchecked.test(value)){return this.each(function(){jQuery(this).domManip(args,table,callback,true);});}
if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined);self.domManip(args,table,callback);});}
if(this[0]){parent=value&&value.parentNode;if(jQuery.support.parentNode&&parent&&parent.nodeType===11&&parent.childNodes.length===this.length){results={fragment:parent};}else{results=jQuery.buildFragment(args,this,scripts);}
fragment=results.fragment;if(fragment.childNodes.length===1){first=fragment=fragment.firstChild;}else{first=fragment.firstChild;}
if(first){table=table&&jQuery.nodeName(first,"tr");for(var i=0,l=this.length,lastIndex=l-1;i<l;i++){callback.call(table?root(this[i],first):this[i],results.cacheable||(l>1&&i<lastIndex)?jQuery.clone(fragment,true,true):fragment);}}
if(scripts.length){jQuery.each(scripts,function(i,elem){if(elem.src){jQuery.ajax({type:"GET",global:false,url:elem.src,async:false,dataType:"script"});}else{jQuery.globalEval((elem.text||elem.textContent||elem.innerHTML||"").replace(rcleanScript,"/*$0*/"));}
if(elem.parentNode){elem.parentNode.removeChild(elem);}});}}
return this;}});function root(elem,cur){return jQuery.nodeName(elem,"table")?(elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody"))):elem;}
function cloneCopyEvent(src,dest){if(dest.nodeType!==1||!jQuery.hasData(src)){return;}
var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle;curData.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i]);}}}
if(curData.data){curData.data=jQuery.extend({},curData.data);}}
function cloneFixAttributes(src,dest){var nodeName;if(dest.nodeType!==1){return;}
if(dest.clearAttributes){dest.clearAttributes();}
if(dest.mergeAttributes){dest.mergeAttributes(src);}
nodeName=dest.nodeName.toLowerCase();if(nodeName==="object"){dest.outerHTML=src.outerHTML;}else if(nodeName==="input"&&(src.type==="checkbox"||src.type==="radio")){if(src.checked){dest.defaultChecked=dest.checked=src.checked;}
if(dest.value!==src.value){dest.value=src.value;}}else if(nodeName==="option"){dest.selected=src.defaultSelected;}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue;}else if(nodeName==="script"&&dest.text!==src.text){dest.text=src.text;}
dest.removeAttribute(jQuery.expando);dest.removeAttribute("_submit_attached");dest.removeAttribute("_change_attached");}
jQuery.buildFragment=function(args,nodes,scripts){var fragment,cacheable,cacheresults,doc,first=args[0];if(nodes&&nodes[0]){doc=nodes[0].ownerDocument||nodes[0];}
if(!doc.createDocumentFragment){doc=document;}
if(args.length===1&&typeof first==="string"&&first.length<512&&doc===document&&first.charAt(0)==="<"&&!rnocache.test(first)&&(jQuery.support.checkClone||!rchecked.test(first))&&(jQuery.support.html5Clone||!rnoshimcache.test(first))){cacheable=true;cacheresults=jQuery.fragments[first];if(cacheresults&&cacheresults!==1){fragment=cacheresults;}}
if(!fragment){fragment=doc.createDocumentFragment();jQuery.clean(args,doc,fragment,scripts);}
if(cacheable){jQuery.fragments[first]=cacheresults?fragment:1;}
return{fragment:fragment,cacheable:cacheable};};jQuery.fragments={};jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var ret=[],insert=jQuery(selector),parent=this.length===1&&this[0].parentNode;if(parent&&parent.nodeType===11&&parent.childNodes.length===1&&insert.length===1){insert[original](this[0]);return this;}else{for(var i=0,l=insert.length;i<l;i++){var elems=(i>0?this.clone(true):this).get();jQuery(insert[i])[original](elems);ret=ret.concat(elems);}
return this.pushStack(ret,name,insert.selector);}};});function getAll(elem){if(typeof elem.getElementsByTagName!=="undefined"){return elem.getElementsByTagName("*");}else if(typeof elem.querySelectorAll!=="undefined"){return elem.querySelectorAll("*");}else{return[];}}
function fixDefaultChecked(elem){if(elem.type==="checkbox"||elem.type==="radio"){elem.defaultChecked=elem.checked;}}
function findInputs(elem){var nodeName=(elem.nodeName||"").toLowerCase();if(nodeName==="input"){fixDefaultChecked(elem);}else if(nodeName!=="script"&&typeof elem.getElementsByTagName!=="undefined"){jQuery.grep(elem.getElementsByTagName("input"),fixDefaultChecked);}}
function shimCloneNode(elem){var div=document.createElement("div");safeFragment.appendChild(div);div.innerHTML=elem.outerHTML;return div.firstChild;}
jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var srcElements,destElements,i,clone=jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")?elem.cloneNode(true):shimCloneNode(elem);if((!jQuery.support.noCloneEvent||!jQuery.support.noCloneChecked)&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){cloneFixAttributes(elem,clone);srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){if(destElements[i]){cloneFixAttributes(srcElements[i],destElements[i]);}}}
if(dataAndEvents){cloneCopyEvent(elem,clone);if(deepDataAndEvents){srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){cloneCopyEvent(srcElements[i],destElements[i]);}}}
srcElements=destElements=null;return clone;},clean:function(elems,context,fragment,scripts){var checkScriptType,script,j,ret=[];context=context||document;if(typeof context.createElement==="undefined"){context=context.ownerDocument||context[0]&&context[0].ownerDocument||document;}
for(var i=0,elem;(elem=elems[i])!=null;i++){if(typeof elem==="number"){elem+="";}
if(!elem){continue;}
if(typeof elem==="string"){if(!rhtml.test(elem)){elem=context.createTextNode(elem);}else{elem=elem.replace(rxhtmlTag,"<$1></$2>");var tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,depth=wrap[0],div=context.createElement("div"),safeChildNodes=safeFragment.childNodes,remove;if(context===document){safeFragment.appendChild(div);}else{createSafeFragment(context).appendChild(div);}
div.innerHTML=wrap[1]+elem+wrap[2];while(depth--){div=div.lastChild;}
if(!jQuery.support.tbody){var hasBody=rtbody.test(elem),tbody=tag==="table"&&!hasBody?div.firstChild&&div.firstChild.childNodes:wrap[1]==="<table>"&&!hasBody?div.childNodes:[];for(j=tbody.length-1;j>=0;--j){if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length){tbody[j].parentNode.removeChild(tbody[j]);}}}
if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)){div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild);}
elem=div.childNodes;if(div){div.parentNode.removeChild(div);if(safeChildNodes.length>0){remove=safeChildNodes[safeChildNodes.length-1];if(remove&&remove.parentNode){remove.parentNode.removeChild(remove);}}}}}
var len;if(!jQuery.support.appendChecked){if(elem[0]&&typeof(len=elem.length)==="number"){for(j=0;j<len;j++){findInputs(elem[j]);}}else{findInputs(elem);}}
if(elem.nodeType){ret.push(elem);}else{ret=jQuery.merge(ret,elem);}}
if(fragment){checkScriptType=function(elem){return!elem.type||rscriptType.test(elem.type);};for(i=0;ret[i];i++){script=ret[i];if(scripts&&jQuery.nodeName(script,"script")&&(!script.type||rscriptType.test(script.type))){scripts.push(script.parentNode?script.parentNode.removeChild(script):script);}else{if(script.nodeType===1){var jsTags=jQuery.grep(script.getElementsByTagName("script"),checkScriptType);ret.splice.apply(ret,[i+1,0].concat(jsTags));}
fragment.appendChild(script);}}}
return ret;},cleanData:function(elems){var data,id,cache=jQuery.cache,special=jQuery.event.special,deleteExpando=jQuery.support.deleteExpando;for(var i=0,elem;(elem=elems[i])!=null;i++){if(elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()]){continue;}
id=elem[jQuery.expando];if(id){data=cache[id];if(data&&data.events){for(var type in data.events){if(special[type]){jQuery.event.remove(elem,type);}else{jQuery.removeEvent(elem,type,data.handle);}}
if(data.handle){data.handle.elem=null;}}
if(deleteExpando){delete elem[jQuery.expando];}else if(elem.removeAttribute){elem.removeAttribute(jQuery.expando);}
delete cache[id];}}}});var ralpha=/alpha\([^)]*\)/i,ropacity=/opacity=([^)]*)/,rupper=/([A-Z]|^ms)/g,rnum=/^[\-+]?(?:\d*\.)?\d+$/i,rnumnonpx=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,rrelNum=/^([\-+])=([\-+.\de]+)/,rmargin=/^margin/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssExpand=["Top","Right","Bottom","Left"],curCSS,getComputedStyle,currentStyle;jQuery.fn.css=function(name,value){return jQuery.access(this,function(elem,name,value){return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name);},name,value,arguments.length>1);};jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret;}else{return elem.style.opacity;}}}},cssNumber:{"fillOpacity":true,"fontWeight":true,"lineHeight":true,"opacity":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return;}
var ret,type,origName=jQuery.camelCase(name),style=elem.style,hooks=jQuery.cssHooks[origName];name=jQuery.cssProps[origName]||origName;if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=(+(ret[1]+1)*+ret[2])+parseFloat(jQuery.css(elem,name));type="number";}
if(value==null||type==="number"&&isNaN(value)){return;}
if(type==="number"&&!jQuery.cssNumber[origName]){value+="px";}
if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value))!==undefined){try{style[name]=value;}catch(e){}}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret;}
return style[name];}},css:function(elem,name,extra){var ret,hooks;name=jQuery.camelCase(name);hooks=jQuery.cssHooks[name];name=jQuery.cssProps[name]||name;if(name==="cssFloat"){name="float";}
if(hooks&&"get"in hooks&&(ret=hooks.get(elem,true,extra))!==undefined){return ret;}else if(curCSS){return curCSS(elem,name);}},swap:function(elem,options,callback){var old={},ret,name;for(name in options){old[name]=elem.style[name];elem.style[name]=options[name];}
ret=callback.call(elem);for(name in options){elem.style[name]=old[name];}
return ret;}});jQuery.curCSS=jQuery.css;if(document.defaultView&&document.defaultView.getComputedStyle){getComputedStyle=function(elem,name){var ret,defaultView,computedStyle,width,style=elem.style;name=name.replace(rupper,"-$1").toLowerCase();if((defaultView=elem.ownerDocument.defaultView)&&(computedStyle=defaultView.getComputedStyle(elem,null))){ret=computedStyle.getPropertyValue(name);if(ret===""&&!jQuery.contains(elem.ownerDocument.documentElement,elem)){ret=jQuery.style(elem,name);}}
if(!jQuery.support.pixelMargin&&computedStyle&&rmargin.test(name)&&rnumnonpx.test(ret)){width=style.width;style.width=ret;ret=computedStyle.width;style.width=width;}
return ret;};}
if(document.documentElement.currentStyle){currentStyle=function(elem,name){var left,rsLeft,uncomputed,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;if(ret==null&&style&&(uncomputed=style[name])){ret=uncomputed;}
if(rnumnonpx.test(ret)){left=style.left;rsLeft=elem.runtimeStyle&&elem.runtimeStyle.left;if(rsLeft){elem.runtimeStyle.left=elem.currentStyle.left;}
style.left=name==="fontSize"?"1em":ret;ret=style.pixelLeft+"px";style.left=left;if(rsLeft){elem.runtimeStyle.left=rsLeft;}}
return ret===""?"auto":ret;};}
curCSS=getComputedStyle||currentStyle;function getWidthOrHeight(elem,name,extra){var val=name==="width"?elem.offsetWidth:elem.offsetHeight,i=name==="width"?1:0,len=4;if(val===undefined){val=name==="width"?elem.getBBox().width:elem.getBBox().height;}
if(val>0){if(extra!=="border"){for(;i<len;i+=2){if(!extra){val-=parseFloat(jQuery.css(elem,"padding"+cssExpand[i]))||0;}
if(extra==="margin"){val+=parseFloat(jQuery.css(elem,extra+cssExpand[i]))||0;}else{val-=parseFloat(jQuery.css(elem,"border"+cssExpand[i]+"Width"))||0;}}}
return val+"px";}
val=curCSS(elem,name);if(val<0||val==null){val=elem.style[name];}
if(rnumnonpx.test(val)){return val;}
val=parseFloat(val)||0;if(extra){for(;i<len;i+=2){val+=parseFloat(jQuery.css(elem,"padding"+cssExpand[i]))||0;if(extra!=="padding"){val+=parseFloat(jQuery.css(elem,"border"+cssExpand[i]+"Width"))||0;}
if(extra==="margin"){val+=parseFloat(jQuery.css(elem,extra+cssExpand[i]))||0;}}}
return val+"px";}
jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){if(elem.offsetWidth!==0){return getWidthOrHeight(elem,name,extra);}else{return jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra);});}}},set:function(elem,value){return rnum.test(value)?value+"px":value;}};});if(!jQuery.support.opacity){jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?(parseFloat(RegExp.$1)/100)+"":computed?"1":"";},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+value*100+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity;}};}
jQuery(function(){if(!jQuery.support.reliableMarginRight){jQuery.cssHooks.marginRight={get:function(elem,computed){return jQuery.swap(elem,{"display":"inline-block"},function(){if(computed){return curCSS(elem,"margin-right");}else{return elem.style.marginRight;}});}};}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(elem){var width=elem.offsetWidth,height=elem.offsetHeight;return(width===0&&height===0)||(!jQuery.support.reliableHiddenOffsets&&((elem.style&&elem.style.display)||jQuery.css(elem,"display"))==="none");};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem);};}
jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i,parts=typeof value==="string"?value.split(" "):[value],expanded={};for(i=0;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];}
return expanded;}};});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rhash=/#.*$/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,rinput=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rlocalProtocol=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rquery=/\?/,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,rselectTextarea=/^(?:select|textarea)/i,rspacesAjax=/\s+/,rts=/([?&])_=[^&]*/,rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,_load=jQuery.fn.load,prefilters={},transports={},ajaxLocation,ajaxLocParts,allTypes=["*/"]+["*"];try{ajaxLocation=location.href;}catch(e){ajaxLocation=document.createElement("a");ajaxLocation.href="";ajaxLocation=ajaxLocation.href;}
ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*";}
if(jQuery.isFunction(func)){var dataTypes=dataTypeExpression.toLowerCase().split(rspacesAjax),i=0,length=dataTypes.length,dataType,list,placeBefore;for(;i<length;i++){dataType=dataTypes[i];placeBefore=/^\+/.test(dataType);if(placeBefore){dataType=dataType.substr(1)||"*";}
list=structure[dataType]=structure[dataType]||[];list[placeBefore?"unshift":"push"](func);}}};}
function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,dataType,inspected){dataType=dataType||options.dataTypes[0];inspected=inspected||{};inspected[dataType]=true;var list=structure[dataType],i=0,length=list?list.length:0,executeOnly=(structure===prefilters),selection;for(;i<length&&(executeOnly||!selection);i++){selection=list[i](options,originalOptions,jqXHR);if(typeof selection==="string"){if(!executeOnly||inspected[selection]){selection=undefined;}else{options.dataTypes.unshift(selection);selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,selection,inspected);}}}
if((executeOnly||!selection)&&!inspected["*"]){selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,"*",inspected);}
return selection;}
function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:(deep||(deep={})))[key]=src[key];}}
if(deep){jQuery.extend(true,target,deep);}}
jQuery.fn.extend({load:function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments);}else if(!this.length){return this;}
var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off);}
var type="GET";if(params){if(jQuery.isFunction(params)){callback=params;params=undefined;}else if(typeof params==="object"){params=jQuery.param(params,jQuery.ajaxSettings.traditional);type="POST";}}
var self=this;jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(jqXHR,status,responseText){responseText=jqXHR.responseText;if(jqXHR.isResolved()){jqXHR.done(function(r){responseText=r;});self.html(selector?jQuery("<div>").append(responseText.replace(rscript,"")).find(selector):responseText);}
if(callback){self.each(callback,[responseText,status,jqXHR]);}}});return this;},serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this;}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type));}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val.replace(rCRLF,"\r\n")};}):{name:elem.name,value:val.replace(rCRLF,"\r\n")};}).get();}});jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){jQuery.fn[o]=function(f){return this.on(o,f);};});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined;}
return jQuery.ajax({type:method,url:url,data:data,success:callback,dataType:type});};});jQuery.extend({getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script");},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json");},ajaxSetup:function(target,settings){if(settings){ajaxExtend(target,jQuery.ajaxSettings);}else{settings=target;target=jQuery.ajaxSettings;}
ajaxExtend(target,settings);return target;},ajaxSettings:{url:ajaxLocation,isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":allTypes},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined;}
options=options||{};var
s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=callbackContext!==s&&(callbackContext.nodeType||callbackContext instanceof jQuery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},ifModifiedKey,requestHeaders={},requestHeadersNames={},responseHeadersString,responseHeaders,transport,timeoutTimer,parts,state=0,fireGlobals,i,jqXHR={readyState:0,setRequestHeader:function(name,value){if(!state){var lname=name.toLowerCase();name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value;}
return this;},getAllResponseHeaders:function(){return state===2?responseHeadersString:null;},getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while((match=rheaders.exec(responseHeadersString))){responseHeaders[match[1].toLowerCase()]=match[2];}}
match=responseHeaders[key.toLowerCase()];}
return match===undefined?null:match;},overrideMimeType:function(type){if(!state){s.mimeType=type;}
return this;},abort:function(statusText){statusText=statusText||"abort";if(transport){transport.abort(statusText);}
done(0,statusText);return this;}};function done(status,nativeStatusText,responses,headers){if(state===2){return;}
state=2;if(timeoutTimer){clearTimeout(timeoutTimer);}
transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;var isSuccess,success,error,statusText=nativeStatusText,response=responses?ajaxHandleResponses(s,jqXHR,responses):undefined,lastModified,etag;if(status>=200&&status<300||status===304){if(s.ifModified){if((lastModified=jqXHR.getResponseHeader("Last-Modified"))){jQuery.lastModified[ifModifiedKey]=lastModified;}
if((etag=jqXHR.getResponseHeader("Etag"))){jQuery.etag[ifModifiedKey]=etag;}}
if(status===304){statusText="notmodified";isSuccess=true;}else{try{success=ajaxConvert(s,response);statusText="success";isSuccess=true;}catch(e){statusText="parsererror";error=e;}}}else{error=statusText;if(!statusText||status){statusText="error";if(status<0){status=0;}}}
jqXHR.status=status;jqXHR.statusText=""+(nativeStatusText||statusText);if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);}
jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger("ajax"+(isSuccess?"Success":"Error"),[jqXHR,s,isSuccess?success:error]);}
completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!(--jQuery.active)){jQuery.event.trigger("ajaxStop");}}}
deferred.promise(jqXHR);jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;jqXHR.complete=completeDeferred.add;jqXHR.statusCode=function(map){if(map){var tmp;if(state<2){for(tmp in map){statusCode[tmp]=[statusCode[tmp],map[tmp]];}}else{tmp=map[jqXHR.status];jqXHR.then(tmp,tmp);}}
return this;};s.url=((url||s.url)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().split(rspacesAjax);if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&(parts[1]!=ajaxLocParts[1]||parts[2]!=ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?80:443))!=(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?80:443))));}
if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional);}
inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return false;}
fireGlobals=s.global;s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart");}
if(!s.hasContent){if(s.data){s.url+=(rquery.test(s.url)?"&":"?")+s.data;delete s.data;}
ifModifiedKey=s.url;if(s.cache===false){var ts=jQuery.now(),ret=s.url.replace(rts,"$1_="+ts);s.url=ret+((ret===s.url)?(rquery.test(s.url)?"&":"?")+"_="+ts:"");}}
if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType);}
if(s.ifModified){ifModifiedKey=ifModifiedKey||s.url;if(jQuery.lastModified[ifModifiedKey]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[ifModifiedKey]);}
if(jQuery.etag[ifModifiedKey]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[ifModifiedKey]);}}
jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i]);}
if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){jqXHR.abort();return false;}
for(i in{success:1,error:1,complete:1}){jqXHR[i](s[i]);}
transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport");}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s]);}
if(s.async&&s.timeout>0){timeoutTimer=setTimeout(function(){jqXHR.abort("timeout");},s.timeout);}
try{state=1;transport.send(requestHeaders,done);}catch(e){if(state<2){done(-1,e);}else{throw e;}}}
return jqXHR;},param:function(a,traditional){var s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value);};if(traditional===undefined){traditional=jQuery.ajaxSettings.traditional;}
if(jQuery.isArray(a)||(a.jquery&&!jQuery.isPlainObject(a))){jQuery.each(a,function(){add(this.name,this.value);});}else{for(var prefix in a){buildParams(prefix,a[prefix],traditional,add);}}
return s.join("&").replace(r20,"+");}});function buildParams(prefix,obj,traditional,add){if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v);}else{buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v,traditional,add);}});}else if(!traditional&&jQuery.type(obj)==="object"){for(var name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add);}}else{add(prefix,obj);}}
jQuery.extend({active:0,lastModified:{},etag:{}});function ajaxHandleResponses(s,jqXHR,responses){var contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields,ct,type,finalDataType,firstDataType;for(type in responseFields){if(type in responses){jqXHR[responseFields[type]]=responses[type];}}
while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("content-type");}}
if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break;}}}
if(dataTypes[0]in responses){finalDataType=dataTypes[0];}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break;}
if(!firstDataType){firstDataType=type;}}
finalDataType=finalDataType||firstDataType;}
if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType);}
return responses[finalDataType];}}
function ajaxConvert(s,response){if(s.dataFilter){response=s.dataFilter(response,s.dataType);}
var dataTypes=s.dataTypes,converters={},i,key,length=dataTypes.length,tmp,current=dataTypes[0],prev,conversion,conv,conv1,conv2;for(i=1;i<length;i++){if(i===1){for(key in s.converters){if(typeof key==="string"){converters[key.toLowerCase()]=s.converters[key];}}}
prev=current;current=dataTypes[i];if(current==="*"){current=prev;}else if(prev!=="*"&&prev!==current){conversion=prev+" "+current;conv=converters[conversion]||converters["* "+current];if(!conv){conv2=undefined;for(conv1 in converters){tmp=conv1.split(" ");if(tmp[0]===prev||tmp[0]==="*"){conv2=converters[tmp[1]+" "+current];if(conv2){conv1=converters[conv1];if(conv1===true){conv=conv2;}else if(conv2===true){conv=conv1;}
break;}}}}
if(!(conv||conv2)){jQuery.error("No conversion from "+conversion.replace(" "," to "));}
if(conv!==true){response=conv?conv(response):conv2(conv1(response));}}}
return response;}
var jsc=jQuery.now(),jsre=/(\=)\?(&|$)|\?\?/i;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return jQuery.expando+"_"+(jsc++);}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var inspectData=(typeof s.data==="string")&&/^application\/x\-www\-form\-urlencoded/.test(s.contentType);if(s.dataTypes[0]==="jsonp"||s.jsonp!==false&&(jsre.test(s.url)||inspectData&&jsre.test(s.data))){var responseContainer,jsonpCallback=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,previous=window[jsonpCallback],url=s.url,data=s.data,replace="$1"+jsonpCallback+"$2";if(s.jsonp!==false){url=url.replace(jsre,replace);if(s.url===url){if(inspectData){data=data.replace(jsre,replace);}
if(s.data===data){url+=(/\?/.test(url)?"&":"?")+s.jsonp+"="+jsonpCallback;}}}
s.url=url;s.data=data;window[jsonpCallback]=function(response){responseContainer=[response];};jqXHR.always(function(){window[jsonpCallback]=previous;if(responseContainer&&jQuery.isFunction(previous)){window[jsonpCallback](responseContainer[0]);}});s.converters["script json"]=function(){if(!responseContainer){jQuery.error(jsonpCallback+" was not called");}
return responseContainer[0];};s.dataTypes[0]="json";return"script";}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(text){jQuery.globalEval(text);return text;}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false;}
if(s.crossDomain){s.type="GET";s.global=false;}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script");script.async="async";if(s.scriptCharset){script.charset=s.scriptCharset;}
script.src=s.url;script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;if(head&&script.parentNode){head.removeChild(script);}
script=undefined;if(!isAbort){callback(200,"success");}}};head.insertBefore(script,head.firstChild);},abort:function(){if(script){script.onload(0,1);}}};}});var
xhrOnUnloadAbort=window.ActiveXObject?function(){for(var key in xhrCallbacks){xhrCallbacks[key](0,1);}}:false,xhrId=0,xhrCallbacks;function createStandardXHR(){try{return new window.XMLHttpRequest();}catch(e){}}
function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP");}catch(e){}}
jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR();}:createStandardXHR;(function(xhr){jQuery.extend(jQuery.support,{ajax:!!xhr,cors:!!xhr&&("withCredentials"in xhr)});})(jQuery.ajaxSettings.xhr());if(jQuery.support.ajax){jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var xhr=s.xhr(),handle,i;if(s.username){xhr.open(s.type,s.url,s.async,s.username,s.password);}else{xhr.open(s.type,s.url,s.async);}
if(s.xhrFields){for(i in s.xhrFields){xhr[i]=s.xhrFields[i];}}
if(s.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(s.mimeType);}
if(!s.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest";}
try{for(i in headers){xhr.setRequestHeader(i,headers[i]);}}catch(_){}
xhr.send((s.hasContent&&s.data)||null);callback=function(_,isAbort){var status,statusText,responseHeaders,responses,xml;try{if(callback&&(isAbort||xhr.readyState===4)){callback=undefined;if(handle){xhr.onreadystatechange=jQuery.noop;if(xhrOnUnloadAbort){delete xhrCallbacks[handle];}}
if(isAbort){if(xhr.readyState!==4){xhr.abort();}}else{status=xhr.status;responseHeaders=xhr.getAllResponseHeaders();responses={};xml=xhr.responseXML;if(xml&&xml.documentElement){responses.xml=xml;}
try{responses.text=xhr.responseText;}catch(_){}
try{statusText=xhr.statusText;}catch(e){statusText="";}
if(!status&&s.isLocal&&!s.crossDomain){status=responses.text?200:404;}else if(status===1223){status=204;}}}}catch(firefoxAccessException){if(!isAbort){complete(-1,firefoxAccessException);}}
if(responses){complete(status,statusText,responses,responseHeaders);}};if(!s.async||xhr.readyState===4){callback();}else{handle=++xhrId;if(xhrOnUnloadAbort){if(!xhrCallbacks){xhrCallbacks={};jQuery(window).unload(xhrOnUnloadAbort);}
xhrCallbacks[handle]=callback;}
xhr.onreadystatechange=callback;}},abort:function(){if(callback){callback(0,1);}}};}});}
var elemdisplay={},iframe,iframeDoc,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,timerId,fxAttrs=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],fxNow;jQuery.fn.extend({show:function(speed,easing,callback){var elem,display;if(speed||speed===0){return this.animate(genFx("show",3),speed,easing,callback);}else{for(var i=0,j=this.length;i<j;i++){elem=this[i];if(elem.style){display=elem.style.display;if(!jQuery._data(elem,"olddisplay")&&display==="none"){display=elem.style.display="";}
if((display===""&&jQuery.css(elem,"display")==="none")||!jQuery.contains(elem.ownerDocument.documentElement,elem)){jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName));}}}
for(i=0;i<j;i++){elem=this[i];if(elem.style){display=elem.style.display;if(display===""||display==="none"){elem.style.display=jQuery._data(elem,"olddisplay")||"";}}}
return this;}},hide:function(speed,easing,callback){if(speed||speed===0){return this.animate(genFx("hide",3),speed,easing,callback);}else{var elem,display,i=0,j=this.length;for(;i<j;i++){elem=this[i];if(elem.style){display=jQuery.css(elem,"display");if(display!=="none"&&!jQuery._data(elem,"olddisplay")){jQuery._data(elem,"olddisplay",display);}}}
for(i=0;i<j;i++){if(this[i].style){this[i].style.display="none";}}
return this;}},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2,callback){var bool=typeof fn==="boolean";if(jQuery.isFunction(fn)&&jQuery.isFunction(fn2)){this._toggle.apply(this,arguments);}else if(fn==null||bool){this.each(function(){var state=bool?fn:jQuery(this).is(":hidden");jQuery(this)[state?"show":"hide"]();});}else{this.animate(genFx("toggle",3),fn,fn2,callback);}
return this;},fadeTo:function(speed,to,easing,callback){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:to},speed,easing,callback);},animate:function(prop,speed,easing,callback){var optall=jQuery.speed(speed,easing,callback);if(jQuery.isEmptyObject(prop)){return this.each(optall.complete,[false]);}
prop=jQuery.extend({},prop);function doAnimation(){if(optall.queue===false){jQuery._mark(this);}
var opt=jQuery.extend({},optall),isElement=this.nodeType===1,hidden=isElement&&jQuery(this).is(":hidden"),name,val,p,e,hooks,replace,parts,start,end,unit,method;opt.animatedProperties={};for(p in prop){name=jQuery.camelCase(p);if(p!==name){prop[name]=prop[p];delete prop[p];}
if((hooks=jQuery.cssHooks[name])&&"expand"in hooks){replace=hooks.expand(prop[name]);delete prop[name];for(p in replace){if(!(p in prop)){prop[p]=replace[p];}}}}
for(name in prop){val=prop[name];if(jQuery.isArray(val)){opt.animatedProperties[name]=val[1];val=prop[name]=val[0];}else{opt.animatedProperties[name]=opt.specialEasing&&opt.specialEasing[name]||opt.easing||'swing';}
if(val==="hide"&&hidden||val==="show"&&!hidden){return opt.complete.call(this);}
if(isElement&&(name==="height"||name==="width")){opt.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(jQuery.css(this,"display")==="inline"&&jQuery.css(this,"float")==="none"){if(!jQuery.support.inlineBlockNeedsLayout||defaultDisplay(this.nodeName)==="inline"){this.style.display="inline-block";}else{this.style.zoom=1;}}}}
if(opt.overflow!=null){this.style.overflow="hidden";}
for(p in prop){e=new jQuery.fx(this,opt,p);val=prop[p];if(rfxtypes.test(val)){method=jQuery._data(this,"toggle"+p)||(val==="toggle"?hidden?"show":"hide":0);if(method){jQuery._data(this,"toggle"+p,method==="show"?"hide":"show");e[method]();}else{e[val]();}}else{parts=rfxnum.exec(val);start=e.cur();if(parts){end=parseFloat(parts[2]);unit=parts[3]||(jQuery.cssNumber[p]?"":"px");if(unit!=="px"){jQuery.style(this,p,(end||1)+unit);start=((end||1)/e.cur())*start;jQuery.style(this,p,start+unit);}
if(parts[1]){end=((parts[1]==="-="?-1:1)*end)+start;}
e.custom(start,end,unit);}else{e.custom(start,val,"");}}}
return true;}
return optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation);},stop:function(type,clearQueue,gotoEnd){if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined;}
if(clearQueue&&type!==false){this.queue(type||"fx",[]);}
return this.each(function(){var index,hadTimers=false,timers=jQuery.timers,data=jQuery._data(this);if(!gotoEnd){jQuery._unmark(true,this);}
function stopQueue(elem,data,index){var hooks=data[index];jQuery.removeData(elem,index,true);hooks.stop(gotoEnd);}
if(type==null){for(index in data){if(data[index]&&data[index].stop&&index.indexOf(".run")===index.length-4){stopQueue(this,data,index);}}}else if(data[index=type+".run"]&&data[index].stop){stopQueue(this,data,index);}
for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){if(gotoEnd){timers[index](true);}else{timers[index].saveState();}
hadTimers=true;timers.splice(index,1);}}
if(!(gotoEnd&&hadTimers)){jQuery.dequeue(this,type);}});}});function createFxNow(){setTimeout(clearFxNow,0);return(fxNow=jQuery.now());}
function clearFxNow(){fxNow=undefined;}
function genFx(type,num){var obj={};jQuery.each(fxAttrs.concat.apply([],fxAttrs.slice(0,num)),function(){obj[this]=type;});return obj;}
jQuery.each({slideDown:genFx("show",1),slideUp:genFx("hide",1),slideToggle:genFx("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback);};});jQuery.extend({speed:function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue="fx";}
opt.old=opt.complete;opt.complete=function(noUnmark){if(jQuery.isFunction(opt.old)){opt.old.call(this);}
if(opt.queue){jQuery.dequeue(this,opt.queue);}else if(noUnmark!==false){jQuery._unmark(this);}};return opt;},easing:{linear:function(p){return p;},swing:function(p){return(-Math.cos(p*Math.PI)/2)+0.5;}},timers:[],fx:function(elem,options,prop){this.options=options;this.elem=elem;this.prop=prop;options.orig=options.orig||{};}});jQuery.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this);}
(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this);},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){if(this.elem[this.prop].baseVal){return this.elem[this.prop].baseVal.value;}
return this.elem[this.prop];}
var parsed,r=jQuery.css(this.elem,this.prop);return isNaN(parsed=parseFloat(r))?!r||r==="auto"?0:r:parsed;},custom:function(from,to,unit){var self=this,fx=jQuery.fx;this.startTime=fxNow||createFxNow();this.end=to;this.now=this.start=from;this.pos=this.state=0;this.unit=unit||this.unit||(jQuery.cssNumber[this.prop]?"":"px");function t(gotoEnd){return self.step(gotoEnd);}
t.queue=this.options.queue;t.elem=this.elem;t.saveState=function(){if(jQuery._data(self.elem,"fxshow"+self.prop)===undefined){if(self.options.hide){jQuery._data(self.elem,"fxshow"+self.prop,self.start);}else if(self.options.show){jQuery._data(self.elem,"fxshow"+self.prop,self.end);}}};if(t()&&jQuery.timers.push(t)&&!timerId){timerId=setInterval(fx.tick,fx.interval);}},show:function(){var dataShow=jQuery._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=dataShow||jQuery.style(this.elem,this.prop);this.options.show=true;if(dataShow!==undefined){this.custom(this.cur(),dataShow);}else{this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());}
jQuery(this.elem).show();},hide:function(){this.options.orig[this.prop]=jQuery._data(this.elem,"fxshow"+this.prop)||jQuery.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0);},step:function(gotoEnd){var p,n,complete,t=fxNow||createFxNow(),done=true,elem=this.elem,options=this.options;if(gotoEnd||t>=options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();options.animatedProperties[this.prop]=true;for(p in options.animatedProperties){if(options.animatedProperties[p]!==true){done=false;}}
if(done){if(options.overflow!=null&&!jQuery.support.shrinkWrapBlocks){jQuery.each(["","X","Y"],function(index,value){elem.style["overflow"+value]=options.overflow[index];});}
if(options.hide){jQuery(elem).hide();}
if(options.hide||options.show){for(p in options.animatedProperties){jQuery.style(elem,p,options.orig[p]);jQuery.removeData(elem,"fxshow"+p,true);jQuery.removeData(elem,"toggle"+p,true);}}
complete=options.complete;if(complete){options.complete=false;complete.call(elem);}}
return false;}else{if(options.duration==Infinity){this.now=t;}else{n=t-this.startTime;this.state=n/options.duration;this.pos=jQuery.easing[options.animatedProperties[this.prop]](this.state,n,0,1,options.duration);this.now=this.start+((this.end-this.start)*this.pos);}
this.update();}
return true;}};jQuery.extend(jQuery.fx,{tick:function(){var timer,timers=jQuery.timers,i=0;for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1);}}
if(!timers.length){jQuery.fx.stop();}},interval:13,stop:function(){clearInterval(timerId);timerId=null;},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(fx){jQuery.style(fx.elem,"opacity",fx.now);},_default:function(fx){if(fx.elem.style&&fx.elem.style[fx.prop]!=null){fx.elem.style[fx.prop]=fx.now+fx.unit;}else{fx.elem[fx.prop]=fx.now;}}}});jQuery.each(fxAttrs.concat.apply([],fxAttrs),function(i,prop){if(prop.indexOf("margin")){jQuery.fx.step[prop]=function(fx){jQuery.style(fx.elem,prop,Math.max(0,fx.now)+fx.unit);};}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem;}).length;};}
function defaultDisplay(nodeName){if(!elemdisplay[nodeName]){var body=document.body,elem=jQuery("<"+nodeName+">").appendTo(body),display=elem.css("display");elem.remove();if(display==="none"||display===""){if(!iframe){iframe=document.createElement("iframe");iframe.frameBorder=iframe.width=iframe.height=0;}
body.appendChild(iframe);if(!iframeDoc||!iframe.createElement){iframeDoc=(iframe.contentWindow||iframe.contentDocument).document;iframeDoc.write((jQuery.support.boxModel?"<!doctype html>":"")+"<html><body>");iframeDoc.close();}
elem=iframeDoc.createElement(nodeName);iframeDoc.body.appendChild(elem);display=jQuery.css(elem,"display");body.removeChild(iframe);}
elemdisplay[nodeName]=display;}
return elemdisplay[nodeName];}
var getOffset,rtable=/^t(?:able|d|h)$/i,rroot=/^(?:body|html)$/i;if("getBoundingClientRect"in document.documentElement){getOffset=function(elem,doc,docElem,box){try{box=elem.getBoundingClientRect();}catch(e){}
if(!box||!jQuery.contains(docElem,elem)){return box?{top:box.top,left:box.left}:{top:0,left:0};}
var body=doc.body,win=getWindow(doc),clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,scrollTop=win.pageYOffset||jQuery.support.boxModel&&docElem.scrollTop||body.scrollTop,scrollLeft=win.pageXOffset||jQuery.support.boxModel&&docElem.scrollLeft||body.scrollLeft,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft;return{top:top,left:left};};}else{getOffset=function(elem,doc,docElem){var computedStyle,offsetParent=elem.offsetParent,prevOffsetParent=elem,body=doc.body,defaultView=doc.defaultView,prevComputedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top=elem.offsetTop,left=elem.offsetLeft;while((elem=elem.parentNode)&&elem!==body&&elem!==docElem){if(jQuery.support.fixedPosition&&prevComputedStyle.position==="fixed"){break;}
computedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle;top-=elem.scrollTop;left-=elem.scrollLeft;if(elem===offsetParent){top+=elem.offsetTop;left+=elem.offsetLeft;if(jQuery.support.doesNotAddBorder&&!(jQuery.support.doesAddBorderForTableAndCells&&rtable.test(elem.nodeName))){top+=parseFloat(computedStyle.borderTopWidth)||0;left+=parseFloat(computedStyle.borderLeftWidth)||0;}
prevOffsetParent=offsetParent;offsetParent=elem.offsetParent;}
if(jQuery.support.subtractsBorderForOverflowNotVisible&&computedStyle.overflow!=="visible"){top+=parseFloat(computedStyle.borderTopWidth)||0;left+=parseFloat(computedStyle.borderLeftWidth)||0;}
prevComputedStyle=computedStyle;}
if(prevComputedStyle.position==="relative"||prevComputedStyle.position==="static"){top+=body.offsetTop;left+=body.offsetLeft;}
if(jQuery.support.fixedPosition&&prevComputedStyle.position==="fixed"){top+=Math.max(docElem.scrollTop,body.scrollTop);left+=Math.max(docElem.scrollLeft,body.scrollLeft);}
return{top:top,left:left};};}
jQuery.fn.offset=function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i);});}
var elem=this[0],doc=elem&&elem.ownerDocument;if(!doc){return null;}
if(elem===doc.body){return jQuery.offset.bodyOffset(elem);}
return getOffset(elem,doc,doc.documentElement);};jQuery.offset={bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;if(jQuery.support.doesNotIncludeMarginInBodyOffset){top+=parseFloat(jQuery.css(body,"marginTop"))||0;left+=parseFloat(jQuery.css(body,"marginLeft"))||0;}
return{top:top,left:left};},setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");if(position==="static"){elem.style.position="relative";}
var curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=(position==="absolute"||position==="fixed")&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={},curTop,curLeft;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left;}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0;}
if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset);}
if(options.top!=null){props.top=(options.top-curOffset.top)+curTop;}
if(options.left!=null){props.left=(options.left-curOffset.left)+curLeft;}
if("using"in options){options.using.call(elem,props);}else{curElem.css(props);}}};jQuery.fn.extend({position:function(){if(!this[0]){return null;}
var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();offset.top-=parseFloat(jQuery.css(elem,"marginTop"))||0;offset.left-=parseFloat(jQuery.css(elem,"marginLeft"))||0;parentOffset.top+=parseFloat(jQuery.css(offsetParent[0],"borderTopWidth"))||0;parentOffset.left+=parseFloat(jQuery.css(offsetParent[0],"borderLeftWidth"))||0;return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left};},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||document.body;while(offsetParent&&(!rroot.test(offsetParent.nodeName)&&jQuery.css(offsetParent,"position")==="static")){offsetParent=offsetParent.offsetParent;}
return offsetParent;});}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?(prop in win)?win[prop]:jQuery.support.boxModel&&win.document.documentElement[method]||win.document.body[method]:elem[method];}
if(win){win.scrollTo(!top?val:jQuery(win).scrollLeft(),top?val:jQuery(win).scrollTop());}else{elem[method]=val;}},method,val,arguments.length,null);};});function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:false;}
jQuery.each({Height:"height",Width:"width"},function(name,type){var clientProp="client"+name,scrollProp="scroll"+name,offsetProp="offset"+name;jQuery.fn["inner"+name]=function(){var elem=this[0];return elem?elem.style?parseFloat(jQuery.css(elem,type,"padding")):this[type]():null;};jQuery.fn["outer"+name]=function(margin){var elem=this[0];return elem?elem.style?parseFloat(jQuery.css(elem,type,margin?"margin":"border")):this[type]():null;};jQuery.fn[type]=function(value){return jQuery.access(this,function(elem,type,value){var doc,docElemProp,orig,ret;if(jQuery.isWindow(elem)){doc=elem.document;docElemProp=doc.documentElement[clientProp];return jQuery.support.boxModel&&docElemProp||doc.body&&doc.body[clientProp]||docElemProp;}
if(elem.nodeType===9){doc=elem.documentElement;if(doc[clientProp]>=doc[scrollProp]){return doc[clientProp];}
return Math.max(elem.body[scrollProp],doc[scrollProp],elem.body[offsetProp],doc[offsetProp]);}
if(value===undefined){orig=jQuery.css(elem,type);ret=parseFloat(orig);return jQuery.isNumeric(ret)?ret:orig;}
jQuery(elem).css(type,value);},type,value,arguments.length,null);};});window.jQuerySvg=window.$vg=jQuery;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return jQuery;});}})(window);(function($){var csrftoken=Cookies.get('csrftoken');function csrfSafeMethod(method){return(/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));}
$.ajaxSetup({beforeSend:function(xhr,settings){if(!csrfSafeMethod(settings.type)&&!this.crossDomain){xhr.setRequestHeader("X-CSRFToken",csrftoken);}}});}(jQuery));(function($){$.meDialog={open:function(dialogName,url,params,ajax_params){$.meLoadingBar.show();$.meDialog.close('#'+dialogName);params=$.extend({modal:true,closeOnEscape:false,},params);var convert_percent=function(units,maximum){if(units!=undefined){if(units=='max'){units=maximum-24;}else if(typeof(units)=='string'){match=units.match(/(.*)%.*/);if(match!=null&&match.length>=2){units=Math.round(maximum*match[1]/100);}}}
return units;};params.width=convert_percent(params.width,$(window).width());params.minWidth=convert_percent(params.minWidth,$(window).width());params.maxWidth=convert_percent(params.maxWidth,$(window).width());params.height=convert_percent(params.height,$(window).height());params.minHeight=convert_percent(params.minHeight,$(window).height());params.maxHeight=convert_percent(params.maxHeight,$(window).height());ajax_params=$.extend({url:url,dataType:'html',type:'GET',success:function(ret){var dlg=$('#'+dialogName);if(dlg.length==0){$('body').append("<div id='"+dialogName+"' class='loading-dialog-div' style='display: none'></div>")
dlg=$('#'+dialogName);}
var specified_height=params.height;dlg.on('dialogopen',function(event,ui){var buttonpanel=$(this).find('.dialog-button-panel');if(buttonpanel.length>0){$(this).dialog('option','buttons',[{text:'placeholder'}]);$(this).closest('.ui-dialog').find('.ui-dialog-buttonpane').html(buttonpanel);}
var max_height=$(window).height();if(specified_height==undefined&&$('#'+dialogName).closest('.ui-dialog').outerHeight()>max_height){var dialog_to_div_diff=$('#'+dialogName).closest('.ui-dialog').outerHeight()-$('#'+dialogName).outerHeight();dlg.height(max_height-dialog_to_div_diff-20);}
$('.ui-widget-overlay').css('z-index','3000');$(this).closest('.ui-dialog').css('z-index','3040');});dlg.html(ret);dlg.on('dialogopen',function(event,ui){$(this).removeClass('loading-dialog-div')});dlg.on('dialogclose',function(event,ui){if($(this).length>0){$(this).remove();}});$.meLoadingBar.hide();dlg.dialog(params);},},ajax_params);$.ajax(ajax_params);},close:function(dialog,options){options=$.extend({delay:0,reload:false,},options);elem=$(dialog).closest('.ui-dialog').find('.ui-dialog-content');if(elem.length>0){if(options.delay&&options.delay>0){elem.powerTimer({delay:options.delay,func:function(){elem.dialog('close');elem.remove();if(options.reload){window.location.reload();}},});}else{elem.dialog('close');elem.remove();if(options.reload){window.location.reload();}}}},closeAll:function(){$(".ui-dialog-content").each(function(){$(this).dialog("close");$(this).remove();});},open2:function(options){options=$.extend(true,{url:null,id:'myeducator-dialog',title:'MyEducator',idBody:null,width:null,ajax:{},modal:{keyboard:false,backdrop:'static',},buttons:{},},options);if(options.idBody==null){options.idBody=options.id+'_body';}
if($('.modal').length>0){options.appendToSelector='body'}
$.meLoadingBar.show();if(typeof(options.width)==='number'){options.width=options.width+'px'}
options.ajax.error=$.isArray(options.ajax.error)?options.ajax.error:options.ajax.error?[options.ajax.error]:[];options.ajax.error.unshift(function(xhr,status,msg){$.meLoadingBar.hide();var message=xhr.responseText=='None'?msg:xhr.responseText
$.meDialog.topMessage(ME_CONSTANTS.meDialog.strLoadError+message,4000,'danger');});options.ajax.success=$.isArray(options.ajax.success)?options.ajax.success:options.ajax.success?[options.ajax.success]:[];options.ajax.success.unshift(function(){$.meLoadingBar.hide();});options.onShow=forceFuncArray(options.onShow);options.onCreate=[];options.onSuccess=[];options.onShow.unshift(function(){var body=$(this).find('.modal-body');var bodyHeight=body.outerHeight(true);var dlgHeight=$(this).find('.modal-dialog').outerHeight(true)+24;var bodyHeightMax=$(window).height()-(dlgHeight-bodyHeight);body.attr('data-max-height',bodyHeightMax);if(bodyHeight>bodyHeightMax){body.height(bodyHeightMax);}});options.onSuccess.push(function(data){return data+['<div class="modal_slider_padding"></div>','<div class="modal_slider_container"></div>',].join('');});return $.loadmodal(options);},close2:function(dialog,options){options=$.extend({delay:0,reload:false,},options);elem=$(dialog).closest('.modal');if(elem.length>0){function closeNow(){elem.modal('hide').data('bs.modal',null);if(options.reload){window.location.reload();}}
if(options.delay&&options.delay>0){elem.powerTimer({delay:options.delay,func:closeNow,});}else{closeNow();}}},confirm:function(title,message,buttons,width,modal_options,main_button_class){width=width||500;buttons=buttons||{};main_button_class=main_button_class||'btn btn-primary';modal_options=$.extend(true,{keyboard:false,backdrop:'static',closeButton:false,},modal_options);var div=$(['<div class="modal fade confirm-modal" tabindex=-1 aria-modal="true">','  <div class="modal-dialog modal-lg">','    <div class="modal-content">','      <div class="modal-header">',modal_options.closeButton?'        <button aria-label="Close" class="close" data-dismiss="modal" type="button">x</button>':'','        <h4 class="modal-title">'+title+'</h4>','      </div>','      <div class="modal-body">','        <div class="modal-body-inner"></div>',!$.isEmptyObject(buttons)?'        <div class="button-panel"></div>':'','      </div>','    </div>','  </div>','</div>',].join('\n'));div.find('.modal-body-inner').html(message);div.find('.modal-dialog').css('width',width);if(div.find('.button-panel').length>0){var button_class=main_button_class;$.each(buttons,function(key,func){var button=$('<button class="'+button_class+'">'+key+'</button>');div.find('.button-panel').append(button);button.on('click.button-panel',function(evt){if(func){func.call(this,evt);}
div.modal('hide');});button_class='btn btn-default';});}
div.on('hidden.bs.modal',function(e){div.remove();});div.on('shown.bs.modal',function(e){$('.modal button').first().focus()});$('body').append(div);div.modal(modal_options);},yesno:function(title,message,yes_callback,no_callback,width){var buttons={};buttons[ME_CONSTANTS.meDialog.strYes]=yes_callback;buttons[ME_CONSTANTS.meDialog.strNo]=no_callback;$.meDialog.confirm(title,message,buttons,width);},warningyesno:function(title,message,yes_callback,no_callback,width){var buttons={};buttons[ME_CONSTANTS.meDialog.strYes]=yes_callback;buttons[ME_CONSTANTS.meDialog.strNo]=no_callback;$.meDialog.confirm(title,message,buttons,width,{},'btn btn-danger');},message:function(title,message,callback,width){var buttons={};buttons[ME_CONSTANTS.meDialog.strOK]=callback;$.meDialog.confirm(title,message,buttons,width,{backdrop:true,keyboard:true,});},message2:function(title,message,width){$.meDialog.confirm(title,message,{},width,{backdrop:true,keyboard:true,closeButton:true,});},input:function(title,message,initial,callback,width){var content=$(['<div class="input-container">','<div class="input-message" aria-labelledby="message-input"></div>','<div class="input-control"><input id="message-input" type="text" /></div>','</div>',].join('\n'));content.find('.input-message').html(message);if(initial!=undefined){content.find('.input-control').find('input').val(initial);}
var buttons={};buttons[ME_CONSTANTS.meDialog.strSubmit]=function(e){if(callback){callback(e,content.find('.input-control').find('input').val());}};buttons[ME_CONSTANTS.meDialog.strCancel]=function(e){};$.meDialog.confirm(title,content,buttons,width);$('.confirm-modal').on('shown.bs.modal',function(){$(this).find('.input-control').find('input').select();});},topMessage:function(html,duration,type){var dlg=$('<div class="meDialog_topMessage"></div>');dlg.hide();type=typeof type=='undefined'?'warning':type;var alert=$('<div class="inline-block alert alert-'+type+'"></div>');alert.append('<button type="button" class="close ml-2" aria-hidden="true" data-dismiss="alert">&times;</button>');alert.append(html)
dlg.html(alert);$('#header_message_center_container').append(dlg);dlg.fadeIn(600);if(duration==undefined){duration=5000;}
if(duration>0){dlg.powerTimer({delay:duration,func:function(){dlg.fadeOut(600,function(){dlg.remove();});}});}
return dlg;},}
function forceFuncArray(ar){if(!ar){return[];}
if($.isArray(ar)){return ar;}
return[ar];}}(jQuery));(function($){jQuery.fn.loadReplace=function(url,data,callback){return this.each(function(){var elem=$(this);$.ajax({url:url,dataType:'html',data:data,success:function(html,status,xhr){elem.children().detach();var new_elem=$(html);elem.replaceWith(new_elem);if(callback){callback.apply(new_elem.get(0),[html,status,xhr]);}},error:function(xhr,status,errorStr){$.meDialog.topMessage(ME_CONSTANTS.meLoadReplace.strLoadError+errorStr,4000,"danger");},});});};}(jQuery));(function($){$.meLoadingBar={STYLE_DEFAULT:1,STYLE_ROTATING_CIRCLE:2,show:function(name,progress_bar_style,modal){name=name||'progress_bar_animation';var div=$('#progress_bar_animation');if(div.length==0){progress_bar_style=progress_bar_style||$.meLoadingBar.STYLE_DEFAULT;var img='<img class="progress_bar_icon" src="/static/base_app/media/progress-bar-animation.gif" style="opacity: 0.0; position: fixed; left: 50%; top: 50%; margin-top: -10px; margin-left: -110px; z-index: 100002;"/>';if(progress_bar_style==$.meLoadingBar.STYLE_ROTATING_CIRCLE){img='<div class="progress_bar_icon icon icon_spinner10 icon_1p8x icon_spin2 icon_color_white" style="opacity: 0.0; position: fixed; right: 12px; top: 12px; z-index: 100002;"/></div>';}
if(modal===false){div=$('<div id="progress_bar_animation">'+img+'</div>');}else{div=$('<div id="progress_bar_animation" style="background-color: rgba(240, 240, 240, 0); position: fixed; height: 100%; width: 100%; z-index: 100001;">'+img+'</div>');}
$('body').prepend(div);div.find('.progress_bar_icon').animate({opacity:0.9},300);}
var name_array=div.data('progress_bar_names')||[];if($.inArray(name,name_array)<0){name_array.push(name);}
div.data('progress_bar_names',name_array);return name;},isShowing:function(){return $('#progress_bar_animation').length>0;},hide:function(name){var div=$('#progress_bar_animation');if(div.length>0){name=name||'progress_bar_animation';var name_array=div.data('progress_bar_names')||[];var index=$.inArray(name,name_array);if(index>=0){name_array.splice(index,1);div.data('progress_bar_names',name_array);}
if(name_array.length==0){div.find('.progress_bar_icon').animate({opacity:0.0},300,function(){div.remove();});}}
return name;},}
$(function(){$(document).off('ajaxSend.loading_bar').on('ajaxSend.loading_bar',function(e,xhr,options){if(options.progressBarStyle!==false&&options.progressBarStyle!==null){options.progressBarName=$.meLoadingBar.show(options.progressBarName,options.progressBarStyle);}}).off('ajaxComplete.loading_bar').on('ajaxComplete.loading_bar',function(e,xhr,options){if(options.progressBarStyle!==false&&options.progressBarStyle!==null){$.meLoadingBar.hide(options.progressBarName);}});});}(jQuery));(function($){$.extend($.scrollTo.defaults,{offset:{left:0,top:-1*($('#header_navigation_container').outerHeight(true)+6),},axis:'y',});}(jQuery));(function($){$(function(){var ME_CONFIRM_KEY='me-click-me-yesno';var ME_CONFIRM_OPTIONS={'title':ME_CONSTANTS.meConfirm.strConfirm,'text':'','type':'primary','yes':[ME_CONSTANTS.meConfirm.strYes],'no':[ME_CONSTANTS.meConfirm.strNo],'target':'','targetReplace':'',};$(document).off('click.data-me-confirm','a[data-me-confirm]').on('click.data-me-confirm','a[data-me-confirm]',function(event){var a=$(this);if(a.data(ME_CONFIRM_KEY)){return true;}
event.preventDefault();var options=$.parseJSON(Base64.decode(a.attr('data-me-confirm')));options.yes=forceArray(options.yes);options.no=forceArray(options.no);options=$.extend(true,{},ME_CONFIRM_OPTIONS,options);var sep=a.attr('href').indexOf('?')<0?'?':'&';var buttons={};$.each(options.yes,function(i,buttontext){var url=a.attr('href')+sep+'me-confirm-button='+encodeURIComponent(buttontext);buttons[buttontext]=function(){if(options.target=='script'){$.getScript(url);}else if(options.targetReplace){$.ajax(url).done(function(html){$(options.targetReplace).replaceWith(html);});}else if(options.target){$(options.target).load(url);}else{a.data(ME_CONFIRM_KEY,true);a.data('me-confirm-button',buttontext);a.get(0).click();}};});$.each(options.no,function(i,buttontext){buttons[buttontext]=function(){};});$.meDialog.confirm(options.title,options.text,buttons,null,null,'btn btn-'+options.type);return false;});});function forceArray(o){if($.isArray(o)){return o;}else if(typeof(o)=='undefined'||o===null||o===NaN){return[];}
return[o];}}(jQuery));(function($){jQuery.fn.extend({meSlider:function(action,show){if(action=='show'){show=true;}else if(action=='hide'){show=false;}
this.each(function(){var slider=$(this);var visible=slider.is(':visible');if((visible&&show===true)||(!visible&&show===false))
return;var padding=slider.siblings('.modal_slider_padding');slider.slideToggle({step:function(){if(padding.length>0){padding.height(slider.outerHeight(true));}},});});return this;}});}(jQuery));(function($){$.meRedirector={RESPONSE_MESSAGE_KEY:'me_response_message',showResponseMessage:function(){var encoded_info=Cookies.get($.meRedirector.RESPONSE_MESSAGE_KEY,{domain:ME_CONSTANTS.meRedirector.cookieDomain});if(encoded_info){var info=null;try{info=JSON.parse(Base64.decode(encoded_info));}catch(err){console.log(err.message);}
if(info){if(['success','warning','danger','info'].indexOf(info.dialog_type)>=0){var elem=$(info.selector);if(elem.length>0){elem.append('<div class="alert alert-'+info.dialog_type+' inline-block">'+info.message+'</div>');}else{$.meDialog.topMessage(info.message,4000,info.dialog_type);}}else{$.meDialog.message(info.title,info.message,null,500);}}
Cookies.remove($.meRedirector.RESPONSE_MESSAGE_KEY,{domain:ME_CONSTANTS.meRedirector.cookieDomain});}},}
$(function(){$(document).off('ajaxComplete.me_response_message').on('ajaxComplete.me_response_message',function(e,xhr,options){if(!xhr.getResponseHeader('Redirect-Location')){$.meRedirector.showResponseMessage();}});});}(jQuery));(function($){DEFAULTS={defaultState:false,initialState:false,contentUrl:false,toggleAnimationDuration:400,restoreStateOnLoad:true,restoreStateOnLoadKey:undefined,imageClassClosed:'fa-chevron-right',imageClassOpen:'fa-chevron-down',expand:undefined,expandFinished:undefined,collapse:undefined,collapseFinished:undefined,}
$.fn.collapsibleSection=function(options){options=$.extend({},$.fn.collapsibleSection.defaults,options);$(this).each(function(i,elem){main($(elem));});function main(container){var title=container.find('.collapsible-section-title');var content=container.find('.collapsible-section-content');if(!container.attr('id')){container.attr('id',get_next_unique_id());}
if(!title.attr('id')){title.attr('id',container.attr('id')+'-title');}
if(!content.attr('id')){content.attr('id',container.attr('id')+'-content');}
title.prepend('<div class="collapsible-section-toggle"><div class="fas '+options.imageClassClosed+'"></div></div>');title.addClass('collapsible-section-container-title');title.attr('aria-controls',content.attr('id'));title.attr('role','button');content.addClass('collapsible-section-container-content');container.addClass('collapsible-section-container');if(options.expand){container.on('collapsible-section-expand',options.expand);}
if(options.expandFinished){container.on('collapsible-section-expand-finished',options.expandFinished);}
if(options.collapse){container.on('collapsible-section-collapse',options.collapse);}
if(options.collapseFinished){container.on('collapsible-section-collapse-finished',options.collapseFinished);}
container.css('visibility','visible');title.off('click.collapsibleSections').on('click.collapsibleSections',function(event,animationDuration){if(event.target==this||$(event.target).closest('.collapsible-section-toggle').length>0){toggle_activity_group(container,animationDuration!==undefined?animationDuration:options.toggleAnimationDuration);}});if(options.contentUrl){container.off('collapsible-section-content-reload').on('collapsible-section-content-reload',function(){container.data('collapsible_section_content_loaded',true);container.find('.collapsible-section-content').load(options.contentUrl,function(){container.trigger('collapsible-section-load');});});}
container.off('collapsible-section-open').on('collapsible-section-open',function(e,animate_time){toggle_activity_group(container,animate_time||0,true);});container.off('collapsible-section-close').on('collapsible-section-close',function(e,animate_time){toggle_activity_group(container,animate_time||0,false);});if(options.initialState=='opened'){toggle_activity_group(container,0,true);}else if(options.initialState=='closed'){toggle_activity_group(container,0,false);}else{var last_state=$.jStorage.get(getStorageKey(container));if(last_state==undefined&&options.defaultState=='opened'){toggle_activity_group(container,0,true);}else if(last_state==undefined&&options.defaultState=='closed'){}else if(options.restoreStateOnLoad){toggle_activity_group(container,0,last_state);}}}
function getStorageKey(elem){return options.restoreStateOnLoadKey||'collapsibleSection-'+window.location.pathname+'-'+$(elem).attr('id');}
function toggle_activity_group(container,animate_time,expand){var title=container.find('.collapsible-section-container-title');var content=container.find('.collapsible-section-container-content');var imgdiv=container.find('.collapsible-section-toggle').children('div:first');if(expand==undefined){expand=!container.hasClass('collapsible-section-container-opened');}
if(expand){container.trigger('collapsible-section-expand');if(!container.data('collapsible_section_content_loaded')){container.trigger('collapsible-section-content-reload');}
container.addClass('collapsible-section-container-opened');imgdiv.addClass(options.imageClassOpen);imgdiv.removeClass(options.imageClassClosed);title.attr('aria-expanded',true);content.stop().slideDown(animate_time,function(){container.trigger('collapsible-section-expand-finished');});}else{container.trigger('collapsible-section-collapse');title.attr('aria-expanded',false);content.stop().slideUp(animate_time,function(){container.removeClass('collapsible-section-container-opened');imgdiv.removeClass(options.imageClassOpen);imgdiv.addClass(options.imageClassClosed);container.trigger('collapsible-section-collapse-finished');});}
if(options.restoreStateOnLoad&&container.attr('id')){$.jStorage.set(getStorageKey(container),expand);}}
return this;}
$.fn.collapsibleSection.defaults=DEFAULTS
var next_id=0;function get_next_unique_id(){next_id+=1;return'collapsible-section-unique-'+next_id;}})(jQuery);$(function(){CKEDITOR.plugins.addExternal('image_gallery','/static/base_app/scripts/global/ckeditor_plugins/image_gallery/plugin.js');});